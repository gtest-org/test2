2014-03-12T00:00:38  <foobio> clarkb: i think we never did anything for 1253774, no. probably first you want to hop onto bare-precise, py3k-precise and devsatck-precise node examples and see what's lingering in their sources
2014-03-12T00:00:44  <sdague> yeh, salv-orlando if there were different configs that you liked, we could do them. But I definitely think running more than one tempest job helped the project
2014-03-12T00:00:50  <clarkb> foobio: ya just held a devstack-precise node to do that
2014-03-12T00:00:58  <clarkb> foobio: there is the puppetlabs sources list in sources.list.d
2014-03-12T00:01:02  *** aysyd has quit IRC
2014-03-12T00:01:24  <foobio> clarkb: noting that each of them may have different stray things (for example the py3k nodes have ppa links for python3.3 and pypy)
2014-03-12T00:01:31  <clarkb> foobio: quick question though. will apt-get freak out if it has installed a thing from a source (puppet) which results in a newer version of the normal repo when it goes to install other things?
2014-03-12T00:01:41  <salv-orlando> sdague: I think it's ok this way. I'm not sure we need to enable different configs at this stage. I just saw the doubles and wondered if it was by design or not.
2014-03-12T00:01:44  <foobio> clarkb: it will not care in the least
2014-03-12T00:01:47  <clarkb> foobio: I think my plan is to rm /etc/sources.list.d/*
2014-03-12T00:01:55  <clarkb> foobio: awesome. I will just propose a change that does ^
2014-03-12T00:02:06  <foobio> clarkb: it leaves packages it doesn't know about alone unless it sees newer versions available somewhere it knows about
2014-03-12T00:02:08  <clarkb> foobio: rm'ing sources.list.d/* is sufficient right?
2014-03-12T00:02:13  <foobio> clarkb: sounds perfectly safe
2014-03-12T00:02:57  <foobio> clarkb: note that if that were not safe, it would also muck with packages you install via dpkg -i somefile.deb
2014-03-12T00:02:57  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/elastic-recheck: Add fingerprint for bug 1291108  https://review.openstack.org/79812
2014-03-12T00:03:31  <foobio> clarkb: you *do* want to do another apt-get update after that though, just to be on the safe side (in case something later tries to do an apt-get install without first doing another update)
2014-03-12T00:03:40  <salv-orlando> sdague: as a side question, do you remember if before the integrated gate template we were running exercises for neutron jobs?
2014-03-12T00:03:52  <krotscheck> jeblair, clarkb: We test our migrations against mysql and postgres - see TestMigrations, it overrides the necessary properties to make the cifail switch not flip. You're right though, we don't set up a DB per test.
2014-03-12T00:03:56  <sdague> salv-orlando: a long time ago
2014-03-12T00:04:10  <sdague> we phased out exercises basically entirely last summer, except for grenade
2014-03-12T00:04:14  *** gokrokve has quit IRC
2014-03-12T00:04:22  <sdague> and we got rid of them in grenade a month ago
2014-03-12T00:04:34  <krotscheck> jeblair, clarkb: hence the yelling.
2014-03-12T00:05:41  <clarkb> foobio: oh right thanks
2014-03-12T00:06:53  *** yamahata__ has joined #openstack-infra
2014-03-12T00:07:01  *** thuc_ has joined #openstack-infra
2014-03-12T00:07:52  *** thuc_ has quit IRC
2014-03-12T00:08:04  *** thuc_ has joined #openstack-infra
2014-03-12T00:08:42  <salv-orlando> sdague: ok.. so exercise should not be running for check-tempest-dvsm-neutron?
2014-03-12T00:09:01  <jogo> mriedem:   unit test  are called gate in check queue as well
2014-03-12T00:09:15  *** thuc_ has quit IRC
2014-03-12T00:09:23  <mriedem> jogo: well kiss my grits
2014-03-12T00:09:24  <jogo> re: https://review.openstack.org/#/c/79812/
2014-03-12T00:10:02  <clarkb> we lost gerrit bot
2014-03-12T00:10:03  <clarkb> foobio: https://review.openstack.org/79814
2014-03-12T00:10:42  * jogo likes his grits cheesy
2014-03-12T00:10:42  <openstackgerrit> Clark Boylan proposed a change to openstack-infra/config: Remove unneeded apt sources from nodepool nodes.  https://review.openstack.org/79814
2014-03-12T00:10:43  <clarkb> oh nvermind, just slow
2014-03-12T00:10:43  <mriedem> jogo: anyway, if we drop build_name from the query that's one less wildcard search
2014-03-12T00:10:43  <mriedem> and sdague has me all paranoid about wildcards in the queries now
2014-03-12T00:10:43  <mriedem> jogo: or is that somehow offset by filtering by build_name, even with the wildcard?
2014-03-12T00:10:43  <mriedem> clarkb: ^?
2014-03-12T00:11:04  <mriedem> i had grits in tennessee last year for the first time, grossed me out
2014-03-12T00:11:24  <jogo> mriedem: not sure which way is better, I agree lets ask clarkb
2014-03-12T00:11:26  <clarkb> mriedem: instead of using the wildcard be specific
2014-03-12T00:11:30  <clarkb> and OR them all together
2014-03-12T00:11:37  <mriedem> yeah, that's the alternative
2014-03-12T00:11:39  <foobio> mriedem: what's gross about grits? you just soak dry corn in wet lye for a while and then...
2014-03-12T00:12:02  <mriedem> pew
2014-03-12T00:12:07  <clarkb> gate-cinder-python27 OR gate-cinder-python26 OR gate-cinder-pypy andso on (I don't think we are testing pypy or py3k with cinder yet, 26 and 27 are the values you need)
2014-03-12T00:12:24  <mriedem> clarkb: we don't even really need build_name in the query though,
2014-03-12T00:12:24  <sdague> salv-orlando: correct
2014-03-12T00:12:33  <mriedem> this only shows up in python UT jobs anyway
2014-03-12T00:12:45  <foobio> mriedem: but really, if you grow up with them, it's no stranger than, say, lutefisk
2014-03-12T00:13:00  <mriedem> foobio: also gross, and my mom's side is swedish
2014-03-12T00:13:13  <mriedem> so every xmas was lutefish or oyster stew, both nasty
2014-03-12T00:13:21  <salv-orlando> sdague: I'm off to bed now, but I'll leave you with this -> http://logs.openstack.org/43/79443/3/check/check-devstack-dsvm-neutron/6118ec2/console.html
2014-03-12T00:13:28  <mriedem> until uncle don put his foot down and brought a ham one year, xmas was saved!
2014-03-12T00:13:33  <foobio> mriedem: you just have an aversion to caustic alkaline-preserved foods, obviously ;)
2014-03-12T00:13:39  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/elastic-recheck: Add fingerprint for bug 1291108  https://review.openstack.org/79812
2014-03-12T00:13:39  <sdague> salv-orlando: so.... that job exists for grenade
2014-03-12T00:13:41  *** mgagne has joined #openstack-infra
2014-03-12T00:13:48  <sdague> except we don't need it any more
2014-03-12T00:14:17  <clarkb> mriedem: right you aren't doing that to make sure you only see those jobs you are doing it so that the poor ES cluster doesn't have to search everything
2014-03-12T00:14:18  <openstackgerrit> Davanum Srinivas (dims) proposed a change to openstack-infra/devstack-gate: WIP : Try patched libvirt from @hallyn - Not for review  https://review.openstack.org/79816
2014-03-12T00:14:22  <clarkb> mriedem: filters restrict the search space
2014-03-12T00:14:30  <mriedem> clarkb: ok, that's the answer i was looking for
2014-03-12T00:14:50  *** dstufft has quit IRC
2014-03-12T00:14:55  <salv-orlando> sdague: so I can avoid worrying about those failures, and move on to the next one?
2014-03-12T00:15:00  <sdague> clarkb: so in reality, do you think wildcards in filters like that is actually helpful or not
2014-03-12T00:15:26  *** dstufft has joined #openstack-infra
2014-03-12T00:15:28  <sdague> salv-orlando: yeh, I think we can actually probably delete that job honestly
2014-03-12T00:15:36  <salv-orlando> ok thanks then
2014-03-12T00:15:39  <salv-orlando> and goodnight!
2014-03-12T00:15:41  <clarkb> sdague: I think it is less helpful. wildcards are a search. non wildcards are a filter
2014-03-12T00:15:44  <sdague> goodnight
2014-03-12T00:16:01  <clarkb> sdague: so by having that as a wildcard we have to serach through that space. having it as a filter reduces any remaining search space
2014-03-12T00:16:19  <sdague> clarkb: so if that was SQL, it would actually be slower with the wildcards
2014-03-12T00:16:45  <sdague> because the message field is full text indexed, so it's pretty fast
2014-03-12T00:17:01  <sdague> but that ends up being string compares with regex, which is slow
2014-03-12T00:17:02  <clarkb> sdague: thats what I am saying
2014-03-12T00:17:07  <clarkb> wildcards are slower
2014-03-12T00:17:22  <sdague> clarkb: I mean slower with wildcards, then making no reference to that field at all
2014-03-12T00:17:51  <mriedem> ^ that's what i was wondering
2014-03-12T00:17:54  <sdague> as in deleting the filter would make the query faster
2014-03-12T00:18:05  *** yamahata has joined #openstack-infra
2014-03-12T00:18:06  <clarkb> sdague: making no reference in this case is probbaly slower because then the console.html for every single job in the last 2 weeks will be searched
2014-03-12T00:18:24  <clarkb> sdague: rather than searching through only the those for gate-python-cinder2X
2014-03-12T00:18:26  <sdague> right, but the way it will be searched is actually fast
2014-03-12T00:18:35  <sdague> relatively
2014-03-12T00:18:46  *** atiwari has quit IRC
2014-03-12T00:18:53  <clarkb> sdague: right but we are talking orders of magnitude different data that must be combed through (granted the index helps so it isn't that terrible)
2014-03-12T00:18:55  <sdague> it would be interesting to ask an ES person about things like these actually
2014-03-12T00:19:01  <clarkb> sdague: I did
2014-03-12T00:19:05  <clarkb> at a local meetup
2014-03-12T00:19:08  <clarkb> sdague: filtering is good
2014-03-12T00:19:12  <clarkb> filtering != wildcards
2014-03-12T00:19:14  <sdague> ok, awesome +1
2014-03-12T00:19:26  <sdague> right, filtering definitely good
2014-03-12T00:19:41  <sdague> I guess the wildcard thing would be interesting to understand
2014-03-12T00:19:46  <clarkb> so explicitly spell it out. build_name:"gate-cinder-python26" OR build_name:"gate-cinder-python27"
2014-03-12T00:19:54  <sdague> right that would be faster
2014-03-12T00:20:14  <clarkb> sdague: I think if you flip the order of the searches it may be faster
2014-03-12T00:20:19  <clarkb> console.html is about half our log data
2014-03-12T00:20:30  <clarkb> so on a busy day a quarter of a billion documents
2014-03-12T00:20:34  <sdague> it doesn't do query reordering automatically?
2014-03-12T00:20:37  <sdague> most of those do
2014-03-12T00:20:56  *** thuc has joined #openstack-infra
2014-03-12T00:21:04  <clarkb> if you can restrict that first with a relatively cheap wildcard serach to go from .25 billion to .01 billion I think you win
2014-03-12T00:21:22  <clarkb> sdague: I am not sure. the behavior I have seen is that order matters but I haven't heard that from someone that actually know
2014-03-12T00:21:34  <sdague> so it might be really nice to add another tag for "unittests"
2014-03-12T00:21:37  *** thuc has quit IRC
2014-03-12T00:21:46  <clarkb> sdague: we don't have a reliable way to do that
2014-03-12T00:21:51  <clarkb> same problem as slave az and image
2014-03-12T00:21:53  <sdague> because then we could tag:unittests AND project:openstack/cinder
2014-03-12T00:22:08  *** thuc has joined #openstack-infra
2014-03-12T00:22:33  <sdague> clarkb: *python* ?
2014-03-12T00:22:41  *** thuc has quit IRC
2014-03-12T00:22:48  <sdague> when we create that field
2014-03-12T00:22:57  <clarkb> sdague: but that misses pypy
2014-03-12T00:23:01  <clarkb> and py3k
2014-03-12T00:23:06  <clarkb> and all the funny django tests
2014-03-12T00:23:09  <clarkb> and so on
2014-03-12T00:23:11  <clarkb> :/
2014-03-12T00:23:12  *** thuc has joined #openstack-infra
2014-03-12T00:23:14  <sdague> ok, well we can add them over time
2014-03-12T00:23:25  <sdague> it would still be much better to filter on
2014-03-12T00:23:31  <sdague> just a thought
2014-03-12T00:23:42  <mriedem> sdague: clarkb: so the take away for me is be really strict now on wildcard usage when i see it in reviews
2014-03-12T00:23:46  *** thuc has quit IRC
2014-03-12T00:23:52  <mriedem> i'd like to get something in the readme at least on wildcards
2014-03-12T00:23:58  <clarkb> sdague: I agree, I just think we need to be better about the information upfront rather than approximating
2014-03-12T00:23:59  <mriedem> we used to say it wasn't supported/didn't work, but it does...
2014-03-12T00:24:07  <clarkb> sdague: because with approximations we will fail and confusion will happen
2014-03-12T00:24:14  *** thuc has joined #openstack-infra
2014-03-12T00:26:17  <sdague> bah, approximations are the spice of life :)
2014-03-12T00:26:43  *** matsuhashi has joined #openstack-infra
2014-03-12T00:26:46  *** mgagne has quit IRC
2014-03-12T00:26:47  <foobio> the approximations must flow
2014-03-12T00:26:50  <mriedem> and he who controls the spice controls the galaxy
2014-03-12T00:26:57  <foobio> d'oh!
2014-03-12T00:27:01  <mriedem> ha
2014-03-12T00:27:21  <mriedem> where is my wife, she loves dune references...
2014-03-12T00:27:24  <openstackgerrit> A change was merged to openstack-infra/jeepyb: Load project settings from ini file, if present.  https://review.openstack.org/71323
2014-03-12T00:27:25  * foobio whistles and walks away from this mess
2014-03-12T00:27:33  <openstackgerrit> Sean Dague proposed a change to openstack/requirements: allow sqla 0.9.x  https://review.openstack.org/79817
2014-03-12T00:27:44  *** bhuvan_ has quit IRC
2014-03-12T00:27:44  *** bhuvan has quit IRC
2014-03-12T00:28:25  <mriedem> sdague: ^ typo in there i think
2014-03-12T00:28:49  *** bhuvan has joined #openstack-infra
2014-03-12T00:28:49  *** bhuvan_ has joined #openstack-infra
2014-03-12T00:29:09  <sdague> mriedem: probably, we need test results anyway
2014-03-12T00:30:51  <mriedem> foobio: clarkb: do you know where the code is that sends out the automatic global-reqs updates to the other projects?
2014-03-12T00:30:58  <openstackgerrit> A change was merged to openstack-infra/elastic-recheck: Add fingerprint for bug 1291108  https://review.openstack.org/79812
2014-03-12T00:31:09  <clarkb> mriedem: ya I will get a link
2014-03-12T00:31:27  <clarkb> mriedem: it needs to not do that when there are changes in the gate otherwise they get kicked out
2014-03-12T00:31:34  <foobio> mriedem: just a sec, let me let clarkb get that for you ;)
2014-03-12T00:31:51  <mriedem> clarkb: what needs to not do what now?
2014-03-12T00:32:14  *** mgagne has joined #openstack-infra
2014-03-12T00:32:19  <foobio> mriedem: when the gate is long, a project might approve their requirements updates change while there is a requirements change ahead of them in te gate
2014-03-12T00:32:21  <clarkb> mriedem: https://git.openstack.org/cgit/openstack-infra/config/tree/modules/jenkins/files/slave_scripts/propose_requirements_update.sh those jobs push updates immediately after a requirements change merges
2014-03-12T00:32:37  <clarkb> then what foobio says happens and we kick stuff out of the gate due to new patchsets
2014-03-12T00:32:37  *** markmcclain has joined #openstack-infra
2014-03-12T00:32:52  <foobio> mriedem: then the merger of the global requirements change triggers an update job, and snipes any currently approved per-project requirements changes pending merger
2014-03-12T00:32:53  *** HenryG_ has quit IRC
2014-03-12T00:32:56  <clarkb> also maybe it hsan't been advertized enough but requirements should be feature frozen too for the most part
2014-03-12T00:33:05  <clarkb> so now is a good time to get everything synced
2014-03-12T00:33:24  <mriedem> clarkb: reqs freeze is kind of what i was thinking too
2014-03-12T00:33:29  <foobio> clarkb: yes, i think feature freeze and requirements freeze should go hand-in-hand personally
2014-03-12T00:33:34  *** gokrokve has joined #openstack-infra
2014-03-12T00:33:42  *** mgagne has quit IRC
2014-03-12T00:34:32  <clarkb> I wonder if we can make that a ttx release check, for project in $PROJECTS; do check_reqs_syncage ; done
2014-03-12T00:34:46  <clarkb> iirc nova's havana release was immediately broken because we didn't do ^
2014-03-12T00:35:26  <foobio> though fwiw, in havana there was a lot less time to get all that matched up, but we definitely hoped that for icehouse everyone would be in sync
2014-03-12T00:35:33  <clarkb> this felt like a productive bug day
2014-03-12T00:35:42  <clarkb> pleia2: thank you for putting it together (and reminding us that we should do one)
2014-03-12T00:35:50  <foobio> it was bug-productive, but i didn't get to most of the other stuff i need to do
2014-03-12T00:35:51  <pleia2> clarkb: sure thing :)
2014-03-12T00:35:57  <foobio> pleia2: awesome job!
2014-03-12T00:36:19  *** Sukhdev has quit IRC
2014-03-12T00:36:23  <pleia2> now I get to go to a hockey game
2014-03-12T00:36:30  <mriedem> jogo: looks like the propose_requirements_update.sh script actually does try to match the change-id to the requirements project: https://git.openstack.org/cgit/openstack-infra/config/tree/modules/jenkins/files/slave_scripts/propose_requirements_update.sh#n51
2014-03-12T00:36:40  <StevenK> pleia2: Ice or grass?
2014-03-12T00:36:48  <pleia2> StevenK: ice, with canadians!
2014-03-12T00:36:50  *** mgagne has joined #openstack-infra
2014-03-12T00:37:25  <clarkb> mriedem: thats matching the change id to any existing unmerged requirement updates for that change
2014-03-12T00:37:34  <clarkb> mriedem: this way we push new patchsets not new changes
2014-03-12T00:38:12  <mriedem> clarkb: so what i wanted was to link something like this https://review.openstack.org/#/c/79338/ back to the original global-requirements change
2014-03-12T00:38:23  <mriedem> so we can see the original commit message to know why it's being updated, b/c that's what i do when i review these
2014-03-12T00:38:37  <mriedem> i.e. if it's a bug fix or something
2014-03-12T00:38:53  <jogo> 2014-03-12 00:34:09.832 TRACE nova Stderr: 'Traceback (most recent call last):\n  File "/usr/local/bin/nova-rootwrap", line 6, in <module>\n    from oslo.rootwrap.cmd import main\nImportError: No module named rootwrap.cmd\n'
2014-03-12T00:39:05  <jogo> is that one of those weird oslo namespace issues?
2014-03-12T00:39:08  *** thuc has quit IRC
2014-03-12T00:39:09  <jogo> that was when running grenade locally
2014-03-12T00:39:18  <clarkb> mriedem: you can do that if you can build the state in that script
2014-03-12T00:39:28  <clarkb> mriedem: I would need to think about that more to know how difficult it would be
2014-03-12T00:39:42  *** thuc has joined #openstack-infra
2014-03-12T00:39:44  <clarkb> mriedem: so honestly, I think people should be reviewing openstack/requirements if they care at that level
2014-03-12T00:40:07  <clarkb> mriedem: you are already being tested with the requirements in the global requirements. The only reason we havethose files in nova is so that you can pip install nova without an additional step
2014-03-12T00:40:28  <mriedem> clarkb: well and packagers rely on them right?
2014-03-12T00:40:42  <mriedem> i know we do internally, we use that to update rpm specs
2014-03-12T00:40:46  <clarkb> mriedem: maybe, openstack/requirements is largely for the packagers
2014-03-12T00:40:55  <clarkb> they package the stuff in the list then don't have to worry about stuff on a case by case basis
2014-03-12T00:41:02  <mriedem> right
2014-03-12T00:41:23  *** ociuhandu has quit IRC
2014-03-12T00:41:25  <clarkb> my point is adding that info to the nova requirements update isn't a bad thing but it is the wrong place to be reviewing that data
2014-03-12T00:41:32  <foobio> mriedem: packagers probably rely on the requirements names listed in each project, but the versions in global-reqs are what's going to be needed if they want to package more than one project for teh same distro
2014-03-12T00:41:35  <clarkb> it needs to be reviewed when proposed to openstack/requirements
2014-03-12T00:41:47  *** ryanpetrello has joined #openstack-infra
2014-03-12T00:41:59  <mriedem> foobio: yeah, and that's what we do
2014-03-12T00:42:15  <mriedem> foobio: and so like when you have some projects capped on different versions of sqla/migrate, it gets weird
2014-03-12T00:42:31  <clarkb> pleia2: good point about if debian. do you know how yum works when we add the puppet repos? we should remvoe them from yum too if possible
2014-03-12T00:42:43  <clarkb> mriedem: not really, they are all tested with the same version
2014-03-12T00:42:50  <clarkb> mriedem: which is why openstack/requirements exists
2014-03-12T00:43:12  <foobio> clarkb: well, i suspect he meant it gets weird trying to package them
2014-03-12T00:43:17  *** mrodden1 is now known as mrodden
2014-03-12T00:43:22  <foobio> for the same distro
2014-03-12T00:43:23  <mriedem> clarkb: so as of yesterday i know that all projects run against global-requirements,
2014-03-12T00:43:26  <mriedem> foobio: yes
2014-03-12T00:43:44  *** thuc has quit IRC
2014-03-12T00:43:46  <mriedem> so is it pip/pbr that allows version caps to be ignored?
2014-03-12T00:44:01  <locke105> wut?
2014-03-12T00:44:03  <clarkb> mriedem: foobio but it isn't weird
2014-03-12T00:44:13  <clarkb> you just package what oepnstack/requirements says and ignore what nova says because nova is wrong
2014-03-12T00:44:18  <foobio> mriedem: well, not entirely true. what clarkb neglected to mention is that it's just the integration tests which get run reset to the global requirements lists. not individual project unit tests
2014-03-12T00:44:44  <foobio> clarkb: you have to pay attention to the list of dependencies nova declares, just not necessarily the versions of them
2014-03-12T00:45:06  <mriedem> ok, "you just package what oepnstack/requirements says and ignore what nova says because nova is wrong" is news to me
2014-03-12T00:45:10  <foobio> clarkb: you wouldn't package nova and claim it depends on every single package listed in the global requirements
2014-03-12T00:45:25  <clarkb> foobio: right but we aren't talking about that we are talking about 50 different versions of sqlalchemy
2014-03-12T00:45:33  <mriedem> right, like pecan and the other 20 things that ceilometer uses but no one else does, for exapmle
2014-03-12T00:45:56  <mriedem> but i'm getting the point
2014-03-12T00:46:19  <mriedem> and yeah it's what happens anyway, we just end up updating the nova rpm spec using nova's requirements.txt, but the values in there match global requirements more or less anyway
2014-03-12T00:46:22  *** rms_13 has left #openstack-infra
2014-03-12T00:46:29  <foobio> clarkb: true... though if nova doesn't keep up to date on global requirements sync, it may run with the versions in global-reqs per our integration tests, but may not be able to pass its own unit tests
2014-03-12T00:46:32  <mriedem> we're just usually a day or so behind b/c someone in nova has to merge those changes
2014-03-12T00:47:03  <foobio> corner case, but i expect it to happen at some point
2014-03-12T00:47:21  <mriedem> so is there value in updating the sync commit message to explain some of this for reviewers?
2014-03-12T00:47:23  <clarkb> foobio: it is certianly possibly
2014-03-12T00:47:26  <clarkb> *possible
2014-03-12T00:47:42  <mriedem> like 'if you're worried about testing, you're too late because it's already tested, this is more or less for downstream CD'
2014-03-12T00:47:47  <clarkb> mriedem: IMO it doesn't hurt, but I also think that if you care about that at that level you need to review openstack/requirements changes instead
2014-03-12T00:47:59  <foobio> openstack proves the infinite monkey theorem on a regular basis
2014-03-12T00:48:14  <mriedem> clarkb: my caring is really only in doing some kind of review on these changes when they show up in nova
2014-03-12T00:48:16  <clarkb> mriedem: I don't want nova to get the impression that they can refuse an update because they don't like the commit from requirements
2014-03-12T00:48:18  <mriedem> *on doing
2014-03-12T00:48:22  <clarkb> it should've been refused in requirements
2014-03-12T00:48:26  *** thuc has joined #openstack-infra
2014-03-12T00:48:30  <mriedem> clarkb: no i get that
2014-03-12T00:48:32  <mriedem> not my point
2014-03-12T00:48:32  * locke105 google inifinite monkey theorem
2014-03-12T00:48:42  <locke105> googles* bah
2014-03-12T00:48:58  <mriedem> so i'm sure this has been asked, but then why don't we just auto-merge those changes in the projects if we shouldn't care about them there?
2014-03-12T00:48:59  *** thuc has quit IRC
2014-03-12T00:49:00  *** bhuvan_ has quit IRC
2014-03-12T00:49:00  *** bhuvan has quit IRC
2014-03-12T00:49:21  <foobio> locke105: basically saying that if there is a corner case we can define, we will almost certainly encounter it at some point due to the sheer size of the project
2014-03-12T00:49:26  <mriedem> although if i didn't poke on the sqla nova sync change yesterday, we wouldn't have known this was broken in how things were tested...
2014-03-12T00:49:28  *** thuc has joined #openstack-infra
2014-03-12T00:49:44  <clarkb> mriedem: we really don't want jenkins to have merge rights :)
2014-03-12T00:49:52  <clarkb> for code that it proposes
2014-03-12T00:50:03  <mriedem> for when it becomes self-aware
2014-03-12T00:50:06  <foobio> mriedem: it provides some oversight, but it's on the same level as translation proposals
2014-03-12T00:50:08  <clarkb> right now we mostly have that separated out with zuul being the organizer
2014-03-12T00:50:09  <mriedem> yeah, just playing devil's advocate
2014-03-12T00:50:14  *** ryanpetrello has quit IRC
2014-03-12T00:50:41  *** ryanpetrello has joined #openstack-infra
2014-03-12T00:50:48  <jeblair> it's dangerously close to self-aware; don't give it any more weapons
2014-03-12T00:50:49  *** Alexandra has quit IRC
2014-03-12T00:50:49  *** isviridov has quit IRC
2014-03-12T00:50:49  *** derekh has quit IRC
2014-03-12T00:50:54  <mriedem> alright, well not sure if i have something useful to propose for the sync commit message or not
2014-03-12T00:51:04  *** ryanpetrello has quit IRC
2014-03-12T00:51:22  * locke105 proposes a change: New Jenkins job: gate-become-self-aware
2014-03-12T00:51:46  *** CaptTofu has joined #openstack-infra
2014-03-12T00:51:53  <foobio> mriedem: also keep in mind that the next patchset on a change is going to be updated to include an adjustment from an entirely different global requirements change, so you may not be providing much context unless you never let it get past one patchset on the change
2014-03-12T00:52:16  <foobio> mriedem: or unless you keep rereading and appending to the commit message
2014-03-12T00:52:18  <mriedem> foobio: yeah, i've abandoned that idea
2014-03-12T00:52:27  <foobio> ahh, okay
2014-03-12T00:52:37  <mriedem> i'm thinking more general guidance for reviewers
2014-03-12T00:52:38  <locke105> what about running nova unit tests against global req changes?
2014-03-12T00:52:42  <foobio> it's probably doable, but i would expect it to get real ugly real quick
2014-03-12T00:53:10  <foobio> locke105: we've got some things going on with oslo.test which may make that viable
2014-03-12T00:53:31  <mriedem> locke105: nova UT/grenade/tempest is run against the nova sync, but not global-requirements
2014-03-12T00:54:29  <foobio> locke105: basically a pattern for changes to one project getting gated on the unit tests of a list of other projects
2014-03-12T00:56:22  *** gondoi has quit IRC
2014-03-12T00:56:22  *** hallyn has quit IRC
2014-03-12T00:56:22  *** vishy has quit IRC
2014-03-12T00:57:25  *** mugsie has quit IRC
2014-03-12T00:57:25  *** zhiyan_ has quit IRC
2014-03-12T00:57:25  *** kiall has quit IRC
2014-03-12T00:57:25  *** pabelanger has quit IRC
2014-03-12T00:57:25  *** StevenK has quit IRC
2014-03-12T00:57:25  *** sdake has quit IRC
2014-03-12T00:57:25  *** bogdando has quit IRC
2014-03-12T00:57:25  *** jraim has quit IRC
2014-03-12T00:57:25  *** branen__ has quit IRC
2014-03-12T00:57:25  *** mancdaz has quit IRC
2014-03-12T00:57:25  *** nijaba_ has quit IRC
2014-03-12T00:58:22  *** odyi has quit IRC
2014-03-12T00:58:22  *** exz has quit IRC
2014-03-12T00:58:22  *** zigo has quit IRC
2014-03-12T00:58:23  *** sc68cal has quit IRC
2014-03-12T00:58:23  *** foobio has quit IRC
2014-03-12T00:58:23  <mriedem> if a sync breaks a project, the project fixes themselves i think - that's what happened when sqla-migrate 0.8.2 was released i believe and synced to nova
2014-03-12T00:58:23  <locke105> sure but we have a downstream job that is similar
2014-03-12T00:58:23  *** isviridov has joined #openstack-infra
2014-03-12T00:58:23  *** ryanpetrello has joined #openstack-infra
2014-03-12T00:58:23  <mriedem> nova had some sqla-migrate version capped code in it that needed to be removed
2014-03-12T00:58:23  <locke105> some extension gets updated, jenkins pulls in nova, pulls in latest extension, runs tests, reports back on extension change
2014-03-12T00:58:23  <openstackgerrit> Sean Dague proposed a change to openstack/requirements: allow sqla 0.9.x  https://review.openstack.org/79817
2014-03-12T00:58:23  <sdague> mriedem: oh.... that kind of typo....
2014-03-12T00:58:23  * sdague facepalms
2014-03-12T00:58:23  <sdague> jeblair: we should only give it cupcakes
2014-03-12T00:58:23  <sdague> then it will spare us in the revolution
2014-03-12T00:58:23  <mriedem> sdague: yeah, i wasn't sure what you were saying earlier
2014-03-12T00:58:23  <sdague> mriedem: I assumed you were dinging me for a commit message
2014-03-12T00:58:23  <openstackgerrit> Clark Boylan proposed a change to openstack-infra/config: Remove unneeded package sources from nodepool node  https://review.openstack.org/79814
2014-03-12T00:58:24  <sdague> because I mess those up plenty
2014-03-12T00:58:24  <mriedem> sdague: i assumed you were way over my head on something
2014-03-12T00:58:24  <clarkb> pleia2: ^ I think that fixes the problem you pointed out
2014-03-12T00:58:24  *** alexandra_ has joined #openstack-infra
2014-03-12T00:58:24  *** branen_ has joined #openstack-infra
2014-03-12T00:58:24  <clarkb> pleia2: I looked at a centos machine but figure all redhat ish distros use yum.repos.d since they use yum
2014-03-12T00:58:24  <sdague> so yeh, bad rebase, which I totally didn't resolve right
2014-03-12T00:58:24  <sdague> anyway, it's right now
2014-03-12T00:58:24  <mriedem> yeah, +1
2014-03-12T00:58:24  *** mugsie_ has joined #openstack-infra
2014-03-12T00:58:24  *** CaptTofu has quit IRC
2014-03-12T00:58:24  <sdague> now we just need to figure out if it works
2014-03-12T00:58:24  <sdague> also... if it runs the right versions
2014-03-12T00:58:24  * mriedem ponders signing up for all new openstack/requirements patches
2014-03-12T00:58:24  *** zhiyan` has joined #openstack-infra
2014-03-12T00:58:25  *** jgriffith has quit IRC
2014-03-12T00:58:25  *** akscram has quit IRC
2014-03-12T00:58:25  *** GheRivero has quit IRC
2014-03-12T00:58:25  *** ProfFalken has quit IRC
2014-03-12T00:58:25  *** nijaba has joined #openstack-infra
2014-03-12T00:58:25  <sdague> it's pretty light load
2014-03-12T00:58:26  <mriedem> you've convinced me
2014-03-12T00:58:27  <mriedem> i have to deal with these things when they merge anyway so i might as well know they are coming
2014-03-12T00:58:27  *** VijayTripathi1 has quit IRC
2014-03-12T00:58:32  *** sc68cal_ has joined #openstack-infra
2014-03-12T00:58:34  <dims_> gah! netslpit
2014-03-12T00:58:34  *** vish1 has joined #openstack-infra
2014-03-12T00:58:36  *** vish1 is now known as vishy
2014-03-12T00:58:38  *** GheRivero has joined #openstack-infra
2014-03-12T00:58:45  *** foobio has joined #openstack-infra
2014-03-12T00:58:45  *** jraim has joined #openstack-infra
2014-03-12T00:59:17  *** thuc has quit IRC
2014-03-12T00:59:37  *** sileht has quit IRC
2014-03-12T01:05:30  *** openstack has joined #openstack-infra
2014-03-12T01:05:35  *** zns has quit IRC
2014-03-12T01:05:37  *** mattymo has joined #openstack-infra
2014-03-12T01:05:40  <jogo> sdague: so  I am a little concerned that we have 100% nodepool utilization most ofthe time
2014-03-12T01:05:43  <foobio> jeblair: heh, great... i'll be done cleaning that up by lunch time if i'm lucky ;)
2014-03-12T01:05:49  <jogo> it slows down checks and whatnot
2014-03-12T01:06:04  <jogo> the concern is purely about velocity
2014-03-12T01:06:58  <jeblair> jogo: you could contribute to the effort to move into hpcloud 1.1
2014-03-12T01:07:18  <jeblair> jogo: where apparently hpcloud has more resources
2014-03-12T01:08:11  <jeblair> also, there are lots of public openstack clouds we aren't using
2014-03-12T01:08:26  *** Daisy_ has joined #openstack-infra
2014-03-12T01:08:44  <jeblair> people have said they are interested in contributing clouds, but we've seen very little followup
2014-03-12T01:09:46  <jogo> jeblair: sure, although I question the value of the 24 recheck (when not before gate) ... I wonder what 36 or 48 hours would look like
2014-03-12T01:10:22  <jeblair> jogo: it's 72 hours when not approved (24 after approved)
2014-03-12T01:10:34  <jogo> jeblair: ohh in that case ...
2014-03-12T01:11:40  <jogo>  having to wait an extra hour for check queue definitly slows things down
2014-03-12T01:11:48  <jogo> I do like the get more resoures solution in the long run
2014-03-12T01:12:20  <jeblair> jogo: i think we should do all the things.  get more resources, be smarter about the ones we have (sdague is working on that as you know)
2014-03-12T01:13:41  *** jnoller has joined #openstack-infra
2014-03-12T01:13:53  *** ryanpetrello has quit IRC
2014-03-12T01:13:55  <clarkb> I think rechecking was crucial to gate health during feature freeze
2014-03-12T01:14:14  <clarkb> it was so smooth compared to havana
2014-03-12T01:14:45  <jogo> clarkb: while I would like to agree with you, I don't think we really have enough data to say *what* helped -- too many changes
2014-03-12T01:15:22  <jeblair> we can also do mean things like fast-fail (abort jobs on the first failure), or hang everything off of a group of jobs (people suggest pep8, but i also think requirements check failures should get the same treatment)
2014-03-12T01:15:24  <SpamapS> Yeah, could just be Neutron sucking less. ;)
2014-03-12T01:15:36  <jeblair> those would be zuul changes
2014-03-12T01:15:45  *** weiwei has quit IRC
2014-03-12T01:15:45  *** jhesketh_ has quit IRC
2014-03-12T01:15:50  <jogo> so I am not sure how much of the resource issue is gate jobs vs check jobs
2014-03-12T01:15:50  <jeblair> also, if developers are impatient... they _could_ run tests locally before uploading :)
2014-03-12T01:16:04  <jogo> my hunch is we now just have tons of check jobs  (for several reasons)
2014-03-12T01:16:14  <jogo> and not enough nodes
2014-03-12T01:16:57  <clarkb> check most == gate
2014-03-12T01:17:08  *** gokrokve has quit IRC
2014-03-12T01:17:13  <clarkb> jeblair ++
2014-03-12T01:17:21  <jogo> clarkb: ?
2014-03-12T01:17:22  <foobio> i still think we don't allow the gate window floor to dip low enough when there's high volume and a lot of gate resets going on, wasting resources over and over while more or less starving out the check pipeline for a while (which slows new changes entering gating too)
2014-03-12T01:17:51  <sdague> jeblair: we need that as the new openstack hoodie "we should do all the things"
2014-03-12T01:17:53  <jogo> foobio: interesting idea
2014-03-12T01:18:02  <jeblair> foobio: really?  i think 20 is too low but a good compromise
2014-03-12T01:18:06  <jogo> sdague: haha
2014-03-12T01:18:14  <locke105> sdague: ++ would buy
2014-03-12T01:18:17  <jogo> sdague: quick grenade question
2014-03-12T01:18:29  <jogo> how do I run locally from havna to trunk?
2014-03-12T01:18:33  <jeblair> foobio: considering how important the gate is, i think it's a tiny amount of resources... :)
2014-03-12T01:18:34  <jogo> stock doesn't seem to do that
2014-03-12T01:18:39  <sdague> jogo: stock should
2014-03-12T01:18:41  <jogo> sdague: unless I missed a step (which I bet I did)
2014-03-12T01:19:03  <sdague> but thingee said he was running into an issue the other day as well
2014-03-12T01:19:06  *** krotscheck has quit IRC
2014-03-12T01:19:11  <foobio> jeblair: well, granted the gate is important, but we've also effectively made the check pipeline part of the gate now
2014-03-12T01:19:12  <sdague> so.... I should verify tomorrow
2014-03-12T01:19:18  *** mkerrin has joined #openstack-infra
2014-03-12T01:19:18  *** talluri has joined #openstack-infra
2014-03-12T01:19:28  *** zhiwei has joined #openstack-infra
2014-03-12T01:20:08  <sdague> foobio: and I'd be -1 on a floor < 20. Because we just as often as reset, complete all the work in the 20 nodes except for on slow job on the tip
2014-03-12T01:20:19  <sdague> 20 jobs ...
2014-03-12T01:20:23  <foobio> 20 seems plenty low if we're merging 5-10 changes before a reset, but today the job failures in the gate pipeline were a good bit more plentiful than that
2014-03-12T01:20:42  <jeblair> foobio: i would be okay with a more _accurate_ heuristic
2014-03-12T01:20:49  <foobio> as would i
2014-03-12T01:21:06  <jeblair> foobio: but with the current model, i think going below 20 would hurt us more than help
2014-03-12T01:21:13  <sdague> yeh, we'd starve
2014-03-12T01:21:25  <foobio> mmm, perhaps so
2014-03-12T01:21:26  <jeblair> foobio, clarkb: i think we can make a more accurate heuristic too...
2014-03-12T01:21:33  <sdague> and, honestly, I think it's a low item to optimize
2014-03-12T01:21:41  <sdague> because the floor was about not thrashing
2014-03-12T01:21:46  <sdague> not really about waste
2014-03-12T01:21:55  <sdague> and we've managed to stop thrashing
2014-03-12T01:22:04  *** tteggel has quit IRC
2014-03-12T01:22:11  <sdague> which is goodness
2014-03-12T01:22:18  <foobio> we're not thrashing hard, but we are getting to a point where we're maxed out on quotas waiting for deletes
2014-03-12T01:22:25  <sdague> foobio: sure
2014-03-12T01:22:32  <openstackgerrit> Joshua Harlow proposed a change to openstack/requirements: Update the keyring dependency  https://review.openstack.org/79796
2014-03-12T01:22:44  <sdague> the other option would be put stackforge into a lower priority queue
2014-03-12T01:23:26  <foobio> but we seem to be riding high enough that the deletes aren't hurting us too bad either, so maybe i'm just over-thinking the current tuning
2014-03-12T01:23:39  <sdague> yeh, I think we're actually ok there
2014-03-12T01:23:41  *** tteggel has joined #openstack-infra
2014-03-12T01:24:11  <jeblair> openstack could make deletes faster. ;)
2014-03-12T01:24:14  <sdague> from a development optimization perspective, I think the cross project dependencies in zuul is going to be something important to get in zuul
2014-03-12T01:24:21  <sdague> in juno
2014-03-12T01:24:28  <mordred> I still think we shouldn't do that
2014-03-12T01:24:29  <foobio> it looks like at any one point in time we have roughly 300 nodes in use running jobs, the rest are building or deleting
2014-03-12T01:24:51  <sdague> mordred: did you see how the event patch to fix neutron / nova interaction had to get tested?
2014-03-12T01:25:03  *** gokrokve has joined #openstack-infra
2014-03-12T01:25:19  <jeblair> sdague, mordred: i'm okay with the feature, though i do think it's worth considering how it relates to CD
2014-03-12T01:25:32  <mordred> it's the CD thing I'm worried about
2014-03-12T01:25:33  <sdague> with 10+ integrated projects, having to test changes in multiple projects is important
2014-03-12T01:25:45  <sdague> mordred: so I'm not saying we land the changes atomically
2014-03-12T01:25:50  <mordred> I don't think we should land it until we've got somethign that tests rolling upgrades
2014-03-12T01:26:00  <sdague> I'm saying we can define ordering
2014-03-12T01:26:16  <mordred> sdague: oh ... you're saing
2014-03-12T01:26:19  <mordred> ok
2014-03-12T01:26:21  <mordred> yeah
2014-03-12T01:26:27  <sdague> yeh, never atomic lands
2014-03-12T01:26:31  <jeblair> mordred, sdague: i think sdague is describing the one-way variant of cross-project dependencies
2014-03-12T01:26:34  <mordred> like, "I need this unlanded change in neutron to land before testing this unlanded change in nova"
2014-03-12T01:26:37  <mordred> yeah
2014-03-12T01:26:38  <sdague> yes
2014-03-12T01:26:40  <sdague> that
2014-03-12T01:26:41  <mordred> that I think is a great idea
2014-03-12T01:26:53  <jeblair> a much easier problem than the full-cycle variant
2014-03-12T01:27:03  <sdague> that I think is going to be critical with 10+ integrated projects
2014-03-12T01:27:04  *** zigo has quit IRC
2014-03-12T01:27:05  <locke105> CD =?
2014-03-12T01:27:11  <jeblair> locke105: continuous deployment
2014-03-12T01:27:23  <locke105> by that you mean devstack-gate?
2014-03-12T01:27:26  <jeblair> locke105: (deploy every comment, or as near as you can make it)
2014-03-12T01:27:39  <sdague> otherwise we end up with "oh, land this neutron change, guess it's the right one, wait until it's landed, then start working on the nova change"
2014-03-12T01:27:54  <clarkb> why is atomic required?
2014-03-12T01:27:55  <jeblair> locke105: it's specifically referring to operators, though the devstack-gate process is designed to make it easier for them
2014-03-12T01:28:00  <jeblair> clarkb: it's not
2014-03-12T01:28:10  <clarkb> ok didnt think it was
2014-03-12T01:28:11  <mordred> clarkb: in fact, it's not desired
2014-03-12T01:28:26  *** jhesketh_ has joined #openstack-infra
2014-03-12T01:28:28  <mordred> the coordinated change dependency version requires atomic landing
2014-03-12T01:28:32  *** weiwei has joined #openstack-infra
2014-03-12T01:28:39  <sdague> clarkb: no, I don't want it
2014-03-12T01:28:40  <jeblair> clarkb: that's only required for full-cycle cross-repo deps, which are considered to be hazardous to CD and possibly upgrade testing
2014-03-12T01:28:44  <sdague> I think atomic is bad
2014-03-12T01:28:51  <sdague> I agreed with mordred on that
2014-03-12T01:28:59  <mordred> sdague: I figured we proably agreed
2014-03-12T01:28:59  <sdague> he did't realize that :)
2014-03-12T01:29:11  <locke105> oh so CD isn't something that infra does... its just consideration of how operators would be live consuming and deploying openstack changes
2014-03-12T01:29:17  <locke105> ?
2014-03-12T01:29:20  <sdague> this other thing, we really do need
2014-03-12T01:29:20  <jeblair> locke105: correct
2014-03-12T01:29:32  <jeblair> locke105: (though we actually do cd some of our own tools)
2014-03-12T01:29:42  <jeblair> locke105: (but that's beside the point)
2014-03-12T01:29:46  <locke105> like gerrit-dev
2014-03-12T01:29:47  *** yaguang has joined #openstack-infra
2014-03-12T01:29:48  <locke105> err
2014-03-12T01:29:49  <locke105> review-dev
2014-03-12T01:29:55  <jeblair> locke105: trying to get there with gerrit
2014-03-12T01:30:07  <sdague> jeblair: so that I might hit you up about post release to hack on in zuul
2014-03-12T01:30:25  <sdague> just to figure out what's needed and see if I could take a first pass
2014-03-12T01:30:35  *** reed has quit IRC
2014-03-12T01:31:11  <jeblair> sdague: sure thing; i think many of the bits are there.  i think the main design review thing is how to specify the c-r deps; i think we should look at the defunct gerrit patch to see their syntax and possibly adopt it
2014-03-12T01:31:50  <sdague> jeblair: I was assuming we'd use an Idempotent id
2014-03-12T01:32:08  <jeblair> sdague: i think that may be what they did.
2014-03-12T01:32:12  <sdague> cool
2014-03-12T01:32:20  <clarkb> it would be goid to make it not gerrit specific
2014-03-12T01:32:29  <sdague> yeh, honestly, I've been doing Depends-On: Idempotent id
2014-03-12T01:32:30  <locke105> if they merge in-order, and if its shortly one after another, whats stopping the CD framework from say, picking up both the nova and neutron update and not realizing they need to be done in-order?
2014-03-12T01:32:38  <sdague> just manually for signaling in the past
2014-03-12T01:32:48  <sdague> clarkb: it needs to be an idempotent id
2014-03-12T01:32:49  *** salv-orlando_ has joined #openstack-infra
2014-03-12T01:32:57  <jeblair> sdague: but istr something about using the change-id and s/I/D/... but i don't recall all details.  main thing is -- a lot of thinking has already been done there
2014-03-12T01:32:58  <sdague> otherwise it breaks on rebasing
2014-03-12T01:33:04  *** zigo has joined #openstack-infra
2014-03-12T01:33:14  <sdague> coolio, if you have pointers, would appreciate them
2014-03-12T01:33:26  <jeblair> clarkb: it's necessarily not gerrit-specific because it's not in gerrit.  :)
2014-03-12T01:33:52  <jeblair> sdague: not off hand, but i should be able to find the patch series when it's time
2014-03-12T01:34:16  *** dstanek_afk is now known as dstanek
2014-03-12T01:34:21  <jeblair> i need to run now, ttyl
2014-03-12T01:34:31  <clarkb> whats wromg with change id + project?
2014-03-12T01:34:56  <clarkb> oh branches
2014-03-12T01:37:21  *** salv-orlando has quit IRC
2014-03-12T01:37:21  *** salv-orlando_ is now known as salv-orlando
2014-03-12T01:37:50  <clarkb> change id's may not be best because gerrit pairs them with project:branch to get the unique key
2014-03-12T01:38:12  *** gokrokve has quit IRC
2014-03-12T01:39:31  *** nosnos has joined #openstack-infra
2014-03-12T01:39:39  <clarkb> sdague: https://gerrit-review.googlesource.com/#/q/topic:cross-repo-dependencies is the code jeblair is talking about I think
2014-03-12T01:40:19  <mordred> sdague: so - it doesn't affect the gate per-se ... but why is n-novnc enabled by default in devstack?
2014-03-12T01:40:34  <foobio> okay, the project plan for tomorrow morning's maintenance is here for anyone who wants to give it a once-over... https://etherpad.openstack.org/p/project-rename-2014-03-12
2014-03-12T01:40:36  <mordred> sdague: we do not have a project option for it
2014-03-12T01:40:51  <clarkb> foobio: looking
2014-03-12T01:42:33  <sdague> mordred: for raisons?
2014-03-12T01:42:41  <mordred> sdague: awesome
2014-03-12T01:42:53  <foobio> clarkb: also note that SergeyLukjanov's more details series of savanna-specific stuff is here... https://etherpad.openstack.org/p/savanna-renaming-process
2014-03-12T01:42:59  <sdague> honestly, that so predates me, I have no idea
2014-03-12T01:43:18  <sdague> could be linear-b
2014-03-12T01:43:19  <clarkb> mordred: probably because people like vnc consoles by default?
2014-03-12T01:43:34  <mordred> clarkb: for their devstack working env?
2014-03-12T01:43:48  <clarkb> mordred: ya
2014-03-12T01:43:57  <mordred> hrm
2014-03-12T01:44:11  <clarkb> foobio: plan looks mostly good to me, couple of notes
2014-03-12T01:44:21  <sdague> I thought we had working spice now though
2014-03-12T01:44:29  <clarkb> mordred: remember devstack is the most common deployment method :)
2014-03-12T01:44:39  <mordred> well, just pointing out, spurred by looking at it again because of the mailing list thread - that it's the only thing we clone from github with no other optino
2014-03-12T01:44:41  <mordred> option
2014-03-12T01:44:48  *** gokrokve has joined #openstack-infra
2014-03-12T01:44:58  <clarkb> mordred: there is an option
2014-03-12T01:45:10  <clarkb> you can override the location, seem my response to the thread
2014-03-12T01:45:37  <sdague> anyway, time to call it a night. See you guys in the morning.
2014-03-12T01:45:47  <mordred> sdague: have fun!
2014-03-12T01:47:53  <clarkb> mordred: I mean its not necessarily a great option but you can clone from elsewhere
2014-03-12T01:48:11  <clarkb> for most elsewhere is probably a fork of the github project on github though :)
2014-03-12T01:48:30  *** sarob has joined #openstack-infra
2014-03-12T01:48:58  <foobio> clarkb: suggestions integrated--thanks!
2014-03-12T01:54:34  <foobio> SergeyLukjanov: when you wake up, you'll probably want to review the project plan for the bits i'm doing at 12:00 utc (except step 14, which is up to you for your projects)
2014-03-12T01:56:02  *** khyati_ has quit IRC
2014-03-12T01:57:25  *** arosen has joined #openstack-infra
2014-03-12T01:58:17  *** gokrokve has quit IRC
2014-03-12T01:58:29  *** Ryan_Lane has quit IRC
2014-03-12T01:58:52  *** matsuhashi has quit IRC
2014-03-12T02:01:02  *** gokrokve has joined #openstack-infra
2014-03-12T02:02:25  *** changbl has joined #openstack-infra
2014-03-12T02:06:08  *** dkliban has joined #openstack-infra
2014-03-12T02:06:15  *** nicedice has joined #openstack-infra
2014-03-12T02:07:10  *** vkozhukalov has joined #openstack-infra
2014-03-12T02:07:42  *** talluri has quit IRC
2014-03-12T02:08:02  *** arosen is now known as arosen-home
2014-03-12T02:08:45  *** nicedice_ has quit IRC
2014-03-12T02:09:58  *** thuc has joined #openstack-infra
2014-03-12T02:11:32  *** sarob has quit IRC
2014-03-12T02:12:02  *** sarob has joined #openstack-infra
2014-03-12T02:12:20  *** HenryG has joined #openstack-infra
2014-03-12T02:14:32  *** gokrokve has quit IRC
2014-03-12T02:14:34  *** thuc has quit IRC
2014-03-12T02:15:00  *** gokrokve has joined #openstack-infra
2014-03-12T02:16:14  *** sarob has quit IRC
2014-03-12T02:16:37  <foobio> SergeyLukjanov: oh, the link would probably help... https://etherpad.openstack.org/p/project-rename-2014-03-12
2014-03-12T02:16:57  <foobio> anyway, that's enough fun for me for the night. time to get ready for a nap
2014-03-12T02:17:15  *** matsuhashi has joined #openstack-infra
2014-03-12T02:17:43  <zhiwei> thank you very much for your work.
2014-03-12T02:18:04  <foobio> zhiwei: you're welcome! don't thank me until it's done though ;)
2014-03-12T02:18:17  <zhiwei> :)
2014-03-12T02:19:11  *** gokrokve has quit IRC
2014-03-12T02:19:34  *** zigo has quit IRC
2014-03-12T02:21:57  *** bhuvan has joined #openstack-infra
2014-03-12T02:21:57  *** bhuvan_ has joined #openstack-infra
2014-03-12T02:23:32  *** sweston has joined #openstack-infra
2014-03-12T02:23:58  *** zigo has joined #openstack-infra
2014-03-12T02:24:56  *** caleb_ has quit IRC
2014-03-12T02:27:24  *** khyati has joined #openstack-infra
2014-03-12T02:31:20  *** VijayTripathi has joined #openstack-infra
2014-03-12T02:32:55  *** rcarrillocruz has joined #openstack-infra
2014-03-12T02:36:14  *** vkozhukalov has quit IRC
2014-03-12T02:37:23  *** rcarrillocruz has quit IRC
2014-03-12T02:38:55  *** rpodolyaka has quit IRC
2014-03-12T02:48:26  *** harlowja is now known as harlowja_away
2014-03-12T02:48:35  *** sarob has joined #openstack-infra
2014-03-12T02:49:10  *** ryanpetrello has joined #openstack-infra
2014-03-12T02:52:35  *** CaptTofu has joined #openstack-infra
2014-03-12T02:54:45  *** jepoy has joined #openstack-infra
2014-03-12T02:54:46  *** gyee has quit IRC
2014-03-12T02:57:20  *** CaptTofu has quit IRC
2014-03-12T02:57:39  *** akscram has joined #openstack-infra
2014-03-12T03:05:18  *** amcrn has quit IRC
2014-03-12T03:09:32  *** talluri has joined #openstack-infra
2014-03-12T03:09:34  *** david-lyle has joined #openstack-infra
2014-03-12T03:12:09  *** dcramer__ has joined #openstack-infra
2014-03-12T03:15:55  *** mriedem has quit IRC
2014-03-12T03:19:38  *** rwsu has quit IRC
2014-03-12T03:21:14  *** sarob has quit IRC
2014-03-12T03:21:20  *** pcrews has quit IRC
2014-03-12T03:23:32  *** CaptTofu has joined #openstack-infra
2014-03-12T03:23:51  *** matsuhashi has quit IRC
2014-03-12T03:25:36  *** bhuvan_ has quit IRC
2014-03-12T03:25:36  *** bhuvan has quit IRC
2014-03-12T03:28:19  *** dkliban has quit IRC
2014-03-12T03:29:11  <clarkb> foobio: https://developer.github.com/v3/oauth/ we need to add the read:org scope to our token. this may require a new token
2014-03-12T03:29:48  <clarkb> foobio: turns out I am in a channel with someone that contributes to pygithub and they were able to help. seriously though why have api versions if when you change stuff like this you don't create a new version
2014-03-12T03:31:01  <openstackgerrit> Joshua Hesketh proposed a change to openstack-infra/config: Add zuul overlay to review page  https://review.openstack.org/79836
2014-03-12T03:32:23  <openstackgerrit> Joshua Hesketh proposed a change to openstack-infra/config: Add zuul overlay to review page  https://review.openstack.org/79836
2014-03-12T03:32:26  *** SumitNaiksatam has joined #openstack-infra
2014-03-12T03:33:01  *** jnoller has quit IRC
2014-03-12T03:33:42  *** jnoller has joined #openstack-infra
2014-03-12T03:33:55  <openstackgerrit> Joshua Hesketh proposed a change to openstack-infra/config: Add zuul overlay to review page  https://review.openstack.org/79836
2014-03-12T03:34:27  <jhesketh__> jeblair, clarkb: ^ what do you think of this for an improvement to gerrit?
2014-03-12T03:34:38  <jhesketh__> (more or less proof of concept at this point)
2014-03-12T03:37:04  *** wchrisj has joined #openstack-infra
2014-03-12T03:37:09  <clarkb> jhesketh__: I am not the greatest person to review css and javascript, but I am super willing to throw that on review-dev and give it a spin
2014-03-12T03:37:10  *** sarob has joined #openstack-infra
2014-03-12T03:37:12  <clarkb> I think it is a great idea
2014-03-12T03:37:15  *** reed has joined #openstack-infra
2014-03-12T03:37:31  <jhesketh__> clarkb: heh, I'm not the greatest person at writing javascript/css!
2014-03-12T03:37:36  <jhesketh__> particularly the css part
2014-03-12T03:37:51  <clarkb> its basically zuul status in the change for that change right?
2014-03-12T03:37:58  <jhesketh__> yep
2014-03-12T03:38:11  <clarkb> then yes I think we should put this on review-dev asap :)
2014-03-12T03:38:18  <jhesketh__> woo :-)
2014-03-12T03:38:47  <clarkb> I am currently taste testing a couple IPAs though so will have to wait for tomorrow before I can help :)
2014-03-12T03:39:06  <arosen-home> one change i'd like to make is to add the patch owner to that page by the id. I  find myself having to look up the  patch id and search the zuul page over and over when i only care about my patches :)
2014-03-12T03:39:18  <jhesketh__> clarkb: mmm, nice
2014-03-12T03:39:22  <jhesketh__> enjoy! :-)
2014-03-12T03:39:51  <jhesketh__> arosen-home: you mean to the zuul status page?
2014-03-12T03:40:05  <arosen-home> jhesketh_ i mean here: http://status.openstack.org/zuul/
2014-03-12T03:40:42  *** oda-g_ has joined #openstack-infra
2014-03-12T03:41:12  <jhesketh__> arosen-home: sure. I would want to get clarkb's and jeblair's opinion on that. I'd be cautious of not adding too much clutter. The change I proposed embeds those boxes on the associated patches. So to see the status you'd just have to open your patches.
2014-03-12T03:41:16  <jhesketh__> (in gerrit that is)
2014-03-12T03:42:28  <mattoliverau> jhesketh__: awesome idea :)
2014-03-12T03:43:11  *** sarob__ has joined #openstack-infra
2014-03-12T03:44:14  *** sarob has quit IRC
2014-03-12T03:45:51  *** sarob__ has quit IRC
2014-03-12T03:46:00  *** sarob has joined #openstack-infra
2014-03-12T03:48:15  *** lcheng has joined #openstack-infra
2014-03-12T03:50:03  <openstackgerrit> Ryan Petrello proposed a change to openstack-infra/config: Add pypy jobs to pecan.  https://review.openstack.org/79839
2014-03-12T03:50:04  *** rwsu has joined #openstack-infra
2014-03-12T03:50:49  <openstackgerrit> Ryan Petrello proposed a change to openstack-infra/config: Add pypy jobs to pecan.  https://review.openstack.org/79839
2014-03-12T03:51:11  *** fifieldt has joined #openstack-infra
2014-03-12T03:53:19  *** Ryan_Lane has joined #openstack-infra
2014-03-12T03:54:45  *** dstanek has quit IRC
2014-03-12T03:56:08  *** sileht has quit IRC
2014-03-12T03:56:17  *** jnoller_ has joined #openstack-infra
2014-03-12T03:56:38  <clarkb> dhellmann: the oslo.test chagnes lgtm
2014-03-12T03:56:39  *** jnoller has quit IRC
2014-03-12T03:57:45  *** Daisy_ has quit IRC
2014-03-12T03:58:07  *** sileht has joined #openstack-infra
2014-03-12T04:00:45  <dstufft> mordred: I almost have pip taking control of setup_requires
2014-03-12T04:01:02  *** SumitNaiksatam has quit IRC
2014-03-12T04:01:10  <dstufft> scratch that
2014-03-12T04:01:11  <dstufft> I do have it
2014-03-12T04:01:16  <dstufft> at least a working PoC
2014-03-12T04:02:10  *** zhiyan` is now known as zhiyan
2014-03-12T04:02:29  *** SumitNaiksatam has joined #openstack-infra
2014-03-12T04:02:55  *** dstanek has joined #openstack-infra
2014-03-12T04:05:13  *** gokrokve has joined #openstack-infra
2014-03-12T04:05:24  *** markmcclain has quit IRC
2014-03-12T04:05:38  <clarkb> dstufft: that half does something pbr did do and half makes it safer to install pbr yeah?
2014-03-12T04:05:44  <clarkb> slowly one day pbr will die and I will be happy
2014-03-12T04:06:33  *** thuc has joined #openstack-infra
2014-03-12T04:06:59  <dstufft> clarkb: well even if you ``pip install foo``, if foo uses setup_requires in it's setup.py, then setuptools will be used to download and install wahtever is in the setup_requires
2014-03-12T04:07:07  <dstufft> my PoC uses pip to do that instead
2014-03-12T04:07:15  *** thuc_ has joined #openstack-infra
2014-03-12T04:07:18  <dstufft> so that if you're using pip, setuptools should never touch the network
2014-03-12T04:07:39  <dstufft> it's horrible though
2014-03-12T04:08:06  <dstufft> I'm monkeypatching distutils (which will then be monkeypatched by setuptools) inside of a python -c "" which reads the setup.py file and evals it
2014-03-12T04:08:27  <dstufft> https://github.com/dstufft/pip/compare/pypa:develop...dstufft:eldritch-horror
2014-03-12T04:08:30  *** sarob has quit IRC
2014-03-12T04:08:48  <clarkb> wow
2014-03-12T04:08:53  <clarkb> appropriate branch name
2014-03-12T04:09:00  *** sarob has joined #openstack-infra
2014-03-12T04:10:16  <dstufft> mostly this means there won't be a second place to make settings for setup_requires
2014-03-12T04:10:49  *** thuc has quit IRC
2014-03-12T04:12:37  <clarkb> mikal: I want you to know that if someone were to read your twitter stuff they would probably think you run an ISP
2014-03-12T04:12:44  <clarkb> mikal: I am sure you would run a great isp
2014-03-12T04:13:19  *** sarob has quit IRC
2014-03-12T04:15:26  *** wchrisj has quit IRC
2014-03-12T04:16:36  *** jepoy_ has joined #openstack-infra
2014-03-12T04:18:53  *** jepoy has quit IRC
2014-03-12T04:22:19  <mordred> dstufft: nice!
2014-03-12T04:23:01  *** talluri has quit IRC
2014-03-12T04:24:34  *** CaptTofu has quit IRC
2014-03-12T04:25:45  *** Daisy_ has joined #openstack-infra
2014-03-12T04:25:49  *** matsuhashi has joined #openstack-infra
2014-03-12T04:28:23  *** psedlak has quit IRC
2014-03-12T04:28:54  *** jepoy_ has quit IRC
2014-03-12T04:28:55  *** nati_ueno has quit IRC
2014-03-12T04:29:50  *** pcrews has joined #openstack-infra
2014-03-12T04:31:10  *** psedlak has joined #openstack-infra
2014-03-12T04:33:21  *** arosen-home has quit IRC
2014-03-12T04:34:55  *** jnoller_ has quit IRC
2014-03-12T04:34:59  *** pcrews has quit IRC
2014-03-12T04:37:28  *** jnoller has joined #openstack-infra
2014-03-12T04:37:41  *** ryanpetrello has quit IRC
2014-03-12T04:39:39  <lifeless> mordred: btw, if you have a few cycles, a patch to testrepository to use pbr (assume that i have a candidate git tree) would be awesome
2014-03-12T04:40:53  <mordred> lifeless: sure thing
2014-03-12T04:41:19  <mordred> lifeless: (do you have a candidate git tree somewhere I can clone it?)
2014-03-12T04:41:44  <lifeless> mordred: haven't pushed it anywhere yet, will do so
2014-03-12T04:42:55  *** alexandra_ is now known as alex-luncheon
2014-03-12T04:44:14  <lifeless> mordred: https://github.com/testing-cabal/testrepository
2014-03-12T04:44:46  <lifeless> mordred: basically I need to make sure sdist does the right thing in a git tree, and in a non-git tree, including sucking in README and version handling, like it did in our old bespoke code.
2014-03-12T04:44:55  <lifeless> mordred: then I can do a release and make folk happy
2014-03-12T04:46:14  <mordred> lifeless: can you tell me what you want from version handling?
2014-03-12T04:47:03  <mordred> lifeless: like - how much like openstack things do you want it - vs. how much like what your current code does?
2014-03-12T04:47:49  <lifeless> mordred: current codebase is semver with a special doohicky for unreleased.
2014-03-12T04:47:54  <lifeless> mordred: what openstack does for that is just fine
2014-03-12T04:47:59  <mordred> ok. cool
2014-03-12T04:48:02  <mordred> that's less work
2014-03-12T04:48:06  *** VijayTripathi has quit IRC
2014-03-12T04:48:08  <lifeless> yeah, that bit didn't concern me
2014-03-12T04:48:21  <lifeless> its the different doc meta etc handling that I was unsure where to poke at.
2014-03-12T04:48:38  <lifeless> I'm fine in principle with moving other files around to line up with pbr's expectations
2014-03-12T04:48:49  <mordred> k - you look mostsly fine
2014-03-12T04:48:51  <lifeless> subject to the right to go OMG no on a specific patch :>
2014-03-12T04:48:52  <mordred> lemme make patch
2014-03-12T04:49:16  *** talluri has joined #openstack-infra
2014-03-12T04:53:59  *** talluri has quit IRC
2014-03-12T04:55:40  *** jepoy has joined #openstack-infra
2014-03-12T04:56:51  *** jepoy has quit IRC
2014-03-12T04:57:52  *** thuc_ has quit IRC
2014-03-12T04:58:25  *** thuc has joined #openstack-infra
2014-03-12T04:59:16  <mikal> clarkb: no, just filled with rage at the govt
2014-03-12T05:00:13  *** sarob has joined #openstack-infra
2014-03-12T05:00:52  *** jnoller has quit IRC
2014-03-12T05:01:10  *** xchu_ has joined #openstack-infra
2014-03-12T05:02:29  *** thuc has quit IRC
2014-03-12T05:05:01  <mordred> mikal: what's the difference?
2014-03-12T05:05:31  *** talluri has joined #openstack-infra
2014-03-12T05:05:40  *** nicedice has quit IRC
2014-03-12T05:06:06  *** nicedice has joined #openstack-infra
2014-03-12T05:06:40  *** talluri has quit IRC
2014-03-12T05:07:10  *** talluri has joined #openstack-infra
2014-03-12T05:09:20  *** Daisy__ has joined #openstack-infra
2014-03-12T05:09:37  <mordred> lifeless: your tags aren't signed, just fyi
2014-03-12T05:09:45  *** Daisy_ has quit IRC
2014-03-12T05:09:46  <mordred> lifeless: I do not know how much you care
2014-03-12T05:09:58  *** mgagne has quit IRC
2014-03-12T05:09:59  <mordred> lifeless: but version creation will be weird until you have one signed tag
2014-03-12T05:11:11  <mordred> lifeless: https://github.com/testing-cabal/testrepository/pull/1
2014-03-12T05:11:29  *** talluri has quit IRC
2014-03-12T05:11:58  *** SumitNaiksatam has quit IRC
2014-03-12T05:12:55  *** jepoy has joined #openstack-infra
2014-03-12T05:13:59  <StevenK> mordred: Which is partly bong
2014-03-12T05:14:33  <StevenK> +# Copyright (c) 2013 Hewlett-Packard Development Company, L.P.
2014-03-12T05:14:34  <StevenK> -# Copyright (c) 2009-2013 Testrepository Contributors
2014-03-12T05:14:34  <mordred> StevenK: what' partly bong? what did I miss?
2014-03-12T05:14:39  <StevenK> In setup.py
2014-03-12T05:14:41  <mordred> StevenK: yeah
2014-03-12T05:14:44  <mordred> it's a completely different file
2014-03-12T05:15:07  <mordred> StevenK: I'm pretty sure that "Testrepository Contributors" don't have any copyright in the file
2014-03-12T05:15:41  <StevenK> mordred: Well, your PR makes you a contributor, so ... :-)
2014-03-12T05:16:31  <mordred> ah. well. now I get to decide if I'm going to disagree with this read on how the Berne Convention works - or just say screw it and go along
2014-03-12T05:17:08  <clarkb> mordred: honesly that file is so small  you could probably argue it isn't copyrightable :P
2014-03-12T05:17:17  <mordred> clarkb: that's the better argument, tbh
2014-03-12T05:17:39  <StevenK> mordred: It's up to lifeless. Not sure if I even have a valid opinion, since I can't recall if I have any code in testr
2014-03-12T05:18:10  <mordred> to me - Copyright (c) 2009-2013 Testrepository Contributors implies that "Testrepository Contributors" have copyright over this particular work, which, if it is copyrightable in the first place, is invalid
2014-03-12T05:18:34  <mordred> as neither I nor HP have granted any copyright to any of the other contributors
2014-03-12T05:18:43  <mordred> but tbh - clarkb's opinion makes this much easier
2014-03-12T05:20:26  *** markwash has joined #openstack-infra
2014-03-12T05:21:14  <mordred> StevenK: fixed
2014-03-12T05:23:27  <mordred> StevenK, lifeless: actually - the history in that branch was silly - re-submitted https://github.com/testing-cabal/testrepository/pull/2
2014-03-12T05:24:34  *** markwash has quit IRC
2014-03-12T05:24:38  *** markwash_ has joined #openstack-infra
2014-03-12T05:26:06  *** xchu_ has quit IRC
2014-03-12T05:26:10  <jhesketh__> Hey guys, looks like zuul is having trouble communicating to gerrit: http://status.openstack.org/zuul/
2014-03-12T05:26:25  <jhesketh__> ah, ignore me, just a delay
2014-03-12T05:27:49  <lifeless> mordred: btw you can push --overwrite ;)
2014-03-12T05:27:52  <lifeless> erm
2014-03-12T05:27:53  <lifeless> -f
2014-03-12T05:27:58  <lifeless> mordred: on github
2014-03-12T05:28:55  <lifeless> mordred: are
2014-03-12T05:28:56  <lifeless> +[files]
2014-03-12T05:28:57  <lifeless> +scripts =
2014-03-12T05:28:57  <lifeless> +[files]
2014-03-12T05:28:59  <lifeless> bah
2014-03-12T05:29:04  <lifeless> is that needed?
2014-03-12T05:29:58  <lifeless> oh hmm, tox. I think I'll disect this patch a little, since tox isn't a thing in this context.
2014-03-12T05:30:22  <mordred> ok
2014-03-12T05:30:43  <mordred> feel free - the bits you need should be there- feel free to do whatever you want
2014-03-12T05:30:46  <lifeless> thanks
2014-03-12T05:31:12  *** rpodolyaka has joined #openstack-infra
2014-03-12T05:31:19  <mordred> lifeless: the [files] scriptts = is how you do the equiv of scripts=['testr'], from the old setup.py
2014-03-12T05:31:21  <lifeless> on the (C) thing, see COPYING; e.g. HP was fine (its NAME)
2014-03-12T05:31:25  *** oda-g_ has quit IRC
2014-03-12T05:31:52  <lifeless> and its simpler to avoid confusion in lawyers to have it, so I'll reinstate the HP (C) you had
2014-03-12T05:32:04  *** sarob has quit IRC
2014-03-12T05:32:06  <mordred> lifeless: ok. works for me
2014-03-12T05:32:49  *** reed has quit IRC
2014-03-12T05:34:58  <mordred> lifeless: also- I checked python setup.py sdist and python setup.py build_sphinx - I did not check other potential uses
2014-03-12T05:35:15  <lifeless> that + pip install is all there is
2014-03-12T05:35:29  <lifeless> since setup.py test is so awful
2014-03-12T05:35:32  *** nicedice has quit IRC
2014-03-12T05:35:34  <lifeless> but thats a different rant
2014-03-12T05:35:39  <mordred> yah
2014-03-12T05:35:39  *** alex-luncheon is now known as Alexandra
2014-03-12T05:36:43  <lifeless> mordred: you have no problem with BSD + Apache2 I presume
2014-03-12T05:36:48  <mordred> lifeless: I do not
2014-03-12T05:36:57  *** SumitNaiksatam has joined #openstack-infra
2014-03-12T05:37:00  <openstackgerrit> Joshua Hesketh proposed a change to openstack-infra/config: Add zuul overlay to review page  https://review.openstack.org/79836
2014-03-12T05:37:11  <mordred> I also really am not sure there is much that's truly copyrightable in that patch I just sent you
2014-03-12T05:37:56  <lifeless> mordred: I know
2014-03-12T05:37:59  <lifeless> mordred: its pro forma
2014-03-12T05:38:26  <lifeless> mordred: since e.g. debian gets weird about shit, and I can't be bothered ....
2014-03-12T05:38:38  <mordred> yah
2014-03-12T05:39:21  <mordred> lifeless: ok. I'm off to bed - as I said - my patch is your patch - i hope it's helpful - if it's not, you know, no ego attachment to any of it here
2014-03-12T05:39:34  <lifeless> mordred: its super helpful
2014-03-12T05:39:37  <mordred> awesome
2014-03-12T05:39:39  <lifeless> mordred: I'm just doing qa of it
2014-03-12T05:39:47  <lifeless> mordred: looking for surprises, things to document, etc
2014-03-12T05:39:53  * mordred does a little jig
2014-03-12T05:39:54  <lifeless> mordred: also tweaking the commit a little :)
2014-03-12T05:40:13  <mordred> oh - I did not change version consumption in testrepository/__init__.py at all
2014-03-12T05:40:32  <mordred> I figure using pbr.version is simple enough if you want to do that - so I left it alone
2014-03-12T05:40:39  <lifeless> mordred: signed tags - any version, or the most recent?
2014-03-12T05:40:48  <mordred> most recent is the most important
2014-03-12T05:40:50  <lifeless> mordred: I presume e.g. nova has an example of pbr.version use ?
2014-03-12T05:40:56  <mordred> the calculated version comes from latest signed tags
2014-03-12T05:40:59  <mordred> yup
2014-03-12T05:41:21  <mordred> actually, nova is a bad example - they're weird...
2014-03-12T05:41:34  <lifeless> version_info = pbr.version.VersionInfo('nova')
2014-03-12T05:41:41  <mordred> yah
2014-03-12T05:41:43  <lifeless> ok, what's a good example :)
2014-03-12T05:41:48  <mordred> nah -that's fine
2014-03-12T05:41:57  <mordred> I was just scanning the file and saw all the other stuff
2014-03-12T05:43:59  <lifeless> mordred: so remind me how to tell pbr about the next version # to use ?
2014-03-12T05:44:44  <dstufft> mordred: oh
2014-03-12T05:44:53  <dstufft> and lifeless
2014-03-12T05:44:58  <dstufft> speaking of setup.py test being awful
2014-03-12T05:45:13  <dstufft> this stuff i'm doing might make it pretty easy to make seup.py test use pip
2014-03-12T05:47:43  <lifeless> dstufft: how do you get from VersionInfo to a __version__ style version tuple ?
2014-03-12T05:48:13  <lifeless> dstufft: e.g. the same as sys.version_info
2014-03-12T05:48:15  <dstufft> I have no idea what a __version__ style tuple is, there is no standard for that :)
2014-03-12T05:48:31  <lifeless> dstufft: I rather think there is :) - sys.version_info is it, no ?
2014-03-12T05:48:43  <dstufft> All packages I have have a str __version__ tbh
2014-03-12T05:48:46  <lifeless> sys.version_info
2014-03-12T05:48:47  <lifeless> sys.version_info(major=3, minor=3, micro=1, releaselevel='final', serial=0)
2014-03-12T05:49:02  <dstufft> yea that's something special in python, I don't think that's exposed anywhere
2014-03-12T05:49:25  <lifeless> dstufft: well, its just a tuple
2014-03-12T05:49:36  <dstufft> namedtuple!
2014-03-12T05:49:51  <dstufft> maybe what you want is pkg_resources.parse_version
2014-03-12T05:49:51  <lifeless> dstufft: so not very special, but anything that can process said tuple can process other versions in the same structure, so I have a strong interest in using it
2014-03-12T05:50:02  <dstufft> I don't know what CPython itself uses
2014-03-12T05:50:25  <lifeless> aieee no :)
2014-03-12T05:50:31  <lifeless> pkg_resources.parse_version(testrepository.new_version.version)
2014-03-12T05:50:31  <lifeless> ('00000000', '00000000', '00000018', '*final')
2014-03-12T05:52:20  <dstufft> lol
2014-03-12T05:53:05  *** vkozhukalov has joined #openstack-infra
2014-03-12T05:55:43  <lifeless> 0.0.18.5, hmm
2014-03-12T05:55:51  <lifeless> 5 commits after 0.0.18
2014-03-12T05:56:38  <lifeless> mordred: how do I get alpha version strings out ?
2014-03-12T05:57:02  <lifeless> mordred: 0.0.18 is now signed
2014-03-12T05:57:05  <clarkb> lifeless: you have to tag alphas iirc
2014-03-12T05:57:09  *** zhiwei has quit IRC
2014-03-12T06:00:30  *** CaptTofu has joined #openstack-infra
2014-03-12T06:00:50  <jhesketh__> is anybody else having a very slow response time from gerrit queries? (ie via the commandline)
2014-03-12T06:00:59  <jhesketh__> or are any root/core infra's around to help me debug?
2014-03-12T06:01:20  <clarkb> jhesketh__: gerrit ls-projects is responsive
2014-03-12T06:02:05  <clarkb> http://cacti.openstack.org/cacti/graph.php?action=view&local_graph_id=25&rra_id=all there si a bit of iowait there
2014-03-12T06:02:06  <jhesketh__> okay, so I can query successfully from my local machine, but it seems slow
2014-03-12T06:02:09  <clarkb> wonder if that is backups
2014-03-12T06:02:19  <jhesketh__> clarkb: more to the point though our zuul is failing to get a response altogether
2014-03-12T06:02:22  * clarkb is about to go to bed and doesn't trust himself to debug
2014-03-12T06:02:22  <jhesketh__> right, possibly
2014-03-12T06:02:27  <jhesketh__> that's okay
2014-03-12T06:11:15  *** sarob has joined #openstack-infra
2014-03-12T06:11:38  *** unicell has quit IRC
2014-03-12T06:14:55  *** unicell has joined #openstack-infra
2014-03-12T06:15:38  *** ildikov_ has quit IRC
2014-03-12T06:16:42  <openstackgerrit> David Pursehouse proposed a change to openstack-infra/jenkins-job-builder: Minor fixes in the trigger documentation  https://review.openstack.org/79854
2014-03-12T06:19:35  <openstackgerrit> lifeless proposed a change to openstack-dev/pbr: Fix up some docstrings.  https://review.openstack.org/79855
2014-03-12T06:19:36  <openstackgerrit> lifeless proposed a change to openstack-dev/pbr: Return the real class in VersionInfo __repr__.  https://review.openstack.org/79856
2014-03-12T06:20:58  *** dstufft|laptop has joined #openstack-infra
2014-03-12T06:26:00  *** oubiwann has quit IRC
2014-03-12T06:29:11  *** khyati has quit IRC
2014-03-12T06:29:15  *** Alexandra is now known as alex-out
2014-03-12T06:29:27  <lifeless> so, I think get_version(pkg, pre_version...) is dead code, no ?
2014-03-12T06:30:50  *** lcheng has quit IRC
2014-03-12T06:43:19  *** sarob has quit IRC
2014-03-12T06:44:27  *** lukego has joined #openstack-infra
2014-03-12T06:46:04  *** gokrokve has quit IRC
2014-03-12T06:48:36  *** dangers_away has quit IRC
2014-03-12T06:50:01  <openstackgerrit> Sergey Kolekonov proposed a change to openstack-infra/jenkins-job-builder: ZMQ Event Publisher plugin support added  https://review.openstack.org/77561
2014-03-12T06:50:17  *** denis_makogon has joined #openstack-infra
2014-03-12T06:50:24  <openstackgerrit> Sergey Kolekonov proposed a change to openstack-infra/jenkins-job-builder: Added send-to options support to email-ext plugin  https://review.openstack.org/73601
2014-03-12T06:51:10  <lifeless> yeah, I'm going to need to patch pbr. Tomorrow. mordred :) - pbr isn't compatible with it's own semver doc :>
2014-03-12T06:52:10  *** saju_m has joined #openstack-infra
2014-03-12T07:00:12  *** rpodolyaka has quit IRC
2014-03-12T07:05:05  <SergeyLukjanov> foobio, clarkb, mordred, jeblair, are you sleeping folks?
2014-03-12T07:05:17  <SergeyLukjanov> we need a force push for savanna to revert 0.9 sqla
2014-03-12T07:08:37  *** pblaho has joined #openstack-infra
2014-03-12T07:10:39  *** ildikov_ has joined #openstack-infra
2014-03-12T07:11:06  *** mrda is now known as mrda_away
2014-03-12T07:15:31  <SergeyLukjanov> foobio, thank you for the renaming doc, looking on it
2014-03-12T07:16:04  <openstackgerrit> Andreas Jaeger proposed a change to openstack-infra/config: Initialize transifex data for openstack-manuals  https://review.openstack.org/79866
2014-03-12T07:17:54  <SergeyLukjanov> foobio, everything looks ok, I'll do #14 by myself
2014-03-12T07:20:37  <AJaeger> SergeyLukjanov, good morning! If you find some time between renaming to sahara, could you review 79866, please?
2014-03-12T07:21:26  <openstackgerrit> Valeriy Ponomaryov proposed a change to openstack-infra/config: Fix of using concurrency for tempest in manila job  https://review.openstack.org/79867
2014-03-12T07:21:42  <SergeyLukjanov> AJaeger, morning
2014-03-12T07:21:54  <SergeyLukjanov> AJaeger, sure, I'll take a look on it
2014-03-12T07:21:58  *** AaronGreen has quit IRC
2014-03-12T07:23:00  *** AaronGr has joined #openstack-infra
2014-03-12T07:23:37  *** vponomaryov1 has joined #openstack-infra
2014-03-12T07:24:22  *** bknudson has quit IRC
2014-03-12T07:24:59  *** flaper87|afk is now known as flaper87
2014-03-12T07:25:35  <AJaeger> SergeyLukjanov, thanks
2014-03-12T07:26:01  *** yolanda has joined #openstack-infra
2014-03-12T07:26:53  *** bknudson has joined #openstack-infra
2014-03-12T07:30:14  <SergeyLukjanov> AJaeger, could you please capitalize and remove ',' in comment in https://review.openstack.org/#/c/79866/1/modules/jenkins/files/slave_scripts/upstream_translation_update_manuals.sh
2014-03-12T07:33:27  <AJaeger> SergeyLukjanov, will do - thanks
2014-03-12T07:34:03  *** skraynev_afk is now known as skraynev
2014-03-12T07:34:42  <openstackgerrit> Andreas Jaeger proposed a change to openstack-infra/config: Initialize transifex data for openstack-manuals  https://review.openstack.org/79866
2014-03-12T07:35:07  *** jlibosva has joined #openstack-infra
2014-03-12T07:35:49  *** CaptTofu has quit IRC
2014-03-12T07:35:56  <SergeyLukjanov> AJaeger, thank you
2014-03-12T07:36:08  <AJaeger> SergeyLukjanov, thanks for spotting!
2014-03-12T07:38:00  *** iv_m_ has joined #openstack-infra
2014-03-12T07:38:02  *** vkozhukalov has quit IRC
2014-03-12T07:40:34  <openstackgerrit> Nikita Konovalov proposed a change to openstack-infra/storyboard: Rename migration revisions  https://review.openstack.org/79869
2014-03-12T07:40:43  *** iv_m_ is now known as iv_m
2014-03-12T07:41:00  *** vponomaryov1 has quit IRC
2014-03-12T07:41:27  *** sarob has joined #openstack-infra
2014-03-12T07:41:58  *** vponomaryov1 has joined #openstack-infra
2014-03-12T07:42:42  *** gokrokve has joined #openstack-infra
2014-03-12T07:47:33  *** gokrokve has quit IRC
2014-03-12T07:48:19  *** sarob has quit IRC
2014-03-12T07:50:01  *** rcarrillocruz has joined #openstack-infra
2014-03-12T07:50:42  *** rlandy has joined #openstack-infra
2014-03-12T07:51:35  <AJaeger> SergeyLukjanov, did you forgot to review 79866 with a vote?
2014-03-12T07:57:47  *** dstufft|laptop has quit IRC
2014-03-12T07:59:11  *** jcoufal has joined #openstack-infra
2014-03-12T08:02:46  <SergeyLukjanov> AJaeger, /me searching for coffee :) will do
2014-03-12T08:06:19  *** rossella_s has joined #openstack-infra
2014-03-12T08:13:22  *** gokrokve has joined #openstack-infra
2014-03-12T08:17:18  *** morganfainberg is now known as morganfainberg_Z
2014-03-12T08:17:27  *** locke105 has quit IRC
2014-03-12T08:18:02  *** vponomaryov1 has left #openstack-infra
2014-03-12T08:18:09  *** gokrokve has quit IRC
2014-03-12T08:20:46  *** eharney has joined #openstack-infra
2014-03-12T08:21:50  *** matsuhashi has quit IRC
2014-03-12T08:24:37  *** jgallard has joined #openstack-infra
2014-03-12T08:26:23  *** bada_ has joined #openstack-infra
2014-03-12T08:30:09  *** bada has quit IRC
2014-03-12T08:32:32  <openstackgerrit> Flavio Percoco proposed a change to openstack-infra/devstack-gate: Archive config files along with logs  https://review.openstack.org/69344
2014-03-12T08:35:28  *** ociuhandu has joined #openstack-infra
2014-03-12T08:35:48  *** amcrn has joined #openstack-infra
2014-03-12T08:35:59  *** jooools has joined #openstack-infra
2014-03-12T08:38:12  *** jungleboyj has quit IRC
2014-03-12T08:40:26  *** e0ne has joined #openstack-infra
2014-03-12T08:41:23  *** saju_m has quit IRC
2014-03-12T08:41:43  *** hashar has joined #openstack-infra
2014-03-12T08:43:29  *** gokrokve has joined #openstack-infra
2014-03-12T08:44:44  *** sarob has joined #openstack-infra
2014-03-12T08:47:04  *** ekarlso has quit IRC
2014-03-12T08:47:04  *** ekarlso has joined #openstack-infra
2014-03-12T08:47:54  *** gokrokve has quit IRC
2014-03-12T08:50:12  *** e0ne has quit IRC
2014-03-12T08:50:46  *** amcrn_ has joined #openstack-infra
2014-03-12T08:53:18  *** amcrn has quit IRC
2014-03-12T08:53:29  *** iv_m has left #openstack-infra
2014-03-12T08:53:59  *** amcrn_ is now known as amcrn
2014-03-12T08:54:12  *** yassine has joined #openstack-infra
2014-03-12T08:56:26  *** e0ne has joined #openstack-infra
2014-03-12T08:57:19  *** jepoy_ has joined #openstack-infra
2014-03-12T08:57:26  *** e0ne_ has joined #openstack-infra
2014-03-12T08:59:09  *** jepoy has quit IRC
2014-03-12T09:01:11  *** e0ne has quit IRC
2014-03-12T09:06:48  *** zhiyan is now known as zhiyan_
2014-03-12T09:07:33  *** jpich has joined #openstack-infra
2014-03-12T09:08:12  *** dizquierdo has joined #openstack-infra
2014-03-12T09:09:42  *** saju_m has joined #openstack-infra
2014-03-12T09:12:58  *** derekh has joined #openstack-infra
2014-03-12T09:18:04  <openstackgerrit> Nikita Konovalov proposed a change to openstack-infra/storyboard: Fill the last_login field  https://review.openstack.org/79887
2014-03-12T09:18:19  *** sarob has quit IRC
2014-03-12T09:20:33  *** Daisy__ has quit IRC
2014-03-12T09:20:40  *** jcoufal has quit IRC
2014-03-12T09:22:38  *** jcoufal has joined #openstack-infra
2014-03-12T09:23:44  *** jhesketh_ has quit IRC
2014-03-12T09:24:09  *** jhesketh__ has quit IRC
2014-03-12T09:24:18  *** enikanorov_ has joined #openstack-infra
2014-03-12T09:32:35  *** CaptTofu has joined #openstack-infra
2014-03-12T09:33:57  *** johnthetubaguy has joined #openstack-infra
2014-03-12T09:35:10  *** jepoy_ has quit IRC
2014-03-12T09:36:02  *** yaguang has quit IRC
2014-03-12T09:36:33  *** jhesketh__ has joined #openstack-infra
2014-03-12T09:36:37  *** afazekas has joined #openstack-infra
2014-03-12T09:36:42  *** jhesketh_ has joined #openstack-infra
2014-03-12T09:37:02  *** CaptTofu has quit IRC
2014-03-12T09:38:18  *** amcrn has quit IRC
2014-03-12T09:40:08  *** dizquierdo has quit IRC
2014-03-12T09:43:30  *** gokrokve has joined #openstack-infra
2014-03-12T09:48:14  *** gokrokve has quit IRC
2014-03-12T09:51:44  *** denis_makogon has quit IRC
2014-03-12T09:58:34  *** hashar has quit IRC
2014-03-12T10:01:18  *** pbelanyi has joined #openstack-infra
2014-03-12T10:06:39  *** zhiwei has joined #openstack-infra
2014-03-12T10:10:08  *** yamahata__ has quit IRC
2014-03-12T10:10:41  *** hashar has joined #openstack-infra
2014-03-12T10:13:13  *** jp_at_hp has joined #openstack-infra
2014-03-12T10:14:42  *** sarob has joined #openstack-infra
2014-03-12T10:17:04  *** yamahata has quit IRC
2014-03-12T10:18:45  *** rlandy has quit IRC
2014-03-12T10:18:48  <openstackgerrit> Nikita Konovalov proposed a change to openstack-infra/storyboard: Missing security decorators added  https://review.openstack.org/79895
2014-03-12T10:18:52  *** branen_ has quit IRC
2014-03-12T10:20:13  *** jerryz has quit IRC
2014-03-12T10:26:13  *** andreaf has joined #openstack-infra
2014-03-12T10:31:19  *** rlandy has joined #openstack-infra
2014-03-12T10:32:32  *** dizquierdo has joined #openstack-infra
2014-03-12T10:34:49  *** jamielennox is now known as jamielennox|away
2014-03-12T10:36:44  *** mugsie_ has quit IRC
2014-03-12T10:41:26  *** dcramer__ has quit IRC
2014-03-12T10:43:37  *** gokrokve has joined #openstack-infra
2014-03-12T10:44:18  <openstackgerrit> Russell Bryant proposed a change to openstack-infra/config: Create a nova-docker repo  https://review.openstack.org/79900
2014-03-12T10:46:25  <openstackgerrit> Russell Bryant proposed a change to openstack-infra/config: Create a nova-docker repo  https://review.openstack.org/79900
2014-03-12T10:47:54  *** sarob has quit IRC
2014-03-12T10:48:09  *** gokrokve has quit IRC
2014-03-12T10:48:43  <openstackgerrit> Victor Stinner proposed a change to openstack/requirements: Allow trollius 0.2  https://review.openstack.org/79901
2014-03-12T10:49:32  *** saju_m has quit IRC
2014-03-12T10:50:24  *** eharney has quit IRC
2014-03-12T10:51:09  *** lcostantino has joined #openstack-infra
2014-03-12T10:53:12  <jlibosva> hello, is there a way how can I re-trigger check on gate even though Jenkins gave +1?
2014-03-12T10:54:06  <StevenK> jlibosva: 'recheck no bug' as a review comment
2014-03-12T10:54:40  <jlibosva> StevenK: I tired that but it didn't trigger recheck
2014-03-12T10:54:48  <openstackgerrit> Russell Bryant proposed a change to openstack-infra/config: Create a nova-docker repo  https://review.openstack.org/79900
2014-03-12T10:56:49  * foobio missed the eldritch-horror pip branch discussion... that's what i get for taking a nap
2014-03-12T10:57:11  <foobio> jlibosva: do you have a link to the review where that didn't work?
2014-03-12T10:57:54  <foobio> SergeyLukjanov: where's the savanna reqs change you need forced in?
2014-03-12T10:58:12  <SergeyLukjanov> foobio, morning
2014-03-12T10:58:24  <SergeyLukjanov> foobio, all our d-g jobs are failing now
2014-03-12T10:58:30  <SergeyLukjanov> and I can't understand why
2014-03-12T10:58:43  <SergeyLukjanov> foobio, potential reason is that we've merged sqla 0.9
2014-03-12T10:58:57  *** bada_ has quit IRC
2014-03-12T10:59:08  <SergeyLukjanov> foobio, and IIRC due to the devstack issue with requirements revert failing
2014-03-12T10:59:23  <jlibosva> foobio: yes, https://review.openstack.org/#/c/58695/27
2014-03-12T11:00:00  <foobio> SergeyLukjanov: there was a logic error in devstack which was causing changes not to get tested with the global requirements list, and instead tested them with the combined requirements of projects being integrated. the fix for that finally merged yesterday but it's possible there were some requirements changes in projects which ended up being unsupportable and need to get adjusted
2014-03-12T11:00:09  *** Ryan_Lane has quit IRC
2014-03-12T11:00:31  <SergeyLukjanov> foobio, oh, got it
2014-03-12T11:00:40  <SergeyLukjanov> foobio, so, could you, please, forse push https://review.openstack.org/#/c/79647/
2014-03-12T11:00:42  <SergeyLukjanov> to revert
2014-03-12T11:00:57  <SergeyLukjanov> and probably take a look on how d-g jobs failing for savanna
2014-03-12T11:01:16  <foobio> looking over the failure log on that one now...
2014-03-12T11:01:37  *** spm has joined #openstack-infra
2014-03-12T11:01:38  <SergeyLukjanov> foobio, thank you
2014-03-12T11:02:01  <SergeyLukjanov> in fact I see "ImageKilledException: Image 8c68628a-3cdd-4e4a-87aa-9ed2562a6cd4 'killed' while waiting for 'active'" that's libvirt issue IIRC and horizon 500
2014-03-12T11:02:04  *** Ryan_Lane has joined #openstack-infra
2014-03-12T11:02:04  *** AaronGr has quit IRC
2014-03-12T11:02:54  <foobio> yeah, on the check-tempest-dsvm-savanna-full failure, that looks like one i've seen before
2014-03-12T11:04:42  <cyeoh> does anyone know how I can get the ical feed for the openstack meetings updated with a new meeting?
2014-03-12T11:04:50  <foobio> the other two look like error responses from a service api
2014-03-12T11:05:14  <foobio> cyeoh: you update the wiki. ttx subscribes to updates to that article and manually updates the ical feed
2014-03-12T11:05:36  <cyeoh> foobio: ah ok, thanks! Have updated the wiki so I'll just wait :-)
2014-03-12T11:05:57  <foobio> cyeoh: http://git.openstack.org/cgit/openstack-infra/gerrit-powered-agenda/ hopes to fix that
2014-03-12T11:05:59  *** AaronGr has joined #openstack-infra
2014-03-12T11:06:40  <cyeoh> foobio, ah that'd be nice
2014-03-12T11:06:58  <SergeyLukjanov> foobio, the only change we merged in the last few days is bump sqla, so, revert should help
2014-03-12T11:07:15  <cyeoh> was also wondering if the various commands like #topic, #startmeeting etc are documented anywhere?
2014-03-12T11:08:13  <foobio> cyeoh: a little here http://ci.openstack.org/irc.html#id3
2014-03-12T11:08:44  <cyeoh> foobio: thanks again
2014-03-12T11:08:52  <foobio> cyeoh: and more at https://git.openstack.org/cgit/openstack-infra/meetbot/tree/doc/Manual.txt
2014-03-12T11:09:13  <foobio> we probably ought to publish that in a slightly more discoverable place
2014-03-12T11:09:18  *** mugsie has joined #openstack-infra
2014-03-12T11:09:44  <SergeyLukjanov> foobio, before repo rename we need the to have landed https://review.openstack.org/#/c/79063/ and https://review.openstack.org/#/c/79347/ to add aliases
2014-03-12T11:09:49  <cyeoh> heh, thx - yea I did google a bit first for it, but I didn't know that it was called meetbot so didn't find anything
2014-03-12T11:09:52  <SergeyLukjanov> but both blocked by failing gate
2014-03-12T11:10:57  *** jgallard has quit IRC
2014-03-12T11:11:05  <foobio> SergeyLukjanov: well, there's actually no way of knowing what else might have changed in global-requirements.txt which is breaking savanna devstack jobs now that it's being applied again. in actuality i don't think any change to your requirements.txt or test-requirements.txt files in savanna should affect devstack jobs now that global-requirements.txt is being used to override those
2014-03-12T11:12:11  <SergeyLukjanov> foobio, savanna-related tests passed successfully
2014-03-12T11:12:12  <SergeyLukjanov> http://logs.openstack.org/47/79647/2/check/check-tempest-dsvm-savanna-full/877f1ca/console.html#_2014-03-11_19_16_43_140
2014-03-12T11:12:13  <foobio> SergeyLukjanov: so i don't have a lot of faith that 79647 will make any difference there at all
2014-03-12T11:12:42  <foobio> but i'll go ahead and force submit it to merge
2014-03-12T11:13:03  <SergeyLukjanov> foobio, thx
2014-03-12T11:13:04  <jlibosva> thanks Jeremy :) seems like Jenkins is just ignoring my name
2014-03-12T11:13:20  <SergeyLukjanov> foobio, there were only oslo sync in savanna and sqla version bump for the last 5 days
2014-03-12T11:13:29  <SergeyLukjanov> foobio, and savanna tests pass
2014-03-12T11:13:44  <SergeyLukjanov> foobio, so, I just don't know how it could affect other tests...
2014-03-12T11:15:01  <foobio> SergeyLukjanov: right, i mean the devstack jobs for savanna should be completely ignoring versions listed in your requirements files in savanna now that devstack is fixed, so i'm pretty sure changing your requirements in savanna isn't going to change the behavior for those. it would change behavior for your unit tests though
2014-03-12T11:15:57  <SergeyLukjanov> foobio, yup... if so, then it looks like Savanna addition to the d-g breaks something...
2014-03-12T11:16:28  <foobio> SergeyLukjanov: probably
2014-03-12T11:19:10  <foobio> SergeyLukjanov: okay, the three you requested are merged
2014-03-12T11:19:15  <SergeyLukjanov> foobio, thank you
2014-03-12T11:19:37  <SergeyLukjanov> foobio, I've recheck https://review.openstack.org/#/c/78789/
2014-03-12T11:19:47  <SergeyLukjanov> it's just a doc change, so, we should wee how it works
2014-03-12T11:20:08  <foobio> SergeyLukjanov: okay. i'm going to start putting jenkins masters in shutdown mode now
2014-03-12T11:20:14  <SergeyLukjanov> foobio, thank you!
2014-03-12T11:20:27  <foobio> which means currently running jobs will finish but new jobs will wait in a pending state in zuul
2014-03-12T11:20:34  *** hashar has quit IRC
2014-03-12T11:21:16  <SergeyLukjanov> foobio, I've reviewed renaming pad and it's lgtm (one path fixed)
2014-03-12T11:21:30  <SergeyLukjanov> and I'm volunteering to update .gitreviews on all updated repos
2014-03-12T11:22:08  <foobio> SergeyLukjanov: thanks--i guess i had an extra letter in that line or something?
2014-03-12T11:22:22  <SergeyLukjanov> foobio, double paste path
2014-03-12T11:22:37  <SergeyLukjanov> I mean doubled
2014-03-12T11:22:37  <foobio> ahh, overzealous middle button ;)
2014-03-12T11:22:43  <SergeyLukjanov> :)
2014-03-12T11:22:48  *** e0ne_ has quit IRC
2014-03-12T11:22:49  <foobio> thanks
2014-03-12T11:23:00  <SergeyLukjanov> thanks to *you* :)
2014-03-12T11:23:02  *** e0ne has joined #openstack-infra
2014-03-12T11:24:07  *** CaptTofu has joined #openstack-infra
2014-03-12T11:25:06  *** masayukig has joined #openstack-infra
2014-03-12T11:25:10  *** bada has joined #openstack-infra
2014-03-12T11:25:25  <foobio> okay, all jenkins masters are quiescing now
2014-03-12T11:25:54  <foobio> time to see if statusbot catches fire and burns to the ground
2014-03-12T11:26:24  *** e0ne_ has joined #openstack-infra
2014-03-12T11:27:13  <foobio> #status alert test/gate jobs are queuing now in preparation for gerrit maintenance at 12:00 utc (eta to resume is 12:30 utc)
2014-03-12T11:27:13  <openstackstatus> foobio: sending alert
2014-03-12T11:27:24  <SergeyLukjanov> aaand looks like we still alive
2014-03-12T11:27:36  <SergeyLukjanov> but topic is unchanged
2014-03-12T11:27:39  <openstackstatus> NOTICE: test/gate jobs are queuing now in preparation for gerrit maintenance at 12:00 utc (eta to resume is 12:30 utc)
2014-03-12T11:27:39  *** ChanServ changes topic to "test/gate jobs are queuing now in preparation for gerrit maintenance at 12:00 utc (eta to resume is 12:30 utc)"
2014-03-12T11:27:50  <foobio> patience ;)
2014-03-12T11:27:51  <SergeyLukjanov> oh
2014-03-12T11:27:52  <SergeyLukjanov> :)
2014-03-12T11:28:09  <openstackstatus> foobio: finished sending alert
2014-03-12T11:28:20  <SergeyLukjanov> awesome
2014-03-12T11:28:27  <SergeyLukjanov> and the same with other channels
2014-03-12T11:28:35  <SergeyLukjanov> except both savanna / sahara ;)
2014-03-12T11:28:41  *** CaptTofu has quit IRC
2014-03-12T11:28:52  <foobio> with the latest changes, it's now in >50 official irc channels, so it has a built-in throttle to prevent it from getting killed by the irc server for abuse
2014-03-12T11:29:20  <foobio> which is also why it now replies to you when it starts and finishes updating
2014-03-12T11:29:20  *** e0ne_ has quit IRC
2014-03-12T11:29:24  <SergeyLukjanov> yeah, I've reviewed it, but forget about throttle
2014-03-12T11:29:33  *** e0ne has quit IRC
2014-03-12T11:29:35  *** e0ne_ has joined #openstack-infra
2014-03-12T11:30:26  *** bada has quit IRC
2014-03-12T11:31:25  <sdague> foobio: man, what are you doing up so early :)
2014-03-12T11:31:34  <foobio> sdague: breaking things of course
2014-03-12T11:31:43  *** masayukig has quit IRC
2014-03-12T11:31:48  <foobio> sdague: i'm usually up this early, i just don't normally jump in irc this early
2014-03-12T11:31:55  <sdague> heh
2014-03-12T11:32:22  <foobio> i typically wake up around 10:00 utc
2014-03-12T11:32:24  <sdague> ah, I jump straight to irc in the morning. with my wife still sleeping might as well get some work done early.
2014-03-12T11:32:49  <sdague> foobio: regardless of dst?
2014-03-12T11:33:29  * foobio doesn't subscribe to his government's notions of clock-related fascism
2014-03-12T11:33:43  <sdague> damn fiat clocks!
2014-03-12T11:34:23  <foobio> i find that with the interrupt-driven nature of what i work on, if i don't make time for non-openstack things first, i frequently find that it's suddenly evening and i never showered and ate breakfast
2014-03-12T11:34:26  <SergeyLukjanov> sdague, morning
2014-03-12T11:34:38  <foobio> which i'm going to go do quickly now while i wait for these running jobs to wrap up
2014-03-12T11:34:59  * foobio will brb
2014-03-12T11:35:21  <sdague> SergeyLukjanov: morning
2014-03-12T11:36:16  <sdague> SergeyLukjanov: so what are the changes you need landed, and are they before or after the rename?
2014-03-12T11:36:54  <SergeyLukjanov> sdague, foobio, heh, I have inversed day schedule ;) wake up around 5am UTC (9am local) and creep to the bad around 10pm UTC
2014-03-12T11:37:09  <SergeyLukjanov> sdague, all CRs needed to be landed before the rename already landed
2014-03-12T11:37:14  <sdague> ok
2014-03-12T11:37:24  <SergeyLukjanov> sdague, after repos rename - d-g update + devstack update
2014-03-12T11:37:32  <SergeyLukjanov> and I hope it'll just work
2014-03-12T11:37:43  <sdague> sounds good, point me to them once we are done
2014-03-12T11:37:49  <SergeyLukjanov> probably several force pushed commits :)
2014-03-12T11:37:59  <SergeyLukjanov> sdague, sure, thanks
2014-03-12T11:38:20  *** CaptTofu has joined #openstack-infra
2014-03-12T11:39:39  *** johnthetubaguy1 has joined #openstack-infra
2014-03-12T11:42:09  *** johnthetubaguy has quit IRC
2014-03-12T11:42:49  *** fifieldt has quit IRC
2014-03-12T11:43:29  *** gokrokve has joined #openstack-infra
2014-03-12T11:44:57  *** sarob has joined #openstack-infra
2014-03-12T11:46:33  *** mbacchi has joined #openstack-infra
2014-03-12T11:47:56  *** gokrokve has quit IRC
2014-03-12T11:48:29  *** talluri has joined #openstack-infra
2014-03-12T11:52:39  <openstackgerrit> Nikita Konovalov proposed a change to openstack-infra/storyboard: Missing security decorators added  https://review.openstack.org/79895
2014-03-12T11:52:56  <openstackgerrit> afazekas proposed a change to openstack-infra/devstack-gate: Add n-novnc and n-cauth  https://review.openstack.org/55721
2014-03-12T11:52:59  *** talluri has quit IRC
2014-03-12T11:53:22  *** mkerrin has quit IRC
2014-03-12T11:55:03  *** lcestari has joined #openstack-infra
2014-03-12T11:59:15  *** mwagner_lap has quit IRC
2014-03-12T11:59:19  *** jamespage has joined #openstack-infra
2014-03-12T11:59:24  <foobio> okay, bacvk
2014-03-12T12:00:21  <foobio> looks like there are some savanna-related changes which ended up approved into the gate. not sure what will happen to those when the jobs no longer exist... guess we'll find out
2014-03-12T12:00:54  *** spm has left #openstack-infra
2014-03-12T12:01:01  <SergeyLukjanov> foobio, they aren't important, I'll reapprove them if needed
2014-03-12T12:01:05  *** mkerrin has joined #openstack-infra
2014-03-12T12:01:31  <foobio> i'm ready to stop gerrit, but i'm going to rename your gerrit groups first so that manage-projects doesn't recreate them when it imports the updated acls
2014-03-12T12:02:06  *** rlandy_ has joined #openstack-infra
2014-03-12T12:02:50  *** aysyd has joined #openstack-infra
2014-03-12T12:03:05  <SergeyLukjanov> foobio, ok
2014-03-12T12:04:34  *** rlandy has quit IRC
2014-03-12T12:04:35  *** mburned_out is now known as mburned
2014-03-12T12:05:23  *** eharney has joined #openstack-infra
2014-03-12T12:05:28  <foobio> now to test whether statusbot will still correctly update topics when changing an alert without cancelling it first
2014-03-12T12:06:12  <foobio> #status gerrit on review.openstack.org is down for maintenance (eta to resume is 12:30 utc)
2014-03-12T12:06:12  <openstackstatus> foobio: unknown command
2014-03-12T12:06:18  <foobio> duh
2014-03-12T12:06:23  <foobio> #status alert gerrit on review.openstack.org is down for maintenance (eta to resume is 12:30 utc)
2014-03-12T12:06:23  <openstackstatus> foobio: sending alert
2014-03-12T12:08:42  <foobio> it's not actually down yet, but the last jobs are about wrapped up
2014-03-12T12:09:08  *** jgallard has joined #openstack-infra
2014-03-12T12:12:50  *** talluri has joined #openstack-infra
2014-03-12T12:12:54  <foobio> and statusbot seems not to have updated correctly (or it's still trying)
2014-03-12T12:13:46  *** e0ne has joined #openstack-infra
2014-03-12T12:14:27  <SergeyLukjanov> foobio, I see "[16:06:38]  <openstackstatus>	 NOTICE: gerrit on review.openstack.org is down for maintenance (eta to resume is 12:30 utc)" in some channels
2014-03-12T12:14:46  <foobio> okay, hopefully it's just taking its time
2014-03-12T12:17:31  *** julim has joined #openstack-infra
2014-03-12T12:17:54  *** sarob has quit IRC
2014-03-12T12:18:58  *** dprince has joined #openstack-infra
2014-03-12T12:19:11  *** yassine has quit IRC
2014-03-12T12:19:18  *** yassine has joined #openstack-infra
2014-03-12T12:19:18  *** yassine has quit IRC
2014-03-12T12:19:26  *** yassine has joined #openstack-infra
2014-03-12T12:20:22  *** yassine has quit IRC
2014-03-12T12:20:38  *** yassine has joined #openstack-infra
2014-03-12T12:21:09  *** enikanorov_ has quit IRC
2014-03-12T12:22:16  <foobio> i'm killing these last few long-running jobs because they're all in check and either non-voting or associated with changes which have a bunch of other failed jobs
2014-03-12T12:23:31  <foobio> and now we're ready
2014-03-12T12:23:49  <foobio> #status alert gerrit on review.openstack.org is down for maintenance (revised eta to resume is 13:00 utc)
2014-03-12T12:23:49  <openstackstatus> foobio: sending alert
2014-03-12T12:24:09  *** david-lyle has quit IRC
2014-03-12T12:24:14  <openstackstatus> NOTICE: gerrit on review.openstack.org is down for maintenance (revised eta to resume is 13:00 utc)
2014-03-12T12:24:15  *** ChanServ changes topic to "gerrit on review.openstack.org is down for maintenance (revised eta to resume is 13:00 utc)"
2014-03-12T12:24:44  <openstackstatus> foobio: finished sending alert
2014-03-12T12:26:02  *** enikanorov_ has joined #openstack-infra
2014-03-12T12:27:06  <foobio> db updates in step #5 done. working on filesystem modifications now
2014-03-12T12:30:39  * SergeyLukjanov crossed fingers
2014-03-12T12:33:06  *** bogdando has quit IRC
2014-03-12T12:33:08  <foobio> filesystem updates done. going to skip steps 8-12 and do step 13 first since i just realized that otherwise i may end up with a mess courtesy of manage-projects
2014-03-12T12:37:54  *** saju_m has joined #openstack-infra
2014-03-12T12:39:08  *** esker has joined #openstack-infra
2014-03-12T12:39:59  <afazekas> On https://review.openstack.org/ I got 503
2014-03-12T12:40:13  <foobio> afazekas: see /topic
2014-03-12T12:40:15  <afazekas> :)
2014-03-12T12:40:54  *** jasondotstar has joined #openstack-infra
2014-03-12T12:41:34  <foobio> okay, #13 done, dropping back to 8 now
2014-03-12T12:42:16  *** ArxCruz has joined #openstack-infra
2014-03-12T12:42:51  <foobio> gerrit is back up, working on remaining steps niow
2014-03-12T12:43:27  *** gokrokve has joined #openstack-infra
2014-03-12T12:44:38  *** jhesketh__ has quit IRC
2014-03-12T12:45:09  *** jhesketh_ has quit IRC
2014-03-12T12:45:19  <foobio> step 9 done, zuul shows jobs running again, cancelling alert before proceeding
2014-03-12T12:45:26  <foobio> #status ok
2014-03-12T12:45:26  <openstackstatus> foobio: sending ok
2014-03-12T12:45:35  <tristanC> Good work!
2014-03-12T12:45:51  <SergeyLukjanov>  foobio, yay! I'm going to send .gitreview updates
2014-03-12T12:45:54  <openstackstatus> foobio: finished sending ok
2014-03-12T12:46:01  <foobio> SergeyLukjanov: not done yet
2014-03-12T12:46:14  <foobio> SergeyLukjanov: your projects still aren't done being renamed until i get to the end
2014-03-12T12:46:27  *** hashar has joined #openstack-infra
2014-03-12T12:46:32  <foobio> i merely ended the alert because gerrit and jenkins are back online again
2014-03-12T12:46:59  <foobio> okay, 79097 and 64788 have been approved
2014-03-12T12:47:30  <SergeyLukjanov> foobio, yup
2014-03-12T12:47:31  *** CaptTofu has quit IRC
2014-03-12T12:47:31  *** zhiyan_ is now known as zhiyan
2014-03-12T12:47:58  *** CaptTofu has joined #openstack-infra
2014-03-12T12:48:00  <foobio> to speed this along, i'm preparing to pull an early update on ci-puppetmaster once they get through the gate in a moment
2014-03-12T12:48:20  *** gokrokve has quit IRC
2014-03-12T12:49:07  <foobio> otherwise we'll be waiting on the 13:00 cron pulse before i can update the puppet config on review.o.o
2014-03-12T12:49:22  *** johnthetubaguy1 has quit IRC
2014-03-12T12:49:26  <openstackgerrit> A change was merged to openstack-infra/config: First step of renaming Savanna to Sahara  https://review.openstack.org/79097
2014-03-12T12:49:56  <SergeyLukjanov> foobio, ok
2014-03-12T12:50:23  *** rlandy__ has joined #openstack-infra
2014-03-12T12:50:44  <foobio> SergeyLukjanov: also, i expect at least some of your jenkins jobs will be broken for the next few minutes too until jenkins-job-builder runs on the jenkins masters
2014-03-12T12:51:10  <SergeyLukjanov> foobio, git it
2014-03-12T12:51:11  *** thuc_ has joined #openstack-infra
2014-03-12T12:51:13  <SergeyLukjanov> :)
2014-03-12T12:51:15  <foobio> but it should sort itself out within about 15 minutes
2014-03-12T12:51:16  <SergeyLukjanov> got*
2014-03-12T12:51:21  <openstackgerrit> A change was merged to openstack-infra/config: Rename a StackForge project  https://review.openstack.org/64788
2014-03-12T12:51:33  <foobio> okay, updating the puppetmaster so i can continue
2014-03-12T12:51:48  *** johnthetubaguy has joined #openstack-infra
2014-03-12T12:52:22  *** ociuhandu has quit IRC
2014-03-12T12:52:24  *** CaptTofu has quit IRC
2014-03-12T12:52:28  *** esker has quit IRC
2014-03-12T12:53:10  *** esker has joined #openstack-infra
2014-03-12T12:53:17  *** rlandy_ has quit IRC
2014-03-12T12:53:28  *** rlandy has joined #openstack-infra
2014-03-12T12:54:00  *** dkranz has joined #openstack-infra
2014-03-12T12:54:24  *** openstackgerrit has quit IRC
2014-03-12T12:54:45  *** openstackgerrit has joined #openstack-infra
2014-03-12T12:54:56  *** rlandy__ has quit IRC
2014-03-12T12:55:28  *** bogdando has joined #openstack-infra
2014-03-12T12:55:31  <foobio> also looks like statusbot never updated the topics back, so something like 54 channels we need to reset topics on
2014-03-12T12:55:33  *** johnthetubaguy has quit IRC
2014-03-12T12:55:38  *** weshay has quit IRC
2014-03-12T12:55:45  *** johnthetubaguy has joined #openstack-infra
2014-03-12T12:57:23  <SergeyLukjanov> foobio, heh :(
2014-03-12T12:57:29  *** changbl has quit IRC
2014-03-12T12:57:48  <foobio> manage-projects is running for the 9 renamed repositories now
2014-03-12T12:58:21  <foobio> looks like it ran clean... checking behind it
2014-03-12T12:59:13  <AJaeger> foobio, IRC worked on openstack-doc - so only 53 ;)
2014-03-12T12:59:53  <foobio> AJaeger: nice!
2014-03-12T13:01:52  <foobio> spot checks of renamed projects' acls look correct
2014-03-12T13:02:05  <foobio> also puppet agent is restarted on review.o.o now
2014-03-12T13:02:19  <SergeyLukjanov> foobio, looks like chanserv start returning old topics, is it you?
2014-03-12T13:02:37  <foobio> SergeyLukjanov: oh, is it still trying?
2014-03-12T13:02:43  <SergeyLukjanov> foobio, yup
2014-03-12T13:02:46  <foobio> hasn't updated in here yet
2014-03-12T13:02:53  *** dcramer__ has joined #openstack-infra
2014-03-12T13:02:58  <SergeyLukjanov> foobio, in #heat for e
2014-03-12T13:02:59  <SergeyLukjanov> [16:45:28] ChanServ changed the topic to support @ https://ask.openstack.org | developer wiki @ https://wiki.openstack.org/wiki/Heat | development @ https://launchpad.net/heat | logged @ http://eavesdrop.openstack.org/irclogs/%23heat/
2014-03-12T13:03:10  *** rlandy_ has joined #openstack-infra
2014-03-12T13:03:42  <foobio> SergeyLukjanov: yeah, but back at 12:45 utc it also responded to me that it was done sending updates to channels
2014-03-12T13:03:53  <foobio> so i don't think it fixed any more of them after that
2014-03-12T13:04:15  <foobio> for example, the topic in here hasn't been restored to normal yet
2014-03-12T13:04:37  <foobio> i haven't checked its logs, but will once we're settled on the final renaming tasks
2014-03-12T13:04:59  <SergeyLukjanov> foobio, ok, thank you
2014-03-12T13:05:21  <foobio> SergeyLukjanov: i suppose you can send your .gitreview updates to those projects now and we'll make sure they run jobs and whatnot
2014-03-12T13:05:33  <SergeyLukjanov> foobio, already done
2014-03-12T13:05:41  <openstackgerrit> Nikita Konovalov proposed a change to openstack-infra/storyboard-webclient: Hide "Create Project" for non-superusers  https://review.openstack.org/79939
2014-03-12T13:05:55  *** rlandy has quit IRC
2014-03-12T13:05:57  <foobio> zuul reports "Last reconfigured: Wed Mar 12 2014 12:57:46 GMT+0000 (UTC)" so it should know what to do with them if they got submitted to gerrit after that
2014-03-12T13:07:12  <SergeyLukjanov> foobio, yup
2014-03-12T13:07:24  <foobio> if not, recheck no bug
2014-03-12T13:07:30  <SergeyLukjanov> foobio, I've send them ~13:00
2014-03-12T13:07:39  <SergeyLukjanov> foobio, I'll track them
2014-03-12T13:07:39  <foobio> great
2014-03-12T13:07:44  <foobio> thanks!
2014-03-12T13:07:53  <AJaeger> foobio, 79932,1 has one "NOT_REGISTERED"
2014-03-12T13:08:05  <SergeyLukjanov> foobio, could you, please, approve https://review.openstack.org/#/c/78960/ too
2014-03-12T13:08:14  <AJaeger> foobio, same with 79333 - the ones afterwards look fine so far
2014-03-12T13:08:14  <SergeyLukjanov> foobio, to make us able to move to the channel
2014-03-12T13:08:15  <foobio> AJaeger: yeah, that probably means that jjb hadn't run on any of the jenkins masters to create it yet
2014-03-12T13:08:34  <SergeyLukjanov> foobio,yeah, sounds like jjb isnt created jobs yet
2014-03-12T13:08:38  *** openstackgerrit has quit IRC
2014-03-12T13:08:59  *** openstackgerrit has joined #openstack-infra
2014-03-12T13:09:10  <foobio> done. doesn't look like there were any meetings going on yet
2014-03-12T13:10:25  <SergeyLukjanov> foobio, thx
2014-03-12T13:10:30  <foobio> i'm going to start analyzing the statusbot problems
2014-03-12T13:12:09  *** rcarrillocruz1 has joined #openstack-infra
2014-03-12T13:12:54  *** rcarrillocruz has quit IRC
2014-03-12T13:13:04  <foobio> 2014-03-12 12:45:39,086 INFO statusbot.bot: Setting topic on #openstack-infra to Discussion of OpenStack Project Infrastructure | Docs http://ci.openstack.org/ | Bugs https://launchpad.net/openstack-ci | Code https://git.openstack.org/cgit/openstack-infra/
2014-03-12T13:13:11  <foobio> except... it didn't
2014-03-12T13:13:25  *** talluri has quit IRC
2014-03-12T13:14:29  <SergeyLukjanov> foobio, heh
2014-03-12T13:14:43  *** dkliban has joined #openstack-infra
2014-03-12T13:15:02  <foobio> nothing useful in the debug log either. we may need to add a belt and braces so it checks behind itself and retries topic changes multiple times
2014-03-12T13:15:02  *** sarob has joined #openstack-infra
2014-03-12T13:15:22  <foobio> in the meantime, at least the log says what it *thought* it did, so i'll check behind it and fix what it didn't
2014-03-12T13:15:29  *** rlandy__ has joined #openstack-infra
2014-03-12T13:15:39  *** jeckersb_gone is now known as jeckersb
2014-03-12T13:16:04  *** esker has quit IRC
2014-03-12T13:16:29  <SergeyLukjanov> foobio, are you ok if I self-approve such cleanup https://review.openstack.org/#/c/79543/ for sahara renaming when env will be ready?
2014-03-12T13:16:43  *** ociuhandu has joined #openstack-infra
2014-03-12T13:17:16  <foobio> SergeyLukjanov: i'll review it real quick
2014-03-12T13:17:50  <foobio> SergeyLukjanov: keep in mind that if the group name is the same as the project name (after the /) then it's not actually needed
2014-03-12T13:18:00  *** rlandy_ has quit IRC
2014-03-12T13:18:04  <SergeyLukjanov> foobio, yup, just for visibility
2014-03-12T13:18:12  <foobio> okay
2014-03-12T13:18:13  <SergeyLukjanov> foobio, or you think it's better to remove?
2014-03-12T13:18:39  *** mriedem has joined #openstack-infra
2014-03-12T13:18:41  <foobio> i think it's likely to cause a lot of other people to not realize it's an override and start doing the same thing on all new project additions
2014-03-12T13:19:17  <foobio> but we can fix it in a cleanup pass. i'd like to clear out a lot of the old cruft in that file anyway (remove unneeded upstream parameters too)
2014-03-12T13:19:47  <foobio> i also want to normalize the gerrit acls and collapse some of them, but i've not been finding the time
2014-03-12T13:19:56  <openstackgerrit> Davanum Srinivas (dims) proposed a change to openstack-infra/devstack-gate: WIP : Try patched libvirt from @hallyn - Not for review  https://review.openstack.org/79816
2014-03-12T13:20:18  <foobio> because right now a lot of people cargo cult what they see in existing files into their new projects, which just adds new cruft
2014-03-12T13:20:52  <SergeyLukjanov> foobio, yeah, it's a big issue for acls
2014-03-12T13:21:11  *** johnthetubaguy1 has joined #openstack-infra
2014-03-12T13:21:16  <SergeyLukjanov> foobio, I'll take a look on projects list and try to clenup groups/upstream
2014-03-12T13:21:23  *** johnthetubaguy has quit IRC
2014-03-12T13:21:40  <foobio> SergeyLukjanov: apprecuiated! there's no hurry on that though... you've got your hands full with your renaming
2014-03-12T13:22:04  <SergeyLukjanov> foobio, now, I should wait for some time to see how jobs are running :)
2014-03-12T13:23:13  <SergeyLukjanov> foobio, I've retriggered https://review.openstack.org/#/c/79099/
2014-03-12T13:23:36  <AJaeger> SergeyLukjanov, time for a coffee or two - and send a virtual one to foobio ;)
2014-03-12T13:23:46  <SergeyLukjanov> AJaeger, yeah :)
2014-03-12T13:24:25  <foobio> thanks!
2014-03-12T13:25:01  *** sweston has quit IRC
2014-03-12T13:25:04  <SergeyLukjanov> foobio, heh, looks like we'll wait for a quite long time before sahara will be unblocked :( queue isn't empty :)
2014-03-12T13:25:56  *** rlandy_ has joined #openstack-infra
2014-03-12T13:27:18  *** ryanpetrello has joined #openstack-infra
2014-03-12T13:27:29  <sdague> foobio: the fails in the gate right now are weird - https://jenkins07.openstack.org/job/gate-tempest-dsvm-full/2000/console
2014-03-12T13:27:34  <sdague> something wrong with nodepool?
2014-03-12T13:27:38  <sdague> or the images
2014-03-12T13:27:55  <sdague> https://jenkins07.openstack.org/job/gate-tempest-dsvm-full/2000/console
2014-03-12T13:27:58  <foobio> sdague: not that anybody's told me yet. care to enlighten?
2014-03-12T13:27:59  <sdague> 2014-03-12 13:12:35.413 | /opt/stack/new/devstack-gate/devstack-vm-gate.sh: line 269: cd: /opt/stack/new/devstack: No such file or directory
2014-03-12T13:28:01  <foobio> looking
2014-03-12T13:28:07  *** rlandy__ has quit IRC
2014-03-12T13:28:55  <SergeyLukjanov> sdague, foobio, probably it's because of job id 2000 (millennium failure)? :)
2014-03-12T13:29:22  <sdague> so I think review 80k will get allocated today
2014-03-12T13:29:29  <sdague> will be interesting to see what it is
2014-03-12T13:29:33  <foobio> http://logs.openstack.org/53/79053/2/gate/gate-tempest-dsvm-full/4e8262b/logs/devstack-gate-setup-workspace-new.txt.gz
2014-03-12T13:29:39  <foobio> "fatal: https://git.openstack.org/openstack/savanna-dashboard/info/refs not found: did you run git update-server-info on the server?
2014-03-12T13:29:58  <sdague> ah, so everything is borked until we merge those things
2014-03-12T13:30:09  <foobio> i guess we need to cram the d-g change through SergeyLukjanov
2014-03-12T13:30:19  <sdague> ok, where are the rename patches?
2014-03-12T13:30:31  <SergeyLukjanov> https://review.openstack.org/#/c/79099/
2014-03-12T13:30:37  <SergeyLukjanov> sdague, foobio ^^
2014-03-12T13:30:38  *** thuc_ has quit IRC
2014-03-12T13:30:48  <foobio> remaining patches in that topic are https://review.openstack.org/#/q/status:open+branch:master+topic:savanna-sahara,n,z
2014-03-12T13:31:12  *** thuc has joined #openstack-infra
2014-03-12T13:31:13  <sdague> foobio: so I think you shuold just ninja merge - https://review.openstack.org/#/c/79099/
2014-03-12T13:31:20  <foobio> sdague: yep
2014-03-12T13:31:39  <sdague> you have my +2 on it
2014-03-12T13:31:42  <sdague> for backup
2014-03-12T13:31:44  <SergeyLukjanov> yeah, d-g is non-conditional
2014-03-12T13:32:17  <sdague> foobio: then can we clear dtroyer's -2 via ninja means in https://review.openstack.org/#/c/79353/3 ?
2014-03-12T13:32:19  <openstackgerrit> A change was merged to openstack-infra/devstack-gate: Rename Savanna to Sahara  https://review.openstack.org/79099
2014-03-12T13:32:55  <foobio> sdague: i've spirited him away
2014-03-12T13:34:07  *** CaptTofu has joined #openstack-infra
2014-03-12T13:34:42  <SergeyLukjanov> foobio, sdague, I think that we shouldn't approve https://review.openstack.org/#/c/79353/ before rechecking - it'll not affects anyone except sahara
2014-03-12T13:34:43  <foobio> also reshuffled the gate to start retesting anything which hadn't already been kicked out
2014-03-12T13:34:46  *** esker has joined #openstack-infra
2014-03-12T13:34:47  *** rlandy__ has joined #openstack-infra
2014-03-12T13:35:12  *** thuc has quit IRC
2014-03-12T13:35:55  <sdague> SergeyLukjanov: sure, but clean check handles than anyway
2014-03-12T13:36:01  <foobio> back to checking channel topics, but ping me again if anything else looks horribly broken
2014-03-12T13:36:16  <sdague> oh, I guess it doesn't quite, because saraha is nv
2014-03-12T13:36:23  <foobio> mmm, #openstack-bacon
2014-03-12T13:36:28  *** thomasem has joined #openstack-infra
2014-03-12T13:36:38  <SergeyLukjanov> heh, the one positive thing for me that we catch name issue earlier... renaming being in the sync gate is much painful
2014-03-12T13:37:07  *** rlandy_ has quit IRC
2014-03-12T13:37:25  *** smarcet has joined #openstack-infra
2014-03-12T13:37:37  *** dcramer__ has quit IRC
2014-03-12T13:39:51  <sdague> agreed
2014-03-12T13:40:54  *** jgrimm has quit IRC
2014-03-12T13:41:24  <foobio> given that all devstack jobs probably want to clone savanna (well, now sahara), i should probably at a minimum start rebuilds of the devstack-precise images in all providers so we don't ddos our git servers again
2014-03-12T13:41:44  <SergeyLukjanov> foobio, that's correct
2014-03-12T13:41:52  <sdague> foobio: good call
2014-03-12T13:42:04  <sdague> man, who needs git servers anyway
2014-03-12T13:42:11  <sdague> we should just do this with smoke signals
2014-03-12T13:42:14  *** rlandy__ is now known as rlandy
2014-03-12T13:43:09  <dims_> lol
2014-03-12T13:43:33  *** nosnos has quit IRC
2014-03-12T13:43:40  *** gokrokve has joined #openstack-infra
2014-03-12T13:44:48  <openstackgerrit> Antoine Musso proposed a change to openstack-infra/zuul: cloner to easily clone dependent repositories  https://review.openstack.org/70373
2014-03-12T13:47:20  *** adalbas has joined #openstack-infra
2014-03-12T13:47:55  *** sarob has quit IRC
2014-03-12T13:48:06  <foobio> "Failed to fetch http://nov.ec2.archive.ubuntu.com/ubuntu/pool/universe/q/qpid-python/python-qpid_0.12-2_all.deb ..." huh?
2014-03-12T13:48:13  <foobio> http://logs.openstack.org/65/77965/9/gate/gate-tempest-dsvm-large-ops/87dc2df/logs/devstacklog.txt.gz
2014-03-12T13:48:25  *** weshay has joined #openstack-infra
2014-03-12T13:48:31  *** gokrokve has quit IRC
2014-03-12T13:48:44  <foobio> does hpcloud seriously fetch debian packages from amazon?
2014-03-12T13:49:11  <foobio> well, rather does archive.ubuntu.com seriously serve their packages from amazon?
2014-03-12T13:49:42  *** talluri has joined #openstack-infra
2014-03-12T13:49:49  <openstackgerrit> Arx Cruz proposed a change to openstack-infra/nodepool: Adding the possibility to pass a cleanup timeout to nodepool  https://review.openstack.org/71261
2014-03-12T13:49:55  <foobio> but yeah, i can't resolve nov.ec2.archive.ubuntu.com either
2014-03-12T13:50:56  *** matsuhashi has joined #openstack-infra
2014-03-12T13:51:45  *** wchrisj has joined #openstack-infra
2014-03-12T13:52:56  <openstackgerrit> A change was merged to openstack-infra/config: Add logging to the new #openstack-sahara channel  https://review.openstack.org/78960
2014-03-12T13:53:03  <sdague> foobio: it wouldn't surprise me
2014-03-12T13:53:13  <sdague> or at least that it's a valid mirror
2014-03-12T13:53:47  <openstackgerrit> Arx Cruz proposed a change to openstack-infra/config: Initial support to a custom puppet master server  https://review.openstack.org/77587
2014-03-12T13:53:58  <foobio> apparently cloud-init picks your package mirror for you
2014-03-12T13:54:29  *** talluri has quit IRC
2014-03-12T13:56:02  *** matsuhashi has quit IRC
2014-03-12T13:56:42  <sdague> I wonder where it picks it from
2014-03-12T13:57:25  *** yamahata has joined #openstack-infra
2014-03-12T13:57:45  <foobio> that's one of those ubuntu mysteries i try not to look to deeply into
2014-03-12T13:58:01  <foobio> because it will probably just send me running screaming if i discover the truth
2014-03-12T13:58:28  *** vhoward- has joined #openstack-infra
2014-03-12T13:59:12  *** zhiwei has left #openstack-infra
2014-03-12T14:00:35  *** matsuhashi has joined #openstack-infra
2014-03-12T14:01:28  *** mwagner_lap has joined #openstack-infra
2014-03-12T14:01:53  *** markmcclain has joined #openstack-infra
2014-03-12T14:02:09  <openstackgerrit> A change was merged to openstack-infra/config: Rename savanna group to sahara  https://review.openstack.org/79543
2014-03-12T14:02:24  *** dcramer__ has joined #openstack-infra
2014-03-12T14:03:06  *** e0ne_ has joined #openstack-infra
2014-03-12T14:03:09  *** dims_ has quit IRC
2014-03-12T14:04:58  *** openstack has joined #openstack-infra
2014-03-12T14:05:53  *** e0ne has quit IRC
2014-03-12T14:06:37  *** ChanServ sets mode: +o foobio
2014-03-12T14:06:45  *** foobio changes topic to "Discussion of OpenStack Project Infrastructure | Docs http://ci.openstack.org/ | Bugs https://launchpad.net/openstack-ci | Code https://git.openstack.org/cgit/openstack-infra/"
2014-03-12T14:06:50  *** ChanServ sets mode: -o foobio
2014-03-12T14:07:32  *** dkranz has quit IRC
2014-03-12T14:09:58  *** rcleere has joined #openstack-infra
2014-03-12T14:10:49  *** talluri has joined #openstack-infra
2014-03-12T14:15:44  *** dims_ has joined #openstack-infra
2014-03-12T14:16:04  *** jasondotstar has quit IRC
2014-03-12T14:16:48  *** jepoy has joined #openstack-infra
2014-03-12T14:17:05  <openstackgerrit> Antoine Musso proposed a change to openstack-infra/zuul: cloner to easily clone dependent repositories  https://review.openstack.org/70373
2014-03-12T14:17:43  *** mfer has joined #openstack-infra
2014-03-12T14:20:59  *** talluri has quit IRC
2014-03-12T14:22:01  <jeblair> foobio: sitrep?
2014-03-12T14:22:15  *** chandan_kumar has quit IRC
2014-03-12T14:22:22  <foobio> still updating topics in channels, but otherwise all sitnorm
2014-03-12T14:22:25  <sdague> jeblair: I think things are generally good on the rename
2014-03-12T14:22:57  *** dkranz has joined #openstack-infra
2014-03-12T14:23:10  <foobio> biggest hiccup was that we forgot that devstack-gate would die if it couldn't update savanna repos from git.o.o after the rename
2014-03-12T14:23:41  <foobio> so had to cram the d-g change sooner in to stop the bleeding
2014-03-12T14:23:45  *** matsuhashi has quit IRC
2014-03-12T14:24:25  *** talluri has joined #openstack-infra
2014-03-12T14:25:08  *** chandan_kumar has joined #openstack-infra
2014-03-12T14:25:23  <SergeyLukjanov> yup
2014-03-12T14:25:27  <jeblair> foobio: ok.  i see you did decide to road test statusbot :)
2014-03-12T14:25:43  *** gokrokve has joined #openstack-infra
2014-03-12T14:25:48  <foobio> yep, it... mostly worked?
2014-03-12T14:26:10  <foobio> oh, and i have nodepool image updates running for devstack-precise in every provider so that we don't ddos ourselves with every single devstack job cloning a fresh sahara repo
2014-03-12T14:26:26  <jeblair> foobio: good idea
2014-03-12T14:26:31  *** krotscheck has joined #openstack-infra
2014-03-12T14:27:06  *** homeless has quit IRC
2014-03-12T14:28:00  *** dkranz has quit IRC
2014-03-12T14:28:01  *** johnthetubaguy1 is now known as johnthetubaguy
2014-03-12T14:30:00  *** e0ne_ has quit IRC
2014-03-12T14:30:16  *** matsuhashi has joined #openstack-infra
2014-03-12T14:30:51  *** david-lyle has joined #openstack-infra
2014-03-12T14:31:36  <jeblair> 2014-03-12 12:45:55,077 DEBUG irc.client: FROM SERVER: :ChanServ!ChanServ@services. NOTICE openstackstatus :+You have triggered services flood protection.
2014-03-12T14:31:36  <jeblair> 2014-03-12 12:45:55,077 DEBUG irc.client: FROM SERVER: :ChanServ!ChanServ@services. NOTICE openstackstatus :+This is your last warning. You will be ignored for 30 seconds.
2014-03-12T14:31:41  <jeblair> there we go
2014-03-12T14:31:52  <SergeyLukjanov> heh
2014-03-12T14:32:30  <hashar> hopefully freenode can whitelist your bot
2014-03-12T14:32:44  *** zns has joined #openstack-infra
2014-03-12T14:32:51  <jeblair> hashar: oh they can do that?
2014-03-12T14:32:57  <foobio> oh! i overlooked that because i was digging for failure responses on the /topic commands
2014-03-12T14:33:17  <hashar> jeblair: we have a bunch of very spammy bots and I am pretty sure we are not encountering flood silencing.
2014-03-12T14:33:37  <hashar> jeblair: so either we have our bot throttle their output or we got them whitelisted somehow.
2014-03-12T14:34:17  <foobio> hashar: do they try to update topics on >50 channels at once? that might be a separate flood protection setting for them
2014-03-12T14:34:52  <hashar> ah that might be too spammy indeed :]
2014-03-12T14:34:56  <jeblair> foobio: i think you should be able to set the topics via chanserv too, which might be faster/easier (you don't have to op yourself)
2014-03-12T14:35:03  *** e0ne has joined #openstack-infra
2014-03-12T14:35:10  <foobio> jeblair: ooh, good idea
2014-03-12T14:36:33  *** nati_ueno has joined #openstack-infra
2014-03-12T14:37:29  *** eharney has quit IRC
2014-03-12T14:37:52  *** sweston has joined #openstack-infra
2014-03-12T14:37:56  <openstackgerrit> James E. Blair proposed a change to openstack-infra/statusbot: Sleep 1 second  https://review.openstack.org/79956
2014-03-12T14:40:29  *** chandankumar_ has joined #openstack-infra
2014-03-12T14:40:50  *** dkranz has joined #openstack-infra
2014-03-12T14:40:50  *** chandankumar_ has quit IRC
2014-03-12T14:44:08  *** jgrimm has joined #openstack-infra
2014-03-12T14:45:03  *** sarob has joined #openstack-infra
2014-03-12T14:49:32  *** rfolco has joined #openstack-infra
2014-03-12T14:50:49  *** eharney has joined #openstack-infra
2014-03-12T14:50:59  *** thedodd has joined #openstack-infra
2014-03-12T14:51:28  *** wenlock has joined #openstack-infra
2014-03-12T14:52:50  *** andreaf has quit IRC
2014-03-12T14:54:19  <zns> ilyashakhat: thank you for merging my stackalytics update.
2014-03-12T14:55:06  <ilyashakhat> zns: you are welcome :)
2014-03-12T14:56:15  <hashar> jeblair: I might have ported devstack fallback system to python with latest patch of https://review.openstack.org/70373 :]
2014-03-12T14:56:23  <hashar> jeblair: looking for a way to test the zuul cloner know:]
2014-03-12T14:57:03  <zns> We got PEP-257 updated and patched pep257 and the flake8 plugins so we can check and gate on that. We're ready to try that out on satori, but we need https://review.openstack.org/#/c/79054 merged in to update the requirements files. Any chance we can get that in?
2014-03-12T14:59:39  <sdague> zns: so actually, I'm confused, satori is in stackforge, why would we change global requirements for that
2014-03-12T15:00:20  *** changbl has joined #openstack-infra
2014-03-12T15:00:34  *** sc68cal_ has quit IRC
2014-03-12T15:00:52  *** sc68cal has joined #openstack-infra
2014-03-12T15:02:24  *** gokrokve has quit IRC
2014-03-12T15:02:53  <zns> sdague: I think there's two part answer to that. For OpenStack in general, adding those in will allow us to start checking existing projects for PEP-257. For satori, I can't get https://review.openstack.org/#/c/79013/ to pass... but from your comment it sounds like maybe we are gating on something we should not be? Excuse my lack of familiarity with some of this setup..
2014-03-12T15:03:10  <openstackgerrit> Malini Kamalambal proposed a change to openstack-infra/config: Add experimental job for Marconi  https://review.openstack.org/78392
2014-03-12T15:03:12  *** gokrokve has joined #openstack-infra
2014-03-12T15:03:17  <sdague> yeh, I have no idea why a stackforge project is gatting on global requirements
2014-03-12T15:03:21  *** atiwari has joined #openstack-infra
2014-03-12T15:03:23  *** saju_m has quit IRC
2014-03-12T15:03:23  *** malini has joined #openstack-infra
2014-03-12T15:03:24  *** bogdando has quit IRC
2014-03-12T15:03:29  <sdague> I think there was an overreach there in job setup
2014-03-12T15:03:36  *** bogdando has joined #openstack-infra
2014-03-12T15:03:47  <sdague> when an openstack project wants to add this, we should consider it
2014-03-12T15:03:52  <sdague> but not for stackforge projects
2014-03-12T15:04:11  *** saju_m has joined #openstack-infra
2014-03-12T15:04:34  *** gokrokve_ has joined #openstack-infra
2014-03-12T15:04:47  <zns> sdague: that would be my mistake in copying another project's setup. I didn't understand what the requirements gate was for. I'll remove that from our setup.
2014-03-12T15:04:59  <foobio> right, satori has a gate-satori-requirements job in zuul's layout.yaml, but does not actually need that
2014-03-12T15:05:17  <sdague> yeh, I think that's the crux of things
2014-03-12T15:05:32  <sdague> zns: sorry I didn't catch this on the first round of reviews
2014-03-12T15:05:39  <sdague> it only sunk in
2014-03-12T15:05:42  <foobio> it's okay if you want to force your project to work with only openstack's specified requirements list, but don't expect that to mean that you get to add requirements to openstack if you do
2014-03-12T15:05:47  <jeblair> it's a fine idea if a stackforge project wants to make sure they are compatible
2014-03-12T15:06:04  *** krotscheck has quit IRC
2014-03-12T15:06:05  <jeblair> but yeah, if you need something openstack doesn't (yet) need, then it's best to turn off the job and try to keep things in sync manually
2014-03-12T15:06:32  <sdague> jeblair: sure, but we need to not extend the scope of global requirements to include content that's not in openstack projects
2014-03-12T15:06:57  <sdague> speaking of which, it might be worth and audit to figure out if there are things in g-r that aren't in any project
2014-03-12T15:07:16  <zns> sdague: np. That unblocks satori. What about having the pep257 tools available for other projects to add to other style checks? Per this thread: https://www.mail-archive.com/openstack-dev@lists.openstack.org/msg17780.html
2014-03-12T15:07:47  *** mfer has quit IRC
2014-03-12T15:07:58  <sdague> zns: so if an integrated project proposes a patch that needs it, then that's different
2014-03-12T15:08:19  *** gokrokve has quit IRC
2014-03-12T15:08:31  <sdague> but lacking that, that list is basically a "must package" list for distributors
2014-03-12T15:08:47  <sdague> so we don't want to add things not actually used
2014-03-12T15:09:06  <zns> sdague: OK. I can approach it from that end, then.
2014-03-12T15:09:23  <ArxCruz> clarkb: I'm getting https://git.openstack.org/openstack/savanna-dashboard/' not found
2014-03-12T15:09:46  <foobio> ArxCruz: http://lists.openstack.org/pipermail/openstack-dev/2014-March/029770.html
2014-03-12T15:10:07  *** pcrews has joined #openstack-infra
2014-03-12T15:10:27  <ArxCruz> foobio: thanks! I need to pay more attention on mail lists
2014-03-12T15:10:50  <zns> Where can I find out what the jobs actually do?
2014-03-12T15:11:36  *** changbl has quit IRC
2014-03-12T15:11:44  <foobio> ArxCruz: we've updated devstack-gate to clone the right repos, but there was a brief window where it was looking for the old ones which were no longer there, so if you're using d-g and deploying it continuously, you might have hit a patch there where it broke
2014-03-12T15:12:38  <ArxCruz> foobio: I'm using d-g but with a few changes by my own, I'm planning to send patches to work more generic
2014-03-12T15:13:20  <foobio> zns: i think we currently lack good documentation describing the jobs themselves, but you can see the yaml-based definitions for them all at http://git.openstack.org/cgit/openstack-infra/config/tree/modules/openstack_project/files/jenkins_job_builder/config
2014-03-12T15:14:02  *** changbl has joined #openstack-infra
2014-03-12T15:14:20  <russellb> SergeyLukjanov: I did edit the file you mentioned, https://review.openstack.org/#/c/79900/3
2014-03-12T15:14:41  <foobio> zns: the job in question is defined at http://git.openstack.org/cgit/openstack-infra/config/tree/modules/openstack_project/files/jenkins_job_builder/config/python-jobs.yaml#n218
2014-03-12T15:15:31  <foobio> zns: and the script you see it calling there is http://git.openstack.org/cgit/openstack-infra/config/tree/modules/jenkins/files/slave_scripts/project-requirements-change.py
2014-03-12T15:16:00  <zns> foobio: ahhhh..... that helps!
2014-03-12T15:16:02  *** jasond has joined #openstack-infra
2014-03-12T15:16:15  <jasond> does this situation call for a recheck or a reverify? https://review.openstack.org/#/c/77677/
2014-03-12T15:17:12  *** sarob has quit IRC
2014-03-12T15:17:25  *** branen has joined #openstack-infra
2014-03-12T15:17:32  <zns> Do you have a job that checks the coverage or pylint change for a patch? I.e. did it add pylint errors or decrease coverage? That would be a cool check (we have one on an internal project that maybe I could port over). Any interest?
2014-03-12T15:17:59  <foobio> jasond: yes, you were one of the unlucy (hopefully) few mentioned in http://lists.openstack.org/pipermail/openstack-dev/2014-March/029770.html
2014-03-12T15:18:00  *** VijayTripathi has joined #openstack-infra
2014-03-12T15:18:11  <foobio> jasond: i'll open a bug for that real quick you can reverify against
2014-03-12T15:18:26  <jasond> foobio: thank you
2014-03-12T15:18:31  *** matsuhashi has quit IRC
2014-03-12T15:18:58  *** rcarrillocruz has joined #openstack-infra
2014-03-12T15:19:04  <foobio> zns: we do have jobs which run coverage reports (we stopped running pylint mostly in favor of the pyflakes backend to flake8) but nothing which calculates deltas for those i don't think
2014-03-12T15:19:37  <foobio> it's been discussed before, and i think there were at least a few people interested in seeing something along those lines
2014-03-12T15:19:51  *** miqui has joined #openstack-infra
2014-03-12T15:19:57  *** afazekas has quit IRC
2014-03-12T15:20:35  *** homeless has joined #openstack-infra
2014-03-12T15:20:55  *** rcarrillocruz1 has quit IRC
2014-03-12T15:22:22  *** sarob has joined #openstack-infra
2014-03-12T15:24:30  *** mgagne has joined #openstack-infra
2014-03-12T15:24:37  <foobio> jasond: reverify bug 1291440
2014-03-12T15:24:48  <openstackgerrit> Arx Cruz proposed a change to openstack-infra/devstack-gate: Correcting the right path to mysql log in Fedora 19  https://review.openstack.org/79967
2014-03-12T15:24:57  <SergeyLukjanov> russellb, I'll take a look on it soon
2014-03-12T15:25:07  <jasond> foobio: thanks!
2014-03-12T15:25:15  *** rpodolyaka has joined #openstack-infra
2014-03-12T15:25:24  <russellb> SergeyLukjanov: ok no rush, thanks
2014-03-12T15:26:55  *** chandan_kumar has quit IRC
2014-03-12T15:28:30  *** sarob has quit IRC
2014-03-12T15:28:38  *** chandan_kumar has joined #openstack-infra
2014-03-12T15:28:39  *** chandan_kumar has quit IRC
2014-03-12T15:28:58  *** sarob has joined #openstack-infra
2014-03-12T15:30:03  <rcarrillocruz> jeblair: hi there, I'm looking at low-hanging-fruit https://bugs.launchpad.net/openstack-ci/+bug/1061929 , but I can't seem to find where in the code we check for the recheck/reverify review comments, i'd be grateful if you could point me in the right track
2014-03-12T15:30:55  <rcarrillocruz> actually i meant https://bugs.launchpad.net/openstack-ci/+bug/1235335 , they are similar
2014-03-12T15:31:36  *** gyee has joined #openstack-infra
2014-03-12T15:31:50  *** johnthetubaguy1 has joined #openstack-infra
2014-03-12T15:33:12  *** sarob has quit IRC
2014-03-12T15:33:20  *** johnthetubaguy has quit IRC
2014-03-12T15:35:05  <jeblair> rcarrillocruz: http://git.openstack.org/cgit/openstack-infra/config/tree/modules/openstack_project/files/zuul/layout.yaml#n15
2014-03-12T15:35:06  *** johnthetubaguy1 has quit IRC
2014-03-12T15:35:16  <jeblair> rcarrillocruz: the recheck/reverify triggers are in regexes like that ^
2014-03-12T15:35:31  <jeblair> rcarrillocruz: i'm not sure i would consider that a low-hanging-fruit bug
2014-03-12T15:35:47  <jeblair> rcarrillocruz: i have no good ideas about how to implement that :/
2014-03-12T15:36:02  <jeblair> rcarrillocruz: ...maybe....
2014-03-12T15:37:13  <jeblair> rcarrillocruz: it could be done like the 'require-approval' was done...
2014-03-12T15:37:35  <jeblair> rcarrillocruz: where we say "in order for this trigger to match, we also require that the commit message match this regex"
2014-03-12T15:38:09  <jeblair> rcarrillocruz: but then we'de have to actually get regex group data from the comment filter regex into the commit message regex...
2014-03-12T15:38:14  *** mfer has joined #openstack-infra
2014-03-12T15:38:34  <jeblair> rcarrillocruz: it seems very complicated, a bit messy, and probably too much work for the benefit...
2014-03-12T15:39:29  <rcarrillocruz> ahh...i was looking straight into the trigger python code...
2014-03-12T15:39:40  *** johnthetubaguy has joined #openstack-infra
2014-03-12T15:40:07  *** saju_m has quit IRC
2014-03-12T15:40:33  *** rpodolyaka has quit IRC
2014-03-12T15:40:39  <rcarrillocruz> that explains, heh
2014-03-12T15:40:45  <jeblair> rcarrillocruz: i key aspect of zuul's design is that it's all _very_ simple building blocks.  we don't put any openstack-specific stuff in there -- instead, we break problems down until we can describe them in simpler terms.
2014-03-12T15:41:03  <jeblair> so zuul has no idea what a reverify or recheck comment is -- it's all just configuration
2014-03-12T15:41:55  *** eharney has quit IRC
2014-03-12T15:41:55  *** wenlock has quit IRC
2014-03-12T15:42:11  <rcarrillocruz> so that's why you say  in the bug 'This would be a good thing to add to the recheck magic. Unfortunately, it may require adding some openstack specific sauce to zuul' . I infere from that sentence that you want to be zuul openstack independent... so no python checks in there for stuff that pertains to an openstack issue, like reported on bug/1235335
2014-03-12T15:42:16  <rcarrillocruz> >
2014-03-12T15:42:17  <rcarrillocruz> ?
2014-03-12T15:42:47  *** smarcet has left #openstack-infra
2014-03-12T15:43:02  <rcarrillocruz> i will think about your suggestion
2014-03-12T15:43:05  <jeblair> right; we'd need to think of a way to describe the problem abstractly, like the two-regex idea above (which would work but is very complicated)
2014-03-12T15:43:15  <rcarrillocruz> if it gets hard to do, i'll move on to other low hanging fruit
2014-03-12T15:43:23  <rcarrillocruz> thx jeblair
2014-03-12T15:44:37  <malini> SergeyLukjanov, sdague: Can you please take look at this https://review.openstack.org/#/c/78392/  when you have a minute ?
2014-03-12T15:46:50  <SergeyLukjanov> malini, added to the giant length backlog
2014-03-12T15:47:13  <malini> SergeyLukjanov: hope the other giants are small :)
2014-03-12T15:47:22  *** esker has quit IRC
2014-03-12T15:48:00  <malini> if any other core reviewers need good karma, here is a one line change https://review.openstack.org/#/c/78392/ !!
2014-03-12T15:50:27  *** johnthetubaguy1 has joined #openstack-infra
2014-03-12T15:50:31  <jeblair> rcarrillocruz, clarkb: i left my suggetion in https://bugs.launchpad.net/openstack-ci/+bug/1235335 for the record, but i don't think trying to implement that is low-hanging-fruit.
2014-03-12T15:51:59  <rcarrillocruz> cool, thx sir, i'll try it and depending on how hard it gets i'll go forward or ditch
2014-03-12T15:52:24  *** yamahata has quit IRC
2014-03-12T15:53:08  *** johnthetubaguy has quit IRC
2014-03-12T15:53:53  <jeblair> zaro, hashar: is current jjb HEAD a good place to tag a release?
2014-03-12T15:54:01  *** salv-orlando_ has joined #openstack-infra
2014-03-12T15:54:50  * hashar wishes Gerrit could let us review tagging
2014-03-12T15:55:03  <jeblair> we all wish that :/
2014-03-12T15:55:26  <openstackgerrit> Ziad Sawalha proposed a change to openstack-infra/config: satori: Drop requirements, pypi, and old upstream  https://review.openstack.org/79975
2014-03-12T15:56:03  <mordred> hashar: ++
2014-03-12T15:56:06  <hashar> jeblair: the current jjb is nice.  We got a few nasty changes pending such as using threads and pbr
2014-03-12T15:56:14  *** salv-orlando has quit IRC
2014-03-12T15:56:14  *** salv-orlando_ is now known as salv-orlando
2014-03-12T15:56:22  <hashar> so maybe cutting 0.7.0 before the nasty changes land in is a good idea
2014-03-12T15:56:25  *** sweston has quit IRC
2014-03-12T15:56:26  <mordred> hashar: I am highly supportive of any patches to gerrit which add tag reviewing
2014-03-12T15:56:28  <hashar> plus last release was back in November
2014-03-12T15:57:07  <hashar> mordred: I am java illiterate and Wikimedia mostly tag mediawiki/core which is already pair reviewed via a release process. So unlikely to happen on our side
2014-03-12T15:57:10  <hashar> :-(
2014-03-12T15:57:25  *** wenlock has joined #openstack-infra
2014-03-12T15:57:56  <zns> sdague, foobio: thanks for the help. I'm updating satori's config accordingly: https://review.openstack.org/#/c/79975/
2014-03-12T15:58:04  *** rpodolyaka has joined #openstack-infra
2014-03-12T15:58:17  <mordred> hashar: sniff. sniff
2014-03-12T15:58:22  <hashar> jeblair: maybe ping openstack-infra list about jjb releasing?  I am sure all core maintainers are subscribed to it.
2014-03-12T15:58:34  *** che-arne has joined #openstack-infra
2014-03-12T15:58:50  <jeblair> hashar: zaro asked for it last week (he got a request from a packager i think)
2014-03-12T15:58:55  <jeblair> so i'm pretty sure he's on board
2014-03-12T15:59:16  *** gyee has quit IRC
2014-03-12T16:00:02  *** rpodolyaka has quit IRC
2014-03-12T16:00:14  *** reed has joined #openstack-infra
2014-03-12T16:00:26  *** rpodolyaka has joined #openstack-infra
2014-03-12T16:00:29  <hashar> for logging purpose: +1 on releasing a new JJB version :-]
2014-03-12T16:00:40  *** CaptTofu has quit IRC
2014-03-12T16:00:50  *** pblaho has quit IRC
2014-03-12T16:01:07  <hashar> one day we would have to craft a nice ChangeLog for end users consumption
2014-03-12T16:01:08  *** CaptTofu has joined #openstack-infra
2014-03-12T16:01:31  <jeblair> sent email
2014-03-12T16:02:29  *** Sukhdev has joined #openstack-infra
2014-03-12T16:02:29  *** salv-orlando has quit IRC
2014-03-12T16:02:33  *** hogepodge has quit IRC
2014-03-12T16:03:22  <jeblair> also, i -1'd the idea of a jjb-ptl group that can tag before, but that was when i was able to keep more current on what's going on with it.  it's clear that i'm not as up to date now, so i'm okay with expanding that group now.
2014-03-12T16:03:49  *** yassine has quit IRC
2014-03-12T16:04:44  <hashar> Khai is doing an awesome job at reviewing/approving the changes
2014-03-12T16:04:59  <jeblair> https://review.openstack.org/#/c/56823/ has my +2 now
2014-03-12T16:05:32  *** CaptTofu has quit IRC
2014-03-12T16:07:38  *** SumitNaiksatam has quit IRC
2014-03-12T16:07:46  *** talluri has quit IRC
2014-03-12T16:11:37  <hashar> jeblair: added the rest of JJB approver to the change and +1ed it :-]
2014-03-12T16:11:47  <hashar> I like seeing delegation
2014-03-12T16:16:31  <sdague> jeblair: what is your feeling on making a functional test in the gate which only applied to a single project which did active clones outside of zuul?
2014-03-12T16:16:47  *** yolanda has quit IRC
2014-03-12T16:16:52  <sdague> because it turns out that grenade ends up breaking for non gate cases quite a bit
2014-03-12T16:17:02  <sdague> because we do so much overwriting of config
2014-03-12T16:17:35  <sdague> realizing that we'd have a failure rate based on real cloning associated with it
2014-03-12T16:17:44  <sdague> but it would apply to only the grenade project
2014-03-12T16:17:45  <jeblair> sdague: can you describe the problem a bit more?  i'm not sure i understand
2014-03-12T16:18:01  <sdague> grenade master doesn't work
2014-03-12T16:18:21  <sdague> because it actually sets up a set of git clones that don't work
2014-03-12T16:18:30  <sdague> because in the gate all of that is done by d-g
2014-03-12T16:18:32  *** vkozhukalov has joined #openstack-infra
2014-03-12T16:19:07  <jeblair> how don't they work?
2014-03-12T16:19:48  <sdague> they turn out to be completely invalid git urls
2014-03-12T16:19:50  *** dstanek_afk has joined #openstack-infra
2014-03-12T16:20:18  <sdague> because novnc isn't on git.openstack.org, for instance
2014-03-12T16:20:35  *** dstanek has quit IRC
2014-03-12T16:20:54  <sdague> and all of devstack trees are controled by a GIT_BASE
2014-03-12T16:21:35  <sdague> which got changed to git.openstack.org in devstack master
2014-03-12T16:21:41  <sdague> and grenade master
2014-03-12T16:21:53  <sdague> but defaults to github.com in devstack stable/havana
2014-03-12T16:22:02  <sdague> so things go funny
2014-03-12T16:22:20  <sdague> also, turns out TARGET_BRANCH was defaulting to stable/icehouse
2014-03-12T16:22:27  *** pbelanyi has quit IRC
2014-03-12T16:22:36  <sdague> which, also, never tested, because d-g sets all that
2014-03-12T16:23:01  <jeblair> sdague: so in order to test what you want, the test would need to clone from github, since you want to make sure the novnc url works?
2014-03-12T16:23:11  <sdague> jeblair: yep
2014-03-12T16:23:34  *** nati_ueno has quit IRC
2014-03-12T16:23:43  <sdague> which is why it would be limited to grenade, because the failure rate that would introduce would be non zero
2014-03-12T16:23:58  <jeblair> sdague: having been on the receiving end of "why did this test break" thanks to github, i have to admit, i'm not excited about that.
2014-03-12T16:24:28  <sdague> sure, however the alternative is "why hasn't grenade worked for normal people in 4 months"
2014-03-12T16:24:28  <jeblair> sdague: could we unit test it instead?  (make sure these urls or git commands look sane?)
2014-03-12T16:24:48  *** dstanek_afk has quit IRC
2014-03-12T16:25:04  <sdague> jeblair: probably, but that just means we know the right assumptions, not that things actually work
2014-03-12T16:25:12  <sdague> so if upstream trees change, we break
2014-03-12T16:25:13  *** melwitt has joined #openstack-infra
2014-03-12T16:25:37  *** gokrokve_ has quit IRC
2014-03-12T16:25:46  <sdague> I think the crux of this is a non negligle part of grenade is to actually set up the tree structures
2014-03-12T16:25:54  <sdague> which overlaps with d-g
2014-03-12T16:26:01  <sdague> so is untested on it's own
2014-03-12T16:26:28  <jeblair> so maybe a non-voting test?
2014-03-12T16:26:38  <sdague> sure
2014-03-12T16:26:43  <jeblair> so that we're not signing up the gate to be broken by github
2014-03-12T16:26:53  <sdague> jeblair: well, it wouldn't be in the gate
2014-03-12T16:26:58  <jeblair> (i mean, basically, you would not have been able to land _any_ changes to grenade yesterday)
2014-03-12T16:27:01  <sdague> it would be on check only for grenade
2014-03-12T16:27:20  <jeblair> sdague: check ~= gate now, at least for this purpose
2014-03-12T16:27:23  *** rpodolyaka has quit IRC
2014-03-12T16:27:30  <sdague> well, check doesn't kill someone else
2014-03-12T16:27:31  <SergeyLukjanov> Houston, we have a problem....
2014-03-12T16:27:40  <SergeyLukjanov> https://git.openstack.org/cgit/openstack/sahara is empty O_O
2014-03-12T16:27:43  <jeblair> i mean, continuing to use yesterday as an example, no grenade check tests would have passed if this were voting
2014-03-12T16:27:44  <sdague> so it's more limitted pain
2014-03-12T16:27:50  *** wenlock has quit IRC
2014-03-12T16:28:06  <sdague> jeblair: this job would not have passed, agreed
2014-03-12T16:28:28  <SergeyLukjanov> foobio, jeblair, clarkb, could you please take a look on gerrit mirroring? https://git.openstack.org/cgit/openstack/sahara is empty...
2014-03-12T16:28:42  <mgagne> SergeyLukjanov: showing fine to me here
2014-03-12T16:28:43  <jeblair> SergeyLukjanov: i will trigger gerrit replication
2014-03-12T16:28:59  <jeblair> SergeyLukjanov: you might want to check each of "git01" .. "git05" to narrow down the problem
2014-03-12T16:29:02  *** rpodolyaka has joined #openstack-infra
2014-03-12T16:29:04  *** wenlock has joined #openstack-infra
2014-03-12T16:29:15  <SergeyLukjanov> jeblair, yup, /me checking
2014-03-12T16:29:16  <foobio> that's definitely weird. i did mv the backing directory for it on all the git servers
2014-03-12T16:29:18  <jeblair> SergeyLukjanov: like http://git01.openstack.org:8080/cgit/openstack/sahara
2014-03-12T16:29:27  <foobio> oh!
2014-03-12T16:29:35  <foobio> i forgot git05
2014-03-12T16:29:47  <foobio> i forgot _we had_ git05 :/
2014-03-12T16:29:50  * foobio sighs
2014-03-12T16:30:03  <jeblair> foobio: yep that's the one
2014-03-12T16:30:06  <jeblair> http://git05.openstack.org:8080/cgit/openstack/sahara
2014-03-12T16:30:28  <SergeyLukjanov> there are no sahara repos on git05
2014-03-12T16:30:38  *** CaptTofu has joined #openstack-infra
2014-03-12T16:30:39  *** alexpilotti has joined #openstack-infra
2014-03-12T16:30:47  <SergeyLukjanov> and savanna too
2014-03-12T16:30:48  <SergeyLukjanov> :)
2014-03-12T16:31:05  <foobio> at this point the repos have all been created on there, but if you haven't triggered replication yet i can remove them and move the old ones to the right nams
2014-03-12T16:31:08  <foobio> names
2014-03-12T16:31:15  <jeblair> foobio: i have not triggered replication
2014-03-12T16:31:20  <foobio> doing it now--thanks!
2014-03-12T16:31:53  <SergeyLukjanov> foobio, jeblair, thank you!
2014-03-12T16:33:49  *** Ryan_Lane1 has joined #openstack-infra
2014-03-12T16:35:32  <foobio> all removed/moved. retriggering replication for them now
2014-03-12T16:35:50  *** dstanek_afk has joined #openstack-infra
2014-03-12T16:36:11  *** jlibosva has quit IRC
2014-03-12T16:36:37  *** Ryan_Lane has quit IRC
2014-03-12T16:36:38  *** Ryan_Lane1 is now known as Ryan_Lane
2014-03-12T16:36:39  *** Ryan_Lane has joined #openstack-infra
2014-03-12T16:37:03  *** Ryan_Lane1 has joined #openstack-infra
2014-03-12T16:39:24  <foobio> looks like it should all be replicated and up to date now?
2014-03-12T16:40:25  <pleia2> clarkb: just had one comment re: 79814 (not actually a blocker, but might consider it)
2014-03-12T16:41:06  *** bhuvan has joined #openstack-infra
2014-03-12T16:41:06  *** bhuvan_ has joined #openstack-infra
2014-03-12T16:41:53  *** khyati has joined #openstack-infra
2014-03-12T16:42:10  *** amcrn has joined #openstack-infra
2014-03-12T16:44:06  <openstackgerrit> Khai Do proposed a change to openstack-infra/publications: update slides  https://review.openstack.org/79993
2014-03-12T16:44:34  *** reed has quit IRC
2014-03-12T16:45:35  *** dizquierdo has quit IRC
2014-03-12T16:49:48  *** gyee has joined #openstack-infra
2014-03-12T16:50:11  *** jasond has quit IRC
2014-03-12T16:50:18  *** gokrokve has joined #openstack-infra
2014-03-12T16:51:09  *** rcarrillocruz1 has joined #openstack-infra
2014-03-12T16:51:20  *** SumitNaiksatam has joined #openstack-infra
2014-03-12T16:51:42  <openstackgerrit> Sergey Lukjanov proposed a change to openstack/requirements: Rename Savanna to Sahara  https://review.openstack.org/79994
2014-03-12T16:52:21  <SergeyLukjanov> foobio, clarkb, jeblair, sdague, folks, could you please fast approve https://review.openstack.org/79994 to make sahara jobs running using pypi.o.o
2014-03-12T16:52:27  *** thuc has joined #openstack-infra
2014-03-12T16:53:01  *** lcostantino has joined #openstack-infra
2014-03-12T16:53:19  *** rcarrillocruz has quit IRC
2014-03-12T16:53:41  <foobio> SergeyLukjanov: approved
2014-03-12T16:53:44  *** thuc_ has joined #openstack-infra
2014-03-12T16:53:50  <SergeyLukjanov> foobio, thank you!
2014-03-12T16:54:12  <clarkb> morning
2014-03-12T16:54:19  <SergeyLukjanov> clarkb, good morning
2014-03-12T16:54:22  <foobio> SergeyLukjanov: i'm just sorry i didn't think to suggest a patch to that file too
2014-03-12T16:54:24  <clarkb> pleia2: lookig thanks
2014-03-12T16:54:38  *** e0ne has quit IRC
2014-03-12T16:54:50  <SergeyLukjanov> foobio, my bad, absolutely forget about the dep on it for choosing mirrors
2014-03-12T16:55:25  <foobio> SergeyLukjanov: i think it would probably have also broken requirements update proposals too
2014-03-12T16:55:42  <SergeyLukjanov> foobio, yeah
2014-03-12T16:56:48  *** thuc has quit IRC
2014-03-12T16:57:27  *** thuc has joined #openstack-infra
2014-03-12T16:58:50  *** cody-somerville has quit IRC
2014-03-12T17:00:31  *** thuc_ has quit IRC
2014-03-12T17:03:33  *** cody-somerville_ has joined #openstack-infra
2014-03-12T17:03:33  *** cody-somerville_ has quit IRC
2014-03-12T17:03:33  *** cody-somerville_ has joined #openstack-infra
2014-03-12T17:03:41  <openstackgerrit> Clark Boylan proposed a change to openstack-infra/config: Remove unneeded package sources from nodepool node  https://review.openstack.org/79814
2014-03-12T17:03:49  <clarkb> pleia2: ^ I think that should do it
2014-03-12T17:04:29  *** harlowja_away is now known as harlowja
2014-03-12T17:05:29  <openstackgerrit> James E. Blair proposed a change to openstack-infra/statusbot: Sleep 1 second  https://review.openstack.org/79956
2014-03-12T17:06:09  *** nati_ueno has joined #openstack-infra
2014-03-12T17:07:25  <jeblair> oh wow, i just learned you can "yum install /path/to/binary/you/want"
2014-03-12T17:07:41  <jeblair> and that will install the package that provides it
2014-03-12T17:08:32  <clarkb> jeblair: and you don't even need to do a package list update first :)
2014-03-12T17:08:34  <SergeyLukjanov> jeblair, oh, interesting
2014-03-12T17:09:03  <SergeyLukjanov> clarkb, bah, fantastic
2014-03-12T17:09:13  *** afazekas has joined #openstack-infra
2014-03-12T17:09:13  *** afazekas has quit IRC
2014-03-12T17:09:13  <foobio> neat. better than using apt-file search
2014-03-12T17:09:26  *** gokrokve_ has joined #openstack-infra
2014-03-12T17:09:45  *** jasondotstar has joined #openstack-infra
2014-03-12T17:09:50  *** sweston has joined #openstack-infra
2014-03-12T17:10:32  *** reed has joined #openstack-infra
2014-03-12T17:11:08  <dstufft> jeblair: that is awesome
2014-03-12T17:11:19  *** andreaf has joined #openstack-infra
2014-03-12T17:12:20  <clarkb> dtroyer: Alex_Gaynor for the openstack sdks' ptl group who should be the initial member
2014-03-12T17:12:24  *** gokrokve has quit IRC
2014-03-12T17:12:51  <foobio> clarkb: added a few more comments on 79814
2014-03-12T17:13:01  <Alex_Gaynor> clarkb: Jesse Noller I suppose
2014-03-12T17:13:19  *** morganfainberg_Z is now known as morganfainberg
2014-03-12T17:13:21  <clarkb> Alex_Gaynor: thanks
2014-03-12T17:13:34  <Alex_Gaynor> clarkb: sure
2014-03-12T17:13:57  <foobio> dstufft: did you get my ping the other night that i put your keys on those sample servers where we're seeing discrepancies in pip behavior wrt https://github.com/pypa/pip/issues/1632
2014-03-12T17:14:25  <dstufft> foobio: oh I missed it
2014-03-12T17:14:38  <dstufft> and then forgot
2014-03-12T17:14:39  <dstufft> :[
2014-03-12T17:14:40  *** VijayTripathi has quit IRC
2014-03-12T17:14:43  <dstufft> sorry!
2014-03-12T17:14:45  <clarkb> foobio: responded. I can fix the comment but we actually need sudo there because distros
2014-03-12T17:15:28  <Alex_Gaynor> dstufft: lol. Have fun debugging that
2014-03-12T17:15:29  <foobio> dstufft: 'ssh jenkins@23.253.82.112' is where we're seeing it break (rackspace) and 'ssh jenkins@15.185.123.189' is where we're seeing it work normally (hpcloud)
2014-03-12T17:15:49  <clarkb> foobio: can you take a look before I push a new patchset?
2014-03-12T17:15:56  <foobio> clarkb: looking
2014-03-12T17:16:39  *** esker has joined #openstack-infra
2014-03-12T17:16:41  <zaro> clarkb: i tried verifying this on my personal VM but i don't know how to setup a reverse proxy.  https://review.openstack.org/#/c/60893/
2014-03-12T17:16:45  *** saju_m has joined #openstack-infra
2014-03-12T17:17:02  <clarkb> zaro: just install gerrit with that puppet change
2014-03-12T17:17:07  <dstufft> foobio: Ok, i'm fixing my devenv since homebrew and apple decided to conspire to destroy my productivity today
2014-03-12T17:17:09  <clarkb> zaro: that will setup apache and everything
2014-03-12T17:17:11  <dstufft> I'll look at it after that
2014-03-12T17:17:35  <foobio> dstufft: appreciated--and good luck with the fruit
2014-03-12T17:18:14  <dstufft> hmm
2014-03-12T17:18:19  <dstufft> you know what though
2014-03-12T17:18:44  <dstufft> I could totally use my eldritch-horror branch on pip and make it so pip just assumes setuptools is a setup_requires and installs it in a temp location :V
2014-03-12T17:18:48  *** kmartin has quit IRC
2014-03-12T17:18:54  <dstufft> then this shouldn't be possible to happen
2014-03-12T17:19:19  <foobio> clarkb: lgtm
2014-03-12T17:19:44  <zaro> clarkb: i don't think i even have apache installed.  don't even have the /etc/apache folder.
2014-03-12T17:19:53  <foobio> dstufft: i wanted to compliment you on your choice of branch naming there, if nothing else. very nice ;)
2014-03-12T17:19:58  <clarkb> foobio: thanks
2014-03-12T17:20:15  <dstufft> foobio:  the first revision was worse than the current revision :V
2014-03-12T17:20:25  <zaro> clarkb: is it just a straight forward install of apache with those changes?
2014-03-12T17:20:30  <dstufft> the current one is not entirely super horrible
2014-03-12T17:20:49  <foobio> dstufft: i assume while it's still named eldritch-horror, i should expect to be driven mad simply by a mere glimpse of the source code there
2014-03-12T17:21:03  <clarkb> zaro: mostly. but you can have puppet do it all for you
2014-03-12T17:21:17  *** afazekas has joined #openstack-infra
2014-03-12T17:21:41  <dstufft> foobio: https://github.com/dstufft/pip/compare/pypa:develop...eldritch-horror monkeypatching via python -c "" is the best ever
2014-03-12T17:22:52  <zaro> clarkb: i forgot how.  i'll be in tomorrow, just i'll just postpone until then.
2014-03-12T17:23:29  <foobio> dstufft: you know now that i've clicked, i'm going to live out the remainder of my days gibbering in a corner, mumbling incoherently about ancient computer gods from other dimensions
2014-03-12T17:23:48  <zaro> clarkb: have you taken a look at jeblair comment on https://review.openstack.org/#/c/61321/
2014-03-12T17:24:05  <andreaf> sdague: ping
2014-03-12T17:24:49  <clarkb> zaro: not yet, still digging out of the remains of bug day
2014-03-12T17:24:57  * clarkb is going to fix release two more bugs
2014-03-12T17:24:57  <foobio> dstufft: also always a fan of commit messages like "Make this less bad"
2014-03-12T17:25:23  <dstufft> foobio: :3
2014-03-12T17:25:52  <dstufft> foobio: it's cool though, it actually works (not options like --cert are passed through yet), no more setuptools touching the network with that branch
2014-03-12T17:26:32  <foobio> nice that pip source is growing a "hacks" module too
2014-03-12T17:27:06  <foobio> says a lot right there about the fright level of monkey-patching there
2014-03-12T17:27:21  <dstufft> a lot of pip could justifably be moved into that module
2014-03-12T17:27:52  <openstackgerrit> A change was merged to openstack-infra/statusbot: Sleep 1 second  https://review.openstack.org/79956
2014-03-12T17:28:38  <clarkb> jeblair: foobio SergeyLukjanov mordred I have two nodepool script changes that need an additional +2 and +A. I can babysit some image builds if I can get reviewers
2014-03-12T17:29:13  <SergeyLukjanov> clarkb,  you get one
2014-03-12T17:29:53  <foobio> clarkb: i think i already +2'd them both
2014-03-12T17:30:20  *** sarob has joined #openstack-infra
2014-03-12T17:30:35  <clarkb> foobio: you did thanks
2014-03-12T17:31:17  <clarkb> zaro: I think jeblair is right. We need to make sure that line 30 of https://review.openstack.org/#/c/61321/12/modules/openstack_project/templates/nodepool/nodepool-dev.yaml.erb runs a script that will install the correct key for jenkins-dev/nodepool-dev
2014-03-12T17:31:20  *** jcoufal has quit IRC
2014-03-12T17:32:18  *** krotscheck has joined #openstack-infra
2014-03-12T17:32:34  <jeblair> clarkb: aprvd
2014-03-12T17:32:42  <clarkb> jeblair: awesome thank you
2014-03-12T17:32:55  <openstackgerrit> A change was merged to openstack-infra/config: Remove unneeded package sources from nodepool node  https://review.openstack.org/79814
2014-03-12T17:34:12  *** dprince has quit IRC
2014-03-12T17:34:28  *** kmartin has joined #openstack-infra
2014-03-12T17:34:48  *** sarob has quit IRC
2014-03-12T17:37:00  <openstackgerrit> Nikola Dipanov proposed a change to openstack-dev/hacking: Add an import whitelist helper factory  https://review.openstack.org/80018
2014-03-12T17:37:40  *** jepoy has quit IRC
2014-03-12T17:38:16  *** jepoy has joined #openstack-infra
2014-03-12T17:38:28  *** openstackstatus has quit IRC
2014-03-12T17:38:54  *** openstackstatus has joined #openstack-infra
2014-03-12T17:39:40  *** julienvey has quit IRC
2014-03-12T17:42:29  *** jepoy has quit IRC
2014-03-12T17:44:49  <malini> thanks SergeyLukjanov for the review
2014-03-12T17:45:01  <malini> foobio: Can you take a look at this if you have a minute https://review.openstack.org/#/c/78392/ ?
2014-03-12T17:47:30  <openstackgerrit> Nikola Dipanov proposed a change to openstack-dev/hacking: Add an import whitelist helper factory  https://review.openstack.org/80018
2014-03-12T17:48:41  <foobio> malini: getting sdague or dtroyer to weigh in on that would be good too, before we possibly approve it
2014-03-12T17:48:49  <malini> sure foobio!
2014-03-12T17:49:13  <malini> dtroyer, sdague: Can you take a look please https://review.openstack.org/#/c/78392/ ?
2014-03-12T17:49:31  <foobio> i can evaluate the (very trivial) change on its technical correctness, but they're the ones who know whether that's going to cause any inconvenience for them
2014-03-12T17:49:49  <malini> sure..makes sense
2014-03-12T17:50:08  <malini> dtroyer, sdague: This is to make the marconi devstack troubleshooting easier
2014-03-12T17:51:37  <dtroyer> malini, fung:  lgtm
2014-03-12T17:51:52  <malini> thanks dtroyer!!
2014-03-12T17:51:59  <malini> foobio: ^
2014-03-12T17:52:34  *** jpich has quit IRC
2014-03-12T17:52:52  *** rpodolyaka has quit IRC
2014-03-12T17:53:49  *** bhuvan__ has joined #openstack-infra
2014-03-12T17:53:49  *** bhuvan___ has joined #openstack-infra
2014-03-12T17:53:50  *** dstanek_afk is now known as dstanek
2014-03-12T17:54:06  <openstackgerrit> A change was merged to openstack-infra/storyboard: Rename migration revisions  https://review.openstack.org/79869
2014-03-12T17:54:10  *** bhuvan_ has quit IRC
2014-03-12T17:54:10  *** bhuvan has quit IRC
2014-03-12T17:54:34  <clarkb> uh
2014-03-12T17:54:47  *** hashar has quit IRC
2014-03-12T17:54:52  <clarkb> so you may as well use migrate if you are going to do ^
2014-03-12T17:55:14  <openstackgerrit> A change was merged to openstack-infra/config: Add experimental job for Marconi  https://review.openstack.org/78392
2014-03-12T17:55:33  <clarkb> iirc alembic uses proper uuid like ids because it can build arbitrary graphs
2014-03-12T17:55:45  <clarkb> rather than doing the "human readable" thing that migrate does
2014-03-12T17:56:01  *** rpodolyaka has joined #openstack-infra
2014-03-12T17:57:24  *** rpodolyaka has quit IRC
2014-03-12T17:57:27  *** reed has quit IRC
2014-03-12T17:57:53  *** reed has joined #openstack-infra
2014-03-12T17:57:54  *** rlandy_ has joined #openstack-infra
2014-03-12T17:58:34  <foobio> clarkb: jeblair: mordred: you'll be amused to know that i'm getting eoferror (or sometimes connection reset) repeatedly retrying to update the devstack-precise image in rax-iad now ;)
2014-03-12T17:58:53  <clarkb> foobio: ya I ran into that when sudo went sideways
2014-03-12T17:58:56  *** vkozhukalov has quit IRC
2014-03-12T17:58:59  *** bhuvan_ has joined #openstack-infra
2014-03-12T17:58:59  *** bhuvan has joined #openstack-infra
2014-03-12T17:59:09  <foobio> got it once or twice in dfw and ord too but they eventually completed after once or twice
2014-03-12T17:59:21  <foobio> completed after one or two tries i mean
2014-03-12T17:59:42  <jeblair> :/
2014-03-12T17:59:58  *** bhuvan___ has quit IRC
2014-03-12T17:59:58  *** bhuvan__ has quit IRC
2014-03-12T18:00:02  <clarkb> foobio: I think we may have leaked nodes too. I meant to look at that toay
2014-03-12T18:00:21  <foobio> i was actually about to do the same, and noticed that my iad image still wasn't updated
2014-03-12T18:00:41  *** rlandy has quit IRC
2014-03-12T18:01:01  *** rpodolyaka has joined #openstack-infra
2014-03-12T18:01:11  <clarkb> there are a bunch of ~140 hour old ready nodes
2014-03-12T18:01:14  <openstackgerrit> A change was merged to openstack-infra/config: Limit non tripleo nodepool nodes to 8GB of RAM  https://review.openstack.org/78440
2014-03-12T18:01:28  *** bhuvan___ has joined #openstack-infra
2014-03-12T18:01:28  *** bhuvan__ has joined #openstack-infra
2014-03-12T18:01:29  <foobio> clarkb: yeah, i'm looking at those. some in other states past 3 hours as well
2014-03-12T18:01:44  <foobio> i'll give 'em all a quick death
2014-03-12T18:02:12  <clarkb> nodepool list | grep ready | sort -t'|' -k11 -n
2014-03-12T18:03:49  <foobio> the 140-hour-old ones are dsvm-precise-krnl
2014-03-12T18:03:50  *** bhuvan_ has quit IRC
2014-03-12T18:03:50  *** bhuvan has quit IRC
2014-03-12T18:03:56  <foobio> more of those than i would have expected
2014-03-12T18:05:59  <foobio> i omitted any in a hold state and am deleting any others which are >3 hours in any given state
2014-03-12T18:06:03  *** Sukhdev has quit IRC
2014-03-12T18:06:04  <clarkb> woot ram change merged. I am going to spin up a new hpcloud region b devstack-precise-check image
2014-03-12T18:06:13  <clarkb> foobio: that doesn't interfere with what you are doing does it?
2014-03-12T18:06:21  <foobio> clarkb: not in the least
2014-03-12T18:07:38  *** derekh has quit IRC
2014-03-12T18:09:26  *** jgallard has quit IRC
2014-03-12T18:09:31  <SergeyLukjanov> folks, I've just find that we need to have etc/sahara/sahara.conf in repo for d-g, will symlink work well or I need to copy-paste conf sample?
2014-03-12T18:09:31  <SergeyLukjanov> https://review.openstack.org/80038
2014-03-12T18:10:33  <clarkb> SergeyLukjanov: I think copy paste then you can delete the old one after a release or two, but then you have to double account which sucks
2014-03-12T18:10:46  <clarkb> SergeyLukjanov: also symlinks aren't a thing on windows. not sure if that matteers
2014-03-12T18:11:08  <sdague> given how pegged we are on dsvm nodes, thoughts on merging this - https://review.openstack.org/#/c/78687/
2014-03-12T18:11:14  <foobio> clarkb: windows has "shortcuts" instead (don't ask why i know this)
2014-03-12T18:11:20  <sdague> which drops jobs we don't want
2014-03-12T18:11:33  <sdague> jogo: can you rebase that?
2014-03-12T18:11:39  <SergeyLukjanov> clarkb, we're planning to not keep backward compat for such stuff, so, I'll add temp copy-paste
2014-03-12T18:11:43  <SergeyLukjanov> clarkb, thanks
2014-03-12T18:11:50  *** zns has quit IRC
2014-03-12T18:12:28  <SergeyLukjanov> clarkb, we just need it to merged updated devstack integration and then rename all internals
2014-03-12T18:12:38  <clarkb> SergeyLukjanov: wfm
2014-03-12T18:13:53  <SergeyLukjanov> clarkb, could I ask you to forse push it? https://review.openstack.org/80038
2014-03-12T18:14:23  <clarkb> SergeyLukjanov: is it not possible to run it through the gate normally? (would be good to see it actually fix the problem)
2014-03-12T18:14:52  <SergeyLukjanov> clarkb, devstack integration update isn't merged yet :(
2014-03-12T18:15:04  <SergeyLukjanov> clarkb, here is an issue - http://logs.openstack.org/53/79353/3/check/check-tempest-dsvm-sahara-full-nv/f4580cf/logs/devstacklog.txt.gz#_2014-03-12_17_27_25_560
2014-03-12T18:15:42  *** bhuvan has joined #openstack-infra
2014-03-12T18:15:42  *** bhuvan_ has joined #openstack-infra
2014-03-12T18:15:56  <clarkb> SergeyLukjanov: right but won't 80038 fix ^ without needing a force push?
2014-03-12T18:16:14  <clarkb> jgriffith: you got change 80000 I am jealous
2014-03-12T18:16:18  <openstackgerrit> Nikola Dipanov proposed a change to openstack-dev/hacking: Add an import whitelist helper factory  https://review.openstack.org/80018
2014-03-12T18:16:21  *** wenlock has quit IRC
2014-03-12T18:16:24  *** bhuvan___ has quit IRC
2014-03-12T18:16:24  *** bhuvan__ has quit IRC
2014-03-12T18:16:29  <jeblair> sdague: lgtm
2014-03-12T18:16:34  <jeblair> SergeyLukjanov: where's the devstack change?
2014-03-12T18:16:53  <SergeyLukjanov> clarkb, I can't merge it to sahara because d-g job is voting
2014-03-12T18:16:54  <SergeyLukjanov> https://review.openstack.org/#/c/79353/
2014-03-12T18:16:57  <SergeyLukjanov> jeblair, ^^
2014-03-12T18:17:25  <clarkb> oh I see 79353 depends on 80038 and vice versa
2014-03-12T18:17:26  <openstackgerrit> Nikola Dipanov proposed a change to openstack-dev/hacking: Add an import whitelist helper factory  https://review.openstack.org/80018
2014-03-12T18:17:28  *** bhuvan_ has quit IRC
2014-03-12T18:17:28  *** bhuvan has quit IRC
2014-03-12T18:17:42  <clarkb> I think I am ok force pushing the sahara change since it is just copy pasta. jeblair foobio mordred any dissent?
2014-03-12T18:17:46  <jeblair> https://review.openstack.org/#/c/79353/ depends on 80038?
2014-03-12T18:18:02  <SergeyLukjanov> clarkb, yeah, we've added all needed aliases except conf file I hope
2014-03-12T18:18:16  <clarkb> jeblair: that is my understanding since it is trying to setup sahara etc files not savanna etc files
2014-03-12T18:18:28  *** bhuvan has joined #openstack-infra
2014-03-12T18:18:28  *** bhuvan_ has joined #openstack-infra
2014-03-12T18:18:40  <clarkb> jeblair: we could probably split it out into a couple changes that use savanna etc fiels with sahara then sahara etc files with sahara
2014-03-12T18:18:41  <jeblair> is 79353 overreaching then?
2014-03-12T18:18:47  <jeblair> clarkb: yeah
2014-03-12T18:18:48  <clarkb> jeblair: ya it may be ^
2014-03-12T18:19:02  <SergeyLukjanov> clarkb, that's an option too
2014-03-12T18:19:05  <foobio> clarkb: seems fine, though note that this morning before we started the rename SergeyLukjanov had already discovered that the devstack fix to start properly overriding from global-requirements.txt may have put savanna in a broken state, so until it's determined what is broken there there may be more forced merges to come
2014-03-12T18:19:10  <clarkb> SergeyLukjanov: I think we should go that route then
2014-03-12T18:19:19  <clarkb> SergeyLukjanov: its more CD friendly and all that
2014-03-12T18:19:32  <SergeyLukjanov> clarkb, ok, it's fair
2014-03-12T18:19:58  <SergeyLukjanov> heh, looks like +10h of looking on zuul status page ;)
2014-03-12T18:20:41  *** sarob has joined #openstack-infra
2014-03-12T18:20:56  *** rpodolyaka has quit IRC
2014-03-12T18:21:58  <clarkb> hpcloud region b image update is running now
2014-03-12T18:22:04  <jeblair> SergeyLukjanov: ?
2014-03-12T18:22:38  <openstackgerrit> A change was merged to openstack-infra/jenkins-job-builder: Minor fixes in the trigger documentation  https://review.openstack.org/79854
2014-03-12T18:22:43  <SergeyLukjanov> jeblair, you're about "+10h of looking on zuul status page ;)"?
2014-03-12T18:22:48  <jeblair> yeah
2014-03-12T18:22:55  <jeblair> i didn't understand that
2014-03-12T18:23:18  *** rpodolyaka has joined #openstack-infra
2014-03-12T18:23:36  <SergeyLukjanov> jeblair, I mean that I'll need to wait for several more CRs to be checked by Jenkins :)
2014-03-12T18:24:13  *** bhuvan has quit IRC
2014-03-12T18:24:13  *** bhuvan_ has quit IRC
2014-03-12T18:24:43  <jeblair> SergeyLukjanov: yeah; jobs at the top of the check queue look like they waited about 30 mins to get nodes
2014-03-12T18:25:13  *** ildikov_ has quit IRC
2014-03-12T18:28:58  <mtreinish> jogo: so on https://review.openstack.org/#/c/79123/ should I respin it to just be nova, infra, and qa?
2014-03-12T18:28:59  *** SumitNaiksatam has quit IRC
2014-03-12T18:29:43  *** e0ne has joined #openstack-infra
2014-03-12T18:30:00  *** saju_m has quit IRC
2014-03-12T18:30:09  *** esker has quit IRC
2014-03-12T18:30:15  *** bhuvan has joined #openstack-infra
2014-03-12T18:30:26  *** afazekas has quit IRC
2014-03-12T18:30:27  *** esker has joined #openstack-infra
2014-03-12T18:30:27  *** sarob has quit IRC
2014-03-12T18:31:51  <SergeyLukjanov> jeblair, done, could you please take a look if you have some time https://review.openstack.org/79353
2014-03-12T18:32:27  *** zns has joined #openstack-infra
2014-03-12T18:32:42  *** bhuvan has quit IRC
2014-03-12T18:33:03  <jeblair> SergeyLukjanov: lgtm; sdague ^
2014-03-12T18:33:40  <reed> where can I find a list of all the web properties managed by the CI team?
2014-03-12T18:34:01  <clarkb> reed: openstack-infra/config/manifests/site.pp is probably the closest thing
2014-03-12T18:34:21  <reed> clarkb, wonderful, that's what I was looking for
2014-03-12T18:34:37  <jeblair> clarkb: a possibly incomplete list is in our docs (it omits some smaller things): http://ci.openstack.org/
2014-03-12T18:34:40  <jeblair> reed: ^
2014-03-12T18:35:01  *** homeless_ has joined #openstack-infra
2014-03-12T18:35:17  <openstackgerrit> James E. Blair proposed a change to openstack-infra/devstack-gate: WIP: test caching-forwarding nameserver  https://review.openstack.org/80045
2014-03-12T18:35:18  <reed> yep, thanks
2014-03-12T18:35:41  *** homeless has quit IRC
2014-03-12T18:36:16  *** sarob has joined #openstack-infra
2014-03-12T18:36:23  <SergeyLukjanov> jeblair, thx
2014-03-12T18:36:54  <SergeyLukjanov> russellb, re https://review.openstack.org/#/c/79900/3
2014-03-12T18:37:13  <clarkb> http://paste.openstack.org/show/73279/ huh
2014-03-12T18:37:29  <clarkb> I am going to retry the image build to see if this is consistent. May just be that puppet forge said go away
2014-03-12T18:37:33  <SergeyLukjanov> russellb, you should add section about nova-docker to modules/openstack_project/files/jenkins_job_builder/config/porjects.yaml to generate jobs in jenkins
2014-03-12T18:38:02  <jeblair> clarkb: yeah
2014-03-12T18:38:23  *** wenlock_demo has joined #openstack-infra
2014-03-12T18:38:42  <jogo> mtreinish: that was my thinking
2014-03-12T18:39:12  *** sweston has quit IRC
2014-03-12T18:39:20  *** cody-somerville_ is now known as cody-somerville
2014-03-12T18:39:31  *** wenlock_demo has quit IRC
2014-03-12T18:39:45  *** rlandy__ has joined #openstack-infra
2014-03-12T18:39:50  *** SumitNaiksatam has joined #openstack-infra
2014-03-12T18:39:56  <jeblair> jogo, mtreinish: do other channels want it?
2014-03-12T18:40:00  *** wenlock has joined #openstack-infra
2014-03-12T18:40:07  *** jasondotstar has quit IRC
2014-03-12T18:40:09  <mtreinish> jeblair: dunno, jogo asked me to push out the patch
2014-03-12T18:40:33  <mtreinish> jeblair: do you want it for infra?
2014-03-12T18:40:46  <jeblair> i ask because we could have had gerritbot announcing failures for years, but no one has fixed that... that makes me think people aren't interested in failure announcements
2014-03-12T18:40:56  *** lcostantino has quit IRC
2014-03-12T18:41:17  *** sdake has quit IRC
2014-03-12T18:41:31  <jeblair> i mean, i do think it's extremely useful for people tending e-r, _especially_ the unclassified announcements
2014-03-12T18:41:32  <clarkb> well someone did try, but then it got more complicated than we realized
2014-03-12T18:41:47  <jamespage> dims_, was really hoping to have libvirt 1.2.2 + patch into the icehouse CA today
2014-03-12T18:41:49  <mtreinish> jeblair: well this is a bit more specific it will only announce the failures with a known bug and only if the bug matches the projects listed in the yaml for the channel
2014-03-12T18:41:56  <jamespage> however debugging a unit test failure in it right now
2014-03-12T18:41:59  <jamespage> so lagging a bit
2014-03-12T18:42:00  *** wenlock has quit IRC
2014-03-12T18:42:01  *** sdake_ has quit IRC
2014-03-12T18:42:20  <jeblair> mtreinish: oh, so it's like "hey this nova bug keeps hitting stuff"
2014-03-12T18:42:22  *** lcostantino has joined #openstack-infra
2014-03-12T18:42:51  <foobio> paste.o.o is grinding. i bet it's swapping hard again
2014-03-12T18:42:59  <mtreinish> jeblair: yeah
2014-03-12T18:43:00  *** sweston has joined #openstack-infra
2014-03-12T18:43:07  *** rlandy_ has quit IRC
2014-03-12T18:43:18  <jogo> jeblair: my thinking was others will but push this out on phases
2014-03-12T18:43:29  <foobio> actually it looks fine
2014-03-12T18:43:29  <clarkb> foobio: I think we should make it read only and let it die
2014-03-12T18:43:32  <jogo> and I as nova want it
2014-03-12T18:43:36  <clarkb> foobio: I think drizzle is just slow
2014-03-12T18:43:37  *** krotscheck has quit IRC
2014-03-12T18:43:42  <clarkb> because old drizzle and so on
2014-03-12T18:44:10  <mtreinish> jogo: well I was thinking the first patch it might make sense to include neutron and cinder too
2014-03-12T18:44:16  <jeblair> mtreinish: i could see that being useful then; though that makes me think we might not want it in infra -- we have a lot of unfixable bugs, so much of what it would say to us is unactionable
2014-03-12T18:44:16  <jogo> mtreinish: your call
2014-03-12T18:44:30  *** sdake_ has joined #openstack-infra
2014-03-12T18:44:32  <jeblair> mtreinish: (example: ubuntu mirror is wonky)
2014-03-12T18:44:38  <clarkb> there are so many paste services out that that all support basically the same functionality I am not sure we need our own. The only reason to keep it would be to avoid a paste provider going away causing everyone to not have paste but there are a lot of options (I suppose running an open version of a thing is valuable too)
2014-03-12T18:44:52  <jogo> jeblair: good point about infra bugs. mtreinish ^
2014-03-12T18:45:02  <mtreinish> jeblair: you don't want e-r to spam the channel for every patch  when there is a mirror outage :)
2014-03-12T18:45:06  *** sdake has joined #openstack-infra
2014-03-12T18:45:08  <clarkb> jeblair: the puppet module thing happened again. I think I am going to get lunch and try again after
2014-03-12T18:45:22  *** andreaf has quit IRC
2014-03-12T18:45:28  <jeblair> clarkb: ack.  also, i think it's worth spending a few minutes fixing paste.
2014-03-12T18:45:29  *** weshay has quit IRC
2014-03-12T18:45:30  <clarkb> mordred: ^ have you seen hpcloud region b connectivty issues to puppet forge
2014-03-12T18:45:47  <mordred> uhm. no
2014-03-12T18:45:47  <clarkb> jeblair: definitely. I don't think we should kill that service without some headroom
2014-03-12T18:45:55  <mtreinish> jogo: yeah I didn't think about that, we probably should exclude infra then
2014-03-12T18:46:09  <clarkb> jeblair: just throwing it out there that I think the value of having our own is minimal
2014-03-12T18:46:45  <clarkb> mordred: jeblair actually I got more error message this time. I think we may have conflicting requirements somewhere
2014-03-12T18:46:52  <clarkb> :( I will look into fixing that after lunch
2014-03-12T18:47:41  *** rpodolyaka has quit IRC
2014-03-12T18:48:08  <openstackgerrit> Matthew Treinish proposed a change to openstack-infra/config: Elastic recheck irc spam everywhere  https://review.openstack.org/79123
2014-03-12T18:48:19  <mtreinish> jogo: ^^^ just nova, cinder, and neutron
2014-03-12T18:48:35  <foobio> those most deserving of its ire?
2014-03-12T18:48:42  <mtreinish> russellb, markmcclain, jgriffith: ^^^ do you guys have an issue with that?
2014-03-12T18:49:06  *** e0ne has quit IRC
2014-03-12T18:49:07  <markmcclain> +1
2014-03-12T18:49:09  <dims_> jamespage, very cool
2014-03-12T18:49:22  <mtreinish> foobio: heh, yeah something like that :)
2014-03-12T18:49:51  <dims_> jamespage, the 0.9.8+ deb(s) are holding up very well. need to run it another 5-8 times (i have 5-6 good runs so far)
2014-03-12T18:50:06  <mtreinish> foobio: that or most likely to respond to an e-r comment in irc
2014-03-12T18:50:32  <foobio> mtreinish: ooh, burn ;)
2014-03-12T18:52:21  <jeblair> foobio, clarkb: so my thinking is recursive resolvers on all servers, and forwarding resolvers on nodepool nodes.  how does that sound?
2014-03-12T18:52:46  <jeblair> foobio, clarkb: https://review.openstack.org/#/c/80045/ is an attempt to see if that would mess up devstack
2014-03-12T18:53:13  <foobio> jeblair: *caching* forwarding resolvers on nodepool nodes? if so, yes perfect
2014-03-12T18:53:23  <jeblair> foobio: yes
2014-03-12T18:53:29  *** johnthetubaguy1 has quit IRC
2014-03-12T18:53:44  <jeblair> (bind will cache in both cases)
2014-03-12T18:53:53  <openstackgerrit> Sergey Lukjanov proposed a change to openstack-infra/config: Remove group for the projects with the same name  https://review.openstack.org/80049
2014-03-12T18:53:53  <openstackgerrit> Sergey Lukjanov proposed a change to openstack-infra/config: Remove unneeded upstream links  https://review.openstack.org/80050
2014-03-12T18:53:54  <foobio> jeblair: though i think we need a little extra bootstrapping in jobs once that's in place. some initial retries to lookup things we know we'll use and "prime the pump" so to speak
2014-03-12T18:53:59  <SergeyLukjanov> foobio, ^^
2014-03-12T18:54:37  <foobio> jeblair: which hopefully will help guard against stray initial cache misses timing out
2014-03-12T18:54:40  <clarkb> jeblair: out of curiousity why bind?
2014-03-12T18:55:07  <jgriffith> mtreinish: reading back
2014-03-12T18:55:12  <jeblair> clarkb: "yum install caching-nameserver" and "apt-get install bind9" are all that are needed to get a caching recursive resolver on both os's.
2014-03-12T18:55:20  *** thuc has quit IRC
2014-03-12T18:55:33  <foobio> i personally am fine with bind. at least since 9.x it's not the bloated monstrosity of spaghetti it was in the post-4 days of 8.x
2014-03-12T18:55:34  <jeblair> clarkb: i'd be pretty coll with unbound though.
2014-03-12T18:55:46  <jeblair> cool.
2014-03-12T18:55:52  <jgriffith> mtreinish: I'm fine with trying it
2014-03-12T18:55:57  *** thuc has joined #openstack-infra
2014-03-12T18:56:08  <jgriffith> mtreinish: if it's overwhelming we can revisit
2014-03-12T18:56:10  *** SumitNaiksatam_ has joined #openstack-infra
2014-03-12T18:56:19  <clarkb> jeblair: I don't have any thing against bind it just seems overcomplicated for what we need
2014-03-12T18:56:20  <jgriffith> mtreinish: it could get pretty distracting
2014-03-12T18:56:36  <foobio> when you run bind as a recursive resolver, most of the sharp edges and moving parts are safely out of harm's way
2014-03-12T18:57:11  <foobio> but i'm also fine with something even more lightweight and designed not to act as an authoritative resolver at all
2014-03-12T18:57:18  <jeblair> unbound is available on both os's.
2014-03-12T18:57:47  <foobio> i do agree that if we pick something, it should be the same something on all platforms with consistent configuration
2014-03-12T18:57:55  <clarkb> ++ to consistency
2014-03-12T18:57:59  *** SumitNaiksatam has quit IRC
2014-03-12T18:58:03  <clarkb> looks like unbound will only do recursive
2014-03-12T18:58:21  <jeblair> clarkb: unbound can forward
2014-03-12T18:58:26  *** SumitNaiksatam_ is now known as SumitNaiksatam
2014-03-12T18:58:47  <clarkb> great. So either one works for me
2014-03-12T18:58:57  <clarkb> was curious if there was a specific reason for bind
2014-03-12T18:59:06  <dims_> jamespage, @hallyn had provided a url that i am wget-ing for the 0.9.8+ debs. how much work/time is it move to proposed?
2014-03-12T18:59:24  <foobio> i take it nobody's a huge fan of nscd (i've used it very little myself, so it very well may be a hideous idea)
2014-03-12T19:00:00  *** thuc has quit IRC
2014-03-12T19:00:20  <clarkb> foobio: nscd is that service you restart anytime something else breaks
2014-03-12T19:00:26  <jeblair> unbound does use like 1/5 the ram of named...
2014-03-12T19:00:28  <foobio> clarkb: got it
2014-03-12T19:00:38  <foobio> clarkb: i thought that was pulseaudio
2014-03-12T19:00:43  *** e0ne has joined #openstack-infra
2014-03-12T19:00:59  <sdague> mtreinish: I think you need russellb sign off before doing it
2014-03-12T19:01:10  <jeblair> more like 1/3
2014-03-12T19:01:10  *** weshay has joined #openstack-infra
2014-03-12T19:01:16  <clarkb> jeblair: that might be a good reason to use it
2014-03-12T19:01:25  *** mark0n has joined #openstack-infra
2014-03-12T19:01:38  <foobio> what percentage of our 8gb of ram does that work out to? ;)
2014-03-12T19:02:01  <clarkb> foobio: jeblair: does centos not do nscd? that might be the simplest to start with
2014-03-12T19:02:03  <foobio> but yeah, unbound sounds like a great choice
2014-03-12T19:03:03  <jeblair> does nscd actually cache dns records?
2014-03-12T19:03:27  <clarkb> ya it caches host lookups
2014-03-12T19:03:28  <openstackgerrit> Sean Dague proposed a change to openstack-infra/config: Don't run large-ops test on repos that it doesn't touch  https://review.openstack.org/78687
2014-03-12T19:03:32  <sdague> ok, that's the rebase
2014-03-12T19:03:39  <mark0n> clarkb: remember my problem with JJB and multiple Git remotes? I prepared a patch for that. I also want to add a simple unit test. But I have problems running "tox -epy27". Are you familiar with tox?
2014-03-12T19:03:48  <clarkb> mark0n: yup
2014-03-12T19:03:58  *** thuc has joined #openstack-infra
2014-03-12T19:04:01  <foobio> the trick with nscd, as i understand it, is that it hooks into the local resolver library and then forwards and caches based on your resolv.conf
2014-03-12T19:04:16  <foobio> rather than putting your loopback in resolv.conf
2014-03-12T19:04:50  <foobio> but i always thought the c in nscd stood for "cache"
2014-03-12T19:05:29  <jeblair> http://stackoverflow.com/questions/11020027/dns-caching-in-linux
2014-03-12T19:05:35  <mark0n> clarkb: I'm running it on Ubuntu 13.10. It crashes with an exception: https://gist.github.com/mark0n/9513987
2014-03-12T19:05:39  *** rpodolyaka has joined #openstack-infra
2014-03-12T19:05:43  <jeblair> https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=335476
2014-03-12T19:05:57  <clarkb> huh its disabled
2014-03-12T19:05:59  <clarkb> good to know
2014-03-12T19:06:04  <foobio> oho, "You should install this package only if you use slow services like LDAP, NIS or NIS+."
2014-03-12T19:06:10  <jeblair> yah, cause it's broken
2014-03-12T19:06:34  <clarkb> jeblair: I wonder if unscd has the same problem. but unbound seems like a great options if we want simple and bind if we need to do more complicated things
2014-03-12T19:06:58  <jeblair> i'll hack out a change to use unbound after lunch
2014-03-12T19:07:06  <foobio> awesome
2014-03-12T19:07:25  <clarkb> mark0n: huh, let me try reproducing
2014-03-12T19:07:43  <jeblair> that d-g change should still give us the answers we need about running a caching nameserver locally and pointing /etc/hosts at it in general
2014-03-12T19:07:48  <clarkb> ++
2014-03-12T19:07:59  <foobio> agreed
2014-03-12T19:08:15  *** sweston has quit IRC
2014-03-12T19:09:08  *** sweston has joined #openstack-infra
2014-03-12T19:09:12  <clarkb> mark0n: works for me. Can you try `tox -repy27` that will rebuild the virtualenv for you. I wonder if the virtualenv is missing something
2014-03-12T19:10:21  <mark0n> clarkb: that gives me the same output
2014-03-12T19:10:49  <mark0n> clarkb: what OS are you using?
2014-03-12T19:10:53  <clarkb> mark0n: the same
2014-03-12T19:11:05  <clarkb> but my tox is version 1.6.1
2014-03-12T19:11:16  *** caleb_ has joined #openstack-infra
2014-03-12T19:11:30  <mtreinish> jgriffith: yeah I could see it getting distracting, but how many gate failures does e-r attribute to cinder bugs?
2014-03-12T19:12:25  <clarkb> mark0n: is pip installed?
2014-03-12T19:12:32  <mark0n> clarkb: did you install tox from the Ubuntu repo or using pip?
2014-03-12T19:12:37  <clarkb> mark0n: using pip
2014-03-12T19:13:11  <clarkb> mark0n: I think what is happening there is tox is trying to fork and exec pip
2014-03-12T19:13:13  <clarkb> but not finding pip
2014-03-12T19:14:17  *** salv-orlando has joined #openstack-infra
2014-03-12T19:18:10  <mark0n> clarkb: I tried 1.7.0 - seems to have a different issue, see gist
2014-03-12T19:18:23  <clarkb> mark0n: yea 1.7.0 won't work
2014-03-12T19:18:31  <clarkb> mark0n: they broke backward compat
2014-03-12T19:18:42  *** thuc_ has joined #openstack-infra
2014-03-12T19:18:44  *** thuc has quit IRC
2014-03-12T19:18:50  <clarkb> mark0n: I would install 1.6.1, pip install --upgrade tox==1.6.1
2014-03-12T19:19:13  *** thuc has joined #openstack-infra
2014-03-12T19:19:17  *** hogepodge has joined #openstack-infra
2014-03-12T19:20:13  *** zhiyan is now known as zhiyan_
2014-03-12T19:20:58  <mark0n> clarkb: hmm, with 1.6.1 I have the first issue again...
2014-03-12T19:21:01  *** mburned is now known as mburned_out
2014-03-12T19:21:07  <clarkb> mark0n: weird
2014-03-12T19:21:24  <clarkb> mark0n: are you doing this on tip of master or on your patch? can you try doing it on tip of master to see if that is different?
2014-03-12T19:21:38  <clarkb> I wonder if something in the local tree is confusing tox
2014-03-12T19:21:46  <mark0n> clarkb: without my patch
2014-03-12T19:22:48  *** thuc_ has quit IRC
2014-03-12T19:23:27  *** jooools has quit IRC
2014-03-12T19:24:13  *** mburned_out is now known as mburned
2014-03-12T19:24:20  <mark0n> clarkb: I also purged all auto-generated files (including git-ignored files)
2014-03-12T19:24:47  <clarkb> mark0n: ok, let us try debugging this step by step using the virtualenv tox creates. `source .tox/py27/bin/activate ; pip install -r/home/marko/work/automated builds/vagrant/jenkins-job-builder/tools/pip-requires -r/home/marko/work/automated builds/vagrant/jenkins-job-builder/tools/test-requires ; python setup.py testr --slowest`
2014-03-12T19:25:40  <clarkb> oh after pip install -r's you should pip install $PATH_TO_JENKINS_JOB_BUILDER
2014-03-12T19:26:02  *** krotscheck has joined #openstack-infra
2014-03-12T19:26:17  *** melwitt has quit IRC
2014-03-12T19:26:43  <clarkb> that is basically what tox should be doing for us, and hopefully gives us an idea of what is breaking
2014-03-12T19:27:08  *** melwitt has joined #openstack-infra
2014-03-12T19:27:13  *** malini is now known as malini_afk
2014-03-12T19:27:14  <clarkb> but I think tox can't find pip for some reason
2014-03-12T19:28:18  <clarkb> I need to grab lunch now, but will be back in a bit others in here should be able to help if you find something new before I get back
2014-03-12T19:30:19  <mordred> kiall: we should actually probably have that conversation here
2014-03-12T19:30:40  *** zns has quit IRC
2014-03-12T19:30:47  <mordred> kiall: because even if you do all the work over the weekend because you think it's fun, we'll want jeblair and clarkb and foobio and SergeyLukjanov to be on board
2014-03-12T19:31:04  *** SumitNaiksatam_ has joined #openstack-infra
2014-03-12T19:31:07  *** SumitNaiksatam has quit IRC
2014-03-12T19:31:07  *** SumitNaiksatam_ is now known as SumitNaiksatam
2014-03-12T19:31:19  *** rpodolyaka has quit IRC
2014-03-12T19:31:28  *** rpodolyaka has joined #openstack-infra
2014-03-12T19:32:23  <foobio> i would hate for someone to waste their time doing work we can't make use of, if a little input from us would result in work we *can* make use of. what's the work?
2014-03-12T19:33:01  <mordred> foobio: the idea is to be able to support non-irc output for some of our bots who are generall useful -such as gerritbot
2014-03-12T19:33:08  *** afazekas has joined #openstack-infra
2014-03-12T19:33:14  <kiall> mordred: was AFK
2014-03-12T19:33:32  <foobio> non-irc = rss?
2014-03-12T19:33:35  <mordred> foobio: kiall has pointed out errbot, which supports both xmpp and irc backends
2014-03-12T19:33:39  <kiall> XMPP .. HipChat
2014-03-12T19:33:45  <kiall> we use HipChat at HP
2014-03-12T19:33:52  <foobio> oh, you mean aol instant messenger!
2014-03-12T19:34:02  <foobio> i have seen that before
2014-03-12T19:34:20  <mordred> foobio: so as best I can tell, options would be either adding jabber support to gerritbot, or porting gerritbot to errbot, or writing a duplicate of the gerritbot functionality for something else
2014-03-12T19:34:24  <kiall> foobio: lol.. I wish HP Cloud would get onboard with IRC .. But.. The animated gif support got too many people
2014-03-12T19:34:30  *** ildikov_ has joined #openstack-infra
2014-03-12T19:34:42  <clarkb> can it do ssl connections?
2014-03-12T19:34:49  <mordred> I'm a fan of options 1 and 2 because they lead to less forking of things
2014-03-12T19:35:03  <foobio> honestly, i think gerritbot may be too fragile for much of that, and suspect it would be a porting/rewriting effort
2014-03-12T19:35:20  <kiall> It uses the same underlying IRC lib as gerritbot does near as I can see
2014-03-12T19:35:35  <dstufft> or abstract away chat protocols and make that pluggable :D
2014-03-12T19:35:35  <kiall> so .. SSL is probably a yes
2014-03-12T19:35:57  <kiall> dstufft: like this? https://github.com/gbin/err/tree/master/errbot/backends ;)
2014-03-12T19:36:00  <mordred> haha
2014-03-12T19:36:08  <mordred> clarkb: errbot usees irc.bot as its irc stuff
2014-03-12T19:36:32  <mordred> so - I'd say it supports the exact same irc features :)
2014-03-12T19:36:39  <kiall> well.. irc.connection, not irc.bot.. same lib then
2014-03-12T19:36:52  <mordred> https://github.com/gbin/err/blob/master/errbot/backends/irc.py#L11
2014-03-12T19:37:04  <kiall> humm
2014-03-12T19:37:09  <kiall> I only noticed L5 ;)
2014-03-12T19:37:59  <kiall> Which .. Funny enough.. Looks like a bug. That try import will neverh it
2014-03-12T19:38:06  <kiall> never hit*
2014-03-12T19:38:37  <mordred> it won't?
2014-03-12T19:38:41  <foobio> i'll admit i haven't stared at gerritbot's code much, so it might be amenable to some refactoring to make that abstraction happen... looking it over with an eye for that now
2014-03-12T19:38:54  *** yolanda has joined #openstack-infra
2014-03-12T19:38:59  <kiall> yea - L5 will raise an ImportError before the L11 import runs
2014-03-12T19:39:36  <mordred> kiall: oh right- if the irc lib was not there
2014-03-12T19:39:42  <kiall> Yep
2014-03-12T19:39:46  *** locke105 has joined #openstack-infra
2014-03-12T19:40:00  <mark0n> clarkb: a white-space in my path broke it...
2014-03-12T19:40:13  <mark0n> clarkb: thanks
2014-03-12T19:40:16  <clarkb> np
2014-03-12T19:41:12  <dstufft> kiall: possibly!
2014-03-12T19:42:14  <openstackgerrit> Michael Krotscheck proposed a change to openstack-infra/storyboard: Go back to alembic migrations  https://review.openstack.org/79208
2014-03-12T19:42:20  <mordred> foobio: so - in any case, I didn't want kiall to go have fun this weekend porting gerritbot to be an errbot plugin only to have us tell him to go away
2014-03-12T19:42:43  <foobio> it might not actually be too terribly ugly to pass GerritBot() to inherit from something other than irc.bot.SingleServerIRCBot
2014-03-12T19:43:05  <mordred> foobio: if, otoh, we tell him to go away before hand and he does that work anyway - it's at least a conscious choice
2014-03-12T19:43:20  <foobio> come up with some sort of translation for the common methods supported by both that and the xmpp backend...
2014-03-12T19:43:39  *** thuc has quit IRC
2014-03-12T19:43:45  <clarkb> I'd be onboard with it if we can add ssl support
2014-03-12T19:44:02  <openstackgerrit> Michael Krotscheck proposed a change to openstack-infra/storyboard: Missing security decorators added  https://review.openstack.org/79895
2014-03-12T19:44:03  *** thuc has joined #openstack-infra
2014-03-12T19:44:17  <foobio> mordred: well, my biggest concern, as with a lot of these sorts of contributions of features we don't use, is that gerritbot has no testing so we could easily break that feature and not know about it if it didn't break our very specific use case
2014-03-12T19:44:29  <kiall> clarkb: SSL is baked into it as of 4 months ago.. https://github.com/gbin/err/commit/93ff296483d13c0097341101637bd3c5d1776489
2014-03-12T19:44:44  <openstackgerrit> Michael Krotscheck proposed a change to openstack-infra/storyboard: Fill the last_login field  https://review.openstack.org/79887
2014-03-12T19:45:04  <mordred> kiall: well that certainly seems handy
2014-03-12T19:45:38  <foobio> and one thing gerritbot *does* have going for it, is that it's not using twisted-python
2014-03-12T19:45:43  <dstufft> lifeless: halp, what does "db type could not be determined" mean besides the obvious, I assume it's testrepository but it might also be subunit or some other thing
2014-03-12T19:45:56  <dstufft> foobio: twisted is pretty good for writing network things
2014-03-12T19:46:18  <foobio> dstufft: yes i know. but it also comes with a lot of baggage
2014-03-12T19:46:50  <mordred> and I, for one, don't know how to debug twisted applications. I hear great thigns about them though
2014-03-12T19:46:53  <openstackgerrit> Michael Krotscheck proposed a change to openstack-infra/storyboard: Logging in with a pre-existing user saves details  https://review.openstack.org/79705
2014-03-12T19:47:01  <clarkb> and no ipv6
2014-03-12T19:47:03  <foobio> dstufft: and things like, you can't use ipv6 and ssl/tls together
2014-03-12T19:47:06  <foobio> that
2014-03-12T19:47:47  <kiall> foobio: I don't see twisted as a dep? At least for the IRC parts (no clue what the XMPP etc backends rely on)
2014-03-12T19:47:53  <openstackgerrit> Michael Krotscheck proposed a change to openstack-infra/storyboard: Added paging to list endpoints  https://review.openstack.org/79757
2014-03-12T19:48:10  <foobio> kiall: it isn't for gerritbot (it is for supybot which we use in other bots we run)
2014-03-12T19:48:44  *** SumitNaiksatam_ has joined #openstack-infra
2014-03-12T19:48:54  *** nicedice has joined #openstack-infra
2014-03-12T19:48:56  <kiall> Oh.. Fair enough. supybot always felt like eggdrop to me.. Extended beyond it's design without a re-factoring.. ;)
2014-03-12T19:49:03  <foobio> i was just taking the opportunity to make an undeserved dig at twisted
2014-03-12T19:49:30  <foobio> eggdrop's fine as long as you have a time machine which can take your brain back to tcl syntax
2014-03-12T19:49:48  <clarkb> foobio did you catch the ghub fix?
2014-03-12T19:49:49  <dstufft> mordred: heh
2014-03-12T19:50:05  <clarkb> we need to add read:orgs perms to the token
2014-03-12T19:50:06  <dstufft> mordred: debugging twisted apps is like 100x easier thand ebugging eventlet/gevent at least :|
2014-03-12T19:50:24  *** SumitNaiksatam has quit IRC
2014-03-12T19:50:26  *** SumitNaiksatam_ is now known as SumitNaiksatam
2014-03-12T19:50:28  <foobio> clarkb: oh! did they add that as a new permission?
2014-03-12T19:51:00  <clarkb> apparently
2014-03-12T19:51:00  <foobio> clarkb: because we haven't touched the perms for that account on the github side in, like, well and embarrassingly long time i think
2014-03-12T19:51:08  <clarkb> dstufft lol
2014-03-12T19:51:19  <clarkb> our brains must work differently
2014-03-12T19:51:43  <foobio> dstufft: in twisted-python, apps debug you!
2014-03-12T19:51:55  <dstufft> clarkb: the problem with eventlet/grevent is that the context switch can happen at any point, so you get a combinatorial number of states the software can be
2014-03-12T19:52:16  <dstufft> with twisted the context switch happens at very defined points
2014-03-12T19:52:19  <clarkb> dstufft thats true of any threads
2014-03-12T19:52:22  <dstufft> yes
2014-03-12T19:52:32  <dstufft> threads are horrible to debug too
2014-03-12T19:52:36  <clarkb> which means I have lots of practice
2014-03-12T19:52:47  <dstufft> that just means your brain is pre-broken :D
2014-03-12T19:52:52  <clarkb> they arent that bad. hard yes but not terrible
2014-03-12T19:53:10  * foobio thought it was all so much easier in the pvm/mpich days with explicit message-passing between processes
2014-03-12T19:53:24  <dstufft> It's probably a result of my primary language being Python, and before that PHP but i've done next to nothing with threads
2014-03-12T19:53:44  <mordred> dstufft: you know we write a bunch of threaded python code aroudn here, yeah?
2014-03-12T19:54:00  <clarkb> dstufft ah. /me did C lots of it
2014-03-12T19:54:02  <dstufft> mordred: crazy people
2014-03-12T19:54:14  <dstufft> pip had some threads
2014-03-12T19:54:17  <mordred> dstufft: works pretty well...
2014-03-12T19:54:20  <dstufft> until I ripped them out
2014-03-12T19:54:36  *** jp_at_hp has quit IRC
2014-03-12T19:54:39  <mordred> I don't know if you know about the scalable gating system controller called zuul we use...
2014-03-12T19:54:40  <foobio> pip does seem like the sort of tool which doesn't need any threading
2014-03-12T19:54:45  <mordred> ++
2014-03-12T19:54:49  <clarkb> there are airplanes flying around with a radio I helped build in them. scary
2014-03-12T19:55:16  <foobio> clarkb: as long as someone else built the black box, they should eventually be able to blame your work
2014-03-12T19:55:41  <dstufft> well
2014-03-12T19:55:46  <dstufft> historically pip used threading because
2014-03-12T19:55:48  <kiall> foobio: I'm not sure that's comforting ;)
2014-03-12T19:56:09  <dstufft> it has an unbounded number of urls it would hit to discover stuff
2014-03-12T19:56:11  * kiall starts using the ferry more often
2014-03-12T19:56:11  <clarkb> dont worry its not certified for commercial jets
2014-03-12T19:56:11  <dstufft> or did previously
2014-03-12T19:56:46  <foobio> dstufft: right, eww
2014-03-12T19:57:09  <kiall> dstufft: Sure, but pip etc should have stopped what they were doing. Immediately. Once they realized they were building a crawler.
2014-03-12T19:57:20  <dstufft> kiall: pip is by defintion a crawler :]
2014-03-12T19:57:26  <kiall> ;)
2014-03-12T19:57:27  <dstufft> that's how you install stuff
2014-03-12T19:57:53  <dstufft> well find stuff to install
2014-03-12T19:57:53  <clarkb> foobio we have another case of unfamiliar with gerrit but stackforging...
2014-03-12T19:57:56  <dstufft> :/
2014-03-12T19:58:02  <clarkb> foobio I can respond to it
2014-03-12T19:58:22  <kiall> clarkb: no canned response ready to go? ;)
2014-03-12T19:58:26  <foobio> clarkb: thank you for leaping onto that grenade. remind me to beer you in atlanta or something
2014-03-12T19:58:26  <clarkb> foobio let me know if you need more eyes on github token stuff
2014-03-12T19:58:46  <foobio> clarkb: pulling up the bug now, but if i can confirm it, patch on the way
2014-03-12T19:58:52  <jeblair> kiall: can we make gerritbot and statusbot errbot plugins and run them in the same bot?
2014-03-12T19:59:14  <jeblair> kiall: and then, does errbot have a meetbot plugin?  if not, could we make one of those too?
2014-03-12T19:59:19  <kiall> jeremyb: yea.. they could be melded into 2 plugins of 1 bot
2014-03-12T19:59:26  <foobio> meetbot too, while we're talking pie in the sky
2014-03-12T19:59:36  <jeblair> kiall: and finally, can errbot do eavesdrop-style channel logging?
2014-03-12T19:59:41  <kiall> lol - that's more than a weekend right there jeblair ;)
2014-03-12T19:59:48  <jeblair> kiall: there's lots of weekends!
2014-03-12T20:00:00  *** unicell has quit IRC
2014-03-12T20:00:05  <clarkb> foobio patch? you should be able to update the token in github I think
2014-03-12T20:00:06  <foobio> i agree it would be beyond awesome not to be managing bots from several disparate codebases
2014-03-12T20:00:12  <jeblair> kiall: because other irc related problems that would be great to solve are: we have a lot of bots, each of which requires configuration and account management...
2014-03-12T20:00:14  <mordred> jeblair: from what I see - I betcha all of those things could be put on a roadmpa - so perhaps this would turn in to the beginning of projet "one bot to rule them all"
2014-03-12T20:00:24  <foobio> clarkb: oh, on the github end. got it. will take a look
2014-03-12T20:00:48  <jeblair> kiall: and also 'we can't restart meetbot (which is also eavesdrop) to pick up a new configuration during meetings'
2014-03-12T20:00:51  <kiall> I'm going with No - not because it's not possible.. But because it's way more work than I can offer ;) But.. Yea.. You can load 100 plugins doing different things into it
2014-03-12T20:00:51  *** unicell has joined #openstack-infra
2014-03-12T20:00:53  <mordred> jeblair: also - apparently - each of those could be plugins, and they coudl all still live in diffrent repos if we wanted
2014-03-12T20:01:24  <foobio> i think they would almost certainly live in separate repos
2014-03-12T20:01:29  <jeblair> kiall: let's pretend i didn't say "could you" in those questions, and instead am just asking for your insight to decide if this is a good road to head down
2014-03-12T20:01:39  <jeblair> (which should be easy because i didn't say that ;)
2014-03-12T20:01:40  <mordred> as the unit of plugin installation in errbot is  a git repo
2014-03-12T20:01:55  <foobio> heh
2014-03-12T20:01:55  *** VijayTripathi has joined #openstack-infra
2014-03-12T20:02:09  <openstackgerrit> Sergey Lukjanov proposed a change to openstack-infra/config: Remove logging of sahara projects to #savanna  https://review.openstack.org/79545
2014-03-12T20:02:10  <jeblair> i would have suggested moving our other bots into supybot a while ago, but for the ipv6/ssl thing
2014-03-12T20:02:28  <jeblair> twisted seems not at all interested in fixing that, so i kind of think that makes supybot a dead end
2014-03-12T20:02:33  <kiall> jeblair: Sure ;) So .. yea, it probably could.. It'd boil down to it's internals of if it's capable of watching N channels at once and actually doing something with the input I guess
2014-03-12T20:02:55  <jeblair> kiall: okay, so that's a question we should probably answer early on...
2014-03-12T20:03:08  <mordred> jeblair: I _believe_ we'll have to answer that to do gerritbot at all
2014-03-12T20:03:12  <kiall> i.e. It's got a bunch of threading stuff in there, but I'm not sure what it's used for (never looked..)
2014-03-12T20:03:22  <mordred> since gerritbot needs to watcha  stream
2014-03-12T20:03:27  <jeblair> kiall, mordred: i'm much more interested in a technology shift here if we move to something that puts us in a better place overall
2014-03-12T20:03:32  <mordred> jeblair: I agree
2014-03-12T20:04:28  *** Sukhdev has joined #openstack-infra
2014-03-12T20:05:25  <openstackgerrit> Sean Dague proposed a change to openstack-infra/elastic-recheck: only care about unclassifieds in gate queue  https://review.openstack.org/80066
2014-03-12T20:06:13  <mordred> from what I can tell - since gerritbot needs to run a thread to watch the gerrit stream - it means that using errbot for gerrit at all will necessarily have to figure out if it can do multiple things in threads
2014-03-12T20:06:37  *** sarob has quit IRC
2014-03-12T20:07:07  *** SumitNaiksatam has quit IRC
2014-03-12T20:07:32  <jeblair> mordred: yeah, it doesn't necessarily have to have a huge thread infrastructure, but just having things like the a "send privmsg" method be thread-safe (even better if it has thread-safe flood control) would be good.
2014-03-12T20:09:18  <jeblair> mordred, kiall: so open questions are: a) thread safety; b) on-the-fly reconfiguration; c) sensible configuration for multiple plugins; d) existence of meetbot/eavesdrop plugins
2014-03-12T20:09:31  <sdague> so honestly, what the suggestion that foobio made off hand earlier
2014-03-12T20:09:36  <sdague> to gerrit -> rss
2014-03-12T20:09:48  <jeblair> sdague: like openstackwatch?
2014-03-12T20:10:08  <foobio> clarkb: found the permission on the token and added it, rerunning the script now... hasn't died yet either
2014-03-12T20:10:09  <sdague> I guess, I don't know what that is :)
2014-03-12T20:10:30  *** caleb_ has quit IRC
2014-03-12T20:10:36  <sdague> but regardless then bots pull that and off we go
2014-03-12T20:10:37  <jeblair> sdague: it's a 95% completed project in the config repo to make an rss feed for gerrit.  afaik it just needs some finishing touches
2014-03-12T20:10:58  <jeblair> sdague, foobio: maybe i don't understand the suggestion...
2014-03-12T20:11:00  *** sarob has joined #openstack-infra
2014-03-12T20:11:02  <sdague> and would solve having everyone talking to gerrit
2014-03-12T20:11:16  <kiall> jeblair: noted .. Will eye up the code to see if it's capable of handle those
2014-03-12T20:11:16  <sdague> or was that not part of what was trying to be solved
2014-03-12T20:11:36  <jeblair> sdague: you want to go from a real-time push notification system to a delayed polling based pull system?
2014-03-12T20:11:46  <foobio> jeblair: i was indeed making an illusion to openstackwatch
2014-03-12T20:11:50  *** jasond` has left #openstack-infra
2014-03-12T20:11:58  <foobio> allusion
2014-03-12T20:12:17  <jeblair> sdague: afaik the problem kiall wants to solve is that his company doesn't use irc for their internal copy of infra, so they want a gerritbot that talks to their proprietary thing
2014-03-12T20:12:35  *** weshay has quit IRC
2014-03-12T20:12:42  <kiall> jeblair: Yep - bang on
2014-03-12T20:13:05  <kiall> But if the choice of bot/lib/etc has other benefits, cool.
2014-03-12T20:13:15  <jeblair> kiall: ++
2014-03-12T20:15:21  <kiall> jeblair: .. seeing code like this suggests on-the-fly reconfig won't be an issue.. https://github.com/gbin/err/blob/master/errbot/plugin_manager.py#L140-154
2014-03-12T20:15:33  *** esker has quit IRC
2014-03-12T20:16:07  <sdague> yeh, it just makes me wonder about the other bots as well. because I imagine the desire for another elastic recheck at some point.
2014-03-12T20:16:11  <kiall> seems to handle reloading the plugin's code without a restart.. So, promising it can handle re-config
2014-03-12T20:16:53  <jeblair> sdague: yeah, i'd love it if all our bots could be plugins to one bot; including er; to reduce the overhead of what we really want to do which is "add functionality to irc"
2014-03-12T20:17:12  <sdague> jeblair: yeh that would be nice
2014-03-12T20:18:13  <kiall> jeblair: s/irc/irc+hipchat/ ;))
2014-03-12T20:18:14  <sdague> I expect the complexities build up pretty quickly here though
2014-03-12T20:18:55  *** resker has joined #openstack-infra
2014-03-12T20:19:39  <foobio> sdague: the openstackwatch module in openstack-infra/jeepyb makes http://rss.cdn.openstack.org/nova.xml
2014-03-12T20:20:06  <foobio> just basically a query of open reviews
2014-03-12T20:20:29  <foobio> and uploads to a swift container periodically
2014-03-12T20:20:33  <sdague> cool
2014-03-12T20:20:44  *** dprince has joined #openstack-infra
2014-03-12T20:20:48  <foobio> chmouel wrote it and anteaya puppeted it a while back
2014-03-12T20:20:54  *** rpodolyaka has quit IRC
2014-03-12T20:21:02  *** rpodolyaka has joined #openstack-infra
2014-03-12T20:21:02  *** rpodolyaka has quit IRC
2014-03-12T20:21:03  *** rpodolyaka1 has joined #openstack-infra
2014-03-12T20:21:25  <foobio> i think the idea was that once we have more control over gerrit themes, it could get linked as an rss feed from an out-of-the-way part of the ui
2014-03-12T20:21:29  *** Sukhdev has quit IRC
2014-03-12T20:21:51  *** mrda_away is now known as mrda
2014-03-12T20:22:06  <foobio> clarkb: close-pull-requests completed its run with no errors
2014-03-12T20:23:44  <sdague> coolio
2014-03-12T20:24:00  *** thuc has quit IRC
2014-03-12T20:24:27  *** thuc has joined #openstack-infra
2014-03-12T20:25:11  *** sweston has quit IRC
2014-03-12T20:26:09  <jeblair> yeah, forwarding everything in unbound is trivial
2014-03-12T20:26:38  *** changbl has quit IRC
2014-03-12T20:27:40  <sdague> jeblair / foobio: I rebased jogo's patch - https://review.openstack.org/#/c/78687/ to free up some dsvm nodes
2014-03-12T20:28:07  *** mrodden has quit IRC
2014-03-12T20:28:46  <clarkb> foobio woot
2014-03-12T20:28:51  <jeblair> lgtm
2014-03-12T20:29:08  <foobio> clarkb: spammed us with about 30-60 pr closures
2014-03-12T20:29:08  *** rossella_s has quit IRC
2014-03-12T20:29:08  <clarkb> foobio was the token thing through their webui?
2014-03-12T20:29:14  <foobio> clarkb: yep!
2014-03-12T20:29:31  <foobio> under settings->applications->personal token access
2014-03-12T20:29:42  *** rossella_s has joined #openstack-infra
2014-03-12T20:29:48  <foobio> there's a whole array of permissions you can add/remove in there now
2014-03-12T20:29:51  <jeblair> looks like check node wait time is about 1.5 hours
2014-03-12T20:29:56  <foobio> but that was the only one i needed to add
2014-03-12T20:29:59  *** afazekas has quit IRC
2014-03-12T20:30:02  <jogo> sdague: thanks!
2014-03-12T20:30:10  *** MarkAtwood has joined #openstack-infra
2014-03-12T20:30:51  *** che-arne has quit IRC
2014-03-12T20:31:06  <foobio> jogo: lgtm too... aprv'd
2014-03-12T20:32:54  *** mburned is now known as mburned_out
2014-03-12T20:32:57  <jeblair> of course the dnssec trust file is /var/lib/unbound/root.anchor on centos and /var/lib/unbound/root.key on ubuntu.
2014-03-12T20:33:00  <openstackgerrit> A change was merged to openstack-infra/config: Don't run large-ops test on repos that it doesn't touch  https://review.openstack.org/78687
2014-03-12T20:33:58  <foobio> they're almost the same... what's a file suffix between frenemies?
2014-03-12T20:34:42  <lifeless> dstufft: it mens python changed defaults for dbm between minor versions and screwed everyone
2014-03-12T20:34:50  <lifeless> dstufft: *means*
2014-03-12T20:34:58  <dstufft> lifeless: how can I fix it
2014-03-12T20:35:16  <dstufft> it happens on the first run even if I delete the .testrepository dir :[
2014-03-12T20:35:18  <lifeless> dstufft: rm .testrepository/timing.db
2014-03-12T20:35:34  <lifeless> dstufft: I'm going to guess that you're using tox to run several versions of python at once
2014-03-12T20:35:44  <dstufft> lifeless: yes tox, just 1 version
2014-03-12T20:35:45  <jogo> http://logs.openstack.org/67/57967/23/gate/gate-tempest-dsvm-neutron/0de62a7/logs/devstack-gate-setup-workspace-new.txt.gz
2014-03-12T20:35:50  <jogo> is there a bug filed for that
2014-03-12T20:35:53  <lifeless> dstufft: just one version? really?
2014-03-12T20:36:10  <lifeless> dstufft: colour me skeptical :)
2014-03-12T20:36:14  *** e0ne has quit IRC
2014-03-12T20:36:47  <dstufft> lifeless: actually I remember the symtpoms slightly wrong, it works the first time but fails every other time after that
2014-03-12T20:36:52  *** e0ne has joined #openstack-infra
2014-03-12T20:36:52  <dstufft> unless I delete
2014-03-12T20:37:04  <dstufft> lifeless: well i'm using tox -e py26
2014-03-12T20:37:16  <dstufft> so if it's executing something other than py26 ima be angry
2014-03-12T20:37:36  <lifeless> dstufft: you may need to be angry; anyhow what I'd do is just not use testr within the venv; use it from outside.
2014-03-12T20:37:50  <lifeless> dstufft: then you won't be subject to python version vaguaries
2014-03-12T20:38:14  <jogo> foobio: ^^
2014-03-12T20:38:17  *** emagana has joined #openstack-infra
2014-03-12T20:38:24  <jogo> saw a whole slew of failures like this http://logs.openstack.org/59/62859/1/gate/gate-tempest-dsvm-neutron/7025cba/console.html
2014-03-12T20:38:24  <mordred> lifeless: there's no good way to do that in a tox context really
2014-03-12T20:38:37  <jogo> wnat to add a e-r  fingerprint to remove them from the unclassificed list
2014-03-12T20:38:58  <foobio> jogo: 1291440
2014-03-12T20:39:13  <dstufft> lifeless: did I ever mention that software is the worst
2014-03-12T20:39:15  <jeblair> OverLimit: Quota exceeded for ram: Requested 16384, but already used 944128 of 960000 ram (HTTP 413) (Request-ID: req-368f5ce0-8211-4acd-9acb-ba002baea11b)
2014-03-12T20:39:19  <jeblair> foobio, clarkb, lifeless: ^
2014-03-12T20:39:29  *** VijayTripathi has quit IRC
2014-03-12T20:39:35  <clarkb> jeblair: which provider is that from?
2014-03-12T20:39:39  <foobio> jeblair: in tripleo?
2014-03-12T20:39:45  <jeblair> does anyone understand why it is requesting 16384 when it's configured for 8192
2014-03-12T20:39:45  <clarkb> oh right becaseu 16G nodes
2014-03-12T20:39:49  <foobio> (i assume because you pinged lifeless)
2014-03-12T20:39:53  <jeblair> tripleo, yes
2014-03-12T20:39:59  <clarkb> jeblair: there is no 8192 flavor, so it picks the next bigger
2014-03-12T20:40:01  <jeblair> that's q.1
2014-03-12T20:40:03  <jeblair> ok
2014-03-12T20:40:03  *** e0ne has quit IRC
2014-03-12T20:40:19  <jeblair> so q.2:  960000/16384 = 58.593750
2014-03-12T20:40:21  *** ociuhandu has quit IRC
2014-03-12T20:40:23  *** thuc_ has joined #openstack-infra
2014-03-12T20:40:42  <lifeless> mordred: just remove testrepository from the test-requirements, no?
2014-03-12T20:40:55  <lifeless> mordred: use binddep instead
2014-03-12T20:41:00  <jeblair> our actual limit is 58 servers; lifeless: should we adjust nodepool's config to match, or do you want to increase the quota?
2014-03-12T20:41:27  <jogo> foobio: how does 'message:"savanna"  AND message: "fatal\: https://git.openstack.org/openstack" AND filename:"logs/devstack-gate-setup-workspace-new.txt"' sounds for a fingeprint
2014-03-12T20:41:32  <lifeless> jeblair: memory quota? let me check hypervisor stats
2014-03-12T20:41:47  <jeblair> lifeless: yes
2014-03-12T20:41:59  <lifeless> free_ram_mb          | 107624
2014-03-12T20:42:09  <foobio> clarkb: on that last update to 1291479, you'd think they'd be working more closely with the heat developer community (they did request sbaker as a member of their ptl group)
2014-03-12T20:42:12  <lifeless> | memory_mb            | 966760 |
2014-03-12T20:42:12  <lifeless> | memory_mb_used       | 859136 |
2014-03-12T20:42:20  <clarkb> foobio: you would think...
2014-03-12T20:42:24  <clarkb> foobio: I am going to respond now
2014-03-12T20:42:40  <clarkb> then figure out puppet module installs
2014-03-12T20:42:41  *** e0ne has joined #openstack-infra
2014-03-12T20:42:47  <ttx> foobio, jeblair: howdy! Is the world still turning ?
2014-03-12T20:42:54  <foobio> ttx: still turning
2014-03-12T20:43:01  <lifeless> room for 6 more in there
2014-03-12T20:43:10  <mordred> lifeless: what?
2014-03-12T20:43:11  <lifeless> so I think reduce nodepool config
2014-03-12T20:43:24  <lifeless> mordred: what what
2014-03-12T20:43:30  <foobio> lifeless: have we maybe leaked nodes in that tenant?
2014-03-12T20:43:35  <ttx> foobio: damn, that hurts my narcissism
2014-03-12T20:43:36  *** thuc has quit IRC
2014-03-12T20:44:11  <foobio> ttx: become a solipsist and then it won't matter ;)
2014-03-12T20:44:32  <lifeless> foobio: there's 859GB used, which is ~53 servers
2014-03-12T20:44:35  <ttx> foobio, jeblair: it nothing urgent is needed from me, i'll go back to ignoring what happens this week
2014-03-12T20:44:45  <lifeless> foobio: so hitting 58 seems about right
2014-03-12T20:44:49  <openstackgerrit> James E. Blair proposed a change to openstack-infra/config: Adjust tripleo nodepool config to actual values  https://review.openstack.org/80078
2014-03-12T20:44:56  <lifeless> since 53 + 6 = 59
2014-03-12T20:45:10  *** jasondotstar has joined #openstack-infra
2014-03-12T20:45:22  <jeblair> ttx: go back to skiing.  or start skiing if you've been snowboarding.  ;P
2014-03-12T20:45:24  <lifeless> jeblair: dunno if you saw https://review.openstack.org/#/c/79091/
2014-03-12T20:45:28  *** wenlock has joined #openstack-infra
2014-03-12T20:45:33  <lifeless> jeblair: which I put up when I changed the flavor
2014-03-12T20:45:59  <jeblair> lifeless: nope, hadn't gotten to that yet, though it looks like it's still to high, yeah?
2014-03-12T20:46:03  <sdague> ttx: everythings pretty solid, nothing crazy on fire
2014-03-12T20:46:15  <jeblair> lifeless: i went with 50 since i calculate the max at 58
2014-03-12T20:46:16  <lifeless> jeblair: it is, I can abandon happily enough
2014-03-12T20:46:24  *** yolanda has quit IRC
2014-03-12T20:46:25  *** mrodden has joined #openstack-infra
2014-03-12T20:46:27  <foobio> jogo: "savanna-dashboard/info/refs not found" maybe
2014-03-12T20:46:37  <foobio> jogo: i think they all failed on the same point in the list
2014-03-12T20:46:55  <foobio> jogo: and that's one which definitely won't recur exactly the same way again
2014-03-12T20:47:17  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/elastic-recheck: Add fingerprint for bug 1291440  https://review.openstack.org/80080
2014-03-12T20:47:20  <clarkb> ttx: enjoy the snow
2014-03-12T20:47:29  *** Sukhdev has joined #openstack-infra
2014-03-12T20:47:38  * foobio is popping out for dinner... bbl
2014-03-12T20:47:58  <jogo> foobio: thanks
2014-03-12T20:48:29  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/elastic-recheck: Add fingerprint for bug 1291440  https://review.openstack.org/80080
2014-03-12T20:48:32  <SergeyLukjanov> jogo, agreed with foobio
2014-03-12T20:48:40  <jogo> SergeyLukjanov: ^
2014-03-12T20:48:41  <SergeyLukjanov> jogo, thanks for fingerprint
2014-03-12T20:49:12  <SergeyLukjanov> jogo, are there many affected changes?
2014-03-12T20:49:18  <jogo> SergeyLukjanov: once that lands I think we should have a pretty high classifcation rate http://status.openstack.org/elastic-recheck/data/uncategorized.html
2014-03-12T20:49:28  <jogo> SergeyLukjanov:  there were a good number in gate
2014-03-12T20:50:26  <jogo> 258 hits in gate
2014-03-12T20:50:59  <openstackgerrit> Sean Dague proposed a change to openstack-infra/elastic-recheck: fix formatting on 'and'  https://review.openstack.org/80083
2014-03-12T20:51:00  <openstackgerrit> Sean Dague proposed a change to openstack-infra/elastic-recheck: only care about unclassifieds in gate queue  https://review.openstack.org/80066
2014-03-12T20:51:06  <ttx> alrighty then
2014-03-12T20:51:08  * ttx signs off
2014-03-12T20:52:10  *** ArxCruz has quit IRC
2014-03-12T20:52:17  <openstackgerrit> Martin Konrad proposed a change to openstack-infra/jenkins-job-builder: SCM module: Add support for multiple Git remotes.  https://review.openstack.org/80084
2014-03-12T20:52:33  <SergeyLukjanov> jogo, oh, quite a lot
2014-03-12T20:52:43  <foobio> a lot of those didn't report though
2014-03-12T20:53:15  <jogo> foobio: that makes sense
2014-03-12T20:53:22  <clarkb> nibalizer:  Module 'puppetlabs-inifile' (v1.0.3) is already installed
2014-03-12T20:53:24  <foobio> as soon as sdague pointed them out, we force-merged the fix immediately and i reshuffled the gate to get everything which was still in there but about to die to retest
2014-03-12T20:53:25  <jogo> I think that caused the recent spike http://jogo.github.io/gate/
2014-03-12T20:53:44  *** thuc__ has joined #openstack-infra
2014-03-12T20:53:46  <clarkb> nibalizer: puppet module install should install the modules that it needs as dependencies right? but you want ot install it as no deps?
2014-03-12T20:53:59  <clarkb> nibalizer: I am slowly debugging this but can't install git on my VM because my apt repo is gone apparently
2014-03-12T20:54:05  *** thuc_ has quit IRC
2014-03-12T20:54:06  <clarkb> nibalizer: I will know a lot more in about 5 minutes
2014-03-12T20:54:12  <nibalizer> clarkb: okay
2014-03-12T20:54:12  <foobio> jogo: probably so. shouldn't have happened outside of 12:45-13:30 if memory serves
2014-03-12T20:54:20  * foobio is really at dinner now ;)
2014-03-12T20:54:21  <nibalizer> puppet module install brings in deps, yes
2014-03-12T20:54:26  <SergeyLukjanov> https://review.openstack.org/#/c/80080/ lgtm
2014-03-12T20:54:58  <nibalizer> clarkb: is this changes that have already landed or a change that I can look at?
2014-03-12T20:55:06  <clarkb> nibalizer: so I think something is installing 1.0.3 then the specific 1.0.0 version dies
2014-03-12T20:55:08  <nibalizer> also i'm about to go into a work meeting so will be of limited use for an hour or two
2014-03-12T20:55:13  <clarkb> nibalizer: its tip of master
2014-03-12T20:55:17  <nibalizer> greaaat
2014-03-12T20:55:22  <clarkb> nibalizer: no worries I am debugging now
2014-03-12T20:55:32  <nibalizer> uh well just rollback to 1.0.0 and screw puppetdb, i can fix it later :P
2014-03-12T20:55:48  <clarkb> I can't rollback that is what it is trying to do :P
2014-03-12T20:55:53  <clarkb> and failing
2014-03-12T20:57:07  *** khyati has quit IRC
2014-03-12T20:57:33  *** malini_afk is now known as malini
2014-03-12T20:59:31  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/elastic-recheck: Periodic purge of fixed and unseen bugs  https://review.openstack.org/80086
2014-03-12T21:00:21  *** skraynev is now known as skraynev_afk
2014-03-12T21:02:17  <openstackgerrit> Matt Riedemann proposed a change to openstack-infra/elastic-recheck: Add query for nova unit test bug 1291605  https://review.openstack.org/80087
2014-03-12T21:02:19  *** vkozhukalov has joined #openstack-infra
2014-03-12T21:04:30  *** rlandy_ has joined #openstack-infra
2014-03-12T21:05:02  *** rpodolyaka1 has quit IRC
2014-03-12T21:05:16  *** smarcet has joined #openstack-infra
2014-03-12T21:05:32  *** thuc has joined #openstack-infra
2014-03-12T21:05:36  *** gyee has quit IRC
2014-03-12T21:06:07  *** ociuhandu has joined #openstack-infra
2014-03-12T21:07:12  *** nati_ueno has quit IRC
2014-03-12T21:07:29  *** rlandy__ has quit IRC
2014-03-12T21:08:02  *** mburned_out is now known as mburned
2014-03-12T21:08:04  <openstackgerrit> Sean Dague proposed a change to openstack-infra/elastic-recheck: fix formatting on 'and'  https://review.openstack.org/80083
2014-03-12T21:08:05  <openstackgerrit> Sean Dague proposed a change to openstack-infra/elastic-recheck: only care about unclassifieds in gate queue  https://review.openstack.org/80066
2014-03-12T21:08:29  *** thuc__ has quit IRC
2014-03-12T21:08:58  *** nati_ueno has joined #openstack-infra
2014-03-12T21:09:04  *** rpodolyaka has joined #openstack-infra
2014-03-12T21:09:36  *** weshay has joined #openstack-infra
2014-03-12T21:11:33  *** dprince has quit IRC
2014-03-12T21:11:47  <mattoliverau> Morning
2014-03-12T21:11:52  *** mrodden has quit IRC
2014-03-12T21:12:34  *** mrodden has joined #openstack-infra
2014-03-12T21:13:06  *** rlandy__ has joined #openstack-infra
2014-03-12T21:13:41  *** jeckersb is now known as jeckersb_gone
2014-03-12T21:13:51  <jeblair> mattoliverau: good morning
2014-03-12T21:14:19  <openstackgerrit> Randy Coulman proposed a change to openstack-infra/jenkins-job-builder: Make email-ext's AlwaysTrigger the default.  https://review.openstack.org/79337
2014-03-12T21:14:43  *** denis_makogon_ has joined #openstack-infra
2014-03-12T21:15:31  *** rlandy_ has quit IRC
2014-03-12T21:16:37  *** e0ne has quit IRC
2014-03-12T21:17:02  *** dkranz has quit IRC
2014-03-12T21:17:17  *** e0ne has joined #openstack-infra
2014-03-12T21:19:13  <clarkb> nibalizer: huh it worked fine on my test machine
2014-03-12T21:19:36  *** rfolco has quit IRC
2014-03-12T21:19:57  <nibalizer> weird
2014-03-12T21:20:17  <clarkb> nibalizer: is there a reson for explicitly listing 1.0.0 in install_modules? is that so you can install puppetdb module without deps?
2014-03-12T21:20:27  <clarkb> I am going to give it a try with nodepool again
2014-03-12T21:20:33  *** mfer has quit IRC
2014-03-12T21:20:42  <clarkb> (I used the same region and base image and everything to test)
2014-03-12T21:20:52  *** nati_ueno has quit IRC
2014-03-12T21:21:44  *** denis_makogon_ is now known as denis_makogon
2014-03-12T21:23:15  *** zns has joined #openstack-infra
2014-03-12T21:23:25  <openstackgerrit> Matt Riedemann proposed a change to openstack-infra/elastic-recheck: Add query for nova unit test bug 1291620  https://review.openstack.org/80091
2014-03-12T21:23:36  *** hogepodge has quit IRC
2014-03-12T21:24:02  *** rlandy__ is now known as rlandy
2014-03-12T21:24:03  <clarkb> I will try a different provider too
2014-03-12T21:24:10  *** hogepodge has joined #openstack-infra
2014-03-12T21:25:27  <nibalizer> clarkb: no inifile can have any 1.x release
2014-03-12T21:25:38  <nibalizer> as far as puppetdb is concerned
2014-03-12T21:25:48  *** sweston has joined #openstack-infra
2014-03-12T21:26:07  <openstackgerrit> James E. Blair proposed a change to openstack-infra/config: Use unbound  https://review.openstack.org/80092
2014-03-12T21:26:17  <nibalizer> clarkb: you can bump inifile to 1.0.3 if that makes problems go away
2014-03-12T21:26:19  <clarkb> nibalizer: ok it just worked
2014-03-12T21:26:20  <openstackgerrit> Randy Coulman proposed a change to openstack-infra/jenkins-job-builder: Fix typo in ircbot's default matrix-notifier.  https://review.openstack.org/79328
2014-03-12T21:26:27  <clarkb> nibalizer: I think puppet forge may haev been cranky with us
2014-03-12T21:26:33  *** cody-somerville- has joined #openstack-infra
2014-03-12T21:26:35  <nibalizer> puppetdb just wants 1.something
2014-03-12T21:26:36  <nibalizer> https://github.com/puppetlabs/puppetlabs-puppetdb/blob/master/Modulefile
2014-03-12T21:26:38  *** jasondotstar has quit IRC
2014-03-12T21:26:48  <clarkb> nibalizer: so I think we are good, thank you
2014-03-12T21:26:56  <jeblair> clarkb, foobio, pleia2, mattoliverau: https://review.openstack.org/80092 could use some scrutiny as it has the capability to break everything.  everywhere.  all at once.  :)
2014-03-12T21:27:03  <clarkb> jeblair: looking
2014-03-12T21:27:05  <nibalizer> okay
2014-03-12T21:27:12  <clarkb> jeblair: is that the sort of thing we merge friday afternoon?
2014-03-12T21:27:25  <jeblair> clarkb: i'm thinking so.
2014-03-12T21:28:02  <jeblair> after some dry runs
2014-03-12T21:28:18  *** rcarrillocruz has joined #openstack-infra
2014-03-12T21:28:54  *** caleb_ has joined #openstack-infra
2014-03-12T21:29:02  *** caleb_ has quit IRC
2014-03-12T21:29:06  <openstackgerrit> A change was merged to openstack-infra/storyboard: Fill the last_login field  https://review.openstack.org/79887
2014-03-12T21:29:38  *** caleb_ has joined #openstack-infra
2014-03-12T21:29:42  *** caleb_ has quit IRC
2014-03-12T21:29:55  *** rcarrillocruz1 has quit IRC
2014-03-12T21:29:55  *** sweston has quit IRC
2014-03-12T21:30:08  *** sweston has joined #openstack-infra
2014-03-12T21:30:19  *** caleb_ has joined #openstack-infra
2014-03-12T21:30:47  *** caleb_ has quit IRC
2014-03-12T21:30:54  *** sweston has quit IRC
2014-03-12T21:31:10  *** sweston has joined #openstack-infra
2014-03-12T21:31:18  *** caleb_ has joined #openstack-infra
2014-03-12T21:33:02  *** nati_ueno has joined #openstack-infra
2014-03-12T21:35:06  <clarkb> jeblair: reviewed
2014-03-12T21:38:05  <openstackgerrit> Randy Coulman proposed a change to openstack-infra/jenkins-job-builder: Fix typo in ircbot's default matrix-notifier.  https://review.openstack.org/79328
2014-03-12T21:42:32  <openstackgerrit> Michael Krotscheck proposed a change to openstack-infra/storyboard: Logging in with a pre-existing user saves details  https://review.openstack.org/79705
2014-03-12T21:43:17  * clarkb wait for vmdk to finish downloading so that we can have new hpcloud region b image
2014-03-12T21:44:04  <clarkb> sdague: ^ about that
2014-03-12T21:44:14  *** thedodd has quit IRC
2014-03-12T21:44:17  <clarkb> sdague: I think the discussion yesterday was that anyone can have bigger images if they want them
2014-03-12T21:44:53  *** CaptTofu has quit IRC
2014-03-12T21:44:54  <sdague> clarkb: I think that whatever parses devstack should be smarter about that
2014-03-12T21:44:54  <clarkb> sdague: and we do download an ubuntu image. None of that takes forever
2014-03-12T21:44:58  <clarkb> the vmdk takes forever
2014-03-12T21:45:09  <sdague> because there is no reason that vmdk is in that image at all
2014-03-12T21:45:27  <clarkb> sdague: its there because devstack may useit
2014-03-12T21:45:30  *** mriedem has quit IRC
2014-03-12T21:45:31  <clarkb> because its in the devstack config
2014-03-12T21:45:53  <sdague> but you know which hypervisors you are going to support in that image
2014-03-12T21:46:03  <sdague> and all of those are hidden behind hypervisor ifs
2014-03-12T21:46:18  *** smarcet has left #openstack-infra
2014-03-12T21:46:18  <sdague> so instead of parsing that, eval it
2014-03-12T21:46:26  <openstackgerrit> A change was merged to openstack-infra/elastic-recheck: Add fingerprint for bug 1291440  https://review.openstack.org/80080
2014-03-12T21:46:28  <openstackgerrit> A change was merged to openstack-infra/elastic-recheck: Periodic purge of fixed and unseen bugs  https://review.openstack.org/80086
2014-03-12T21:46:41  <clarkb> sdague: the image creator can't eval it with a high degree of certainty about which case will be hit
2014-03-12T21:46:59  <clarkb> sdague: because we could xen or kvm cirros or ubuntu
2014-03-12T21:47:02  <openstackgerrit> A change was merged to openstack-infra/storyboard: Missing security decorators added  https://review.openstack.org/79895
2014-03-12T21:47:21  *** khyati has joined #openstack-infra
2014-03-12T21:47:48  <mark0n> I'm using gerrit for the first time. I submitted a patch and jenkins discovered a minor style issues. How am I supposed to resubmit? git commit --amend && git review or git commit && git review?
2014-03-12T21:47:48  <openstackgerrit> Michael Krotscheck proposed a change to openstack-infra/storyboard: Logging in with a pre-existing user saves details  https://review.openstack.org/79705
2014-03-12T21:48:03  *** thomasem has quit IRC
2014-03-12T21:48:12  <clarkb> mark0n: if you need to update a change you already pushed do git commit --amend && git review
2014-03-12T21:48:20  <clarkb> mark0n: git commit && git review will give you a second change
2014-03-12T21:48:55  <mark0n> clarkb: ok, thanks
2014-03-12T21:50:11  <mattoliverau> jeblair: looking now, sorry, had a lot of scroll back to read :)
2014-03-12T21:51:27  <jeblair> sdague: yeah, so i suggested mordred propose that change to spark a conversation about that...
2014-03-12T21:51:35  *** rlandy has quit IRC
2014-03-12T21:51:54  <jeblair> sdague: my understanding is that devstack has been shrinking to core functionality with good support for plugins/addons
2014-03-12T21:52:19  *** rpodolyaka has quit IRC
2014-03-12T21:52:35  <jeblair> sdague: so i thought with that in mind, it was worth considering whether vmware support is still something that should be in core
2014-03-12T21:52:52  <jeblair> sdague: or if it makes better sense as add-ons
2014-03-12T21:53:26  <sdague> jeblair: so that's probably a can of worms in politics that will take us a while to get there
2014-03-12T21:53:32  <sdague> because it's an in tree driver for nova
2014-03-12T21:53:41  <sdague> which is fair game
2014-03-12T21:54:10  <sdague> clarkb: and I disagree with the high degree of certainty issue
2014-03-12T21:54:27  <clarkb> sdague: how can nodepool image builder know if it needs cirros or ubunut image or xen
2014-03-12T21:54:30  <sdague> http://paste.openstack.org/show/73317/
2014-03-12T21:54:31  <clarkb> sdague: it can't
2014-03-12T21:54:43  *** fifieldt has joined #openstack-infra
2014-03-12T21:54:51  <clarkb> the distinguishing features between cases aren't strong enough
2014-03-12T21:54:57  <sdague> you should have a config for nodepool to decide what hypervisor list you want to support
2014-03-12T21:55:03  <sdague> and just drop vmware from that list
2014-03-12T21:55:25  <clarkb> whcih means we need to udpate devstack-gate anytime you want a new hypervisor
2014-03-12T21:55:32  <clarkb> which we don't need today
2014-03-12T21:55:39  <sdague> sure
2014-03-12T21:55:46  <jeblair> clarkb: not devstack-gate, nodepool config
2014-03-12T21:55:53  <clarkb> jeblair: oh right this is nodepool config now
2014-03-12T21:55:59  <clarkb> I am thinking of the old thing
2014-03-12T21:56:00  <sdague> but your alternative is to impose policy into devstack because you don't want something in the gate
2014-03-12T21:56:05  <sdague> which I think is the wrong thing
2014-03-12T21:56:07  <jeblair> sdague: whoah whoah
2014-03-12T21:56:12  <jeblair> sdague: no one is imposing policy
2014-03-12T21:56:19  *** dkliban has quit IRC
2014-03-12T21:56:47  *** rpodolyaka has joined #openstack-infra
2014-03-12T21:57:35  <sdague> I really think it should be fine for nodepool to decide the list of hypervisors it's going to support and eval devstack to get all those images. Then the vmware thing won't impact things.
2014-03-12T21:57:49  <sdague> or whatever part of infra wants to make that decision
2014-03-12T21:58:36  <jeblair> sdague: we're just having a discussion about where the configuration of this kind of environment belongs in the developer deployment tool...
2014-03-12T21:58:43  <openstackgerrit> Martin Konrad proposed a change to openstack-infra/jenkins-job-builder: SCM module: Add support for multiple Git remotes.  https://review.openstack.org/80084
2014-03-12T21:58:48  <sdague> sure
2014-03-12T21:59:04  <jeblair> sdague: mordred suggested that we just ignore the vmdk
2014-03-12T21:59:12  *** rossella_s has quit IRC
2014-03-12T21:59:17  <sdague> I strongly believe that having a functional base image for your hypervisor that you installed is an important starting point
2014-03-12T21:59:19  <jeblair> sdague: i said i thought it would be nice if we actually talked to some devstack developers about it before we just worked around the problem
2014-03-12T21:59:30  <sdague> honestly I think devstack should provide more of those
2014-03-12T21:59:39  <jeblair> sdague: i'm starting to regret that now that i've been accused of trying to 'impose policy'
2014-03-12T22:00:00  <sdague> jeblair: ok, well mordred's patch was basically delete the vmdk because it's slow :)
2014-03-12T22:00:18  <sdague> which is what I heard from clarkb as well
2014-03-12T22:00:24  <sdague> so maybe I misheard
2014-03-12T22:00:40  <mordred> sdague: two different patches
2014-03-12T22:00:54  <mordred> sdague: I made a patch to devstack which was "delete the ref to the vmdk" - and I did that to start the discussion
2014-03-12T22:01:10  <mordred> sdague: I also made a patch to devstack-gate which trims the vmdk out of the list of images we pre-download
2014-03-12T22:01:22  <mordred> sdague: which would work, but puts more not less logic in d-g
2014-03-12T22:01:31  <clarkb> mordred: nodepool
2014-03-12T22:01:36  <mordred> clarkb: yah
2014-03-12T22:01:50  <clarkb> mordred: I keep confusingthem too because d-g was the cacher. One day I will remember
2014-03-12T22:02:02  <mordred> sdague: my view, fwiw, is that if it's not tested, it's broken - and we don't test the vmdk in the gate, so I dont' know why it's in devstack
2014-03-12T22:02:07  <lifeless> finally!
2014-03-12T22:02:08  <lifeless> Cloud Images is currently in Limited Availability. It will allow you to import properly prepared images. We expect to open it to all customers before the end of March.
2014-03-12T22:02:11  <lifeless> You can take a look at the FAQ to see exactly what’s coming: http://www.rackspace.com/knowledge_center/article/frequently-asked-questions-about-using-glance-and-the-images-api
2014-03-12T22:02:22  <mordred> lifeless: yup. excited about that
2014-03-12T22:02:41  *** jhesketh__ has joined #openstack-infra
2014-03-12T22:02:49  *** jhesketh__ has quit IRC
2014-03-12T22:02:53  *** jhesketh_ has joined #openstack-infra
2014-03-12T22:03:04  *** jhesketh__ has joined #openstack-infra
2014-03-12T22:03:05  *** jhesketh_ has quit IRC
2014-03-12T22:03:06  *** rpodolyaka has quit IRC
2014-03-12T22:03:17  *** jhesketh has joined #openstack-infra
2014-03-12T22:03:24  <jhesketh__> Morning
2014-03-12T22:03:42  <mordred> mornign jhesketh__
2014-03-12T22:04:12  *** mwagner_lap has quit IRC
2014-03-12T22:04:49  *** zul has joined #openstack-infra
2014-03-12T22:04:52  <clarkb> sdague: we noticed the thing because it is slow to cache
2014-03-12T22:05:07  <clarkb> I think more than half our image build time is downloadingthat image
2014-03-12T22:05:16  *** zul has quit IRC
2014-03-12T22:06:08  <clarkb> not saying you can't have large images. (and the ubuntu image is evidence of that unless I am missing something)
2014-03-12T22:07:51  <jeblair> why is it a different image in the first place?
2014-03-12T22:08:26  <jeblair> i mean, can you not run cirros on esx?
2014-03-12T22:09:07  <jeblair> (and sure, if you want to have a full os instead of cirros that's fine -- couldn't you run the same full os on kvm and esx?)
2014-03-12T22:09:13  <mtreinish> foobio, clarkb, jeblair: have you guys seen this before?: http://logs.openstack.org/72/79572/1/check/gate-tempest-python27/f099c44/console.html#_2014-03-11_10_02_35_372
2014-03-12T22:09:58  <jeblair> mtreinish: unit tests aren't allowed to sudo
2014-03-12T22:10:04  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/elastic-recheck: If not posting IRC comment for unrecognized error, log something  https://review.openstack.org/78801
2014-03-12T22:10:05  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/elastic-recheck: Make IRC bot list which failures were seen in which job.  https://review.openstack.org/78790
2014-03-12T22:10:10  <jogo> mtreinish: this was for you ^
2014-03-12T22:10:41  *** rpodolyaka has joined #openstack-infra
2014-03-12T22:12:50  <mtreinish> jeblair: ahh ok, I missed that the proposed patch was actually trying to run something with sudo instead of mocking it
2014-03-12T22:12:57  * mtreinish leaves a -1 comment
2014-03-12T22:13:04  <jeblair> mtreinish: yay the system works! :)
2014-03-12T22:13:46  <mtreinish> jogo: it was't my thing I was fine without the tests. I was just trying to get mriedman to stand up for himself :)
2014-03-12T22:14:07  *** maxbit has joined #openstack-infra
2014-03-12T22:15:09  *** rcleere has quit IRC
2014-03-12T22:15:28  <clarkb> how do we feel about merging mordred nodepool change? (I am still waiting for this new image, makes it really hard to iterate on this stuff)
2014-03-12T22:15:54  <clarkb> I don't understand if garyk is saying they are using nodepool or only devstack
2014-03-12T22:15:57  <jogo> mtreinish: well it was a valid point, that code needed tests
2014-03-12T22:16:43  <mtreinish> jogo: yeah but we've kind of just ignored it for most things in the past
2014-03-12T22:17:10  <jogo> mtreinish: heh i noticed
2014-03-12T22:17:50  <jeblair> clarkb: wfm
2014-03-12T22:18:38  *** lcostantino has quit IRC
2014-03-12T22:19:21  <sdague> sorry, got pulled away
2014-03-12T22:19:22  <clarkb> jeblair: were you able to parse garyk's statement? I can't tell if the nodepool change will breka him or not
2014-03-12T22:19:49  <sdague> mordred: I think it's in devstack because the vmware system does test it
2014-03-12T22:19:53  <sdague> in their CI
2014-03-12T22:20:06  <sdague> we can confirm and call them on that
2014-03-12T22:20:06  <mordred> sdague: do they use devstack in their CI?
2014-03-12T22:20:14  <sdague> for nova, probably
2014-03-12T22:20:37  *** aysyd has quit IRC
2014-03-12T22:20:48  <sdague> I know the hyperv guys do
2014-03-12T22:20:57  <mordred> ok. then  I can buy it being decently valid - and I'd vote for us filtering in d-g - since they are one of the first ones who stepped up to the 3rd party gate strongly
2014-03-12T22:21:27  <mordred> if it was "a dev might want to do vmware stuff" my opinion is different
2014-03-12T22:21:41  <sdague> mordred: ok, fair.
2014-03-12T22:22:34  <clarkb> is garyk usually on irc? /me would like to clarify comment on https://review.openstack.org/#/c/79537/1 before approving
2014-03-12T22:22:58  *** yassine has joined #openstack-infra
2014-03-12T22:23:19  <sdague> so I guess it begs a second question, which is I'd like to add fedora20 and ubuntu(something) cloud images into devstack to make it more useful to people for dev (as that's one of the first things I add)
2014-03-12T22:23:44  <sdague> so we should figure out if that's going to cause issues here, or if there is some other way we want to mark the images
2014-03-12T22:23:56  <clarkb> sdague: I don't think it is going to cause issues. see my earlier statements
2014-03-12T22:24:00  <sdague> ok
2014-03-12T22:24:00  <clarkb> the existing ubuntu image is fine
2014-03-12T22:24:24  <sdague> the lxc one?
2014-03-12T22:24:26  *** lukego has quit IRC
2014-03-12T22:24:28  <clarkb> openvz
2014-03-12T22:24:30  <sdague> ok
2014-03-12T22:24:46  <sdague> now, openvz, that I could get behind deleting entirely :)
2014-03-12T22:24:50  <clarkb> ++
2014-03-12T22:24:56  <sdague> because, no one is using it in the gate
2014-03-12T22:25:06  <sdague> but we'll wait until the docker drop
2014-03-12T22:25:07  *** e0ne has quit IRC
2014-03-12T22:25:27  *** maxbit_ has joined #openstack-infra
2014-03-12T22:25:31  *** e0ne has joined #openstack-infra
2014-03-12T22:25:35  *** e0ne has quit IRC
2014-03-12T22:26:01  *** jgrimm has quit IRC
2014-03-12T22:26:09  <clarkb> ermagherd
2014-03-12T22:26:13  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/elastic-recheck: If not posting IRC comment for unrecognized error, log something  https://review.openstack.org/78801
2014-03-12T22:26:20  <clarkb> the image cacher is downloading the same image over and over
2014-03-12T22:26:25  <sdague> hah
2014-03-12T22:26:36  * clarkb looks at fixing that
2014-03-12T22:27:14  <sdague> so, I do think it is probably worth while to figure out why vmware needs a custom image. I will put that on a list, because I'd really like to get us to people pulling fairly standard upstream cloud images (fedora and ubuntu)
2014-03-12T22:27:19  <sdague> as that seems more useful
2014-03-12T22:27:29  *** mgagne has quit IRC
2014-03-12T22:27:30  <clarkb> ++
2014-03-12T22:28:46  *** rpodolyaka has quit IRC
2014-03-12T22:29:25  <sdague> clarkb: do you have the vmware bot id ?
2014-03-12T22:29:34  <sdague> so I could find some runs in gerrit to confirm what they are doing
2014-03-12T22:30:17  *** rpodolyaka has joined #openstack-infra
2014-03-12T22:30:28  <mordred> clarkb, sdague how about we figure out a way to flag images that the gate doesn't need to download some how?
2014-03-12T22:30:59  *** harlowja has quit IRC
2014-03-12T22:31:00  <jgriffith> foobio: that wasn't nice BTW :)
2014-03-12T22:31:06  <sdague> mordred: right, well I was thinking about that in terms of evaling with hypervisor
2014-03-12T22:31:19  *** harlowja has joined #openstack-infra
2014-03-12T22:31:27  <jgriffith> foobio: re the comment about "most deserving of it's ire"
2014-03-12T22:31:40  <sdague> mordred: http://paste.openstack.org/show/73317/
2014-03-12T22:31:51  <sdague> every image add in devstack is behind some conditional
2014-03-12T22:32:06  <sdague> so if you just set those conditionals, you could eval out all the images
2014-03-12T22:32:22  <jeblair> sdague: keep in mind that we have to do this for every branch of devstack, so we need a fairly stable api
2014-03-12T22:32:32  <sdague> jeblair: that's been pretty stable
2014-03-12T22:32:40  <sdague> VIRT_DRIVER has been there forever
2014-03-12T22:33:06  <jeblair> sdague: yeah, but 'functions' hasn't
2014-03-12T22:33:07  <sdague> we'll make sure to make it more stable if we know it's something that will be externally called. I don't have an issue with that
2014-03-12T22:33:21  <jeblair> sdague: cool
2014-03-12T22:33:25  <sdague> jeblair: sure, well we could also provide the script in devstack
2014-03-12T22:33:33  <mordred> hell - I'd say we just do that snippet above ^^
2014-03-12T22:33:45  <mordred> and just do it for libvirt - since d-g doesn't do xenserver either
2014-03-12T22:34:06  <clarkb> mordred: no
2014-03-12T22:34:07  <sdague> mordred: yeh, that was my suggestion. There is probably one other variable for heat that's needed as well
2014-03-12T22:34:11  <mordred> and as soon as d-g does xenserver or lxc or anything else, we can add a thing to VIRT_DRIVERS
2014-03-12T22:34:13  <jeblair> mordred: not yet; it might possibly could, and actually that could get a lot easier with glance
2014-03-12T22:34:19  <mordred> yah
2014-03-12T22:34:23  <clarkb> I don't like it I don't want to update nodepool each time we need a new hypervisor
2014-03-12T22:34:23  <jeblair> there are people working on that
2014-03-12T22:34:26  <mordred> but as long as it's just a list
2014-03-12T22:34:28  <clarkb> docker, xen, etc are all waiting
2014-03-12T22:34:36  <clarkb> and if they have to wait for new images thats a huge delay
2014-03-12T22:34:43  <mordred> jeblair: I'm quite excited about glance
2014-03-12T22:34:44  <clarkb> if we can just download some sane images then we are set
2014-03-12T22:34:47  <sdague> jeblair: so what if we provided a devstack tool that let you declare a list of hypervisors you care about on the command line
2014-03-12T22:34:58  <sdague> and it dumps image urls yuo need
2014-03-12T22:35:07  <jeblair> sdague: and make that tool name/command like argument the stable api?
2014-03-12T22:35:11  <sdague> instead of the parser, which I know I broke you guys
2014-03-12T22:35:13  <sdague> jeblair: yep
2014-03-12T22:35:18  <mordred> ++
2014-03-12T22:35:25  <jeblair> sdague: sounds lovely if we can get clarkb on board with the idea :)
2014-03-12T22:35:29  <sdague> we'll put it in devstack and backport it
2014-03-12T22:35:31  <clarkb> that still requires a huge turn around delay on getting support for new stuff
2014-03-12T22:35:34  <mordred> clarkb: what don't you like it?
2014-03-12T22:35:47  <sdague> so, I've got something else which will make clarkb happy immediately
2014-03-12T22:35:48  <clarkb> mordred: beacuse you are talking days of waiting, get image in devstack, get nodepool to update, wait for images
2014-03-12T22:35:58  *** jergerber has joined #openstack-infra
2014-03-12T22:36:03  <jeblair> clarkb: it's worth noting that devstack does work with a cache miss in this system
2014-03-12T22:36:06  <sdague> turns out vmware doesn't use this image in their CI - http://208.91.1.172/logs/77736/5/console.txt
2014-03-12T22:36:06  <clarkb> with the current system docker/xen/whoever could just start doing stuff
2014-03-12T22:36:14  <sdague> they use a cirros image from the same url
2014-03-12T22:36:18  <sdague> which will be tons smaller
2014-03-12T22:36:31  <mordred> clarkb: what?
2014-03-12T22:36:42  <mordred> clarkb: I'm not trying to troll - I am not following what you are talking about at all
2014-03-12T22:36:45  <jeblair> clarkb: so you can actually start doing your devstack work etc before updating the image cacher to add your hypervisor
2014-03-12T22:36:59  <clarkb> jeblair: with a potentially massive delay as we are seeing
2014-03-12T22:37:04  <jeblair> clarkb: and, tbh, in 3 years we still haven't added a hypervisor.
2014-03-12T22:37:10  <clarkb> jeblair: thats fair
2014-03-12T22:37:16  <clarkb> jeblair: but, docker and xen are wanting to
2014-03-12T22:37:21  <clarkb> and I expect them to in juno
2014-03-12T22:37:45  <jeblair> clarkb: we could go ahead and put them in our initial list
2014-03-12T22:39:00  <sdague> clarkb: https://review.openstack.org/80101
2014-03-12T22:39:15  *** malini is now known as malini_afk
2014-03-12T22:39:26  <sdague> so that will make you immediately more happy.
2014-03-12T22:39:43  <jeblair> clarkb: moreover, with glance we might end up having 'devstack-foo-xen' 'devstack-foo-kvm' images anyway, with the nodepool scripts having a bit more knowledge of hypervisors...
2014-03-12T22:40:25  *** jamielennox|away is now known as jamielennox
2014-03-12T22:41:12  <sdague> ok, so I need to run away. if we want a tool in devstack that takes hypervisors and spits out images, I am happy to do that
2014-03-12T22:41:23  *** jergerber has quit IRC
2014-03-12T22:41:28  <sdague> but I'll let folks decide
2014-03-12T22:41:44  <sdague> regardless we should be able to fix the giant debian image issue in the short term
2014-03-12T22:41:50  <sdague> per patch above
2014-03-12T22:42:32  <openstackgerrit> Clark Boylan proposed a change to openstack-infra/config: Download each cached image once.  https://review.openstack.org/80102
2014-03-12T22:42:36  <clarkb> jeblair: mordred ^ you will like that
2014-03-12T22:43:44  <clarkb> and I think that fixes a majority of the problem here
2014-03-12T22:45:32  <sdague> clarkb: well dtroyer just approved the switch to cirros as well
2014-03-12T22:45:36  <sdague> so that will also help
2014-03-12T22:45:40  <clarkb> woot
2014-03-12T22:45:44  *** MarkAtwood has quit IRC
2014-03-12T22:45:51  <sdague> ok, running away for real, have a good night
2014-03-12T22:46:13  *** sarob__ has joined #openstack-infra
2014-03-12T22:46:57  *** Daviey has quit IRC
2014-03-12T22:47:22  *** Sukhdev has quit IRC
2014-03-12T22:47:45  *** changbl has joined #openstack-infra
2014-03-12T22:48:45  *** mrodden has quit IRC
2014-03-12T22:49:13  *** sarob has quit IRC
2014-03-12T22:50:55  *** sarob__ has quit IRC
2014-03-12T22:51:45  *** emagana has quit IRC
2014-03-12T22:53:23  *** hogepodge has quit IRC
2014-03-12T22:53:51  *** MarkAtwood has joined #openstack-infra
2014-03-12T22:55:13  <openstackgerrit> James E. Blair proposed a change to openstack-infra/config: Use unbound  https://review.openstack.org/80092
2014-03-12T22:55:16  <clarkb> jeblair: mordred foobio SergeyLukjanov I held 15.126.230.111 it booted off of the hpcloud-region-b image. It came up with 8GB of RAM and no non standard apt lists
2014-03-12T22:55:31  <clarkb> figured I would give folks an opportunity to take a look but it seems happy
2014-03-12T22:55:50  <jeblair> clarkb, pleia2, mattoliverau: ^ i responded to your comments; maybe we should have further discussion here?
2014-03-12T22:55:58  <clarkb> jeblair: let me look
2014-03-12T22:56:07  *** alex-out is now known as Alexandra
2014-03-12T22:56:27  <jeblair> oh, i guess gerrit doesn't order those things...
2014-03-12T22:56:47  *** Daviey has joined #openstack-infra
2014-03-12T22:57:04  <jeblair> um, let me know if you have trouble matching my response to your comment.  :)
2014-03-12T22:57:35  <clarkb> jeblair: for the centos thing, puppet will set resolve.conf to 127.0.0.1
2014-03-12T22:57:42  <mordred> clarkb: woot
2014-03-12T22:57:59  <jeblair> clarkb: my response to you was "I tested this on a centos node. Can you point me at where you're talking about?"
2014-03-12T22:58:01  <clarkb> jeblair: then the nodepool script addition will run and make the unbound talk to localhost instead of external resolver
2014-03-12T22:58:23  <jeblair> clarkb: oh, you're talking about my own change...
2014-03-12T22:58:27  <jeblair> that makes sense.  :)
2014-03-12T22:58:39  <clarkb> jeblair: https://review.openstack.org/#/c/80092/1/modules/unbound/manifests/init.pp line 50
2014-03-12T22:58:53  <clarkb> yup
2014-03-12T22:58:58  *** _sweston_ has joined #openstack-infra
2014-03-12T22:59:41  <openstackgerrit> James E. Blair proposed a change to openstack-infra/config: Use unbound  https://review.openstack.org/80092
2014-03-12T22:59:49  <jeblair> clarkb: thank you, that was a very nice "doh!" catch.  :)
2014-03-12T22:59:59  *** sweston has quit IRC
2014-03-12T23:00:30  <clarkb> np
2014-03-12T23:00:45  <openstackgerrit> Tom Fifield proposed a change to openstack-infra/config: Enable Welcome Message to post review comments  https://review.openstack.org/80111
2014-03-12T23:00:47  <jeblair> clarkb: so as to your suggestion about getting a list of nameservers... where should we get them?
2014-03-12T23:00:54  <jeblair> mattoliverau: ^ goes to your comment too...
2014-03-12T23:01:05  <clarkb> now the other thing to worry about
2014-03-12T23:01:15  <clarkb> will dhcp update the nameserver for us?
2014-03-12T23:01:30  <jeblair> clarkb: what dhcp?
2014-03-12T23:01:33  <clarkb> because that would be annoying
2014-03-12T23:01:43  <clarkb> jeblair: the dhcp run by the cloud provider to set things when VMs come up
2014-03-12T23:01:59  <clarkb> iirc nova has a really low lease time so we would be picking up new leases at least a few times during a test
2014-03-12T23:02:08  <openstackgerrit> A change was merged to openstack-infra/config: Download each cached image once.  https://review.openstack.org/80102
2014-03-12T23:02:19  *** dims_ has quit IRC
2014-03-12T23:02:19  <clarkb> jeblair: this is easy to test, I will change the nameserver on one of my hpcloud instances
2014-03-12T23:02:36  <clarkb> then wait and see if a new lease updates it (can rpobably also look in /var/log/dhclient/leases*
2014-03-12T23:02:50  <jeblair> clarkb: well, rackspace writes /etc/network/interfaces
2014-03-12T23:02:56  <jeblair> clarkb: and uses a static config
2014-03-12T23:03:01  <clarkb> huh no dhclient, maybe that is how hpcloud does it too
2014-03-12T23:03:25  *** hogepodge has joined #openstack-infra
2014-03-12T23:03:25  <clarkb> ah /var/lib
2014-03-12T23:03:26  *** adalbas has quit IRC
2014-03-12T23:03:39  <jeblair> clarkb: ?
2014-03-12T23:03:54  <clarkb> jeblair: option domain-name-servers 8.8.4.4,8.8.8.8; is set in the hpcloud lease
2014-03-12T23:04:25  <clarkb> jeblair: we can do something to ignore that option. I am trying to remember what; haven't had to do it in years
2014-03-12T23:04:43  *** melwitt has quit IRC
2014-03-12T23:04:51  <jeblair> clarkb: so hpcloud does run dhclient?
2014-03-12T23:05:08  <clarkb> option dhcp-rebinding-time 151200; is not as short as I thought it may be
2014-03-12T23:05:13  *** mark0n has quit IRC
2014-03-12T23:05:14  <clarkb> jeblair: yup
2014-03-12T23:05:21  <jeblair> clarkb: also, hpcloud uses google for their dns servers ?!?!?!
2014-03-12T23:05:21  <pleia2> jeblair: so I just manually edited /etc/resolv.conf on an hpcloud ubuntu instance, when I rebooted it had reset back to the old one
2014-03-12T23:05:29  <clarkb> jeblair: apparently
2014-03-12T23:05:36  <clarkb> pleia2: ya because dhcp
2014-03-12T23:05:44  <clarkb> pleia2: check your leases in /var/lib/dhcp/
2014-03-12T23:05:50  <pleia2> yep, as I mentioned in my comment
2014-03-12T23:06:14  <jeblair> pleia2: your comment was about a bit of code that didn't write to /etc/resolv.conf
2014-03-12T23:06:53  <jeblair> pleia2: nothing i did in that patch writes to /etc/resolv.conf on ubuntu
2014-03-12T23:06:56  *** atiwari has quit IRC
2014-03-12T23:07:19  <jeblair> pleia2: instead, unbound tells resolvconf about itself and so resolvconf writes /etc/resolv.conf with the localhost value
2014-03-12T23:07:22  <pleia2> jeblair: oh, ugh, I misread :(
2014-03-12T23:07:51  <pleia2> yeah
2014-03-12T23:08:15  <clarkb> jeblair: /etc/dhcp/dhclient-enter-hooks.d/resolvconf pushes this information to resolvconf. So resolvconf may do the right thing if unbound wins over dhcp
2014-03-12T23:08:24  <clarkb> which honestly I think dhcp should win in a properly designed env
2014-03-12T23:08:24  *** maxbit_ has quit IRC
2014-03-12T23:08:47  <jeblair> clarkb: you think dhcp should override a locally configured resolver?
2014-03-12T23:08:58  <jeblair> clarkb: i strongly disagree
2014-03-12T23:09:00  <clarkb> jeblair: yes, because dhcp's job is to configure stuff
2014-03-12T23:09:10  <jeblair> clarkb: dhcp doesn't have the right context to make that decision
2014-03-12T23:09:12  *** maxbit has quit IRC
2014-03-12T23:09:15  <clarkb> you start having rogue devices otherwise
2014-03-12T23:09:24  <clarkb> jeblair: sure it does, you control dhcp server and clients
2014-03-12T23:09:26  *** mriedem has joined #openstack-infra
2014-03-12T23:09:26  <clarkb> usually
2014-03-12T23:09:30  <jeblair> clarkb: if a sysadmin installs a local recursive resolver, it _clearly_ should be used
2014-03-12T23:09:42  <jeblair> clarkb: you may not have noticed that we do not control the dhcp server
2014-03-12T23:09:52  <jeblair> clarkb: and the people who do are making really bad decisions about dns
2014-03-12T23:09:52  <clarkb> jeblair: right hence my comment about proper env
2014-03-12T23:09:55  <clarkb> cloud is special
2014-03-12T23:10:10  <jeblair> so, anyway... back to getting this working
2014-03-12T23:10:28  <jeblair> clarkb: when i look at an hpcloud centos node, i see nameserver 10.6.0.1 in resolv.conf
2014-03-12T23:10:30  *** mrodden has joined #openstack-infra
2014-03-12T23:10:32  <clarkb> jeblair: I can isntall unbound on my test box and reboot it to see what happens
2014-03-12T23:10:46  <jeblair> clarkb: that does not seem to equal 8.8.8.8
2014-03-12T23:10:50  <clarkb> jeblair: right I think the lease time is long enough we will only see trouble at boot
2014-03-12T23:11:36  <jeblair> clarkb: i'm not following
2014-03-12T23:11:52  *** nati_ueno has quit IRC
2014-03-12T23:12:00  <clarkb> jeblair: when we boot off of the image you have made with that nameserver, it will ask for a dhcp lease
2014-03-12T23:12:09  <clarkb> if resolvconf lets dhcp win then we have a problem
2014-03-12T23:12:13  <jeblair> clarkb: if you see 8.8.8.8 in the lease and i see 10.6.0.1 in resolv.conf, that suggests to me that resolv.conf is not affected by dhcp at all :/
2014-03-12T23:12:21  *** nati_ueno has joined #openstack-infra
2014-03-12T23:12:29  <clarkb> jeblair: but have you rebooted that machine
2014-03-12T23:12:40  <jeblair> clarkb: i'm not talking about an image with any of the new unbound stuff
2014-03-12T23:12:45  <jeblair> clarkb: i'm just talking about what we have now
2014-03-12T23:12:47  <clarkb> oh
2014-03-12T23:12:49  <clarkb> huh
2014-03-12T23:13:13  *** melwitt has joined #openstack-infra
2014-03-12T23:13:13  <clarkb> jeblair: my resolv.conf is google
2014-03-12T23:13:22  <clarkb> this is a node in hpcloud-region-b
2014-03-12T23:13:34  <jeblair> clarkb: oh i used azx
2014-03-12T23:14:04  <jeblair> i can't tell you how excited i am that we have 6 combinations to test.
2014-03-12T23:14:52  <jeblair> clarkb: is dhclient running on your region b node?
2014-03-12T23:15:06  <clarkb> jeblair: yes
2014-03-12T23:15:31  * clarkb sets to dyndns and reboots
2014-03-12T23:16:06  *** dims_ has joined #openstack-infra
2014-03-12T23:17:10  <clarkb> jeblair: yup dhcp reset my nameserver. Now I am going to try unbound
2014-03-12T23:17:12  <jeblair> okay, so it seems like hpcloud has dhclient running in both clouds, and sends 10.6.0.1 in old and google in new.
2014-03-12T23:18:33  <jeblair> clarkb: the answer is probably different with centos and ubuntu too -- there's a chance resolvconf will do the right thing and leave it on ubuntu; but i'm assuming dhclient writes resolv.conf directly on hpcloud centos.
2014-03-12T23:18:46  <foobio> jgriffith: cinder isn't deserving my *my* ire at all! i can't help if some irc bot decides to take out a vendetta ;)
2014-03-12T23:19:07  <jeblair> i <3 cinder
2014-03-12T23:19:20  <foobio> jeblair: clarkb: most dhcp clients allow you to configure which options to request, which options to ignore, and which list options you might want to apprend/prepend to
2014-03-12T23:20:05  <foobio> i will just about guarantee i can find you a config option to let you override the dhcp-suggested resolver list
2014-03-12T23:20:17  <jeblair> foobio: yeah, it seems like we might need to reconfigure dhclient on hpcloud, and do nothing on raxspace (which uses static config)
2014-03-12T23:20:18  * foobio looks to see which client hpcloud is installing
2014-03-12T23:20:49  <jeblair> /sbin/dhclient -1 -q -cf /etc/dhcp/dhclient-eth0.conf -lf /var/lib/dhclient/dhclient-eth0.leases -pf /var/run/dhclient-eth0.pid eth0
2014-03-12T23:20:58  <clarkb> foobio: yes I know I was suggesting we do that
2014-03-12T23:21:08  <jeblair> dhclient3 -e IF_METRIC=100 -pf /var/run/dhclient.eth0.pid -lf /var/lib/dhcp/dhclient.eth0.leases -1 eth0
2014-03-12T23:21:09  <foobio> oh, that's what i get for skimmingh
2014-03-12T23:21:12  <foobio> skimming
2014-03-12T23:21:17  <jeblair> centos and ubuntu, respectively
2014-03-12T23:21:24  <clarkb> I have unbound resolving on my test box
2014-03-12T23:21:31  <clarkb> rebooting now to see what happens to resolv.conf
2014-03-12T23:21:37  *** atiwari has joined #openstack-infra
2014-03-12T23:22:07  <clarkb> jeblair: looks like unbound won on precise hpcloud
2014-03-12T23:23:11  <jeblair> yeah, so i think we're set on precise everywhere thanks to resolvconf.  i never thought i'd say that.
2014-03-12T23:23:19  *** yassine has quit IRC
2014-03-12T23:23:37  <jeblair> then on rax-centos, we just write /etc/resolv.conf, and on hpcloud-centos, we reconfigure dhclient?
2014-03-12T23:24:02  <clarkb> jeblair: should be safe to reconfigure dhclient on all nodes and not think to hard about it
2014-03-12T23:24:20  <clarkb> not sure if we want to be specific or not if one node type doesn't deal with this properly
2014-03-12T23:24:33  *** gyee has joined #openstack-infra
2014-03-12T23:24:38  <jeblair> clarkb: would be good to avoid it since currently puppet has no idea if we're on hpcloud or rax.
2014-03-12T23:24:45  <foobio> dhclient-4.1.1-38.P1.el6.centos.x86_64 on centos6, config is in /etc/dhcp/dhclient-eth0.conf with a /etc/dhcp/dhclient.d run-parts dir
2014-03-12T23:24:46  *** atiwari has quit IRC
2014-03-12T23:25:32  <jeblair> foobio, clarkb: that same version is also installed on rax
2014-03-12T23:26:05  <jeblair> clarkb: so yeah, seems like the idea of 'just reconfigure dhclient everywhere' should work
2014-03-12T23:26:29  <jeblair> or at least, for all centos
2014-03-12T23:26:32  <clarkb> ya
2014-03-12T23:26:33  *** wchrisj has quit IRC
2014-03-12T23:27:19  <foobio> isc-dhcp-client on precise with /etc/dhcp/dhclient.conf and dhclient-enter-hooks.d and dhclient-exit-hooks.dm run-parts dirs
2014-03-12T23:27:57  <foobio> we want to 'prepend domain-name-servers 127.0.0.1;'
2014-03-12T23:28:06  *** sweston has joined #openstack-infra
2014-03-12T23:28:21  <foobio> at least that's what i've usually done with dhclient
2014-03-12T23:28:37  <jeblair> foobio: i'd like the other servers not to show up at all, is that possible?
2014-03-12T23:28:44  <foobio> precise has a commented-out example of that in the conffile
2014-03-12T23:28:51  <jeblair> (rather than prepend)
2014-03-12T23:29:18  <foobio> jeblair, pretty sure that's 'supersede domain-name-servers 127.0.0.1;' then
2014-03-12T23:29:59  *** _sweston_ has quit IRC
2014-03-12T23:30:06  <foobio> gotta love the twenty-five-cent words the dhclient maintainers decided on for their config options
2014-03-12T23:30:27  <jeblair> i'm going broke
2014-03-12T23:30:31  *** dcramer__ has quit IRC
2014-03-12T23:31:00  * foobio spent all his twenty-five cent words on cheap booze
2014-03-12T23:31:13  <jeblair> foobio, clarkb: do we need to append that to /etc/dhcp/dhclient-eth0.conf ?
2014-03-12T23:32:16  *** denis_makogon has quit IRC
2014-03-12T23:32:16  <foobio> that should work fine. anywhere in the global scope, just not inside other config scope blocks like lease{}; or alias{};
2014-03-12T23:32:26  *** maxbit has joined #openstack-infra
2014-03-12T23:32:30  <jeblair> send vendor-class-identifier "anaconda-Linux 2.6.32-431.el6.x86_64 x86_64";
2014-03-12T23:32:31  <jeblair> timeout 45;
2014-03-12T23:32:36  *** mbacchi has quit IRC
2014-03-12T23:32:38  <jeblair> that's the entirety of the existing config ^
2014-03-12T23:32:54  <jeblair> different numbers on rax v hpcloud...
2014-03-12T23:33:05  *** maxbit_ has joined #openstack-infra
2014-03-12T23:33:07  <jeblair> i'm not sure what we should do with puppet in that case?
2014-03-12T23:33:08  <foobio> yeah, the centos one is wonderfully terse. the precise one has a lot more to ir
2014-03-12T23:33:11  <foobio> to it
2014-03-12T23:33:18  <clarkb> jeblair: dump a file in the .d dir?
2014-03-12T23:33:30  <clarkb> with one line overriding nameservers?
2014-03-12T23:33:36  <foobio> for centos there's just the one run-parts dir so that ought to work
2014-03-12T23:33:47  <jeblair> i thought that just ran scripts
2014-03-12T23:33:51  <jeblair> i didn't think it was included config
2014-03-12T23:34:05  <foobio> oh, wait. looking at the ntp example there...
2014-03-12T23:34:05  <jeblair> dhclient.d/ntp.sh
2014-03-12T23:34:12  <foobio> yep, script
2014-03-12T23:34:20  <foobio> so we do need to append to the config
2014-03-12T23:34:38  <clarkb> ah
2014-03-12T23:34:40  <clarkb> :/
2014-03-12T23:34:49  *** wenlock has quit IRC
2014-03-12T23:34:50  *** wenlock_ has joined #openstack-infra
2014-03-12T23:34:55  *** wenlock_ is now known as wenlock
2014-03-12T23:35:49  <jeblair> so we need to do this? http://projects.puppetlabs.com/projects/puppet/wiki/Simple_Text_Patterns/5
2014-03-12T23:36:00  *** jhesketh has quit IRC
2014-03-12T23:36:34  <foobio> that's why debubtu properly has the run-parts dirs called foo-hooks.d
2014-03-12T23:37:08  *** maurosr has quit IRC
2014-03-12T23:37:09  *** mtreinish has quit IRC
2014-03-12T23:37:24  *** mtreinish has joined #openstack-infra
2014-03-12T23:37:45  *** maurosr has joined #openstack-infra
2014-03-12T23:38:04  <foobio> jeblair: i had never seen that facility of puppet before
2014-03-12T23:38:27  <foobio> that looks way better than some of the places we've just slurped in entire conffiles
2014-03-12T23:38:29  <jeblair> foobio: i don't think it is a facility
2014-03-12T23:38:55  <jeblair> foobio: i think it's way better to slurp in conffiles; having config management edit files is almost always pain
2014-03-12T23:39:03  <foobio> s/facility/insane hack/
2014-03-12T23:39:41  *** david_lyle_ has joined #openstack-infra
2014-03-12T23:39:48  <foobio> i've probably just never gotten to witness some of the myriad of ways that can go horribly wrong
2014-03-12T23:40:44  *** VijayTripathi has joined #openstack-infra
2014-03-12T23:40:56  <clarkb> there is parsed file
2014-03-12T23:41:02  <clarkb> which is clunky
2014-03-12T23:41:11  *** david-lyle has quit IRC
2014-03-12T23:41:25  <foobio> i wonder whether completely normalizing the dhclient config between platforms/providers would present new problems
2014-03-12T23:42:10  <jeblair> this is another "multi cloud is hard" moment.
2014-03-12T23:42:45  *** sweston has quit IRC
2014-03-12T23:43:00  *** dcramer__ has joined #openstack-infra
2014-03-12T23:45:28  <clarkb> does centos not do resolvconf?
2014-03-12T23:46:07  <foobio> i thought resolvconf was an ubuntuism which got up-ported into debian, though i could be wrong
2014-03-12T23:46:17  *** CaptTofu has joined #openstack-infra
2014-03-12T23:46:51  <jeblair> yum search resolvconf comes up empty
2014-03-12T23:46:53  <foobio> starting as basically a hackish dhcp client hook script which made in-place edits to your resolv.conf file
2014-03-12T23:47:07  <clarkb> gotcha
2014-03-12T23:47:27  <foobio> one of those innovations to ease linux adoption in the average joe desktop market
2014-03-12T23:48:08  *** SumitNaiksatam has joined #openstack-infra
2014-03-12T23:48:54  *** wchrisj has joined #openstack-infra
2014-03-12T23:49:17  <openstackgerrit> James E. Blair proposed a change to openstack-infra/config: Use unbound  https://review.openstack.org/80092
2014-03-12T23:49:26  <jeblair> foobio: turns out it inadvertently eased it in the server market as well..
2014-03-12T23:49:56  <jeblair> okay, so that change should do the dhclient thing (i think)...
2014-03-12T23:50:05  <jeblair> one more thing while we're brainstorming though...
2014-03-12T23:50:16  <foobio> indeed
2014-03-12T23:50:21  <jeblair> clarkb and mattoliverau: both suggested having puppet configure the forward ips
2014-03-12T23:50:29  *** CaptTofu has quit IRC
2014-03-12T23:50:30  *** yamahata has joined #openstack-infra
2014-03-12T23:50:49  <jeblair> i chose not to do that because i figured reading /etc/resolv.conf would give us the ips on all os/provider combinations...
2014-03-12T23:50:54  <jeblair> i think that's still the case, yeah?
2014-03-12T23:51:02  <clarkb> jeblair: yes, that should still be the case
2014-03-12T23:51:05  <openstackgerrit> Arnaud Legendre proposed a change to openstack/requirements: Update oslo.vmware to be >= 0.3  https://review.openstack.org/80120
2014-03-12T23:51:12  <jeblair> given what we know, would it make sense to do it in puppet?
2014-03-12T23:51:12  <mattoliverau> sorry, been in a meeting.. reading scroll back
2014-03-12T23:51:54  *** jhesketh_ has joined #openstack-infra
2014-03-12T23:51:54  <jeblair> i mean, i think the fact would have to read the dhcp lease on hpcloud and the /etc/network/interfaces or /etc/system/whatever files on rax
2014-03-12T23:51:58  <jeblair> right?
2014-03-12T23:52:29  <jeblair> so that's at least 3 different files (with different syntaxes) that we would need to parse
2014-03-12T23:52:43  <clarkb> jeblair: probably. I think we can start with what you have there. Mostly my concern is/was that if you run puppet on a machine without the nodepool script you will get a half configured node
2014-03-12T23:53:07  <clarkb> jeblair: for things related to image building thats fine (boot parameters and so on) but the unbound service is configured half in pupet and half in nodepool
2014-03-12T23:53:21  <jeblair> clarkb: actually we will run the puppet on all machines
2014-03-12T23:53:23  *** Alexandra is now known as alex-afk
2014-03-12T23:53:44  <jeblair> clarkb: that's going to run on servers too, and configure unbound, and the nodepool bit is not going to run
2014-03-12T23:54:04  <jeblair> clarkb: which is fine, because that will give us unbound in the default recursive resolver config, which is what we want on servers
2014-03-12T23:54:33  *** resker has quit IRC
2014-03-12T23:54:38  <clarkb> oh right, nodepool is just doing forwarding config for us
2014-03-12T23:54:44  *** gokrokve_ has quit IRC
2014-03-12T23:54:50  <jeblair> clarkb: so it's sort of like every host (nodepoor or not) gets unbound, then nodepool hosts drop in a forwarding config
2014-03-12T23:54:56  <clarkb> wfm
2014-03-12T23:55:07  <foobio> that feels safe enough
2014-03-12T23:55:08  *** esker has joined #openstack-infra
2014-03-12T23:55:08  <jeblair> (nodepoor is what we are right now)
2014-03-12T23:55:11  *** gokrokve has joined #openstack-infra
2014-03-12T23:55:16  <foobio> but soon, noderich!
2014-03-12T23:55:20  <foobio> profit!
2014-03-12T23:55:43  *** SumitNaiksatam has quit IRC
2014-03-12T23:56:06  *** SumitNaiksatam has joined #openstack-infra
2014-03-12T23:59:12  *** gokrokve has quit IRC
2014-03-12T23:59:18  <jogo> clarkb: 1291440 isn't showing up in the  e-r even though the pages have regenerated
2014-03-12T23:59:26  *** esker has quit IRC
