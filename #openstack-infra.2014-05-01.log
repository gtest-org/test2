2014-05-01T00:00:18  *** pcrews_ has quit IRC
2014-05-01T00:02:39  <foobio> #status ok the gate is still fairly backed up, though nodepool is back on track and chipping away at remaining changes. some py3k/pypy node starvation is slowing recovery
2014-05-01T00:02:39  <openstackstatus> foobio: sending ok
2014-05-01T00:02:45  *** melwitt has quit IRC
2014-05-01T00:04:22  *** ChanServ changes topic to "Gerrit upgraded to 2.8.  See: https://wiki.openstack.org/wiki/GerritUpgrade"
2014-05-01T00:04:23  -openstackstatus- NOTICE: the gate is still fairly backed up, though nodepool is back on track and chipping away at remaining changes. some py3k/pypy node starvation is slowing recovery
2014-05-01T00:04:30  *** matsuhashi has joined #openstack-infra
2014-05-01T00:04:51  *** aconrad has quit IRC
2014-05-01T00:06:19  <openstackstatus> foobio: finished sending ok
2014-05-01T00:09:45  *** david-lyle has joined #openstack-infra
2014-05-01T00:13:53  *** david-lyle has quit IRC
2014-05-01T00:19:54  *** yjiang5 is now known as yjiang5_away
2014-05-01T00:23:04  <jogo> foobio: I like how fairly backed up is just 7 hours now
2014-05-01T00:23:10  <jogo> and 15 patches :_
2014-05-01T00:23:18  <jogo> althoguh check is pretty big
2014-05-01T00:23:48  *** bhuvan has quit IRC
2014-05-01T00:23:54  <jeblair> the zuul job queue looks like half-dome
2014-05-01T00:24:21  * jeblair goes to play space quest
2014-05-01T00:26:29  <foobio> woah i haven't thought about space quest in years. once of the funniest sierra game series, for sure. great writing
2014-05-01T00:26:43  *** aconrad has joined #openstack-infra
2014-05-01T00:30:28  *** packet has quit IRC
2014-05-01T00:30:59  <tchaypo> StevenK: plus it's morning, pre-coffee. this is when i stare at gerrit and go "huh?" rather than trying to write anything useful
2014-05-01T00:31:38  <StevenK> Lies. The coffee is right next to you.
2014-05-01T00:32:56  <tchaypo> yes, it's next to me.
2014-05-01T00:33:11  <tchaypo> see, if it was *in* me I might have noticed that this isn't #tripleo
2014-05-01T00:34:17  <foobio> tchaypo: well, it had a # and a few of the same letters, so you were close anyway
2014-05-01T00:34:20  *** lcostantino has joined #openstack-infra
2014-05-01T00:34:37  <tchaypo> more than just the same letters
2014-05-01T00:34:42  <tchaypo> it had some of the same characters!
2014-05-01T00:36:36  <SlickNik> question: Do all infra jobs run on nodepool instances that are jenkins slaves? Or only the devstack-vm-gate ones?
2014-05-01T00:36:44  <jeblair> SlickNik: all
2014-05-01T00:38:33  *** arnaud__ has joined #openstack-infra
2014-05-01T00:39:50  <SlickNik> jeblair: thanks! The reason I ask is this: I'm trying to write a new infra job that builds the trove guest-image from dib-elements; it needs to be able to check out the elements repo, and a couple of tripleo repos and run diskimage-builder.
2014-05-01T00:41:32  <SlickNik> I'm thinking that Gerrit-git-prep should be sufficient as a builder, and that I shouldn't have to use the hooks in devstack-gate to do this.
2014-05-01T00:42:23  <SlickNik> Or is there a better way to do this, that you'd suggest? Thoughts?
2014-05-01T00:42:33  <jeblair> SlickNik: if the projects involved depend on each other and will end up gating, you may want to use devstack-gate since it's the only thing that knows how to set up multiple projects in zuul's queue
2014-05-01T00:42:53  <jeblair> SlickNik: (hashar is working on a script that will generalize that, so we can do this sort of thing outside of d-g in the future)
2014-05-01T00:43:50  <jeblair> SlickNik: other than that, the bare nodes and devstack nodes are converging, hopefully we'll just have one node type eventually.  main difference at this point is whether they have all the extra devstack stuff cached (images, packages, etc)
2014-05-01T00:44:05  <jeblair> SlickNik: they both have sudo ability and local caches of all the git repos
2014-05-01T00:44:38  *** yamahata has quit IRC
2014-05-01T00:45:41  *** rhsu has quit IRC
2014-05-01T00:46:58  <openstackgerrit> James E. Blair proposed a change to openstack-infra/nodepool: Fix race in tests  https://review.openstack.org/91491
2014-05-01T00:46:59  <openstackgerrit> James E. Blair proposed a change to openstack-infra/nodepool: Improve logging/stats around launch errors  https://review.openstack.org/91492
2014-05-01T00:47:09  *** aconrad has quit IRC
2014-05-01T00:47:30  <jeblair> foobio, mordred, phschwartz: ^ that should tell us _a lot_ more about what's going on in nodepool
2014-05-01T00:48:41  <SlickNik> jeblair: Thanks! That's really helpful.
2014-05-01T00:48:59  <SlickNik> jeblair: Right now we're planning to gate on just the one repository that contains the trove-guest elements.
2014-05-01T00:49:15  <SlickNik> jeblair: But let me give the gating requirements pertaining to this a bit more thought.
2014-05-01T00:49:47  *** jhesketh has quit IRC
2014-05-01T00:51:44  *** crc32 has quit IRC
2014-05-01T00:52:48  <jeblair> SlickNik: okay, if it's only one repo, you might be able to get away with ggp for now, and maybe we will have the multi-repo script ready by the time you need it
2014-05-01T00:52:55  <jeblair> (definitely the much simpler way to go)
2014-05-01T00:52:58  <jogo> hrmm  'gate-python-novaclient-pypy: queue' at top of gate
2014-05-01T00:56:44  <jogo> foobio: I assume you are aware  already ^
2014-05-01T00:57:10  <SlickNik> jeblair: Okay, I think that's the route I'll go with for now (and plan on switching to the multi-repo script when we have that). Thanks for your help!
2014-05-01T00:58:15  *** weshay has joined #openstack-infra
2014-05-01T00:59:49  *** mriedem has joined #openstack-infra
2014-05-01T00:59:54  *** manishg has joined #openstack-infra
2014-05-01T01:02:01  *** lcostantino has quit IRC
2014-05-01T01:04:50  <krotscheck> nibalizer: https://github.com/krotscheck/puppet-storyboard
2014-05-01T01:05:07  <krotscheck> That _should_ work to set up your own standalone storyboard instance.
2014-05-01T01:05:25  <krotscheck> Where “should” means “Some of the dependencies might be a bit messed up”
2014-05-01T01:07:02  <nibalizer> oh wild
2014-05-01T01:07:16  <nibalizer> is that the same as the one in the openstack-infra/config project
2014-05-01T01:08:05  *** jhesketh has joined #openstack-infra
2014-05-01T01:08:50  <mgagne> greatest meta puppet module I ever saw so far... https://github.com/krotscheck/puppet-storyboard/tree/master/modules/puppet_module
2014-05-01T01:09:06  <krotscheck> mgagne: No kidding
2014-05-01T01:09:11  <phschwartz> jeblair: That should give us more info when there are failures which will let us debug it for you better.
2014-05-01T01:09:14  <krotscheck> nibalizer: No, it’s based on that though.
2014-05-01T01:09:18  *** amcrn has quit IRC
2014-05-01T01:09:29  <krotscheck> nibalizer: Give me a couple of minutes, I’ll get the README working.
2014-05-01T01:09:34  <mgagne> should have been puppet module install yodawg/puppet_module
2014-05-01T01:09:35  <krotscheck> Also, that puppet_module isnt’ required anymore
2014-05-01T01:12:26  *** amcrn has joined #openstack-infra
2014-05-01T01:13:09  <krotscheck> nibalizer: Done. Readme now reflects the install process I used.
2014-05-01T01:14:01  <krotscheck> nibalizer: One thing- the module doesn’t automatically set up any admin users. You’ll have to manually go into the database and set is_superuser in the users table.
2014-05-01T01:14:49  <nibalizer> okay
2014-05-01T01:14:50  <nibalizer> thanks
2014-05-01T01:14:53  <nibalizer> im still at $WORKJOB
2014-05-01T01:14:56  <nibalizer> so cant play with it
2014-05-01T01:15:00  <nibalizer> ubt ill try to get going soon
2014-05-01T01:15:20  <nibalizer> also there is a changset pending against infra/config to make storyboard its own puppet module on openstack
2014-05-01T01:15:26  <nibalizer> so hopefully we can separate those
2014-05-01T01:16:09  *** nati_ueno has joined #openstack-infra
2014-05-01T01:16:25  <krotscheck> nibalizer: Oh, right. I should go review that.
2014-05-01T01:16:35  *** rhsu has joined #openstack-infra
2014-05-01T01:16:35  <krotscheck> nibalizer: Thanks  :)
2014-05-01T01:17:31  *** mwagner_lap has joined #openstack-infra
2014-05-01T01:17:59  *** zns_ has joined #openstack-infra
2014-05-01T01:18:11  *** weshay has quit IRC
2014-05-01T01:18:42  <jesusaurus> nibalizer: do you have a link handy for that change? i wanna see what all is needed to do that
2014-05-01T01:20:51  <nibalizer> uh no
2014-05-01T01:20:59  <nibalizer> but if you search on me should come up
2014-05-01T01:21:03  <nibalizer> i think its -1 right now :(
2014-05-01T01:21:23  *** amcrn has quit IRC
2014-05-01T01:22:11  *** zns has quit IRC
2014-05-01T01:22:38  *** zns_ has quit IRC
2014-05-01T01:28:29  *** saschpe has quit IRC
2014-05-01T01:29:28  *** saschpe has joined #openstack-infra
2014-05-01T01:36:06  *** marcoemorais has quit IRC
2014-05-01T01:43:56  <openstackgerrit> A change was merged to openstack-infra/config: add subunit log test sanity  https://review.openstack.org/85797
2014-05-01T01:44:08  *** yamahata has joined #openstack-infra
2014-05-01T01:47:50  *** nati_ueno has quit IRC
2014-05-01T01:49:27  *** nosnos has joined #openstack-infra
2014-05-01T01:52:25  *** amcrn has joined #openstack-infra
2014-05-01T01:55:31  *** homeless has quit IRC
2014-05-01T01:56:33  *** rhsu1 has joined #openstack-infra
2014-05-01T01:56:33  *** rhsu has quit IRC
2014-05-01T01:58:04  <openstackgerrit> A change was merged to openstack-infra/config: Add django_openstack_auth to the integrated gate  https://review.openstack.org/86528
2014-05-01T01:59:54  *** zhiyan_ is now known as zhiyan
2014-05-01T02:01:05  <openstackgerrit> A change was merged to openstack-infra/config: Add a check for nova-docker  https://review.openstack.org/86910
2014-05-01T02:01:41  *** Alexandra_ has joined #openstack-infra
2014-05-01T02:01:46  *** marun has quit IRC
2014-05-01T02:02:51  *** mengxd has joined #openstack-infra
2014-05-01T02:02:56  <openstackgerrit> A change was merged to openstack-dev/pbr: Fixed a typo in the documentation.  https://review.openstack.org/90516
2014-05-01T02:03:36  *** yidclare has quit IRC
2014-05-01T02:04:24  <openstackgerrit> A change was merged to openstack-infra/config: Fixes to nodepool installation on jenkins-dev.o.o  https://review.openstack.org/88026
2014-05-01T02:05:30  <openstackgerrit> A change was merged to openstack-infra/config: Integrate Launchpad for compass-* projects  https://review.openstack.org/87418
2014-05-01T02:06:34  <openstackgerrit> A change was merged to openstack-infra/config: Fix redis.conf pid and data dir settings  https://review.openstack.org/88323
2014-05-01T02:07:53  <openstackgerrit> A change was merged to openstack-infra/config: Extract Murano python jobs in a template  https://review.openstack.org/87974
2014-05-01T02:07:59  *** Ryan_Lane1 has quit IRC
2014-05-01T02:13:42  <portante> anybody around that can help with a openstack-infra/config change failure?
2014-05-01T02:13:44  <portante> http://logs.openstack.org/24/91424/1/check/gate-config-layout/0192c4d/console.html
2014-05-01T02:14:13  <portante> it is saying that gate-swift-unittests-func is not defined, but not sure why
2014-05-01T02:19:57  <openstackgerrit> A change was merged to openstack-infra/elastic-recheck: Add fingerprint for bug 1314786  https://review.openstack.org/91453
2014-05-01T02:19:58  <uvirtbot> Launchpad bug 1314786 in openstack-ci "/opt/stack/new/devstack/files/Fedora-x86_64-20-20131211.1-sda.qcow2 is not  cached" [Undecided,New] https://launchpad.net/bugs/1314786
2014-05-01T02:23:45  <fifieldt> sdague, hi
2014-05-01T02:24:41  <openstackgerrit> A change was merged to openstack-infra/config: Fix gate-heat-templates-dsvm shell script  https://review.openstack.org/89875
2014-05-01T02:25:04  *** wenlock has joined #openstack-infra
2014-05-01T02:26:07  <openstackgerrit> A change was merged to openstack-infra/config: use buck from master branch  https://review.openstack.org/90219
2014-05-01T02:27:08  <openstackgerrit> A change was merged to openstack-infra/config: Fixed several typos in the docs.  https://review.openstack.org/90544
2014-05-01T02:27:15  <openstackgerrit> A change was merged to openstack-infra/config: Configuring bundler to use multiple cpus/cores  https://review.openstack.org/90563
2014-05-01T02:27:56  <openstackgerrit> A change was merged to openstack-infra/config: index n-sched in grenade runs  https://review.openstack.org/90054
2014-05-01T02:32:15  *** zehicle_at_dell has joined #openstack-infra
2014-05-01T02:32:59  *** mriedem has quit IRC
2014-05-01T02:33:11  *** julim has quit IRC
2014-05-01T02:36:01  *** sweston has quit IRC
2014-05-01T02:47:18  *** arnaud__ has quit IRC
2014-05-01T02:51:31  <mattoliverau> portante: in your patch, under zuul's layout you place 'gate-swift-unittests-func' under the project 'openstack/swift' which makes sense, but in jenkins job builder its not under swift but under 'sqlalchemy-migrate' is this what you wanted?
2014-05-01T02:59:25  <openstackgerrit> A change was merged to openstack-infra/nodepool: Create launch-timeout setting for providers  https://review.openstack.org/85150
2014-05-01T03:02:55  <portante> ugh, mattoliverau thanks
2014-05-01T03:06:26  *** Alexandra_ has quit IRC
2014-05-01T03:08:40  *** mengxd has quit IRC
2014-05-01T03:09:11  *** talluri has quit IRC
2014-05-01T03:09:12  <openstackgerrit> Peter Portante proposed a change to openstack-infra/config: Add swift "in-process" functional test runs  https://review.openstack.org/91424
2014-05-01T03:09:28  <portante> embarrassing ...
2014-05-01T03:13:43  *** manishg has quit IRC
2014-05-01T03:15:06  *** manishg has joined #openstack-infra
2014-05-01T03:16:51  *** manishg has quit IRC
2014-05-01T03:17:38  <mattoliverau> portante: well you had alot of +1's so your not the only one who didn't notice. I only noticed because I was reading the yaml files trying to peice together how they worked, as I haven't set one up before. So yay for fresh eyes on a problem :)
2014-05-01T03:18:12  <portante> yes, thank you!
2014-05-01T03:18:33  *** zhiyan is now known as zhiyan_
2014-05-01T03:19:16  <openstackgerrit> A change was merged to openstack-infra/jenkins-job-builder: Tiny spelling fix: YMAL -> YAML  https://review.openstack.org/91291
2014-05-01T03:20:04  *** harlowja is now known as harlowja_away
2014-05-01T03:21:14  *** harlowja_away is now known as harlowja
2014-05-01T03:21:28  *** Ryan_Lane has joined #openstack-infra
2014-05-01T03:22:34  *** crc32 has joined #openstack-infra
2014-05-01T03:25:04  *** alexpilotti has quit IRC
2014-05-01T03:28:50  *** matsuhashi has quit IRC
2014-05-01T03:35:48  <openstackgerrit> A change was merged to openstack-infra/config: Added gate-magnetodb-devstack-dsvm as gate  https://review.openstack.org/91014
2014-05-01T03:36:06  *** aconrad has joined #openstack-infra
2014-05-01T03:36:34  *** Ryan_Lane1 has joined #openstack-infra
2014-05-01T03:37:35  <openstackgerrit> Joshua Harlow proposed a change to stackforge/gertty: Handle exiting more gracefully  https://review.openstack.org/91504
2014-05-01T03:37:42  <harlowja> jeblair ^
2014-05-01T03:46:26  *** nosnos has quit IRC
2014-05-01T03:52:29  <harlowja> jeblair some other examples u might find useful, https://excess.org/svn/urwid/contrib/trunk/rbreu_menus.py could be useful for a menu
2014-05-01T04:05:13  *** crc32 has quit IRC
2014-05-01T04:07:30  *** rlandy|afk has quit IRC
2014-05-01T04:07:57  *** AaronGreen is now known as AaronGr
2014-05-01T04:09:25  *** miqui has quit IRC
2014-05-01T04:16:23  <lifeless> it would  be great if we can get https://review.openstack.org/#/c/89691/ in tomorrow please; would really like time to get stuff into it before the summit
2014-05-01T04:16:38  *** yfried has quit IRC
2014-05-01T04:19:06  *** Ryan_Lane1 has quit IRC
2014-05-01T04:21:02  *** UtahDave has joined #openstack-infra
2014-05-01T04:22:42  *** rhsu has joined #openstack-infra
2014-05-01T04:22:42  *** rhsu1 has quit IRC
2014-05-01T04:35:03  *** matsuhashi has joined #openstack-infra
2014-05-01T04:36:15  *** nosnos has joined #openstack-infra
2014-05-01T04:42:03  *** marcoemorais has joined #openstack-infra
2014-05-01T04:45:02  *** marcoemorais1 has joined #openstack-infra
2014-05-01T04:46:18  *** marcoemorais has quit IRC
2014-05-01T04:48:58  *** matsuhashi has quit IRC
2014-05-01T04:53:29  *** matsuhashi has joined #openstack-infra
2014-05-01T05:05:18  *** morganfainberg is now known as morganfainberg_Z
2014-05-01T05:23:52  *** Ryan_Lane has quit IRC
2014-05-01T05:24:18  *** Ryan_Lane has joined #openstack-infra
2014-05-01T05:30:25  *** UtahDave has quit IRC
2014-05-01T05:31:55  *** ihrachyshka has joined #openstack-infra
2014-05-01T05:33:16  *** ihrachyshka has quit IRC
2014-05-01T05:33:34  *** ihrachyshka has joined #openstack-infra
2014-05-01T05:35:47  *** yfried has joined #openstack-infra
2014-05-01T05:35:56  <openstackgerrit> Derek Higgins proposed a change to openstack-infra/config: Remove setting of RE_EXEC from nova-docker job  https://review.openstack.org/91515
2014-05-01T05:37:23  *** harlowja is now known as harlowja_away
2014-05-01T05:37:25  *** ihrachyshka has quit IRC
2014-05-01T06:02:06  *** derekh has joined #openstack-infra
2014-05-01T06:02:33  *** luisg_ has joined #openstack-infra
2014-05-01T06:02:36  *** luisg__ has quit IRC
2014-05-01T06:06:03  <derekh> is zuul having problems, we have check-tripleo jobs running in jenkins but nothing listed in the queue
2014-05-01T06:10:11  *** dkehn has quit IRC
2014-05-01T06:10:18  *** dkehn_ has quit IRC
2014-05-01T06:11:46  *** AaronGr has quit IRC
2014-05-01T06:22:55  *** rhsu1 has joined #openstack-infra
2014-05-01T06:22:55  *** rhsu has quit IRC
2014-05-01T06:26:16  *** afazekas has joined #openstack-infra
2014-05-01T06:29:59  *** aconrad has quit IRC
2014-05-01T06:41:16  *** AaronGr has joined #openstack-infra
2014-05-01T06:44:58  *** chandan_kumar has joined #openstack-infra
2014-05-01T06:45:24  <openstackgerrit> A change was merged to openstack-infra/devstack-gate: Allow setting services up under apache mod_wsgi  https://review.openstack.org/90812
2014-05-01T06:56:03  *** jooools has joined #openstack-infra
2014-05-01T07:06:19  *** shardy_afk is now known as shardy
2014-05-01T07:07:56  *** chandan_kumar has quit IRC
2014-05-01T07:09:07  *** matsuhashi has quit IRC
2014-05-01T07:09:17  *** wenlock has quit IRC
2014-05-01T07:12:22  *** matsuhas_ has joined #openstack-infra
2014-05-01T07:13:50  *** derekh has quit IRC
2014-05-01T07:18:24  *** praneshp has quit IRC
2014-05-01T07:19:10  *** oomichi has joined #openstack-infra
2014-05-01T07:23:11  *** jamielennox is now known as jamielennox|away
2014-05-01T07:26:09  *** rhsu1 has quit IRC
2014-05-01T07:31:09  *** Ryan_Lane has quit IRC
2014-05-01T07:33:07  *** _nadya_ has joined #openstack-infra
2014-05-01T07:40:38  *** Ryan_Lane has joined #openstack-infra
2014-05-01T07:46:13  *** _nadya_ has quit IRC
2014-05-01T07:48:15  *** Ryan_Lane has quit IRC
2014-05-01T07:48:57  *** Longgeek has joined #openstack-infra
2014-05-01T07:49:26  *** jpich has joined #openstack-infra
2014-05-01T07:55:34  *** _nadya_ has joined #openstack-infra
2014-05-01T08:03:40  *** mkerrin has joined #openstack-infra
2014-05-01T08:05:28  *** andreykurilin_ has joined #openstack-infra
2014-05-01T08:10:57  <mattoliverau> Time to call it a day for me, have a great day/night all.
2014-05-01T08:12:07  *** amcrn has quit IRC
2014-05-01T08:17:03  *** _nadya_ has quit IRC
2014-05-01T08:18:56  *** darraghb has joined #openstack-infra
2014-05-01T08:21:25  *** e0ne has joined #openstack-infra
2014-05-01T08:23:30  *** andreykurilin_ has quit IRC
2014-05-01T08:24:43  *** Longgeek has quit IRC
2014-05-01T08:25:21  *** e0ne has quit IRC
2014-05-01T08:25:40  *** _nadya_ has joined #openstack-infra
2014-05-01T08:26:08  *** andreykurilin_ has joined #openstack-infra
2014-05-01T08:26:44  *** andreaf has joined #openstack-infra
2014-05-01T08:30:36  *** jp_at_hp has joined #openstack-infra
2014-05-01T08:33:24  *** matsuhas_ has quit IRC
2014-05-01T08:33:35  *** dkehn has joined #openstack-infra
2014-05-01T08:34:08  *** markwash has quit IRC
2014-05-01T08:37:38  *** dkehn_ has joined #openstack-infra
2014-05-01T08:37:57  *** flaper87|afk is now known as flaper87
2014-05-01T08:40:31  *** jcoufal has joined #openstack-infra
2014-05-01T08:41:04  *** matsuhashi has joined #openstack-infra
2014-05-01T08:42:42  *** andreykurilin_ has quit IRC
2014-05-01T08:43:11  *** _nadya_ has quit IRC
2014-05-01T08:43:15  *** andreykurilin_ has joined #openstack-infra
2014-05-01T08:45:50  *** e0ne has joined #openstack-infra
2014-05-01T08:57:12  *** flaper87 is now known as flaper87|afk
2014-05-01T08:58:26  *** markmc has joined #openstack-infra
2014-05-01T09:07:09  *** derekh has joined #openstack-infra
2014-05-01T09:11:41  *** marcoemorais1 has quit IRC
2014-05-01T09:12:18  *** e0ne has quit IRC
2014-05-01T09:23:13  *** jcoufal has quit IRC
2014-05-01T09:23:52  *** jcoufal has joined #openstack-infra
2014-05-01T09:28:44  *** oomichi has quit IRC
2014-05-01T09:31:06  *** sdake_ has quit IRC
2014-05-01T09:32:10  *** matsuhashi has quit IRC
2014-05-01T09:33:35  *** matsuhashi has joined #openstack-infra
2014-05-01T09:53:46  *** sdake_ has joined #openstack-infra
2014-05-01T09:54:51  *** nosnos has quit IRC
2014-05-01T10:06:22  <openstackgerrit> Graham Hayes proposed a change to openstack-infra/config: Add stackforge/designate-specs  https://review.openstack.org/87540
2014-05-01T10:06:52  <sdague> fifieldt: is this normal awake hours for you now?
2014-05-01T10:14:24  *** Longgeek has joined #openstack-infra
2014-05-01T10:15:42  *** chandan_kumar has joined #openstack-infra
2014-05-01T10:16:31  *** ociuhandu has quit IRC
2014-05-01T10:20:06  <openstackgerrit> A change was merged to stackforge/python-jenkins: Wrap tests and linting with tox  https://review.openstack.org/89521
2014-05-01T10:23:22  *** rcarrill` has quit IRC
2014-05-01T10:23:36  *** rcarrillocruz has joined #openstack-infra
2014-05-01T10:31:53  *** andreykurilin_ has quit IRC
2014-05-01T10:32:07  *** jp_at_hp has quit IRC
2014-05-01T10:32:40  *** andreykurilin_ has joined #openstack-infra
2014-05-01T10:52:31  <openstackgerrit> Derek Higgins proposed a change to openstack-infra/config: Create tripleo-specs git repo  https://review.openstack.org/89691
2014-05-01T10:52:56  *** chandan_kumar has quit IRC
2014-05-01T10:54:53  *** e0ne has joined #openstack-infra
2014-05-01T10:54:57  *** andreykurilin_ has quit IRC
2014-05-01T10:56:01  *** ociuhandu has joined #openstack-infra
2014-05-01T10:58:17  *** sdake_ has quit IRC
2014-05-01T11:00:47  *** rcarrill` has joined #openstack-infra
2014-05-01T11:02:25  *** rcarrillocruz has quit IRC
2014-05-01T11:04:06  *** rcarrillocruz has joined #openstack-infra
2014-05-01T11:04:08  *** alexpilotti has joined #openstack-infra
2014-05-01T11:04:56  *** ociuhandu has quit IRC
2014-05-01T11:06:18  *** rcarrill` has quit IRC
2014-05-01T11:13:02  <derekh> sdague: about https://review.openstack.org/#/c/89691/  am I able to have a docs job for a blank repo , or should I populate it with stuff first and import a prepopulated repo ?
2014-05-01T11:13:41  *** ociuhandu has joined #openstack-infra
2014-05-01T11:15:22  <sdague> derekh: that's a good question
2014-05-01T11:16:07  <sdague> I thought the cookiecutter had enough to get rolling here
2014-05-01T11:16:27  <sdague> you definitely shouldn't start with a blank repo, you should start with the cookiecutter
2014-05-01T11:19:10  <derekh> sdague: ok, I think I get it now, will take a look at cookie cutter
2014-05-01T11:24:43  *** ociuhandu has quit IRC
2014-05-01T11:28:45  <openstackgerrit> Sean Dague proposed a change to openstack-infra/config: fix overflow on firefox  https://review.openstack.org/91548
2014-05-01T11:31:13  <openstackgerrit> A change was merged to openstack-infra/jenkins-job-builder: Add more tests  https://review.openstack.org/90524
2014-05-01T11:31:19  <openstackgerrit> A change was merged to openstack-infra/jenkins-job-builder: Add additional yaml/xml tests, literalinclude them  https://review.openstack.org/91131
2014-05-01T11:34:53  *** jcoufal has quit IRC
2014-05-01T11:35:59  *** miarmak_ has joined #openstack-infra
2014-05-01T11:35:59  *** miarmak has quit IRC
2014-05-01T11:36:07  *** bogdando has quit IRC
2014-05-01T11:39:21  *** bogdando has joined #openstack-infra
2014-05-01T11:43:42  *** _nadya_ has joined #openstack-infra
2014-05-01T11:44:32  *** maxbit has joined #openstack-infra
2014-05-01T11:44:34  *** doug-fish has left #openstack-infra
2014-05-01T11:45:41  *** yamahata has quit IRC
2014-05-01T11:47:54  *** _nadya_ has quit IRC
2014-05-01T11:48:20  *** dkehn__ has joined #openstack-infra
2014-05-01T11:48:29  *** jp_at_hp has joined #openstack-infra
2014-05-01T11:48:45  *** rlandy has joined #openstack-infra
2014-05-01T11:49:26  *** dkehn__ has quit IRC
2014-05-01T11:49:57  *** dkehn_ has quit IRC
2014-05-01T11:49:57  *** dkehn__ has joined #openstack-infra
2014-05-01T11:50:22  *** dkehn has quit IRC
2014-05-01T11:52:01  *** dkehn has joined #openstack-infra
2014-05-01T11:52:51  *** hashar has joined #openstack-infra
2014-05-01T11:59:22  *** bogdando has quit IRC
2014-05-01T11:59:22  *** miarmak_ has quit IRC
2014-05-01T11:59:32  *** miarmak has joined #openstack-infra
2014-05-01T11:59:55  *** bogdando has joined #openstack-infra
2014-05-01T12:00:06  *** bookwar is now known as bookwar_away
2014-05-01T12:04:27  *** talluri has joined #openstack-infra
2014-05-01T12:08:19  <anteaya> sdague: morning
2014-05-01T12:08:26  <sdague> morning
2014-05-01T12:08:31  <anteaya> sdague: what is the harm in starting with a blank repo?
2014-05-01T12:08:41  <anteaya> I thought is was okay to do that
2014-05-01T12:08:56  *** mbacchi has joined #openstack-infra
2014-05-01T12:09:29  <sdague> I think these projects should be starting with the cookiecutter as an import point
2014-05-01T12:09:40  <anteaya> which projects?
2014-05-01T12:09:47  <anteaya> every new project?
2014-05-01T12:11:08  *** aysyd has joined #openstack-infra
2014-05-01T12:11:48  *** pdmars has joined #openstack-infra
2014-05-01T12:12:47  <openstackgerrit> Thomas Leaman proposed a change to openstack/requirements: Move to newer version of python-swiftclient  https://review.openstack.org/76170
2014-05-01T12:14:36  <sdague> the new specs projects
2014-05-01T12:14:50  *** rfolco has joined #openstack-infra
2014-05-01T12:17:18  <anteaya> ah okay thanks
2014-05-01T12:17:56  *** weshay has joined #openstack-infra
2014-05-01T12:18:51  *** thomasem has joined #openstack-infra
2014-05-01T12:22:54  *** maxbit has quit IRC
2014-05-01T12:27:50  *** weshay has quit IRC
2014-05-01T12:29:37  *** alexpilotti has quit IRC
2014-05-01T12:34:53  <openstackgerrit> A change was merged to openstack/requirements: Update sphinxcontrib-pecanwsme to 0.8  https://review.openstack.org/91370
2014-05-01T12:36:09  *** thomasem has quit IRC
2014-05-01T12:36:49  *** thomasem has joined #openstack-infra
2014-05-01T12:37:11  *** thomasem has quit IRC
2014-05-01T12:41:27  *** adalbas has joined #openstack-infra
2014-05-01T12:41:47  *** alexpilotti has joined #openstack-infra
2014-05-01T12:42:55  *** bknudson has quit IRC
2014-05-01T12:43:02  *** yamahata has joined #openstack-infra
2014-05-01T12:46:39  *** talluri has quit IRC
2014-05-01T12:47:29  *** alexpilotti has quit IRC
2014-05-01T12:48:38  *** thomasem has joined #openstack-infra
2014-05-01T12:56:38  *** hashar has quit IRC
2014-05-01T12:57:46  *** miqui has joined #openstack-infra
2014-05-01T12:59:22  *** changbl has quit IRC
2014-05-01T13:03:51  *** thomasem has quit IRC
2014-05-01T13:04:29  *** weshay has joined #openstack-infra
2014-05-01T13:05:46  *** thomasem has joined #openstack-infra
2014-05-01T13:09:30  <openstackgerrit> Derek Higgins proposed a change to openstack-infra/config: Create tripleo-specs git repo  https://review.openstack.org/89691
2014-05-01T13:12:54  *** mriedem has joined #openstack-infra
2014-05-01T13:14:31  *** aconrad has joined #openstack-infra
2014-05-01T13:14:41  *** signed8bit has joined #openstack-infra
2014-05-01T13:16:10  *** julim has joined #openstack-infra
2014-05-01T13:17:01  *** doug-fish has joined #openstack-infra
2014-05-01T13:17:06  *** eharney has quit IRC
2014-05-01T13:18:06  *** smarcet has joined #openstack-infra
2014-05-01T13:20:05  *** rcarrill` has joined #openstack-infra
2014-05-01T13:21:44  <anteaya> mrmartin: when you are around, what do you see as "content source for static pages of community portal" which are the motivation for https://review.openstack.org/#/c/89734/
2014-05-01T13:22:02  *** rcarrillocruz has quit IRC
2014-05-01T13:25:06  <derekh> Could zuul be loosing track of jobs ? according to the zuul status page there are no f20 jobs running in the check-tripleo queue
2014-05-01T13:25:12  <derekh> but
2014-05-01T13:25:50  <anteaya> I think if jobs are lost track of that is nodepool
2014-05-01T13:25:56  <derekh> there currently appears to be 12 running on jenkins goodsquishy.com/downloads/tripleo-jobs.html
2014-05-01T13:26:01  <anteaya> if I have the relationships correct in my mind
2014-05-01T13:26:39  *** matty_dubs|gone is now known as matty_dubs
2014-05-01T13:26:50  <anteaya> what am I seeing at the goodsquishy.com url?
2014-05-01T13:27:01  <anteaya> lots of data, how is it gathered?
2014-05-01T13:27:27  <derekh> andreaf: pooling the jenkins API, green/red are success/failed
2014-05-01T13:27:39  <derekh> anteaya: and grey are currently running
2014-05-01T13:28:01  <anteaya> okay
2014-05-01T13:28:29  <derekh> Jobs have been kicked off multiple times all day, instead of reporting back to gerrit and leaving the queue
2014-05-01T13:28:34  <anteaya> so you are saying that goodsquishy and status.openstack.org/zuul are showing you different states for the same jobs?
2014-05-01T13:29:10  <anteaya> derekh: do you have a url for a patch that has had testing on it without leaving the queue?
2014-05-01T13:30:09  <derekh> anteaya: yup, take https://review.openstack.org/#/c/91161/3 for example
2014-05-01T13:30:13  <anteaya> thanks
2014-05-01T13:30:15  * anteaya clicks
2014-05-01T13:30:18  *** zns has joined #openstack-infra
2014-05-01T13:30:42  <derekh> zuul thinks it is waiting on the f20 job to start
2014-05-01T13:31:00  <derekh> but infact its run 4 times
2014-05-01T13:31:11  <pleia2> morganfainberg_Z: thanks for looking into reviewday wip, I had completely forgotten that the upgrade would impact it
2014-05-01T13:31:18  <derekh> and one is currently running https://jenkins07.openstack.org/job/check-tripleo-overcloud-f20/261/
2014-05-01T13:31:28  <derekh> but zull status page doesn't know about it
2014-05-01T13:31:33  <derekh> anteaya: ^
2014-05-01T13:31:37  *** manishg has joined #openstack-infra
2014-05-01T13:33:02  *** dprince has joined #openstack-infra
2014-05-01T13:33:20  <anteaya> derekh: interesting
2014-05-01T13:33:28  <derekh> anteaya: hmm, the jenkins status page doesn't contain "Triggered by change: 91161,3"
2014-05-01T13:34:08  <anteaya> the jenkins status page? https://jenkins07.openstack.org/job/check-tripleo-overcloud-f20/261/
2014-05-01T13:35:13  <anteaya> hmmmm
2014-05-01T13:35:15  <anteaya> Building remotely on tripleo-f20-tripleo-test-cloud-rh1-3928696 in workspace /home/jenkins/workspace/check-tripleo-overcloud-f20
2014-05-01T13:35:24  <derekh> anteaya: yup that one
2014-05-01T13:35:41  <anteaya> 2014-05-01 12:59:00.587 | Triggered by: https://review.openstack.org/91161 patchset 3
2014-05-01T13:36:06  *** zns has quit IRC
2014-05-01T13:36:22  *** manishg has quit IRC
2014-05-01T13:36:26  *** zns has joined #openstack-infra
2014-05-01T13:36:27  <derekh> anteaya: yup, thats in the console log but not in the status page
2014-05-01T13:36:31  *** manishg has joined #openstack-infra
2014-05-01T13:36:45  <anteaya> so that is in the console log but not on this page: https://jenkins07.openstack.org/job/check-tripleo-overcloud-f20/261/
2014-05-01T13:37:32  <derekh> anteaya: infact looking at another job that ran 6 times , its the same situation (triggered by line missing on status page) , for all the jobs that ran except the most recent one
2014-05-01T13:37:33  <anteaya> derekh: I'm suspecting nodepool is playing a role in the confusion
2014-05-01T13:37:57  <anteaya> derekh: have you a link to that patch?
2014-05-01T13:38:15  *** dkehn_ has joined #openstack-infra
2014-05-01T13:39:15  *** maxbit has joined #openstack-infra
2014-05-01T13:39:37  <derekh> anteaya: yup, this patch https://review.openstack.org/#/c/91161/  resulted in the same job getting run 6 times https://jenkins07.openstack.org/job/check-tripleo-undercloud-precise/664/ https://jenkins03.openstack.org/job/check-tripleo-undercloud-precise/532/ https://jenkins05.openstack.org/job/check-tripleo-undercloud-precise/658/ https://jenkins04.openstack.org/job/check-tripleo-undercloud-precise/578/ https://jenkins06.openstack.org/job/check-tri
2014-05-01T13:39:37  <derekh> pleo-undercloud-precise/574/
2014-05-01T13:39:54  *** dkehn has quit IRC
2014-05-01T13:40:00  <derekh> and only the most recent https://jenkins07.openstack.org/job/check-tripleo-undercloud-precise/672/ contains the gerrit patchnumber in the status page
2014-05-01T13:40:44  *** markmc_ has joined #openstack-infra
2014-05-01T13:40:47  *** dkehn__ has quit IRC
2014-05-01T13:41:57  *** dkehn has joined #openstack-infra
2014-05-01T13:42:25  <openstackgerrit> A change was merged to openstack/requirements: Bump python-keystoneclient to >= 0.8.0  https://review.openstack.org/90745
2014-05-01T13:42:30  *** markmc_ has quit IRC
2014-05-01T13:42:59  <anteaya> derekh: so that is the check-tripelo-undercloud-precise job
2014-05-01T13:43:14  <anteaya> so whatever is going on is not isolated to f20
2014-05-01T13:43:57  <foobio> anteaya: i only skimmed, but i'm missing the gist of the hand-wavey argument about nodepool having something to do with running jobs (nodepool neither runs jobs nor knows anything about them, it just builds instances, assigns them to jenkins masters, and then deletes them again when jenkins says it's done with them)
2014-05-01T13:44:04  *** bknudson has joined #openstack-infra
2014-05-01T13:44:20  <derekh> anteaya: well I'm thinking it might be related , zuul didn't know about the first 5 times that job ran and only registered the 6th one
2014-05-01T13:44:25  *** maxbit has quit IRC
2014-05-01T13:44:26  *** dkranz has joined #openstack-infra
2014-05-01T13:44:51  *** maxbit has joined #openstack-infra
2014-05-01T13:44:58  <anteaya> foobio: okay then I am wrong
2014-05-01T13:45:25  <anteaya> when jobs become disconnected I had thought that nodepool had a role in that
2014-05-01T13:45:52  <anteaya> anyway, it appears that tripleo jobs are running multiple times
2014-05-01T13:46:13  <foobio> what do you mean by jobs becoming disconnected?
2014-05-01T13:46:42  <anteaya> derekh feels zuul doesn't know about running jobs
2014-05-01T13:46:53  <anteaya> perhaps that is an incorrect characterization
2014-05-01T13:47:13  <foobio> zuul will re-run a job if jenkins fails to report a job status on completion (or in the case of a few other jenkins failure modes as well)
2014-05-01T13:47:21  <derekh> foobio: It looks like there are jobs running in the check-tripleo queue but zuul doesn't show them on the status page and for a lot of them is rerunning them
2014-05-01T13:47:43  <anteaya> well perhaps the issue is with jenkins reporting
2014-05-01T13:48:22  <anteaya> derekh: I'm curious how you can see running jobs that aren't showing on the zuul status page
2014-05-01T13:48:31  <anteaya> how are you collecting that data
2014-05-01T13:48:43  <derekh> anteaya: pooling jenkins
2014-05-01T13:48:53  <anteaya> I don't know what that means
2014-05-01T13:49:17  <derekh> anteaya: that is where the goodsquishy page gets its data, by talking to the 7 jenkins API's
2014-05-01T13:49:38  <anteaya> oh okay talking to the jenkins apis
2014-05-01T13:49:42  <foobio> right now nodepool believes there are 7 tripleo-f20 nodes in use
2014-05-01T13:49:42  <anteaya> now I got it
2014-05-01T13:50:23  <derekh> foobio: for the jobs zuul appears to have "lost", the jenkins status page for the jobs are missing the "Triggered by" line (at least the ones I have looked at)
2014-05-01T13:50:25  <derekh> https://jenkins05.openstack.org/job/check-tripleo-undercloud-precise/658/
2014-05-01T13:51:09  <derekh> foobio: ok, but zuul thinks there is non according to status.openstack.org/zuul/
2014-05-01T13:51:57  <foobio> Triggered by: https://review.openstack.org/91161 patchset 3
2014-05-01T13:52:14  *** yamahata has quit IRC
2014-05-01T13:52:47  *** yamahata has joined #openstack-infra
2014-05-01T13:53:04  <foobio> and zuul's status page shows that job ran on that change and has recorded a result of success
2014-05-01T13:53:09  <derekh> foobio: your seeing that here ? https://jenkins05.openstack.org/job/check-tripleo-undercloud-precise/658/
2014-05-01T13:53:17  <foobio> yes
2014-05-01T13:53:21  <foobio> in the console log
2014-05-01T13:53:47  *** eharney has joined #openstack-infra
2014-05-01T13:53:54  <derekh> foobio: no I'm not talking about the console log, I'm talking about the page you get when you hit that URL
2014-05-01T13:54:16  <derekh> foobio: compare to https://jenkins07.openstack.org/job/check-tripleo-undercloud-precise/672/
2014-05-01T13:54:26  <foobio> oh, yeah no idea how jenkins parses that metadata to display the build status page
2014-05-01T13:55:13  <foobio> looks like the build information is empty
2014-05-01T13:55:29  *** dkranz has quit IRC
2014-05-01T13:55:36  <derekh> foobio: so basically , as far as I can see zuul keeps kicking off a job until it gets one that displays the build information
2014-05-01T13:56:11  <openstackgerrit> Alex Conrad proposed a change to openstack-infra/jenkins-job-builder: support execute-on for postbuildscript  https://review.openstack.org/90507
2014-05-01T13:56:29  <foobio> that seems possible. have you noticed a pattern of it only affecting certain jobs or certain node labels or certain jenkins masters?
2014-05-01T13:57:24  <derekh> foobio: nope looks like all jobs, any label or jenkins http://goodsquishy.com/downloads/tripleo-jobs.html
2014-05-01T13:57:44  <derekh> foobio: green lines are jobs that successfully ran, I wouldn't expect to see them again
2014-05-01T13:57:58  <foobio> oh, but only for changes in the tripleo queues or have you seen it other places too?
2014-05-01T13:58:17  <derekh> foobio: I only monitor the tripleo jobs
2014-05-01T13:58:50  <derekh> foobio: If you want I can that the script and check another job in another queue
2014-05-01T13:59:10  *** prad has joined #openstack-infra
2014-05-01T13:59:50  <foobio> i'm just spot-checking the other pipelines and don't see any obvious signs of that behavior, so it could be something specific to how those jobs are completing or to the configuration of those particular nodes
2014-05-01T14:00:27  <sdague> derekh: ++ on extending the monitoring across all the queues, would be good to see if this is more wide spread
2014-05-01T14:00:44  <foobio> definitely would be good to knowe
2014-05-01T14:00:46  <foobio> know
2014-05-01T14:00:56  *** mfer has joined #openstack-infra
2014-05-01T14:01:11  *** chandan_kumar has joined #openstack-infra
2014-05-01T14:01:20  <derekh> sdague: foobio: will pick a job/queue combo and take a look
2014-05-01T14:02:08  *** zz_gondoi is now known as gondoi
2014-05-01T14:03:35  *** yamahata has quit IRC
2014-05-01T14:03:41  <foobio> i've got a couple currently running in that state (both appear to be f20 jobs). i'll have a look in the jenkins log on the corresponding master for any insights
2014-05-01T14:03:55  *** freyes has quit IRC
2014-05-01T14:03:58  *** maxbit_ has joined #openstack-infra
2014-05-01T14:04:02  *** yamahata has joined #openstack-infra
2014-05-01T14:04:35  *** maxbit_ has quit IRC
2014-05-01T14:05:12  *** maxbit_ has joined #openstack-infra
2014-05-01T14:05:22  *** maxbit has quit IRC
2014-05-01T14:05:29  *** maxbit_ has quit IRC
2014-05-01T14:06:40  *** maxbit has joined #openstack-infra
2014-05-01T14:07:10  <jeblair> sdague, anteaya: as a matter of policy, i don't think we should require an existing repo to import -- but i also agree that specs repos should not start empty.  in addition to importing, i would also be okay with blank repo and docs gating jobs, with the subsequent initial commit being cookiecutter output.
2014-05-01T14:07:47  <jeblair> foobio: let me know if you want me to look into anything
2014-05-01T14:08:18  *** aconrad has quit IRC
2014-05-01T14:08:47  <derekh> foobio: thanks , while your looking I'll see if I can get some results for other jobs
2014-05-01T14:08:57  <anteaya> jeblair: *nod
2014-05-01T14:09:11  <foobio> so far the only currently running jobs i find exhibiting this behavior are on tripleo-f20 nodes assigned to jenkins04, 06 and 07
2014-05-01T14:10:03  <anteaya> foobio: what about the check-tripleo-undercloud-precise job that ran 6 times on https://review.openstack.org/#/c/91161/3
2014-05-01T14:10:29  *** dkranz has joined #openstack-infra
2014-05-01T14:10:36  <foobio> yes, that one's not currently running
2014-05-01T14:10:55  <foobio> i'm not suggesting it's completely isolated to f20 nodes, just that they seem to have a much higher incidence of it
2014-05-01T14:11:00  <derekh> foobio: In general our F20 jobs all run together at the end (which is another problem I have) https://bugs.launchpad.net/nodepool/+bug/1308407
2014-05-01T14:11:01  <uvirtbot> Launchpad bug 1308407 in tripleo "Nodepool favouring precise nodes over f20" [Critical,Triaged]
2014-05-01T14:11:12  <anteaya> k
2014-05-01T14:11:46  *** jgrimm has joined #openstack-infra
2014-05-01T14:12:13  *** thedodd has joined #openstack-infra
2014-05-01T14:12:14  *** homeless has joined #openstack-infra
2014-05-01T14:13:22  *** akerr has joined #openstack-infra
2014-05-01T14:13:32  *** zns has quit IRC
2014-05-01T14:14:44  <akerr> So I'm probably doing something wrong, but since the gerrit update, when I follow the instructions to grab the new keys I get the following: "ssh_exchange_identification: read: Operation timed out"   any ideas?  This is when I do the ssh -p 29418… command
2014-05-01T14:15:10  <akerr> i can ping review.openstack.org and see the web interface no problem
2014-05-01T14:15:15  <anteaya> akerr: are you behind a firewall of any kind?
2014-05-01T14:15:29  <foobio> derekh: as for that, yeah i suspect that you have more demand for tripleo-precise nodes and the build time for bringing up new nodes to meet the perceived demand is resulting in some hysteresis
2014-05-01T14:15:31  <akerr> corporate firewall, but it worked up until the update
2014-05-01T14:16:00  <anteaya> akerr: some people are finding the new ip blocked when the other was allowed
2014-05-01T14:16:10  <anteaya> not sure if that is playing a role for you or not
2014-05-01T14:16:23  <akerr> anteaya: ok, I hoped that wasn't the answer, dealing with IT to open ports isn't fun :/
2014-05-01T14:16:26  <foobio> akerr: the ip addresses of review.openstack.org also changed as part of the upgrade. if your corporate firewall had explicitly allowed egress to the old ip addresses they may need to do the same now for the new addresses
2014-05-01T14:16:27  <openstackgerrit> A change was merged to openstack-infra/elastic-recheck: Add a fingerprint for bug 1298355  https://review.openstack.org/90795
2014-05-01T14:16:28  <uvirtbot> Launchpad bug 1298355 in neutron "Lock wait timeout in update VIP status" [Undecided,New] https://launchpad.net/bugs/1298355
2014-05-01T14:16:33  <anteaya> akerr: *nod
2014-05-01T14:16:58  <foobio> akerr: or talk your corporate firewall admins into letting developers reach the internet without deciding what protocols make up the internet ;)
2014-05-01T14:17:14  <akerr> foobio: so I should find a wall to hit my head on?
2014-05-01T14:17:27  <foobio> akerr: i managed to do it... *once*
2014-05-01T14:17:31  <anteaya> might be easier on you
2014-05-01T14:17:39  *** talluri has joined #openstack-infra
2014-05-01T14:17:52  <akerr> well thanks, I guess I'll go start the boulder up the hill
2014-05-01T14:17:53  <foobio> akerr: by becoming one of them, then fixing all the broken systems, watching them all get fired for incompetence, and rewriting policy sanely
2014-05-01T14:18:07  <foobio> akerr: the drawback to that is that then you're stuck as the corporate firewall admin
2014-05-01T14:18:41  <openstackgerrit> A change was merged to openstack-infra/nodepool: Fix race in tests  https://review.openstack.org/91491
2014-05-01T14:18:48  *** e0ne has quit IRC
2014-05-01T14:19:08  *** talluri has quit IRC
2014-05-01T14:19:12  <anteaya> can we submit patches over the gerrit http api?
2014-05-01T14:19:28  <foobio> anteaya: now that we have gerrit 2.8, i think we can start experimenting with that, yes
2014-05-01T14:19:39  *** talluri has joined #openstack-infra
2014-05-01T14:19:51  <jeblair> 2014-04-30 19:48:20,294 INFO zuul.Gearman: Gearman job <gear.Job 0x7fc8ec26b850 handle: H:127.0.0.1:768035 name: build:check-tripleo-undercloud-precise unique: 71ea9bab53b247ca97da4d8dddb018f1> lost due to disconnect
2014-05-01T14:20:11  <foobio> anteaya: i believe much of the code needed for it has already been contributed to git-review by others running newer gerrit servers
2014-05-01T14:20:14  <openstackgerrit> A change was merged to openstack-infra/nodepool: Improve logging/stats around launch errors  https://review.openstack.org/91492
2014-05-01T14:20:20  <phschwartz> morning
2014-05-01T14:20:20  <anteaya> akerr: did you want to investigate the gerrit http api?
2014-05-01T14:20:34  <anteaya> akerr: whilst you set the uphill boulder in motion
2014-05-01T14:20:46  <anteaya> morning phschwartz
2014-05-01T14:21:01  <phschwartz> jeblair: I tested the logging change in my vm test env for my infra setup internal here and it is a very nice improvement +1
2014-05-01T14:21:05  <jeblair> foobio, derekh: ^
2014-05-01T14:21:35  <jeblair> phschwartz: ah cool, i just approved the changes and was going to try for a nodepool restart in a bit
2014-05-01T14:22:28  <foobio> jeblair: derekh: yeah, i'm finding entries in the jenkins log for one of these where it's having trouble communicating with the slave agent for monitoring
2014-05-01T14:22:32  *** gondoi is now known as zz_gondoi
2014-05-01T14:22:50  <derekh> foobio: as I understand it, problem is that we have demand for multiple node type and grants are becomming available one at a time, nodepool is always servicing the precise node as its first in the list, hence my patch to randomly shuffle the list
2014-05-01T14:23:00  *** crc32 has joined #openstack-infra
2014-05-01T14:23:41  <jeblair> foobio: i think that particular error is zuul disconnecting from its geard
2014-05-01T14:24:02  *** talluri has quit IRC
2014-05-01T14:24:02  <jeblair> foobio: (there may be more than one thing going on)
2014-05-01T14:24:10  *** zz_gondoi is now known as gondoi
2014-05-01T14:24:35  <foobio> jeblair: yeah, i don't yet have a clear picture of whether this is something also encountered by other slaves which don't exhibit the problem behavior
2014-05-01T14:24:39  *** alexpilotti has joined #openstack-infra
2014-05-01T14:25:02  <jeblair> but we did drop 5021 jobs yesterday because of the geard disconnection
2014-05-01T14:25:17  *** dstanek has joined #openstack-infra
2014-05-01T14:25:32  <dstanek> bnemec: you around?
2014-05-01T14:26:03  <bnemec> dstanek: On a call, but should be done shortly.
2014-05-01T14:26:03  <dstanek> bnemec: i have a question about your patch: https://review.openstack.org/#/c/91173
2014-05-01T14:26:18  <dstanek> bnemec: ok
2014-05-01T14:26:29  *** gondoi is now known as zz_gondoi
2014-05-01T14:26:54  <foobio> derekh: oh, good point, though perhaps something deterministic like a round-robin interleave would be preferable (always a little wary of randomization)
2014-05-01T14:27:13  *** ArxCruz has joined #openstack-infra
2014-05-01T14:28:25  <jeblair> derekh, foobio: it's not strictly that it allocates precise because it's first -- it allocates precise because its demand is very high.
2014-05-01T14:28:30  <derekh> sdague: foobio jeblair : doesn't seem to be happening at the moment on other jobs http://goodsquishy.com/downloads/other-jobs.html but scroll down to 90476,5 and you'll see a bunch of jobs that got kicked off multiple times
2014-05-01T14:28:53  <jeblair> (order does play a part, but not nearly as much as demand and the min-ready ratios)
2014-05-01T14:29:35  <derekh> jeblair: it doesn't have to be very high the ratio just has to be above .5 for f20 nodes to be ignored (as we only have one node available on each cycle)
2014-05-01T14:29:56  <foobio> jeblair: do you happen to know what normally populates the "build information" in jenkins (where it displays the link to the gerrit change, list of assicoated builds and list of other changes tested with it, et cetera)?
2014-05-01T14:30:02  <jeblair> foobio: zuul
2014-05-01T14:30:20  <foobio> okay, so that's a field zuul injects html into?
2014-05-01T14:30:26  <jeblair> yup
2014-05-01T14:31:06  *** david-lyle has joined #openstack-infra
2014-05-01T14:32:21  <derekh> foobio: I could try a round-robin algoritm, will see if I can get it right given different weights
2014-05-01T14:32:23  <foobio> jeblair: and zuul does that via jenkins api after the job task is grabbed from the gearman queue, or is it part of the gearman packet?
2014-05-01T14:34:02  <jeblair> foobio: it's another gearman job
2014-05-01T14:36:11  *** wenlock has joined #openstack-infra
2014-05-01T14:37:07  <anteaya> jeblair: is it worth trying to extend git review to allow for commands over the REST api?
2014-05-01T14:37:35  <anteaya> jeblair: or would it be better to refine gertty and suggest folks that want to use the api instead of ssh use gertty?
2014-05-01T14:37:41  <jeblair> 2014-04-30 19:21:35,739 INFO zuul.Gearman: Gearman job <gear.Job 0x7fc8b454a410 handle: H:127.0.0.1:761517 name: build:check-tempest-dsvm-full unique: d3f737f004d543e3b9883d3555ab5ea2> lost due to disconnect
2014-05-01T14:37:53  <jeblair> 2014-04-30 19:48:20,307 INFO zuul.Gearman: Gearman job <gear.Job 0x7fc8e128e850 handle: H:127.0.0.1:767750 name: build:check-tempest-dsvm-full unique: a03fb3c899154365b9555e645ab158b1> lost due to disconnect
2014-05-01T14:38:08  <jeblair> 2014-04-30 19:55:34,878 INFO zuul.Gearman: Gearman job <gear.Job 0x7fc9166d3490 handle: H:127.0.0.1:786256 name: build:check-tempest-dsvm-full unique: 645813b16f594886b3ec6d9dd6e63f91> lost due to disconnect
2014-05-01T14:38:18  <jeblair> 2014-04-30 20:10:53,810 INFO zuul.Gearman: Gearman job <gear.Job 0x7fc8e2143f10 handle: H:127.0.0.1:791682 name: build:check-tempest-dsvm-full unique: 9c3c6bb2463442beb4459bdee9c6b94e> lost due to disconnect
2014-05-01T14:38:23  <foobio> i wonder whether there were network issues in one of our providers last night
2014-05-01T14:39:03  <jeblair> 2014-05-01 01:25:34,589 INFO zuul.Gearman: Build <gear.Job 0x7fc8e01869d0 handle: H:127.0.0.1:800047 name: build:check-tempest-dsvm-full unique: 7819a9c3325e445fa29b541266c0724a> complete, result SUCCESS
2014-05-01T14:39:05  <foobio> nothing obvious in rackspace's status page
2014-05-01T14:39:09  <anteaya> also is the date and time in the gerrit 2.8 comments utc time?
2014-05-01T14:39:25  <jeblair> derekh: that's the outcome of each build of 90476,5
2014-05-01T14:39:34  <jeblair> foobio: zuul and geard are on the same server
2014-05-01T14:39:36  *** zz_gondoi is now known as gondoi
2014-05-01T14:39:45  *** akerr has left #openstack-infra
2014-05-01T14:39:48  <jeblair> 2014-04-30 18:58:26,506 ERROR gear.Client.unknown: Connection <gear.Connection 0x29ab7d0 host: 127.0.0.1 port: 4730> timed out waiting for a response to a submit job request: <gear.Job 0x7fc915a28710 handle: None name: stop:jenkins05.openstack.org unique: 9c69ff5edd7440d68fb64df07f4e1033>
2014-05-01T14:39:49  <jeblair> foobio: ^
2014-05-01T14:40:01  <foobio> oh, right, so this is local socket disconnects between zuul and its gear daemon process
2014-05-01T14:40:21  <jeblair> yep, because geard was too slow
2014-05-01T14:40:36  *** dkehn_ is now known as dkehnx
2014-05-01T14:41:05  <jeblair> (for an unknown reason)
2014-05-01T14:41:22  <foobio> it's too bad cacti is abandoned on ubuntu 12.04 lts or we'd be able to look at performance graphs for the server... http://people.canonical.com/~ubuntu-security/cve/2014/CVE-2014-2708.html
2014-05-01T14:41:23  <uvirtbot> foobio: Multiple SQL injection vulnerabilities in graph_xport.php in Cacti 0.8.7g, 0.8.8b, and earlier allow remote attackers to execute arbitrary SQL commands via the (1) graph_start, (2) graph_end, (3) graph_height, (4) graph_width, (5) graph_nolegend, (6) print_source, (7) local_graph_id, or (8) rra_id parameter. (http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-2708)
2014-05-01T14:41:46  <jeblair> foobio: hrm, cacti is running.
2014-05-01T14:42:04  <foobio> oh, so it is
2014-05-01T14:42:10  <phschwartz> jeblair: I have noticed that geard is not the most efficient when it comes to actually responding to requests. Seems like a latency issue in the software
2014-05-01T14:42:32  <jeblair> foobio: i assumed someone started it because the patch was applied
2014-05-01T14:42:45  *** atiwari has joined #openstack-infra
2014-05-01T14:45:00  <bnemec> dstanek: Okay, I'm free
2014-05-01T14:45:21  <jeblair> foobio: ironically, i think it was rebooted because of heartbleed and apache was not stopped then.
2014-05-01T14:45:39  <foobio> jeblair: fixed in debian with the 0.8.8b+dfsg-4 upload a few weeks ago https://bugs.debian.org/743565 but not backported to anything besides trusty
2014-05-01T14:45:58  <jeblair> foobio: that's pretty lame.  :(
2014-05-01T14:46:06  <dstanek> bnemec: i tried the patch and it does seem to parse the patchset data better, but it looks like it's not dealing with age properly
2014-05-01T14:46:29  <dstanek> bnemec: were you not having that issue? i'm trying to see if it's just my environment
2014-05-01T14:46:30  <bnemec> dstanek: Yeah, but as I mentioned in the commit message I don't think that's reviewstats.  The data is actually bad.
2014-05-01T14:46:42  <bnemec> It appears that every vote's timestamp got updated to the same time during the upgrade.
2014-05-01T14:46:52  <jeblair> foobio: how about i "rm /usr/share/cacti/site/graph_xport.php" ?
2014-05-01T14:46:56  <bnemec> So every vote that happened pre-2.8 is now showing up as a couple of days old.
2014-05-01T14:47:17  <bnemec> I've been meaning to follow-up on that and see if it can be fixed somehow.
2014-05-01T14:47:18  <foobio> jeblair: i would accept that as an option
2014-05-01T14:48:50  *** pcrews_ has joined #openstack-infra
2014-05-01T14:48:59  <dstanek> bnemec: oh, that's interesting
2014-05-01T14:49:02  *** rfolco has quit IRC
2014-05-01T14:49:09  <jeblair> foobio: done
2014-05-01T14:49:23  <foobio> bnemec: dstanek: i blame gerrit. it makes extensive use of mysql auto-timestamp fields rather than bothering to manage its own timestamping on things, which is hella-lame
2014-05-01T14:50:19  <bnemec> dstanek: foobio: I think it was only two timestamps (one for code reviews and one for approvals), so we could theoretically filter out the bad data in reviewstats.
2014-05-01T14:50:34  <bnemec> It means we'll only have stats back to the upgrade, but that's probably more useful than what we've got now.
2014-05-01T14:50:36  *** manishg has quit IRC
2014-05-01T14:50:54  <foobio> bnemec: dstanek: which means for certain tables, if you go in and update row contents for a data migration of some sort, mysql "conveniently" updates the timestamp for the row
2014-05-01T14:51:38  *** annegentle has joined #openstack-infra
2014-05-01T14:51:41  <dstanek> bnemec: i think that would be great - i use reviewstats as sort of a heartbeat to make sure i'm spending enough time on reviews
2014-05-01T14:51:59  <jeblair> we do have the old data though, so it may be possible to correct
2014-05-01T14:52:04  <bnemec> dstanek: Likewise.  That's why I wanted to get it fixed. :-)
2014-05-01T14:52:37  <dstanek> foobio: can that be turned off during a migration in MySQL?
2014-05-01T14:52:44  <foobio> agreed, but it's probably a fair amount of work... maybe zaro wants to investigate and put together a recommended set of queries for that
2014-05-01T14:53:19  <sdague> I found a new interesting gerrit upgrade bug
2014-05-01T14:53:23  <jeblair> bnemec: can you work up an etherpad documenting the issues?
2014-05-01T14:53:31  <sdague> when you click on the first file to review
2014-05-01T14:53:42  <bnemec> jeblair: Sure
2014-05-01T14:53:43  <foobio> dstanek: well, there are workarounds for it (like adding colname=colname for the timestamp column in your update query) but now that dhip has sailed
2014-05-01T14:53:48  <sdague> the vertical scroll bar possition stays at what it was on the overview page
2014-05-01T14:53:57  <sdague> which means you might be deep into the patch
2014-05-01T14:54:03  <foobio> s/dhip/ship/
2014-05-01T14:54:08  <dstanek> foobio: i'm just thinking ahead to the next one :-)
2014-05-01T14:54:13  *** matsuhashi has quit IRC
2014-05-01T14:54:33  <foobio> dstanek: yeah, we discovered it a while back and implemented workarounds in our documented processes for things like project renames/moves
2014-05-01T14:54:52  <foobio> but probably missed it in the gerrit upgrade (or it's missed in gerrit's own upgrade scripts)
2014-05-01T14:54:53  *** yamahata has quit IRC
2014-05-01T14:54:57  *** markmcclain has joined #openstack-infra
2014-05-01T14:55:02  <dstanek> foobio: sounds like fun
2014-05-01T14:55:30  <foobio> add to the list of "things which seem like a convenient option, but really aren't and you should never make use of them in your own software"
2014-05-01T14:55:39  <dstanek> the other thing i noticed with the new gerrit is that i periodicallly get blank pages
2014-05-01T14:56:01  <dstanek> they contain a little javascript snippet, but that's it - a refresh fixes the issue though
2014-05-01T14:57:49  <dstanek> actually it may be anytime i open the link in a new tab
2014-05-01T14:58:18  *** markmcclain1 has joined #openstack-infra
2014-05-01T14:58:18  <foobio> dstanek: maybe you're conflicting with the change gerrit made to start forcing links to open in a new tab/window
2014-05-01T14:59:25  <dstanek> foobio: could be, but if i go here https://review.openstack.org/#/q/status:open+project:openstack/keystone,n,z
2014-05-01T14:59:30  <foobio> oh, though it's mostly not configured to do that for internal links back to its own pages, only for links to outside resources
2014-05-01T14:59:40  <dstanek> those links don't open in new tabs so i do that myself
2014-05-01T14:59:41  *** markmcclain has quit IRC
2014-05-01T15:00:42  <hughsaunders> hey all, who looks after paste.openstack.org? seems to be struggling a little today
2014-05-01T15:00:58  <foobio> dstanek: in firefox 24 a ctrl-click on those links doesn't get me a blank tab. what are you running?
2014-05-01T15:01:58  <anteaya> my gertty log today is full of this error: http://paste.openstack.org/show/78234/
2014-05-01T15:02:20  <anteaya> hughsaunders: hi, we do, paste.o.o is slow
2014-05-01T15:02:22  <dstanek> foobio: i'm running chrome
2014-05-01T15:02:41  <dstanek> foobio: on mac
2014-05-01T15:02:52  <hughsaunders> anteaya: cool, thanks for running it, most useful :)
2014-05-01T15:03:06  <foobio> hughsaunders: watching top on paste.o.o, drizzled seems to eat 100% of a cpu for extended periods when i request a paste with my browser
2014-05-01T15:03:40  <foobio> i've heard it suggested that the version of drizzle providing the db backend on it is prone to sluggishness
2014-05-01T15:03:54  <anteaya> hughsaunders: thanks but looking at cacti, the cached memory took a jump this morning: http://cacti.openstack.org/cacti/graph_view.php?action=tree&tree_id=1&leaf_id=14&page=2
2014-05-01T15:04:05  *** marun has joined #openstack-infra
2014-05-01T15:04:55  <foobio> also drizzled seems to be eating over a gigabyte of virtual memory, though that's only about half of the allocated system ram and there's little else contending for it on the vm
2014-05-01T15:06:49  <jeblair> foobio: mordred said something about not having any buffers configured the other day.  i don't know if he did anything about that though.
2014-05-01T15:06:59  <foobio> ohhh
2014-05-01T15:07:26  *** yamahata has joined #openstack-infra
2014-05-01T15:07:35  <jeblair> 2014-04-22T22:16:51  <mordred> there's no real reason that our current paste should be slow ... oh, except there is no buffer pool configured
2014-05-01T15:07:36  <jeblair> 2014-04-22T22:16:54  <mordred> *facepalm*
2014-05-01T15:07:47  <hughsaunders> is it using innodb?
2014-05-01T15:07:50  <jeblair> 2014-04-22T22:17:27  <clarkb> mordred: does that mean you are going to fix it?
2014-05-01T15:07:54  <jeblair> 2014-04-22T22:17:42  <mordred> clarkb: well, by "fix it" first I mean" move it to trove"
2014-05-01T15:08:00  <jeblair> foobio: http://eavesdrop.openstack.org/irclogs/%23openstack-infra/%23openstack-infra.2014-04-22.log
2014-05-01T15:08:08  <foobio> jeblair: great context, thanks
2014-05-01T15:08:34  <foobio> also, since we have cacti after all, i'm seeing that zuul is about to run out of space on / again
2014-05-01T15:08:45  <foobio> probably debug logs
2014-05-01T15:09:48  *** gondoi is now known as zz_gondoi
2014-05-01T15:09:50  <foobio> yeah, about 70% of the data on / is in /var/log/zuul
2014-05-01T15:10:29  <foobio> i guess it's not eating through it all that quickly though
2014-05-01T15:10:29  <jeblair> yup, we need to compress those
2014-05-01T15:10:41  <jeblair> foobio: i just manually deleted some.  it'll run out again if we don't fix it.
2014-05-01T15:11:25  <foobio> k
2014-05-01T15:11:42  <jeblair> so... if you have 1000 jenkins slaves (which we do, more or less), and they can run 2500 jobs (which ours can, more or less).  that's 2.5 million gearman function registrations.
2014-05-01T15:12:03  <mordred> jeblair: dude
2014-05-01T15:12:06  <mordred> that's a lot
2014-05-01T15:12:34  <jeblair> (i'm setting up a geard stress test, and that's the first thing i noticed -- it takes a while for my 1000 slaves to register their functions)
2014-05-01T15:20:00  <anteaya> mordred: can you look at these? https://review.openstack.org/#/q/status:open+project:openstack-infra/gitdm,n,z poor StevenK has been waiting over a month
2014-05-01T15:21:34  <mordred> anteaya: on it
2014-05-01T15:21:38  <anteaya> mordred: thanks
2014-05-01T15:21:53  <mordred> foobio: think we should migrate paste to trove?
2014-05-01T15:21:54  <sdague> anteaya: I've got +2 on that as well if needed
2014-05-01T15:22:06  <anteaya> sdague: awesome thanks
2014-05-01T15:22:13  <anteaya> let's see what mordred does
2014-05-01T15:22:48  <mordred> OMG
2014-05-01T15:22:51  <anteaya> just as a note, I am waiting for input from jeblair on https://review.openstack.org/#/c/89421/ since I need to here what direction he wants to go in, the infra-manuals publish job
2014-05-01T15:22:58  <anteaya> hear
2014-05-01T15:23:02  *** jaypipes has quit IRC
2014-05-01T15:23:19  <foobio> mordred: seems like a sane idea. drizzle is mysql-like enough that we can just mysqldump and then source the result in trove, right?
2014-05-01T15:23:23  <mordred> why would I ever want the link to a project on a change to take me to the admin screen for that project and not for other changes for that project
2014-05-01T15:23:29  <mordred> foobio: that's right
2014-05-01T15:23:33  *** mrodden has joined #openstack-infra
2014-05-01T15:23:42  <sdague> mordred: oh, yeh, I notice that this morning as well
2014-05-01T15:23:43  <mordred> foobio: I think I put up a change already to add hostname support
2014-05-01T15:23:50  *** zz_gondoi is now known as gondoi
2014-05-01T15:23:52  *** zns has joined #openstack-infra
2014-05-01T15:23:54  <sdague> the magnifying glass takes you where you want
2014-05-01T15:23:55  <foobio> mordred: i'll find it
2014-05-01T15:23:58  <mordred> sdague: yah
2014-05-01T15:26:06  *** ociuhandu has joined #openstack-infra
2014-05-01T15:26:54  <openstackgerrit> A change was merged to openstack-infra/gitdm: Add StevenK to the HP group list  https://review.openstack.org/82706
2014-05-01T15:27:14  *** changbl has joined #openstack-infra
2014-05-01T15:27:29  *** manishg has joined #openstack-infra
2014-05-01T15:27:56  *** mestery has quit IRC
2014-05-01T15:28:30  *** yfried has quit IRC
2014-05-01T15:29:17  *** manishg has quit IRC
2014-05-01T15:33:26  <openstackgerrit> A change was merged to openstack-infra/gitdm: Update mtreinish's employment history  https://review.openstack.org/90439
2014-05-01T15:34:32  *** zns has quit IRC
2014-05-01T15:35:26  <anteaya> thanks
2014-05-01T15:36:53  *** ociuhandu has quit IRC
2014-05-01T15:36:59  <jeblair> sdague, mordred: yep, there are 8x more pixels devoted to navigating you to the admin screen than there are for getting you to the list of changes to the project.  i'm pretty sure that's because the admin screen in 8x more important than the list of changes in a project.
2014-05-01T15:38:14  *** zns has joined #openstack-infra
2014-05-01T15:38:56  <sdague> jeblair: heh
2014-05-01T15:39:01  *** chandan_kumar has quit IRC
2014-05-01T15:39:58  *** maxbit_ has joined #openstack-infra
2014-05-01T15:40:16  *** maxbit_ has quit IRC
2014-05-01T15:40:50  <annegentle> hey mordred I had a great call with Colette Alexander and Doug Moran this week
2014-05-01T15:41:57  *** manishg has joined #openstack-infra
2014-05-01T15:42:29  <mordred> annegentle: awesome! I hear that went well
2014-05-01T15:43:34  *** rfolco has joined #openstack-infra
2014-05-01T15:43:38  *** maxbit has quit IRC
2014-05-01T15:47:07  <jeblair> anteaya: why are you waiting for input from me on that?
2014-05-01T15:47:35  <anteaya> jeblair: yes
2014-05-01T15:47:39  <anteaya> oh why
2014-05-01T15:47:46  <anteaya> because there are two option outlined
2014-05-01T15:48:06  <anteaya> and I have my inclinations but would like to hear your preference
2014-05-01T15:48:11  *** gondoi is now known as zz_gondoi
2014-05-01T15:48:27  <anteaya> I can just go with my inclination if you would like
2014-05-01T15:48:46  <jeblair> anteaya: where are the two options?
2014-05-01T15:48:54  *** zz_gondoi is now known as gondoi
2014-05-01T15:50:26  <anteaya> mgagne: gave two suggestions: https://review.openstack.org/#/c/89421/9/modules/openstack_project/files/jenkins_job_builder/config/infra-publish-jobs.yaml
2014-05-01T15:50:46  <anteaya> AFAIK, jeblair would like the folder to be named "manual". In this case, the JJB variable {name} will be replaced by the JJB project name: infra-manual. The manual will get uploaded to infra/infra-manual which isn't good.
2014-05-01T15:50:48  <anteaya> In the end, if the project name seldom corresponds to the folder name into which the docs is published, I suggest introducing a new JJB variable: doc-publisher-folder.
2014-05-01T15:50:50  <anteaya> This JJB variable should be added to projects.yaml and defined with the value "manual":
2014-05-01T15:51:15  <anteaya> it is to do with the format for naming the job and the resultant url
2014-05-01T15:53:43  <bnemec> dstanek: foobio: jeblair: https://etherpad.openstack.org/p/gerrit-2.8-reviewstats
2014-05-01T15:55:16  <jeblair> anteaya: option (A)
2014-05-01T15:55:34  <anteaya> jeblair: thank you
2014-05-01T15:55:52  <anteaya> that was the one I like too
2014-05-01T15:58:21  *** UtahDave has joined #openstack-infra
2014-05-01T15:59:30  *** eharney has quit IRC
2014-05-01T16:00:13  <jeblair> bnemec: so we need to find the fields in the db with the wrong data
2014-05-01T16:00:21  <jeblair> bnemec: in order to do that, i need to find the fields in the query with the wrong data
2014-05-01T16:00:42  <jeblair> bnemec: so let's come up with a query that illustrates it
2014-05-01T16:00:53  *** thomasem has quit IRC
2014-05-01T16:01:00  *** packet has joined #openstack-infra
2014-05-01T16:01:05  *** packet has quit IRC
2014-05-01T16:01:22  *** thomasem has joined #openstack-infra
2014-05-01T16:01:29  *** thomasem has quit IRC
2014-05-01T16:01:34  <jeblair> bnemec: let's start with finding one change that illustrates (at least one, ideally all of) the problem(s)
2014-05-01T16:02:07  *** thomasem has joined #openstack-infra
2014-05-01T16:02:29  <bnemec> jeblair: A db query or the Gerrit query reviewstats uses?  I don't think reviewstats directly queries the db so I'm not sure I have access to that.
2014-05-01T16:02:32  <openstackgerrit> Derek Higgins proposed a change to openstack-infra/config: Create tripleo-specs git repo  https://review.openstack.org/89691
2014-05-01T16:02:41  *** packet has joined #openstack-infra
2014-05-01T16:02:43  <jeblair> bnemec: no, an ssh query (which is what reviewstats uses)
2014-05-01T16:03:05  <bnemec> jeblair: Cool, I should be able to do that.
2014-05-01T16:03:20  <jeblair> bnemec: cool
2014-05-01T16:03:51  <derekh> jeblair: foobio: is there anything I can do for the vanishing jobs issue ? or is there more investigations to be done?
2014-05-01T16:04:44  *** sweston has joined #openstack-infra
2014-05-01T16:04:47  <mordred> jeblair: just read the etherpad above - do you think it's worth trying to extract the old timestamps from the db dump?
2014-05-01T16:04:49  <jeblair> derekh: no i think we identified the problem a while ago -- zuul dropped the gearman connection and relaunched running jobs
2014-05-01T16:04:57  <jeblair> mordred: that's what i'm trying to facilitate.
2014-05-01T16:05:05  *** markmcclain1 has quit IRC
2014-05-01T16:05:09  <jeblair> mordred: i'm trying to identify what timestamps need to be extracted.
2014-05-01T16:06:05  <mordred> kk
2014-05-01T16:07:42  <derekh> jeblair: ok, so there are still running jobs that zuul doesn't know about, do I just need to wait it out
2014-05-01T16:08:17  <jeblair> derekh: link to one?  the example i looked at was from yesterday
2014-05-01T16:08:39  <derekh> jeblair: https://jenkins04.openstack.org/job/check-tripleo-overcloud-f20/229/
2014-05-01T16:08:47  *** weshay has quit IRC
2014-05-01T16:09:02  <foobio> this one is currently running and has no build status... https://jenkins07.openstack.org/job/check-tripleo-overcloud-f20/264/
2014-05-01T16:09:10  <jeblair> 2014-04-30 20:10:53,501 INFO zuul.Gearman: Gearman job <gear.Job 0x7fc8c4919f10 handle: H:127.0.0.1:792065 name: build:check-tripleo-overcloud-f20 unique: 275628aeaa5f46a291c6aab17b9cb3be> lost due to disconnect
2014-05-01T16:10:12  <foobio> ahh, right, "from yesterday" meaning the change was enqueued yesterday, not that the job started yesterday
2014-05-01T16:11:05  *** mrodden has quit IRC
2014-05-01T16:11:43  *** eharney has joined #openstack-infra
2014-05-01T16:12:03  <jeblair> i'm a little surprised that ended up running; i need to think about whether that's the right thing for geard to do in this case.
2014-05-01T16:12:42  *** matty_dubs is now known as matty_dubs|lunch
2014-05-01T16:13:13  *** talluri has joined #openstack-infra
2014-05-01T16:13:43  <foobio> the one currently running which i linked was similarly lost between zuul/gear at 20:10:53 yesterday
2014-05-01T16:14:55  <zaro> morning
2014-05-01T16:15:18  <foobio> i find it odd that it's just tripleo jobs which are getting perpetually restarted due to this. we don't seem to have changes in other pipelines sticking around exhibiting this behavior
2014-05-01T16:16:08  <foobio> even though there were changes in other pipelines affected by the disconnects, according to the logs
2014-05-01T16:19:44  <jeblair> foobio: are you saying no changes other than tripleo-related ones were restarted?
2014-05-01T16:20:21  <anteaya> morning zaro
2014-05-01T16:20:35  <anteaya> zaro: is gerrit 2.8 commenting using utc time?
2014-05-01T16:21:11  <foobio> jeblair: i don't know that no other changes were restarted, just that we have tripleo changes with jobs getting rerun which were originally enqueued yesterday
2014-05-01T16:21:34  <foobio> and it doesn't look like we have changes in any other queues for anywhere near that long
2014-05-01T16:21:44  <jeblair> foobio: tripleo doesn't have enough nodes
2014-05-01T16:22:09  <jeblair> foobio: those changes were likely actually waiting that long
2014-05-01T16:22:27  <foobio> yeah, pinning down whether they're getting restarted more than once since yesterday is proving challenging
2014-05-01T16:22:52  <jogo> how did this happen? http://logs.openstack.org/75/91375/1/gate/gate-glance-python26/9c03553/console.html#_2014-05-01_02_40_45_316
2014-05-01T16:23:09  <jogo> a dependency escaped the pypi mirror
2014-05-01T16:23:12  <bnemec> jeblair: I think you already saw it, but I added a query for a single change demonstrating the problem in https://etherpad.openstack.org/p/gerrit-2.8-reviewstats
2014-05-01T16:23:20  <foobio> though at this point i'm really only finding restarts on f20-based jobs which would support the supposition that they really did just get disconnected and not rerun until 20+ hours later
2014-05-01T16:24:16  <foobio> or rather, that they got lost in zuul but took 20+ hours before a jenkins master had an available node of that type to go ahead and run the job (even though at this point zuul doesn't know it's being run)
2014-05-01T16:24:26  <jeblair> bnemec: so it looks like it's all the votes, but not the submit time.  any other times affected?
2014-05-01T16:24:28  *** weshay has joined #openstack-infra
2014-05-01T16:24:45  *** mrodden has joined #openstack-infra
2014-05-01T16:25:46  <jogo> foobio: ^
2014-05-01T16:26:02  <bnemec> jeblair: Not that I've seen.  The createdOn and lastUpdated times look reasonable on that change, and those are the only other timestamps I see.
2014-05-01T16:26:06  <jeblair> foobio: i think i found a bug in geard
2014-05-01T16:26:20  <derekh> foobio: but the jobs I was looking at origionaly started yesterday evening and have been continuously restarted overnight some upto 6 times
2014-05-01T16:26:31  <derekh> foobio: the problems on check-tempest-dsvm-full	check-tempest-dsvm-neutron
2014-05-01T16:26:36  <derekh> also ran upto 6 times
2014-05-01T16:26:47  <derekh> foobio: but got cleared a lot quicker
2014-05-01T16:27:09  <jeblair> derekh: because it runs on precise nodes and they come up more often.
2014-05-01T16:27:59  <foobio> jogo: that's interesting... that job seems to have tried to download the req from somewhere other than our mirror
2014-05-01T16:28:39  <jeblair> it's worth noting that if geard has jobs queued that zuul does not know about, nodepool can not take them into consideration when it's calculating load.
2014-05-01T16:28:43  <jogo> foobio: yeah I can't figure out how that happened
2014-05-01T16:28:46  <derekh> jeblair: I'm talking about the check queue, not tripleo, what I mean is the same problem happened at the same time, only the multiple jobs got cleared a lot faster because the quota to handle them is higher
2014-05-01T16:28:56  *** jpich has quit IRC
2014-05-01T16:29:12  <jogo> foobio: oh shit I found it
2014-05-01T16:29:20  *** talluri has quit IRC
2014-05-01T16:29:25  <foobio> jogo: http://git.openstack.org/cgit/openstack/glance/tree/test-requirements.txt#n22
2014-05-01T16:29:28  <jogo> http://git.openstack.org/cgit/openstack/glance/tree/test-requirements.txt#n22
2014-05-01T16:29:31  <jogo> yuyp
2014-05-01T16:29:32  <jogo> derp
2014-05-01T16:29:32  <foobio> heh
2014-05-01T16:29:35  <foobio> git blame here i come
2014-05-01T16:30:03  <jeblair> derekh: yeah.  i'm trying to figure out if we're talking past each other.  i think the problem is well explained at this point; is there something you think we're missing?
2014-05-01T16:30:38  <dstanek> bnemec: nice
2014-05-01T16:31:07  <mordred> jogo: how did that make it past the requirements gate?
2014-05-01T16:31:20  <derekh> jeblair: no if ye are happy, I'm happy, I just saw a comment saying this was possibly only related to the check-tripleo queue, all I was saying is that wasn't true
2014-05-01T16:31:26  <foobio> jogo: https://review.openstack.org/#/c/59699/12/test-requirements.txt
2014-05-01T16:31:27  *** jooools has quit IRC
2014-05-01T16:31:29  <dstanek> bnemec: instead of filtering out specific timestamps can you just pick one and filter anything before it?
2014-05-01T16:31:30  <foobio> wtf?
2014-05-01T16:31:31  *** nati_ueno has joined #openstack-infra
2014-05-01T16:31:53  <jogo> mordred: because the global reqs check probablly doesn't work when a specific file is called for
2014-05-01T16:32:20  <mordred> jogo: oh! I think we explicitly don't try to check those because of legacy
2014-05-01T16:32:26  <mordred> we should remove that exclusion to the check
2014-05-01T16:32:38  <jogo> mordred: ++
2014-05-01T16:32:46  <foobio> clearly it allows people to act carelessly
2014-05-01T16:32:55  <bnemec> dstanek: Yeah, potentially.  I figured out why Approvals aren't showing up too.  I probably need to update my patch Approved -> Workflow.
2014-05-01T16:33:24  <jeblair> derekh: cool, i agree with you that it is not tripleo-specific (we may be more likely to see evidence of it there due to the differences in node availability)
2014-05-01T16:33:32  *** marcoemorais has joined #openstack-infra
2014-05-01T16:33:41  <derekh> jeblair: yup
2014-05-01T16:34:05  <jeblair> bnemec: approved will show up in older changes, workflow in newer ones; probably best to handle both
2014-05-01T16:34:22  *** alexpilotti has quit IRC
2014-05-01T16:34:29  <jogo> mordred: also pysendfile is in our mirror already
2014-05-01T16:34:36  <bnemec> jeblair: Yeah, makes sense.
2014-05-01T16:34:47  <mordred> jogo: yah. you fixing or you want me to?
2014-05-01T16:34:47  *** zns has quit IRC
2014-05-01T16:35:05  <jogo> mordred: we should just ban '-f ' to external deps
2014-05-01T16:35:11  <jogo> mordred: I am writting up a glance patch
2014-05-01T16:35:30  <foobio> jogo: mordred: i'm thinking it may have been in response to this comment in the bug linked from that commit message...
2014-05-01T16:35:32  <foobio> https://bugs.launchpad.net/glance/+bug/1271806/comments/3
2014-05-01T16:35:33  <uvirtbot> Launchpad bug 1271806 in glance "unable to run tests due to missing deps in the virtual env" [Wishlist,Fix released]
2014-05-01T16:35:37  <mordred> jogo: we should just hard-ban anything thats not in global requirements without exclusions
2014-05-01T16:37:32  <jogo> foobio: hehe wow
2014-05-01T16:37:33  <foobio> strangely, pysendfile has been in our mirror for more than a year... http://pypi.openstack.org/openstack/pysendfile/
2014-05-01T16:37:38  <jogo> mordred: ++
2014-05-01T16:37:55  <jogo> foobio: it looks like that was a local failure the guy saw or something
2014-05-01T16:37:56  <anteaya> I have a concern about the commiter offering patch 12, not a trivial change with no other reviews and self-approving
2014-05-01T16:37:59  <mordred> where is our actual "must match global requirements" check?
2014-05-01T16:38:16  <jogo> mordred: in PBR I think
2014-05-01T16:38:42  <jogo> foobio: https://review.openstack.org/91603
2014-05-01T16:38:52  <foobio> jogo: ahh, yep, that was around the time pip updated to start refusing externally-linked packages, so that was probably a contributor to the confusion there
2014-05-01T16:39:05  <jogo> yeah
2014-05-01T16:39:05  <mordred> that's the integration job - I don't see the check for does your change match
2014-05-01T16:39:12  * jogo files a glance bug to track 
2014-05-01T16:39:12  <zaro> anteaya: i'm not sure.  can you tell?
2014-05-01T16:39:24  <foobio> jogo: good, goof
2014-05-01T16:39:31  <foobio> s/goof/good/
2014-05-01T16:40:13  <mordred> foudn it
2014-05-01T16:40:50  *** sacharya has joined #openstack-infra
2014-05-01T16:41:18  <anteaya> zaro: I was hoping someone would know, I will keep an eye on it and see if I can track it
2014-05-01T16:41:21  <anteaya> zaro: thanks
2014-05-01T16:42:51  <openstackgerrit> Monty Taylor proposed a change to openstack-infra/config: Stop giving -f and -e lines a pass in requirements  https://review.openstack.org/91604
2014-05-01T16:43:00  <mordred> foobio, jogo: ^^
2014-05-01T16:43:20  *** Longgeek has quit IRC
2014-05-01T16:43:38  <jogo> mordred: I saw that out of the corner of my eye and thought it said "stop giving an f*"
2014-05-01T16:43:41  <jogo> a f*
2014-05-01T16:43:55  <foobio> quite the opposite, in fact ;)
2014-05-01T16:43:56  <jogo> mordred foobio: https://bugs.launchpad.net/glance/+bug/1315062 tracking bug
2014-05-01T16:43:59  <uvirtbot> Launchpad bug 1315062 in glance "don't pull pysendfile from googlecode" [Undecided,New]
2014-05-01T16:44:41  <jogo> foobio: yup hehe
2014-05-01T16:45:24  <foobio> mordred: does the reqs sync proposal script also ignore -e and -f lines when building patches? if so, we should probably fix that too
2014-05-01T16:46:09  *** bhuvan has joined #openstack-infra
2014-05-01T16:46:51  <foobio> mordred: also, this might end up leaving us unable to update requirements on projects in havana... weren't we linking to a tarball of an oslo.messaging beta in the havana timeframe?
2014-05-01T16:46:53  *** lakshmi has joined #openstack-infra
2014-05-01T16:47:50  <foobio> oh, actually no i think we successfully avoided releasing havana with links to unreleased beta reqs
2014-05-01T16:48:08  <foobio> so if we're not fine there, it needs to be broken so it becomes more visible
2014-05-01T16:49:59  <mordred> jogo: looks like we're slow on the draw and someone else already filed the bug and the patch
2014-05-01T16:50:11  <jogo> mordred: oh
2014-05-01T16:50:12  <jogo> link?
2014-05-01T16:50:15  <jogo> mordred: damn
2014-05-01T16:50:56  <jogo> ahh https://review.openstack.org/#/c/91547/
2014-05-01T16:51:37  <foobio> yeah, the reqs proposal script seems to ignore things which don't look like normal requirements (to handle comments and whatnot)... https://review.openstack.org/#/c/88719/6/test-requirements.txt
2014-05-01T16:51:39  *** etoews has joined #openstack-infra
2014-05-01T16:54:23  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/elastic-recheck: Add fingerprint for bug 1315062  https://review.openstack.org/91605
2014-05-01T16:54:24  <uvirtbot> Launchpad bug 1315062 in glance "don't pull pysendfile from googlecode (dup-of: 1314968)" [Undecided,New] https://launchpad.net/bugs/1315062
2014-05-01T16:54:25  <uvirtbot> Launchpad bug 1314968 in glance "Installing test-requirements fails because pysendfile.2.0.0.tar.gz cannot be found" [Undecided,In progress] https://launchpad.net/bugs/1314968
2014-05-01T16:54:29  <openstackgerrit> Ben Nemec proposed a change to openstack-infra/reviewstats: Update for Gerrit 2.8  https://review.openstack.org/91173
2014-05-01T16:54:31  <openstackgerrit> Ben Nemec proposed a change to openstack-infra/reviewstats: Workaround the Gerrit upgrade timestamp issue  https://review.openstack.org/91606
2014-05-01T16:54:32  *** dprince has quit IRC
2014-05-01T16:54:42  <bnemec> dstanek: ^ should filter out the bad timestamps
2014-05-01T16:55:06  *** markmcclain has joined #openstack-infra
2014-05-01T16:56:53  *** rcarrillocruz has joined #openstack-infra
2014-05-01T16:57:13  <jogo> mordred: http://paste.openstack.org/show/78256
2014-05-01T16:58:32  <jogo> looks like ironic is the only one
2014-05-01T16:58:35  <jogo> with pecan
2014-05-01T16:58:39  <jogo> devananda: ^
2014-05-01T16:58:51  *** ociuhandu has joined #openstack-infra
2014-05-01T16:59:11  *** rcarrill` has quit IRC
2014-05-01T16:59:27  <jogo> oh that has been fixed
2014-05-01T17:02:33  *** maxbit has joined #openstack-infra
2014-05-01T17:03:38  <jogo> mordred:  a better list of the '-e ' offenders http://paste.openstack.org/show/78257
2014-05-01T17:04:27  <jogo> looks like we have some folks installing other openstack components from !tarballs
2014-05-01T17:04:29  <openstackgerrit> Vasudev Kamath proposed a change to openstack-dev/pbr: Documentation updates  https://review.openstack.org/91609
2014-05-01T17:05:08  *** maxbit_ has joined #openstack-infra
2014-05-01T17:06:00  <mordred> jogo: all of those are fixable pretty easily
2014-05-01T17:06:07  *** markmc has quit IRC
2014-05-01T17:06:14  <foobio> yeah, those probably indicate there are reqs which could stand to be (pre)released to pypi, worst case
2014-05-01T17:06:16  *** derekh has quit IRC
2014-05-01T17:06:30  <jogo> yup
2014-05-01T17:06:37  <foobio> which is likely to be beneficial regardless
2014-05-01T17:06:42  <jogo> I am a little surprised at how not too bad they are
2014-05-01T17:06:48  *** Ryan_Lane has joined #openstack-infra
2014-05-01T17:06:58  <openstackgerrit> James E. Blair proposed a change to openstack-infra/gear: geard: be more careful removing jobs  https://review.openstack.org/91610
2014-05-01T17:07:17  <jeblair> derekh is gone... :(
2014-05-01T17:07:57  <jeblair> foobio: ^ that should address the "ghost jobs" part of the problem, though the underlying cause of "geard did not respond for 30 seconds" is still unknown.
2014-05-01T17:08:32  <mordred> jogo: making patches for those
2014-05-01T17:08:32  *** maxbit has quit IRC
2014-05-01T17:09:26  <foobio> jeblair: it's at least a start
2014-05-01T17:10:12  *** SumitNaiksatam has quit IRC
2014-05-01T17:10:42  *** ociuhandu has quit IRC
2014-05-01T17:11:00  *** hcc has joined #openstack-infra
2014-05-01T17:11:46  <foobio> lgtm
2014-05-01T17:12:00  *** _nadya_ has joined #openstack-infra
2014-05-01T17:12:16  <mordred> jogo: submitted changes for both of them
2014-05-01T17:13:13  *** salv-orlando has quit IRC
2014-05-01T17:14:42  *** alexpilotti has joined #openstack-infra
2014-05-01T17:14:57  *** matty_dubs|lunch is now known as matty_dubs
2014-05-01T17:16:21  *** talluri has joined #openstack-infra
2014-05-01T17:16:51  * anteaya goes for a walk
2014-05-01T17:17:55  *** zns has joined #openstack-infra
2014-05-01T17:18:03  *** clayg has joined #openstack-infra
2014-05-01T17:18:52  <clayg> in this grenade job n-net failed to start and caused vms' to go into error - but I can't find the root cause of the n-net failure?  http://logs.openstack.org/02/91502/1/check/check-grenade-dsvm/912e89e/logs/new/
2014-05-01T17:18:56  *** zns has quit IRC
2014-05-01T17:18:57  *** arosen has left #openstack-infra
2014-05-01T17:19:29  *** zns has joined #openstack-infra
2014-05-01T17:19:48  *** annegentle has quit IRC
2014-05-01T17:21:35  <clayg> there seems to be some mention of a tee "/opt/stack/status/stack/n-net.failure" - but I can't see where/if this status/stack directory is captured?
2014-05-01T17:24:36  *** bhuvan has quit IRC
2014-05-01T17:24:55  *** SumitNaiksatam has joined #openstack-infra
2014-05-01T17:25:21  *** Ajaeger has joined #openstack-infra
2014-05-01T17:26:04  *** e0ne has joined #openstack-infra
2014-05-01T17:26:58  *** arnaud__ has joined #openstack-infra
2014-05-01T17:27:15  *** maxbit has joined #openstack-infra
2014-05-01T17:27:53  *** markmcclain has quit IRC
2014-05-01T17:29:16  *** maxbit__ has joined #openstack-infra
2014-05-01T17:30:12  *** reed has joined #openstack-infra
2014-05-01T17:30:16  *** morganfainberg_Z is now known as morganfainberg
2014-05-01T17:30:18  *** maxbit_ has quit IRC
2014-05-01T17:30:19  <foobio> clayg: perplexing. it doesn't look from the console log xtrace like screen thinks it failed to start n-net, so the n-net.failure file wouldn't have been created in that case
2014-05-01T17:30:46  <foobio> however i agree there seems to be no screen log archived for it either
2014-05-01T17:30:56  <foobio> and plenty of n-cpu errors
2014-05-01T17:31:14  <foobio> which seem to stem from being unable to interact with the (presumably not running) n-net
2014-05-01T17:31:19  <clayg> yeah and all the n-cpu errors basically say, "no one seems to be handling n-net requests)
2014-05-01T17:31:25  <foobio> agreed
2014-05-01T17:31:43  <foobio> Shrews: finally found a moment to look into the update_bug.py failure you spotted--traceback makes me wonder whether we changed the account or authentication method we're using... http://paste.openstack.org/show/78260/
2014-05-01T17:31:59  <dstanek> bnemec: seems to be working. thanks!
2014-05-01T17:32:11  *** maxbit has quit IRC
2014-05-01T17:32:17  <bnemec> dstanek: np, glad to hear it :-)
2014-05-01T17:32:21  <reed> hello working folks
2014-05-01T17:32:21  *** reed has quit IRC
2014-05-01T17:33:08  *** reed has joined #openstack-infra
2014-05-01T17:33:13  <foobio> Shrews: seems the user i would *expect* it to be using is in the bug team for that bug/chanfge
2014-05-01T17:33:44  <foobio> welcome back reed!
2014-05-01T17:34:16  <reed> hi foobio
2014-05-01T17:34:16  <Shrews> foobio: zoinks! this is obviously mordred's fault, though i have no direct evidence
2014-05-01T17:34:24  <reed> looks like I got disconnected briefly
2014-05-01T17:34:48  <foobio> reed: "<-- reed (~reed@fsf/member/reed) has quit (Excess Flood)"
2014-05-01T17:34:48  <reed> gerrit seems to be complaining that I'm committing with the wrong email address but I don't know where to change it
2014-05-01T17:35:26  <foobio> reed: best place to do it is in your ~/.git/config
2014-05-01T17:35:42  <foobio> er, ~/.gitconfig
2014-05-01T17:36:00  <reed> ah!
2014-05-01T17:36:14  <mordred> reed: "git config --global user.email blah@blah.com"
2014-05-01T17:36:14  <foobio> that's where i usually set my name, email and signingkey
2014-05-01T17:36:27  <reed> I wonder why that's there now... and I wonder why gerrit didn't pick it up earlier
2014-05-01T17:36:30  <mordred> reed: or, if you disagree, you can add an email address to gerrit
2014-05-01T17:36:33  *** gyee has joined #openstack-infra
2014-05-01T17:36:41  <foobio> yeah, the git config --global command basically edits that file for you
2014-05-01T17:37:01  *** praneshp has joined #openstack-infra
2014-05-01T17:37:21  <foobio> reed: also, if you've already committed something, the previous name and email are already in the commit as the author and won't be reset without some additional magic and an --amend
2014-05-01T17:37:26  <reed> damn, now I need to undo the commit
2014-05-01T17:37:30  <foobio> er, as the committer
2014-05-01T17:37:30  *** ramashri has joined #openstack-infra
2014-05-01T17:37:35  <reed> yeah, right
2014-05-01T17:37:44  <reed> git uncommit
2014-05-01T17:37:46  <foobio> i think it's --reset-committer or something like that
2014-05-01T17:37:54  <foobio> don't need to undo the commit itselg
2014-05-01T17:38:23  <foobio> git commit --amend --reset-author
2014-05-01T17:38:44  *** thedodd has quit IRC
2014-05-01T17:38:57  <foobio> i guess --amend normally updates the committer but not the author
2014-05-01T17:39:23  <openstackgerrit> Stefano Maffulli proposed a change to openstack-infra/config: Adding list for Superuser magazine's team  https://review.openstack.org/91623
2014-05-01T17:39:26  <reed> :)
2014-05-01T17:40:02  <foobio> superuser magazine, huh?
2014-05-01T17:40:11  *** e0ne has quit IRC
2014-05-01T17:40:56  <reed> foobio, it's a new initiative of the Foundation, there will be a publication featuring users
2014-05-01T17:41:05  <foobio> ahh
2014-05-01T17:45:07  *** darraghb has quit IRC
2014-05-01T17:46:00  <openstackgerrit> Arnaud Legendre proposed a change to openstack-infra/config: Create glance-specs git repo  https://review.openstack.org/90461
2014-05-01T17:46:10  *** maxbit has joined #openstack-infra
2014-05-01T17:46:16  *** praneshp has quit IRC
2014-05-01T17:47:47  *** maxbit__ has quit IRC
2014-05-01T17:48:36  *** yidclare has joined #openstack-infra
2014-05-01T17:49:28  *** e0ne has joined #openstack-infra
2014-05-01T17:51:59  <SpamapS> hm
2014-05-01T17:51:59  <openstackgerrit> Arnaud Legendre proposed a change to openstack-infra/config: Create glance-specs git repo  https://review.openstack.org/90461
2014-05-01T17:52:04  <SpamapS> check-tripleo seems to have no f20 slaves
2014-05-01T17:52:30  <SpamapS> but I see 12 on the cloud
2014-05-01T17:52:51  *** praneshp has joined #openstack-infra
2014-05-01T17:52:54  <foobio> SpamapS: yeah, see earlier scrollback with jeblair and derekh
2014-05-01T17:53:02  <SpamapS> ah ok I thought I'd see jobs running
2014-05-01T17:53:29  *** bhuvan has joined #openstack-infra
2014-05-01T17:53:30  <SpamapS> foobio: so "just wait it out" was what derekh said, but is there a place I can see how long we have to wait?
2014-05-01T17:53:46  <SpamapS> I want to start rolling out trusty to that cloud so we can get rid of our network problems
2014-05-01T17:54:14  <foobio> SpamapS: apparently communication between zuul and its gear daemon got choked yesterday, which due to a bug (patch pending) caused the jobs to still end up in the queue and run by jenkins even though zuul was then blind to the fact that they were running
2014-05-01T17:54:17  *** rcarrillocruz has quit IRC
2014-05-01T17:54:44  *** _nadya_ has quit IRC
2014-05-01T17:54:50  <SpamapS> Ok, so there's stuff running that we can't see..
2014-05-01T17:54:53  <SpamapS> and when it finishes, we'll see?
2014-05-01T17:55:12  *** markmcclain has joined #openstack-infra
2014-05-01T17:55:13  <foobio> SpamapS: and due to the general starvation on the tripleo cloud, in particular for less-commonly-requested node types, those queued jobs are still running on f20 nodes as they become available
2014-05-01T17:55:48  <SpamapS> | free_ram_mb          | 77100   |
2014-05-01T17:55:58  <SpamapS> | vcpus                | 456     |
2014-05-01T17:55:59  <SpamapS> | vcpus_used           | 114     |
2014-05-01T17:56:01  <foobio> eventually they get rerun by zuul using a gearman queue item it's aware exists and then the result for that rerun will report
2014-05-01T17:56:13  <SpamapS> foobio: do we need to bump up the quota?
2014-05-01T17:56:43  <SpamapS> I only see 41 instances, error, build, and active included
2014-05-01T17:56:44  <foobio> SpamapS: i think the current quota was constrained by the number of tripleo "work environments" configured on the te-broker?
2014-05-01T17:57:02  <SpamapS> oh that's entirely possible
2014-05-01T17:57:03  * foobio is a little fuzzy on the terminology for that
2014-05-01T17:57:07  <SpamapS> testenvs
2014-05-01T17:57:17  <foobio> i remember someone saying there were only 40 environments built out
2014-05-01T17:58:05  <SpamapS> THere are either 7 or 10 testenvs.. can't tell if the errors in undercloud mean anything
2014-05-01T17:58:12  <SpamapS> each one can do 4 jobs at once.
2014-05-01T17:58:13  <SpamapS> I think
2014-05-01T17:58:20  <SpamapS> 40 would make sense
2014-05-01T17:58:23  <foobio> okay, that's probably what it was
2014-05-01T17:58:28  <SpamapS> I have more hardware now
2014-05-01T17:58:31  <foobio> enough environments for 40 jobs then
2014-05-01T17:58:38  <SpamapS> so once lifeless wakes up.. I'll ask him if we should add a couple.
2014-05-01T17:58:42  <foobio> sounds like you could make use of it, yeah
2014-05-01T17:58:53  *** clayg has left #openstack-infra
2014-05-01T17:58:57  *** mestery has joined #openstack-infra
2014-05-01T17:58:59  <SpamapS> I have 10 boxes available, but 5 are _mine_ ;)
2014-05-01T17:59:06  *** rcarrillocruz has joined #openstack-infra
2014-05-01T17:59:17  <foobio> anyway, the pending zuul patch is to make sure those gearman items get dequeued if zuul is going to ignore them, so that they don't end up running and wasting resources
2014-05-01T18:00:20  *** dstanek is now known as dstanek_zzz
2014-05-01T18:00:27  <foobio> though the jury's still out on why geard gets bogged down when we flood it with millions of requests. jeblair is trying to profile it under manufactured stress for a better picture of what's happening
2014-05-01T18:00:27  *** hcc is now known as hdd
2014-05-01T18:01:54  *** melwitt has joined #openstack-infra
2014-05-01T18:04:18  *** etoews has quit IRC
2014-05-01T18:04:49  <foobio> Shrews: i'm definitely confused on the update_bug.py failures... the ~gerrit2/.launchpadlib/creds file being used to authenticate to lp is definitely identical...
2014-05-01T18:05:01  <foobio> still digging
2014-05-01T18:06:20  *** dangers_away is now known as dangers
2014-05-01T18:06:39  *** etoews has joined #openstack-infra
2014-05-01T18:07:01  <openstackgerrit> Andreas Jaeger proposed a change to openstack/requirements: Update openstack-doc-tools for translation of api-site  https://review.openstack.org/90746
2014-05-01T18:07:50  *** moted has joined #openstack-infra
2014-05-01T18:08:46  *** aconrad has joined #openstack-infra
2014-05-01T18:09:49  <JayF> foobio: ty for modifying the SPF record, I can tell when you did it because the emails started going to my inbox :)
2014-05-01T18:10:00  <openstackgerrit> Ramy Asselin proposed a change to openstack-infra/config: nodepool image update works behind a http proxy  https://review.openstack.org/87384
2014-05-01T18:10:29  *** manishg has quit IRC
2014-05-01T18:10:42  <SpamapS> foobio: "Python" ? ;)
2014-05-01T18:10:44  <jogo> who is part of testing-cabal besides lifeless?
2014-05-01T18:10:50  *** manishg has joined #openstack-infra
2014-05-01T18:10:51  <SpamapS> foobio: have we tried geard under pypy ?
2014-05-01T18:10:57  <jogo> I want to use https://github.com/testing-cabal/testtools/pull/78
2014-05-01T18:11:03  <SpamapS> jogo: I think jml?
2014-05-01T18:11:19  <SpamapS> https://launchpad.net/~testing-cabal
2014-05-01T18:11:29  <SpamapS> jelmer too
2014-05-01T18:11:34  <foobio> SpamapS: actually an intresting suggestion, and no i don't suspect it's been tested under pypy but might be interesting to see the performance numbers compared
2014-05-01T18:11:52  <SpamapS> ok.. caffeine and lunch needed..
2014-05-01T18:12:23  *** harlowja_away is now known as harlowja
2014-05-01T18:13:40  <SpamapS> foobio: it's also possible that even though the threads are just for I/O, the GIL is still eating geard's lunch
2014-05-01T18:13:54  <SpamapS> lunch.. right.. need..
2014-05-01T18:13:56  * SpamapS will return
2014-05-01T18:16:47  *** ArxCruz has quit IRC
2014-05-01T18:18:53  *** ociuhandu has joined #openstack-infra
2014-05-01T18:21:10  *** amcrn has joined #openstack-infra
2014-05-01T18:21:34  *** sdake has quit IRC
2014-05-01T18:21:58  <openstackgerrit> A change was merged to openstack-infra/elastic-recheck: Add fingerprint for bug 1315062  https://review.openstack.org/91605
2014-05-01T18:22:00  <uvirtbot> Launchpad bug 1315062 in glance "don't pull pysendfile from googlecode (dup-of: 1314968)" [Undecided,New] https://launchpad.net/bugs/1315062
2014-05-01T18:22:01  <uvirtbot> Launchpad bug 1314968 in glance "Installing test-requirements fails because pysendfile.2.0.0.tar.gz cannot be found" [Undecided,In progress] https://launchpad.net/bugs/1314968
2014-05-01T18:22:18  *** sdake has joined #openstack-infra
2014-05-01T18:23:19  *** jaypipes has joined #openstack-infra
2014-05-01T18:23:42  *** ramashri has quit IRC
2014-05-01T18:24:01  *** jp_at_hp has quit IRC
2014-05-01T18:26:19  <foobio> has anybody in here submitted abstracts on openstack-infra topics for linuxcon-na?
2014-05-01T18:27:44  <foobio> proposal submission period ends tomorrow
2014-05-01T18:27:51  *** dstanek_zzz is now known as dstanek
2014-05-01T18:32:00  <anteaya> yeah I just got that email too
2014-05-01T18:32:15  <anteaya> they have a goverance topic
2014-05-01T18:32:29  <anteaya> might submit something about our ptl and tc election process
2014-05-01T18:33:50  <foobio> oh, i didn't see an e-mail, it was just on my list of things i was procrastinating on
2014-05-01T18:34:04  <foobio> but you should totally do that
2014-05-01T18:34:21  <openstackgerrit> James E. Blair proposed a change to openstack-infra/gear: Restructure logging  https://review.openstack.org/91643
2014-05-01T18:35:14  <jeblair> foobio: ^ that is not a fix to the underlying issue, however, i think that if we merge that and move zuul's logging to /opt, we may be in a better place to track it down the next time it happens
2014-05-01T18:35:19  <sdague> foobio: jogo submitted an ER talk
2014-05-01T18:35:39  <sdague> I just submitted something that I called OpenStack in 10 minutes with Devstack
2014-05-01T18:36:02  *** changbl has quit IRC
2014-05-01T18:40:05  <anteaya> cool
2014-05-01T18:40:06  *** arnaud___ has joined #openstack-infra
2014-05-01T18:40:22  <anteaya> how long is the time slot for a "presentation"?
2014-05-01T18:40:54  <anteaya> I have to make_a_new_account and don't think I can fill 40 minutes on our election process
2014-05-01T18:41:55  <foobio> you could probably go into greater detail on other parts of our project governance besides just the elections
2014-05-01T18:42:32  <openstackgerrit> Derek Higgins proposed a change to openstack-infra/devstack-gate: Set default for DEVSTACK_GATE_USE_APACHE  https://review.openstack.org/91646
2014-05-01T18:42:46  <anteaya> my brain is foggy, I haven't had a decent night sleep in weeks (you don't want to know) can you elaborate?
2014-05-01T18:43:01  <anteaya> perhaps I am so close to it I can't see what others might want to know about
2014-05-01T18:43:20  *** thedodd has joined #openstack-infra
2014-05-01T18:44:13  *** arnaud__ has quit IRC
2014-05-01T18:44:27  <foobio> well, you could talk about how the subprojects self-organize to govern things like code review, documentation, translations and so on
2014-05-01T18:44:50  <foobio> at levels below the more visible ptl/tc strata
2014-05-01T18:45:14  *** e0ne has quit IRC
2014-05-01T18:45:38  <foobio> or you could talk about the foundation board elections as well and how the election model differs, what's been going on with the efforts to change that and the current challenges faced
2014-05-01T18:46:01  <anteaya> ah yes
2014-05-01T18:46:17  <anteaya> hmmmm, might steer away from the board level
2014-05-01T18:46:30  <foobio> it is a sticky wicket
2014-05-01T18:46:35  <anteaya> I am sure there are better informed folks than myself to address that
2014-05-01T18:46:40  <anteaya> I need less sticky
2014-05-01T18:46:58  <anteaya> so the self-organizing bit sounds good
2014-05-01T18:47:14  *** e0ne has joined #openstack-infra
2014-05-01T18:47:17  <anteaya> I'm so immersed in it, i don't know other projects don't do it
2014-05-01T18:47:27  <anteaya> but you are right, that would be good to talk about as well
2014-05-01T18:47:34  <anteaya> thanks foobio
2014-05-01T18:47:36  *** zns has quit IRC
2014-05-01T18:47:51  <foobio> in that case an interesting bit might be the new specs-as-code-review experiment/movement
2014-05-01T18:48:14  <foobio> as well, as the fact that our governance documents are now starting to get managed as code review
2014-05-01T18:48:41  <anteaya> hmmmmm, I can hand-wavey it in and then assess how much time it gets, based on my understanding, when I go to talk
2014-05-01T18:48:57  <anteaya> yes, I like that we have a governance repo
2014-05-01T18:49:05  <anteaya> you are great at this
2014-05-01T18:49:30  <foobio> not really. if i were great at it i wouldn't have been procrastinating about submitting an abstract ;)
2014-05-01T18:49:40  *** zns has joined #openstack-infra
2014-05-01T18:49:40  <anteaya> I'm out of excuses for not putting in a talk submission
2014-05-01T18:49:51  <anteaya> foobio: tell me about what you would like to talk about
2014-05-01T18:49:59  *** yfried has joined #openstack-infra
2014-05-01T18:50:24  *** changbl has joined #openstack-infra
2014-05-01T18:58:25  <foobio> eh, something which won't compete with anyone who already submitted talks they want to give. i'm happy to be filler ;)
2014-05-01T18:59:02  <foobio> which is why i'm curious who/what's already submitted so i don't step on their toes at the last minute
2014-05-01T19:01:11  <anteaya> I think you have lots of options
2014-05-01T19:01:12  *** e0ne has quit IRC
2014-05-01T19:01:38  <foobio> yep
2014-05-01T19:01:46  <anteaya> I for one would like to watch you walk through how you track down problems in our system
2014-05-01T19:01:55  *** manishg has quit IRC
2014-05-01T19:02:02  <anteaya> you have a very systematic approach for going through the logs
2014-05-01T19:02:03  *** e0ne has joined #openstack-infra
2014-05-01T19:02:14  <anteaya> unfortunatly anything on servers is hidden
2014-05-01T19:02:37  <anteaya> so how zuul jenkins and nodepool all talk to each other
2014-05-01T19:02:50  <anteaya> I would like to see that from a persepective of sifting through the logs
2014-05-01T19:03:26  <anteaya> what ever you talk about I hope you include code
2014-05-01T19:03:50  *** rcarrillocruz has quit IRC
2014-05-01T19:05:11  <foobio> well, the infra overview already got presented at linuxcon-na last year, so probably best not to repeat that one ;)
2014-05-01T19:05:12  *** e0ne has quit IRC
2014-05-01T19:05:50  <anteaya> they system has changed a bit since last year
2014-05-01T19:05:54  *** e0ne has joined #openstack-infra
2014-05-01T19:06:05  <foobio> oh, actually that's the zuul deep-dive, not the infra overview
2014-05-01T19:06:12  <foobio> but there's a fair amount of overlap
2014-05-01T19:06:39  *** andreykurilin_ has joined #openstack-infra
2014-05-01T19:07:17  *** rcarrillocruz has joined #openstack-infra
2014-05-01T19:07:46  *** dkliban_afk is now known as dkliban
2014-05-01T19:10:03  *** maxbit has quit IRC
2014-05-01T19:11:17  <anteaya> I haven't memorized all the presentations maybe
2014-05-01T19:11:40  <anteaya> has their been a nodepool deep dive slidedeck yet?
2014-05-01T19:11:40  <openstackgerrit> Ben Nemec proposed a change to openstack-infra/config: Add dib-utils project  https://review.openstack.org/90281
2014-05-01T19:11:43  *** manishg has joined #openstack-infra
2014-05-01T19:12:13  <foobio> not yet, though i question my availability to write one between now and then
2014-05-01T19:15:18  *** marcoemorais has quit IRC
2014-05-01T19:15:24  <anteaya> fair enough
2014-05-01T19:15:34  <anteaya> they want slides submitted a week in advance
2014-05-01T19:15:36  <anteaya> ha ha ha
2014-05-01T19:21:10  *** marcoemorais has joined #openstack-infra
2014-05-01T19:26:24  <notmyname> anteaya: is there a list of current PTLs anywhere?
2014-05-01T19:26:39  *** andreykurilin_ has quit IRC
2014-05-01T19:27:28  <notmyname> anteaya: ah, I see it on an election result page (not findable on a search, though) https://wiki.openstack.org/wiki/PTL_Elections_March/April_2014
2014-05-01T19:27:48  *** andreykurilin_ has joined #openstack-infra
2014-05-01T19:28:26  <openstackgerrit> Derek Higgins proposed a change to openstack-infra/devstack-gate: Add the sbins to PATH  https://review.openstack.org/91655
2014-05-01T19:29:38  <anteaya> notmyname: http://git.openstack.org/cgit/openstack/governance/tree/reference/programs.yaml
2014-05-01T19:30:04  <anteaya> notmyname: yeah I find the wiki search unusable
2014-05-01T19:30:55  <foobio> anteaya: last time i talked to Ryan_Lane he suggested that a recent patch/upgrade may have caused the search index to stop getting updated
2014-05-01T19:30:55  <notmyname> anteaya: I was looking under https://wiki.openstack.org/wiki/Governance (where the TC has a list, along with details about BoD and UC)
2014-05-01T19:31:14  <anteaya> foobio: cool, that would help things
2014-05-01T19:31:29  <foobio> anteaya: for example https://wiki.openstack.org/w/index.php?title=Special%3ASearch&profile=default&search=openstack-ci-admins&fulltext=Search
2014-05-01T19:31:32  *** Ajaeger has quit IRC
2014-05-01T19:31:45  <foobio> that returns a couple of results i removed from articles a month or two ago
2014-05-01T19:31:52  <anteaya> foobio: awesome
2014-05-01T19:32:17  <foobio> that search should have been returning zero results for a long time now
2014-05-01T19:32:24  <anteaya> notmyname: I wouldn't want to make changes to the Governance wiki page without having a chat with ttx first
2014-05-01T19:32:32  <anteaya> since it would be him maintaining it
2014-05-01T19:32:52  <anteaya> he has mused about scraping governance/programs.yaml for wiki updates
2014-05-01T19:33:04  <anteaya> I can mention it to him when he is back next week
2014-05-01T19:33:26  *** eharney has quit IRC
2014-05-01T19:33:38  <anteaya> I use the governance repo as the canonical source
2014-05-01T19:33:47  <foobio> http://git.openstack.org/cgit/openstack/governance/tree/reference/programs.yaml does seem to be current as of the most recent elections
2014-05-01T19:33:54  <anteaya> but the info should be deseminated better, I do agree
2014-05-01T19:34:37  <anteaya> April 16th it was updated, yes
2014-05-01T19:37:13  *** zehicle_at_dell has quit IRC
2014-05-01T19:38:21  *** ihrachyshka has joined #openstack-infra
2014-05-01T19:43:20  <portante> jeblair, is there a way to try out https://review.openstack.org/91424 prior to accepting the commit?
2014-05-01T19:44:27  *** marcoemorais has quit IRC
2014-05-01T19:45:07  *** marcoemorais has joined #openstack-infra
2014-05-01T19:45:16  *** nati_ueno has quit IRC
2014-05-01T19:46:29  <foobio> portante: you could launch a plain ubuntu 12.04 lts vm, grab openstack-infra/config, use install_jenkins_slave.sh in the root of that repo to set up the system with our usual bits, then check out swift and try to 'tox -e func'
2014-05-01T19:48:27  *** jaypipes has quit IRC
2014-05-01T19:48:27  *** e0ne has quit IRC
2014-05-01T19:48:27  <notmyname> foobio: http://b.z19r.com/post/did-you-just-tell-me-to-go-fuck-myself ;-)
2014-05-01T19:48:46  *** e0ne has joined #openstack-infra
2014-05-01T19:48:58  <foobio> notmyname: bwahahaha
2014-05-01T19:49:53  *** zhiyan_ is now known as zhiyan
2014-05-01T19:53:34  *** maxbit has joined #openstack-infra
2014-05-01T19:55:13  *** schofield has joined #openstack-infra
2014-05-01T19:56:27  *** schofield has quit IRC
2014-05-01T19:57:02  *** schofield has joined #openstack-infra
2014-05-01T19:57:06  *** khyati_ has joined #openstack-infra
2014-05-01T19:58:05  *** packet has quit IRC
2014-05-01T19:58:06  *** nati_ueno has joined #openstack-infra
2014-05-01T19:58:52  *** bookwar_away is now known as bookwar
2014-05-01T20:03:07  *** eharney has joined #openstack-infra
2014-05-01T20:04:25  *** schofield has left #openstack-infra
2014-05-01T20:04:49  *** markwash has joined #openstack-infra
2014-05-01T20:05:16  <jeblair> portante: heh, thus the 'start off non-voting suggestion'
2014-05-01T20:05:30  *** e0ne has quit IRC
2014-05-01T20:06:02  <portante> jeblair: okay, so it is likely that won't gate this getting accepted, then?
2014-05-01T20:06:45  <jeblair> portante: correct, as long as it's non-voting, it should be fine.  i just aprvd it.
2014-05-01T20:06:49  *** derekh_ has joined #openstack-infra
2014-05-01T20:06:51  <portante> great, thanks
2014-05-01T20:06:56  *** annegentle has joined #openstack-infra
2014-05-01T20:07:00  <mriedem> i just hit this in a stable/icehouse patch, but the tests passed, never seen it before: "sub_unit.log was > 50 MB of uncompressed data!!!"
2014-05-01T20:07:07  <mriedem> is that an infra issue?
2014-05-01T20:08:10  <foobio> mriedem: there were recent qa checks added to help prevent changes from generating waaaaay too much log noise
2014-05-01T20:08:29  *** timrc is now known as timrc-afk
2014-05-01T20:08:50  <mriedem> foobio: hmm, it's a backport from master
2014-05-01T20:08:59  <mriedem> so if it were a problem i'd expect to also see it on master
2014-05-01T20:09:01  <foobio> mriedem: not sure if it checks sub_unit.log though... what's the change?
2014-05-01T20:09:13  <mriedem> foobio: https://review.openstack.org/#/c/91635/
2014-05-01T20:09:13  <foobio> this could certainly be something else
2014-05-01T20:11:30  <mriedem> foobio: not just my change http://goo.gl/rTgBwV
2014-05-01T20:11:34  <foobio> mriedem: sdague's https://review.openstack.org/85797 merged today
2014-05-01T20:11:37  <mriedem> 6 hits today, all stable branches
2014-05-01T20:11:46  <openstackgerrit> A change was merged to openstack-infra/config: Add swift "in-process" functional test runs  https://review.openstack.org/91424
2014-05-01T20:12:23  <mriedem> sdague: does that change depend on something in the stable branches for it to not puke all over?
2014-05-01T20:12:38  <foobio> mriedem: it's possible nova was already very noisy in icehouse and we should consider only enforcing that on master?
2014-05-01T20:14:14  <mriedem> foobio: sdague: https://bugs.launchpad.net/openstack-ci/+bug/1315138
2014-05-01T20:14:15  <uvirtbot> Launchpad bug 1315138 in openstack-ci "stable backports failing with "sub_unit.log was > 50 MB of uncompressed data!!!"" [Undecided,New]
2014-05-01T20:14:51  <jeblair> the subunit log _is_ 181M uncompressed; i'm not sure we just want to _ignore_ that
2014-05-01T20:15:30  *** timrc-afk is now known as timrc
2014-05-01T20:16:03  <mriedem> jeblair: so i'm not sure what to do here, this is a cherry pick
2014-05-01T20:16:11  *** andreykurilin_ has quit IRC
2014-05-01T20:16:32  <mriedem> i have no idea why this particular cherry pick would cause issues either...
2014-05-01T20:16:42  <mriedem> it shouldn't, it's not really a code change
2014-05-01T20:16:45  <mriedem> it's a hacking rule change
2014-05-01T20:17:20  *** derekh_ has quit IRC
2014-05-01T20:17:25  <jeblair> mriedem: well as foobio said, it's not this change that is the problem, it's enforcing the rule
2014-05-01T20:17:30  <jeblair> i believe there were some patches merged to fix the log spamminess
2014-05-01T20:17:37  <jeblair> so perhaps we can find them and merge them to the stable branches
2014-05-01T20:17:59  <foobio> mriedem: for comparison, the final py27 run for the master version of that change is much, much smaller... http://logs.openstack.org/49/88649/1/gate/gate-nova-python27/6b7f0fb/
2014-05-01T20:18:25  <mriedem> yeah, so have to hunt those changes on master down and cherry pick them first
2014-05-01T20:18:45  <mriedem> i'd argue that https://review.openstack.org/#/c/85797/ shouldn't merge until the log spamming is cleaned up in stable branches also
2014-05-01T20:18:53  <mriedem> hard to enforce the rule otherwise
2014-05-01T20:19:09  <jeblair> 27% of the log lines contain the string "stevedore.extension"
2014-05-01T20:19:27  <foobio> it's possible that nova on stable/icehouse has been generating much larger subunit logs for a while and the enforcement numbers were based on master instead
2014-05-01T20:21:08  <jeblair> mriedem: hopefully sdague or mtreinish will know more context
2014-05-01T20:21:17  <foobio> something was tweaked to make debug loglevel be local to the project and not extend to imported dependencies yeah?
2014-05-01T20:21:50  <mriedem> jogo: ^ you know anything about that on master?
2014-05-01T20:21:57  <mriedem> i remember it vaguely
2014-05-01T20:22:17  <jeblair> just found I7317092c0a2bad8efd11ece3ba521d58c2acae42 from jogo
2014-05-01T20:23:10  <foobio> that's the one i was thinking of. also looks very safe to backport
2014-05-01T20:23:16  <mriedem> i'll propose it
2014-05-01T20:23:18  <jeblair> also sdague did I04ff2f0650f1e6035d8de5c5802b96ce4294891b
2014-05-01T20:24:00  <SergeyLukjanov> jeblair, foobio, clarkb, mordred, sdague, I'll be traveling for the next few days, will be available starting from saturday afternoon and completely alive (hopefully) since monday pst (I'll be in CA before the summit)
2014-05-01T20:24:12  *** flaper87|afk is now known as flaper87
2014-05-01T20:24:26  <foobio> SergeyLukjanov: i hope someone told you ca is nowhere near the summit ;)
2014-05-01T20:24:48  <foobio> safe travels!
2014-05-01T20:24:52  <SergeyLukjanov> foobio, yup, I know :) google maps told it
2014-05-01T20:24:54  <jeblair> mriedem: the commit msg in the 2nd one indicates both changes are related
2014-05-01T20:24:58  <SergeyLukjanov> foobio, just some work stuff
2014-05-01T20:25:01  <SergeyLukjanov> foobio, thx ;)
2014-05-01T20:25:23  <jeblair> SergeyLukjanov: thanks, sadly, i won't be in ca next week so i won't see you until the summit
2014-05-01T20:25:32  <mriedem> jeblair: thanks, i'll backport them
2014-05-01T20:25:48  <mriedem> jeblair: and then bug the shit out of sdague and jogo if i missed anything :)
2014-05-01T20:25:52  *** _david_ has joined #openstack-infra
2014-05-01T20:26:05  <jeblair> mriedem: send them email copies of the log files ;)
2014-05-01T20:26:38  <_david_> jeblair, have a look, please: https://gerrit-review.googlesource.com/56712
2014-05-01T20:26:43  <anteaya> foobio: here is the content of my proposal thus far: https://etherpad.openstack.org/p/Ig9fEfzRQC
2014-05-01T20:27:34  <jeblair> _david_: cool idea!
2014-05-01T20:27:35  <SergeyLukjanov> jeblair, oh, ok :)
2014-05-01T20:27:48  <_david_> jeblair, the idea is to (ab-)use magic branch to implement wip stickeness: git push wip
2014-05-01T20:27:59  <mgagne> anteaya: She is a Gerrit  upstream contributor :D
2014-05-01T20:28:14  <_david_> jeblair, that way we could seamlessly extend git-review to support it ;-)
2014-05-01T20:30:28  <anteaya> mgagne: I am
2014-05-01T20:30:41  <anteaya> what the heck was it, oh yeah "the"
2014-05-01T20:30:42  *** khyati_ has quit IRC
2014-05-01T20:30:54  <anteaya> a doc was missing a "the"
2014-05-01T20:30:57  <anteaya> wooo
2014-05-01T20:30:59  *** annegentle has quit IRC
2014-05-01T20:32:11  <bknudson> can we disable a check job for stable/icehouse? any examples?
2014-05-01T20:32:45  <foobio> anteaya: lgtm. i'd attend that!
2014-05-01T20:32:58  <mgagne> bknudson: disable or mark as non-voting ?
2014-05-01T20:33:07  <anteaya> foobio: thanks
2014-05-01T20:33:12  *** ihrachyshka has quit IRC
2014-05-01T20:33:17  <anteaya> copy/pasting then pressing send
2014-05-01T20:33:34  *** _david_ has quit IRC
2014-05-01T20:33:35  <bknudson> mgagne: there's no point to running the rally job on stable/icehouse for keystone since it was only set up for juno
2014-05-01T20:33:47  <bknudson> it's already nonvoting
2014-05-01T20:33:47  <mgagne> bknudson: =)
2014-05-01T20:34:12  <foobio> bknudson: you specify a branch name or regular expression
2014-05-01T20:34:16  *** SumitNaiksatam has quit IRC
2014-05-01T20:34:25  <foobio> bknudson: in the same place where you set voting
2014-05-01T20:34:55  <foobio> bknudson: you should see tons of examples there in the jobs list within layout.yaml
2014-05-01T20:35:19  <bknudson> ok, will take a look
2014-05-01T20:35:29  *** rfolco has quit IRC
2014-05-01T20:35:39  <jeblair> huh
2014-05-01T20:35:44  <anteaya> submitted
2014-05-01T20:35:56  <foobio> bknudson: a lot of them set negative lookahead matching on the branch(es) which are undesirable, so they're be skipped
2014-05-01T20:35:56  <anteaya> now i just have to remember to give them slides the week prior
2014-05-01T20:35:59  <jeblair> no wonder they were confused about landin the rally jobs
2014-05-01T20:36:19  <anteaya> jeblair: what do you use to create the slides that go in the presentation repo?
2014-05-01T20:36:27  <jeblair> apparently we have already landed two of them
2014-05-01T20:36:45  <mriedem> jeblair: jogo: sdague: foobio: mega backport https://review.openstack.org/#/q/status:open+project:openstack/nova+branch:stable/icehouse+topic:bug/1315138,n,z
2014-05-01T20:36:52  *** adalbas has quit IRC
2014-05-01T20:37:38  <foobio> jeblair: yeah, i approved one the other day where the ptl of the project in question had already +1'd it (and after discussing the details of the tests, and that they're mainly contained within the projects being tested)
2014-05-01T20:38:13  <foobio> though it didn't come to light that they were only written to run on specific branches
2014-05-01T20:38:46  <jeblair> foobio: yeah, i had a few objections to the one i reviewed: a) no ptl weigh in, b) i thought it should start in experimental, c) not keen on gating openstack projects on stackforge projects
2014-05-01T20:39:11  <jeblair> c isn't _technically_ an issue yet, but it's a matter of setting expectations.
2014-05-01T20:39:49  <foobio> right, c) worried me less since it was non-voting check only and the job duration is primarily under the control of the project being tested (depends on the scope of tests they implement in their project)
2014-05-01T20:39:57  *** andreaf has quit IRC
2014-05-01T20:41:28  <openstackgerrit> Michael Krotscheck proposed a change to openstack-infra/storyboard: Added priorities to tasks  https://review.openstack.org/91675
2014-05-01T20:41:38  <jeblair> the bad news is that the primary key for the approvals table is composed of 4 fields
2014-05-01T20:41:55  <jeblair> the good news is that both it and the timestamp field appear to have the same definition
2014-05-01T20:42:00  <jeblair> https://etherpad.openstack.org/p/gerrit-2.8-reviewstats
2014-05-01T20:42:04  <jeblair> (in the old and new gerrit dbs)
2014-05-01T20:42:12  <jeblair> (i bolded the diffs)
2014-05-01T20:45:39  <foobio> oh, and they dropped a key in the new schema
2014-05-01T20:47:01  <foobio> a secondary key anyway
2014-05-01T20:47:09  *** mbacchi has quit IRC
2014-05-01T20:48:23  *** lakshmi has quit IRC
2014-05-01T20:49:25  <foobio> i can kind of see the reasoning behind updating that timestamp on change. i think the one i took most exception to is that the change creation timestamp in the changes table had on update set as well, and i couldn't fathom why you'd ever update the creation date
2014-05-01T20:49:30  *** e0ne has joined #openstack-infra
2014-05-01T20:49:31  *** adalbas has joined #openstack-infra
2014-05-01T20:49:51  <jogo> mriedem: that isn't so big
2014-05-01T20:50:10  <jogo> mriedem: I like how you have the explication marks in the bug title
2014-05-01T20:50:32  <mriedem> jogo: just copy/paste from the log message :)
2014-05-01T20:50:38  *** yfried has quit IRC
2014-05-01T20:50:48  <jogo> mriedem: oh hehe
2014-05-01T20:50:57  <mriedem> THE SKY IS FALLING OMFG!!!
2014-05-01T20:51:22  <mriedem> jogo: that's failing on stable/havana also...not sure how though since your debug logging stuff didn't get into havana
2014-05-01T20:51:31  <mriedem> unless it's neutron jobs failing on havana, i didn't check
2014-05-01T20:52:16  <SpamapS> Where would be the best place to report bugs regarding the new skin for gerrit?
2014-05-01T20:52:33  <jogo> mriedem: hmm  it could be log related but not sure
2014-05-01T20:52:40  *** e0ne has quit IRC
2014-05-01T20:53:21  *** lakshmi has joined #openstack-infra
2014-05-01T20:53:41  <jeblair> SpamapS: if it's a css thing, probably openstack-ci on lp.
2014-05-01T20:54:12  <jeblair> SpamapS: (it might be our fault, or we might be able to fix it; if neither of those apply, then upstream gerrit.)
2014-05-01T20:55:33  <SpamapS> jeblair: in this case, the "Report Bug" link is _really_ close to the => arrow on listings
2014-05-01T20:55:43  <SpamapS> jeblair: I click it about 10% of the time :-/
2014-05-01T20:56:04  *** e0ne has joined #openstack-infra
2014-05-01T20:56:10  <SpamapS> ironically, I was pretty sure that is our CSS, and so that particular "Report Bug" link is not the one I want. ;)
2014-05-01T20:56:39  <jeblair> SpamapS: https://gerrit-review.googlesource.com/#/q/status:open
2014-05-01T20:56:51  <SpamapS> also the project name link in reviews used to take you back to open reviews for the project, but now takes you to the completely worthless project description page... _that_ seems like a gerrit bug
2014-05-01T20:57:04  <jeblair> SpamapS: upstream has the too-close-link bug too
2014-05-01T20:57:24  *** e0ne has quit IRC
2014-05-01T20:57:36  <SpamapS> jeblair: ahh good
2014-05-01T20:57:48  <jeblair> SpamapS: you might want to file both of those as upstream bugs; we might be able to fix the report-bug closeness by doing more local css customization, so maybe also file that locally (or just fix it :)
2014-05-01T20:57:52  *** e0ne has joined #openstack-infra
2014-05-01T20:57:55  <SpamapS> will report upstream then
2014-05-01T20:58:26  <SpamapS> jeblair: before I run off and report another one.. are we also looking to widen the comment boxes so that jenkins results don't wrap?
2014-05-01T20:59:06  <jeblair> SpamapS: where?
2014-05-01T20:59:20  <jeblair> SpamapS: (link to change illustrating problem)
2014-05-01T21:00:14  <jeblair> foobio: though the interpretation of category_id has changed :(
2014-05-01T21:00:28  <jeblair> but i have to write a script anyway, so i can map
2014-05-01T21:00:56  <SpamapS> jeblair: never mind, they're already wider since I looked yesterday. ;)
2014-05-01T21:01:16  *** e0ne has quit IRC
2014-05-01T21:02:11  <SpamapS> https://code.google.com/p/gerrit/issues/detail?id=2631 upstream bug about Report Bug proximity to =>
2014-05-01T21:03:48  <SpamapS> https://bugs.launchpad.net/openstack-ci/+bug/1315151 openstack-ci version of same report
2014-05-01T21:03:50  <uvirtbot> Launchpad bug 1315151 in openstack-ci "Report Bug is very close to "next page" link in change listings" [Undecided,New]
2014-05-01T21:03:57  *** david-lyle has quit IRC
2014-05-01T21:04:50  *** andreaf has joined #openstack-infra
2014-05-01T21:05:39  <jeblair> SpamapS: so i have 1216846 rows i need to update...
2014-05-01T21:05:54  <jeblair> SpamapS: like:
2014-05-01T21:05:55  <jeblair> update patch_set_approvals set granted='2011-11-23 17:04:14' where change_id=1861 and patch_set_id=2 and account_id=112 and category_id='Code-Review';
2014-05-01T21:06:14  <jeblair> SpamapS: do you have any suggestions about the best way to go about that?
2014-05-01T21:08:05  *** ramashri has joined #openstack-infra
2014-05-01T21:09:32  <jeblair> foobio: it's possible these entries may have legitimately changed since then (if a user clears and then re-sets a vote to the same value)
2014-05-01T21:09:56  <SpamapS> jeblair: is the only way you can identify them by PK?
2014-05-01T21:09:58  <jeblair> foobio: as we have found -- if a user just re-votes with the same value, it will not update the timestamp.  that seems the most likely case, the other one seems less likely.
2014-05-01T21:10:20  <jeblair> SpamapS: yeah, see the schema(s) at the bottom of https://etherpad.openstack.org/p/gerrit-2.8-reviewstats
2014-05-01T21:10:25  <SpamapS> jeblair: http://dev.mysql.com/doc/refman/5.5/en/load-data.html might be interesting to you
2014-05-01T21:10:55  <jeblair> also, some of these rows may have been deleted; and i think we just want to ignore that case.
2014-05-01T21:11:11  <SpamapS> jeblair: note that LOAD DATA INFILE corresponds exactly with SELECT INTO OUTFILE
2014-05-01T21:11:47  <jeblair> SpamapS: however, if rows don't exist, we don't want to re-create them
2014-05-01T21:12:07  <jeblair> SpamapS: so load data probably isn't what we want in this case
2014-05-01T21:13:09  <SpamapS> http://dev.mysql.com/doc/refman/5.5/en/load-data.html
2014-05-01T21:13:17  <SpamapS> doh sorry
2014-05-01T21:14:17  <sdague> jeblair: where is the granted ts coming from?
2014-05-01T21:14:29  <SpamapS> jeblair: so I'd create a new table, and then delete using an outer join.
2014-05-01T21:14:30  <jeblair> sdague: old database
2014-05-01T21:14:59  *** matty_dubs is now known as matty_dubs|gone
2014-05-01T21:15:50  *** smarcet has quit IRC
2014-05-01T21:15:59  <sdague> can you load it in a 2nd table in the new db, then subselect that field?
2014-05-01T21:16:08  <sdague> it won't be fast, but it will be what you want
2014-05-01T21:16:40  <SpamapS> jeblair: so,   on the old database, select into outfile.. new database.. create table new_thing like old_thing; .. load data infile into it.. delete new_table from new_table outer join old_table on .. where old_table.pk is null ... is my short hand making sense?
2014-05-01T21:17:09  <SpamapS> jeblair: finally select into outfile from new_table .. load data infile into old table
2014-05-01T21:17:20  <jeblair> SpamapS: how complicated is that if pk is 4 fields?
2014-05-01T21:18:27  *** jamielennox|away is now known as jamielennox
2014-05-01T21:19:02  *** thomasem has quit IRC
2014-05-01T21:19:08  <SpamapS> jeblair: just 4 part joins instad of 1 part. as complicated as writing update queries with 4 part where's.
2014-05-01T21:19:20  *** miqui has quit IRC
2014-05-01T21:20:05  *** jgrimm has quit IRC
2014-05-01T21:20:09  <jeblair> k
2014-05-01T21:21:23  <SpamapS> actually the last part might not need load data / select outfile ... update .. select is a thing.
2014-05-01T21:21:42  <jeblair> i think the thing to decide now is what to do in the case of "If a user has deleted their vote, then left a new one of the same value, we won't be able to tell."
2014-05-01T21:21:50  <jeblair> (a) ignore the issue and let the script overwrite it to the value of their pre-migration vote
2014-05-01T21:21:57  <jeblair> (b) attempt to identify the time range of inproperly updated records and only adjust records with timestamps within that range
2014-05-01T21:22:20  <jeblair> foobio, sdague: ^ opinions?
2014-05-01T21:22:38  *** sweston has quit IRC
2014-05-01T21:22:41  *** bookwar has left #openstack-infra
2014-05-01T21:23:42  *** flaper87 is now known as flaper87|afk
2014-05-01T21:23:55  <sdague> honestly, I'd be fine with a)
2014-05-01T21:24:20  <sdague> it seems like the level of history corruption is very low there
2014-05-01T21:24:26  *** zhiyan is now known as zhiyan_
2014-05-01T21:25:44  <SpamapS> how does one even delete their own vote?
2014-05-01T21:25:46  <jeblair> okay, then i think we can use SpamapS's idea (after we translate the category ids; i can just do that on the intermediate data file directly)
2014-05-01T21:26:33  <jeblair> SpamapS: little X next to your name, or change it to something else then change it back will produce the same result for this issue.
2014-05-01T21:26:50  *** dkranz has quit IRC
2014-05-01T21:26:52  *** e0ne has joined #openstack-infra
2014-05-01T21:27:18  *** changbl has quit IRC
2014-05-01T21:27:36  <jeblair> SpamapS: how do i do that without local filesystem access on the database server?
2014-05-01T21:27:40  <jeblair> (yay trove!)
2014-05-01T21:29:47  <SpamapS> jeblair: load data local infile
2014-05-01T21:29:59  <SpamapS> jeblair: select into outfile.. hm
2014-05-01T21:30:18  *** adalbas has quit IRC
2014-05-01T21:31:00  <SpamapS> jeblair: ahh! the mysql client will spit it out in the right flavor of csv I think
2014-05-01T21:31:54  <SpamapS> jeblair: so mysql -e 'select ...' --silent > textfile
2014-05-01T21:32:18  <mordred> ola
2014-05-01T21:33:22  <jeblair> SpamapS: cool, thx
2014-05-01T21:33:59  *** manishg has quit IRC
2014-05-01T21:34:42  *** pdmars has quit IRC
2014-05-01T21:35:19  <openstackgerrit> A change was merged to openstack-infra/config: Adds insecure option to launch_node.py  https://review.openstack.org/86690
2014-05-01T21:35:56  *** homeless has quit IRC
2014-05-01T21:35:56  *** aysyd has quit IRC
2014-05-01T21:37:06  *** zns has quit IRC
2014-05-01T21:37:45  <portante> jeblair: fyi, in-process func tests can use run-unittests.sh, it takes a "version" for the first argument, not a pure environment
2014-05-01T21:38:07  <portante> so if we had yaml setup that used run-tox.sh that would work
2014-05-01T21:38:14  *** dangers is now known as dangers_away
2014-05-01T21:38:14  <portante> but I'll have to look at this later
2014-05-01T21:38:29  <jeblair> portante: i think we do
2014-05-01T21:38:35  <portante> thanks for the help anyway, see http://logs.openstack.org/78/87078/4/check/gate-swift-unittests-func/8ce760f/console.html
2014-05-01T21:38:40  <jeblair> SpamapS: actually, your shorthand isn't making sense
2014-05-01T21:38:55  <jeblair> SpamapS: can you spell it out a bit more at the bottom of https://etherpad.openstack.org/p/gerrit-2.8-reviewstats ?
2014-05-01T21:39:18  <jeblair> SpamapS: particularly, i think you changed some metavars in your shorthand (not sure what happens to the table "new_thing"
2014-05-01T21:40:02  <jeblair> SpamapS: i'm not as concerned about the specific query syntax as i am in understand which things you think should be done to which tables and in what sequence
2014-05-01T21:40:04  <SpamapS> jeblair: yeah I did not think it through :) will add to etherpad
2014-05-01T21:41:47  <openstackgerrit> A change was merged to openstack-infra/config: Move dsvm-virtual-ironic out of experimental  https://review.openstack.org/90452
2014-05-01T21:43:54  *** adalbas has joined #openstack-infra
2014-05-01T21:46:02  <mordred> SpamapS: why not just mysqldump -hold_gerrit reviewdb patch_set_approvals > psa.sql ; mysql -hnew_gerrit_trove -e 'create schema fixthings' ; cat psa.sql | mysql -hnew_gerrit_trove fixthings ?
2014-05-01T21:47:43  <SpamapS> jeblair: ok
2014-05-01T21:48:13  *** changbl has joined #openstack-infra
2014-05-01T21:48:15  <mordred> SpamapS: and then do a multi-table update query with a join between the two so yo're just updating the ts columns and setting them to the values in the old table?
2014-05-01T21:48:27  <SpamapS> mordred: we'd need a --where in there.. but yeah that could work
2014-05-01T21:48:53  <SpamapS> mordred: probably a lot simpler. We started from a very different place than we finished. :)
2014-05-01T21:49:16  <SpamapS> jeblair: anyway, my now exposed as overly complex instructions are at the bottom of gerrit-2.8-reviewstats ...
2014-05-01T21:49:20  <mordred> update new_psa n, old_psa set n.ts_field = o.ts_field where o.key1 = n.key1 and o.key2 = n.key2 ...
2014-05-01T21:49:30  <jeblair> SpamapS: woo!  thanks
2014-05-01T21:49:34  <SpamapS> Yeah there's only one column that needs updating isn't there?
2014-05-01T21:49:39  <jeblair> SpamapS: yeah
2014-05-01T21:49:41  <mordred> SpamapS: I get the benefit of swooping in and reading all of your work
2014-05-01T21:49:45  <SpamapS> ok so let's go to the better idea..
2014-05-01T21:49:53  *** bhuvan has quit IRC
2014-05-01T21:49:53  <jeblair> mordred: you want to spell that out in the etherpad?
2014-05-01T21:50:01  <mordred> jeblair: I think SpamapS is about to
2014-05-01T21:50:04  <jeblair> k
2014-05-01T21:50:11  *** ArxCruz has joined #openstack-infra
2014-05-01T21:51:26  *** zehicle_at_dell has joined #openstack-infra
2014-05-01T21:51:47  *** aconrad has quit IRC
2014-05-01T21:52:04  <foobio> i step away to cook dinner and suddenly so many pings in scrollback
2014-05-01T21:52:11  *** adalbas has quit IRC
2014-05-01T21:52:20  <mordred> foobio: NEVER EAT AGAIN!!!
2014-05-01T21:52:39  <lifeless> sp	hi
2014-05-01T21:52:55  <mordred> jeblair: the better idea SpamapS is writing out can also be tested in a local db too, to make sure the update query is right
2014-05-01T21:53:10  <mordred> jeblair: you know, load a dump of the two tables into local schemas
2014-05-01T21:53:35  *** mburned is now known as mburned_out
2014-05-01T21:53:43  <mordred> lifeless: that's one of the odder things you've ever said
2014-05-01T21:53:43  <jeblair> mordred: yeah, i was planning on doing that regardless.  so far i've learned my version of mysql doesn't support load data local infile.
2014-05-01T21:54:42  <foobio> 1.2 million rows before breakfast
2014-05-01T21:54:46  <SpamapS> mordred: ok, look now..
2014-05-01T21:54:49  <SpamapS> https://etherpad.openstack.org/p/gerrit-2.8-reviewstats
2014-05-01T21:54:57  <SpamapS> jeblair: ^ better idea done
2014-05-01T21:55:01  *** bhuvan has joined #openstack-infra
2014-05-01T21:55:02  <mordred> jeblair: that's because load data local infile is a security fisk
2014-05-01T21:55:22  <foobio> jeblair: still catching up, but perhaps the "problem" updates all have the exact same timestamp rather than that time or newer
2014-05-01T21:55:24  *** marun has quit IRC
2014-05-01T21:55:26  <lifeless> jogo: jelmer, jml, uhm need to check the acls to remember who else
2014-05-01T21:55:26  <SpamapS> jeblair: did load data local infile get removed finally?
2014-05-01T21:55:36  <mordred> SpamapS: do you really need the edit things step?
2014-05-01T21:55:38  <SpamapS> why hasn't mysql just copied the postgres COPY command yet?
2014-05-01T21:55:40  <lifeless> SpamapS: 'oh hi'
2014-05-01T21:55:41  <jeblair> foobio: it's a range.
2014-05-01T21:55:42  <SpamapS> mordred: I don't know
2014-05-01T21:55:55  <SpamapS> mordred: I got the feeling jeblair didn't want to revert _ALL_ of the votes
2014-05-01T21:55:56  <mordred> I don't think you do
2014-05-01T21:55:56  *** marun has joined #openstack-infra
2014-05-01T21:56:00  <SpamapS> lifeless: yo
2014-05-01T21:56:11  <jogo> lifeless: you can review it right ;)
2014-05-01T21:56:16  <mordred> how do you select the ones you don't want to revert?
2014-05-01T21:56:26  <SpamapS> don't know :-/
2014-05-01T21:56:28  * mordred fine with whatever - just asking annoying questions
2014-05-01T21:56:32  <SpamapS> that's for jeblair
2014-05-01T21:56:36  <jeblair> er
2014-05-01T21:56:43  <jeblair> we only want to update rows that exist
2014-05-01T21:56:51  <jeblair> that's the only selection criteria
2014-05-01T21:57:00  <mordred> right. that should be handled by the join condition
2014-05-01T21:57:02  <jeblair> there is an edit step to change the label values
2014-05-01T21:57:08  <mordred> gotcha
2014-05-01T21:57:24  <jeblair> which i have written twice now for TSV files, and am about to write a third time for CSV ones :/
2014-05-01T21:57:36  <openstackgerrit> Brant Knudson proposed a change to openstack-infra/config: Add stable filter for keystone python33 and rally  https://review.openstack.org/91690
2014-05-01T21:57:39  <mordred> you could do it as a query after you load the dump?
2014-05-01T21:57:50  <jeblair> mordred: i think so
2014-05-01T21:58:00  *** marun has quit IRC
2014-05-01T21:58:03  <foobio> i didn't know you could do csv with mysqlclient stdout redirection... only ever knew about tsv
2014-05-01T21:58:30  * mordred feels bad he was offline travelling on the day with the fun db queries
2014-05-01T21:59:48  <SpamapS> thats what you get
2014-05-01T21:59:55  <SpamapS> well that, and jet lag
2014-05-01T22:00:01  <SpamapS> and a mediocre meal
2014-05-01T22:00:05  <SpamapS> and all the orange juice you can drink
2014-05-01T22:00:33  *** marcoemorais has quit IRC
2014-05-01T22:01:11  <foobio> tang, the drink that went to the moon
2014-05-01T22:01:38  <jeblair> SpamapS, mordred: create database is denied in trove
2014-05-01T22:02:15  <foobio> i think you can probably do it from troveclient (though i've only ever done it from the provider's webui)
2014-05-01T22:02:23  <jeblair> i mean, i guess we could use the trove api to make a new db and give the user access
2014-05-01T22:02:54  <bknudson> I can't WIP my review on stable/icehouse?
2014-05-01T22:03:10  *** marcoemorais has joined #openstack-infra
2014-05-01T22:03:33  *** dstanek is now known as dstanek_zzz
2014-05-01T22:03:54  <foobio> bknudson: work-in-progress is now a workflow -1 vote since the gerrit upgrade
2014-05-01T22:04:18  <foobio> bknudson: so review the change and set your workflow vote to -i
2014-05-01T22:04:18  <bknudson> foobio: I don't have that button -- https://review.openstack.org/#/c/91677/
2014-05-01T22:04:40  <bknudson> it shows up on this one -- https://review.openstack.org/#/c/91690/
2014-05-01T22:04:55  <openstackgerrit> Michael Krotscheck proposed a change to openstack-infra/storyboard-webclient: Added task priority to edit and display of tasks  https://review.openstack.org/91693
2014-05-01T22:05:05  *** yfried has joined #openstack-infra
2014-05-01T22:05:09  <foobio> oh, interesting... i wonder whether we have an exclusive something set on stable/.* branches
2014-05-01T22:06:20  <jeblair> foobio, mordred: i have granted gerrit2 access to fixthings and reviewdb on the production trove instance
2014-05-01T22:06:31  <foobio> jeblair: k
2014-05-01T22:08:28  <mattoliverau> Morning
2014-05-01T22:09:23  *** ramashri has quit IRC
2014-05-01T22:11:52  <mordred> jeblair: ++
2014-05-01T22:11:53  *** e0ne has quit IRC
2014-05-01T22:12:04  <bknudson> opened a bug https://bugs.launchpad.net/openstack-ci/+bug/1315178
2014-05-01T22:12:06  <uvirtbot> Launchpad bug 1315178 in openstack-ci "User can't mark stable review as work in progress" [Undecided,New]
2014-05-01T22:12:25  *** e0ne has joined #openstack-infra
2014-05-01T22:12:47  <foobio> zaro: what's the chance that our exclusive label workflow 0..+1 for openstack-stable-maint group on
2014-05-01T22:13:03  <foobio> refs/heads/stable/* is preventing change owners from setting workflow -1?
2014-05-01T22:13:27  <foobio> and any suggestions on a workaround?
2014-05-01T22:14:41  *** markmcclain has quit IRC
2014-05-01T22:15:04  <mgagne> is there an place I can find stats about openstack infra? ie like the number of nodes created per day
2014-05-01T22:15:34  *** marcoemorais has quit IRC
2014-05-01T22:15:45  <foobio> mgagne: http://graphite.openstack.org/ plus elbow grease
2014-05-01T22:16:16  <mgagne> foobio: could I borrow your elbow? any wiki with pre-defined queries?
2014-05-01T22:16:29  <foobio> mgagne: though the graphs at the bottom of http://status.openstack.org/zuul/ provide some great starting points
2014-05-01T22:17:11  <foobio> (protip... see the get params in the urls for those images)
2014-05-01T22:18:12  <SlickNik> jeblair / foobio / mordred: At some point I want to catch up with you guys and get a quick brain-dump on how you're using trove — what's working well, and what's painful / lacking. Perhaps f2f in ATL?
2014-05-01T22:18:52  <mordred> SlickNik: we'd love to give you that feedback :)
2014-05-01T22:19:18  <foobio> SlickNik: i'm pretty sure we have feedback
2014-05-01T22:19:20  *** changbl has quit IRC
2014-05-01T22:19:27  <jeblair> mordred: double check what i've been putting in the ep
2014-05-01T22:19:32  <mordred> jeblair: looking
2014-05-01T22:19:54  <jeblair> mordred, foobio: i did those 3 update statements, and i was a little surprised that granted didn't get updated; am i missing something?
2014-05-01T22:19:58  <foobio> SlickNik: any insight into why rackspace trove instances are reachable on 3306/tcp from every tenant in the same region?
2014-05-01T22:20:04  <jeblair> (i thought i was going to have to do granted=granted)
2014-05-01T22:21:47  *** lakshmi has quit IRC
2014-05-01T22:22:01  *** doug-fish has left #openstack-infra
2014-05-01T22:22:47  *** dstanek_zzz is now known as dstanek
2014-05-01T22:22:49  *** lakshmiS has joined #openstack-infra
2014-05-01T22:23:04  *** lakshmiS has quit IRC
2014-05-01T22:23:23  <mordred> jeblair: that looks like good output
2014-05-01T22:23:59  <jeblair> mordred: any idea why granted didn't update when i ran those update statements?
2014-05-01T22:24:25  <mordred> it says it changed a million rows
2014-05-01T22:24:38  <mordred> wait- when you say "those update statements"
2014-05-01T22:24:42  <SlickNik> foobio: AFAIK they have been using something different from the upstream secgroups extension (which only landed in Havana).
2014-05-01T22:24:43  <jeblair> mordred: no, the 3 update statements above
2014-05-01T22:24:45  *** rlandy has quit IRC
2014-05-01T22:24:59  <mordred> I wouldn't expect those to change granted at all
2014-05-01T22:24:59  <SlickNik> foobio: Not sure about the details of that though.
2014-05-01T22:25:12  <jeblair> mordred: then why do we have this problem in the first place?
2014-05-01T22:25:26  <mordred> I would guess something having to do with the restore of the dump
2014-05-01T22:25:37  <mordred> and/or something to do with the data migrations in gerrit
2014-05-01T22:25:50  <SlickNik> jeblair / mordred / foobio: I'll ensure I come find you guys in ATL. :)
2014-05-01T22:25:56  <mordred> like, part of the upgrade ran data migration scripts
2014-05-01T22:26:05  <mordred> maybe I should go read those
2014-05-01T22:26:10  <jeblair> mordred: not the dump; the problem hasn't appeared loading data so far, and it did not affect SUMB changes -- those labels didn't update.
2014-05-01T22:26:16  <foobio> SlickNik: good answer to a somewhat rhetorical question (part of our complaints probably stem from a provider's implementation choices)
2014-05-01T22:26:17  <jeblair> mordred: it only affected the rows where lables changed
2014-05-01T22:26:31  <jeblair> mordred: which, of course, is what i'm recreating in those update statements
2014-05-01T22:26:33  <jeblair>   `granted` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
2014-05-01T22:26:49  <jeblair> mordred: ^ i would have thought the problem stemmed from "ON UPDATE CURRENT_TIMESTAMP"
2014-05-01T22:27:11  <mordred> yah. I follow you now
2014-05-01T22:27:24  <jeblair> which i thought meant "if this row is updated, always set granted to the current time"
2014-05-01T22:27:25  *** bknudson has quit IRC
2014-05-01T22:27:53  *** yidclare has quit IRC
2014-05-01T22:28:29  <jeblair> if we don't have an explanation for why we haven't seen that, then i think i should do another dry run on the trove instance
2014-05-01T22:28:44  <mordred> jeblair: ++
2014-05-01T22:28:56  <mordred> jeblair: also, I'm going to go read the schema migrations
2014-05-01T22:28:59  *** lakshmiS has joined #openstack-infra
2014-05-01T22:29:27  <jeblair> i will make a 3rd database on the prod trove instance to stand in for reviewdb and dry run again
2014-05-01T22:29:41  *** aconrad has joined #openstack-infra
2014-05-01T22:29:47  <mgagne> foobio: close enough: http://docs.openstack.org/infra/publications/2014-lca-zuul/#(8)
2014-05-01T22:30:25  <foobio> SlickNik: at the moment _my_ biggest concern is simply that we have to mask out the dns names of our trove instances in our otherwise public configuration because anyone who knows the ip address can potentially leverage pre-authentication bugs in mysqld or start trying to brute-force our account credentials (and i'm very much not a fan of "security by obscurity" there)
2014-05-01T22:31:22  <foobio> mgagne: those are fairly recent numbers if you're not looking for *current* numbers, yes
2014-05-01T22:31:50  <mgagne> foobio: just wanted to get an order of magnitude, thanks =)
2014-05-01T22:32:58  *** marcoemorais has joined #openstack-infra
2014-05-01T22:33:46  *** prad has quit IRC
2014-05-01T22:36:51  <jeblair> foobio, mordred: we need to fix mysql backups on review.o.o (they aren't happening because of the incorrect defaults file)
2014-05-01T22:37:06  <jeblair> after we do that, we should check/fix bup.
2014-05-01T22:38:25  <foobio> oh, great point. the old backups probably assumed a defaults file which pointed at the local mysqld
2014-05-01T22:38:35  *** thedodd has quit IRC
2014-05-01T22:38:45  <sdague> so... do we have a policy around people uploading other people's patches without credit?
2014-05-01T22:38:56  <sdague> an instance of that just happened in the devstack queue
2014-05-01T22:38:58  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/elastic-recheck: Remove Closed bugs that haven't been seen in two weeks  https://review.openstack.org/91695
2014-05-01T22:39:27  <anteaya> sdague: not so much policy that I know but frowning certainly
2014-05-01T22:39:43  <foobio> sdague: uploading someone else's work withouit credit shouldn't require a policy. it's just flat-out wrong
2014-05-01T22:39:43  <sdague> yes, once it was pointed out I changed my -1 to a -2
2014-05-01T22:40:04  <jeblair> sdague: link?
2014-05-01T22:40:05  <sdague> https://review.openstack.org/#/c/90965/ is the review in question
2014-05-01T22:40:11  *** wenlock has quit IRC
2014-05-01T22:40:12  <foobio> copyright infringement is illegal in most jurisdictions
2014-05-01T22:40:27  <foobio> "don't break the law" probably doesn't need encoding in policy
2014-05-01T22:41:05  <anteaya> ah sorry, i was meaning someone committing on behalf of someone else, not theft
2014-05-01T22:41:17  *** jhesketh has quit IRC
2014-05-01T22:41:27  <sdague> that's fine, I wasn't sure if we had some more gentle redirection
2014-05-01T22:41:44  <anteaya> yeah, I think there is already policy on outright stealing someone else's work
2014-05-01T22:42:12  <anteaya> I think someone who does this has moved beyond the gentle redirection stage
2014-05-01T22:42:42  <cody-somerville> It may be a mistake.
2014-05-01T22:42:51  <jeblair> yeah, let's not go overboard
2014-05-01T22:43:01  <sdague> yeah, agreed
2014-05-01T22:43:04  <jeblair> it's worth noting that the original patch had no copyright information
2014-05-01T22:43:17  <sdague> well, it doesn't need to
2014-05-01T22:43:21  <jeblair> which means there was no authorship information to remove as far as that goes
2014-05-01T22:43:25  <foobio> well, keep in mind that different cultures place different levels of value on "intellectual property"
2014-05-01T22:43:27  <cody-somerville> Plus it's probably not copyright infringement either. The other patch was submitted under CLA. Attribution is not required by Apache license.
2014-05-01T22:43:35  *** gondoi is now known as zz_gondoi
2014-05-01T22:43:40  <sdague> cody-somerville: sure, though it is a CLA violation
2014-05-01T22:43:49  <sdague> https://review.openstack.org/static/cla.html - #5
2014-05-01T22:43:52  <jeblair> sdague: i'm not saying it needed it, i'm saying that the second person may not have violated the license
2014-05-01T22:44:24  <sdague> sure, I don't actually want to flame the person. I was just trying to figure out if we had a more general education in "don't do that"
2014-05-01T22:44:24  *** marcoemorais has quit IRC
2014-05-01T22:44:28  <sdague> already sorted out
2014-05-01T22:44:43  <foobio> i tend to assume ignorance rather than malice, however it does need crediting if it merges in my (personal) opinion
2014-05-01T22:45:05  <sdague> the original contributor emailed me and was pretty mad about it
2014-05-01T22:45:17  <anteaya> about what part of it?
2014-05-01T22:45:24  <sdague> that it was his work
2014-05-01T22:45:28  <foobio> a "co-authored-by" header in the commit message might have averted all of that
2014-05-01T22:45:31  <sdague> with no reference ot it
2014-05-01T22:45:34  <sdague> yeh
2014-05-01T22:45:34  <anteaya> right, that makes sense
2014-05-01T22:45:40  *** marcoemorais has joined #openstack-infra
2014-05-01T22:45:43  <sdague> which is all fair
2014-05-01T22:45:49  <anteaya> has the author of the second patch said anything?
2014-05-01T22:45:54  <sdague> not yet
2014-05-01T22:46:02  <sdague> I just got the email an hour ago
2014-05-01T22:46:05  *** marcoemorais has quit IRC
2014-05-01T22:46:09  <anteaya> makes sense
2014-05-01T22:46:10  <sdague> so it's all late breaking
2014-05-01T22:46:15  <jeblair> the way the project operates things like oslo, however, goes to show that as a project we don't actually value git-level attribution very much
2014-05-01T22:46:27  <anteaya> I would be interested to hear his perspective, if he shares it
2014-05-01T22:47:16  <sdague> honestly, if you haven't been steeped in open source for a long time, copyright nuances escape most people. Especially under a certain age
2014-05-01T22:47:17  <foobio> gently pointing them toward the co-authored-by header discussed at https://wiki.openstack.org/wiki/GitCommitMessages#Including_external_references is probably warranted
2014-05-01T22:47:38  *** marcoemorais has joined #openstack-infra
2014-05-01T22:47:50  <cody-somerville> Although I'd probably be inclined to credit the other author in some way, the original change was abandoned and it would be a shame if the wrong message was given that you can't pick up abandoned changes and continue with them.
2014-05-01T22:47:52  <sdague> so trying to figure out the best education path
2014-05-01T22:48:24  <anteaya> I think in these circumstances direct communication with the original author is called for
2014-05-01T22:48:36  <anteaya> at least an attempt to email the person
2014-05-01T22:48:45  <anteaya> that is why there is an email in every git commit
2014-05-01T22:49:04  *** rahmu has left #openstack-infra
2014-05-01T22:49:11  <openstackgerrit> A change was merged to openstack-dev/specs-cookiecutter: Add optional spell checker target  https://review.openstack.org/88072
2014-05-01T22:49:30  <cody-somerville> foobio: ++ on sending link to that discussion.
2014-05-01T22:49:48  <foobio> cody-somerville: i'm tempted to support amending the (new in gerrit 2.8!) abandon control acl to all registered users. the problem is that i believe it would allow people to abandon the patches of others as well. maybe an upstream bug to allow others to adopt abandoned changes is in order
2014-05-01T22:50:36  <cody-somerville> maybe we should move back to bzr and then the original history will be preserved ;)
2014-05-01T22:51:45  <foobio> i envision an "adopt this change" button on abandoned changes, which also solves the problem of conveying the change owner field to another account too
2014-05-01T22:51:51  <jeblair> cody-somerville: i realize you are not serious, but nonetheless, i don't see how that would help....?
2014-05-01T22:52:01  *** sacharya has quit IRC
2014-05-01T22:52:04  <sdague> foobio: that would be a great feature
2014-05-01T22:52:22  *** andreykurilin_ has joined #openstack-infra
2014-05-01T22:52:55  <cody-somerville> jeblair: They'd bzr clone the other person's change, make their commits, push it up for review. Those changes get merged into trunk as one commit but the history of the branch submitted remains "inside" that single commit.
2014-05-01T22:53:03  <jeblair> (the only thing you lose by not being able to adopt an abandoned change is the review history, which is not something that is in either scm)
2014-05-01T22:53:27  <jeblair> cody-somerville: you can do that with git too; just change the change-id and push up a new patchset.  which is not entirely dissimilar to what happened here.
2014-05-01T22:53:32  <foobio> jeblair: well, with normal workflows, the change author would also remain as it had been originally unless you reset it
2014-05-01T22:53:53  <foobio> but yes, changing the change-id would also get you the same
2014-05-01T22:54:32  <cody-somerville> jeblair: that's just a single commit. with bzr the original separate commits would be retained in the history. You wouldn't use commit --amend with bzr.
2014-05-01T22:54:56  <foobio> bazaar is bizarre
2014-05-01T22:55:26  <cody-somerville> on the target branch, you'd just see a normal single commit
2014-05-01T22:55:40  <jeblair> cody-somerville: we're kind of comparing apples and oranges here; you're suggesting that things about gerrit's workflow would be solved by using bzr
2014-05-01T22:56:02  <jeblair> cody-somerville: git (and even gerrit) can certainly support merging branches
2014-05-01T22:56:13  <jeblair> we have chosen quite deliberately not to do that
2014-05-01T22:56:33  <jeblair> (except in unusual circumstances)
2014-05-01T22:56:46  <cody-somerville> Ah. I've only really ever used git with gerrit.
2014-05-01T22:56:53  <jeblair> because of the way we want the history to look
2014-05-01T22:57:19  <cody-somerville> You can get same thing with bzr. It basically smooshes all the commits being proposed into a single one.
2014-05-01T22:57:29  *** arnaud___ has quit IRC
2014-05-01T22:58:00  <cody-somerville> but the actual ancestry, and the individual commits, are still preserved and can be seen if you pass in the right arguments to bzr
2014-05-01T22:58:05  <foobio> git calls that "squash" but yes
2014-05-01T22:58:28  <foobio> oh, well it also just concatenates all the commit messages in git when you do that
2014-05-01T22:58:43  <foobio> so not really multi-layered when you squash
2014-05-01T22:58:52  <sdague> yeh, you could do all the same things with feature branches though
2014-05-01T22:58:53  <foobio> merge commits may indeed be a better analogy
2014-05-01T22:59:09  <jeblair> mordred: aha, i was wrong -- the timestamps were updated,
2014-05-01T22:59:12  <sdague> but people don't really want intermediate crap patches in the history :)
2014-05-01T22:59:13  <jeblair> mordred: that reassures me
2014-05-01T22:59:59  *** etoews has quit IRC
2014-05-01T23:00:27  <foobio> sdague: well, some people seem to think they do (there have been discussions about people who dislike gerrit's requirements around squashing and rebasing and who prefer github's pull requests featuring branches with iterative commits on them)
2014-05-01T23:00:47  <jeblair> foobio: those people don't tend to be reviewers :)
2014-05-01T23:01:04  <foobio> i find the github workflow very annoying because, yes, nearly impossible to review sanely
2014-05-01T23:01:30  <mgagne> foobio: "oops, fixed typo"
2014-05-01T23:02:04  *** andreaf has quit IRC
2014-05-01T23:02:07  <mordred> jeblair: oh good. except we don't want them updated when we load the dump
2014-05-01T23:02:23  <jeblair> mordred: i think it's the update that does it, and that should be easy t ofix.
2014-05-01T23:02:23  <foobio> there is, after all, a couple decades of experience which has led to the lkml workflow. and as much as new devs tend to complain about how hard it is to get a patch into the mainline linux kernel, it's still around
2014-05-01T23:02:25  <sdague> right. That's for projects with 1 - 3 developers, where everyone has all the project context in their head all the time :)
2014-05-01T23:02:53  <mordred> jeblair: yah. just alter the column in the old table to not have the on update, yeah?
2014-05-01T23:02:56  <mgagne> foobio: some changes have 40 patch sets, imagine having 40 commits to review in a PR :-/
2014-05-01T23:03:07  <sdague> mgagne: only 40
2014-05-01T23:03:08  <mordred> oh - which is what you did in the alter
2014-05-01T23:03:16  <foobio> mgagne: "can you squash that so i can review it in context?" ;)
2014-05-01T23:03:20  <cody-somerville> In launchpad, you review the diff of the branch, not each 40 commits.
2014-05-01T23:03:29  <sdague> initial baremetal series was about 30 patches, and got into the 60s on revisiosn
2014-05-01T23:03:30  <jeblair> mordred: no, the alter doesn't seem to do it; just update
2014-05-01T23:03:38  <foobio> cody-somerville: so lp does the squash for you. awesome
2014-05-01T23:03:51  *** ArxCruz has quit IRC
2014-05-01T23:03:54  <mordred> jeblair: I mean, if you alter the table as you have in the script there to remove the on update clause, then do the alter
2014-05-01T23:04:03  <mordred> it _shoudln't_ update the timestamp at that point, right?
2014-05-01T23:04:15  <jeblair> mordred: i didn't remove the onupdate clause
2014-05-01T23:04:38  <mordred> bah. I just saw the alter on the other column, my bad
2014-05-01T23:04:50  *** andreykurilin_ has quit IRC
2014-05-01T23:05:05  <jeblair> mordred, foobio: i updated the etherpad to reflect using 'granted=granted' in the updates
2014-05-01T23:05:05  <foobio> cody-somerville: i'll be the first to admit that post-rcs/cvs (and to some extent post-svn) there were several contenders with better models/features compared to git. in the end git won, and is still better than svn, so i'm happy enough to use it ;)
2014-05-01T23:05:18  <jeblair> mordred: er i don't think what you are writing is necessary
2014-05-01T23:05:28  <foobio> jeblair: that's basically what we do with the update queries on project renames too
2014-05-01T23:05:33  *** andreykurilin_ has joined #openstack-infra
2014-05-01T23:06:04  <cody-somerville> foobio: nice thing is you can see commit message for every change they make in response to reviews plus diff (and just the diff of the commit, so you don't get other cruft in there).
2014-05-01T23:06:08  <jeblair> mordred, foobio: i just dry-ran the current instructions locally and it works
2014-05-01T23:06:16  <mordred> ok. cool
2014-05-01T23:06:25  <foobio> jeblair: excellent
2014-05-01T23:06:28  <cody-somerville> foobio: but then when it lands, you get the single merge commit
2014-05-01T23:06:58  <mordred> cody-somerville: that's just how the output of the log commands work
2014-05-01T23:07:02  <jeblair> doing it again on the prod server
2014-05-01T23:07:11  <cody-somerville> foobio: but the intermediate commits can still be found hidden within that merge commit (hence why I even brought this up)
2014-05-01T23:07:32  <mordred> cody-somerville: it's not a difference in the tools themselves. you can configure git to not show the intermediary commits in its log output too
2014-05-01T23:07:41  <mordred> and you can configure bzr to show them all the time
2014-05-01T23:07:45  <foobio> cody-somerville: yeah, i get that a commit object is multi-layered there. it's definitely an interesting model
2014-05-01T23:08:01  <SpamapS> I often wonder if keeping all those intermediary commits is one of the reasons git appears so much faster than bzr
2014-05-01T23:08:21  <mordred> people in the gh pr model keep the intermediary commits, and the review is done on the diff of the branches
2014-05-01T23:08:25  <cody-somerville> I think part of the reason git appears so much faster is that there are better/faster places to host other than launchpad ;)
2014-05-01T23:08:33  *** signed8bit is now known as signed8bit_ZZZzz
2014-05-01T23:08:40  <foobio> cody-somerville: touché
2014-05-01T23:09:24  <mattoliverau> good old sourceforge did bzr... git still won :P
2014-05-01T23:09:28  <mordred> I think we could have a gerrit-like branch-merge review model that is a mix of both - what we'd be losing is a cleanly bisectable hisotyr
2014-05-01T23:09:56  <cody-somerville> mordred: How?
2014-05-01T23:09:56  <mordred> the tools could be made to present the diffs for review in the manner consistent with our current review workflow
2014-05-01T23:10:10  <SpamapS> bisect works fine w/ merges last I checked.
2014-05-01T23:10:19  <foobio> mordred: well, if you bisect along the branch history and not within the sub-branches, i'm not sure you really lose bisectability
2014-05-01T23:10:25  <mordred> possibly so
2014-05-01T23:10:29  <jeblair> mordred: this takes me back 2.5 years.  :)
2014-05-01T23:10:34  <mordred> but git by default flattens it, as cody mentioned
2014-05-01T23:10:52  <mordred> so, by default, you get a thing that looks like each of the intermediary commits is a real thing
2014-05-01T23:10:53  <sdague> also, on the anti bzr pov, I'd have to stab you all if we were using it :)
2014-05-01T23:10:57  <mordred> even though they aren't interesting
2014-05-01T23:11:02  *** Alexandra_ has joined #openstack-infra
2014-05-01T23:11:06  <mordred> sdague: be glad you arrived post-switch then :)
2014-05-01T23:11:09  <cody-somerville> I wish git had a better "ui". :)
2014-05-01T23:11:19  <cody-somerville> bzr was simple and intuitive to use for the most part.
2014-05-01T23:11:20  <mordred> cody-somerville: I actually at this point think git's ui is 1000000000 better
2014-05-01T23:11:21  <sdague> mordred: yes, very much so
2014-05-01T23:11:38  <mordred> but it does have a steeper learning curve
2014-05-01T23:11:43  <mordred> I find going back to bzr very painful now
2014-05-01T23:11:46  <sdague> cody-somerville: I've only heard that ever said by people that spent forever with bzr :)
2014-05-01T23:11:56  <mordred> even though I was a fanboi for quite a while
2014-05-01T23:12:29  <foobio> i still know darcs and hg worshippers too
2014-05-01T23:12:47  <sdague> hg at least has a reasonable size community around it
2014-05-01T23:12:53  * SlickNik wonders if he should throw hg into the mix 
2014-05-01T23:12:59  *** SumitNaiksatam has joined #openstack-infra
2014-05-01T23:13:10  <mordred> I think the python community obsession with it will keep it around for a while
2014-05-01T23:13:16  <jeblair> mordred, foobio: testreview db on prod trove has final test version of patch_set_approvals table.  want to double check it?
2014-05-01T23:13:30  <mordred> jeblair: looking
2014-05-01T23:13:31  <foobio> jeblair: looking
2014-05-01T23:13:51  *** jhesketh_ has joined #openstack-infra
2014-05-01T23:13:59  <sdague> mordred: probably, though this paints a pretty clear picture - http://redmonk.com/sogrady/2013/12/19/dvcs-and-git-2013/
2014-05-01T23:14:42  *** jhesketh_ is now known as jhesketh
2014-05-01T23:14:52  <jhesketh> Morning
2014-05-01T23:14:59  <foobio> jeblair: did we have any examples of the incorrectly updated patchset approvals in prod?
2014-05-01T23:15:38  <jeblair> foobio: the etherpad has one
2014-05-01T23:15:52  <mordred> jeblair: I see a mix of Code-Review style and SUBM in the table
2014-05-01T23:16:11  *** zns has joined #openstack-infra
2014-05-01T23:16:13  <mordred> jeblair: does SUBM need to get changed too?
2014-05-01T23:16:14  <jeblair> mordred: check out line 118 in the etherpad
2014-05-01T23:16:17  <foobio> mordred: i think that's expected
2014-05-01T23:16:35  <mordred> ossum
2014-05-01T23:16:36  <jeblair> mordred: those are the values in the current db (short answer, no, subm stays the same)
2014-05-01T23:16:37  <mordred> thanks
2014-05-01T23:16:50  <mordred> that's great.
2014-05-01T23:16:51  <clarkb> hg is terrible. bzr > hg. that is all back to afk
2014-05-01T23:17:08  <foobio> clarkb: go back to your vacation. i DID NOT see you in here
2014-05-01T23:17:16  <jeblair> there's no arguing with that :)
2014-05-01T23:17:49  <openstackgerrit> A change was merged to openstack-infra/elastic-recheck: Remove Closed bugs that haven't been seen in two weeks  https://review.openstack.org/91695
2014-05-01T23:18:44  *** mikal is now known as stillbert
2014-05-01T23:19:23  <mordred> clarkb: ++
2014-05-01T23:19:42  <foobio> anyway, we should all just be thankful. i have a friend who runs infotech at epic games, and he has to support their perforce revision control server cluster
2014-05-01T23:20:01  *** moted has quit IRC
2014-05-01T23:20:34  <foobio> pretty much all he does is whine about how he wishes they could just switch to *any* modern open/free-developed dvcs
2014-05-01T23:20:42  <mordred> jeblair: it looks good to me
2014-05-01T23:20:56  <mordred> jeblair: there are old timestamp values, and there are also tiemstamp values still from today
2014-05-01T23:21:11  <jeblair> mordred: since i've done all the steps to test, there's no reason i can't just run the last step again changing the schema name to reviewdb, right?
2014-05-01T23:21:20  <mordred> jeblair: that's right
2014-05-01T23:21:20  <jeblair> (to do it for realz)
2014-05-01T23:21:20  *** melwitt has quit IRC
2014-05-01T23:21:28  <jeblair> cool
2014-05-01T23:21:46  <jeblair> just waiting on the go from foobio (no rush)
2014-05-01T23:22:16  <foobio> jeblair: i'm still staring. i switched computers so took me a minute to re-find the etherpad
2014-05-01T23:22:42  <foobio> evening and all
2014-05-01T23:22:44  <morganfainberg> jeblair, clarkb, ping wanted to ask if there was a serious issue if keystone under mod_wsgi produced a slightly different format for the log.  notably, apache 2.2 prepends some... data that can't be customized to the log line
2014-05-01T23:23:14  <mordred> morganfainberg: got examples?
2014-05-01T23:23:27  <morganfainberg> mordred, yeah [Thu May 01 16:22:52 2014] [error] 2014-05-01 16:22:52.092 32280 DEBUG keystone.common.wsgi [-] arg_dict: {} __call__ /opt/stack/keystone/keystone/common/wsgi.py:181
2014-05-01T23:23:34  <Alex_Gaynor> So there's a revision at the top of the gate pipeline, and one if it's jobs hasn't started, and there's no obvious reason why not
2014-05-01T23:23:36  <SpamapS> foobio: Perforce was really awesome. 10 years ago. :)
2014-05-01T23:23:36  <morganfainberg> mordred, that is w/ apache, w/o take the [<datestamp>][error] off
2014-05-01T23:23:58  <mordred> morganfainberg: wow. it's so nice of it to prepend that
2014-05-01T23:24:06  <SpamapS> foobio: I will say, their meld-ish tool did a hell of a lot better showing you "what was yours, what was theirs, what is the common base"
2014-05-01T23:24:07  <mordred> you can't customize that with logline?
2014-05-01T23:24:16  *** imcsk8 has quit IRC
2014-05-01T23:24:23  *** asettle is now known as Captain_Kirk
2014-05-01T23:24:28  <morganfainberg> mordred, nope, this is errorlog. 2.4 has the ErrorLogFormat directive that lets you customize
2014-05-01T23:24:30  *** imcsk8 has joined #openstack-infra
2014-05-01T23:24:42  <sdague> why is debug in error log?
2014-05-01T23:24:42  <mordred> oh! wait - why wouldn't we just use 2.4 then?
2014-05-01T23:24:54  <sdague> mordred: need Ubuntu >= 13.10
2014-05-01T23:24:56  *** e0ne has quit IRC
2014-05-01T23:24:58  <mordred> gotcha
2014-05-01T23:25:05  <morganfainberg> sdague, all output / debug from the CGIs mod_wsgi etc go to apache errorlog
2014-05-01T23:25:33  <morganfainberg> sdague, customlog (accesslog?) is meant for request/response etc info
2014-05-01T23:25:45  <sdague> so I feel like in this situation you really shouldn't be just printing to stdout
2014-05-01T23:25:54  *** Captain_Kirk is now known as SettleDown
2014-05-01T23:25:56  <sdague> instead should have a dedicated log file
2014-05-01T23:26:09  <sdague> is that an option with wsgi?
2014-05-01T23:26:40  <morganfainberg> sdague, that was the next step to try, i am pretty sure i can, but, it means the screen log watcher will need to be fixed in devstack in this case
2014-05-01T23:26:47  *** imcsk8 has quit IRC
2014-05-01T23:26:54  <sdague> sure
2014-05-01T23:26:59  <morganfainberg> sdague, not a big deal, but was asking the path of least resistance :)
2014-05-01T23:27:04  *** imcsk8 has joined #openstack-infra
2014-05-01T23:27:08  <foobio> jeblair: apologies for the delay. the test table lgtm
2014-05-01T23:27:22  <sdague> but I think the volume of log data we do, real people would not appreciate that in their apache error_log
2014-05-01T23:27:28  <morganfainberg> sdague, i expected to need to fix some logging stuff in these cases
2014-05-01T23:27:48  <foobio> jeblair: select * from patch_set_approvals where change_id=51114; shows granted as circa 2013 for all votes
2014-05-01T23:27:58  <morganfainberg> sdague, well it is an isolated error log specific to keystone (we run it in a vhost) so only keystone logs are in there
2014-05-01T23:27:58  <foobio> which is as it should be
2014-05-01T23:28:02  <morganfainberg> sdague, not the global errorlog
2014-05-01T23:28:15  <jeblair> Alex_Gaynor: unfortunately, logging that would answer that question is in a pending change, so i don't have it right now.
2014-05-01T23:28:17  <sdague> morganfainberg: ok, fair, still seems weird
2014-05-01T23:28:42  <morganfainberg> sdague, it's how many things run under apache works. i agree, this is something i think i can fix with logging.conf
2014-05-01T23:28:46  <Alex_Gaynor> jeblair: hmm, is there any way to jiggle the switch, or similar so it doesn't block the whole pipeline?
2014-05-01T23:28:59  <morganfainberg> sdague, and consistent logging amkes it easier to point people in the right direction
2014-05-01T23:29:14  <sdague> yeh, agreed.
2014-05-01T23:29:37  <morganfainberg> sdague, with apache 2.4 (when we move there) i might just make it use errorlogformat...but i'll cross that hurdle when we get to that point
2014-05-01T23:29:39  <jeblair> Alex_Gaynor: yeah, uploading a new patchset to it will kick it out, or we could restart zuul.
2014-05-01T23:29:42  <sdague> did the apache issue where logging too much data can stall the server ever get fixed?
2014-05-01T23:30:00  <sdague> I thought if you write > 4k in one go it goes missing
2014-05-01T23:30:07  <jeblair> mordred, foobio: running the update in prod now.
2014-05-01T23:30:10  <Alex_Gaynor> jeblair: it's not my patch unfortunately, it's just blocking mine :-)
2014-05-01T23:30:13  <morganfainberg> sdague, oh, huh, i remember that bug now.
2014-05-01T23:30:18  *** amcrn has quit IRC
2014-05-01T23:30:28  <jeblair> Rows matched: 1216479  Changed: 1143230  Warnings: 0
2014-05-01T23:30:31  <morganfainberg> sdague, i hope it was fixed... but tbh, haven't tried logging >4k in a long time
2014-05-01T23:30:43  <mordred> jeblair: woot
2014-05-01T23:30:44  <sdague> yeh, some of those stack traces.... might be interesting :)
2014-05-01T23:30:58  <morganfainberg> sdague, oh.. hmm. might need to funnel this through rsyslog.
2014-05-01T23:31:06  <morganfainberg> sdague, multiple processes trying to write to the same file = bad.
2014-05-01T23:31:12  <jeblair> bnemec: old gerrit approval timestamps have been restored
2014-05-01T23:31:28  *** mestery has quit IRC
2014-05-01T23:31:58  <morganfainberg> sdague, i'll work on some stuff to get this going and consistent one way or another, we can discuss further once i get a proposed fix in gerrit.
2014-05-01T23:32:03  <sdague> morganfainberg: so honestly, if we are going to use apache this way, then probably you just want to change the log format line for 2.2 and drop the date
2014-05-01T23:32:04  <jlk> clarkb: with j-j-b, have you dealt with creating some sort of singular job grouping, that you can use in a publisher trigger, so that you can trigger one thing, rather than 20?
2014-05-01T23:32:26  <sdague> I think making rsyslog a requirement for apache is differently od
2014-05-01T23:32:28  <morganfainberg> sdague, oh the keystone log format?
2014-05-01T23:32:38  <jeblair> Alex_Gaynor: i'm trying one more thing
2014-05-01T23:32:43  <sdague> yeh, then at least you wouldnt' be putting in double dates
2014-05-01T23:33:00  <sdague> in 2.4 you could fix the apache log
2014-05-01T23:33:19  <sdague> but not having subsec resolution is all you give up
2014-05-01T23:33:57  <sdague> anyway, got to run off and make some dinner
2014-05-01T23:33:58  <morganfainberg> sdague, well we have some time to tune this if we don't like how it comes out. i'll propose that type of fix then.  initially this will be only a nonvote, and if it needs more work we can fix it :)
2014-05-01T23:34:09  <morganfainberg> sdague, ++ sounds good will post that change to devstack tonight (keystone log change under apache)
2014-05-01T23:34:19  <Alex_Gaynor> jeblair: godspeed, and best of luck :-)
2014-05-01T23:34:25  *** crc32 has quit IRC
2014-05-01T23:34:38  <jeblair> Alex_Gaynor: nope that didn't work.  i'll restart zuul.
2014-05-01T23:34:53  <Alex_Gaynor> jeblair: funtimes, sorry :-(
2014-05-01T23:35:11  <jeblair> i'm mostly just sorry i don't get to put the logging changes in yet :(
2014-05-01T23:35:28  *** hogepodge has quit IRC
2014-05-01T23:35:36  <jlk> clarkb: and is there any way to manage jenkins views from j-j-b?
2014-05-01T23:35:59  *** andreykurilin_ has quit IRC
2014-05-01T23:36:33  *** luisg_ has quit IRC
2014-05-01T23:36:46  <Alex_Gaynor> jeblair: do we need to "recheck no bug" everything now?
2014-05-01T23:37:15  <jeblair> Alex_Gaynor: yep
2014-05-01T23:37:18  *** amcrn has joined #openstack-infra
2014-05-01T23:37:30  <Alex_Gaynor> jeblair: cheers. thanks so much
2014-05-01T23:37:44  <foobio> jlk: jjb doesn't configure jenkins views that i'm aware
2014-05-01T23:38:00  <jlk> that's what I'm seeing.
2014-05-01T23:38:14  <mordred> jeblair: I'm going to submit a change to upstream gerrit to fix the migration
2014-05-01T23:38:26  <jeblair> mordred: wow
2014-05-01T23:38:36  *** luisg_ has joined #openstack-infra
2014-05-01T23:38:45  <foobio> jlk: we never really made heavy use of views because, for the most part, it was easier to abstract that out to other interfaces
2014-05-01T23:39:11  <jlk> yeah, that's fair. We're using views now, but mostly because we just don't have anything better in front of us
2014-05-01T23:39:28  <mordred> jeblair: beacuse, you know, it's a data loss thing which is kinda bad
2014-05-01T23:39:49  <jlk> I think we're about 2 steps away from directly editing jenkins job builder yaml though, and going to something which can /generate/ jenkins job builder yaml. Not enough programmatic control to be truly DRY.
2014-05-01T23:40:09  <foobio> jlk: also, we have 1.5k devs interested in data and don't really want them all logging into the jenkins interface... and then there's the fact that we have 8 jenkins masters now, for scalability reasons
2014-05-01T23:40:22  <jlk> hah yes
2014-05-01T23:40:46  <foobio> so views on one master don't really mean much any more
2014-05-01T23:42:00  <foobio> jlk: i'll agree that jjb yaml isn't as dry as it could be. more templating and macro magic in jjb is probably worth investing in
2014-05-01T23:42:19  <jlk> that and using job names generated in one yaml as data in another yaml
2014-05-01T23:42:33  <jlk> e.g. I generate 8 jobs from one yaml, but I want a 9th job to trigger those 8 jobs
2014-05-01T23:42:48  <jlk> so right now I have to enumerate out all 8 jobs in the 9th' yaml
2014-05-01T23:42:49  *** bknudson has joined #openstack-infra
2014-05-01T23:43:01  <foobio> jlk: ahh, i think zuul was basically an answer to that (among other things)
2014-05-01T23:43:04  <anteaya> I am off to a motel, since I can get no sleep in my house, I will be online once i return tomorrow I have no estimated time for that
2014-05-01T23:43:07  <anteaya> night
2014-05-01T23:43:19  <foobio> anteaya: i hope you get some rest
2014-05-01T23:43:24  <anteaya> thanks
2014-05-01T23:43:26  <anteaya> I hope so too
2014-05-01T23:44:29  <foobio> jlk: zuul now has templates of its own, so adding a template to a project can basically cause multiple jobs to run in various pipelines for any change to a project now
2014-05-01T23:45:03  <jlk> hrm.
2014-05-01T23:45:08  <jlk> we're not yet into zuul
2014-05-01T23:45:08  *** bknudson1 has joined #openstack-infra
2014-05-01T23:45:24  <foobio> jlk: just something to keep in mind for if/when you get there
2014-05-01T23:45:30  <jlk> yeah, thanks
2014-05-01T23:46:53  <mordred> https://gerrit-review.googlesource.com/56750 in case anyone is interested
2014-05-01T23:47:53  *** bknudson has quit IRC
2014-05-01T23:48:34  <foobio> mordred: though really, internalizing timestamp management rather than relying on the underlying database to update timestamp fields when you change a row is where sanity can eventually be found
2014-05-01T23:49:07  <mordred> foobio: well, sure
2014-05-01T23:49:11  <mordred> but I'm not going to write that patch
2014-05-01T23:49:22  <foobio> i can understand why ;)
2014-05-01T23:49:56  *** oomichi has joined #openstack-infra
2014-05-01T23:53:51  *** oomichi has quit IRC
2014-05-01T23:55:23  *** ramashri has joined #openstack-infra
