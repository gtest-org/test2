2014-06-12T00:04:12  *** sweston has quit IRC
2014-06-12T00:05:11  *** lcostantino has quit IRC
2014-06-12T00:05:22  *** julim has quit IRC
2014-06-12T00:05:40  <openstackgerrit> A change was merged to openstack-dev/hacking: Fixed warning H302 when used with six.moves  https://review.openstack.org/99467
2014-06-12T00:05:54  *** mmaglana has quit IRC
2014-06-12T00:09:46  *** oomichi_sleeping is now known as oomichi
2014-06-12T00:11:02  *** dims__ has quit IRC
2014-06-12T00:11:15  *** dims has joined #openstack-infra
2014-06-12T00:12:09  *** hemna is now known as hemna_
2014-06-12T00:13:25  <openstackgerrit> Michael Krotscheck proposed a change to openstack-infra/storyboard-webclient: Error message & notification handling  https://review.openstack.org/99515
2014-06-12T00:16:44  <ianw> sdague: sorry, another go at https://review.openstack.org/#/c/99047/ ... i got reports dbus restart was killing gnome.  i tested and restarting just firewalld is sufficient on rackspace images
2014-06-12T00:17:21  <sdague> why in gods name are people running gnome on their devstack envs?
2014-06-12T00:18:04  <ianw> sdague: yeah... maybe you can forgive me for not noticing that failure case :)
2014-06-12T00:18:31  *** dkehn_ has joined #openstack-infra
2014-06-12T00:19:15  *** dkehn_ is now known as dkehnx
2014-06-12T00:20:04  <openstackgerrit> Michael Krotscheck proposed a change to openstack-infra/storyboard-webclient: Error message & notification handling  https://review.openstack.org/99515
2014-06-12T00:20:32  <mordred> sdague: because, you know ..
2014-06-12T00:20:39  <mordred> sdague: X11aaS
2014-06-12T00:20:48  <mordred> also known as ... X11
2014-06-12T00:21:19  *** dims has quit IRC
2014-06-12T00:25:38  *** _nadya_ has quit IRC
2014-06-12T00:27:02  *** zhiyan_ is now known as zhiyan
2014-06-12T00:27:17  *** homeless has quit IRC
2014-06-12T00:27:23  *** matsuhashi has joined #openstack-infra
2014-06-12T00:27:30  *** dims has joined #openstack-infra
2014-06-12T00:28:57  *** praneshp has quit IRC
2014-06-12T00:32:46  *** nosnos has joined #openstack-infra
2014-06-12T00:33:10  *** HenryG_ has joined #openstack-infra
2014-06-12T00:33:11  *** yamahata has joined #openstack-infra
2014-06-12T00:33:49  <SpamapS> sdague: didn't you mean "why in gods name are people running gnome" ?
2014-06-12T00:34:58  *** thuc has joined #openstack-infra
2014-06-12T00:36:35  *** thuc has quit IRC
2014-06-12T00:37:08  *** thuc has joined #openstack-infra
2014-06-12T00:37:16  *** jhesketh has quit IRC
2014-06-12T00:37:41  *** thuc has quit IRC
2014-06-12T00:38:01  *** thuc has joined #openstack-infra
2014-06-12T00:38:39  *** thuc has quit IRC
2014-06-12T00:39:20  *** thuc has joined #openstack-infra
2014-06-12T00:39:27  *** richm has left #openstack-infra
2014-06-12T00:40:28  *** thuc_ has joined #openstack-infra
2014-06-12T00:42:14  *** HenryG_ has quit IRC
2014-06-12T00:44:18  *** thuc has quit IRC
2014-06-12T00:45:15  *** asettle has quit IRC
2014-06-12T00:46:27  *** jhesketh has joined #openstack-infra
2014-06-12T00:48:29  *** ildikov_ has joined #openstack-infra
2014-06-12T00:49:46  <fungi> cde with motif should be enough for anybody
2014-06-12T00:51:38  *** ildikov has quit IRC
2014-06-12T00:52:35  *** mfer has joined #openstack-infra
2014-06-12T00:52:37  *** _nadya_ has joined #openstack-infra
2014-06-12T01:01:29  *** CaptTofu_ has quit IRC
2014-06-12T01:02:00  *** CaptTofu_ has joined #openstack-infra
2014-06-12T01:02:02  *** yaguang has joined #openstack-infra
2014-06-12T01:02:28  *** chianingwang has quit IRC
2014-06-12T01:03:59  <mordred> SpamapS: I'm running gnome:old-stable myself
2014-06-12T01:04:01  <mordred> aka mate
2014-06-12T01:04:09  <mordred> clock-applet FTW!
2014-06-12T01:04:13  *** chianingwang has joined #openstack-infra
2014-06-12T01:04:17  <jogo> sdague: re INFO logs too bad, because that would drop the data in ES way down.
2014-06-12T01:04:42  <jogo> sdague: re heat test, do you have a good scenario to test?
2014-06-12T01:05:32  <jogo> stevebaker fungi: can we prioritize https://review.openstack.org/#/c/99517/ in the gate
2014-06-12T01:05:41  <jogo> mordred: ^
2014-06-12T01:06:55  *** CaptTofu_ has quit IRC
2014-06-12T01:07:23  <jogo> Alex_Gaynor: want hacking 0.9.2 now? or think you can find another bug first?
2014-06-12T01:07:45  <Alex_Gaynor> jogo: heh, a release would be awesome, I could delete a few crufty noqa's
2014-06-12T01:08:09  <fungi> jogo: looks like it's got ~20 minutes until it passes check tests, but if it's contributing significantly to gate slowness i can promote it to the front once it finishes check jobs
2014-06-12T01:08:58  <jogo> fungi: its the top of the http://status.openstack.org/elastic-recheck/
2014-06-12T01:09:02  <jogo> that would be great
2014-06-12T01:12:23  <jogo> Alex_Gaynor: done, its working its way through release queue. When its done want the honors of sending out an email on the hacking 0.9 thread about the fix
2014-06-12T01:12:51  <Alex_Gaynor> jogo: not especially :-)
2014-06-12T01:14:01  <jogo> Alex_Gaynor: I'll send one out
2014-06-12T01:14:06  <Alex_Gaynor> jogo: thanks
2014-06-12T01:14:46  *** gokrokve has joined #openstack-infra
2014-06-12T01:17:12  <sdague> jogo: look at the existing tests that are failing which keep the heat job from voting, that would be a good start
2014-06-12T01:17:18  *** alkari has quit IRC
2014-06-12T01:17:50  <sdague> I think we need to be able to consistently create and delete a single stack before going the large ops route
2014-06-12T01:18:11  <sdague> jogo: if we didn't log API requests, how would you *ever* figure out what's going on :)
2014-06-12T01:18:44  <sdague> ianw: +2
2014-06-12T01:20:00  *** thuc_ has quit IRC
2014-06-12T01:20:19  <sdague> mordred: you do realize that the calendar-indicator in Ubuntu does exactly that timezone switch thing. Though you'd have to be running unity.
2014-06-12T01:20:31  * sdague ducsk
2014-06-12T01:20:36  <sdague> or ducks even
2014-06-12T01:20:36  *** thuc has joined #openstack-infra
2014-06-12T01:21:12  <morganfainberg> oh.. i just realized...
2014-06-12T01:21:46  <morganfainberg> exchange or whatever can do UTC meetings... can someone explain to me my gmail doesn't let you set a meeting for UTC timezone? :P
2014-06-12T01:22:29  <ianw> sdague: thanks!
2014-06-12T01:22:56  <tchaypo> morganfainberg: you really want me to launch into my rant about gmail's handling of timezones?
2014-06-12T01:23:20  <tchaypo> how about I just rant abotu the fact that it says "Sydney, Melbourne (GMT+10)"
2014-06-12T01:23:30  <morganfainberg> tchaypo,  lol
2014-06-12T01:23:41  <tchaypo> but Sydney and Melbourne are GMT+11 for half the year, so does that mean the appointment is in Sydney time or in GMT+10?
2014-06-12T01:24:46  <mordred> sdague: the calendar-indicator in Ubuntu does not do the same things
2014-06-12T01:24:54  *** thuc has quit IRC
2014-06-12T01:24:58  <tchaypo> FWIW they have a timezone that's "(GMT+00:00) GMT (no daylight saving)"
2014-06-12T01:25:18  <tchaypo> I *think* tat's the same thing as UTC, but it makes no sense, as GMT doesn't ever have daylight saving
2014-06-12T01:25:25  <SpamapS> mordred: you're still clinging to your clock applet? lulz
2014-06-12T01:25:29  <morganfainberg> tchaypo, they do? huh, i thought the GMT one they had did DST
2014-06-12T01:25:45  <morganfainberg> tchaypo, oh the iceland one thats right, GMT no DST, but thats a hack
2014-06-12T01:25:58  <tchaypo> There's a "GMT+0 London", which will presumably have DST
2014-06-12T01:25:59  *** sarob has quit IRC
2014-06-12T01:26:05  <morganfainberg> right
2014-06-12T01:26:10  <mordred> SpamapS: clinging to - hell, I just got it BACK after being without it for 2 years because UI got taken over by people who clearly do not actually use linux
2014-06-12T01:26:30  <morganfainberg> i don't want DST, IRC meetings for OS
2014-06-12T01:26:32  *** sarob has joined #openstack-infra
2014-06-12T01:26:40  <tchaypo> In my list I've got Reykjavik, St Helena, GMT (No daylight saving), Dublin, Lisbon
2014-06-12T01:26:41  *** esker has joined #openstack-infra
2014-06-12T01:26:56  <SpamapS> mordred: I've grown accustomed to the unity clock applet.. which is lacking only the map. :-P
2014-06-12T01:27:25  <mordred> and the weather/temperature. and the timezone indicators. and the easy timezone switching between favorites
2014-06-12T01:28:22  *** gyee has quit IRC
2014-06-12T01:29:48  <mordred> SpamapS: http://imgur.com/5vgSM3P
2014-06-12T01:30:14  *** gokrokve has quit IRC
2014-06-12T01:30:33  *** nati_ueno has quit IRC
2014-06-12T01:30:35  <mordred> SpamapS: there is a lovely and useful pile of information in that display. now, is it all necessarily related to _time_? No. but sometimes purity of interface needs to DIAF in favor of shit that works well
2014-06-12T01:30:35  *** sarob_ has joined #openstack-infra
2014-06-12T01:30:40  *** gokrokve has joined #openstack-infra
2014-06-12T01:30:43  *** sarob has quit IRC
2014-06-12T01:30:43  *** zehicle_in_sfo has quit IRC
2014-06-12T01:31:02  <morganfainberg> mordred, lol
2014-06-12T01:31:40  <mordred> in unity/gnome3 I can also add a weather applet, but then if I change locations, I need to change locations in two places to get it to show me things in the menu bar, which is silly
2014-06-12T01:32:03  <mordred> also, none of those things give me the quick graphical indicator of "are people asleep in that location" - which is helpful
2014-06-12T01:32:15  <mordred> (I can go on about this for a while if anyone wants more)
2014-06-12T01:33:48  <sdague> :)
2014-06-12T01:34:03  * mordred needs to figure out how to keep the Mate guys funded...
2014-06-12T01:34:35  <sdague> damn, now you are nearly inspiring me to write it, mostly for the map visualization
2014-06-12T01:34:37  <openstackgerrit> Joshua Hesketh proposed a change to openstack-infra/config: Fetch graphitejs zuul dependency  https://review.openstack.org/98018
2014-06-12T01:34:38  <openstackgerrit> Joshua Hesketh proposed a change to openstack-infra/config: Use the latest jquery on zuul  https://review.openstack.org/98029
2014-06-12T01:35:05  *** gokrokve has quit IRC
2014-06-12T01:35:12  <sdague> night all
2014-06-12T01:36:01  *** yjiang has joined #openstack-infra
2014-06-12T01:36:28  <mordred> night sdague
2014-06-12T01:36:41  <openstackgerrit> Alex Gaynor proposed a change to openstack-dev/hacking: Mark hacking as being a universal wheel  https://review.openstack.org/99528
2014-06-12T01:38:36  *** trinaths has joined #openstack-infra
2014-06-12T01:38:36  <dims> jogo, Didn't you mean "0.9.2 has just been released"?
2014-06-12T01:39:04  <jogo> dims: I reused the old thread, but yes
2014-06-12T01:39:18  <dims> ack. thx
2014-06-12T01:39:28  *** zns has quit IRC
2014-06-12T01:42:24  <fungi> reset second from the front of the gate, so i'll promote 99517,3 to the front as soon as it reports
2014-06-12T01:42:24  *** rwsu has quit IRC
2014-06-12T01:44:16  *** chianingwang_ has joined #openstack-infra
2014-06-12T01:44:40  *** Ryan_Lane1 has quit IRC
2014-06-12T01:47:28  <jogo> fungi: thanks
2014-06-12T01:50:37  *** _nadya_ has quit IRC
2014-06-12T01:51:46  *** trinaths has quit IRC
2014-06-12T01:52:21  <openstackgerrit> A change was merged to openstack-infra/jenkins-job-builder: re-arrange docs for clarity  https://review.openstack.org/98467
2014-06-12T01:53:03  *** alexandra_ has joined #openstack-infra
2014-06-12T01:53:30  *** alexandra_ is now known as asettle
2014-06-12T01:53:42  <tchaypo> so I'm trying to write an email to the tripleo-team asking people to spend more time reviewing as our backlog is getting bigger
2014-06-12T01:54:11  <tchaypo> someone suggested yesterdat that other emails with tips like "if it just needs a rebase, please rebase it" to openstack-dev, but I can't find it
2014-06-12T01:54:21  <tchaypo> does anyone here have any memory of such an email?
2014-06-12T01:55:00  <morganfainberg> tchaypo, well i can tell you keystone has success with that type of stuff
2014-06-12T01:55:01  *** thomasbiege1 has joined #openstack-infra
2014-06-12T01:55:13  <morganfainberg> tchaypo, often someone will help with rebases, if there is a minor nit (otherwise good) upload a fix.. mostly "help get things through"
2014-06-12T01:55:32  <mordred> yah. aroudn here we'll also single-approve trivial things too
2014-06-12T01:55:42  <mordred> you know - spelling error in a README? single approve
2014-06-12T01:55:59  <mordred> change in zuul's internal algorithms? double approve and probably lots of prayer
2014-06-12T01:56:00  <morganfainberg> mordred, oh that is a good idea.
2014-06-12T01:56:58  <mordred> it's a thing to be careful with - and if there is even the slightest shred of doubt, I default back to double
2014-06-12T01:57:13  <morganfainberg> mordred, yeah.
2014-06-12T01:57:59  <morganfainberg> mordred, true - i have a hard enough time to convince people to single approve translation imports - because we've had 2 approver ground in to much
2014-06-12T01:58:07  *** thomasbiege has quit IRC
2014-06-12T01:58:13  <morganfainberg> i'd rather have that issue than the inverse though.
2014-06-12T01:58:44  <mordred> yup
2014-06-12T02:02:37  *** sarob_ has quit IRC
2014-06-12T02:03:06  *** sarob has joined #openstack-infra
2014-06-12T02:03:57  *** sweston has joined #openstack-infra
2014-06-12T02:07:31  *** sarob has quit IRC
2014-06-12T02:10:01  *** masayukig has quit IRC
2014-06-12T02:12:55  *** masayukig has joined #openstack-infra
2014-06-12T02:17:25  *** _nadya_ has joined #openstack-infra
2014-06-12T02:18:38  *** chianingwang_ has quit IRC
2014-06-12T02:19:34  *** cp16net has joined #openstack-infra
2014-06-12T02:21:40  *** otter768 has joined #openstack-infra
2014-06-12T02:23:15  *** CaptTofu_ has joined #openstack-infra
2014-06-12T02:24:53  *** penguinRaider has joined #openstack-infra
2014-06-12T02:25:07  *** sarob has joined #openstack-infra
2014-06-12T02:28:06  *** CaptTofu_ has quit IRC
2014-06-12T02:28:47  *** mmaglana has joined #openstack-infra
2014-06-12T02:29:02  *** arnaud__ has quit IRC
2014-06-12T02:31:12  *** thuc has joined #openstack-infra
2014-06-12T02:31:28  *** markmcclain has quit IRC
2014-06-12T02:34:29  *** penguinRaider has quit IRC
2014-06-12T02:34:52  *** alkari has joined #openstack-infra
2014-06-12T02:35:01  *** mrodden1 has joined #openstack-infra
2014-06-12T02:35:18  *** mrodden has quit IRC
2014-06-12T02:36:13  *** thuc has quit IRC
2014-06-12T02:38:32  *** CaptTofu_ has joined #openstack-infra
2014-06-12T02:40:07  *** mfer has quit IRC
2014-06-12T02:40:19  *** dims has quit IRC
2014-06-12T02:51:30  *** fanhe has joined #openstack-infra
2014-06-12T02:57:57  *** sarob has quit IRC
2014-06-12T03:01:56  *** chianingwang_ has joined #openstack-infra
2014-06-12T03:02:35  *** sarob has joined #openstack-infra
2014-06-12T03:03:10  <openstackgerrit> Joshua Harlow proposed a change to openstack/requirements: Bump up to the six 1.7.x series  https://review.openstack.org/99556
2014-06-12T03:05:33  *** gokrokve has joined #openstack-infra
2014-06-12T03:07:14  *** dims_ has joined #openstack-infra
2014-06-12T03:10:43  *** otter768 has quit IRC
2014-06-12T03:12:05  *** dims_ has quit IRC
2014-06-12T03:18:07  *** praneshp has joined #openstack-infra
2014-06-12T03:21:25  *** Longgeek has joined #openstack-infra
2014-06-12T03:21:27  *** chianingwang_ has quit IRC
2014-06-12T03:26:05  *** sarob has quit IRC
2014-06-12T03:26:33  *** sarob has joined #openstack-infra
2014-06-12T03:26:34  *** CaptTofu_ has quit IRC
2014-06-12T03:27:09  *** CaptTofu_ has joined #openstack-infra
2014-06-12T03:27:09  *** chianingwang has quit IRC
2014-06-12T03:30:06  *** zhiyan is now known as zhiyan_
2014-06-12T03:30:19  <lifeless> clarkb: ping me if/when you want more dib kibbitzing
2014-06-12T03:30:31  <lifeless> clarkb: I'm keen to get you a good answer to the problem
2014-06-12T03:30:58  *** sarob has quit IRC
2014-06-12T03:31:27  *** CaptTofu_ has quit IRC
2014-06-12T03:36:02  *** talluri has joined #openstack-infra
2014-06-12T03:36:53  *** arnaud__ has joined #openstack-infra
2014-06-12T03:39:29  *** praneshp_ has joined #openstack-infra
2014-06-12T03:40:38  *** pcrews has quit IRC
2014-06-12T03:41:20  *** zhiyan_ is now known as zhiyan
2014-06-12T03:41:31  *** praneshp has quit IRC
2014-06-12T03:41:31  *** praneshp_ is now known as praneshp
2014-06-12T03:44:50  *** nosnos has quit IRC
2014-06-12T03:45:04  *** thuc has joined #openstack-infra
2014-06-12T03:49:07  *** thuc has quit IRC
2014-06-12T03:50:31  *** thuc has joined #openstack-infra
2014-06-12T03:51:00  *** zns has joined #openstack-infra
2014-06-12T03:51:12  *** thuc_ has joined #openstack-infra
2014-06-12T03:52:32  <lifeless> hmm, gertty also needs to linewrap the text lines not just comments :(
2014-06-12T03:54:41  <lifeless> clarkb: nuts, the expand-next-N lines stuff doesn't show up in the commit messages atm; not sure why :(
2014-06-12T03:55:03  <lifeless> clarkb: or... its a bug with end-of-file diffs in gertty. Actually that seems more likely.
2014-06-12T03:55:23  *** thuc has quit IRC
2014-06-12T03:58:30  *** amcrn has joined #openstack-infra
2014-06-12T03:59:27  *** zns has quit IRC
2014-06-12T04:00:03  *** zns has joined #openstack-infra
2014-06-12T04:08:11  *** yfried has quit IRC
2014-06-12T04:11:49  *** matsuhashi has quit IRC
2014-06-12T04:12:30  *** arnaud__ has quit IRC
2014-06-12T04:16:01  <openstackgerrit> lifeless proposed a change to stackforge/gertty: Don't crash on comments on unchanged files  https://review.openstack.org/99563
2014-06-12T04:16:54  *** harlowja is now known as harlowja_away
2014-06-12T04:19:11  *** rohitk has joined #openstack-infra
2014-06-12T04:20:39  *** thuc_ has quit IRC
2014-06-12T04:21:13  *** thuc has joined #openstack-infra
2014-06-12T04:21:31  *** arnaud__ has joined #openstack-infra
2014-06-12T04:25:12  *** rohitk has quit IRC
2014-06-12T04:26:05  *** thuc has quit IRC
2014-06-12T04:27:05  *** sarob has joined #openstack-infra
2014-06-12T04:28:44  <jogo> so I am submitting a talk on hacking and looking for a good title
2014-06-12T04:29:01  <jogo> was thinking 'Bikeshedding OpenStack, or why Style Guides Matter'
2014-06-12T04:30:05  <kashyap> Maybe just leave the "Bikeshedding" aspect and just stick to the why :-)
2014-06-12T04:30:19  <jogo> kashyap: that is the why
2014-06-12T04:30:55  <jogo> well part of it
2014-06-12T04:31:07  *** sarob has quit IRC
2014-06-12T04:31:33  *** CaptTofu_ has joined #openstack-infra
2014-06-12T04:31:36  <jogo> lifeless: I know you always have opinions ^
2014-06-12T04:31:47  <lifeless> OPINIONS
2014-06-12T04:32:13  <lifeless> jogo: Making a project 500 bugs in one small release?
2014-06-12T04:32:37  <lifeless> jogo: as a subtitle
2014-06-12T04:32:51  <lifeless> so actually
2014-06-12T04:33:00  <jogo> haha
2014-06-12T04:33:05  <lifeless> my opinion here is that style guides are inferior to automation
2014-06-12T04:33:09  <lifeless> pep8 is automating whinging
2014-06-12T04:33:36  <mikal> jogo: you never came back to chat to me
2014-06-12T04:33:39  <mikal> jogo: so lame
2014-06-12T04:33:39  <jogo> so I don't disagree with that statement, but step one is have a style guide step 2 is automate fixing it
2014-06-12T04:33:43  <lifeless> it does some, but fairly little, towards improving product quality and velocity. [I know different folk have different opinions here].
2014-06-12T04:33:49  * jogo hides from mikal
2014-06-12T04:34:16  <lifeless> jogo: I think step one is to have an automated but nearly empty style guide, and step 2 is to increase it.
2014-06-12T04:34:23  <Alex_Gaynor> lifeless: go fmt is a million times better than flake8 (apologies to all)
2014-06-12T04:34:24  <lifeless> jogo: what we have is an ever increasing step 1 and no step 2.
2014-06-12T04:34:32  <lifeless> Alex_Gaynor: exactly my point.
2014-06-12T04:34:47  <lifeless> Alex_Gaynor: I experimented with one of the pep8 autoformatters on LP
2014-06-12T04:34:56  <lifeless> Alex_Gaynor: I think it was a couple weeks work away from being usable.
2014-06-12T04:35:09  <jogo> Alex_Gaynor: yeah go fmt is awesome
2014-06-12T04:35:15  <lifeless> jogo: the more hacking adds the *higher* the effort to get to 'go fmt'.
2014-06-12T04:35:15  <Alex_Gaynor> lifeless: the problem is there are still lots of python people who believe "A foolish consistency is the hobgoblin of little minds", the automation doesn't work if not /every/ file participates
2014-06-12T04:35:30  <tchaypo> thanks mordred, morganfainberg
2014-06-12T04:35:37  <StevenK> lifeless: I actually miss utilities/format-new-and-modified-imports from LP
2014-06-12T04:35:43  *** SumitNaiksatam has quit IRC
2014-06-12T04:35:46  <jogo> Alex_Gaynor: good point
2014-06-12T04:35:49  <lifeless> Alex_Gaynor: right. I can't buy into 'make me work harder on trivia'. I can totally buy into 'I am not allowed to care about $aesthetic because the daemon will rewrite it for me'
2014-06-12T04:35:55  *** CaptTofu_ has quit IRC
2014-06-12T04:36:19  <jogo> lifeless: you ever use autopep8?
2014-06-12T04:36:27  <lifeless> let me dig up my post on this
2014-06-12T04:36:37  *** SumitNaiksatam has joined #openstack-infra
2014-06-12T04:36:51  *** zns has quit IRC
2014-06-12T04:39:04  *** sarob has joined #openstack-infra
2014-06-12T04:39:04  <jogo> Alex_Gaynor: you make a good point about the a foolish consistency
2014-06-12T04:39:23  <Alex_Gaynor> jogo: I believe the opposite to be clear, I think a lot of people are hung up on that
2014-06-12T04:39:31  <jogo> Alex_Gaynor: I guess a big part of hacking is we are going for a foolish consistency
2014-06-12T04:39:40  *** zns has joined #openstack-infra
2014-06-12T04:39:46  <Alex_Gaynor> +1 :-)
2014-06-12T04:40:39  <jogo> so maybe the title can be: "Style Guides: Why Foolish Consistency Matters"
2014-06-12T04:41:14  <fungi> jogo: robotic hobgoblins
2014-06-12T04:42:36  <jogo> fungi: how would you work that into the title? maybe I can use that in the abstract
2014-06-12T04:43:28  <fungi> no idea. the image was merely compelling
2014-06-12T04:43:40  *** yfried has joined #openstack-infra
2014-06-12T04:43:49  *** sarob has quit IRC
2014-06-12T04:44:00  <lifeless> jogo: https://lists.launchpad.net/launchpad-dev/msg07330.html
2014-06-12T04:44:23  <lifeless> jogo: https://lists.launchpad.net/launchpad-dev/msg07338.html
2014-06-12T04:45:45  <lifeless> now I was sure I did an experiment
2014-06-12T04:48:04  *** matsuhashi has joined #openstack-infra
2014-06-12T04:48:07  <lifeless> https://lists.launchpad.net/launchpad-dev/msg07340.html ...
2014-06-12T04:48:12  * StevenK stabs paste.o.o for giving ISEs
2014-06-12T04:48:14  <lifeless> jogo: https://lists.launchpad.net/launchpad-dev/msg07681.html - seems to be it
2014-06-12T04:48:49  <lifeless> jogo: so tl;dr - PythonTidy was decent and hackable
2014-06-12T04:48:54  *** nosnos has joined #openstack-infra
2014-06-12T04:49:02  <lifeless> jogo: I'd would deeply deeply deeply love to see *that* hacked on and hacking frozen
2014-06-12T04:49:14  <lifeless> jogo: because PythonTidy makes everyones life better, not more painful.
2014-06-12T04:50:00  *** trinaths has joined #openstack-infra
2014-06-12T04:50:53  <jogo> pythondity is very old but good to know
2014-06-12T04:50:59  *** markmcclain has joined #openstack-infra
2014-06-12T04:51:14  <jogo> lifeless: FWIW I generally am against any additions to hacking.rst at this point
2014-06-12T04:51:59  <openstackgerrit> A change was merged to openstack/requirements: Updated taskflow now that 0.3.x is released  https://review.openstack.org/99188
2014-06-12T04:53:12  *** gokrokve has quit IRC
2014-06-12T04:53:18  <lifeless> jogo: hacking the project I meant, not the rst file :)
2014-06-12T04:54:03  <jogo> lifeless: well the rst file is in the project but I know what you mean
2014-06-12T04:54:07  *** esker has quit IRC
2014-06-12T04:55:20  *** michchap_ has quit IRC
2014-06-12T04:55:30  *** michchap has joined #openstack-infra
2014-06-12T04:56:52  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/config: Don't notify nova's IRC room on patch creation  https://review.openstack.org/99566
2014-06-12T04:57:06  *** lcheng has joined #openstack-infra
2014-06-12T04:58:37  *** mmaglana has quit IRC
2014-06-12T04:59:11  *** mmaglana has joined #openstack-infra
2014-06-12T05:01:06  *** yfried_ has joined #openstack-infra
2014-06-12T05:02:05  *** yfried has quit IRC
2014-06-12T05:02:23  <tchaypo> Do we have an openstack link shortener?
2014-06-12T05:02:34  <tchaypo> using bit.ly makes me feel dirty
2014-06-12T05:03:47  *** mmaglana has quit IRC
2014-06-12T05:03:59  <lifeless> jogo: so anyhow, I hope my opinions were useful
2014-06-12T05:04:10  <lifeless> jogo: I realise I sidetracked you -sorry
2014-06-12T05:06:14  <jogo> lifeless: they were useful a little side tracked but useful
2014-06-12T05:07:07  <lifeless> jogo: cool
2014-06-12T05:11:37  *** lcheng has quit IRC
2014-06-12T05:16:14  *** zns has quit IRC
2014-06-12T05:16:51  *** zns has joined #openstack-infra
2014-06-12T05:20:50  <trinaths> fungi: hello
2014-06-12T05:21:48  *** Longgeek_ has joined #openstack-infra
2014-06-12T05:23:40  *** salv-orlando has joined #openstack-infra
2014-06-12T05:24:38  *** Longgeek has quit IRC
2014-06-12T05:27:42  *** markwash has quit IRC
2014-06-12T05:31:47  *** thuc has joined #openstack-infra
2014-06-12T05:31:53  *** markwash has joined #openstack-infra
2014-06-12T05:33:10  *** salv-orlando has quit IRC
2014-06-12T05:36:19  *** thuc has quit IRC
2014-06-12T05:39:30  *** sarob has joined #openstack-infra
2014-06-12T05:41:24  *** zehicle_at_dell has joined #openstack-infra
2014-06-12T05:42:54  *** rdopieralski has joined #openstack-infra
2014-06-12T05:43:55  *** sarob has quit IRC
2014-06-12T05:49:01  *** mmaglana has joined #openstack-infra
2014-06-12T05:51:17  *** _nadya_ has quit IRC
2014-06-12T05:58:00  *** enikanorov has joined #openstack-infra
2014-06-12T05:58:03  <lifeless> devananda: could you abandon 97646 ? alembic is in requirements.txt
2014-06-12T05:58:53  *** oomichi has quit IRC
2014-06-12T06:03:15  *** yfried_ is now known as yfried
2014-06-12T06:08:12  *** basha has joined #openstack-infra
2014-06-12T06:12:23  *** melwitt has quit IRC
2014-06-12T06:14:37  *** thomasbiege1 has left #openstack-infra
2014-06-12T06:15:53  *** markmcclain has quit IRC
2014-06-12T06:16:43  *** praneshp has quit IRC
2014-06-12T06:17:45  *** _nadya_ has joined #openstack-infra
2014-06-12T06:18:29  *** markmcclain has joined #openstack-infra
2014-06-12T06:19:24  *** markwash has quit IRC
2014-06-12T06:19:48  *** CaptTofu_ has joined #openstack-infra
2014-06-12T06:20:05  *** ildikov_ has quit IRC
2014-06-12T06:21:29  <basha> anybody there?
2014-06-12T06:22:00  *** denis_makogon has joined #openstack-infra
2014-06-12T06:22:02  <nibalizer> basha: best to just ask your question
2014-06-12T06:22:14  *** arnaud__ has quit IRC
2014-06-12T06:22:17  <nibalizer> if someone knows the answer they will help you
2014-06-12T06:22:25  <basha> nibalizer: ive a patch which has been failing jenkins since yesterday.
2014-06-12T06:22:39  <basha> for pretty random reasons.
2014-06-12T06:22:55  <nibalizer> link?
2014-06-12T06:23:16  <basha> nibalizer: https://review.openstack.org/#/c/78269/
2014-06-12T06:23:41  <basha> just wanted to know if its just the gate acting up and whether its worth retriggering it now?
2014-06-12T06:24:35  *** CaptTofu_ has quit IRC
2014-06-12T06:25:28  <clarkb> basha: we started voting on python33 with glanceclient recently
2014-06-12T06:25:35  <clarkb> that change doesn't appear to be python33 clean
2014-06-12T06:25:36  <nibalizer> thats beyond my ability to debug
2014-06-12T06:26:08  <nibalizer> well if you look its failing to find subunit_log.txt, where does that file get created in the pipeline?
2014-06-12T06:26:22  <basha> clarkb: the python33 log says its unable to find subunit_log
2014-06-12T06:26:26  <nibalizer> doesn't really look to me like the code doesn't work under python33
2014-06-12T06:26:36  <basha> nibalizer: yes
2014-06-12T06:26:42  <clarkb> basha: nibalizer http://logs.openstack.org/69/78269/6/check/gate-python-glanceclient-python33/ded5f8d/console.html#_2014-06-11_14_17_08_220 the error is there
2014-06-12T06:26:46  <clarkb> no subunit log because that failed
2014-06-12T06:26:48  <basha> its doesnt seem to be my change
2014-06-12T06:28:22  <basha> thats pretty random too :(
2014-06-12T06:28:37  <clarkb> its not random...
2014-06-12T06:28:46  <clarkb> we made the change recently to start gating on python 3
2014-06-12T06:29:37  <basha> clarkb: so it runs the nosetests on python 3 as well, is that ryt?
2014-06-12T06:29:40  <clarkb> and the import errors are in files modified by that change
2014-06-12T06:29:52  <clarkb> basha: it runs testr under python3 yes
2014-06-12T06:30:23  <clarkb> basha: if you look in that block I linked there is a fairly hard to read section that says `Ad\x17text/plain;charset=utf8\rimport
2014-06-12T06:30:33  <basha> clarkb: but I dont see any import
2014-06-12T06:30:39  <clarkb> errorsA3tests.test_exc\ntests.test_http\ntests.test_progressbar\ntests.te and so on
2014-06-12T06:31:03  <clarkb> tests.test_exc, tests.test_http, tets.test_progressbar and so forth failed to import under python33
2014-06-12T06:31:48  <basha> clarkb: but the thing is I was able to get jenkins green the prev patch set. And the only diff is an extra log line
2014-06-12T06:31:57  <basha> Which obviously doesnt do a new import
2014-06-12T06:32:42  <clarkb> the test is new
2014-06-12T06:32:47  <clarkb> well newly voting
2014-06-12T06:33:44  <clarkb> patchset 1 failed with the same issues http://logs.openstack.org/69/78269/1/check/gate-python-glanceclient-python33/1e198c1/console.html.gz#_2014-03-05_15_55_10_475
2014-06-12T06:33:46  <basha> clarkb: oh you mean python3 started voting just recently?
2014-06-12T06:33:48  <clarkb> but it wasn't voting at the time
2014-06-12T06:33:50  <clarkb> basha: yes
2014-06-12T06:34:07  <basha> ok gotcha. hmmm
2014-06-12T06:34:19  <clarkb> glance was able to get it to work on master so we went ahead and made it voting to prevent new regressions
2014-06-12T06:34:44  <basha> let me try running tests on python3 on my box then
2014-06-12T06:34:45  *** lcheng has joined #openstack-infra
2014-06-12T06:39:00  *** ildikov has joined #openstack-infra
2014-06-12T06:39:29  *** sarob has joined #openstack-infra
2014-06-12T06:40:56  *** fanhe has quit IRC
2014-06-12T06:41:18  *** sarob_ has joined #openstack-infra
2014-06-12T06:42:29  *** alkari1 has joined #openstack-infra
2014-06-12T06:43:29  *** alkari has quit IRC
2014-06-12T06:43:55  *** sarob has quit IRC
2014-06-12T06:45:55  *** sarob_ has quit IRC
2014-06-12T06:51:53  *** achuprin_ has quit IRC
2014-06-12T06:51:56  *** _nadya_ has quit IRC
2014-06-12T06:52:26  *** _nadya_ has joined #openstack-infra
2014-06-12T06:53:11  *** zehicle_at_dell has quit IRC
2014-06-12T06:53:36  *** sarob has joined #openstack-infra
2014-06-12T06:53:44  *** cody-somerville has quit IRC
2014-06-12T06:53:56  *** zehicle_at_dell has joined #openstack-infra
2014-06-12T06:54:12  *** jlibosva has joined #openstack-infra
2014-06-12T06:57:55  *** sarob has quit IRC
2014-06-12T06:58:43  *** srenatus has quit IRC
2014-06-12T06:59:25  *** doude has joined #openstack-infra
2014-06-12T06:59:31  *** srenatus has joined #openstack-infra
2014-06-12T07:01:27  *** alkari1 has quit IRC
2014-06-12T07:02:46  *** zns_ has joined #openstack-infra
2014-06-12T07:03:31  *** zns has quit IRC
2014-06-12T07:04:20  *** oomichi has joined #openstack-infra
2014-06-12T07:04:40  *** alkari has joined #openstack-infra
2014-06-12T07:05:38  *** cody-somerville has joined #openstack-infra
2014-06-12T07:05:38  *** _nadya_ has quit IRC
2014-06-12T07:07:24  *** ildikov has quit IRC
2014-06-12T07:07:31  *** achuprin_ has joined #openstack-infra
2014-06-12T07:09:11  *** Clabbe has quit IRC
2014-06-12T07:11:43  *** markmcclain has quit IRC
2014-06-12T07:12:37  *** pblaho has joined #openstack-infra
2014-06-12T07:12:39  *** yfried has quit IRC
2014-06-12T07:12:52  *** yfried has joined #openstack-infra
2014-06-12T07:13:40  *** jcoufal has joined #openstack-infra
2014-06-12T07:15:30  *** achuprin_ has quit IRC
2014-06-12T07:18:17  *** yfried_ has joined #openstack-infra
2014-06-12T07:19:20  *** yfried has quit IRC
2014-06-12T07:19:27  *** yfried_ is now known as yfried
2014-06-12T07:19:35  *** trinaths has quit IRC
2014-06-12T07:22:23  *** flaper87|afk is now known as flaper87
2014-06-12T07:24:04  *** ildikov has joined #openstack-infra
2014-06-12T07:24:12  *** e0ne has joined #openstack-infra
2014-06-12T07:25:58  *** zehicle_at_dell has quit IRC
2014-06-12T07:26:53  *** tkelsey has joined #openstack-infra
2014-06-12T07:27:08  *** zehicle_at_dell has joined #openstack-infra
2014-06-12T07:27:54  *** achuprin_ has joined #openstack-infra
2014-06-12T07:29:33  *** sarob has joined #openstack-infra
2014-06-12T07:29:54  *** zns_ has quit IRC
2014-06-12T07:32:13  *** talluri has quit IRC
2014-06-12T07:32:42  *** talluri has joined #openstack-infra
2014-06-12T07:33:10  <mattoliverau> I'm calling it a day, night all.
2014-06-12T07:33:44  *** jcoufal has quit IRC
2014-06-12T07:34:19  *** sarob has quit IRC
2014-06-12T07:36:19  *** zehicle_at_dell has quit IRC
2014-06-12T07:36:33  *** mugsie has quit IRC
2014-06-12T07:36:43  *** cody-somerville has quit IRC
2014-06-12T07:36:54  *** talluri has quit IRC
2014-06-12T07:38:29  *** _nadya_ has joined #openstack-infra
2014-06-12T07:39:40  *** sarob has joined #openstack-infra
2014-06-12T07:40:42  *** mrda is now known as mrda-away
2014-06-12T07:43:47  *** jcoufal has joined #openstack-infra
2014-06-12T07:44:18  *** sarob has quit IRC
2014-06-12T07:44:31  *** e0ne has quit IRC
2014-06-12T07:45:06  *** e0ne has joined #openstack-infra
2014-06-12T07:48:26  *** mmaglana has quit IRC
2014-06-12T07:49:31  *** e0ne has quit IRC
2014-06-12T07:49:47  *** hashar has joined #openstack-infra
2014-06-12T07:50:21  *** StevenK has quit IRC
2014-06-12T07:50:33  *** cody-somerville has joined #openstack-infra
2014-06-12T07:50:45  <openstackgerrit> lifeless proposed a change to stackforge/gertty: Don't crash on comments on unchanged files  https://review.openstack.org/99563
2014-06-12T07:50:46  <openstackgerrit> lifeless proposed a change to stackforge/gertty: Hide fully reviewed projects by default  https://review.openstack.org/99591
2014-06-12T07:50:55  <lifeless> clarkb: ^ I think you'll like this shiny
2014-06-12T07:51:09  *** dizquierdo has joined #openstack-infra
2014-06-12T07:51:27  *** jcoufal has quit IRC
2014-06-12T07:51:52  *** StevenK has joined #openstack-infra
2014-06-12T07:55:12  *** achuprin_ has quit IRC
2014-06-12T07:55:34  *** ihrachyshka has joined #openstack-infra
2014-06-12T07:58:19  *** rcarrill` has joined #openstack-infra
2014-06-12T07:58:31  *** freyes has joined #openstack-infra
2014-06-12T08:00:17  *** rcarrillocruz has quit IRC
2014-06-12T08:00:29  *** jcoufal has joined #openstack-infra
2014-06-12T08:02:18  *** ihrachyshka has quit IRC
2014-06-12T08:02:30  *** jistr has joined #openstack-infra
2014-06-12T08:02:36  *** ihrachyshka has joined #openstack-infra
2014-06-12T08:03:29  *** _nadya_ has quit IRC
2014-06-12T08:05:07  *** oomichi has quit IRC
2014-06-12T08:06:17  *** andreykurilin_ has joined #openstack-infra
2014-06-12T08:10:51  *** achuprin_ has joined #openstack-infra
2014-06-12T08:11:26  *** derekh_ has joined #openstack-infra
2014-06-12T08:12:24  *** enikanorov__ has quit IRC
2014-06-12T08:14:02  *** fbo_away is now known as fbo
2014-06-12T08:14:53  *** jcoufal has quit IRC
2014-06-12T08:15:37  *** plars has quit IRC
2014-06-12T08:16:09  *** plomakin_ has quit IRC
2014-06-12T08:16:53  *** Hal_ has joined #openstack-infra
2014-06-12T08:16:53  *** skraynev has quit IRC
2014-06-12T08:17:08  *** tnurlygayanov has quit IRC
2014-06-12T08:17:21  *** ilyashakhat has quit IRC
2014-06-12T08:19:31  *** markmc has joined #openstack-infra
2014-06-12T08:19:33  *** locke105 has quit IRC
2014-06-12T08:24:33  *** srenatus has quit IRC
2014-06-12T08:25:01  *** srenatus has joined #openstack-infra
2014-06-12T08:26:07  *** pelix has joined #openstack-infra
2014-06-12T08:28:53  *** andreykurilin_ has quit IRC
2014-06-12T08:33:11  *** talluri has joined #openstack-infra
2014-06-12T08:34:55  *** andreykurilin_ has joined #openstack-infra
2014-06-12T08:35:31  <lifeless> SergeyLukjanov: hey
2014-06-12T08:35:39  <lifeless> SergeyLukjanov: have a look on review 92749
2014-06-12T08:35:40  *** talluri has quit IRC
2014-06-12T08:35:48  <lifeless> (or jhesketh) ^
2014-06-12T08:36:13  <lifeless> Brocade OSS CI is commenting with links to status.o.o/zuul - I think they're spinning up a new 3rd-party system, badly.
2014-06-12T08:36:20  <lifeless> might want to pull their access
2014-06-12T08:36:25  <lifeless> before they mess everyone up :)
2014-06-12T08:38:38  <jhesketh> lifeless: might be worth reaching out to them and letting them know before pulling access out from under their feet
2014-06-12T08:39:25  *** cody-somerville has quit IRC
2014-06-12T08:39:30  *** sarob has joined #openstack-infra
2014-06-12T08:42:03  *** afazekas has joined #openstack-infra
2014-06-12T08:42:48  <lifeless> jhesketh: I have no idea how to do that
2014-06-12T08:43:34  <jhesketh> the email on the account is DL-GRP-VYATTA-OSS@Brocade.com
2014-06-12T08:43:37  *** rlandy has joined #openstack-infra
2014-06-12T08:43:43  *** jcoufal has joined #openstack-infra
2014-06-12T08:43:55  *** sarob has quit IRC
2014-06-12T08:44:39  <isviridov> SergeyLukjanov, could you take a look at https://review.openstack.org/#/c/99039/ and https://review.openstack.org/#/c/91050/
2014-06-12T08:45:32  *** rcarrillocruz has joined #openstack-infra
2014-06-12T08:46:00  <lifeless> jhesketh: they've commented on looks like hundreds of reviews in the last few hours
2014-06-12T08:46:15  <lifeless> hmmm, no gmail fail on screen size
2014-06-12T08:46:38  <lifeless> 30ish
2014-06-12T08:46:43  <lifeless> I will mail them cc infra
2014-06-12T08:46:48  <jhesketh> okay
2014-06-12T08:46:49  <jhesketh> thanks
2014-06-12T08:46:58  <jhesketh> might be worth removing their access but lets try email first
2014-06-12T08:47:14  <jhesketh> SergeyLukjanov might disagree and just revoke it anyway ;-)
2014-06-12T08:47:39  *** rcarrill` has quit IRC
2014-06-12T08:48:01  <openstackgerrit> A change was merged to openstack-infra/config: ceilometer: enable gate-grenade-dsvm-forward  https://review.openstack.org/97430
2014-06-12T08:48:33  <lifeless> email sent
2014-06-12T08:49:17  *** dims_ has joined #openstack-infra
2014-06-12T08:51:39  *** andreykurilin_ has quit IRC
2014-06-12T08:52:50  *** cody-somerville has joined #openstack-infra
2014-06-12T08:52:57  <sweston> jhesketh: lifeless: hello
2014-06-12T08:53:08  <sweston> that is my system, apologies
2014-06-12T08:53:16  <lifeless> sweston: hi
2014-06-12T08:53:25  <sweston> I stopped the zuul service
2014-06-12T08:53:30  *** Alexei_987 has quit IRC
2014-06-12T08:53:38  <lifeless> thank you
2014-06-12T08:53:44  <sweston> that can you verify that we are no longer posting back?
2014-06-12T08:53:46  *** e0ne has joined #openstack-infra
2014-06-12T08:54:38  <sweston> sorry, this is my first attempt at this
2014-06-12T08:54:57  *** dims_ has quit IRC
2014-06-12T08:55:45  <sweston> should I just take everything out of my projects.yaml file except for the sandbox and try again?
2014-06-12T08:56:21  <sweston> guess that would be my layout.yaml file in /etc/zuul
2014-06-12T08:56:23  <jhesketh> sweston: you should modify your zuul's layout.yaml to not report to gerrit
2014-06-12T08:56:30  <jhesketh> instead try setting up an smtp reporter
2014-06-12T08:56:40  <jhesketh> so you can email yourself results while you set it up
2014-06-12T08:57:18  *** mrmartin has joined #openstack-infra
2014-06-12T08:57:32  <mrmartin> re
2014-06-12T08:57:45  * sweston is looking up zuul docs
2014-06-12T09:01:51  *** ominakov has joined #openstack-infra
2014-06-12T09:03:11  *** achuprin_ has quit IRC
2014-06-12T09:03:52  <sweston> jhesketh: so I should change the success and parameters in each of the pipeline definitions?
2014-06-12T09:13:38  <sweston> jhesketh: lifeless: nevermind, I have the correct layout file now.  apologies, again for the disturbance to your systems
2014-06-12T09:14:18  <lifeless> sweston: np, thanks for taking prompt action
2014-06-12T09:14:46  *** _nadya_ has joined #openstack-infra
2014-06-12T09:14:47  <sweston> lifeless: sure thing, the least I could do :-)
2014-06-12T09:16:26  *** habib has joined #openstack-infra
2014-06-12T09:16:49  *** achuprin_ has joined #openstack-infra
2014-06-12T09:18:37  *** chianingwang has joined #openstack-infra
2014-06-12T09:19:44  *** _nadya_ has quit IRC
2014-06-12T09:23:09  *** chianingwang has quit IRC
2014-06-12T09:23:19  *** zhiyan is now known as zhiyan_
2014-06-12T09:24:32  *** amcrn has quit IRC
2014-06-12T09:24:36  *** andreykurilin_ has joined #openstack-infra
2014-06-12T09:32:07  <yjiang> i folks,I use "Gerrit trigger"(not zuul) to trigger Openstack 3rd part test.I've set Verify values "Successful 1", "Failed -1".My CI test could be triggered as normal,but the "Verified +/-1" will not be shown on the review page after CI test is done.Why this happened?Does there anyone could help to answer my question?Any suggestion is appreciated.Thx a lot!
2014-06-12T09:33:41  *** zehicle_at_dell has joined #openstack-infra
2014-06-12T09:38:06  *** sarob has joined #openstack-infra
2014-06-12T09:38:19  *** andreykurilin_ has quit IRC
2014-06-12T09:39:52  *** sarob_ has joined #openstack-infra
2014-06-12T09:41:50  <Kiall> yjiang: your 3rd party testing account needs special permissions to give a Verified vote - that's rarely given out, and when it is, the 3rd party testing need a track record of producing useful and accurate tests etc etc
2014-06-12T09:43:08  *** sarob has quit IRC
2014-06-12T09:43:29  *** denis_makogon has quit IRC
2014-06-12T09:44:19  *** sarob_ has quit IRC
2014-06-12T09:44:42  *** e0ne_ has joined #openstack-infra
2014-06-12T09:48:05  *** e0ne has quit IRC
2014-06-12T09:52:49  <SergeyLukjanov> lifeless, jhesketh, does brocade ci still sending incorrect links?
2014-06-12T09:53:12  <SergeyLukjanov> oh, I see the dialog with sweston
2014-06-12T09:53:41  <sweston> SergeyLukjanov: yes, sorry about that
2014-06-12T09:54:08  <SergeyLukjanov> sweston, np, it's not like the spamming all projects ;)
2014-06-12T09:54:16  *** oomichi has joined #openstack-infra
2014-06-12T09:54:51  <SergeyLukjanov> fungi, jeblair, clarkb, jhesketh, mordred, there are four holiday days in russia, so, I'll be limited available till Monday]
2014-06-12T09:55:01  <sweston> SergeyLukjanov:  yup, understood.  Won't be making that mistake again :-)
2014-06-12T09:57:00  <openstackgerrit> Kiall Mac Innes proposed a change to openstack-infra/config: Move unbound DNS recursor instance to 127.0.2.1  https://review.openstack.org/99611
2014-06-12T10:02:54  *** zehicle_at_dell has quit IRC
2014-06-12T10:03:53  *** zehicle_at_dell has joined #openstack-infra
2014-06-12T10:05:26  *** ominakov has quit IRC
2014-06-12T10:05:42  <yjiang> Kiall: OK,thanks to reply.Another question.If I want to apply this "Verified vote" rights,what specific target should I got?For example,find how many bugs by my test or may be something else.
2014-06-12T10:06:11  <Kiall> Honestly, not sure :) I just know it's handed out sparingly after proving reliable :)
2014-06-12T10:07:33  <yjiang> Kiall: OK,thx!
2014-06-12T10:10:10  *** ominakov has joined #openstack-infra
2014-06-12T10:11:46  *** ihrachyshka has quit IRC
2014-06-12T10:13:15  <openstackgerrit> lifeless proposed a change to openstack-infra/infra-specs: Make use of IP per slave optional.  https://review.openstack.org/95625
2014-06-12T10:14:19  *** skraynev has joined #openstack-infra
2014-06-12T10:16:00  *** talluri has joined #openstack-infra
2014-06-12T10:20:10  *** talluri has quit IRC
2014-06-12T10:20:22  *** matsuhashi has quit IRC
2014-06-12T10:20:36  <openstackgerrit> lifeless proposed a change to stackforge/gertty: Don't crash on comments on unchanged files  https://review.openstack.org/99563
2014-06-12T10:20:58  *** matsuhashi has joined #openstack-infra
2014-06-12T10:21:19  *** jerryz has quit IRC
2014-06-12T10:21:27  *** yamahata has quit IRC
2014-06-12T10:23:03  *** dims_ has joined #openstack-infra
2014-06-12T10:24:37  *** amcrn has joined #openstack-infra
2014-06-12T10:25:42  *** matsuhashi has quit IRC
2014-06-12T10:26:18  *** Hal_ has quit IRC
2014-06-12T10:30:53  *** yaguang has quit IRC
2014-06-12T10:33:10  <cgoncalves> Hi. When re-submitting a patchset to Gerrit can one change the topic? I'm concern about Gerrit possibly re-generating a new Change-Id.
2014-06-12T10:35:16  <gilliard> IIRC you can't _just_ change the topic because the git commit hash will be the same.
2014-06-12T10:37:05  *** e0ne_ has quit IRC
2014-06-12T10:37:11  <cgoncalves> gilliard: I wouldn't only be changing the topic, so based on what you just said I believe it should be find changing the topic. thanks
2014-06-12T10:37:15  *** talluri has joined #openstack-infra
2014-06-12T10:37:24  <gilliard> But if you change the commit msg or some code it should keep the came change-id
2014-06-12T10:37:29  <gilliard> (just testing that)
2014-06-12T10:37:31  *** e0ne has joined #openstack-infra
2014-06-12T10:37:55  <gilliard> confirmed/
2014-06-12T10:38:34  <cgoncalves> gilliard: much appreciated :-)
2014-06-12T10:38:55  *** kmartin has quit IRC
2014-06-12T10:39:30  *** sarob has joined #openstack-infra
2014-06-12T10:41:52  *** e0ne has quit IRC
2014-06-12T10:42:22  *** thomasbiege has joined #openstack-infra
2014-06-12T10:43:55  *** sarob has quit IRC
2014-06-12T10:48:09  *** rcarrillocruz has quit IRC
2014-06-12T10:52:56  *** rcarrillocruz has joined #openstack-infra
2014-06-12T10:56:15  *** _nadya_ has joined #openstack-infra
2014-06-12T10:59:27  *** srenatus has quit IRC
2014-06-12T10:59:57  *** srenatus has joined #openstack-infra
2014-06-12T11:04:44  *** atiwari has quit IRC
2014-06-12T11:05:27  *** _nadya_ has quit IRC
2014-06-12T11:06:49  <openstackgerrit> Bob Ball proposed a change to openstack-infra/nodepool: Support install phase with nodepool  https://review.openstack.org/97787
2014-06-12T11:06:51  <openstackgerrit> Bob Ball proposed a change to openstack-infra/nodepool: Support nodes with launch condition  https://review.openstack.org/97798
2014-06-12T11:13:22  *** nosnos has quit IRC
2014-06-12T11:15:47  *** e0ne has joined #openstack-infra
2014-06-12T11:17:12  *** e0ne has quit IRC
2014-06-12T11:17:42  *** e0ne has joined #openstack-infra
2014-06-12T11:19:42  * fungi is going to try and get a few openstack things done today, but is getting mired in final moving details and constant interruptions by agents trying to show the current house, so probably not around for a lot of general support
2014-06-12T11:19:55  <fungi> clarkb: mordred: ^
2014-06-12T11:20:56  *** ihrachyshka has joined #openstack-infra
2014-06-12T11:21:56  <sdague> fungi: with that being said, could I get you to promote 99396, as working on readability for grenade (which should help sort some of these bugs) is somewhat limitted until that lands
2014-06-12T11:22:08  *** trinaths has joined #openstack-infra
2014-06-12T11:22:41  *** e0ne has quit IRC
2014-06-12T11:22:55  <fungi> sdague: sure
2014-06-12T11:23:00  *** srenatus has quit IRC
2014-06-12T11:23:04  <sdague> I also think we need to kick all of ironic out of the gate
2014-06-12T11:23:56  *** andreykurilin_ has joined #openstack-infra
2014-06-12T11:24:18  *** srenatus has joined #openstack-infra
2014-06-12T11:24:22  *** tkelsey has quit IRC
2014-06-12T11:24:23  *** [1]trinaths has joined #openstack-infra
2014-06-12T11:26:09  *** basha has quit IRC
2014-06-12T11:26:12  <sdague> yeh, gate-tempest-dsvm-virtual-ironic has a 33% fail rate in the gate
2014-06-12T11:26:20  <fungi> ouch
2014-06-12T11:26:29  <sdague> I think we need to make that test non voting
2014-06-12T11:26:41  <sdague> basically it's a terrible configuration
2014-06-12T11:27:03  <sdague> relies massively more on the network than the rest of the world
2014-06-12T11:27:38  *** trinaths has quit IRC
2014-06-12T11:27:39  *** [1]trinaths is now known as trinaths
2014-06-12T11:28:44  *** yjiang has quit IRC
2014-06-12T11:29:36  *** plomakin has joined #openstack-infra
2014-06-12T11:29:40  <sdague> fungi: if I push a config for that, can you fast path it?
2014-06-12T11:30:44  <sdague> 30 gate fails in the last 48 hrs
2014-06-12T11:34:17  <openstackgerrit> Sean Dague proposed a change to openstack-infra/config: disable voting on gate-tempest-dsvm-virtual-ironic  https://review.openstack.org/99630
2014-06-12T11:38:25  *** basha has joined #openstack-infra
2014-06-12T11:39:11  *** andreykurilin_ has quit IRC
2014-06-12T11:39:31  *** sarob has joined #openstack-infra
2014-06-12T11:42:42  *** mrmartin has quit IRC
2014-06-12T11:42:43  *** basha has quit IRC
2014-06-12T11:43:55  *** sarob has quit IRC
2014-06-12T11:44:02  *** lcheng has quit IRC
2014-06-12T11:44:38  *** CaptTofu_ has joined #openstack-infra
2014-06-12T11:45:02  *** e0ne has joined #openstack-infra
2014-06-12T11:45:33  *** CaptTofu_ has quit IRC
2014-06-12T11:45:54  *** CaptTofu_ has joined #openstack-infra
2014-06-12T11:46:19  <openstackgerrit> Sean Dague proposed a change to openstack-infra/elastic-recheck: gate-tempest-dsvm-virtual-ironic is in our gate  https://review.openstack.org/99635
2014-06-12T11:50:21  <sdague> fungi: so... the non-voting?
2014-06-12T11:53:35  *** basha has joined #openstack-infra
2014-06-12T11:53:55  *** yfried_ has joined #openstack-infra
2014-06-12T11:54:59  <openstackgerrit> A change was merged to openstack-infra/elastic-recheck: gate-tempest-dsvm-virtual-ironic is in our gate  https://review.openstack.org/99635
2014-06-12T11:55:07  *** thomasbiege has quit IRC
2014-06-12T11:56:05  *** yfried has quit IRC
2014-06-12T11:56:46  *** mrmartin has joined #openstack-infra
2014-06-12T11:59:05  *** lbragstad has quit IRC
2014-06-12T12:00:40  *** thomasbiege has joined #openstack-infra
2014-06-12T12:03:12  *** dprince has joined #openstack-infra
2014-06-12T12:07:29  *** mugsie has joined #openstack-infra
2014-06-12T12:08:21  <fungi> sdague: back now, and approved
2014-06-12T12:08:27  <sdague> fungi: thanks
2014-06-12T12:08:38  <sdague> I sent an email to the list describing the reasons as well
2014-06-12T12:09:06  <fungi> excellent. if the ironic devs are worried about that letting breakage slip through... well...
2014-06-12T12:09:43  <fungi> i guess the alternative is to go back to not running any shared jobs
2014-06-12T12:10:02  <fungi> so that it can break in its own queue without slowing down the main integrated queue
2014-06-12T12:11:02  <sdague> yeh, it only turns off the vote in gate
2014-06-12T12:11:09  *** yamahata has joined #openstack-infra
2014-06-12T12:11:16  <fungi> oh, that too
2014-06-12T12:11:27  <fungi> a very good point
2014-06-12T12:12:30  <sdague> I did try to do the minimum impact thing here :)
2014-06-12T12:13:46  <openstackgerrit> A change was merged to openstack-infra/config: disable voting on gate-tempest-dsvm-virtual-ironic  https://review.openstack.org/99630
2014-06-12T12:15:48  <openstackgerrit> Maxime Vidori proposed a change to openstack-infra/storyboard-webclient: Remove boostrap.js  https://review.openstack.org/99638
2014-06-12T12:19:55  *** dkranz has joined #openstack-infra
2014-06-12T12:20:01  *** smarcet has joined #openstack-infra
2014-06-12T12:20:05  *** adalbas has joined #openstack-infra
2014-06-12T12:22:38  *** dims_ has quit IRC
2014-06-12T12:23:05  *** dims_ has joined #openstack-infra
2014-06-12T12:23:10  *** aysyd has joined #openstack-infra
2014-06-12T12:23:45  <sdague> fungi: oh ffs, new fails
2014-06-12T12:24:09  *** hashar has quit IRC
2014-06-12T12:24:30  *** e0ne_ has joined #openstack-infra
2014-06-12T12:24:41  *** basha has quit IRC
2014-06-12T12:25:45  *** weshay has joined #openstack-infra
2014-06-12T12:25:46  *** dims_ is now known as dims
2014-06-12T12:27:54  <fungi> it is feature breeding season after all
2014-06-12T12:28:19  *** e0ne has quit IRC
2014-06-12T12:30:28  *** ArxCruz has joined #openstack-infra
2014-06-12T12:31:53  *** amotoki has quit IRC
2014-06-12T12:33:05  *** talluri has quit IRC
2014-06-12T12:33:33  *** talluri has joined #openstack-infra
2014-06-12T12:36:25  *** dkliban_afk is now known as dkliban
2014-06-12T12:37:40  *** fanhe has joined #openstack-infra
2014-06-12T12:38:07  *** talluri has quit IRC
2014-06-12T12:38:30  <openstackgerrit> Denis M. proposed a change to openstack-infra/config: Added experimental job for trove mongodb functional tests  https://review.openstack.org/99644
2014-06-12T12:38:45  *** denis_makogon has joined #openstack-infra
2014-06-12T12:39:17  *** rfolco has joined #openstack-infra
2014-06-12T12:39:30  *** sarob has joined #openstack-infra
2014-06-12T12:39:57  *** maxbit has joined #openstack-infra
2014-06-12T12:40:41  *** Hal_ has joined #openstack-infra
2014-06-12T12:41:20  *** chandan_kumar has joined #openstack-infra
2014-06-12T12:43:00  *** thomasbiege has left #openstack-infra
2014-06-12T12:43:28  *** crc32 has quit IRC
2014-06-12T12:44:41  *** sarob has quit IRC
2014-06-12T12:44:53  *** chandan_kumar has quit IRC
2014-06-12T12:45:45  <openstackgerrit> A change was merged to openstack-infra/config: Don't deny visibility of ICLA group to its members  https://review.openstack.org/99223
2014-06-12T12:46:05  *** amcrn has quit IRC
2014-06-12T12:46:05  *** bradm has quit IRC
2014-06-12T12:46:05  *** openstackgerrit has quit IRC
2014-06-12T12:46:09  *** yfried_ has quit IRC
2014-06-12T12:46:39  *** bradm has joined #openstack-infra
2014-06-12T12:48:28  *** openstackgerrit has joined #openstack-infra
2014-06-12T12:49:25  *** oomichi has quit IRC
2014-06-12T12:50:55  *** eharney has joined #openstack-infra
2014-06-12T12:52:09  *** chandankumar has joined #openstack-infra
2014-06-12T12:55:43  *** dims_ has joined #openstack-infra
2014-06-12T12:56:25  *** prad has joined #openstack-infra
2014-06-12T12:56:52  *** dims has quit IRC
2014-06-12T12:57:35  *** lbragstad has joined #openstack-infra
2014-06-12T13:00:26  <andreaf> clarkb: ping
2014-06-12T13:01:47  *** julim has joined #openstack-infra
2014-06-12T13:02:23  <openstackgerrit> Denis M. proposed a change to openstack-infra/config: Added experimental job for trove mongodb functional tests  https://review.openstack.org/99644
2014-06-12T13:03:11  *** yamahata has quit IRC
2014-06-12T13:03:39  *** yamahata has joined #openstack-infra
2014-06-12T13:05:15  *** ihrachyshka has quit IRC
2014-06-12T13:07:35  *** ihrachyshka has joined #openstack-infra
2014-06-12T13:09:20  *** sweston has quit IRC
2014-06-12T13:12:28  *** mriedem has joined #openstack-infra
2014-06-12T13:12:47  *** hashar has joined #openstack-infra
2014-06-12T13:14:19  *** dkranz has quit IRC
2014-06-12T13:14:21  *** mrmartin has quit IRC
2014-06-12T13:15:44  *** CaptTofu_ has quit IRC
2014-06-12T13:16:10  *** CaptTofu_ has joined #openstack-infra
2014-06-12T13:18:41  *** thuc_ has joined #openstack-infra
2014-06-12T13:20:34  *** mbacchi has joined #openstack-infra
2014-06-12T13:20:39  *** CaptTofu_ has quit IRC
2014-06-12T13:22:32  *** oomichi has joined #openstack-infra
2014-06-12T13:27:43  <openstackgerrit> Maxime Vidori proposed a change to openstack-infra/storyboard-webclient: Remove boostrap.js  https://review.openstack.org/99638
2014-06-12T13:27:46  <openstackgerrit> Maxime Vidori proposed a change to openstack-infra/storyboard-webclient: Removal of jquery  https://review.openstack.org/99660
2014-06-12T13:31:46  *** mrmartin has joined #openstack-infra
2014-06-12T13:32:13  *** jergerber has joined #openstack-infra
2014-06-12T13:34:07  *** talluri has joined #openstack-infra
2014-06-12T13:34:41  *** CaptTofu_ has joined #openstack-infra
2014-06-12T13:35:56  *** tkelsey has joined #openstack-infra
2014-06-12T13:36:30  *** zehicle_at_dell has quit IRC
2014-06-12T13:36:30  *** mwagner_lap has quit IRC
2014-06-12T13:38:34  *** talluri has quit IRC
2014-06-12T13:39:29  *** sarob has joined #openstack-infra
2014-06-12T13:40:37  *** crc32 has joined #openstack-infra
2014-06-12T13:41:45  *** crc32 has quit IRC
2014-06-12T13:43:32  *** sileht has quit IRC
2014-06-12T13:43:44  *** trinaths has quit IRC
2014-06-12T13:43:55  *** sarob has quit IRC
2014-06-12T13:44:15  <BobBall> Anyone know how the yaml python package gets into the VMs?
2014-06-12T13:44:57  <BobBall> devstack-gate/test-matrix.py needs yaml but it's not installed on the xs CI vms initially, but it _does_ get installed later by something (system package) - but I can't figure out where and it's bugging me!
2014-06-12T13:45:31  <fungi> BobBall: perhaps it's installed by devstack?
2014-06-12T13:45:56  <BobBall> not that I could see :/
2014-06-12T13:46:46  <BobBall> a bunch of puppet stuff depends on yaml - but the ones that do don't appear to be depended on by a node...
2014-06-12T13:47:34  *** crc32 has joined #openstack-infra
2014-06-12T13:47:47  *** mfer has joined #openstack-infra
2014-06-12T13:50:11  *** bknudson has joined #openstack-infra
2014-06-12T13:50:37  <fungi> yeah, this is perplexing... still looking
2014-06-12T13:51:59  *** ihrachyshka has quit IRC
2014-06-12T13:52:59  <fungi> looking at a random devstack-precise node, python-yaml 3.10-2 is installed from a deb
2014-06-12T13:53:11  *** homeless has joined #openstack-infra
2014-06-12T13:54:29  *** yolanda has joined #openstack-infra
2014-06-12T13:54:34  <BobBall> hmmm...
2014-06-12T13:54:37  <BobBall> lemme check something...
2014-06-12T13:54:46  *** beekneemech is now known as bnemec
2014-06-12T13:54:47  <openstackgerrit> A change was merged to openstack-infra/storyboard: Removed PostGres from code and documentation  https://review.openstack.org/98870
2014-06-12T13:55:04  *** yfried_ has joined #openstack-infra
2014-06-12T13:55:22  *** Longgeek has joined #openstack-infra
2014-06-12T13:55:44  *** ihrachyshka has joined #openstack-infra
2014-06-12T13:55:54  <BobBall> it's installed as a dependency
2014-06-12T13:56:12  <BobBall> http://paste.openstack.org/show/83806/
2014-06-12T13:56:31  *** basha has joined #openstack-infra
2014-06-12T13:56:34  *** yfried_ has quit IRC
2014-06-12T13:56:35  *** reaper has joined #openstack-infra
2014-06-12T13:56:35  <fungi> ahh, yep
2014-06-12T13:56:41  *** yfried_ has joined #openstack-infra
2014-06-12T13:57:09  *** zz_gondoi is now known as gondoi
2014-06-12T13:57:14  <BobBall> not sure what the dependency path is ... but that's why it's there after devstack has run
2014-06-12T13:57:55  *** Longgeek_ has quit IRC
2014-06-12T14:00:52  *** jistr has quit IRC
2014-06-12T14:01:21  *** timrc-afk is now known as timrc
2014-06-12T14:01:51  *** malini1 has joined #openstack-infra
2014-06-12T14:02:00  *** sileht has joined #openstack-infra
2014-06-12T14:02:04  <fungi> BobBall: dpkg -l | grep -e $(echo `apt-cache rdepends python-yaml|grep '^  '`|sed 's/ / -e /g')
2014-06-12T14:02:33  <fungi> looks like cloud-init, cloud-utils and python-kombu may be responsible (recurse as needed)
2014-06-12T14:02:43  *** jistr has joined #openstack-infra
2014-06-12T14:03:18  <malini1> hello ! We are running into a heat timeout failure at the gate, which is blocking our patches. I see tht there is already a query associated with this one https://github.com/openstack-infra/elastic-recheck/blob/master/queries/1306029.yaml
2014-06-12T14:03:30  <BobBall> great - thanks - just what I wanted fungi!
2014-06-12T14:03:37  <malini1> What else do I need to make this part of elastic recheck?
2014-06-12T14:04:24  <fungi> malini1: http://docs.openstack.org/infra/elastic-recheck/readme.html#adding-bug-signatures
2014-06-12T14:04:43  *** mugsie has quit IRC
2014-06-12T14:05:35  *** mugsie has joined #openstack-infra
2014-06-12T14:06:00  <malini1> fungi: it seems like Step 4 in tht link is already in place. There is already a query in the repo https://github.com/openstack-infra/elastic-recheck/blob/master/queries/1306029.yaml
2014-06-12T14:07:34  <fungi> malini1: also see the logstash job queue graph at the bottom of http://status.openstack.org/zuul/ indicating that we're currently running on a perpetual log processing backlog, so i think right now elastic-recheck is giving up most/all of the time waiting for logs of a failed job to get indexed (it only waits up to 15 minutes before deciding it's been too long)
2014-06-12T14:08:24  <fungi> malini1: i think clarkb was planning to dig back into possible causes/remediation once he's awake
2014-06-12T14:09:11  <malini1> Thanks fungi ! I cud buy clarkb some caffeine ;)
2014-06-12T14:09:43  <malini1> fungi: So for now, my only option is to wait -rt?
2014-06-12T14:10:22  <fungi> malini1: and in the meantime look at the failure logs yourself and identify the bug that way, when possible
2014-06-12T14:10:23  *** pcrews has joined #openstack-infra
2014-06-12T14:11:03  <malini1> fungi: can I still use the 'recheck bug #', if elastic recheck doesnt find it?
2014-06-12T14:11:19  <fungi> malini1: yes
2014-06-12T14:11:35  <malini1> fungi: cool! I didnt know that
2014-06-12T14:11:43  <malini1> It solves our problem
2014-06-12T14:13:12  <malini1> thanks again
2014-06-12T14:15:21  *** shayneburgess has joined #openstack-infra
2014-06-12T14:15:21  *** shayneburgess has quit IRC
2014-06-12T14:15:24  *** sweston has joined #openstack-infra
2014-06-12T14:17:25  *** wenlock_ has joined #openstack-infra
2014-06-12T14:18:10  *** atiwari has joined #openstack-infra
2014-06-12T14:19:09  *** otherwiseguy has joined #openstack-infra
2014-06-12T14:19:26  *** mrmartin has quit IRC
2014-06-12T14:21:35  *** basha has quit IRC
2014-06-12T14:22:15  *** UtahDave has joined #openstack-infra
2014-06-12T14:25:39  *** malini1 has quit IRC
2014-06-12T14:25:53  *** malini1 has joined #openstack-infra
2014-06-12T14:26:59  *** malini1 has quit IRC
2014-06-12T14:27:09  <openstackgerrit> A change was merged to openstack-infra/elastic-recheck: Add query for ceilometer test_notify_alarm bug 1321826  https://review.openstack.org/98149
2014-06-12T14:27:11  <uvirtbot> Launchpad bug 1321826 in ceilometer "periodic notifier unit test failure" [Medium,In progress] https://launchpad.net/bugs/1321826
2014-06-12T14:27:15  *** malini1 has joined #openstack-infra
2014-06-12T14:27:23  *** trinaths has joined #openstack-infra
2014-06-12T14:27:43  *** zehicle_at_dell has joined #openstack-infra
2014-06-12T14:27:55  *** jcoufal has quit IRC
2014-06-12T14:31:29  *** otherwiseguy has quit IRC
2014-06-12T14:31:32  *** basha has joined #openstack-infra
2014-06-12T14:31:42  <openstackgerrit> A change was merged to openstack-infra/reviewday: Prettified all HTML files  https://review.openstack.org/98655
2014-06-12T14:34:05  *** shayneburgess has joined #openstack-infra
2014-06-12T14:34:19  <Kiall> fungi / clarkb: I put this review together in an attempt to fix that unbound issue mentioned during the Designate meet yesterday, approach seem OK? https://review.openstack.org/#/c/99611/
2014-06-12T14:34:49  *** radez_g0n3 is now known as radez
2014-06-12T14:35:55  *** otherwiseguy has joined #openstack-infra
2014-06-12T14:38:12  *** shayneburgess has quit IRC
2014-06-12T14:38:47  *** rdopieralski has quit IRC
2014-06-12T14:39:30  *** sarob has joined #openstack-infra
2014-06-12T14:40:36  *** timrc is now known as timrc-afk
2014-06-12T14:41:47  *** yamahata has quit IRC
2014-06-12T14:42:09  <phschwartz> What are the requirements for CLA for the puppet-* acl  configs for gerrit? Currently only one of the 6 in the repo require cla and I currently have a -1 from push back for not having it in my file I am adding.
2014-06-12T14:42:25  *** basha has quit IRC
2014-06-12T14:43:55  *** sarob has quit IRC
2014-06-12T14:43:57  <openstackgerrit> A change was merged to openstack-infra/storyboard-webclient: Refresh token support  https://review.openstack.org/95478
2014-06-12T14:44:01  <phschwartz> fungi: mordred: anteaya: clarkb: jeblair: ^ any of you have a weigh in?
2014-06-12T14:44:12  *** basha has joined #openstack-infra
2014-06-12T14:44:56  *** mkerrin has quit IRC
2014-06-12T14:45:25  <mordred_phone> phschwartz: I believe we decided that they don't need it
2014-06-12T14:46:00  <phschwartz> awesome, makes that easy. Now to bug you core reviewers for an approval ;)
2014-06-12T14:46:02  <fungi> phschwartz: the status of cla as a requirement for things not distributed as a component of an openstack cloud is currently somewhat muddy. at a recent infra team meeting we resolved for now that if it derives in any way from another project which isn't currently enforcing the cla then it's not necessary
2014-06-12T14:46:51  <fungi> phschwartz: so if you're copy/pasting some bits from openstack-infra/config for example, that repo already doesn't have a cla requrement
2014-06-12T14:46:55  <fungi> requirement
2014-06-12T14:47:12  *** shayneburgess has joined #openstack-infra
2014-06-12T14:47:40  * fungi digs up a link to use for reference
2014-06-12T14:48:34  <mordred> dstufft: just read an article about DNF which is the new replacement for yum for fedora 22
2014-06-12T14:48:50  <mordred> dstufft: it apparently uses "new dep solver technology which is faster and uses less memory"
2014-06-12T14:48:59  <mordred> dstufft: since it's in python - maybe that dep solver can be re-used?
2014-06-12T14:49:59  *** timrc-afk is now known as timrc
2014-06-12T14:50:02  <fungi> phschwartz: http://eavesdrop.openstack.org/meetings/infra/2014/infra.2014-06-03-19.02.log.html#l-275 (you can skip down to around 19:50:15)
2014-06-12T14:50:23  <mordred> dstufft: nevermind. its much less in python and much more in C
2014-06-12T14:51:10  *** ArxCruz has quit IRC
2014-06-12T14:52:10  *** wenlock_ has quit IRC
2014-06-12T14:52:43  *** thedodd has joined #openstack-infra
2014-06-12T14:54:19  <phschwartz> so if any core want to take a look at https://review.openstack.org/#/c/93953/ it would be appreciated as the -1 should now be a mute point.
2014-06-12T14:54:56  <phschwartz> jhesketh: ping, you around?
2014-06-12T14:55:55  *** kmartin has joined #openstack-infra
2014-06-12T14:56:03  <phschwartz> fungi: ty, that was a good read as to what you guys are thinking and want to use as the current model to follow.
2014-06-12T14:56:19  *** jistr has quit IRC
2014-06-12T14:56:50  *** jistr has joined #openstack-infra
2014-06-12T14:56:52  *** ArxCruz has joined #openstack-infra
2014-06-12T14:56:57  <fungi> phschwartz: jhesketh probably won't be awake for a while... it's pretty dark in au right about now
2014-06-12T14:57:03  *** sarob has joined #openstack-infra
2014-06-12T14:57:14  <phschwartz> ah, didn't realize he was in AU.
2014-06-12T14:57:15  <phschwartz> lol
2014-06-12T14:57:24  <openstackgerrit> Nikhil Manchanda proposed a change to openstack-infra/config: Added new experimental job for trove functional tests  https://review.openstack.org/98517
2014-06-12T14:57:25  <openstackgerrit> Nikhil Manchanda proposed a change to openstack-infra/config: Use job-template for gate-trove-buildimage jobs  https://review.openstack.org/99680
2014-06-12T14:58:26  *** james_li has joined #openstack-infra
2014-06-12T14:58:37  *** oomichi has quit IRC
2014-06-12T14:58:59  *** marun has joined #openstack-infra
2014-06-12T15:00:41  *** flaper87 is now known as flaper87|afk
2014-06-12T15:00:46  <openstackgerrit> yolanda.robla proposed a change to openstack-infra/storyboard-webclient: Display dates in timeago format  https://review.openstack.org/96713
2014-06-12T15:01:08  *** jlibosva has quit IRC
2014-06-12T15:01:31  *** sarob has quit IRC
2014-06-12T15:02:21  <fungi> Kiall: since designate is officially incubated now, i suppose accommodating its typical configuration with our job workers is reasonable even if it means running the local resolver daemon on a less typical address
2014-06-12T15:02:56  *** jlibosva has joined #openstack-infra
2014-06-12T15:03:00  *** sarob has joined #openstack-infra
2014-06-12T15:03:03  <mordred> fungi: I agree
2014-06-12T15:03:32  <yolanda> mordred, cboylan, doing some tests on nodepool in dib, but i receive this error:
2014-06-12T15:03:37  <yolanda> Stderr: "qemu-img: 'image' uses a qcow2 feature which is not supported by this qemu version: QCOW version 3\nqemu-img: Could not open '/var/lib/nova/instances/_base/94d0200a5bb90968e0e40f682f9e187025d84276.part': Operation not supported\n"
2014-06-12T15:03:38  <Kiall> Well, I was more aiming to put unbound on an address no sane service/config would normally do - It move it once and be done with it
2014-06-12T15:03:48  <Kiall> i.e. move it once*
2014-06-12T15:03:52  <yolanda> have you seen that before? looks as something related with dib
2014-06-12T15:04:01  <fungi> Kiall: yes, it seems like a reasonable approach
2014-06-12T15:04:27  *** lcostantino has joined #openstack-infra
2014-06-12T15:05:39  *** reed has joined #openstack-infra
2014-06-12T15:05:46  <fungi> Kiall: out of curiosity, though, why did designate care about the loopback address? wouldn't it be a service running inside an instance rather than in the devstack host context?
2014-06-12T15:06:17  *** dprince has quit IRC
2014-06-12T15:06:19  <fungi> Kiall: or is it not a service vm in the same vein as, say, trove?
2014-06-12T15:06:32  <Kiall> Designate can run right next to nova etc, or inside nova VMs.. The DevStack gate makes running it alongside nova easier
2014-06-12T15:06:46  <Kiall> Not quite the same - but there are plans in that direction for certain use cases
2014-06-12T15:06:50  <anteaya> sweston: shivharis was looking for me yesterday and I was away, please let me know if there is anything you need from me
2014-06-12T15:06:51  <fungi> Kiall: okay, fair enough
2014-06-12T15:07:15  <anteaya> sweston: talking to one person is easier for me then doing cross-purposes with two
2014-06-12T15:07:22  <sweston> anteaya:  hello
2014-06-12T15:07:42  *** sarob has quit IRC
2014-06-12T15:07:59  <anteaya> sweston: hi
2014-06-12T15:08:06  <anteaya> sweston: anything you need from me?
2014-06-12T15:08:11  <mordred> yolanda: I haven't seen that - may want to ask the tripleo folks - i agree, it seems like a dib issue
2014-06-12T15:08:32  <sweston> anteaya: yes, I understand.  We had a meeting yesterday to coordinate everything across our three business units working with OpenStack plugins.
2014-06-12T15:09:21  *** vhoward has left #openstack-infra
2014-06-12T15:09:40  <anteaya> sweston: yay
2014-06-12T15:09:44  <anteaya> sweston: how did it go?
2014-06-12T15:10:02  <yolanda> mordred, looks as we need to call qemu-img with --compat=1.0 , at least for the environment i'm using for testing, but there is no option like that in dib
2014-06-12T15:10:08  <sweston> yes, I do need to speak with you, may we continue our conversation out of band?
2014-06-12T15:10:52  *** basha has quit IRC
2014-06-12T15:11:07  <mordred> yolanda: yah. that'll definitely be a question for #tripleo
2014-06-12T15:11:15  <yolanda> sure, heading there
2014-06-12T15:11:41  <sweston> anteaya: it went very well.
2014-06-12T15:11:55  <anteaya> sweston: let's go to -dev then, I want to ensure we are in a logged channel
2014-06-12T15:12:09  *** ihrachyshka_ has joined #openstack-infra
2014-06-12T15:12:18  <sweston> anteaya:  ok, we can continue here as well.
2014-06-12T15:12:21  *** ihrachyshka_ has quit IRC
2014-06-12T15:12:22  <anteaya> okay
2014-06-12T15:12:27  * anteaya listens
2014-06-12T15:13:01  <sweston> anteaya: so, I now have zuul posting back to the openstack-dev sandbox project
2014-06-12T15:13:12  <anteaya> sweston: let's back up
2014-06-12T15:13:23  <anteaya> how many gerrit accounts are you tracking with brocade?
2014-06-12T15:13:50  *** ramashri has joined #openstack-infra
2014-06-12T15:14:05  <sweston> anteaya: ok, sure.  Right now we have three
2014-06-12T15:15:00  <anteaya> what are they called?
2014-06-12T15:15:03  <sweston> anteaya:  is that consistent with what you understand?
2014-06-12T15:15:08  <phschwartz> Is there a reason why we don't use rebuild to reuse instances from nodepool, but delete them completely and recreate?
2014-06-12T15:15:14  <anteaya> there is a system called Brocade CI that I don't have on my lists
2014-06-12T15:15:41  <phschwartz> With some changes on the nova side for us, we could cut the instance creation times by a lot.
2014-06-12T15:15:42  *** ihrachyshka has quit IRC
2014-06-12T15:15:51  <anteaya> https://etherpad.openstack.org/p/automated-gerrit-account-naming-format
2014-06-12T15:16:06  *** doug-fish has joined #openstack-infra
2014-06-12T15:16:08  <anteaya> line 24, 25 and 26
2014-06-12T15:16:12  *** andreaf has quit IRC
2014-06-12T15:16:16  <sweston> anteaya:  yes, Brocade CI is one of ours, another one should be named Brocade OSS CI, and I need to look up the third
2014-06-12T15:16:30  <anteaya> I don't have a Brocade CI
2014-06-12T15:16:44  *** shayneburgess has quit IRC
2014-06-12T15:17:02  <anteaya> I have Brocade ADX CI, Brocade OSS CI, and Brocade Tempest
2014-06-12T15:17:08  <sweston> that should somehow be linked to Pattabi Ayyasami
2014-06-12T15:17:15  *** ramashri has quit IRC
2014-06-12T15:17:28  *** _nadya_ has joined #openstack-infra
2014-06-12T15:17:37  <anteaya> I have Brocade ADX CI lined to that name
2014-06-12T15:17:54  *** otherwiseguy has quit IRC
2014-06-12T15:18:04  <sweston> anteaya: ok, then Brocade Tempest must be Shiv Haris's?
2014-06-12T15:18:12  *** shayneburgess has joined #openstack-infra
2014-06-12T15:18:17  <anteaya> fungi: can you take a peek at the gerrit db and see if there is a Brocade CI that isn't a part of the third party gerrit group?
2014-06-12T15:18:28  <anteaya> sweston: Brocade CI is the name
2014-06-12T15:19:04  <sweston> anteaya: I suspect that is linked to pattabi somehow
2014-06-12T15:19:30  <sweston> anteaya: let me give him a call and ask
2014-06-12T15:19:39  *** denis_makogon has quit IRC
2014-06-12T15:19:45  <openstackgerrit> Ben Nemec proposed a change to openstack-infra/reviewstats: Oslo project updates  https://review.openstack.org/99184
2014-06-12T15:19:56  <anteaya> sweston: thanks
2014-06-12T15:20:40  <sweston> anteaya:  sure, give me a few minutes ...  :-)
2014-06-12T15:21:05  *** otherwiseguy has joined #openstack-infra
2014-06-12T15:21:18  <anteaya> sweston: also please respond to http://lists.openstack.org/pipermail/openstack-infra/2014-June/001336.html
2014-06-12T15:21:32  <anteaya> sweston: from what I can tell this is Brocade OSS CI
2014-06-12T15:21:44  <mordred> phschwartz: what does rebuild do?
2014-06-12T15:21:51  <sweston> anteaya: yes, I followed up in infra irc immediately
2014-06-12T15:21:55  *** _nadya_ has quit IRC
2014-06-12T15:22:06  <mordred> phschwartz: do we get an instance that looks like it had just been booted?
2014-06-12T15:22:11  <anteaya> I haven't read backscroll yet
2014-06-12T15:22:11  <phschwartz> mordred: Rebuilds an instance and brings it back to initial startup state
2014-06-12T15:22:39  *** markmcclain has joined #openstack-infra
2014-06-12T15:22:49  <phschwartz> mordred: If we did move to that with changes on our nova side we could pre-cache the image which would remove the redownload of the image from glance cutting down on the time it takes.
2014-06-12T15:22:50  <sweston> anteaya:  so that's what it looks like when you run zuul with the layout.yaml file unchanged
2014-06-12T15:22:53  <mordred> phschwartz: k. no, I do not believe there is a conscious reason - except it would potentially make the elastic logic need to be rethought
2014-06-12T15:23:15  <phschwartz> mordred: would only hit the glance download when the image is refreshed.
2014-06-12T15:23:26  *** annegent_ has joined #openstack-infra
2014-06-12T15:23:33  *** timrc is now known as timrc-afk
2014-06-12T15:23:43  *** dkranz has joined #openstack-infra
2014-06-12T15:24:14  <mordred> because delete and create are handled independent - so there isn't really anywhere in the system that knows "I'm done with this node, but when I delete it, I'll still need one, so let me re-build instead of delete"
2014-06-12T15:24:18  <annegent_> ttx: governance question when you have a moment (and I should know this but want to ask)
2014-06-12T15:24:31  <mordred> phschwartz: so it could work out - but it might not be the _easiest_ patch to write
2014-06-12T15:25:01  *** dprince has joined #openstack-infra
2014-06-12T15:25:02  <ttx> annegent_: ask
2014-06-12T15:25:04  <mordred> might not be TOO terrible though
2014-06-12T15:25:05  *** CaptTofu_ has quit IRC
2014-06-12T15:25:11  <phschwartz> mordred: I have been looking at the code as I work on the throttling on error and I will see what it might take to do it.
2014-06-12T15:25:18  <annegent_> ttx: should the ptl be elected prior to incubation?
2014-06-12T15:25:21  <annegent_> the/a
2014-06-12T15:25:22  <mordred> since nodepool marks a node for delete in its db
2014-06-12T15:25:43  <NobodyCam> fungi: happen to be around?
2014-06-12T15:26:04  <mordred> the create code _could_ just say "I need to create a node, are there any nodes in DELETE state in the db, if so, let me nova rebuild them and set their state to BUILDING"
2014-06-12T15:26:11  <ttx> annegent_: http://git.openstack.org/cgit/openstack/governance/tree/reference/new-programs-requirements.rst
2014-06-12T15:26:12  <mordred> phschwartz: ^^
2014-06-12T15:26:20  <ttx> "Team should have a lead, selected by the team contributors"
2014-06-12T15:26:30  <annegent_> ttx: thanks! I was looking at http://git.openstack.org/cgit/openstack/governance/tree/reference/incubation-integration-requirements.rst
2014-06-12T15:26:32  <sweston> anteaya: I cannot reach him at the moment, I will take an action item to find out and get back to you as soon as I can
2014-06-12T15:26:33  <ttx> that's only if the project requires a new program
2014-06-12T15:26:36  <phschwartz> mordred: That might be the easiest way
2014-06-12T15:26:39  <annegent_> ttx: so that's even prior to the next hop
2014-06-12T15:26:48  <ttx> annegent_: or at least concurrent
2014-06-12T15:26:52  *** alexpilotti has joined #openstack-infra
2014-06-12T15:27:04  <annegent_> ttx: got it, thanks. Election isn't a requirement, teams can do their own selection process.
2014-06-12T15:27:04  <ttx> annegent_: note that te wording gives some room for maneuvering
2014-06-12T15:27:11  <openstackgerrit> A change was merged to openstack-infra/config: Use WatchedFileHandler to avoid copytruncate.  https://review.openstack.org/95935
2014-06-12T15:27:14  <ttx> yes
2014-06-12T15:27:17  <mordred> phschwartz: one of those times when having deletes be async makes logic _easier_
2014-06-12T15:27:25  <annegent_> ttx: thanks!
2014-06-12T15:27:52  <annegent_> ttx: in the case of a project incubating within a program, is there just one ptl?
2014-06-12T15:27:55  <fungi> anteaya: https://review.openstack.org/#/q/owner:%22Brocade+CI+%253Copenstack_gerrit%2540brocade.com%253E%22,n,z
2014-06-12T15:28:02  <mordred> ttx: someone said something yesterday that made me think you should be involved in something
2014-06-12T15:28:03  *** talluri has joined #openstack-infra
2014-06-12T15:28:03  <phschwartz> mordred: exactly. Even build async might be nice. That way it rechecks a started instance instead of deleting when it first sees error incase it corrects itself (yeah, I know, rax issue)
2014-06-12T15:28:05  <mordred> ttx: oh!
2014-06-12T15:28:09  <annegent_> ttx: considering the training incubation within docs program
2014-06-12T15:28:29  <fungi> anteaya: er, i meant https://review.openstack.org/#/q/reviewer:%22Brocade+CI+%253Copenstack_gerrit%2540brocade.com%253E%22,n,z
2014-06-12T15:28:43  <annegent_> mordred: you crack me up
2014-06-12T15:29:00  <mordred> ttx: https://api.launchpad.net/devel.html#specification <--- lifeless pointed out that there _is_ a blueprints API
2014-06-12T15:29:11  <mordred> ttx: I still like the 'just f-ing use storyboard' plan though
2014-06-12T15:29:27  *** timrc-afk is now known as timrc
2014-06-12T15:29:52  <mordred> phschwartz: well, the same logic would hit there -because if it hits a failure it just marks it with delete state
2014-06-12T15:30:02  <mordred> phschwartz: so we'd see the benefits there from the same patch
2014-06-12T15:30:07  *** gyee has joined #openstack-infra
2014-06-12T15:30:08  <ttx> mordred: There is one for sure. I use iot all the time. i wrote 25% of it. except it does not let you create a new spec
2014-06-12T15:30:14  <fungi> NobodyCam: only barely around--what's up?
2014-06-12T15:30:50  <ttx> mordred: tere is no createSpec method at project level
2014-06-12T15:31:05  <ttx> mordred: but if lifeless knows how to workaround that, I'll take it
2014-06-12T15:31:16  <mordred> ttx: that sounds like potentially a launchpadlib thing rather than an API thing?
2014-06-12T15:31:30  <ttx> mordred: no, the API doesn't have the method
2014-06-12T15:31:35  <mordred> ttx: still though - seriously - I'm passing it on in the name of completeness - I like the other plan better
2014-06-12T15:31:41  <anteaya> fungi: okay thanks, I don't have that account listed as a member of the third party group
2014-06-12T15:31:56  <mordred> ttx: wouldn't it just be a PUT with a spec body?
2014-06-12T15:31:58  <phschwartz> mordred: would you mind if I took this patch on along with the changes for the throttling? It would be during the week next week that I get to it as I am away this weekend.
2014-06-12T15:32:02  <NobodyCam> hey hey fungi :) I was looking at this slightly old bug, (https://bugs.launchpad.net/openstack-ci/+bug/1300208) and saw you commented on it. I'm hitting it here: http://logs.openstack.org/02/96902/13/check/check-tempest-dsvm-ironic/27f0c0a/logs/devstack-gate-setup-workspace-new.txt.gz#_2014-06-12_13_35_19_360
2014-06-12T15:32:03  <uvirtbot> Launchpad bug 1300208 in openstack-ci "ERROR: the main setup script run by this job " [Undecided,New]
2014-06-12T15:32:10  <anteaya> fungi: https://etherpad.openstack.org/p/automated-gerrit-account-naming-format line 24, 25, 26 are my Brocade accounts
2014-06-12T15:32:17  *** rfolco has quit IRC
2014-06-12T15:32:17  <mordred> phschwartz: please do!
2014-06-12T15:32:23  <NobodyCam> and wanted to check if you thought it was still valid
2014-06-12T15:32:23  <mordred> phschwartz: I'm excited about both patches
2014-06-12T15:32:27  <fungi> anteaya: it's entirely likely it was misbehaving back when we didn't have a separate non-voting group and so was simply taken out of the group and never revisited later
2014-06-12T15:32:36  <anteaya> fungi: ah okay
2014-06-12T15:32:48  <anteaya> can we wiggle that onto a todo list?
2014-06-12T15:32:54  *** thuc_ has quit IRC
2014-06-12T15:32:59  <anteaya> fungi: I think One Convergence is in the same boat
2014-06-12T15:33:08  *** doude has quit IRC
2014-06-12T15:33:27  *** thuc has joined #openstack-infra
2014-06-12T15:33:55  <ttx> mordred: that's not how you create bugs or anything else. it's far from REST
2014-06-12T15:34:02  <mordred> ttx: nod
2014-06-12T15:34:11  <anteaya> fungi: https://review.openstack.org/#/q/reviewer:oc-neutron-test%2540oneconvergence.com+status:open,n,z
2014-06-12T15:34:18  <anteaya> fungi: they aren't on my list either
2014-06-12T15:34:20  <fungi> anteaya: likely so
2014-06-12T15:34:26  <anteaya> thanks
2014-06-12T15:34:26  <fungi> NobodyCam: looking
2014-06-12T15:34:31  <ttx> mordred: but then maybe I miss something. i'll gladly accept example code that shows me how to create a blueprint in Launchpad from the API.
2014-06-12T15:34:49  <anteaya> fungi: I'm still catching up, is there something I can do of high priorty to help?
2014-06-12T15:36:19  <fungi> NobodyCam: the log line you linked to is a normal attempt by devstack-gate to discover whether there are any specific git refs calculated by zuul for a given project. git doesn't have a way to test for a remote ref without just trying to retrieve it and handling the error it returns when there isn't one to be had
2014-06-12T15:36:38  <rainya> mordred, was germany right smack dab over my birthday your idea for midcycle?!
2014-06-12T15:37:16  <fungi> rainya: bierhaus birthday blowout
2014-06-12T15:37:56  <NobodyCam> fungi: Ack TY
2014-06-12T15:38:05  *** thuc has quit IRC
2014-06-12T15:38:36  <fungi> anteaya: aside from helping me spackle and sand drywall, probably not ;)
2014-06-12T15:38:37  <rainya> fungi :) fwiw, not sure i'm going to be able to swing getting any of my team out there in person, which causes me much saddness! families for some silly reason expect us to be HOME for summer vacation
2014-06-12T15:38:49  <fungi> anteaya: looked like it's been relatively quiet in here today thankfully
2014-06-12T15:38:58  * anteaya finds safety glasses
2014-06-12T15:39:04  <anteaya> fungi: yay
2014-06-12T15:39:09  <rainya> phschwartz mentioned remote participation, so that will at least be a consolation prize for those of us that have spouses who would kill us if we changed vacation plans
2014-06-12T15:39:19  <anteaya> okay I'm catching up on email and backscroll
2014-06-12T15:39:20  <fungi> anteaya: probably just plugging at the gate job failures mostly, from an importance standpoint
2014-06-12T15:39:30  *** sarob has joined #openstack-infra
2014-06-12T15:39:31  <anteaya> fungi: do ping if I can spin any plates
2014-06-12T15:39:44  <anteaya> fungi: kk, I'll put that on my list after I am caught up
2014-06-12T15:40:33  <mordred> rainya: get less families
2014-06-12T15:40:58  <rainya> mordred, not helpful advice, but thanks
2014-06-12T15:41:03  <mordred> rainya: :)
2014-06-12T15:41:34  <rainya> mordred, was going to do NYC for my birthday this year (by myself without families!)
2014-06-12T15:41:54  *** CaptTofu_ has joined #openstack-infra
2014-06-12T15:42:44  <fungi> living at the beach, i'm going to be glad to have a week away from fighting off the hordes of summer vacationers
2014-06-12T15:42:50  *** annegent_ has quit IRC
2014-06-12T15:42:54  <devananda> fungi: hi! have a minute to talk about gate-tempest-dsvm-virtual-ironic and its now non-voting nature?
2014-06-12T15:43:04  <devananda> fungi: that is the main job that ironic uses in our own gate
2014-06-12T15:43:12  <phschwartz> fungi: Where do you live?
2014-06-12T15:43:19  <anteaya> fungi: I live in a summer vacation haven
2014-06-12T15:43:25  <phschwartz> I am near the beaches in FL and I never go to them. lol
2014-06-12T15:43:25  <anteaya> fungi: Sunday nights are the best
2014-06-12T15:43:40  <anteaya> fungi: never never go to the grocery store on the weekend
2014-06-12T15:43:48  <fungi> devananda: sure. sdague says it accesses the network a lot, which is causing it to fail over random network connectivity problems far more often than other jobs, something like 33% of the time now
2014-06-12T15:43:57  *** sarob has quit IRC
2014-06-12T15:44:25  <fungi> phschwartz: as of wednesday i'll be living in the north carolina outer banks
2014-06-12T15:44:48  <devananda> fungi: we landed https://review.openstack.org/#/c/98886/ to address that issue
2014-06-12T15:44:54  <phschwartz> Ah, very nice. At least it is a place with all 4 seasons instead of 4 versions of the same season
2014-06-12T15:45:01  <fungi> phschwartz: a sandbar miles off shore, water within a few hundred feet in either direction
2014-06-12T15:45:14  <fungi> hard to avoid the beach there
2014-06-12T15:45:18  <devananda> fungi: i think sdague is just proposing that we move the caching of u-c-a keyring into nodepool, so it isn't part of the d-g job prep
2014-06-12T15:45:29  <phschwartz> fungi: very hard. Here I at least live about 7 miles from the sand. lol
2014-06-12T15:45:32  <devananda> fungi: which i think is grand (though i'm not sure how to do that yet)
2014-06-12T15:45:51  <fungi> devananda: nodepool caches things which devstack has in its package lists
2014-06-12T15:46:13  <devananda> fungi: can nodepool prerun apt-add-repository?
2014-06-12T15:46:43  <isviridov> Hello infra, just 2 patched for magnetodb https://review.openstack.org/#/c/91050/ and https://review.openstack.org/#/c/99039/
2014-06-12T15:46:52  <fungi> devananda: the trick is that we need to un-add it too, because we don't want other tests besides ironic's subjected to uca versions of packages
2014-06-12T15:47:11  <devananda> fungi: ironic's virtual tests can't run on precise w/o backports of certain things. I can dig up the bugs if needed
2014-06-12T15:47:20  *** ramashri has joined #openstack-infra
2014-06-12T15:47:22  *** timrc is now known as timrc-afk
2014-06-12T15:47:33  <devananda> fungi: or can we pin ironic to 14.04 nodes?
2014-06-12T15:47:37  <fungi> devananda: so possibly nodepool could grow a routine to add the repository, update package lists, retrieve the keyring package, remove the repository, update package lists again
2014-06-12T15:48:00  <fungi> devananda: though i'm sure we can pin ironic to 14.04 nodes once we have some
2014-06-12T15:48:26  *** eharney_ has joined #openstack-infra
2014-06-12T15:48:53  *** eharney has quit IRC
2014-06-12T15:49:14  *** eharney_ is now known as eharney
2014-06-12T15:49:15  *** zns has joined #openstack-infra
2014-06-12T15:49:33  <ttx> devananda: you're wanted in #openstack-relmgr-office
2014-06-12T15:49:37  <fungi> devananda: another option might be a specific devstack-precise-uca node type, but that would probably be nearly as much work as getting trusty implemented
2014-06-12T15:52:19  *** mugsie has quit IRC
2014-06-12T15:52:36  <fungi> anteaya: yeah, the local wisdom seems to be dine at restaurants on weekends because vacationers are busy with check-in/check-out, and do your grocery shopping weekdays first thing in the morning or very late at night. and also if it's raining don't go to stores, restaurants, movie theaters, bowling alleys, arcades... they'll be packed like sardine cans
2014-06-12T15:52:52  <anteaya> you got it
2014-06-12T15:53:00  <anteaya> that is _exactly_ what we do
2014-06-12T15:53:16  <anteaya> and wait for October
2014-06-12T15:53:20  <anteaya> they all leave by then
2014-06-12T15:53:38  <fungi> yup
2014-06-12T15:54:07  <anteaya> I did chat with the fire chief and word got around so I don't have fireworks every week anymore
2014-06-12T15:54:13  *** gokrokve has joined #openstack-infra
2014-06-12T15:54:13  *** habib has quit IRC
2014-06-12T15:54:24  <anteaya> just on holiday weekends which is about 6 weeks out of the summer, so that is okay
2014-06-12T15:55:32  <sweston> anteaya:  ok, I responded to the ML, and I am ready to move on when you are :-)
2014-06-12T15:55:39  *** cp16net_ has joined #openstack-infra
2014-06-12T15:55:47  *** bogdando has quit IRC
2014-06-12T15:56:03  *** bogdando has joined #openstack-infra
2014-06-12T15:56:53  *** cp16net_ has quit IRC
2014-06-12T15:57:26  *** markmcclain has quit IRC
2014-06-12T15:57:43  *** markmcclain has joined #openstack-infra
2014-06-12T15:57:51  *** ihrachyshka has joined #openstack-infra
2014-06-12T15:57:59  *** markmcclain has quit IRC
2014-06-12T15:58:17  *** markmcclain has joined #openstack-infra
2014-06-12T15:58:33  *** marcoemorais has quit IRC
2014-06-12T15:59:06  <anteaya> sweston: okay so it appears that Brocade CI is not in the third-party CI gerrit group, so when fungi has a moment for housekeeping he will fix that so that it is
2014-06-12T15:59:17  <anteaya> sweston: so you actually have 4 Brocade accounts
2014-06-12T15:59:31  *** e0ne_ has quit IRC
2014-06-12T15:59:47  *** cp16net_ has joined #openstack-infra
2014-06-12T16:00:01  *** hashar has quit IRC
2014-06-12T16:00:06  *** e0ne has joined #openstack-infra
2014-06-12T16:00:11  <fungi> anteaya: added
2014-06-12T16:00:28  <fungi> anteaya: there was another you thought should be added too?
2014-06-12T16:00:29  <Shrews> fungi: hope your move goes smoothly. will suck to not have you nearby now
2014-06-12T16:00:41  <anteaya> One Convergence
2014-06-12T16:00:50  <anteaya> https://review.openstack.org/#/q/reviewer:oc-neutron-test%2540oneconvergence.com+status:open,n,z
2014-06-12T16:00:55  <openstackgerrit> Maxime Vidori proposed a change to openstack-infra/storyboard-webclient: Remove boostrap.js  https://review.openstack.org/99638
2014-06-12T16:00:55  <fungi> Shrews: not really--you'll just have to come to the beach for work-beer
2014-06-12T16:00:58  <openstackgerrit> Maxime Vidori proposed a change to openstack-infra/storyboard-webclient: Removal of jquery  https://review.openstack.org/99660
2014-06-12T16:01:05  <anteaya> fungi: they show up as a third party ci system
2014-06-12T16:01:16  <fungi> anteaya: done
2014-06-12T16:01:33  <anteaya> fungi: thank you
2014-06-12T16:02:55  *** cp16net_ has quit IRC
2014-06-12T16:03:13  *** cp16net_ has joined #openstack-infra
2014-06-12T16:03:22  <sweston> anteaya: ok, I see you updated the etherpad.
2014-06-12T16:03:30  *** mestery has quit IRC
2014-06-12T16:03:52  *** pblaho has quit IRC
2014-06-12T16:04:02  *** mestery has joined #openstack-infra
2014-06-12T16:04:16  <anteaya> yeah
2014-06-12T16:04:30  *** cp16net has quit IRC
2014-06-12T16:04:33  <anteaya> early on we didn't have the two groups voting and none voting
2014-06-12T16:04:38  *** cp16net_ is now known as cp16net
2014-06-12T16:04:42  *** e0ne has quit IRC
2014-06-12T16:04:53  <anteaya> so if a system went wild and we removed their voting rights there was no group for them
2014-06-12T16:05:06  <anteaya> we have most corralled back again
2014-06-12T16:05:19  <anteaya> since we have a non-voting group now, which is the default group
2014-06-12T16:05:29  *** pblaho has joined #openstack-infra
2014-06-12T16:07:25  *** mwagner_lap has joined #openstack-infra
2014-06-12T16:07:30  *** yfried_ has quit IRC
2014-06-12T16:07:46  *** shayneburgess has quit IRC
2014-06-12T16:08:12  <sweston> anteaya:  I understand.
2014-06-12T16:09:50  <anteaya> sweston: great thanks
2014-06-12T16:10:02  <anteaya> now that we have the emergiences addressed
2014-06-12T16:10:10  <anteaya> what can I do to help?
2014-06-12T16:10:43  *** pblaho has quit IRC
2014-06-12T16:11:17  *** yfried_ has joined #openstack-infra
2014-06-12T16:11:28  *** ociuhandu has joined #openstack-infra
2014-06-12T16:11:30  *** chuckC has quit IRC
2014-06-12T16:11:46  <sweston> anteaya:  ok, sorry trying to balance another conversation ..
2014-06-12T16:12:25  *** locke105 has joined #openstack-infra
2014-06-12T16:12:54  <devananda> fungi: I'm looking at a recent failure of gate-tempest-dsvm-virtual-ironic and wondering why it didn't seem to run the fix we landed several days ago
2014-06-12T16:12:56  *** mrodden1 has quit IRC
2014-06-12T16:12:58  <devananda> http://logs.openstack.org/14/96114/4/gate/gate-tempest-dsvm-virtual-ironic/7f8433c/console.html#_2014-06-12_06_42_32_827
2014-06-12T16:13:02  <devananda> vs https://review.openstack.org/#/c/98886/1/modules/openstack_project/files/jenkins_job_builder/config/devstack-gate.yaml
2014-06-12T16:13:19  <anteaya> sweston: I hear that
2014-06-12T16:13:21  <devananda> there's no log of running apt-get update prior to a-a-r uca
2014-06-12T16:13:22  *** chuckC has joined #openstack-infra
2014-06-12T16:13:44  <openstackgerrit> Julien Vey proposed a change to openstack-infra/config: Add solum-guestagent repo to stackforge  https://review.openstack.org/99705
2014-06-12T16:14:20  <fungi> devananda: seems to be using a devstack-precise node in hpcloud-b3. what was the url for the fix again?
2014-06-12T16:14:32  <devananda> fungi: just pasted it :)
2014-06-12T16:14:34  <fungi> devananda: i'll see if it's a stale nodepool image issue
2014-06-12T16:14:36  *** mbacchi has quit IRC
2014-06-12T16:14:43  <fungi> oh, that was it
2014-06-12T16:15:07  <devananda> fungi: if that fix isn't fixing the problem, that's one thing. but if stale nodepool is causing all the gate failures that sdague is pointing out, that's another
2014-06-12T16:15:08  <fungi> seems to have merged 2014-06-10 at 18:08
2014-06-12T16:15:34  <sdague> devananda: regardless, 65% pass rate is terrible
2014-06-12T16:15:43  <devananda> sdague: i agree
2014-06-12T16:15:45  <sdague> the ironic team has to get that up
2014-06-12T16:15:45  <fungi> devananda: and yeah, it was a job config change, so wouldn't be impacted by stale node images...
2014-06-12T16:15:51  <sdague> and has to be the people monitoring that
2014-06-12T16:16:23  <sdague> landing a gate job also incurs the respossibility of ensuring it's at a high success rate, and digging on it when it's not
2014-06-12T16:16:29  <devananda> sdague: and we are
2014-06-12T16:16:44  <devananda> sdague: our gate was completely blocked for ~10 days so we couldn't do much to even see when it would/wouldn't work
2014-06-12T16:16:53  <devananda> then nova landed the revert to unblock us
2014-06-12T16:16:57  <devananda> we landed ~15 bug fixes
2014-06-12T16:17:17  <devananda> including one that we thought addressed that very issue
2014-06-12T16:17:24  <devananda> (in infra)
2014-06-12T16:17:25  <sdague> well you also need to realize there is no more "our gate"
2014-06-12T16:17:33  <sdague> you are in the main integration gate now
2014-06-12T16:17:39  <fungi> devananda: another possibility is that jenkins02's job configuration is stale for some reason... checking that next
2014-06-12T16:17:44  <devananda> sorry -- our check queue was blocked
2014-06-12T16:17:45  *** annegent_ has joined #openstack-infra
2014-06-12T16:17:48  <sdague> so the impact goes way up
2014-06-12T16:18:02  <devananda> sdague: but you're right. that's another problem
2014-06-12T16:18:05  <sweston> anteaya:  I am finding out how to rename the Brocade CI account.
2014-06-12T16:18:12  <anteaya> sweston: you can't
2014-06-12T16:18:15  <devananda> sdague: ironic afaik shouldn't bbe in the integrated gate right now
2014-06-12T16:18:15  <anteaya> sweston: we have to
2014-06-12T16:18:28  <sweston> anteaya: yes, i mean, what to rename it to
2014-06-12T16:18:29  <anteaya> sweston: all you have to do is tell me what name you want it to be
2014-06-12T16:18:30  <sdague> yeh, this actually kind of leads back to whether or not we can take the risk on olsotest
2014-06-12T16:18:38  <anteaya> sweston: ah yes, that I do need from you
2014-06-12T16:18:42  <devananda> sdague: whether our tempest jobs vote on ironic or not shouldn't impact the integrated gate. I recognize that it does -- how can we detangle taht?
2014-06-12T16:18:45  <sdague> because I'm actually kind of concerned of the "join the world" that oslotest is causing
2014-06-12T16:18:46  <anteaya> sweston: thanks
2014-06-12T16:18:47  <sweston> anteaya:  yup yup
2014-06-12T16:18:54  <devananda> sdague: without disabling our main test's ability to vote on ironic changes
2014-06-12T16:19:05  <sdague> devananda: oslotest
2014-06-12T16:19:11  <sdague> is dhellmann about
2014-06-12T16:19:25  *** jistr has quit IRC
2014-06-12T16:19:45  <sdague> this is the problem, but the way the oslotest jobs are set up, everything that uses oslotest is now merged into one flow
2014-06-12T16:20:02  <sdague> and from a theory perspective, I get why
2014-06-12T16:20:14  <devananda> i really want to see that job continue to vote on ironic -- even failing 33% of the time -- because that forces us to clean things up. making it non-voting doesn't encourage ironic devs to fix it.
2014-06-12T16:20:15  <sdague> but from a practice perspective, I think we're kind of boned
2014-06-12T16:20:27  <sdague> devananda: it's still voting in check
2014-06-12T16:21:20  <sdague> and you have to have clean check to get to the gate
2014-06-12T16:22:05  *** Hal_ has quit IRC
2014-06-12T16:22:22  <devananda> sdague: maybe i'm missing something in how oslotest tied everything together
2014-06-12T16:22:40  <devananda> sdague: how does a job that votes on ironic's gate cause patches to /other/ projects to fail to merge?
2014-06-12T16:23:25  <fungi> devananda: yeah, so that was it... the jenkins master associated with that particular slave still has the previous version of the job config. digging now to see if/why jjb is failing to update it there
2014-06-12T16:23:25  <sdague> devananda: ok. stop using the term "ironic's gate"
2014-06-12T16:23:37  <devananda> sdague: or is the problem that the integrated gate is now serialized, so if there is an ironic change in the merge queue, and it fails, it slows things down?
2014-06-12T16:23:38  <sdague> because no project has their own gate
2014-06-12T16:23:49  *** markmcclain has quit IRC
2014-06-12T16:24:01  <sdague> gates are constructed by computing projects that have overlapping jobs
2014-06-12T16:24:18  <devananda> sorry, i'll rephrase
2014-06-12T16:24:28  <sweston> anteaya:  I am not getting a response right now, I will need to follow up with you when I have more info.
2014-06-12T16:24:36  <anteaya> sweston: very good
2014-06-12T16:24:49  <sdague> and the issue is a gate reset, because of failing in the gate, adds about 1 hr delay to redo all the jobs
2014-06-12T16:24:53  <anteaya> sweston: anything else for the moment?
2014-06-12T16:25:06  <sdague> ironic had 30 resets in the last 48 hrs in the gate queue on that one job
2014-06-12T16:25:17  <sweston> anteaya:  ok, so .. moving on.  I have Zuul reporting back to the openstack-dev sandbox now.
2014-06-12T16:25:18  <devananda> sdague: gotcha
2014-06-12T16:25:20  <sdague> which means generating 30 hrs of delay (back of the envelope)
2014-06-12T16:25:33  <sdague> that's huge
2014-06-12T16:25:38  *** mugsie has joined #openstack-infra
2014-06-12T16:25:46  <sdague> and a piece of the puzzle for why we have a 24 hour gate pipeline right now
2014-06-12T16:25:49  <sweston> anteaya:  can we verify that is happening correctly?
2014-06-12T16:25:58  <anteaya> sweston: may I have a url
2014-06-12T16:26:02  <devananda> sdague: right. now I understand.
2014-06-12T16:26:27  <devananda> sdague: no predictive parallel testing, so one failure means re-testing everything "behind" that patch
2014-06-12T16:26:39  <sdague> devananda: we are predictive
2014-06-12T16:26:55  <sdague> but it's a speculation
2014-06-12T16:27:04  <sdague> so if you fail in the gate, we have to unwind and redo our speculation
2014-06-12T16:27:06  <sweston> anteaya: yes https://review.openstack.org/#/c/99656/
2014-06-12T16:27:08  *** cgoncalves has quit IRC
2014-06-12T16:27:08  *** cgoncalves has joined #openstack-infra
2014-06-12T16:27:25  <sdague> otherwise you can land code that never was tested in that combination
2014-06-12T16:27:28  <fungi> optimistically predictive to avoid wasting even more resources on jobs than we already do
2014-06-12T16:27:58  <fungi> as opposed to pessimistically predicting several failures deep in case a change fails
2014-06-12T16:27:58  <sdague> yeh, with infinite resources you could assume things would fail and just grind
2014-06-12T16:28:03  <anteaya> sweston: okay so third-party ci systems can't post "Starting check jobs." please disable
2014-06-12T16:28:12  <anteaya> sweston: it is too much noise
2014-06-12T16:28:15  <sdague> but take the current resources and multiply
2014-06-12T16:28:18  <clarkb> o/
2014-06-12T16:28:22  <sdague> to get what you'd need for that
2014-06-12T16:28:30  <sweston> anteaya:  ok
2014-06-12T16:28:50  <anteaya> sweston: and firefox can't find your logs: http://logs.ci.vyatta.net/56/99656/1/check/noop-check-communication/288afb5738384c4ebea7dd6ecdc83722
2014-06-12T16:28:58  <clarkb> anteaya: we actually need to turn that off in our zuul too
2014-06-12T16:29:11  <sweston> anteaya: yes, I need to fix that
2014-06-12T16:29:18  *** Longgeek has quit IRC
2014-06-12T16:29:30  <anteaya> clarkb: awesome
2014-06-12T16:29:41  <anteaya> sweston: great, that is my feedback
2014-06-12T16:29:45  <clarkb> anteaya: gerrit 2.8 should fix that. I can confirm over on review-dev
2014-06-12T16:29:48  <fungi> clarkb: though in actuality now gerrit adds a comment anyway when zuul un-sets its vote, so...
2014-06-12T16:29:48  <anteaya> sweston: go forth, do great things
2014-06-12T16:29:59  <clarkb> oh
2014-06-12T16:29:59  <anteaya> clarkb: awesome, thank you
2014-06-12T16:30:07  <clarkb> silly gerrit
2014-06-12T16:30:26  <fungi> clarkb: it'll just be a comment with "patchset X: -Verify" as the only content
2014-06-12T16:30:27  <sweston> anteaya: ok, so nothing should be reported when the system starts the check job?
2014-06-12T16:30:39  <anteaya> sweston: correct
2014-06-12T16:30:57  <fungi> clarkb: at least i think that's the new vote+0 behavior
2014-06-12T16:30:57  <anteaya> sweston: with 20 systems reporting on a patch, that is too much activty for too little information
2014-06-12T16:31:20  *** mrodden has joined #openstack-infra
2014-06-12T16:31:24  <devananda> sdague: so. non-integrated projects which are now, by virtue of oslotest, in the integreated gate. that includes incubated projects, tripleo projects, etc
2014-06-12T16:31:34  <sdague> yep
2014-06-12T16:31:44  <clarkb> fungi: ya I think you are correct. I can poke at review-dev to see
2014-06-12T16:31:45  <devananda> sdague: is that going to change? or the new status quo?
2014-06-12T16:31:50  <sdague> that's some fallout that was not entirely figured out
2014-06-12T16:31:53  <clarkb> fungi: it may end up being clearer that way anyways?
2014-06-12T16:31:57  <sdague> I think we need to rethink that
2014-06-12T16:32:00  *** _nadya_ has joined #openstack-infra
2014-06-12T16:32:05  <devananda> ++
2014-06-12T16:32:09  <fungi> clarkb: it may end up being less code in zuul, at least
2014-06-12T16:32:10  <sdague> and just take the risk of oslotest breaking
2014-06-12T16:33:17  *** gokrokve has quit IRC
2014-06-12T16:33:33  <sdague> but I need dhellmann around before I propose that
2014-06-12T16:33:54  <mordred> clarkb: phschwartz and I were talking in the scrollback about a patch to nodepool to use nova rebuild in some cases
2014-06-12T16:34:04  <clarkb> mordred: what does nova rebuild do?
2014-06-12T16:34:41  <mordred> clarkb: it reuses the vm but splats the contents of the original image on it - so the end result is like having booted a new instance, but it's quicker/cheaper
2014-06-12T16:34:44  <sweston> anteaya:  gotcha.  I have a response on our earlier query, could we change Brocade CI to Brocade BNA CI, and change Brocade OSS CI to Brocade Vyatta CI
2014-06-12T16:35:05  <anteaya> yes
2014-06-12T16:35:11  <anteaya> I will make a note of those
2014-06-12T16:35:12  <sdague> mordred: when it works :)
2014-06-12T16:35:20  <mordred> clarkb: the short theory is to have the node launching logic say "I need more nodes, are there any nodes with a matching image in the DELETE state, if so, rebuild, if not, launch a new one"
2014-06-12T16:35:36  <clarkb> mordred: lifeless: also the more I think of the dib service issue the more I come back to have puppet install mysql and postgres then manually start postgres and mysql in post-install.d and add the user and db. Then once we are switched delete that code from puppet to prevent branching too hard
2014-06-12T16:35:39  <anteaya> we don't have a time yet for the naming changes to take effect yet, but when we rename those are the names they will be
2014-06-12T16:35:46  <sweston> anteaya: Yay!! And I have a new ssh key we would like associated with Brocade BNA CI, how should I post that to you?
2014-06-12T16:35:55  <mordred> clarkb: ++
2014-06-12T16:36:09  <mordred> clarkb: I swear I'm going to write you a patch in that direction
2014-06-12T16:36:13  <clarkb> ok
2014-06-12T16:36:22  <mordred> clarkb: you know, if I can get the heck out of vegas
2014-06-12T16:36:32  <clarkb> mordred: are you ready for world cup?
2014-06-12T16:36:41  <clarkb> I am hanging out at home today so that I acn watch todays game
2014-06-12T16:36:52  <mordred> sdague, clarkb: for the nodepool patch, I think we'd also want to put a flag or a counter on a node in the db so that if we have rebuild failures, we can mark it as "please don't try to rebuild me"
2014-06-12T16:37:14  <mordred> clarkb: I am - although we're going to be travelling for this game :(
2014-06-12T16:37:15  <clarkb> mordred: phschwartz sdague once a node goes into delete that means we are trying to delete it
2014-06-12T16:37:20  <mordred> clarkb: right
2014-06-12T16:37:23  <sdague> mordred: it would honestly be nice if nodepool ended image build with trying to run tempest-dsvm-full
2014-06-12T16:37:29  <sdague> to know if the think worked
2014-06-12T16:37:31  <clarkb> how do we preempt that deletion on the nova side?
2014-06-12T16:37:33  <mordred> sdague: yes. I want to get to taht point
2014-06-12T16:37:41  <anteaya> sweston: please post the ssh key to the infra email list
2014-06-12T16:37:50  <clarkb> sdague: I want to make that part of the dib cycle
2014-06-12T16:37:53  <sdague> especially with the UPDATE_REPOS=False, to know that we cached
2014-06-12T16:37:58  <mordred> clarkb: don't we mark it for delete in teh db and then have a reaper thread which goes through and does the deletes? Or am I high?
2014-06-12T16:38:00  <sdague> because, right now we don't
2014-06-12T16:38:01  <anteaya> sweston: please check the etherpad to ensure all the Brocade account names are correct
2014-06-12T16:38:05  <sdague> in a lot of the images
2014-06-12T16:38:31  <clarkb> sdague: create dib image, upload to glance as image-beta/test/derp then have a periodic job that runs once a day that only runs on that image flavor which if it passes triggers a thing to rename the image
2014-06-12T16:38:34  <anteaya> sweston: and note that the usernames will not be automatically renamed, we are going to make a list of accounts that are willing to volunteer for that
2014-06-12T16:38:41  *** openstackgerrit has quit IRC
2014-06-12T16:38:41  <clarkb> mordred: yes that is how it works
2014-06-12T16:38:52  <clarkb> mordred: so there is a race between making delete api request and rebuilding
2014-06-12T16:38:59  <sweston> anteaya:  I am going to set up mailing lists for all of the accounts, so that we can add and remove people from the list as necessary, but I do not have the server up yet.  Will that be okay?
2014-06-12T16:39:07  <phschwartz> clarkb: Correct, but if all we have to do is look for an instance that is marked as delete, but not deleted yet. (not sure if the db currently denotes if the instance has been grabbed by the delete thread and is in the process of calling the api to delete.
2014-06-12T16:39:08  <clarkb> mordred: and currently I don't think you can win that race beacuse its a fifo queue
2014-06-12T16:39:09  <mordred> clarkb: right. so once it's marked in the db, if the delete thread gets to it, great. but if it doesn't and the rebuild thread gets to it, neat
2014-06-12T16:39:16  <anteaya> sweston: since the timing of that renaming needs to be co-ordinated since once we change the name, you can't use the system until you rename your system
2014-06-12T16:39:23  <mordred> clarkb: ah - so it might need a little more logic work then
2014-06-12T16:39:27  <clarkb> yes
2014-06-12T16:39:30  *** sarob has joined #openstack-infra
2014-06-12T16:39:31  <mordred> kk.
2014-06-12T16:39:43  <mordred> phschwartz: have fun!
2014-06-12T16:39:48  <clarkb> I am sure you can make it happen, but you will haev to be careful to not mark a rebuilt node as ready again
2014-06-12T16:39:48  <anteaya> sweston: as long as I can talk to you about anything Brocade, and you can turn systems off if they go wild
2014-06-12T16:39:52  <clarkb> then have it deleted in 20 minutes
2014-06-12T16:40:00  <anteaya> sweston: you do anything you need to do from your end to make it work
2014-06-12T16:40:19  <sdague> clarkb: cool. though right now, I mostly need a working ES cluster :)
2014-06-12T16:40:29  <clarkb> sdague: yes I am booting this morning
2014-06-12T16:40:35  <sdague> woot
2014-06-12T16:40:39  <devananda> fungi: any further info on the stale image?
2014-06-12T16:40:50  <phschwartz> mordred: I think there is a way around it. If we can grab it before it is deleted, then we can change the status so the delete thread never tries to delete it. (drop it from the queue, might have to move from being a fifo for that)
2014-06-12T16:40:53  <clarkb> sdague: I think next step is to start tailing all the logs and make sense of what appears to be a cyclic process
2014-06-12T16:41:03  <sweston> anteaya: ok, awesome :-) what does that mean, then.  we won't be able to use the accounts from when to when?
2014-06-12T16:41:13  *** marcoemorais has joined #openstack-infra
2014-06-12T16:41:23  <devananda> sdague, fungi: it looks like, in the last 48 hours, only one failure in gate-tempest-dsvm-virtual-ironic was from something /other/ than UCA failing (which I think is just due to stale images at this point, since we landed a fix on 6-10)
2014-06-12T16:41:51  <clarkb> wait wasn't the fix in the job definitions not the salves?
2014-06-12T16:41:57  <sweston> anteaya: yes, I will be available 24/7 in the event of problems
2014-06-12T16:42:04  <sdague> devananda: sure, but until that's actually working and fixed, it's still a problem
2014-06-12T16:42:05  *** marcoemorais has quit IRC
2014-06-12T16:42:14  <devananda> sdague: ack
2014-06-12T16:42:15  *** dizquierdo has quit IRC
2014-06-12T16:42:23  <sdague> I don't actually care why it's failing, the fact that it's failing disqualifies that from voting
2014-06-12T16:42:23  *** marcoemorais has joined #openstack-infra
2014-06-12T16:42:57  <phschwartz> There is another benefit of getting the rebuild working also. It removes a race where one of our regions might be out of capacity and when you do the delete it hits a soft-delete while it is waiting for the resources to be released basically leaving it as an usable slot for a short period of time. If we do a rebuild instead, the slot never leaves the usage from infra so no competing for a new slot that might not be available at that time.
2014-06-12T16:43:26  <clarkb> phschwartz: yup I think it will be a good thing to try
2014-06-12T16:43:32  <anteaya> sweston: if, and only if, you volunteer to have your accounts renamed, you I and fungi pick a time for it to happen, we change gerrit, you change your 4 systems, and we are all good
2014-06-12T16:43:47  <anteaya> sweston: if you choose to do it, it should take about 15 minutes start to finish
2014-06-12T16:43:55  *** sarob has quit IRC
2014-06-12T16:44:03  <anteaya> sweston: the trick is to pick a time when fungi has the 15 minutes
2014-06-12T16:44:08  <phschwartz> clarkb: I am going to start working on it monday morning while I am flying to SAT. I want to get a WIP patch out for you guys to start looking at as soon as I can.
2014-06-12T16:44:24  *** markmcclain has joined #openstack-infra
2014-06-12T16:45:01  <clarkb> phschwartz: mordred: or even preempt the entire marking of DELETION if the current needed nodes is non zero
2014-06-12T16:45:12  <clarkb> this doesn't fix it quite so properly but may be simpler
2014-06-12T16:45:23  <anteaya> sweston: I am afk for a bit, I will let you know when I am back
2014-06-12T16:45:27  <sweston> anteaya: that sounds great.  I will let you know when we are ready to proceed with the name changes, send the new key out to the mailing list, and ping you when the log and status servers are up.
2014-06-12T16:45:36  *** zehicle_at_dell has quit IRC
2014-06-12T16:45:37  <sdague> ok, going to drop off for a bit, need to get some lunch and relocate back to home.
2014-06-12T16:45:48  <sweston> anteaya: oh ok, looks like our messages crossed paths, I'll wait :-)
2014-06-12T16:45:55  <phschwartz> clarkb: hmm, I think I have an idea based on that logic. Give me a second to think before I respond.
2014-06-12T16:47:11  *** isviridov is now known as isviridov|away
2014-06-12T16:47:22  *** rfolco has joined #openstack-infra
2014-06-12T16:47:31  *** amcrn has joined #openstack-infra
2014-06-12T16:48:42  <phschwartz> clarkb: ok, I know this would complicate the process a bit. But what if when we are done with an instance or at a time when we would mark it for deletion, we mark it for rebuild. We would need 1 more thread for the rebuilder that if it decides it cannot rebuild an instance, it would flag it for deletion. This would make it so there is no need to modify delete process at all.
2014-06-12T16:49:01  <phschwartz> The rebuild thread would put it into a state that the create thread can then use.
2014-06-12T16:49:07  *** fanhe has quit IRC
2014-06-12T16:49:55  <devananda> fungi: fwiw, all the failures seem to be from jobs started by jenkins02
2014-06-12T16:50:39  *** _nadya_ has quit IRC
2014-06-12T16:50:50  <devananda> except for one java.io.IOException from jenkins04
2014-06-12T16:51:20  *** sweston has quit IRC
2014-06-12T16:51:32  *** maxbit has quit IRC
2014-06-12T16:51:48  *** sweston has joined #openstack-infra
2014-06-12T16:52:43  *** cp16net has quit IRC
2014-06-12T16:53:07  *** chianingwang has joined #openstack-infra
2014-06-12T16:53:08  <clarkb> phschwartz: yeah you coudl slip someting in between like that
2014-06-12T16:53:20  <clarkb> phschwartz: which should make it a bit easier to reason about races as there shouldn't be any
2014-06-12T16:53:20  <rcarrillocruz> hey guys, i'm deploying review.pp in a clound instance. If I access to the server with http, I get "The requested URL / was not found on this server.", if I access it with https I get "SSL Connection error".
2014-06-12T16:53:39  <phschwartz> I am going to think more on it while I head out with the wife to get lunch.
2014-06-12T16:53:47  *** trinaths has quit IRC
2014-06-12T16:53:47  <clarkb> devananda: right I don'tthink it is a slave thing it is a master thing
2014-06-12T16:53:47  <rcarrillocruz> now, if i edit the vhost and replace the VirtualHostname <hostname>:<port> for VirtualHostname *:<port> it works
2014-06-12T16:53:59  *** mkerrin has joined #openstack-infra
2014-06-12T16:54:03  <clarkb> phschwartz: sure let me know what you come up with (I think any approach is worth doing though)
2014-06-12T16:54:06  <mordred> sdague: ++ to removing postgres, btw
2014-06-12T16:54:08  *** harlowja_away is now known as harlowja
2014-06-12T16:54:22  <clarkb> rcarrillocruz: does the name match the name you are hitting it with?
2014-06-12T16:54:33  <clarkb> rcarrillocruz: if you try to hit localhost but the vhost says review.foo it won't work
2014-06-12T16:54:35  <devananda> clarkb: how do we address it? that staleness is still causing ~30% of our tests to fail
2014-06-12T16:54:39  <phschwartz> sdague: ++ from me also, I am a certified postgres admin and developer and I can't stand using it.
2014-06-12T16:54:47  *** markwash has joined #openstack-infra
2014-06-12T16:54:56  <clarkb> devananda: fungi said he was looking at it
2014-06-12T16:55:06  <devananda> clarkb: ack
2014-06-12T16:55:07  <rcarrillocruz> what i did was to add the host name in my laptop /etc/hosts and in the cloud instance itself
2014-06-12T16:55:19  <devananda> just trying to be helpful
2014-06-12T16:55:24  <rcarrillocruz> <external ip> gerrit.openstacklocal
2014-06-12T16:55:28  <clarkb> devananda: ya I think we need to hear back from fungi
2014-06-12T16:55:37  <clarkb> devananda: it *should* be as simple as kicking JJB to apply the new job
2014-06-12T16:55:52  <clarkb> rcarrillocruz: and gerrit.openstacklocal is what the vhost said before the splat?
2014-06-12T16:56:28  <rcarrillocruz> lemme paste the vhost in paste.openstack.org
2014-06-12T16:56:52  <mordred> sdague, jogo: I know I'm a broken record on this ... but ^^ is the dumbest default behavior ever. I blame both of you because of the nova-core status
2014-06-12T16:57:24  <mordred> Kiall: you're going to fix that with designate, right?
2014-06-12T16:58:01  *** zehicle_at_dell has joined #openstack-infra
2014-06-12T16:58:44  *** skraynev has quit IRC
2014-06-12T16:58:53  <rcarrillocruz> clarkb: http://paste.openstack.org/show/83844/
2014-06-12T16:58:58  *** jcoufal has joined #openstack-infra
2014-06-12T16:59:01  *** skraynev has joined #openstack-infra
2014-06-12T16:59:21  <rcarrillocruz> and put in both laptop/gerrit server the pair <external IP> gerrit.openstacklocal gerrit under /etc/hosts
2014-06-12T16:59:37  <rcarrillocruz> so it shouldn't resolve to localhost
2014-06-12T16:59:50  *** sarob has joined #openstack-infra
2014-06-12T17:00:09  *** rwsu has joined #openstack-infra
2014-06-12T17:00:22  *** radez is now known as radez_g0n3
2014-06-12T17:00:57  *** bogdando has quit IRC
2014-06-12T17:01:56  *** jlibosva has quit IRC
2014-06-12T17:02:04  *** marcoemorais has quit IRC
2014-06-12T17:02:25  <devananda> clarkb: in response to sdague's email, how do you feel about nodepool precaching UCA? I have yet to look into the nodepool code, but it sounds like he doesn't want to re-enable voting on that job until it no longer pulls anything directly from UCA
2014-06-12T17:02:36  *** jlibosva has joined #openstack-infra
2014-06-12T17:02:53  <mordred> why don't we just have UCA enabled from the get-go again?
2014-06-12T17:03:32  <Kiall> mordred: was AFK.. What am I fixing? ;)
2014-06-12T17:03:59  <mordred> Kiall: nova boot foo.bar.com ; ssh foo.bar.com ; hostname == foo.openstacklocal
2014-06-12T17:04:31  <Kiall> Yea - We had a chat with Nova/Neutron guys at the summit to talk about fixing that ;)
2014-06-12T17:04:36  <mordred> Kiall: I generally assume you can solve all of my problems
2014-06-12T17:04:56  <clarkb> mordred: devananda UCA doesn't work
2014-06-12T17:04:56  *** zns_ has joined #openstack-infra
2014-06-12T17:05:02  <clarkb> or hadn't
2014-06-12T17:05:06  <mordred> oh. well, that's a good reason
2014-06-12T17:05:08  <clarkb> which is why we avoided it
2014-06-12T17:05:08  <Kiall> mordred: funny that, I thought I caused more problems that I fixed ;)
2014-06-12T17:05:19  <clarkb> libvirt was broken
2014-06-12T17:05:23  <clarkb> mongo was broken
2014-06-12T17:05:24  <devananda> clarkb: https://review.openstack.org/#/c/98886/1
2014-06-12T17:05:33  *** dprince has quit IRC
2014-06-12T17:05:44  <clarkb> devananda: right so in that case its just you that are affected
2014-06-12T17:05:51  <mordred> devananda: I believe he means "the software in UCA is broken"
2014-06-12T17:05:58  *** ramashri has quit IRC
2014-06-12T17:05:59  <devananda> mordred: ah
2014-06-12T17:05:59  <mordred> not the mechanism
2014-06-12T17:06:08  <devananda> so in this case, the issue sdague has is the mechanism
2014-06-12T17:06:10  *** andreykurilin_ has joined #openstack-infra
2014-06-12T17:06:19  <devananda> that we're installing UCA at run time, instead of precaching it
2014-06-12T17:06:40  *** nati_ueno has joined #openstack-infra
2014-06-12T17:06:41  <clarkb> sdague: so it looks like some of our logstash-indexers are off derping
2014-06-12T17:06:45  <mordred> yah. hrm. I wonder ...
2014-06-12T17:06:47  *** ramashri has joined #openstack-infra
2014-06-12T17:06:49  <mordred> devananda: I have an idea
2014-06-12T17:06:58  <devananda> mordred: ironic's tempest job is now non-voting
2014-06-12T17:07:00  <clarkb> sdague: I am going to sweep through and see if I can figure out what they are doing but I think the issue is at the logstash indexer level
2014-06-12T17:07:12  <mordred> devananda: we do the normal apt precaching that we do
2014-06-12T17:07:12  <devananda> mordred: because, essentially, intalling UCA fails too often
2014-06-12T17:07:26  <clarkb> sdague: so adding new ones helped until they derped too
2014-06-12T17:07:29  *** zns has quit IRC
2014-06-12T17:07:30  <mordred> devananda: then we a-a-r uca and do another round of apt precaching ...
2014-06-12T17:07:40  <mordred> devananda: THEN, remove the sources.list.d file
2014-06-12T17:08:07  <mordred> so that "enabling" uca is not running a-a-r, it's adding the sources.list.d file back, and then any additional packages you'd get from uca would also be pre-cached
2014-06-12T17:08:12  <mordred> clarkb: ^^ sanity check me on that
2014-06-12T17:08:42  <mordred> I think that would allow us the mechanism to pre-cache/pre-download the things we need without polluting the box for non-uca runs
2014-06-12T17:09:00  <mordred> we could even add uca without a-a-r at all
2014-06-12T17:09:18  <mordred> after all, it's just a sources.list.d file and an apt-key command
2014-06-12T17:09:40  <clarkb> mordred: thta should work
2014-06-12T17:09:44  *** zns_ has quit IRC
2014-06-12T17:10:04  <mordred> we could potentially generalize is - so that the UCA repo is referenced somewhere in devstack as a repo that might get enabled
2014-06-12T17:10:12  *** marcoemorais has joined #openstack-infra
2014-06-12T17:10:18  *** zehicle_at_dell is now known as zehicle_defcore
2014-06-12T17:10:21  <mordred> and we could have a generalized thing in d-g that pre-caches stuff with any additional repos that devstack lists
2014-06-12T17:10:22  *** zns has joined #openstack-infra
2014-06-12T17:10:44  <mordred> but that would be step two and may never be needed
2014-06-12T17:11:19  <clarkb> wow dnsmasq hates us in syslo
2014-06-12T17:11:27  <devananda> mordred: so, side note, since https://review.openstack.org/#/c/98886/1/modules/openstack_project/files/jenkins_job_builder/config/devstack-gate.yaml landed
2014-06-12T17:11:28  *** james_li has quit IRC
2014-06-12T17:11:36  <devananda> mordred: i haven't seen any more of those failures
2014-06-12T17:11:45  <devananda> mordred: except for the possibly-stale nodes that fungi is looking into
2014-06-12T17:12:10  *** zzelle has joined #openstack-infra
2014-06-12T17:12:12  <mordred> devananda: yah - but we do have a hole where we'll be downloading from the internet rather than from pre-cache
2014-06-12T17:12:19  <devananda> mordred: but in principle, I dont see why this really fixes it
2014-06-12T17:12:21  <devananda> exactly
2014-06-12T17:12:28  <mordred> devananda: and we've developed pretty good history to know that that WILL break
2014-06-12T17:12:31  <mordred> it's just a matter of time
2014-06-12T17:12:36  <devananda> right
2014-06-12T17:12:42  <mordred> so the longer version above should fix it the _right_ way
2014-06-12T17:14:22  *** markmc has quit IRC
2014-06-12T17:14:55  *** derekh_ has quit IRC
2014-06-12T17:15:01  *** trinaths has joined #openstack-infra
2014-06-12T17:17:08  *** annegent_ has quit IRC
2014-06-12T17:17:35  <fungi> devananda: not so much stale nodes and jenkins masters not getting job configs updated
2014-06-12T17:17:39  *** Ryan_Lane has joined #openstack-infra
2014-06-12T17:17:58  <fungi> gah, step away for a few minutes and so many pings
2014-06-12T17:19:08  <fungi> devananda: i started the jjb update on jenkins02 before i stepped away, but it's still churning
2014-06-12T17:19:21  <fungi> seems to think it needs to reconfigure lots and lots of jobs
2014-06-12T17:19:26  *** trinaths has quit IRC
2014-06-12T17:19:28  *** cp16net has joined #openstack-infra
2014-06-12T17:19:44  <fungi> it's creating a bunch it was missing too
2014-06-12T17:20:01  <devananda> fungi: ack
2014-06-12T17:21:45  <devananda> mordred: so i haven't dug into the nodepool precaching code before. a) do you think step1 is needed before gate-tempest-dsvm-virtual-ironic can vote again? b) if so, mind pointing me in the right direction to get started on that?
2014-06-12T17:22:12  *** gokrokve has joined #openstack-infra
2014-06-12T17:23:41  *** jlibosva has quit IRC
2014-06-12T17:23:49  *** esker has joined #openstack-infra
2014-06-12T17:23:57  <mordred> devananda: ./modules/openstack_project/files/nodepool/scripts/cache_devstack.py in openstack-infra/config does it
2014-06-12T17:23:57  *** gyee has quit IRC
2014-06-12T17:24:13  <mordred> devananda: since we collect the list of apt packages
2014-06-12T17:24:27  *** cp16net has quit IRC
2014-06-12T17:24:45  <mordred> devananda: I think we may just want to put in something around line 142
2014-06-12T17:24:52  <devananda> off topic, ironic has a patch up to make the ipmi driver fail to load if ipmitool isn't installed, which seems like a sane thing
2014-06-12T17:25:01  *** dprince has joined #openstack-infra
2014-06-12T17:25:13  <devananda> but that made me realize taht we're not installing ipmitool in nodepool
2014-06-12T17:25:14  <clarkb> sdague: :timestamp=>"2014-06-12T17:22:26.537000+0000", :message=>"Failed to flush outgoing items", :outgoing_count=>512, :exception=>java.lang.OutOfMemoryError: Java heap space, may be our culprit
2014-06-12T17:25:16  <mordred> devananda: hrm. I may need to think about a sane way to implement the above stuff
2014-06-12T17:25:17  *** markmcclain has quit IRC
2014-06-12T17:25:35  <devananda> also, we're not doing CI with ipmitool anyway
2014-06-12T17:25:39  <mordred> devananda: that would be a devstack thing. you'd need to add ipmitool to an apts file in devstack
2014-06-12T17:25:55  <mordred> devananda: and then nodepool will know to pre-cache it
2014-06-12T17:26:03  <devananda> so a) we add ipmitool to devstack/xx/apts or b) we dont enable the ipmitool driver in devstack, since it's not used in CI testing
2014-06-12T17:26:05  <mordred> devananda: but devstack's ironic config would want to be the one to actually install it
2014-06-12T17:26:13  <devananda> mordred: right. but we're not actually going to use it for upstream CI
2014-06-12T17:26:27  <mordred> devananda: nod
2014-06-12T17:26:50  <mordred> devananda: I could see either thing ... devstack _is_ used for more than the gate
2014-06-12T17:26:55  <devananda> which do ya'll prefer? a) saner devstack config for folks testing, but an extra (unused) package
2014-06-12T17:26:58  <devananda> right
2014-06-12T17:27:12  <mordred> devananda: so if you expect someone using devstack to be able to configure ironic and then have that cloud control things with ipmi ... then I'd go ahead and add it
2014-06-12T17:27:18  <mordred> and the fact that we don't use it in the testing is meh
2014-06-12T17:27:44  <devananda> ack, will do that then
2014-06-12T17:27:56  <devananda> since it is the recommended / default / reference driver that most folks test with
2014-06-12T17:27:59  <mordred> ++
2014-06-12T17:28:08  <clarkb> sdague: but this makes me want to use fluentd more
2014-06-12T17:28:17  *** MarkAtwood has joined #openstack-infra
2014-06-12T17:28:30  <clarkb> mordred: ^
2014-06-12T17:28:37  <mordred> devananda: if you can figure out a sensible way to implement the stuff above in cache_devstack.py go for it - if not, poke me when I get back home and I'll figure it out
2014-06-12T17:28:47  <mordred> clarkb: I support your choices in this area 100%
2014-06-12T17:28:56  <mordred> clarkb: if fluentd would be a better choice, then awesome
2014-06-12T17:29:11  *** maxbit has joined #openstack-infra
2014-06-12T17:29:39  <clarkb> mordred: well it isn't a better choice until we have structured data. but definitelysomething we can work towards
2014-06-12T17:29:48  *** ihrachyshka has quit IRC
2014-06-12T17:30:10  *** arnaud__ has joined #openstack-infra
2014-06-12T17:30:10  <mordred> clarkb: it's the same choice essentially while we dont' though right?
2014-06-12T17:30:27  <mordred> clarkb: so would we be doing a fluentd+elasticsearch cluster intead of a logstash+elasticsearch cluster?
2014-06-12T17:30:46  *** rwsu has quit IRC
2014-06-12T17:31:05  <clarkb> ya
2014-06-12T17:31:11  <mordred> cool
2014-06-12T17:31:12  *** praneshp has joined #openstack-infra
2014-06-12T17:31:20  <anteaya> sweston: back, send the key to the infra ml list anytime use both the new and old Full Name for the account
2014-06-12T17:31:22  <clarkb> mordred: fluentd doesn't really do parsing of unstructured data
2014-06-12T17:31:34  <clarkb> mordred: so it is supposed to be able to do much better throughput
2014-06-12T17:31:38  <clarkb> mordred: but you have to start with good data
2014-06-12T17:31:50  <anteaya> sweston: I'll let you know when we are ready to change the Full Name of the account, we can address changing the username after that
2014-06-12T17:31:52  <mordred> clarkb: so what do we do until we have structured data?
2014-06-12T17:32:00  *** rwsu has joined #openstack-infra
2014-06-12T17:32:00  <clarkb> mordred: limp along on logstash
2014-06-12T17:32:04  <mordred> ah - gotcha
2014-06-12T17:32:11  <anteaya> sweston: and yes, let me know when you have something new for me to see in the sandbox repo comments
2014-06-12T17:32:18  <mordred> so we need to get the ability to have structured data, then spin up fluentd?
2014-06-12T17:32:18  <zaro> morning
2014-06-12T17:32:23  <mordred> or spin them up side by side?
2014-06-12T17:32:53  *** ihrachyshka has joined #openstack-infra
2014-06-12T17:33:20  <sweston> anteaya: awesome! Thank you so much for your time today.
2014-06-12T17:33:25  *** markmcclain has joined #openstack-infra
2014-06-12T17:33:30  *** markmcclain has quit IRC
2014-06-12T17:33:31  <anteaya> sweston: np
2014-06-12T17:33:47  <anteaya> sweston: thanks for being the Brocade point person, saves me time
2014-06-12T17:34:04  <fungi> mordred: devananda: i think the hard part about caching this in nodepool is going to be that the packages ironic's job needs cached are in ubuntu cloud archive, which means we need to enable it, update package lists, then retrieve the package versions it needs into the cache, then disable it, then update the package index again
2014-06-12T17:34:18  <sweston> anteaya: you bet.  always glad to do what I can to ease the burden for others :-D
2014-06-12T17:34:19  *** marcoemorais1 has joined #openstack-infra
2014-06-12T17:34:21  <mordred> fungi: yes. that is what I wrote above
2014-06-12T17:34:26  <fungi> mordred: devananda: and so the ironic job is still going to have to re-enable uca and re-update the package list
2014-06-12T17:34:26  <clarkb> mordred: I think we focus on structured data first
2014-06-12T17:34:27  <mordred> fungi: although you summarized is very nicely
2014-06-12T17:34:33  *** marcoemorais1 has quit IRC
2014-06-12T17:34:41  <clarkb> mordred: as that is project side and will be potentially problematic
2014-06-12T17:34:49  <mordred> clarkb: ++
2014-06-12T17:34:51  <clarkb> mordred: though if we make oslo.config import python json logging that may be all we need
2014-06-12T17:34:53  *** marcoemorais has quit IRC
2014-06-12T17:34:56  <clarkb> mordred: then we can config it to do json
2014-06-12T17:35:04  *** marcoemorais has joined #openstack-infra
2014-06-12T17:35:13  <mordred> fungi: but it should still get us much further in that they would not be pulling packages from the internets
2014-06-12T17:35:17  *** markmcclain has joined #openstack-infra
2014-06-12T17:35:34  *** ihrachyshka has quit IRC
2014-06-12T17:35:41  *** SumitNaiksatam has left #openstack-infra
2014-06-12T17:35:55  <fungi> mordred: true. also it *might* be possible (though sorta hacky) to save and pivor between package lists
2014-06-12T17:36:03  <fungi> s/pivor/pivot/
2014-06-12T17:36:28  *** SumitNaiksatam has joined #openstack-infra
2014-06-12T17:36:41  <dhellmann> clarkb: I'm probably missing some context, but there's a json logger in the oslo log code
2014-06-12T17:36:47  <clarkb> dhellmann: oh cool
2014-06-12T17:36:56  <fungi> rsync /var/cache/apt to a /var/cache/apt.ironic or something and swap back and forth during image creation and within the jobs
2014-06-12T17:37:00  <clarkb> dhellmann: I didn't know so apparently we would just have to flip a switch to make that work
2014-06-12T17:37:14  <clarkb> dhellmann: we are finding that doing post processing of log data to make it structured is expensive and we shouldn't do it
2014-06-12T17:37:22  <clarkb> dhellmann: so starting with json is where we want to go
2014-06-12T17:37:32  <dhellmann> clarkb: https://review.openstack.org/#/c/95929/
2014-06-12T17:37:52  <fungi> also possible we could play tricks with apt pinning and just have a very low preference on the uca repos, then ironic specifically requests the version/suite it needs for a given dependency
2014-06-12T17:38:02  <dhellmann> clarkb: that makes complete sense, and we may want to make that logger smarter after we move it to oslo.log
2014-06-12T17:38:12  <clarkb> dhellmann: awesome that is great news
2014-06-12T17:38:30  <mordred> woot!
2014-06-12T17:38:32  <clarkb> dhellmann: do you know if json logging is available in say nova today?
2014-06-12T17:38:37  <clarkb> dhellmann: or any of the projects?
2014-06-12T17:38:53  <clarkb> dhellmann: if not I can work on syncing logging
2014-06-12T17:38:54  <dhellmann> clarkb: the class is there, I don't know if anyone uses it
2014-06-12T17:39:00  *** lbragstad has quit IRC
2014-06-12T17:39:15  <clarkb> dhellmann: mordred: ok I will do some digging and see if I can get a d-g run to spit out json logs
2014-06-12T17:39:17  <devananda> fungi, mordred: so that discussion has indeed gone past my ability to track it // rapidly implement any of the things you're suggesting :(
2014-06-12T17:39:18  <dhellmann> that is, the class is in the incubated version of log.py, but I don't know if nova is up to date and I don't know if any nova users have turned that on
2014-06-12T17:39:22  <anteaya> sweston: :D
2014-06-12T17:39:23  <mordred> clarkb: it's your next project to get you ATC status in all the projects :)
2014-06-12T17:39:28  <clarkb> mordred: :)
2014-06-12T17:39:41  <clarkb> dhellmann: ah ok I may end up trying to do syncs if necessary but this is great news thanks
2014-06-12T17:39:50  <mordred> dhellmann: we're very excited by this
2014-06-12T17:39:56  <clarkb> mordred: fungi: sdague: in the interim we can try going to 8GB perf nodes for logstash workers
2014-06-12T17:40:04  *** mrmartin has joined #openstack-infra
2014-06-12T17:40:04  <clarkb> then double the jvm heap space for logstash
2014-06-12T17:40:14  <mordred> clarkb: gross
2014-06-12T17:40:16  <dhellmann> clarkb, mordred : I would love to have some feedback about how useful that class actually is and how to make it better
2014-06-12T17:40:24  <clarkb> dhellmann: noted. will try to provide it
2014-06-12T17:40:33  <dhellmann> sdague: you had something about oslotest and gating you wanted to talk about?
2014-06-12T17:40:37  <dhellmann> clarkb: thanks!
2014-06-12T17:42:27  *** chmartinez has joined #openstack-infra
2014-06-12T17:43:08  <chmartinez> hello! Sorry to bother. Could someone tell me what's going on with the gate jobs of this review: https://review.openstack.org/#/c/96582/?
2014-06-12T17:43:14  <zaro> clarkb: is there some secret to allow logging in from one hpcloud vm to another?  i can't seem to get passwordless ssh connection.
2014-06-12T17:43:25  *** sweston has quit IRC
2014-06-12T17:43:42  <chmartinez> at zuul, the gate is marked with red :|
2014-06-12T17:43:45  <zaro> clarkb: actually i can't seem to do any type of connection.
2014-06-12T17:43:49  <clarkb> zaro: you have to forwad your ssh agent but generally shouldnt
2014-06-12T17:44:02  *** esker has quit IRC
2014-06-12T17:44:23  *** ramashri has quit IRC
2014-06-12T17:44:25  *** ArxCruz has quit IRC
2014-06-12T17:44:40  <zaro> clarkb: forget ssh, just simple login from one vm to another.  does that work for you?
2014-06-12T17:45:42  <fungi> mordred: possibly something to keep on your radar, this is why we're presently not publishing wheels for data-only projects https://bitbucket.org/pypa/wheel/issue/116 i've put up a pull request, but you've probably dug a lot deeper into that code than i have so input would be welcome
2014-06-12T17:46:00  <clarkb> zaro: oh you mean any communication? check your security groups
2014-06-12T17:46:12  <clarkb> zaro: I ended up going the infra route and opened my security groups whide open
2014-06-12T17:46:16  <clarkb> then mange local firewalls
2014-06-12T17:47:08  *** afazekas has quit IRC
2014-06-12T17:47:19  <zaro> clarkb: you mean open all ports?
2014-06-12T17:47:50  *** mbacchi has joined #openstack-infra
2014-06-12T17:48:12  <clarkb> zaro: ya thats what I did
2014-06-12T17:48:31  <clarkb> zaro: you really don't need to but I got sick of dealing with it at that level
2014-06-12T17:48:37  <clarkb> much easier to modify iptables on a host
2014-06-12T17:49:01  <clarkb> mordred: ^ is that maybe feedback we should give to openstack as a whole?
2014-06-12T17:49:05  *** lbragstad has joined #openstack-infra
2014-06-12T17:51:16  *** ramashri has joined #openstack-infra
2014-06-12T17:52:04  *** talluri has quit IRC
2014-06-12T17:56:34  <clarkb> Kiall: if you are around did you get sorted on the unbound thing?
2014-06-12T17:57:14  <clarkb> I see there is a change
2014-06-12T17:57:25  <mrmartin> fungi: hi, if you have some time, may I ask a review for this path: https://review.openstack.org/#/c/99481/ it is a larger refactoring code for community portal instance to provide better deployment / update path and is required for deploy some features there
2014-06-12T17:58:21  <fungi> mrmartin: i probably won't have time this week or next. i'm fairly busy packing and moving
2014-06-12T17:58:29  <mrmartin> ok, no prob.
2014-06-12T17:58:46  <fungi> mrmartin: but hopefully some of our other reviewers will have a look in the meantime
2014-06-12T17:59:03  <clarkb> Kiall: fungi pretty sure that chaneg will break everything
2014-06-12T17:59:23  <Kiall> clarkb: Code Review in action :D
2014-06-12T17:59:24  <Kiall> why?
2014-06-12T17:59:33  <clarkb> it doesn't put unbound on 127.0.2.1 for long lived servers but updates resolv.conf
2014-06-12T17:59:34  <zaro> clarkb: opened all ports but still cannot connect.  you should be able to ssh connect from VM A to VM B with ubuntu account right?
2014-06-12T17:59:50  <clarkb> Kiall: so we will end up in a situation where nothing resolves on review.openstack.org for example
2014-06-12T18:00:05  <clarkb> zaro: yes
2014-06-12T18:00:17  *** dangers_away is now known as dangers
2014-06-12T18:00:18  <zaro> argg!
2014-06-12T18:00:21  <clarkb> Kiall: fungi: I am much more comfortable with the services being tested being treated special
2014-06-12T18:00:28  <clarkb> Kiall: fungi: especialyl for a service like DNS
2014-06-12T18:00:41  <Kiall> Oh - I thought unbound just went on the single use slaves?
2014-06-12T18:00:52  <fungi> Kiall: no, it's on all our servers
2014-06-12T18:00:52  *** jerryz has joined #openstack-infra
2014-06-12T18:01:22  <fungi> and yeah, i missed that we didn't factor out the unbound configuration for the nodepool nodes separately from everythign else
2014-06-12T18:01:50  *** markmcclain has quit IRC
2014-06-12T18:01:58  *** markmcclain has joined #openstack-infra
2014-06-12T18:02:04  <chmartinez> hello! Sorry to bother. Could someone tell me what's going on with the gate jobs of this review: https://review.openstack.org/#/c/96582/?
2014-06-12T18:02:09  *** markmcclain has quit IRC
2014-06-12T18:02:21  <zaro> clarkb: do i need to do anything to make that happen? keep getting permission denied (public key).
2014-06-12T18:02:47  <Kiall> fungi: Okay, I can rework it to listen only 127.0.0.1:53, rather than *:53, and at least we can work around that easily in devstack
2014-06-12T18:02:48  <clarkb> sdague: well I kicked things to deal with the unhappy OOMers and now thinsg appear to be worse
2014-06-12T18:02:54  <clarkb> sdague: maybe the OOMing is self regulating :/
2014-06-12T18:03:03  <clarkb> zaro: yes you ahve to forward your key
2014-06-12T18:03:17  <clarkb> zaro: but you shouldn't do that
2014-06-12T18:03:29  *** zul has quit IRC
2014-06-12T18:03:30  *** pelix has quit IRC
2014-06-12T18:03:37  <fungi> chmartinez: it was approved at 02:17 utc, check tests were rerun on it, then it was enqueued into the gate at 03:55 utc and is waiting for its turn
2014-06-12T18:03:49  *** zul has joined #openstack-infra
2014-06-12T18:03:53  <clarkb> Kiall: does it listen on *:53 by default?
2014-06-12T18:03:57  <Kiall> yep
2014-06-12T18:03:58  * clarkb looks
2014-06-12T18:04:18  <fungi> chmartinez: you can find its current status by searching for the change number on http://status.openstack.org/zuul/
2014-06-12T18:04:42  <clarkb> Kiall: netstat says it doesn't
2014-06-12T18:04:59  <Kiall> humm - can you paste the output?
2014-06-12T18:05:00  <clarkb> Kiall: 127.0.0.1:53 and ::1:53 for tcp and udp
2014-06-12T18:05:16  <zaro> clarkb: i should still be able to login without forwarding key right?  just type in password?  but ssh doesn't even ask me for the password.
2014-06-12T18:05:19  <clarkb> tcp        0      0 127.0.0.1:53            0.0.0.0:*               LISTEN
2014-06-12T18:05:20  *** markmcclain has joined #openstack-infra
2014-06-12T18:05:29  <clarkb> udp        0      0 127.0.0.1:53            0.0.0.0:*
2014-06-12T18:05:40  <clarkb> zaro: password auth is probably disabled
2014-06-12T18:05:41  <chmartinez> fungi: yes, I check that  and I'm seeing this: openstack/ceilometer unknown 14 hr 10 min
2014-06-12T18:05:46  <clarkb> bceause you shouldn't password auth either
2014-06-12T18:05:51  <Kiall> Humm - The documentation suggested it was 0.0.0.0:53, If that's the case, we should be able to work around it
2014-06-12T18:05:54  *** praneshp_ has joined #openstack-infra
2014-06-12T18:06:14  <sdague> clarkb: bummer
2014-06-12T18:06:37  <chmartinez> fungi: it's being enqueued for 14hs.. Is that normal? (sorry to ask, I'm new at this)
2014-06-12T18:06:45  <fungi> chmartinez: correct, it's presently taking changes ~24 hours to get to the top of the gate given the current rate of random test failures
2014-06-12T18:06:53  *** praneshp has quit IRC
2014-06-12T18:06:53  *** praneshp_ is now known as praneshp
2014-06-12T18:06:57  <clarkb> sdague: I mean in theory peple have hundreds of ndoes in these clusters
2014-06-12T18:07:03  <clarkb> sdague: but maybe they have real hardware
2014-06-12T18:07:41  <chmartinez> fungi: OK. Good to know :) Thanks!!
2014-06-12T18:08:22  <fungi> chmartinez: the known bugs impeding testing are tracked at http://status.openstack.org/elastic-recheck/ if you're interested
2014-06-12T18:08:52  <clarkb> sdague: oh! kicking things seems to be writing to slightly older indexes. This may be related
2014-06-12T18:09:50  <sdague> clarkb: yeh, I wonder if we could hit up some provider for real hardware, for this one use case
2014-06-12T18:10:30  <mtreinish> fungi, clarkb: is there an issue with gerritbot? I just pushed a patch and didn't see an irc msg
2014-06-12T18:10:30  <sdague> dhellmann: you still around?
2014-06-12T18:11:10  *** tkelsey has quit IRC
2014-06-12T18:11:47  <fungi> mtreinish: openstackgerrit left earlier today on a netsplit and never rejoined. i'll give it a nudge
2014-06-12T18:12:12  <clarkb> sdague: at this point I am curious to see if it reregulates on its own
2014-06-12T18:12:17  *** ildikov has quit IRC
2014-06-12T18:12:19  <clarkb> sdague: because that may be an indication of what is happening
2014-06-12T18:12:41  <clarkb> sdague: so I think we have a few issues that we can definitely work on addressing.
2014-06-12T18:12:46  <sdague> ok
2014-06-12T18:12:48  <clarkb> the OOMing in jvm. the disk space situation
2014-06-12T18:13:02  <clarkb> but even when they are happy the whole thing seems to be :?
2014-06-12T18:13:05  <clarkb> er :/
2014-06-12T18:13:34  <mtreinish> fungi: ok, np. I just was curious
2014-06-12T18:13:51  *** openstackgerrit has joined #openstack-infra
2014-06-12T18:15:49  <chmartinez> fungi: OK!
2014-06-12T18:17:03  <fungi> mtreinish: openstackgerrit is back now, btw
2014-06-12T18:17:21  <mtreinish> fungi: cool
2014-06-12T18:17:25  <sdague> fungi: next time we get a promote window - https://review.openstack.org/#/c/99412/
2014-06-12T18:17:27  <zaro> clarkb: password auth was disabled.  turn it on and i'm finally able to connect.  thanks.  that's what i'm gonna use unless you can tell me a better way.  just needed the connection to test jenkins.
2014-06-12T18:17:29  <sdague> I added it to the etherpad
2014-06-12T18:17:38  <sdague> I think a chunk of grenade failures are actually that
2014-06-12T18:17:42  <clarkb> zaro: use keys
2014-06-12T18:17:44  <sdague> but hidden in a buffering issue
2014-06-12T18:17:45  *** jcoufal has quit IRC
2014-06-12T18:17:54  *** rfolco has quit IRC
2014-06-12T18:18:07  <zaro> clarkb: yeah ok.  i'll try that next.
2014-06-12T18:18:07  <clarkb> zaro: just don't use your key
2014-06-12T18:18:13  <clarkb> create ones specifically for that
2014-06-12T18:18:30  <zaro> yeah, i got that at least  :)
2014-06-12T18:19:49  <lifeless> yolanda: thats not a dib issue
2014-06-12T18:19:52  *** james_li has joined #openstack-infra
2014-06-12T18:20:11  *** cp16net has joined #openstack-infra
2014-06-12T18:20:11  <lifeless> yolanda: that path is a nova instance path, no?
2014-06-12T18:20:57  <lifeless> ttx: let me look
2014-06-12T18:21:31  *** e0ne has joined #openstack-infra
2014-06-12T18:21:40  <lifeless> clarkb: sounds reasonable
2014-06-12T18:22:31  <lifeless> yolanda: oh, I think perhaps thats what the nova folk from the cloud you're testing with are reporting? I'd like to know what version of qemu they have
2014-06-12T18:22:35  *** markwash_ has joined #openstack-infra
2014-06-12T18:22:47  <lifeless> yolanda: and what version you're building with - we don't use any exotic options
2014-06-12T18:23:18  <lifeless> yolanda: my guess - latest ubuntu (you're running utopic?) has a default that LTS can't handle, or some suc
2014-06-12T18:23:28  *** zns has quit IRC
2014-06-12T18:23:28  *** ominakov has quit IRC
2014-06-12T18:23:42  *** sweston has joined #openstack-infra
2014-06-12T18:24:08  *** timrc-afk is now known as timrc
2014-06-12T18:24:40  *** cp16net has quit IRC
2014-06-12T18:25:42  *** markwash has quit IRC
2014-06-12T18:25:42  *** markwash_ is now known as markwash
2014-06-12T18:27:23  *** YorikSar has joined #openstack-infra
2014-06-12T18:29:26  <ttx> lifeless: AFAICT bugs are created with bugs.createBug(), releases with milestone.createRelease()... but there is nothing like createSpec() or createBlueprint()
2014-06-12T18:29:47  *** cp16net has joined #openstack-infra
2014-06-12T18:30:50  *** zns has joined #openstack-infra
2014-06-12T18:31:06  *** markmcclain has quit IRC
2014-06-12T18:31:12  *** markmcclain has joined #openstack-infra
2014-06-12T18:31:53  <openstackgerrit> Nikhil Manchanda proposed a change to openstack-infra/config: Added new experimental job for trove functional tests  https://review.openstack.org/98517
2014-06-12T18:31:54  <openstackgerrit> Nikhil Manchanda proposed a change to openstack-infra/config: Use job-template for gate-trove-buildimage jobs  https://review.openstack.org/99680
2014-06-12T18:33:01  <clarkb> sdague: we are hitting iowait
2014-06-12T18:33:04  <clarkb> I think
2014-06-12T18:33:29  <sdague> what's the storage backends for these?
2014-06-12T18:33:38  <sdague> local ephemeral disks?
2014-06-12T18:33:53  <clarkb> sdague: nope local ephemeral isn't big enough
2014-06-12T18:34:00  <clarkb> its cinder ovlumes or rax equivalent
2014-06-12T18:34:16  <sdague> single volumes, or something raided?
2014-06-12T18:34:25  <clarkb> fungi: care to look at sar -dp 5 5 on the ES nodes and tell me what you see
2014-06-12T18:34:30  <clarkb> sdague: single volumes
2014-06-12T18:34:44  <lifeless> ttx: I see yes; I will track down
2014-06-12T18:35:03  <sdague> apparently the ec2 trick is to allocate 4 volumes and stripe them
2014-06-12T18:35:12  <sdague> I wonder if that would help here
2014-06-12T18:35:24  <sdague> or if we're maxed on the network side
2014-06-12T18:35:48  <fungi> clarkb: i picked a random es node and it claims sar isn't installed... should it be?
2014-06-12T18:36:04  <clarkb> fungi: no you need to install sysstat I am installing it as  Igo
2014-06-12T18:36:10  <fungi> k
2014-06-12T18:36:11  <clarkb> sdague: it looks like only one node may be affected
2014-06-12T18:36:15  <ttx> lifeless: I can't say i'm surprised -- blueprints never had a full API, it was all added piecemeal by platform team when we needed to scratch itches. Like I said, I probably authored 25% of it.
2014-06-12T18:36:17  <clarkb> sdague: which may be a rax side problem?
2014-06-12T18:36:51  <sdague> clarkb: and one bad node hurts the others?
2014-06-12T18:36:51  <clarkb> sdague: or that node is being crazy as compared to the others
2014-06-12T18:37:02  <sdague> is it the node handling api requests?
2014-06-12T18:37:03  <clarkb> sdague: yes because of replicas and searches hitting that disk
2014-06-12T18:37:09  <clarkb> sdague: yes it is that node too
2014-06-12T18:37:16  <clarkb> sdague: but it shouldn't be spooling any of that to disk
2014-06-12T18:37:38  <clarkb> api requests should be memroy which is why we went to much bigger nodes for more memory
2014-06-12T18:37:43  <fungi> oh yeah, await is spiking up fairly high at points
2014-06-12T18:38:01  <sdague> clarkb: but that will have no interaction with the local shard?
2014-06-12T18:38:08  <lifeless> ttx: yah, I've pinged cprov and he's looking at hwo hard it would be to get the collection exposed
2014-06-12T18:38:19  <sdague> I'm just wondering if we're in high load otherwise if it's impacting
2014-06-12T18:38:23  <lifeless> ttx: if you look at bugs there is /bugs and there is the bugs type, specs only has the type exposed
2014-06-12T18:38:45  <clarkb> sdague: it may, we may find turning off e-r makes it stop
2014-06-12T18:39:15  <sdague> well, also when things are bad is when people are using logstash a lot to discover things
2014-06-12T18:39:16  *** markmcclain has quit IRC
2014-06-12T18:39:22  <clarkb> fungi: ya and now look at 01
2014-06-12T18:39:28  <fungi> yep
2014-06-12T18:39:32  <dhellmann> sdague: I'm back
2014-06-12T18:39:36  <mgagne> sdague: regarding the thread about capacity issues in the gate, would throwing more hardware/ressources to the problem fix the problem or would it just buy us some time until a deeper unknown problem (to me) is fixed?
2014-06-12T18:39:39  <ttx> lifeless: cool, thx. Keep me posted!
2014-06-12T18:39:42  <fungi> pew pew lasers on the lvm pv
2014-06-12T18:39:50  <clarkb> sdague: the quick and easy thing to try is to stop apache on logstash.o.o
2014-06-12T18:39:51  <mestery> fungi: FYI, I just received word from the OpenDaylight folks that their CI is now functioning normally again, if you have time, can you let them vote again? Thanks!
2014-06-12T18:39:54  <lifeless> ttx: https://bugs.launchpad.net/launchpad/+bug/1329424
2014-06-12T18:39:55  <clarkb> sdague: we may see everything get happy again
2014-06-12T18:39:55  <uvirtbot> Launchpad bug 1329424 in launchpad "cannot create specification via API" [Undecided,New]
2014-06-12T18:40:00  <sdague> clarkb: or the cron jobs
2014-06-12T18:40:07  <ttx> lifeless: like I said my current script works around it by spawning a browser window, which is kind of unwieldy :)
2014-06-12T18:40:22  <clarkb> sdague: they hit apache :)
2014-06-12T18:40:31  <sdague> clarkb: oh, right :)
2014-06-12T18:40:35  <clarkb> its like a giant valve I can turn off which is nice
2014-06-12T18:40:44  <fungi> mestery: done
2014-06-12T18:40:45  <sdague> clarkb: sure, want to black it out for 30 minutes
2014-06-12T18:40:50  <sdague> and see if it impacts things
2014-06-12T18:40:53  <ttx> lifeless: ok, subscribed myself
2014-06-12T18:40:53  <clarkb> sdague: ya lets try that
2014-06-12T18:40:53  <mestery> fungi: thank you sir!
2014-06-12T18:40:59  <clarkb> I am stopping pupept and apache on logstash.o.o now
2014-06-12T18:41:25  <sdague> mgagne: more nodes never hurts, but we've got as bad a people scaling problem on tracking down the fails
2014-06-12T18:41:26  <fungi> sounds like a good test of the theory at any rate
2014-06-12T18:41:33  <sdague> people are less elastic
2014-06-12T18:42:39  <sdague> dhellmann: ok, so oslotest has had some interesting implications when it comes to zuul
2014-06-12T18:42:51  <dhellmann> sdague: yes?
2014-06-12T18:42:56  <sdague> because in it's current job matrix it has joined the world into a single gate
2014-06-12T18:43:03  <dhellmann> oof
2014-06-12T18:43:15  <dhellmann> we'll have a similar issue for oslo.config, oslo.i18n, etc.
2014-06-12T18:43:17  <sdague> because it creates a set of transitive dependencies
2014-06-12T18:43:23  <sdague> right
2014-06-12T18:43:49  <sdague> so I'd like to propose a risk model here
2014-06-12T18:44:02  <dhellmann> I image we'll replace that matrix when we implement https://etherpad.openstack.org/p/juno-infra-library-testing
2014-06-12T18:44:06  <sdague> in that we only run those jobs in check
2014-06-12T18:44:28  <dhellmann> that's fair, since they are only unit tests
2014-06-12T18:44:56  <sdague> that does mean there is a chance we'll get a wedge across some projects if just the wrong set of things go through the gate
2014-06-12T18:44:58  <sdague> however
2014-06-12T18:45:22  <sdague> I think that's less pain then the current setup which puts all the world into the same gate queue
2014-06-12T18:45:49  <sdague> and made ironics fail issues back up everything else, for instance
2014-06-12T18:47:16  <dhellmann> yeah, let's remove those gate jobs
2014-06-12T18:47:28  <lifeless> sdague: btw I have a little confusion about the namespace thing we discussed with pcrews
2014-06-12T18:48:03  <lifeless> sdague: the current web ui looks like it has namespaces (all pipelines, gate pipeline, uncategorized) already
2014-06-12T18:48:27  <dhellmann> sdague: is the comment on line 52 of https://etherpad.openstack.org/p/juno-infra-library-testing accurate?
2014-06-12T18:48:37  *** markwash_ has joined #openstack-infra
2014-06-12T18:48:59  <sdague> lifeless: we need another dimension
2014-06-12T18:49:20  <lifeless> sdague: ok
2014-06-12T18:49:25  <lifeless> sdague: thanks
2014-06-12T18:49:53  <sdague> dhellmann: yes
2014-06-12T18:50:15  <sdague> dhellmann: let me propose this as a config change, then we can discuss
2014-06-12T18:50:21  <dhellmann> sdague: sounds good
2014-06-12T18:50:56  *** markwash has quit IRC
2014-06-12T18:50:57  *** markwash_ is now known as markwash
2014-06-12T18:52:34  <openstackgerrit> A change was merged to openstack-dev/pbr: Register testr as a distutil entry point  https://review.openstack.org/99277
2014-06-12T18:57:04  *** mrmartin has quit IRC
2014-06-12T18:58:46  *** SumitNaiksatam has quit IRC
2014-06-12T18:59:24  *** markmcclain has joined #openstack-infra
2014-06-12T18:59:36  *** SumitNaiksatam has joined #openstack-infra
2014-06-12T19:00:03  <openstackgerrit> Sean Dague proposed a change to openstack-infra/config: do not co-gate oslotest with the projects that include it  https://review.openstack.org/99736
2014-06-12T19:00:16  <sdague> dhellmann: ok, I tried to be really verbose with that commit message
2014-06-12T19:00:20  <sdague> if you can take a look
2014-06-12T19:00:47  <dhellmann> sdague: looking
2014-06-12T19:01:30  <sdague> turning off ironic voting in gate seems to have vastly increased velocity
2014-06-12T19:02:29  <dhellmann> sdague: +1
2014-06-12T19:02:32  <sdague> fungi: hey, so we just got a gate reset
2014-06-12T19:02:43  <sdague> can I get a promote on the ceilo grenade fix?
2014-06-12T19:02:52  *** mancdaz has quit IRC
2014-06-12T19:02:52  *** johnthetubaguy has quit IRC
2014-06-12T19:02:52  *** changbl has quit IRC
2014-06-12T19:02:52  *** phschwartz has quit IRC
2014-06-12T19:02:59  <fungi> sdague: yep, promoting as soon as those two at the top report
2014-06-12T19:03:10  *** phschwartz_ has joined #openstack-infra
2014-06-12T19:03:13  *** changbl has joined #openstack-infra
2014-06-12T19:03:14  <sdague> fungi: awesome, thank you sir
2014-06-12T19:03:37  *** ramashri has quit IRC
2014-06-12T19:03:56  *** ramashri has joined #openstack-infra
2014-06-12T19:04:22  <fungi> sdague: is the failure which caused the reset there what 99412 is trying to address?
2014-06-12T19:04:32  <sdague> fungi: nope
2014-06-12T19:05:05  <sdague> but it's something that's in the grenade uncategorized fail list
2014-06-12T19:05:19  <fungi> given it killed a ceilo change i was sort of wondering
2014-06-12T19:05:20  <sdague> and I think we've got a buffering problem there which I'm hoping my new output filter solves
2014-06-12T19:05:23  <sdague> yeh
2014-06-12T19:05:26  <sdague> no, that's another thing
2014-06-12T19:05:38  *** mancdaz has joined #openstack-infra
2014-06-12T19:05:41  <sdague> there are 'so many' new bugs here
2014-06-12T19:05:45  *** radez_g0n3 is now known as radez
2014-06-12T19:05:49  *** johnthetubaguy has joined #openstack-infra
2014-06-12T19:05:59  <sdague> I've rarely seen my changes get bounced twice for the same fail
2014-06-12T19:06:24  *** annegent_ has joined #openstack-infra
2014-06-12T19:06:46  <openstackgerrit> Michael Krotscheck proposed a change to openstack-infra/storyboard-webclient: Including UX Feedback on menu and nav.  https://review.openstack.org/99209
2014-06-12T19:06:52  <sdague> fungi / clarkb / mordred / SergeyLukjanov - https://review.openstack.org/99736 should also relieve some things
2014-06-12T19:06:59  <sdague> and dhellmann is onboard
2014-06-12T19:07:02  <openstackgerrit> Michael Krotscheck proposed a change to openstack-infra/storyboard-webclient: Error message & notification handling  https://review.openstack.org/99515
2014-06-12T19:07:07  <sdague> that's a config change
2014-06-12T19:07:13  <sdague> that will split the queues out
2014-06-12T19:07:22  <clarkb> looking
2014-06-12T19:08:02  <fungi> sdague: ayup, saw the conversation. makes sense
2014-06-12T19:08:03  *** annegent_ has quit IRC
2014-06-12T19:08:14  <sdague> fungi: the swift change at top of gate is failing on grenade
2014-06-12T19:08:31  <sdague> I would just promote now
2014-06-12T19:08:40  <sdague> and give those a second go
2014-06-12T19:08:52  <sdague> because that swift change is failing badly and slowly
2014-06-12T19:08:58  <sdague> it's going to take a long time to report
2014-06-12T19:09:03  *** freyes_ has joined #openstack-infra
2014-06-12T19:10:17  <clarkb> sdague: so trying to grok that change, does it do enoughto break the transitivity?
2014-06-12T19:10:50  <clarkb> sdague: oh wait I think I grok, those tests are run on the other projects hence the transitive inclusion
2014-06-12T19:10:56  <sdague> clarkb: right
2014-06-12T19:10:57  <clarkb> but removing them from the source side breaks that
2014-06-12T19:11:02  <sdague> in the gate queue
2014-06-12T19:11:03  <sdague> yep
2014-06-12T19:11:11  *** phschwartz_ is now known as phschwartz
2014-06-12T19:11:20  <clarkb> ok approved
2014-06-12T19:11:41  <clarkb> fungi: the other thing that we may want to do in the nearish future is restart zuul to pick up that fix for the swift stuff
2014-06-12T19:11:48  <clarkb> fungi: but I am happy to focus on gate fixes
2014-06-12T19:12:07  <fungi> sdague: done
2014-06-12T19:12:28  <openstackgerrit> Michael Krotscheck proposed a change to openstack-infra/storyboard-webclient: Removed old template  https://review.openstack.org/99738
2014-06-12T19:12:29  <sdague> fungi: thanks
2014-06-12T19:12:35  <phschwartz> clarkb: So I thought about it more and more. If there are no objections I am going to go down the road of having a new thread for rebuilds and have everything that currently goes to deleted go to rebuild and let the rebuild thread determine if it should be moved to deleted.
2014-06-12T19:12:54  <clarkb> phschwartz: sounds good to me
2014-06-12T19:13:25  *** e0ne has quit IRC
2014-06-12T19:13:29  *** saper has quit IRC
2014-06-12T19:13:42  <clarkb> so we are still doing an order of magnitude more data on es01
2014-06-12T19:13:48  <clarkb> but stopping apache has helped
2014-06-12T19:14:02  *** e0ne has joined #openstack-infra
2014-06-12T19:14:05  *** chmartinez has left #openstack-infra
2014-06-12T19:14:06  <clarkb> I have no idea what makes es01 special at this point. Maybe it is still trying to deal with requests?
2014-06-12T19:14:14  <sdague> hmmm
2014-06-12T19:14:20  <fungi> clarkb: is that just elasticsearch not sharding with an eye for access volume?
2014-06-12T19:14:55  <fungi> maybe es01 got "lucky" and has the most accessed shards?
2014-06-12T19:15:02  <clarkb> fungi: the shard allocation is random in our setup so we should see even writes across all of them
2014-06-12T19:15:15  <fungi> huh. okay. scratch that idea
2014-06-12T19:15:33  <clarkb> I mean there may be a bug in that
2014-06-12T19:15:38  <sdague> clarkb: would it be worth trying to do the striped raid of volumes on that node to increase it's io throughput?
2014-06-12T19:15:54  <clarkb> sdague: possibly, I think first I need to figure out what makes that node special
2014-06-12T19:15:59  <sdague> that's fair
2014-06-12T19:16:05  <clarkb> sdague: the other potential thing to try is doing non data nodes
2014-06-12T19:16:15  <clarkb> and let them deal with searches
2014-06-12T19:16:21  <sdague> sure
2014-06-12T19:16:24  <phschwartz> clarkb: oh, and as to your question yesterday about requesting more volume space, it would have to be discussed with Pvo, I know mordred has been in contact with him so you might want to ask him to pose the question.
2014-06-12T19:16:28  <clarkb> they essentially act as fat caches to take strain off the indexing nodes
2014-06-12T19:16:36  <clarkb> phschwartz: thanks
2014-06-12T19:16:38  *** e0ne has quit IRC
2014-06-12T19:16:38  <sdague> ok
2014-06-12T19:17:00  <clarkb> sdague: but if we add a second volume to each ndoe I definitely think we can try doing the raid approach
2014-06-12T19:17:02  <sdague> man, our deletes really are backing up as well
2014-06-12T19:17:14  <sdague> on overall nodes
2014-06-12T19:17:32  <sdague> looks like > 50% are currently deleting
2014-06-12T19:17:45  *** _nadya_ has joined #openstack-infra
2014-06-12T19:19:01  <fungi> looks like most of rax-dfw is deleting
2014-06-12T19:19:16  <fungi> and most of rax-iad
2014-06-12T19:19:20  *** ociuhandu has quit IRC
2014-06-12T19:19:26  <fungi> and about half of ord
2014-06-12T19:19:50  <phschwartz> Let me look at our cloud monitor
2014-06-12T19:21:16  <fungi> many have been attempting to delete for 1-2 hours
2014-06-12T19:22:06  <clarkb> es01 is starting to get more inline with the other 5 nodes now
2014-06-12T19:22:12  <fungi> actually more than half of the nodes nodepool wants to delete in rax regions have been in that state for more than 4 hours
2014-06-12T19:22:18  <clarkb> I want to watch and see if it is consistent that way
2014-06-12T19:22:21  *** ArxCruz has joined #openstack-infra
2014-06-12T19:22:46  <phschwartz> fungi can you get me a list of all of the uuid's of the instances stuck in deleting across the regions. I will get ops involved.
2014-06-12T19:23:11  <jesusaurus> did we upgrade the version of puppet? im seeing a lot of new deprecation warnings in the puppet-apply-precise test
2014-06-12T19:23:19  <fungi> phschwartz: from what i've seen they're not so much "stuck" as getting ignored and then periodically retried
2014-06-12T19:24:05  <fungi> phschwartz: nodepool requests a delete from nova, the client call returns, the node never disappears, nodepool throws it back into the queue and tries again in 10 minutes or so, lather, rinse, repeat
2014-06-12T19:24:42  <jesusaurus> clarkb: did you figure out what was mucking up your es node?
2014-06-12T19:24:56  *** ildikov has joined #openstack-infra
2014-06-12T19:25:14  *** markmcclain has quit IRC
2014-06-12T19:25:15  <fungi> i'm going to do a bulk parallel delete of anything nodepool's been trying to delete for at least an hour
2014-06-12T19:25:32  <clarkb> jesusaurus: seems possibly related to hammering one of the nodes with searches
2014-06-12T19:25:40  <clarkb> jesusaurus: the disk on that node couldn't keep up
2014-06-12T19:25:42  <sdague> fungi: we should just write a tool that opens a ticket automatically when it takes more than an hour to delete a node :)
2014-06-12T19:25:45  <clarkb> http://gibrown.wordpress.com/2014/01/09/scaling-elasticsearch-part-1-overview/ is interesting
2014-06-12T19:25:52  <openstackgerrit> Adam Gandelman proposed a change to openstack-infra/config: Pre-cache UCA packages during nodepool img build  https://review.openstack.org/99740
2014-06-12T19:26:05  <clarkb> a quick glance shows we are trying to do more with less :/
2014-06-12T19:26:11  <phschwartz> fungi: hold off for a couple of min if you can. I want an admin to look if they can
2014-06-12T19:26:37  <jesusaurus> clarkb: huh
2014-06-12T19:26:42  <clarkb> fungi: sdague: the other thing we can try is ssd volumes
2014-06-12T19:26:47  <fungi> phschwartz: okay, will do
2014-06-12T19:26:56  <sdague> clarkb: oh... that's an option?
2014-06-12T19:27:04  <clarkb> so I think we have a lot of options. but may need to caht with pvo
2014-06-12T19:27:09  <clarkb> sdague: possibly. They exist :)
2014-06-12T19:27:14  *** ArxCruz has quit IRC
2014-06-12T19:27:21  *** denis_makogon has joined #openstack-infra
2014-06-12T19:27:23  <clarkb> mordred: ^ is that something you want to do?
2014-06-12T19:27:31  <clarkb> pvo doesn't seem to be resident here anymore
2014-06-12T19:27:41  <sdague> right, I guess it's hard to know if the bottleneck is the volume backend, or the path to the volume
2014-06-12T19:27:47  <clarkb> right
2014-06-12T19:27:57  <clarkb> and before we make big changes would be good to ave an understanding from rax
2014-06-12T19:28:10  <sdague> can phschwartz help us figure that one out? :)
2014-06-12T19:28:32  <clarkb> he mentioned talking to pvo
2014-06-12T19:28:54  <phschwartz> I will ping  him, but the request coming to him from mordred would probably be better.
2014-06-12T19:29:13  <clarkb> phschwartz: ok
2014-06-12T19:29:23  <clarkb> thanks for the help
2014-06-12T19:30:36  <clarkb> 01 is still higher than 02 though
2014-06-12T19:30:43  <openstackgerrit> Antoine Musso proposed a change to openstack-infra/zuul: Make swiftclient an optional dependency  https://review.openstack.org/97933
2014-06-12T19:31:07  <mordred_phone> clarkb: I can ping him
2014-06-12T19:33:32  *** thuc has joined #openstack-infra
2014-06-12T19:33:32  *** smarcet has quit IRC
2014-06-12T19:35:12  *** hashar has joined #openstack-infra
2014-06-12T19:35:46  <clarkb> the big difference seems to be es01 is much more heavy on reads than es02
2014-06-12T19:35:55  <clarkb> which may still be fallotu from being the api endpoint node
2014-06-12T19:37:43  *** mrmartin has joined #openstack-infra
2014-06-12T19:37:56  <jesusaurus> clarkb: oh, you arent load-balancing requests across all the nodes?
2014-06-12T19:37:57  <openstackgerrit> Philip Marc Schwartz proposed a change to openstack-infra/config: Creation of vinz project in the openstack-infra scheme.  https://review.openstack.org/93953
2014-06-12T19:38:25  *** thuc has quit IRC
2014-06-12T19:38:31  <phschwartz> mordred: fungi: anteaya: ^ that is the rebase due to the merge failure
2014-06-12T19:39:54  *** ominakov has joined #openstack-infra
2014-06-12T19:40:48  *** andreykurilin_ has quit IRC
2014-06-12T19:40:57  *** cp16net has quit IRC
2014-06-12T19:41:22  <anteaya> phschwartz: you are a trooper
2014-06-12T19:41:30  *** ominakov has quit IRC
2014-06-12T19:41:48  <phschwartz> Only thing I hate about long running reviews. The need for multiple rebases. lol
2014-06-12T19:43:11  <jogo> why are so many of our cloud resources in deleting state?
2014-06-12T19:43:30  <clarkb> jesusaurus: no because its supposed to do that for me
2014-06-12T19:43:46  <phschwartz> fungi: before attempting to force the delete, can you open a ticket for the issue. I have ping some people to look and one of our nova dev's is looking at one of the  instances now.
2014-06-12T19:43:57  <clarkb> but apparently the chosen node is hit harder than I expected
2014-06-12T19:45:41  *** markmcclain has joined #openstack-infra
2014-06-12T19:46:22  *** james_li has quit IRC
2014-06-12T19:46:42  <mrmartin> hi. what is the proper way to add compass (http://compass-style.org), a css styling tool required to compile sass files to css to the jenkins slave? The problem that the ubuntu 12.04lts package is very old, but we could use a "gem install compass" to deploy the latest stable version.
2014-06-12T19:46:46  *** smarcet has joined #openstack-infra
2014-06-12T19:47:19  *** nati_ueno has quit IRC
2014-06-12T19:47:28  <openstackgerrit> Alexandre Viau proposed a change to openstack-infra/config: Added the Surveil project to gerritbot and stackforge config  https://review.openstack.org/99746
2014-06-12T19:47:42  <mgagne> mrmartin: does your project have a Gemfile or use Bundler already?
2014-06-12T19:47:58  <jogo> clarkb: logstash.o.o is giving me errors
2014-06-12T19:48:16  *** e0ne has joined #openstack-infra
2014-06-12T19:48:20  <mrmartin> mgagne: not yet. what I want to achieve, to remove the pre-compiled css files from github repository, and cleanup styling related patches.
2014-06-12T19:49:07  *** _nadya_ has quit IRC
2014-06-12T19:49:26  <clarkb> jogo yup we killed it
2014-06-12T19:49:38  *** ihrachyshka has joined #openstack-infra
2014-06-12T19:49:51  <mgagne> mrmartin: we (puppet modules for openstack) are already relying on Bundler to install specific gem versions of our dependencies. I guess it should be trivial to do the same with yours.
2014-06-12T19:49:54  <jogo> clarkb: ahh
2014-06-12T19:50:16  <clarkb> jogo es issues seem related to search volume
2014-06-12T19:50:16  <jogo> clarkb: I take it, it will be coming back at some point in the not so distant future
2014-06-12T19:50:22  <mrmartin> mgagne: could you show me some example in the current infra repo?
2014-06-12T19:50:27  <clarkb> we are hitting iowait so bad
2014-06-12T19:50:27  <jogo> clarkb: thanks
2014-06-12T19:50:32  <jogo> ouch
2014-06-12T19:50:34  <mgagne> mrmartin: sure, hold on
2014-06-12T19:50:35  <jogo> moar cloud
2014-06-12T19:51:28  *** thuc has joined #openstack-infra
2014-06-12T19:51:52  *** markmcclain has quit IRC
2014-06-12T19:51:56  <sweston> anteaya:  Hello, again.  I have just been informed by Shiv that he is using the key attached to Brocade CI.
2014-06-12T19:52:01  <mgagne> mrmartin: one of our job: https://github.com/openstack-infra/config/blob/master/modules/openstack_project/files/jenkins_job_builder/config/puppet-module-jobs.yaml#L8-L13
2014-06-12T19:52:31  *** praneshp has quit IRC
2014-06-12T19:52:49  <mrmartin> mgagne: thank you, I'll review this
2014-06-12T19:53:00  <mgagne> mrmartin: afaik, with bundler, you are expected to wrap your call with bundle exec to have access to console scripts provided by gems
2014-06-12T19:53:01  <sweston> anteaya:  I sent a correction to my ml request.  I just want to make sure I updated you with the latest information.
2014-06-12T19:53:09  *** cp16net has joined #openstack-infra
2014-06-12T19:53:13  *** thuc has quit IRC
2014-06-12T19:53:46  *** thuc has joined #openstack-infra
2014-06-12T19:54:18  <sweston> anteaya: never mind, I see you are already on top of it :-)
2014-06-12T19:54:34  <mrmartin> mgagne: I had a talk with this guy today in the same topic, so compass / bundler integration seems to be working here: http://cheppers.com/blog/bundlerize-your-sassy-themes
2014-06-12T19:54:40  <mgagne> mrmartin: might not be what you want if console scripts are executed from tox, a Makefile or whatever you use in your project. Console scripts are expected to be found in the system search path.
2014-06-12T19:54:45  <anteaya> sweston: k
2014-06-12T19:54:54  *** pvo has joined #openstack-infra
2014-06-12T19:55:24  <anteaya> sweston: please confirm my emailed statement is correct, posting below my response is prefered
2014-06-12T19:55:56  <sweston> anteaya: yes, your statement is correct.
2014-06-12T19:56:06  <anteaya> sweston: thanks
2014-06-12T19:56:11  <mrmartin> mgagne: I want to add here: https://github.com/openstack-infra/config/blob/master/modules/openstack_project/files/jenkins_job_builder/config/groups.yaml so I guess it will work
2014-06-12T19:56:34  *** nati_ueno has joined #openstack-infra
2014-06-12T19:56:36  <sweston> anteaya:  apologies, I the email just left my inbox ... I will post below in future correspondence with the ml.
2014-06-12T19:56:49  *** james_li has joined #openstack-infra
2014-06-12T19:56:51  <anteaya> sweston: thanks, I appreciate that
2014-06-12T19:57:34  *** ArxCruz has joined #openstack-infra
2014-06-12T19:58:41  *** markwash has quit IRC
2014-06-12T19:59:55  *** e0ne has quit IRC
2014-06-12T20:00:05  *** markwash has joined #openstack-infra
2014-06-12T20:00:28  *** e0ne has joined #openstack-infra
2014-06-12T20:02:43  *** e0ne has quit IRC
2014-06-12T20:04:13  <fungi> phschwartz: i could open a ticket but i'm not sure how to characterize it (nor do i have a good description for how to trivially recreate the condition)
2014-06-12T20:04:42  *** ArxCruz has quit IRC
2014-06-12T20:05:07  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/config: Don't run large-ops test on stable branches  https://review.openstack.org/99750
2014-06-12T20:05:16  <jogo> sdague: ^
2014-06-12T20:05:30  *** dprince has quit IRC
2014-06-12T20:05:41  <sdague> jogo: I think we only want to exclude havana
2014-06-12T20:05:50  <fungi> phschwartz: i'm mostly afk, but if i had time i would probably dig in the nodepool logs and a thread dump to identify exactly why nodepool is unable to delete from one provider in as timely a manner as another
2014-06-12T20:05:51  <sdague> I think we should still run it on icehouse
2014-06-12T20:05:57  <jogo> sdague: sure
2014-06-12T20:06:40  * fungi is currently working from the seat of a car in a grocery store parking lot while people are touring his old residence
2014-06-12T20:07:00  *** zns has quit IRC
2014-06-12T20:07:03  <sdague> fungi: awesome
2014-06-12T20:07:05  <jogo> sdague: and itwas the wrong job
2014-06-12T20:07:08  *** Alexei_987 has joined #openstack-infra
2014-06-12T20:07:12  <sdague> jogo: ++
2014-06-12T20:07:14  *** radez is now known as radez_g0n3
2014-06-12T20:07:22  *** zns has joined #openstack-infra
2014-06-12T20:08:51  *** malini1 has quit IRC
2014-06-12T20:08:56  <openstackgerrit> A change was merged to openstack-infra/config: do not co-gate oslotest with the projects that include it  https://review.openstack.org/99736
2014-06-12T20:09:25  <clarkb> fungi: you should be in a bar watching world cup
2014-06-12T20:10:05  *** mbacchi has quit IRC
2014-06-12T20:10:12  *** ramashri_ has joined #openstack-infra
2014-06-12T20:10:15  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/config: Don't run large-ops test on stable/havana branches  https://review.openstack.org/99750
2014-06-12T20:10:17  <jogo> sdague: take two ^
2014-06-12T20:11:18  *** ramashri has quit IRC
2014-06-12T20:11:51  <sdague> jogo: you still have copy/paste errors
2014-06-12T20:11:53  <sdague> look at the diff
2014-06-12T20:12:07  <jogo> sdague: ahh
2014-06-12T20:12:12  *** rlandy has quit IRC
2014-06-12T20:14:12  <jogo> sdague: take 3
2014-06-12T20:14:14  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/config: Don't run large-ops test on stable/havana branches  https://review.openstack.org/99750
2014-06-12T20:16:24  <jogo> fungi: for the delete issue in nodepool, is the issue only on rax or both clouds?
2014-06-12T20:16:38  <jogo> fungi: I wonder if we can fix something in nova to help this
2014-06-12T20:17:19  <fungi> jogo: all our providers lag some on delete calls, but at the moment most of our rax quota is tied up in instances nodepool wanted deleted hours ago
2014-06-12T20:17:44  <jogo> fungi: there is a force delete command not sure if its admin only though
2014-06-12T20:18:09  *** boris-42 has quit IRC
2014-06-12T20:18:09  *** bookwar has quit IRC
2014-06-12T20:18:10  *** morganfainberg has quit IRC
2014-06-12T20:18:27  <fungi> jogo: that's not so much the issue. retrying the delete has a ~% chance of either working or just being ignored from what we've seen in the past
2014-06-12T20:18:35  *** boris-42 has joined #openstack-infra
2014-06-12T20:18:35  *** bookwar has joined #openstack-infra
2014-06-12T20:18:35  *** morganfainberg has joined #openstack-infra
2014-06-12T20:19:18  <jogo> fungi: so it sounds like a nova bug?
2014-06-12T20:19:18  <fungi> from any provider (parts of hpcloud 1.0 were pretty bad about that too)
2014-06-12T20:20:29  <fungi> jogo: maybe. depends on what sort of modifications they have in place compared to vanilla nova, how it's impacted by load/performance issues/whatever on the underlying infrastructure, et cetera
2014-06-12T20:20:56  *** mbacchi has joined #openstack-infra
2014-06-12T20:21:10  *** ramashri_ has quit IRC
2014-06-12T20:21:23  *** a2hill has joined #openstack-infra
2014-06-12T20:22:08  <openstackgerrit> Sean Dague proposed a change to openstack-infra/elastic-recheck: remove old queries  https://review.openstack.org/99756
2014-06-12T20:22:10  <fungi> basically nodepool issues a nova delete and then if that returns an ok response periodically looks at the nova list to watch for the instance to finally disappear. sometimes it never does, so nodepool retries that periodically until it finally works
2014-06-12T20:22:19  *** alkari has quit IRC
2014-06-12T20:22:23  <sdague> clarkb: I wonder if our query growth impacts things
2014-06-12T20:22:33  <openstackgerrit> A change was merged to openstack-infra/config: Creation of vinz project in the openstack-infra scheme.  https://review.openstack.org/93953
2014-06-12T20:22:45  <clarkb> sdague: its possible
2014-06-12T20:22:53  <clarkb> sdague: also possible that we have a bunch of terrible queries
2014-06-12T20:23:18  <sdague> clarkb: yeh, so are the logs of the batch jobs contained anywhere?
2014-06-12T20:23:39  <sdague> I could put timers around the queries so that we can determine which ones seem most expensive
2014-06-12T20:23:52  <clarkb> uh probably not. we just run them out of cron right?
2014-06-12T20:23:57  <sdague> clarkb: yep
2014-06-12T20:24:11  <clarkb> sdague: but we should be able to have them write to /var/log/es-batch-jobs or whatever
2014-06-12T20:24:13  <jogo> jaypipes: ^^^
2014-06-12T20:24:41  <jogo> fungi: I wonder if we can somehow reproduce that issue
2014-06-12T20:24:46  <fungi> clarkb: sdague: does the e-r web dashboard call to es? is it possible the additional query load coincides with when the change merged to replace the old rechecks page with it?
2014-06-12T20:25:00  <sdague> fungi: no, it's batch generated
2014-06-12T20:25:02  <clarkb> fungi: no it generates each of those 3 tabs twice and hour
2014-06-12T20:25:17  <clarkb> so 6 jobs per hour
2014-06-12T20:25:23  <jogo> fungi: the bot goes way more often
2014-06-12T20:25:25  <sdague> so at least that's a fixed cost that we control
2014-06-12T20:25:32  *** esker has joined #openstack-infra
2014-06-12T20:25:39  <sdague> jogo: it processes in serial though
2014-06-12T20:25:43  <fungi> okay. i just notice about a 10-second lag between when the empty page with theming comes up and when the graphs appear, so didn't know what was being queried
2014-06-12T20:25:47  <jogo> sdague: true
2014-06-12T20:25:58  <sdague> fungi: yeh, that's the json loading over the network for the graphs
2014-06-12T20:26:03  <fungi> k
2014-06-12T20:26:08  <sdague> as the graphs are client side
2014-06-12T20:26:11  <fungi> unrelated then
2014-06-12T20:26:55  <sdague> yep
2014-06-12T20:28:17  <jogo> fungi: so when I try deleting a rax instance locally its quick
2014-06-12T20:28:30  <fungi> does the query volume per job failure increase linearly with the number of classification queries e-s has at its disposal?
2014-06-12T20:28:34  <jogo> fungi: is there anything special on these instances? volumes etc
2014-06-12T20:28:53  *** nati_ueno has quit IRC
2014-06-12T20:28:56  <sdague> fungi: yes
2014-06-12T20:29:08  <fungi> jogo: instance booted from snapshot. it also very well may be related to the volume of instance operations we perform in our tenant
2014-06-12T20:29:15  *** esker has quit IRC
2014-06-12T20:29:32  <jogo> jaypipes: ^
2014-06-12T20:29:33  <sdague> jogo: that's 16 queries I think we can drop - https://review.openstack.org/99756
2014-06-12T20:29:35  <jogo> ahhh
2014-06-12T20:29:49  <fungi> sdague: do we periodically de-cruft the old classified entries we aren't hitting any longer?
2014-06-12T20:29:55  <sdague> fungi: manually
2014-06-12T20:29:58  <fungi> okay
2014-06-12T20:30:00  <sdague> that's what I was just doing
2014-06-12T20:30:12  <fungi> yup, you read my mind, or something ;)
2014-06-12T20:30:13  <jogo> sdague: have you updated the related bugs in launchapd?
2014-06-12T20:30:16  *** esker has joined #openstack-infra
2014-06-12T20:30:22  <sdague> jogo: nop
2014-06-12T20:30:49  <jogo> sdague: want to do that ?
2014-06-12T20:30:53  <jogo> then +W from me
2014-06-12T20:32:32  *** wenlock_ has joined #openstack-infra
2014-06-12T20:32:34  <sdague> jogo: I'm not sure what that is
2014-06-12T20:32:35  *** a2hill has quit IRC
2014-06-12T20:32:53  *** blogan has joined #openstack-infra
2014-06-12T20:33:24  <sdague> jogo: you should do the thing you want to do in launchpad, I always just delete these things
2014-06-12T20:33:33  <clarkb> sdague: I want to see if it will catch up in this state
2014-06-12T20:33:40  <clarkb> sdague: then we can try turning apache back on
2014-06-12T20:33:48  <sdague> clarkb: yeh, the slope looks good
2014-06-12T20:33:51  *** radez_g0n3 is now known as radez
2014-06-12T20:33:52  <clarkb> sdague: it may be that when e-r doesn't have to ask over and over and over for a change that we get better behavior
2014-06-12T20:34:05  <sdague> clarkb: agreed
2014-06-12T20:35:11  <phschwartz> fungi: ty, do you want the request for the groups created to be an email or here?
2014-06-12T20:35:16  *** julim has quit IRC
2014-06-12T20:35:20  *** openstackgerrit has quit IRC
2014-06-12T20:35:23  *** praneshp has joined #openstack-infra
2014-06-12T20:36:07  <fungi> phschwartz: in here is fine. the groups get automatically created but i have to manually add people to them
2014-06-12T20:36:08  *** marcoemorais has quit IRC
2014-06-12T20:36:18  *** markmcclain has joined #openstack-infra
2014-06-12T20:36:21  <fungi> but i won't get to it for a bit still
2014-06-12T20:36:26  *** marcoemorais has joined #openstack-infra
2014-06-12T20:36:39  *** openstackgerrit has joined #openstack-infra
2014-06-12T20:36:40  *** wenlock_ has quit IRC
2014-06-12T20:38:15  <phschwartz> fungi: They are vinz-core and vinz-ptl
2014-06-12T20:38:27  <phschwartz> fungi: not a problem for a wait.
2014-06-12T20:39:08  <phschwartz> how often does puppetmaster get updated and propagate the changes anyways? I have never asked.
2014-06-12T20:39:13  <jogo> sdague: just mark them as invalid etc
2014-06-12T20:39:22  <sdague> jogo: the bug might not be invalid
2014-06-12T20:39:35  <sdague> some of these bugs are still out there, we're just not matching them any more
2014-06-12T20:39:44  <jogo> so the ones that are
2014-06-12T20:39:57  <sdague> I don't know which ones those are
2014-06-12T20:40:13  <sdague> the whole point when we age out is just that this query is no longer matching that bug
2014-06-12T20:40:31  <sdague> the reasons for that might be that it's fixed, or it moved around
2014-06-12T20:41:00  <jogo> sdague: so for example https://bugs.launchpad.net/swift/+bug/1209086
2014-06-12T20:41:01  *** bknudson has left #openstack-infra
2014-06-12T20:41:02  <uvirtbot> Launchpad bug 1209086 in swift "grenade tests fail with error trying to create container" [Medium,Confirmed]
2014-06-12T20:41:03  <jogo> I am just commenting
2014-06-12T20:41:05  *** otherwiseguy has quit IRC
2014-06-12T20:41:10  <jogo> to at least give folks some insight
2014-06-12T20:41:38  <sdague> gotcha
2014-06-12T20:42:00  *** blogan has left #openstack-infra
2014-06-12T20:42:14  <sdague> so long term we should probably do a post job that comments on launchpad bugs when we add or remove queries
2014-06-12T20:42:29  <lifeless> sdague: heh, I suggested that the other day
2014-06-12T20:42:36  <lifeless> sdague: but I suggest you use a bug attachment
2014-06-12T20:42:42  *** gyee has joined #openstack-infra
2014-06-12T20:42:46  <sdague> lifeless: why an attachment?
2014-06-12T20:42:51  <lifeless> sdague: then you can have the current query as a yaml file attached to the bug, and if theres no file there is no attachment
2014-06-12T20:43:00  <lifeless> sdague: so you don't need to read through N comments to figure it out
2014-06-12T20:43:11  *** __afazekas is now known as afazekas
2014-06-12T20:43:30  <sdague> well given how often lp times out, a comment seems safer, as there won't be 100% consistency
2014-06-12T20:43:47  <sdague> also I vaguely know how to do that with lplib :)
2014-06-12T20:44:03  <lifeless> sdague: don't see how comments or attachments are safer, same API servers in use, same notification code
2014-06-12T20:44:19  <lifeless> also attachments trigger notifications. up to you though
2014-06-12T20:44:33  <sdague> yeh, but if we are just telling people something has changed in er, then they come back to er for source of truth
2014-06-12T20:44:34  <lifeless> there's example attachment code on the api page- api.l.n/devel/
2014-06-12T20:44:44  *** nati_ueno has joined #openstack-infra
2014-06-12T20:44:58  <sdague> I worry about pushing out the actual data to lp, because then it feels we need to be more responsible for making sure it's consistent
2014-06-12T20:46:33  <openstackgerrit> Alexandre Viau proposed a change to openstack-infra/config: Added the Surveil project to gerritbot and stackforge config  https://review.openstack.org/99746
2014-06-12T20:47:11  <lifeless> mordred_phone: can we please release pbr 0.8.3 to get the testr fixout? setup.py test doesn't accept options, so we do need that fix.
2014-06-12T20:47:31  <lifeless> mordred_phone: I can tag it if you're ok with a release
2014-06-12T20:47:42  *** dims_ has quit IRC
2014-06-12T20:47:56  <openstackgerrit> lifeless proposed a change to openstack-dev/pbr: Allow examining parsing exceptions.  https://review.openstack.org/80856
2014-06-12T20:47:59  <openstackgerrit> lifeless proposed a change to openstack-dev/pbr: Teach pbr VersionInfo about debian versions.  https://review.openstack.org/81074
2014-06-12T20:48:02  <openstackgerrit> lifeless proposed a change to openstack-dev/pbr: Teach pbr about post versioned dev versions.  https://review.openstack.org/80449
2014-06-12T20:48:05  <openstackgerrit> lifeless proposed a change to openstack-dev/pbr: Use the current pbr for testpackage tests.  https://review.openstack.org/94107
2014-06-12T20:48:08  <openstackgerrit> lifeless proposed a change to openstack-dev/pbr: Add a converter to version_tuples.  https://review.openstack.org/80457
2014-06-12T20:48:11  <openstackgerrit> lifeless proposed a change to openstack-dev/pbr: Break out a common version object from VersionInfo  https://review.openstack.org/94108
2014-06-12T20:51:23  <jogo> sdague: done
2014-06-12T20:51:42  *** ramashri has joined #openstack-infra
2014-06-12T20:53:00  <sdague> jogo: yeh, I was racing with yuo through that
2014-06-12T20:54:02  *** chianingwang has quit IRC
2014-06-12T20:56:30  *** mrmartin has quit IRC
2014-06-12T20:56:49  <sdague> clarkb: so it occurs to me that the bot is actually querying across all indexes for the real time queries
2014-06-12T20:57:00  <sdague> when it probably only needs the most recent one
2014-06-12T20:57:03  *** e0ne has joined #openstack-infra
2014-06-12T20:57:08  <sdague> I wonder if a time boundary there will help
2014-06-12T20:57:44  <clarkb> oh yes
2014-06-12T20:57:50  <clarkb> I didn't realize it was hitting all of them
2014-06-12T20:58:07  <sdague> well it has no bounds
2014-06-12T20:58:10  <clarkb> ah
2014-06-12T20:58:13  <clarkb> ya we should change that
2014-06-12T20:58:14  <sdague> which I assume means all
2014-06-12T20:58:24  <clarkb> yup if you don't bound it is all indexes
2014-06-12T20:58:26  <sdague> what's the syntax for "since"
2014-06-12T20:58:35  <clarkb> well you query a specific index
2014-06-12T20:58:43  <clarkb> eg logstash-todaysdate
2014-06-12T20:58:54  <sdague> so we have a race across rotation?
2014-06-12T20:59:01  <clarkb> yes there will be
2014-06-12T20:59:07  <sdague> I thought there was a time range
2014-06-12T20:59:17  <clarkb> sdague: there is too but it will search all indexes for that time range
2014-06-12T20:59:34  <sdague> can I get the last 2 indexes?
2014-06-12T20:59:47  <clarkb> sdague: yeah you can comma delimit them
2014-06-12T20:59:54  *** thuc_ has joined #openstack-infra
2014-06-12T21:00:00  <clarkb> /index1,index2/query or whatever
2014-06-12T21:00:13  <openstackgerrit> A change was merged to openstack/requirements: Bump pep8 from 1.5.6 to 1.5.7  https://review.openstack.org/97944
2014-06-12T21:00:15  <sdague> we need to change the query url?
2014-06-12T21:00:18  <clarkb> sdague: yes
2014-06-12T21:00:25  <clarkb> sdague: otherwise it searches all indexes
2014-06-12T21:00:43  <sdague> so the 15 minute searches via logstash come back pretty fast
2014-06-12T21:01:11  <sdague> it's going to be easier in the code to do the date range, I'm wondering if that's going to be good enough
2014-06-12T21:01:33  <clarkb> for a timestamp range you do @timestamp:[2014-06-01T12:12:12Z TO 2014-06-02T12:12:12] but that searches all indexes for that range
2014-06-12T21:01:43  <clarkb> sdague: because indexes aren't necessarily date bound, its just how logstash does it
2014-06-12T21:01:49  <sdague> oh
2014-06-12T21:01:57  <clarkb> sdague: so kibana is being smart when you say give me last 15 minutes
2014-06-12T21:02:03  <clarkb> I think
2014-06-12T21:02:05  <sdague> ah, gotcha
2014-06-12T21:02:24  <sdague> we always rotate at UTC 00:00
2014-06-12T21:02:25  <sdague> ?
2014-06-12T21:02:27  <clarkb> yes
2014-06-12T21:02:30  *** gokrokve_ has joined #openstack-infra
2014-06-12T21:02:43  <sdague> ok, let me figure out if I can put the same smarts into our side
2014-06-12T21:02:49  <clarkb> ok
2014-06-12T21:02:53  <clarkb> let me know if you have other questions
2014-06-12T21:03:08  <clarkb> I can dig into the kibana source but there is a config option to tell it when rollover happens beacuse it does this magic too
2014-06-12T21:03:12  <sdague> will do, but I probably just need to dive on this for a little bit
2014-06-12T21:03:17  *** thuc has quit IRC
2014-06-12T21:04:01  <jogo> fungi: to be clear, what is teh workflow for creating and deleting a isntance for you guys: 'nova boot';'nova image-create' to create aucstom image' and boot from that image?
2014-06-12T21:04:20  <clarkb> jogo: yes
2014-06-12T21:04:31  <clarkb> nodepool boots off of the "base" image provided by our providers
2014-06-12T21:04:45  <phschwartz> fungi: It looks like the instances stuck in deleting might be an issue on our side and some of them have been stuck for multiple days. (looks like possibly 5 days or more back)
2014-06-12T21:04:48  <clarkb> then it runs scripts on that to create our image, snapshots that and deletes the node the snapshot was taken from
2014-06-12T21:04:51  <jogo> thanks, I am trying to locally (with rax) reprodue the slow deletes
2014-06-12T21:04:58  <clarkb> jogo: then we boot off of that snapshot for all of the slaves
2014-06-12T21:05:12  *** gokrokve has quit IRC
2014-06-12T21:06:53  <openstackgerrit> Maxime Vidori proposed a change to openstack-infra/storyboard-webclient: Remove boostrap.js  https://review.openstack.org/99638
2014-06-12T21:06:56  <openstackgerrit> Maxime Vidori proposed a change to openstack-infra/storyboard-webclient: Removal of jquery  https://review.openstack.org/99660
2014-06-12T21:07:01  *** nati_ueno has quit IRC
2014-06-12T21:07:21  *** thuc has joined #openstack-infra
2014-06-12T21:09:02  <clarkb> sdague: also the gerrit comments should come with a timestamp
2014-06-12T21:09:10  <jogo> phschwartz: oh?
2014-06-12T21:09:18  <clarkb> sdague: it is probably relatively straightforward to convert that into a N and N-1 index
2014-06-12T21:09:19  <NobodyCam> oh new ironic / DIB queue...
2014-06-12T21:09:54  <phschwartz> jogo: yeah, we are still trying to trace the issue., just was letting fungi know where we stand at the moment.
2014-06-12T21:09:57  *** melwitt has joined #openstack-infra
2014-06-12T21:10:05  *** thuc_ has quit IRC
2014-06-12T21:10:37  <NobodyCam> is that new queue permanent?
2014-06-12T21:11:51  <fungi> phschwartz: thanks. added you to those groups just now too
2014-06-12T21:11:54  *** jerryz_ has joined #openstack-infra
2014-06-12T21:12:27  *** markmcclain has quit IRC
2014-06-12T21:12:29  *** markmcclain1 has joined #openstack-infra
2014-06-12T21:12:41  <phschwartz> fungi: ty
2014-06-12T21:13:10  <fungi> NobodyCam: is anything here ever permanent? it's a result of taking oslo cross-tests off those projects for the gate pipeline, which caused them to no longer have jobs in common with anything in the main integrated gate queue
2014-06-12T21:14:06  <NobodyCam> :) ahh ok Ty fungi :)
2014-06-12T21:14:08  <fungi> so their job failures no longer impact time to land anything in the larger queue
2014-06-12T21:14:24  <NobodyCam> and vis versa
2014-06-12T21:14:29  <fungi> yup
2014-06-12T21:14:42  <jogo> wow booting from a snapshot is super duper slow
2014-06-12T21:15:06  *** doug-fish has left #openstack-infra
2014-06-12T21:15:18  <clarkb> jogo: yes its one reason we want to move away from it (but not the most important reason)
2014-06-12T21:17:31  <openstackgerrit> A change was merged to openstack-infra/elastic-recheck: remove old queries  https://review.openstack.org/99756
2014-06-12T21:18:10  *** mbacchi has quit IRC
2014-06-12T21:19:36  *** fifieldt_ has quit IRC
2014-06-12T21:21:14  <JayF> Now up to 5 times I've been bounced from the list :(
2014-06-12T21:22:01  <openstackgerrit> Craig Bryant proposed a change to openstack-infra/config: Add the python-monascaclient  https://review.openstack.org/99767
2014-06-12T21:22:14  <sdague> clarkb: what's the naming convention of the indexes?
2014-06-12T21:22:29  <sdague> also I moved to the living room so that sportsball is on
2014-06-12T21:22:42  <clarkb> sdague: yes I have done the same >_>
2014-06-12T21:22:48  <clarkb> sdague: one sec I will get it for you
2014-06-12T21:23:11  <clarkb> sdague: http://logstash.net/docs/1.4.1/outputs/elasticsearch#index we use the default
2014-06-12T21:23:34  <clarkb> so logstash-2014.06.12 for today
2014-06-12T21:26:00  *** e0ne has quit IRC
2014-06-12T21:26:37  *** e0ne has joined #openstack-infra
2014-06-12T21:28:12  *** andreykurilin_ has joined #openstack-infra
2014-06-12T21:29:29  *** mmaglana has joined #openstack-infra
2014-06-12T21:29:40  <phschwartz> sdague: for your devstack-vagrant, what format has is it looking for, for the password.
2014-06-12T21:30:12  <sdague> phschwartz: it's the hashed value in /etc/shadow
2014-06-12T21:30:35  <lifeless> sdague: so anyhwo - https://review.openstack.org/#/c/92497/ delete the whole start-output ?
2014-06-12T21:30:46  <sdague> lifeless: yeh, I think so
2014-06-12T21:31:07  <sdague> phschwartz: what you'd pass usermod -p
2014-06-12T21:31:09  <zaro> clarkb: you know what's up with and hpcloud and sudo?  when i use sudo the command it takes about 10 times longer to execute?
2014-06-12T21:31:39  <clarkb> zaro: might be doing a name lookup?
2014-06-12T21:31:42  *** e0ne has quit IRC
2014-06-12T21:32:27  <phschwartz> sdague: makes sense. I just have to remember what hash alg linux uses for that as I am on a mac. lol
2014-06-12T21:32:50  <clarkb> zaro: those nodes are really slow too
2014-06-12T21:32:54  <sdague> phschwartz: just spin up a linux node set the password, and snag the value
2014-06-12T21:32:58  <sdague> that's what I do :)
2014-06-12T21:33:42  <zaro> clarkb: yes, it's slow, but crawling when sudo-ing.
2014-06-12T21:35:19  <zaro> mordred: ^ do you see same issue?
2014-06-12T21:36:32  *** fifieldt_ has joined #openstack-infra
2014-06-12T21:36:49  <lifeless> zaro: almost certainly hostname
2014-06-12T21:36:59  <lifeless> zaro: check that hostname is in /etc/hosts
2014-06-12T21:37:25  <fungi> zaro: yeah, gethostbyname() calls. you could strace the sudo process to see where it's hanging if you want to confirm
2014-06-12T21:39:39  *** mfer has quit IRC
2014-06-12T21:40:18  *** smarcet has quit IRC
2014-06-12T21:41:51  <jogo> fungi: just reproduced the slow delete, very odd
2014-06-12T21:42:13  <jogo> did it without a snapshot
2014-06-12T21:42:20  <fungi> oh! interesting
2014-06-12T21:42:41  <jogo> a second delete helped
2014-06-12T21:44:58  *** esker has quit IRC
2014-06-12T21:45:07  <openstackgerrit> Maxime Vidori proposed a change to openstack-infra/storyboard-webclient: Documentation improvment  https://review.openstack.org/99775
2014-06-12T21:45:29  *** HenryG has quit IRC
2014-06-12T21:45:33  *** esker has joined #openstack-infra
2014-06-12T21:47:52  <fungi> jogo: yep, same for us. basically nodepool retries them periodically, then sticks them back into its delete queue if they don't disappear within the expected timeframe, and it tries again later
2014-06-12T21:48:04  <fungi> and then eventually they're freed up
2014-06-12T21:48:08  *** mriedem has quit IRC
2014-06-12T21:49:57  *** esker has quit IRC
2014-06-12T21:50:10  *** lbragstad has quit IRC
2014-06-12T21:50:35  *** masayuki_ has joined #openstack-infra
2014-06-12T21:50:57  *** radez is now known as radez_g0n3
2014-06-12T21:51:22  *** mrodden has quit IRC
2014-06-12T21:51:24  <jogo> very odd, next step is to reproduce in devstack (doubtful)
2014-06-12T21:52:14  <openstackgerrit> Sean Dague proposed a change to openstack-infra/elastic-recheck: have realtime engine only search recent indexes  https://review.openstack.org/99776
2014-06-12T21:52:23  <sdague> clarkb ^^^
2014-06-12T21:52:29  <sdague> also jogo, and any other er people
2014-06-12T21:52:34  <clarkb> looking
2014-06-12T21:53:04  <sdague> gah, I missed a thing
2014-06-12T21:53:07  <sdague> one second
2014-06-12T21:53:33  <openstackgerrit> Sean Dague proposed a change to openstack-infra/elastic-recheck: have realtime engine only search recent indexes  https://review.openstack.org/99776
2014-06-12T21:53:41  <sdague> it helps to actually pass the index param to search
2014-06-12T21:54:22  <clarkb> I was just going to ask about that
2014-06-12T21:54:37  <clarkb> sdague: is that tested?
2014-06-12T21:54:43  <clarkb> sdague: the approach is sound to me
2014-06-12T21:54:59  <sdague> it is not, I just finished it
2014-06-12T21:55:03  *** hashar has quit IRC
2014-06-12T21:55:22  <sdague> I did only start 50 minutes ago :)
2014-06-12T21:55:28  <mtreinish> sdague: yeah it looks reasonable to me, but we probably should test it :)
2014-06-12T21:55:33  <phschwartz> fungi: Looks like nova refuses all requests to delete while instances are in deleting state so all the spam of trying to delete after the first are a waste. (API shouldn't timeout as the error is seen in node-pool though)
2014-06-12T21:55:53  <clarkb> sdague: also sportsball
2014-06-12T21:55:58  <sdague> clarkb: yeh
2014-06-12T21:56:09  <sdague> though I was kind of rooting against br
2014-06-12T21:56:13  *** marcoemorais has quit IRC
2014-06-12T21:56:13  *** markmcclain1 has quit IRC
2014-06-12T21:56:18  <sdague> because, that would be funny
2014-06-12T21:56:19  <jogo> ++ to it sounds very reasonable to me
2014-06-12T21:56:34  *** markmcclain has joined #openstack-infra
2014-06-12T21:56:34  *** marcoemorais has joined #openstack-infra
2014-06-12T21:56:54  *** lcostantino has quit IRC
2014-06-12T21:57:24  *** dims_ has joined #openstack-infra
2014-06-12T21:57:37  *** praneshp_ has joined #openstack-infra
2014-06-12T21:57:40  *** andreykurilin_ has quit IRC
2014-06-12T21:58:02  <sdague> clarkb: do we have the api back on yet?
2014-06-12T21:58:07  *** jamielennox is now known as jamielennox|away
2014-06-12T21:58:13  <fungi> phschwartz: i'm not entirely sure that's true. we regularly see deletes requested which basically never get processed, but then clear up immediately on a subsequent delete call
2014-06-12T21:58:13  <sdague> or are we waiting for that to fully burn down ?
2014-06-12T21:58:30  <clarkb> sdague: not yet
2014-06-12T21:58:38  <clarkb> I was waiting for it to burn down but its picking up again
2014-06-12T21:58:45  <clarkb> and load on es01 is climbing
2014-06-12T21:58:55  <sdague> ok, any idea what else is going on?
2014-06-12T21:59:22  <clarkb> no according to bigdesk there are no searches
2014-06-12T21:59:28  <lifeless> huh
2014-06-12T21:59:33  *** praneshp has quit IRC
2014-06-12T21:59:34  *** praneshp_ is now known as praneshp
2014-06-12T21:59:46  <lifeless> why is hudson-openstack closing bugs on merge, rather than fix-committing them ?
2014-06-12T21:59:56  *** thuc has quit IRC
2014-06-12T21:59:56  <lifeless> see https://bugs.launchpad.net/tripleo/+bug/1327090
2014-06-12T21:59:57  <uvirtbot> Launchpad bug 1327090 in tripleo "can't deploy ci-overclouds on Ubuntu - ensure-bridge wipes out /e/n/i" [High,Fix committed]
2014-06-12T22:00:11  <lifeless> (I just put it to fix committed, which is the state it should have)
2014-06-12T22:00:26  <clarkb> lifeless: it is a toggleable option
2014-06-12T22:00:30  <fungi> lifeless: it depends on how your project is configured in review.projects.yaml
2014-06-12T22:00:31  *** thuc has joined #openstack-infra
2014-06-12T22:00:33  <lifeless> hmm
2014-06-12T22:00:46  <clarkb> sdague: iotop shows es doing a lot of reads and sar corroborates that as the slowness
2014-06-12T22:00:54  <fungi> lifeless: it sounds like that project is set for direct release, implying it's one which doesn't do real releases and is just used from trunk
2014-06-12T22:00:59  *** MarkAtwood has quit IRC
2014-06-12T22:00:59  <clarkb> sdague: so I don't think this is purely related to queries
2014-06-12T22:01:05  <clarkb> I am half tempted to restart es on that node
2014-06-12T22:01:15  <lifeless> is this new? Its wrong.
2014-06-12T22:01:26  <clarkb> I guess I can strace
2014-06-12T22:01:39  <fungi> lifeless: no idea. looking to see now which one it is and git-blaming the file for you
2014-06-12T22:01:39  *** mrda-away is now known as mrda
2014-06-12T22:02:01  <sdague> clarkb: yeh, I would say we should take the opportunity to try to diagnose while we've got the query side off
2014-06-12T22:02:04  <lifeless> fungi: 0a9d800b modules/openstack_project/files/review.projects.yaml         (Monty Taylor              2013-12-13 12:12:54 -0500 441)     - direct-release
2014-06-12T22:03:29  *** nati_ueno has joined #openstack-infra
2014-06-12T22:03:35  <fungi> lifeless: yup
2014-06-12T22:03:57  <fungi> lifeless: nix that one line and it will do the default thing which is to set to fix committed on merge
2014-06-12T22:04:02  <openstackgerrit> lifeless proposed a change to openstack-infra/config: Unbreak tripleo projects  https://review.openstack.org/99778
2014-06-12T22:04:14  <fungi> heh
2014-06-12T22:04:22  <lifeless> fungi: obviously we're going to want that in quickly :)
2014-06-12T22:04:32  <phschwartz> fungi: all of your current instances in deleting state have tons of requests going through our api's but when they get to the api at the cell level are kicked with this error. 2014-06-10 11:25:34.426 25720 INFO nova.compute.api [req-c314c89d-58ac-46ae-8a60-57f0edbfac54 156185 637776] [instance: 1bc3554b-1f2a-44c7-b9a7-3d8bc956f7cd] Instance is already in deleting state, ignoring this request
2014-06-12T22:04:33  *** thuc has quit IRC
2014-06-12T22:04:53  <clarkb> oh cells
2014-06-12T22:04:54  <phschwartz> fungi: so if it makes to deleting state from the nova-api they are ignored after that
2014-06-12T22:05:01  <fungi> phschwartz: sounds like a different class of problem than we're used to seeing in that case
2014-06-12T22:05:14  <sdague> yeh, probably something new.
2014-06-12T22:05:34  <fungi> phschwartz: just to be clear, are these the handful which are undeletable or the hundreds which seem to delete if i call nova delete again on them
2014-06-12T22:05:35  <phschwartz> fungi: I think it is and I am thinking on how it should be handled from node-pool that way it doesn't keep retrying if they are in a deleting state
2014-06-12T22:05:54  <sdague> jaypipes did point out a cells delete fix in review, but the fact that cells is basically untested upstream I'm sure doesn't help
2014-06-12T22:06:10  <sdague> https://review.openstack.org/#/c/93860/
2014-06-12T22:06:11  <fungi> phschwartz: oh, yeah if nova shows the state is deleting that's a different class of problem than the one i was thinking of
2014-06-12T22:06:29  <phschwartz> fungi: All the ones that are undeletable because they are stuck in the deleting state. as the delete errored and it looks like nova never reset the vm_state to error.
2014-06-12T22:06:30  <fungi> we also regularly see many which remain in active state according to nova after a delete is requested
2014-06-12T22:06:36  *** amcrn has quit IRC
2014-06-12T22:06:44  *** esker has joined #openstack-infra
2014-06-12T22:06:46  <phschwartz> fungi: I have seen that before and if a retry is done it will delete.
2014-06-12T22:06:53  <fungi> yep
2014-06-12T22:07:02  <phschwartz> fungi: this issue is if the delete actually tried to happen
2014-06-12T22:07:29  <fungi> that's what i was thinking we were probably hitting, but yes this sounds different and solvable (to the degree to which we have any real control over it) in nodepool
2014-06-12T22:07:41  <sdague> phschwartz: does the linked review above look relevant here?
2014-06-12T22:08:06  <phschwartz> sdague: no, but this one does. https://review.openstack.org/#/c/58829/
2014-06-12T22:08:19  <phschwartz> That remove the wrapper for reverting state on error of delete.
2014-06-12T22:08:37  * fungi graciously bows out of the discussion to get back to moving prep
2014-06-12T22:09:09  <phschwartz> sdague: basically that one leaves an instance so it can't be deleted from the api once a delete error happens.
2014-06-12T22:09:36  *** resker has joined #openstack-infra
2014-06-12T22:09:51  <sdague> phschwartz: gotcha
2014-06-12T22:09:51  *** pvo has quit IRC
2014-06-12T22:10:20  *** resker has quit IRC
2014-06-12T22:10:49  *** mrodden has joined #openstack-infra
2014-06-12T22:10:54  *** resker has joined #openstack-infra
2014-06-12T22:11:02  *** esker has quit IRC
2014-06-12T22:11:40  *** mrodden1 has joined #openstack-infra
2014-06-12T22:11:41  *** cp16net has quit IRC
2014-06-12T22:12:19  *** jergerber has quit IRC
2014-06-12T22:12:49  <phschwartz> I understand why the change was made, but it traded an issue of "Oh" this puts the instance into a bad state as you can't revert a delete. But it ended up putting into a worse one as there is no way with out making a db change to fix the state so you can forcefully delete it
2014-06-12T22:12:55  <clarkb> so strace does show lots of reads mapping file descriptors to actual throughput is a bit hard
2014-06-12T22:13:26  <jogo> phschwartz: AFAIK this has been an issue way before that patch
2014-06-12T22:14:06  <jogo> phschwartz: plus I can call nova delete on teh same instance multiple times
2014-06-12T22:14:35  <phschwartz> jogo: no, it wouldn't have been as the revert_task would have put it in a pure error instead of leaving it in a vm_state of deleting.
2014-06-12T22:14:49  *** dkliban is now known as dkliban_afk
2014-06-12T22:14:50  <phschwartz> Nova doesn't allow you to delete a deleting instance
2014-06-12T22:15:04  <phschwartz> so stuck in that state a reissue of the delete does nothing
2014-06-12T22:15:10  *** resker has quit IRC
2014-06-12T22:15:10  *** mrodden has quit IRC
2014-06-12T22:15:29  *** mfer has joined #openstack-infra
2014-06-12T22:16:09  <jogo> phschwartz: just to be clear you are saying that paych isn't it?
2014-06-12T22:16:12  <jogo> or it could be
2014-06-12T22:16:51  <phschwartz> No, that patch is the issue. It removed the reverts_task_state wrapper from the delete action
2014-06-12T22:16:56  *** denis_makogon has quit IRC
2014-06-12T22:17:11  <phschwartz> So the delete that fails causes the instance to stay in deleting.
2014-06-12T22:17:38  *** gondoi is now known as zz_gondoi
2014-06-12T22:18:07  <phschwartz> subsequent delete requests are ignored by nova because of the deleting state basically locking the instance to where you need to force modify the state in the db to delete it by the api, or you have to delete it at the compute level and then hand change the table to deleted.
2014-06-12T22:19:12  <fungi> JayF: we should revisit http://wiki.list.org/pages/viewpage.action?pageId=17891458 based on your reminder. would you care to add it to the agenda for tuesday's infra team meeting? i won't probably be around to discuss it but others on the team also have a firm grasp of the issue i think
2014-06-12T22:19:28  *** UtahDave has quit IRC
2014-06-12T22:19:56  *** mfer has quit IRC
2014-06-12T22:20:08  *** andreaf has joined #openstack-infra
2014-06-12T22:20:24  <clarkb> ooh there is a slow log and it looks like I can enable it on the fly
2014-06-12T22:21:03  *** mmaglana has quit IRC
2014-06-12T22:21:13  <jogo> phschwartz: so the nodepool instances that are stuck are in error state?
2014-06-12T22:21:17  <jogo> and are failing a delete?
2014-06-12T22:21:54  <jogo> phschwartz: "Failure to power off a VM during delete leads to it going back to Active(None) Edit
2014-06-12T22:21:57  <jogo> "
2014-06-12T22:22:00  <jogo> doesn't sound like this issue
2014-06-12T22:22:04  <jogo> direcrtly at least
2014-06-12T22:22:06  <phschwartz> jogo: The task_state is deleting on them so all further delete requests are ignored.
2014-06-12T22:22:35  <jogo> phschwartz: that is the state the stuck instances are in?
2014-06-12T22:22:39  <phschwartz> basically with that patch I linked it makes them vm_state=Error, task_state=deleting and
2014-06-12T22:22:42  <sdague> realistically we actually hit this issue in the gate as well
2014-06-12T22:22:44  <jogo> I found a different state
2014-06-12T22:22:47  <phschwartz> jogo: yes
2014-06-12T22:22:59  <sdague> clarkb: oh, coolness
2014-06-12T22:23:21  <jogo> phschwartz: do you have access to nodepools 'nova list'
2014-06-12T22:23:43  <phschwartz> jogo: I have better then that. I have all our logging and the nova db
2014-06-12T22:23:57  <jogo> phschwartz: who is 'our'? RAX?
2014-06-12T22:24:10  *** SumitNaiksatam has quit IRC
2014-06-12T22:24:20  *** dkranz has quit IRC
2014-06-12T22:24:24  <phschwartz> jogo: correct, I am a developer from Rax that has become a helpful resource to infra ;)
2014-06-12T22:24:46  <fungi> phschwartz: a VERY helpful resource! you're our new pvo ;)
2014-06-12T22:24:49  <jogo> phschwartz: wanna share the relavent logs?
2014-06-12T22:25:02  *** dkranz has joined #openstack-infra
2014-06-12T22:25:04  <jogo> fungi: do you have a nova list from nodepool?
2014-06-12T22:25:19  <fungi> jogo: i can get you one, though it changes by the minute
2014-06-12T22:25:23  *** dizquierdo has joined #openstack-infra
2014-06-12T22:25:27  <fungi> just a sec
2014-06-12T22:25:29  <jogo> fungi: thanks
2014-06-12T22:25:36  <phschwartz> jogo: Unfortunately that is something I can't do at the moment as they have info for non-infra things in them and would be too hard to scrub.
2014-06-12T22:26:01  <fungi> we can at least speak in terms of specific uuids though
2014-06-12T22:26:06  <jogo> phschwartz: thats what I assumed but figured I would ask anyway
2014-06-12T22:26:16  <sdague> phschwartz ftw!
2014-06-12T22:26:18  *** freyes_ has quit IRC
2014-06-12T22:26:29  <jogo> phschwartz: yeah thanks for helping out on this
2014-06-12T22:27:18  *** markmcclain has quit IRC
2014-06-12T22:27:41  <phschwartz> That is what I am here for. I am thinking of a quick fix for node-pool to not hammer our api if it gets stuck in deleting for the edge case. I am leaving now to go to a concert and will have to send an email to infra when I get back if I have come up with something good.
2014-06-12T22:28:07  <jogo> phschwartz: why would that help?
2014-06-12T22:28:14  <jogo> less load?
2014-06-12T22:28:28  *** weshay has quit IRC
2014-06-12T22:29:11  <phschwartz> In about 10 days there have been over 55k requests to delete the same instances that are stuck in deleting
2014-06-12T22:29:20  <phschwartz> That is traffic that is a waste :)
2014-06-12T22:29:38  <jogo> phschwartz: waste yes, but not sure how that would help infra
2014-06-12T22:29:56  *** dizquierdo has quit IRC
2014-06-12T22:30:03  <jogo> just not yest convinced that would make things better per se.
2014-06-12T22:30:11  <phschwartz> That is why I have to think on the best way to do it because if something is stuck in deleting for a long time we need it to report, not just try to delete it over and over again
2014-06-12T22:30:38  <phschwartz> well I am off, I will be back in a bit.
2014-06-12T22:30:40  <fungi> jogo: ...
2014-06-12T22:30:41  <sdague> phschwartz: well that was my tongue in cheek idea of having nodepool open a ticket
2014-06-12T22:30:45  <fungi> dfw: http://paste.openstack.org/show/83880
2014-06-12T22:30:49  <fungi> iad: http://paste.openstack.org/show/83881
2014-06-12T22:30:53  <fungi> ord: http://paste.openstack.org/show/83882
2014-06-12T22:30:53  <sdague> but then you'd get a lot of tickets :)
2014-06-12T22:31:44  <fungi> thanks again for the help phschwartz! enjoy the concert
2014-06-12T22:32:08  *** gokrokve_ has quit IRC
2014-06-12T22:32:15  <jogo> phschwartz: o/
2014-06-12T22:32:19  <clarkb> ok I have slowlog setup for both index and serach
2014-06-12T22:32:27  <clarkb> the search slowlog is empty even with trace at 200ms
2014-06-12T22:32:45  <jogo> fungi: just as phschwartz said
2014-06-12T22:32:47  <clarkb> so I think we can reasonably confirm that there is no searching
2014-06-12T22:33:02  <sdague> another gate reset coming, ceilometer unit tests
2014-06-12T22:33:22  <jogo> fungi: what does  'nova show $instance in error,deleting' say
2014-06-12T22:33:36  *** esker has joined #openstack-infra
2014-06-12T22:33:49  <jogo> fungi: hmm I think we have a reset state button somewhere in nova
2014-06-12T22:33:52  <clarkb> this appears to be an indexing problem too
2014-06-12T22:34:00  <clarkb> you know I wonder if we just have a cranky volume
2014-06-12T22:34:05  <clarkb> and it acts up in intervals
2014-06-12T22:34:07  <sdague> https://jenkins04.openstack.org/job/gate-ceilometer-python26/666/console actually kind of weird
2014-06-12T22:34:17  <clarkb> which is why we see it as a cyclic problem
2014-06-12T22:34:19  <clarkb> fungi: ^
2014-06-12T22:34:32  <sdague> clarkb: like we're getting hit by a qos issue?
2014-06-12T22:34:36  <clarkb> sdague: maybe
2014-06-12T22:34:44  <clarkb> we hit max number of iops for that period then get throttled
2014-06-12T22:35:02  <sdague> are the ssd volumes in rax?
2014-06-12T22:35:11  <clarkb> we are not using ssd volumes iirc but they have them
2014-06-12T22:35:28  <sdague> so I'd expect they'd be configured for higher iops, no?
2014-06-12T22:35:35  <clarkb> I would expect so
2014-06-12T22:35:39  <jogo> fungi: reset-state isn't in rax :/
2014-06-12T22:35:41  <clarkb> I think we really need to get in touch with pvo
2014-06-12T22:35:44  <clarkb> mordred_phone: any luck?
2014-06-12T22:36:27  <clarkb> the slow log isn't growing at an insane rate so I will leave it in place for a bit and maybe we will see it drop off on the next downward portion of the cycle
2014-06-12T22:36:53  *** andreaf has quit IRC
2014-06-12T22:37:02  <jogo> fungi: so it looks like we are tickling a bug in RAX that is causing deletes to error out.
2014-06-12T22:37:19  <jogo> perahps when phschwartz gets back he can help tell us what that is
2014-06-12T22:37:49  *** dangers is now known as dangers_away
2014-06-12T22:38:47  <anteaya> so we have ERROR deleting and ACTIVE deleting, so ERROR deleting are the stuck nodes?
2014-06-12T22:39:09  <jogo> anteaya: that is my understanding
2014-06-12T22:39:28  <sdague> clarkb: is the slow log going to give us slow queries?
2014-06-12T22:39:53  *** thedodd has quit IRC
2014-06-12T22:39:54  <anteaya> and hopefully ACTIVE deleting turns into a DELETED status
2014-06-12T22:39:58  <fungi> jogo: is 'nova show $instance in error,deleting' an actual syntax? i get help/usage output from that
2014-06-12T22:40:03  *** crc32 has quit IRC
2014-06-12T22:40:27  <jogo> fungi: nova show f160258b-46d6-4122-a217-4294cf6a9bb5
2014-06-12T22:40:39  *** mrmartin has joined #openstack-infra
2014-06-12T22:40:47  <jogo> for rax-dfw
2014-06-12T22:41:03  <fungi> jogo: oh, you mean show output for each of the nodes in one of those two states. i can construct a shell one-liner to get that into a paste. just a sec
2014-06-12T22:41:14  <jogo> fungi: I just need one example
2014-06-12T22:41:15  <jogo> not all
2014-06-12T22:41:37  <jogo> fungi: all will take too long
2014-06-12T22:42:18  <jogo> fungi: as a user I don't think there will be any really useful info but figured it is worht a shot
2014-06-12T22:42:18  <mattoliverau> Morning
2014-06-12T22:42:36  *** HenryG has joined #openstack-infra
2014-06-12T22:43:17  <anteaya> morning mattoliverau
2014-06-12T22:44:19  <jogo> lifeless: https://review.openstack.org/#/c/99743/
2014-06-12T22:45:17  <fungi> jogo: well, too late... http://paste.openstack.org/show/83885
2014-06-12T22:45:18  <lifeless> jogo: yes :)
2014-06-12T22:46:01  <fungi> ConnectionFailed' object has no attribute 'status_code'
2014-06-12T22:46:29  *** zehicle_defcore has quit IRC
2014-06-12T22:46:29  *** gokrokve has joined #openstack-infra
2014-06-12T22:46:37  <jogo> lifeless: I want to get rid of that rule as well
2014-06-12T22:46:51  <clarkb> sdague: yes it will giev us slow queries too
2014-06-12T22:46:53  <jogo> fungi: ohh this was fun
2014-06-12T22:46:53  <jogo> | fault                  | {u'message': u'Connection to neutron failed: Maximum attempts reached', u'code': 500, u'created': u'2014-06-05T05:45:02Z'} |
2014-06-12T22:47:08  <clarkb> sdague: we will need to fine tune the valeus as right now they are not conservative at all and we will probably fill the logs up real quick
2014-06-12T22:47:09  *** jhesketh has quit IRC
2014-06-12T22:47:11  <jogo> its neutron hahahaha
2014-06-12T22:47:40  <jogo> sdague: you would like this  http://paste.openstack.org/show/83885/
2014-06-12T22:47:46  <anteaya> is connection reset by peer neutron as well?
2014-06-12T22:47:58  <jogo> anteaya: I *think* so but don't quote me on that
2014-06-12T22:48:00  <jogo> phschwartz: ^
2014-06-12T22:48:06  <anteaya> and no attribute 'status_code'?
2014-06-12T22:48:13  <fungi> jogo: heh
2014-06-12T22:48:20  <sdague> heh
2014-06-12T22:48:55  <jogo> anteaya: you ask too many good questions
2014-06-12T22:48:58  <jogo> not sure
2014-06-12T22:49:10  <anteaya> sorry to spoil the taring and feathering party
2014-06-12T22:49:13  <anteaya> do carry on
2014-06-12T22:49:26  <jogo> mestery: ^
2014-06-12T22:50:38  <sdague> jogo: I wonder if that's a failed conversion from objects in cells
2014-06-12T22:50:56  <jogo> sdague: ohh possibly.
2014-06-12T22:51:06  <sdague> I know it's lagging there
2014-06-12T22:51:20  <sdague> you should poke alaski, I think he was chasing some of that
2014-06-12T22:51:23  <jogo> of 16 nodes in deleting
2014-06-12T22:51:31  <clarkb> sdague: I have a few entries in the indexing slow log on the other nodes but nothing like on 01
2014-06-12T22:51:33  <jogo> 7 have neutron in the error message
2014-06-12T22:51:42  <jogo> alaski: ^ poke
2014-06-12T22:51:49  * jogo wonders off to catch BART
2014-06-12T22:51:50  <clarkb> and 01 has the same number of master and replica shards as three other machines
2014-06-12T22:52:41  *** sarob has quit IRC
2014-06-12T22:52:51  <clarkb> I am becoming more suspicious of that volume (but that may be the lazy in me
2014-06-12T22:53:18  <sdague> clarkb: I support the lazy in you
2014-06-12T22:53:22  *** sarob has joined #openstack-infra
2014-06-12T22:53:28  <clarkb> indexing is properly load balanced. the logstash processes join the cluster and talk directly to the node that needs the data
2014-06-12T22:53:34  <sdague> I do like the idea of trying to get higher performance volumes
2014-06-12T22:53:44  <clarkb> I have mostly confirmed at this point that queries do not cause the issue though they may contribute
2014-06-12T22:53:59  <clarkb> it is present in indexing but only on one node with similar use as compared to other nodes in the cluster
2014-06-12T22:54:02  <sdague> can you do some straight out IO testing?
2014-06-12T22:54:15  <sdague> like shut down ES and just beat on the volumes?
2014-06-12T22:54:19  <clarkb> sdague: numbers probably won't mean anything without shutting down the cluster
2014-06-12T22:54:26  <clarkb> yeah we could probably do something like that
2014-06-12T22:54:26  <sdague> right
2014-06-12T22:54:27  <fungi> bonnie++ or whatever the kids are using these days
2014-06-12T22:54:30  <sdague> yeh
2014-06-12T22:54:46  <sdague> that should at least give a definitive answer of volume vs. configuration
2014-06-12T22:55:06  <sdague> also, some interesting data on the volume throughput
2014-06-12T22:55:21  <clarkb> do we want to shut everything down for that though?
2014-06-12T22:55:36  <fungi> clarkb: it is a cloud. entirely possible one volume is sharing a device crushed under the weight of i/o from another neighboring tenant
2014-06-12T22:55:56  <sdague> clarkb: well, I don't know
2014-06-12T22:56:09  <sdague> on the up side, it would give us some answers, maybe
2014-06-12T22:56:21  <openstackgerrit> Adam Gandelman proposed a change to openstack-infra/config: Pre-cache UCA packages during nodepool img build  https://review.openstack.org/99740
2014-06-12T22:56:25  *** james_li has quit IRC
2014-06-12T22:56:32  <sdague> and we've not drained the inbound queue in days
2014-06-12T22:56:44  <sdague> on the down side, our blindspot would get much bigger
2014-06-12T22:56:55  <fungi> or sharing an i/o channel choked by a neighbor on the same nova compute node
2014-06-12T22:57:02  <clarkb> fungi: right
2014-06-12T22:57:19  *** james_li has joined #openstack-infra
2014-06-12T22:57:24  <sdague> clarkb: so what if you killed es01 brought up a new compute, and allocated a fresh volume for it?
2014-06-12T22:57:35  <clarkb> sdague: we could do something like that too
2014-06-12T22:57:54  <clarkb> sdague: my only concern there is we are so close to the edge on available disk that the cluster may die
2014-06-12T22:57:54  <sdague> well, actually, what about this
2014-06-12T22:57:55  <fungi> though the shard rebuilding would be similarly traumatic to cluster performance
2014-06-12T22:58:08  <clarkb> sdague: we don't currently have enough extra disk on nodes to lose one :/
2014-06-12T22:58:10  <sdague> clarkb: even after kiling the indexes?
2014-06-12T22:58:15  <clarkb> sdague: yeah
2014-06-12T22:58:19  <bodepd> any chance I can get one more +2 on the puppet repos I am waiting for?
2014-06-12T22:58:22  <sdague> how deep are our indexes now?
2014-06-12T22:58:26  *** eharney has quit IRC
2014-06-12T22:58:37  <sdague> can we trim down?
2014-06-12T22:58:53  <sdague> like trim to 7 days
2014-06-12T22:59:01  <bodepd> I'm also curious about the best way to proceed about the module decoupling from config
2014-06-12T22:59:15  <bodepd> I assume it's blocked b/c you guys would rather switch to r10k?
2014-06-12T22:59:21  <sdague> or can we do add then remove?
2014-06-12T22:59:30  <sdague> so bring in the new node first
2014-06-12T22:59:36  <sdague> reshard, and drop the old one
2014-06-12T23:00:11  <sdague> I would say keep es01 around after just to benchmark that volume
2014-06-12T23:00:18  <sdague> to know if it seems bad
2014-06-12T23:00:38  <clarkb> sdague: http://paste.openstack.org/show/83890/
2014-06-12T23:01:05  <sdague> ok, I'm not sure what I'm looking at :)
2014-06-12T23:01:17  <clarkb> sdague: its teh size as reported by _status for each index
2014-06-12T23:01:21  <clarkb> sdague: that includes the replica
2014-06-12T23:01:29  <clarkb> so divide by two for size without replica
2014-06-12T23:01:39  *** zzelle has quit IRC
2014-06-12T23:01:40  *** dims_ has quit IRC
2014-06-12T23:01:41  <sdague> ok and what does it need to fit into?
2014-06-12T23:01:44  *** james_li has quit IRC
2014-06-12T23:01:52  <clarkb> 6TB with enough room that ext4 doesn't hate us
2014-06-12T23:02:13  <fungi> ext4 will always hate you, it just does a better job of hiding it than ext3 did
2014-06-12T23:03:00  <clarkb> fungi: what was your process for spinning up nodes and adding the volumes
2014-06-12T23:03:11  <clarkb> fungi: such that ES doesn't come up without a volume and immediately get cranky
2014-06-12T23:03:30  <clarkb> fungi: were you just relying on firewall rules to prevent it from joining the cluster?
2014-06-12T23:04:50  *** adalbas has quit IRC
2014-06-12T23:04:51  <clarkb> also  Ireally wish nova + cinder had a better first boot story
2014-06-12T23:05:22  <clarkb> mikal: jgriffith: it would be amazing if I could spin up a node with a block device preattached and formatted
2014-06-12T23:05:22  *** jamielennox|away is now known as jamielennox
2014-06-12T23:06:25  <fungi> clarkb: hummm... i think i manually added them to the cluster one at a time as they were ready, though now i can't remember
2014-06-12T23:06:49  <clarkb> fungi: yeah I think that will work
2014-06-12T23:07:10  <clarkb> fungi: basically first boot and puppet will use normal disk then stop ES, attach volume, format, mount, start ES
2014-06-12T23:07:28  <jgriffith> clarkb: hmmm
2014-06-12T23:07:30  <clarkb> and sometime after ES is stopped update firewall rules
2014-06-12T23:07:38  <jgriffith> clarkb: I could probably make that happen
2014-06-12T23:07:52  <clarkb> jgriffith: the use case being on first boot you tend to do all sorts of config and stuff
2014-06-12T23:08:13  <jgriffith> clarkb: I could add an option to "cinder create" that let's you do partitioning and formatting
2014-06-12T23:08:22  <clarkb> jgriffith: and you can either induce a failure the first time if the fs isn't there and deal with it later
2014-06-12T23:08:26  <jgriffith> clarkb: yeah, I get that for sure
2014-06-12T23:08:28  <clarkb> jgriffith: or you run into masking of stuff
2014-06-12T23:08:35  <clarkb> neither of which is great and has different trade offs
2014-06-12T23:08:53  <jgriffith> clarkb: that's why I use BFV for everything :)
2014-06-12T23:08:58  <jgriffith> clarkb: I'll write a spec
2014-06-12T23:09:16  <clarkb> fungi: what do you think?
2014-06-12T23:09:21  *** bookwar has quit IRC
2014-06-12T23:09:32  <clarkb> fungi: is it worth going through the rebalance terror to see if we get lucky?
2014-06-12T23:09:39  <clarkb> fungi: or should we maybe poke rax harder?
2014-06-12T23:09:47  *** dkranz is now known as dkranz_afk
2014-06-12T23:09:51  *** sarob has quit IRC
2014-06-12T23:09:52  <clarkb> fungi: sdague: I think the "luck" portion of this is what bothers me most
2014-06-12T23:10:28  <clarkb> jgriffith: so you would create block device first and format it, then nova boot with it attached?
2014-06-12T23:10:31  <clarkb> I think that would work
2014-06-12T23:10:40  <jgriffith> clarkb: yeah
2014-06-12T23:10:50  <jgriffith> clarkb: so cinder could have options at create to do all that
2014-06-12T23:10:55  *** sarob has joined #openstack-infra
2014-06-12T23:10:57  <jgriffith> clarkb: trick is getting nova to mount it
2014-06-12T23:11:02  <clarkb> ++ though I have no idea what that means for you guys
2014-06-12T23:11:04  *** thuc has joined #openstack-infra
2014-06-12T23:11:06  <fungi> clarkb: thinking back, i *believe* what i did was puppet them without any elasticsearch in the global site manifest, add the volumes, then add es in the manifest one patch at a time
2014-06-12T23:11:29  <clarkb> fungi: so you used a dev env with custom site.pp?
2014-06-12T23:11:41  <jgriffith> clarkb: not sure how to make that work in our current nova without just relying on cloud init or something
2014-06-12T23:11:46  <fungi> clarkb: i think i approved patches for them individually
2014-06-12T23:11:56  <clarkb> fungi: oh right
2014-06-12T23:12:00  <fungi> to add and remove cluster members
2014-06-12T23:12:39  *** esker has quit IRC
2014-06-12T23:12:39  <fungi> it went on over the course of days because we didn't want to strain the existing overloaded cluster by doing too many nodes at once
2014-06-12T23:13:03  <clarkb> yeah
2014-06-12T23:13:30  *** jhesketh has joined #openstack-infra
2014-06-12T23:13:38  <clarkb> now we have node /^elasticsearch\d+\.openstack\.org$/ so it will puppet as es server
2014-06-12T23:14:10  <jhesketh> Morning
2014-06-12T23:14:12  <jhesketh> phschwartz: pong
2014-06-12T23:14:13  *** thuc_ has joined #openstack-infra
2014-06-12T23:14:16  <clarkb> jhesketh: o/
2014-06-12T23:14:17  <anteaya> morning jhesketh
2014-06-12T23:14:26  <anteaya> phschwartz is at a concert
2014-06-12T23:14:35  <anteaya> he will be back later
2014-06-12T23:15:18  <clarkb> fungi: I am going to modify that regex to give us the option of doing this the other way
2014-06-12T23:15:33  *** thuc_ has quit IRC
2014-06-12T23:15:37  *** thuc has quit IRC
2014-06-12T23:15:39  *** rcarrillocruz has quit IRC
2014-06-12T23:15:43  <clarkb> but I am still a bit worried it is a lot of work for nothing as its luck of the draw sort of thing
2014-06-12T23:16:06  *** thuc has joined #openstack-infra
2014-06-12T23:16:10  <anteaya> anyone have any reason why paste.o.o 500'd on me a minute or so ago?
2014-06-12T23:16:21  <anteaya> and why is it using so much cache memory? http://cacti.openstack.org/cacti/graph_view.php?action=tree&tree_id=1&leaf_id=14&page=2
2014-06-12T23:16:34  <anteaya> I couldn't see anything else funny on paste from cacti
2014-06-12T23:16:36  <clarkb> anteaya: cache memory is al inux thing
2014-06-12T23:16:52  <clarkb> anteaya: linux says memory is there if it isn't used for anything specific I will use it for cache
2014-06-12T23:16:57  <anteaya> doesn't it seem like paste is using quite a bit?
2014-06-12T23:17:03  <anteaya> oh okay
2014-06-12T23:17:13  <anteaya> so back to why did it 500 on me
2014-06-12T23:17:23  *** esker has joined #openstack-infra
2014-06-12T23:17:27  <anteaya> cacti doestn' point to anything specific
2014-06-12T23:17:32  <clarkb> for the 500 I don't have a specific answer, but guessing its related to trove
2014-06-12T23:17:40  <anteaya> oh
2014-06-12T23:17:59  <anteaya> is that a thing or is it just "oh trove"
2014-06-12T23:18:10  <anteaya> like do we have a bug report for it, or do we want one?
2014-06-12T23:18:22  <clarkb> anteaya: we probably need to properly debug it first
2014-06-12T23:18:32  <anteaya> ah okay
2014-06-12T23:18:32  *** markmcclain has joined #openstack-infra
2014-06-12T23:18:58  <anteaya> I'm guessing I have no much debugging power from this side of being no access to servers
2014-06-12T23:19:02  *** rcarrillocruz has joined #openstack-infra
2014-06-12T23:19:12  <sdague> paste.o.o 500s quite a bit actually
2014-06-12T23:19:21  *** esker has quit IRC
2014-06-12T23:19:27  <sdague> clarkb: are we recording apache logs for that?
2014-06-12T23:19:43  <sdague> I'd say 1 time in 20 I get a 500
2014-06-12T23:20:12  *** ramashri has quit IRC
2014-06-12T23:20:21  <clarkb> sdague: we should be. the puppet apache module (or maybe just ubuntu  apache) seems to do the right thing
2014-06-12T23:20:24  *** thuc has quit IRC
2014-06-12T23:20:25  <clarkb> I can hop on there in a moment
2014-06-12T23:20:28  <jogo> fungi: sunds like we have the bug: nova cannot delete an instance in error,deleting
2014-06-12T23:21:29  <jogo>                     1bc3554b-1f2a-44c7-b9a7-3d8bc956f7cd] Instance is already in deleting state, ignoring this request
2014-06-12T23:21:57  <anteaya> jogo: where did you find that error message?
2014-06-12T23:22:01  <fungi> clarkb: i too remain unconvinced it's worth replacing the node to test this theory. perhaps move the query api endpoint to another node instead and see if the problem stays behind or follows the action?
2014-06-12T23:22:06  <jogo> anteaya: from phschwartz
2014-06-12T23:22:12  <anteaya> jogo: helpful chap
2014-06-12T23:23:07  <openstackgerrit> Clark Boylan proposed a change to openstack-infra/config: Be specific about which ES nodes are puppetable  https://review.openstack.org/99794
2014-06-12T23:23:17  <jogo> b3c9cc504903eccbc68c441a81b0a727a83117fa  I2f97f93bd714e0ea3b6d4fa3ac457ab43eed00e1
2014-06-12T23:23:17  <clarkb> fungi: ^ something like that
2014-06-12T23:23:25  *** ramashri has joined #openstack-infra
2014-06-12T23:23:31  <clarkb> fungi: we still have queries disabled and it happens when indexing
2014-06-12T23:23:40  *** amcrn has joined #openstack-infra
2014-06-12T23:23:48  <clarkb> fungi: I am reasonably confident this doesn't isn't induced by the queries
2014-06-12T23:23:51  *** ihrachyshka has quit IRC
2014-06-12T23:24:18  <fungi> got it
2014-06-12T23:24:23  <sdague> fungi: though we haven't been querying it for the last couple of hours
2014-06-12T23:24:58  <clarkb> fungi: but ya the buckshot approach to cloud is :?
2014-06-12T23:25:01  <clarkb> er :/
2014-06-12T23:25:48  <fungi> scattershot
2014-06-12T23:26:04  <fungi> git yer scatter gun
2014-06-12T23:26:18  <fungi> as we say 'round these parts
2014-06-12T23:27:27  *** atiwari has quit IRC
2014-06-12T23:29:28  <fungi> completely unrelated to anything going on here (other than mentioning the open-source movement and a nod to zero wing), i loved seeing http://www.teslamotors.com/blog/all-our-patent-are-belong-you
2014-06-12T23:29:42  <jesusaurus> clarkb: with an approach like 99749 how would you replace an existing node? if es02 went sideways and a new one needed to be spun up, would the replacement have to be es07 and there would be no es02 afterwards?
2014-06-12T23:29:55  <clarkb> jesusaurus: correct
2014-06-12T23:30:00  <anteaya> fungi: I shouted with joy as I read that
2014-06-12T23:30:04  <clarkb> jesusaurus: in a cattle world that doesn't bother me a whole lot
2014-06-12T23:30:12  <clarkb> jesusaurus: but it could potentially be confusing
2014-06-12T23:30:27  <jogo> phschwartz fungi: https://review.openstack.org/99796
2014-06-12T23:30:35  <jogo> I think ^ should fix things for us
2014-06-12T23:30:49  <jogo> gotta actually test that, etc but thats the idea
2014-06-12T23:30:54  <jogo> sdague: ^
2014-06-12T23:31:06  <clarkb> jesusaurus: one potential way around that is to make all of the ES stuff run on internal addresses
2014-06-12T23:31:06  <jesusaurus> clarkb: i would be confused/annoyed by a set of non-sequential host numbers, but that might just be me
2014-06-12T23:31:07  <fungi> clarkb: jesusaurus: gaps in sequential server numbering don't bother me in the least, and i'm probably close to clinically ocd
2014-06-12T23:31:20  <clarkb> jesusaurus: but at one point I had considered multi az clustering
2014-06-12T23:31:25  <clarkb> jesusaurus: that never happened
2014-06-12T23:31:47  *** mmaglana has joined #openstack-infra
2014-06-12T23:32:38  * fungi has learnt to use his ocd for good, not evil
2014-06-12T23:32:54  <fungi> pragmatic choices are an acceptable loss of consistency
2014-06-12T23:33:37  <anteaya> jogo: I'm confused
2014-06-12T23:33:49  <alaski> jogo: just saw your poke about object conversion and cells
2014-06-12T23:34:07  <anteaya> jogo: I thought the == vm_states.ERROR was the state we are seeing that needs to be addressed
2014-06-12T23:34:45  *** praneshp_ has joined #openstack-infra
2014-06-12T23:36:21  *** mmaglana has quit IRC
2014-06-12T23:36:51  <clarkb> oh boo lodge is being proxied to no mod wsgi'd
2014-06-12T23:36:58  <clarkb> and now I can't find logs /me hunts for them
2014-06-12T23:37:10  *** esker has joined #openstack-infra
2014-06-12T23:37:29  *** praneshp has quit IRC
2014-06-12T23:37:30  *** praneshp_ is now known as praneshp
2014-06-12T23:37:30  <clarkb> upstart to the rescue
2014-06-12T23:37:45  *** esker has quit IRC
2014-06-12T23:38:05  <clarkb> OperationalError: (OperationalError) (2006, 'MySQL server has gone away')
2014-06-12T23:38:09  <clarkb> anteaya: fungi sdague ^
2014-06-12T23:39:27  <clarkb> 110 occurences of that over the last 18 hours or so
2014-06-12T23:39:35  <anteaya> where does it go?
2014-06-12T23:39:41  <anteaya> when it goes away
2014-06-12T23:39:45  *** gokrokve has quit IRC
2014-06-12T23:40:14  <anteaya> now on the east coast of Canada "away" is Quebec, Ontario or the West
2014-06-12T23:40:24  <anteaya> maybe MySQL went there
2014-06-12T23:40:54  <anteaya> I wonder what it does there
2014-06-12T23:41:01  <jogo> alaski: we are digging into why rax is erroring out on so mayn delets http://paste.openstack.org/show/83885/
2014-06-12T23:41:11  <anteaya> probably swats flies like the rest of us
2014-06-12T23:41:11  *** sarob has quit IRC
2014-06-12T23:41:17  <jogo> alaski: and someone thought | fault                  | {u'message': u"'ConnectionFailed' object has no attribute 'status_code'", u'code': 500, u'created': u'2014-06-09T12:41:33Z'} |
2014-06-12T23:41:19  *** sarob_ has joined #openstack-infra
2014-06-12T23:41:20  <jogo>  could be objects
2014-06-12T23:41:33  <anteaya> jogo: so I don't understand your patch
2014-06-12T23:41:44  <anteaya> since I thought the vm_state was ERROR
2014-06-12T23:41:53  <jogo> anteaya: yeah, so wrote that on the train so let me see if it makes any sense
2014-06-12T23:41:54  <mattoliverau> maybe the max_connections needs to be raised in the trove instance
2014-06-12T23:41:58  <anteaya> but your patch seems to say not ERROR
2014-06-12T23:42:00  *** reed has quit IRC
2014-06-12T23:42:08  <anteaya> jogo: okay well I don't understand it yet
2014-06-12T23:43:14  <jogo> so the issue right now is this: you try to deleting an instance, and previously if that failed it went back to active state
2014-06-12T23:43:18  <alaski> jogo: a very good guess, but cells/objects failures are usally "'dict' object has no attribute..."
2014-06-12T23:43:56  <jogo> alaski: also surprised any now many neutron errors you have ;)
2014-06-12T23:44:13  <jogo> anteaya: so https://review.openstack.org/#/c/58829/ changed that behavior
2014-06-12T23:44:16  <clarkb> mattoliverau: possibly
2014-06-12T23:44:18  <alaski> jogo: yeah :(
2014-06-12T23:45:02  <jogo> anteaya: so now instances go into deleting,error
2014-06-12T23:45:08  <jogo> anteaya: which makes more sense.
2014-06-12T23:45:19  <jogo> anteaya: note I am ignoring *why* the delete fails
2014-06-12T23:45:25  <jogo> anteaya: and there was another patch https://review.openstack.org/#/c/55444/
2014-06-12T23:45:45  <jogo> that says if you send a second delete to an instance deleting to ignore it, as its already in deleting state
2014-06-12T23:45:58  <jogo> anteaya: does that sound right so far? this is helping me sanity check this, so thank you for that
2014-06-12T23:46:13  <jogo> alaski: also https://review.openstack.org/#/c/99796/
2014-06-12T23:46:34  <jogo> alaski: I think that should fix a lot of our issues with having instances stuck in error,deleting
2014-06-12T23:47:05  <anteaya> always happy to share in a sanity check
2014-06-12T23:47:10  *** markwash has quit IRC
2014-06-12T23:47:14  <anteaya> and yes I am following the bouncing ball so far
2014-06-12T23:47:46  <jogo> anteaya: so my patch should make the ignore the second delete if already deleting logic to:
2014-06-12T23:47:54  <jogo> ignore if already deleting and not in error state
2014-06-12T23:48:40  <anteaya> oh
2014-06-12T23:48:53  <anteaya> ummmm how does that fix what we are seeing then?
2014-06-12T23:48:55  <fungi> clarkb: mattoliverau: that sounds like a very, very plausible explanation for what we're seeing with paste.o.o
2014-06-12T23:49:03  <anteaya> or at least any part of what we are seeing?
2014-06-12T23:49:32  <jogo> anteaya: it will fix the part where we keep trying to delete an isntance and it doesn't delete
2014-06-12T23:49:48  <jogo> anteaya: if fungi tries to manaully delete one of the instances in error,deleting it won't work
2014-06-12T23:49:50  <anteaya> okay that was part of what phschwartz wanted
2014-06-12T23:50:00  <jogo> with my patch it should be deletable
2014-06-12T23:50:00  <anteaya> to reduce using resources to no effect
2014-06-12T23:50:09  <anteaya> oh
2014-06-12T23:50:12  <jogo> well he wanted us to give up on those instances
2014-06-12T23:50:15  <anteaya> any way to test it?
2014-06-12T23:50:21  <anteaya> he did
2014-06-12T23:50:26  <jogo> anteaya: unit testing?
2014-06-12T23:50:29  <anteaya> but we still need to get rid of them
2014-06-12T23:50:39  <jogo> anteaya: yup, this patch should do that (if it works)
2014-06-12T23:50:52  <anteaya> well yes, but I was thinking put it in action and get rid of one of those instances
2014-06-12T23:51:00  <anteaya> since we have a few to try to kill
2014-06-12T23:51:07  <jogo> anteaya: ohh well if we could get into rax and change code
2014-06-12T23:51:12  <jogo> (maybe someoen can)
2014-06-12T23:51:20  <anteaya> guess that is pvo then
2014-06-12T23:52:30  *** thuc_ has joined #openstack-infra
2014-06-12T23:53:38  <anteaya> jogo: in the commit message can I get some urls to the two patches you linked me to: https://review.openstack.org/#/c/99796/1//COMMIT_MSG
2014-06-12T23:53:45  *** thuc_ has quit IRC
2014-06-12T23:53:55  <anteaya> with a small sample of the chain of events you just described for me?
2014-06-12T23:54:14  <jogo> anteaya: yup, I am transcribing what I told you into it
2014-06-12T23:54:21  <jogo> anteaya: one step ahead of me
2014-06-12T23:54:22  <anteaya> awesome thank you
2014-06-12T23:54:24  <anteaya> :D
2014-06-12T23:54:31  *** thuc_ has joined #openstack-infra
2014-06-12T23:54:41  <anteaya> composing commit messages is harder than just typing stuff into irc
2014-06-12T23:54:49  <anteaya> you don't need puncuation or anything
2014-06-12T23:55:06  <anteaya> unless you _want_ to put a full stop at the end of a sentence.
2014-06-12T23:55:12  <anteaya> then you can, in irc.
2014-06-12T23:55:20  <anteaya> long live the full stop.
2014-06-12T23:55:27  <fungi> it's like typing in telegram.
2014-06-12T23:55:33  <anteaya> ha ha ha
2014-06-12T23:55:55  <clarkb> I am still trying to sort out lodgeits concurrency model
2014-06-12T23:56:09  <fungi> clarkb: it *has* a concurrency model?
2014-06-12T23:56:16  <clarkb> fungi: mattoliverau ^ it uses weurkzeug script.make_runserver
2014-06-12T23:56:48  <fungi> clarkb: in my head that translates to "someone should write a paste server"
2014-06-12T23:57:21  <clarkb> https://github.com/mitsuhiko/werkzeug/blob/master/werkzeug/script.py#L288
2014-06-12T23:57:32  <clarkb> that line is great. we are using a development server...
2014-06-12T23:57:52  <clarkb> it looks like by default it uses one proces without threads
2014-06-12T23:58:00  <clarkb> so we shouldn't have connection issues right?
2014-06-12T23:58:10  *** rcarrillocruz has quit IRC
2014-06-12T23:58:14  <fungi> bwahaha
2014-06-12T23:58:19  <jogo> comstud: can you help reset task states for now?
2014-06-12T23:59:02  *** rcarrillocruz has joined #openstack-infra
2014-06-12T23:59:31  <fungi> clarkb: yeah, unless it's not a concurrency issue but rather a rate issue?
2014-06-12T23:59:37  *** ramashri has quit IRC
2014-06-12T23:59:42  <clarkb> fungi: could be
2014-06-12T23:59:48  <clarkb> poor server can't deal with it
2014-06-12T23:59:58  *** jerryz_ has quit IRC
