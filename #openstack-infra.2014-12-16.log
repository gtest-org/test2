2014-12-16T00:00:22  <clarkb> jeblair so I think we can do that it just requires upgrading all services on onehost/venv together
2014-12-16T00:00:23  <jeblair> jogo: 2) because it prohibits us from placing version caps on stable branches in the case that we can not find an overlapping dependency that works with both
2014-12-16T00:00:25  *** zz_avozza is now known as avozza
2014-12-16T00:00:30  <jeblair> clarkb: i think we're all in agreement on that
2014-12-16T00:00:35  <clarkb> which sdague was opposed to when we talked about it
2014-12-16T00:00:39  <jeblair> clarkb: the wrinkle is ncpu partial upgrade
2014-12-16T00:00:52  <jeblair> clarkb: apparently grenade used to work like that, which makes sense to me.
2014-12-16T00:00:58  <clarkb> +1
2014-12-16T00:01:26  <clarkb> (I was aproponent for this a little while back but was the only one)
2014-12-16T00:01:32  *** bradjones has joined #openstack-infra
2014-12-16T00:01:36  <jeblair> clarkb: so partial upgrades need per-component environments, and each environment needs a full shutdown/upgrade/start
2014-12-16T00:02:16  <jeblair> clarkb: all-in-one upgrades, it doesn't matter whether we use per-component envs or not.  but regardless of the number of envs (one or many) it or they need a full stop/upgrade/start
2014-12-16T00:02:46  <jeblair> clarkb: yeah, it does not seem feasible to me to handle the partial upgrade case without environments/containers/equiv
2014-12-16T00:03:04  <clarkb> yup
2014-12-16T00:03:09  <anteaya> notmyname: zaro is probably the best person to talk to about gerrit
2014-12-16T00:03:11  <jeblair> clarkb: i still very much think that at the end of the process, each release of openstack should function with the same deps.  but we can ensure that with requirements check jobs and testing
2014-12-16T00:03:27  <jeblair> clarkb: including perhaps the simple install-only all-in-one devstack test
2014-12-16T00:04:24  *** yfried|afk is now known as yfried
2014-12-16T00:04:26  <jogo> jeblair: I was thinking standard devstack wouldn't use venvs
2014-12-16T00:04:29  <jogo> and grenade jobs would
2014-12-16T00:04:48  <mordred> clarkb: I split 141677 and also added https://review.openstack.org/141946
2014-12-16T00:06:07  *** zz_zz_zz_sabari is now known as sabari
2014-12-16T00:06:16  <dtroyer> jogo: that'll be hard as grenade just calls the devstack functions to do the start of new services, so devstack has to run either way in that case
2014-12-16T00:06:40  <jogo> dtroyer: right, step 1 is teach grenade about venvs
2014-12-16T00:06:49  <jogo> step 2 is teach stable/juno grenade about venvs
2014-12-16T00:07:02  <jogo> and make those off by default
2014-12-16T00:07:07  <dtroyer> no, teach devstack about venvs.  grenade doens't know anything about actually running services
2014-12-16T00:07:29  <jogo> that is what I was thinking, but apparently not what I wrote
2014-12-16T00:07:39  <jeblair> jogo:
2014-12-16T00:07:45  <dtroyer> well ok then  ;)
2014-12-16T00:08:19  *** yamamoto has joined #openstack-infra
2014-12-16T00:08:40  <jeblair> jogo: very specifically, the thing that is broken for us right now is that we would like to release oslo.db 1.0.X, and then cap juno at <1.1, however, since master is at >=1.1 we are unable to do that because of the upgrade
2014-12-16T00:09:35  <jogo> jeblair: excellent, thanks
2014-12-16T00:09:50  <jeblair> jogo: so that's the friendly version of the problem which we can work around, with some difficulty, because we think we can construct a release that will satisfy all the requirements.  but if it were anyone other than us, we'd be sol.
2014-12-16T00:10:19  *** bitblt has joined #openstack-infra
2014-12-16T00:10:21  *** avozza is now known as zz_avozza
2014-12-16T00:11:17  <mordred> dhellmann: updated https://review.openstack.org/141946 to address your comments from 141677
2014-12-16T00:11:49  *** zz_avozza is now known as avozza
2014-12-16T00:12:06  *** dannywilson has quit IRC
2014-12-16T00:12:13  *** Masahiro has joined #openstack-infra
2014-12-16T00:12:44  *** dannywilson has joined #openstack-infra
2014-12-16T00:14:24  *** yfried is now known as yfried|afk
2014-12-16T00:14:27  *** ddieterly has quit IRC
2014-12-16T00:15:24  *** sputnik1_ has joined #openstack-infra
2014-12-16T00:15:39  *** fandi has joined #openstack-infra
2014-12-16T00:15:54  *** sputnik13 has quit IRC
2014-12-16T00:17:06  *** bitblt has quit IRC
2014-12-16T00:17:12  *** dannywilson has quit IRC
2014-12-16T00:17:12  *** Masahiro has quit IRC
2014-12-16T00:20:25  <anteaya> clarkb fungi jeblair any reason to hold off +A'ing clarks make prerelease and release pipelines match pep440 patch? https://review.openstack.org/#/c/141831/1
2014-12-16T00:20:43  <openstackgerrit> Merged openstack-infra/elastic-recheck: Bugs _in_ this project go in StoryBoard now  https://review.openstack.org/139120
2014-12-16T00:20:44  *** sputnik1_ is now known as sputnik13
2014-12-16T00:21:46  <clarkb> anteaya its probably worth getting eyes on
2014-12-16T00:21:57  <anteaya> I will just review then and not +A
2014-12-16T00:27:34  *** sabari is now known as zz_sabari
2014-12-16T00:27:55  *** mtanino has quit IRC
2014-12-16T00:28:09  *** fandi has quit IRC
2014-12-16T00:29:13  *** annegent_ has joined #openstack-infra
2014-12-16T00:33:19  *** jerryz has joined #openstack-infra
2014-12-16T00:34:43  *** teran has joined #openstack-infra
2014-12-16T00:34:53  *** annegent_ has quit IRC
2014-12-16T00:35:05  *** groknix has joined #openstack-infra
2014-12-16T00:35:09  *** david-lyle is now known as david-lyle_afk
2014-12-16T00:35:09  *** fandi has joined #openstack-infra
2014-12-16T00:35:21  *** groknix has quit IRC
2014-12-16T00:35:46  *** dizquierdo has quit IRC
2014-12-16T00:36:59  *** amitgandhinz has joined #openstack-infra
2014-12-16T00:37:27  *** pc_m has quit IRC
2014-12-16T00:38:26  *** dims has joined #openstack-infra
2014-12-16T00:39:17  <openstackgerrit> Ramy Asselin proposed openstack-infra/infra-specs: Add spec for in-tree 3rd party ci solution  https://review.openstack.org/139745
2014-12-16T00:39:52  *** teran has quit IRC
2014-12-16T00:41:03  *** oomichi has joined #openstack-infra
2014-12-16T00:41:37  *** amitgandhinz has quit IRC
2014-12-16T00:43:41  *** ZZelle has quit IRC
2014-12-16T00:43:57  <jogo> mordred: https://review.openstack.org/#/c/10351/
2014-12-16T00:44:03  <jogo> did this ever do anything?
2014-12-16T00:51:19  *** dpaterson has quit IRC
2014-12-16T00:51:50  *** emagana has joined #openstack-infra
2014-12-16T00:51:58  *** Masahiro has joined #openstack-infra
2014-12-16T00:52:15  *** michchap_ has joined #openstack-infra
2014-12-16T00:54:29  *** michchap has quit IRC
2014-12-16T00:56:49  *** emagana has quit IRC
2014-12-16T00:58:09  *** alexpilotti has joined #openstack-infra
2014-12-16T00:59:47  *** unicell has joined #openstack-infra
2014-12-16T01:00:49  *** otter768 has joined #openstack-infra
2014-12-16T01:00:53  <jogo> https://github.com/openstack-dev/devstack says this is oneiric powered development environment for openstack
2014-12-16T01:00:57  <jogo> that doesn't sound right
2014-12-16T01:01:53  <pleia2> hah, it was a couple years ago
2014-12-16T01:02:40  <jogo> I didn't see any description in project-config
2014-12-16T01:02:48  <anteaya> jhesketh: I need to see if I can get some sleep see you at 0800 for the meeting
2014-12-16T01:04:20  *** camunoz has quit IRC
2014-12-16T01:04:24  *** sabeen3 has joined #openstack-infra
2014-12-16T01:04:37  <pleia2> jogo: yeah, I just grepped through too, I wonder if it's something funny with our github initial sync script
2014-12-16T01:04:49  <jhesketh> anteaya: okay, last I read though there was still disagreements about that meeting
2014-12-16T01:04:49  *** sabeen1 has quit IRC
2014-12-16T01:05:01  <jhesketh> I didn't feel like that was resolved unless I've missed something
2014-12-16T01:05:17  *** otter768 has quit IRC
2014-12-16T01:05:32  *** ChuckC has quit IRC
2014-12-16T01:06:32  *** avozza is now known as zz_avozza
2014-12-16T01:06:44  *** mtanino has joined #openstack-infra
2014-12-16T01:06:57  <openstackgerrit> Merged openstack-infra/project-config: Fix api-wg job names and placement  https://review.openstack.org/141306
2014-12-16T01:07:31  <jogo> pleia2: yeah, maybe we don't erase if its empty
2014-12-16T01:07:32  *** markmcclain has quit IRC
2014-12-16T01:08:56  *** mmaglana has quit IRC
2014-12-16T01:09:13  <pleia2> hmm, we didn't use an upstream: when pulling in devstack, I don't actually know how it was done
2014-12-16T01:09:36  <anteaya> jhesketh: I am chairing a meeting at 0800
2014-12-16T01:09:44  <jogo> pleia2: o_O
2014-12-16T01:09:46  <anteaya> jhesketh: anyone who feels like showing up can join me
2014-12-16T01:09:59  <pleia2> jogo: at least, it's not in projects.yaml
2014-12-16T01:11:04  <zxiiro> With JJB is it possible to make variable variables?
2014-12-16T01:11:21  <jhesketh> anteaya: okay, fair enough
2014-12-16T01:11:33  <anteaya> jhesketh: thanks
2014-12-16T01:11:43  <zxiiro> I want to pass a value that it, itself is a variable to a job-template
2014-12-16T01:13:42  *** sarob has quit IRC
2014-12-16T01:15:33  *** sputnik13 has quit IRC
2014-12-16T01:15:54  *** sputnik13 has joined #openstack-infra
2014-12-16T01:16:59  <jyuso> anteaya: hi:)
2014-12-16T01:20:35  *** camunoz has joined #openstack-infra
2014-12-16T01:22:39  *** Alexandra_ has joined #openstack-infra
2014-12-16T01:22:42  *** asettle has quit IRC
2014-12-16T01:23:16  *** Alexandra_ is now known as asettle
2014-12-16T01:23:56  *** wenlock has quit IRC
2014-12-16T01:27:37  *** ryanpetrello has quit IRC
2014-12-16T01:30:49  *** annegent_ has joined #openstack-infra
2014-12-16T01:31:32  *** che-arne|2 has joined #openstack-infra
2014-12-16T01:32:42  *** ryanpetrello has joined #openstack-infra
2014-12-16T01:33:05  *** sputnik13 has quit IRC
2014-12-16T01:33:11  *** che-arne has quit IRC
2014-12-16T01:33:20  *** prad has quit IRC
2014-12-16T01:34:26  *** yaguang has joined #openstack-infra
2014-12-16T01:35:33  *** annegent_ has quit IRC
2014-12-16T01:36:06  *** julim has quit IRC
2014-12-16T01:36:19  *** teran has joined #openstack-infra
2014-12-16T01:37:44  <openstackgerrit> Spencer Krum proposed openstack-infra/infra-specs: Spec to refactor puppet code in openstack_project  https://review.openstack.org/137471
2014-12-16T01:40:10  *** mmaglana has joined #openstack-infra
2014-12-16T01:41:09  *** teran has quit IRC
2014-12-16T01:42:03  *** ChuckC has joined #openstack-infra
2014-12-16T01:43:14  *** hdd has quit IRC
2014-12-16T01:44:25  <jogo> hmm I tried running devstack locally and got http://paste.openstack.org/show/151513/
2014-12-16T01:46:13  <jogo> dhellmann: ^
2014-12-16T01:46:43  *** lttrl has quit IRC
2014-12-16T01:46:52  *** bdpayne has quit IRC
2014-12-16T01:47:45  *** alexpilotti has quit IRC
2014-12-16T01:48:59  <openstackgerrit> Joshua Hesketh proposed openstack-infra/project-config: Push dg-tempest-dsvm-full logs to swift  https://review.openstack.org/141668
2014-12-16T01:50:25  *** mmaglana has quit IRC
2014-12-16T01:51:53  *** BadCub02 has quit IRC
2014-12-16T01:52:51  *** emagana has joined #openstack-infra
2014-12-16T01:53:26  <zxiiro> With JJB is it possible to set the JDK used by the build? I can't find any docs on how to do so except one which lets you configure it for the sonar plugin, i want to set it job wide.
2014-12-16T01:56:57  *** emagana has quit IRC
2014-12-16T02:05:42  *** mtanino has quit IRC
2014-12-16T02:06:24  *** dims has quit IRC
2014-12-16T02:06:56  *** dims has joined #openstack-infra
2014-12-16T02:06:56  *** sarob has joined #openstack-infra
2014-12-16T02:07:11  <heyongli> jogo,  the blueprints for the third-party CI pci test cases is sent out:  https://review.openstack.org/#/c/141270/
2014-12-16T02:09:55  *** gyee has quit IRC
2014-12-16T02:10:45  *** yaguang has quit IRC
2014-12-16T02:11:02  *** yaguang has joined #openstack-infra
2014-12-16T02:11:16  *** dims has quit IRC
2014-12-16T02:13:57  *** shashankhegde has quit IRC
2014-12-16T02:14:11  *** spzala has joined #openstack-infra
2014-12-16T02:16:29  *** oomichi has quit IRC
2014-12-16T02:18:40  *** dhp_ has joined #openstack-infra
2014-12-16T02:19:10  *** dhp has quit IRC
2014-12-16T02:19:14  *** dhp_ is now known as dhp
2014-12-16T02:19:17  *** ryanpetrello has quit IRC
2014-12-16T02:19:29  *** sarob has quit IRC
2014-12-16T02:19:53  *** adalbas has quit IRC
2014-12-16T02:26:51  *** camunoz has quit IRC
2014-12-16T02:27:16  *** zz_avozza is now known as avozza
2014-12-16T02:29:17  *** yaguang has quit IRC
2014-12-16T02:29:37  *** annegent_ has joined #openstack-infra
2014-12-16T02:31:33  *** yaguang has joined #openstack-infra
2014-12-16T02:34:21  *** annegent_ has quit IRC
2014-12-16T02:34:59  *** melwitt has quit IRC
2014-12-16T02:37:07  *** teran has joined #openstack-infra
2014-12-16T02:38:44  *** avozza is now known as zz_avozza
2014-12-16T02:39:29  *** camunoz has joined #openstack-infra
2014-12-16T02:40:45  *** zxiiro has quit IRC
2014-12-16T02:41:49  *** teran has quit IRC
2014-12-16T02:42:07  *** Ryan_Lane has quit IRC
2014-12-16T02:43:42  *** emagana has joined #openstack-infra
2014-12-16T02:45:57  *** ivar-laz_ has joined #openstack-infra
2014-12-16T02:46:10  *** whayutin_ has quit IRC
2014-12-16T02:48:21  *** emagana has quit IRC
2014-12-16T02:48:36  *** wuhg has joined #openstack-infra
2014-12-16T02:48:53  *** zxiiro has joined #openstack-infra
2014-12-16T02:49:27  *** ivar-lazzaro has quit IRC
2014-12-16T02:50:18  *** emagana has joined #openstack-infra
2014-12-16T02:50:59  *** jaypipes has joined #openstack-infra
2014-12-16T02:51:13  *** mriedem has quit IRC
2014-12-16T02:51:57  <openstackgerrit> Matthew Treinish proposed openstack-infra/subunit2sql: Update TODO file  https://review.openstack.org/141965
2014-12-16T02:53:08  *** koolhead17 has joined #openstack-infra
2014-12-16T02:54:54  *** emagana has quit IRC
2014-12-16T02:59:18  *** dims has joined #openstack-infra
2014-12-16T02:59:30  *** KanagarajM has joined #openstack-infra
2014-12-16T03:01:13  *** mmaglana has joined #openstack-infra
2014-12-16T03:01:44  *** otter768 has joined #openstack-infra
2014-12-16T03:02:03  *** Masahiro has quit IRC
2014-12-16T03:02:35  *** Masahiro has joined #openstack-infra
2014-12-16T03:03:04  *** annegent_ has joined #openstack-infra
2014-12-16T03:03:24  *** koolhead17 has quit IRC
2014-12-16T03:03:43  *** jyuso has quit IRC
2014-12-16T03:05:10  *** annegent_ has quit IRC
2014-12-16T03:05:44  *** mmaglana has quit IRC
2014-12-16T03:06:52  *** otter768 has quit IRC
2014-12-16T03:08:45  *** signed8bit has joined #openstack-infra
2014-12-16T03:09:08  *** rwsu has quit IRC
2014-12-16T03:13:28  *** patrickeast has quit IRC
2014-12-16T03:21:05  *** signed8bit has quit IRC
2014-12-16T03:23:21  *** koolhead17 has joined #openstack-infra
2014-12-16T03:23:21  *** koolhead17 has joined #openstack-infra
2014-12-16T03:25:07  *** fandi has quit IRC
2014-12-16T03:25:46  <openstackgerrit> Matthew Treinish proposed openstack-infra/subunit2sql: Add a contributing file  https://review.openstack.org/141968
2014-12-16T03:26:39  *** sabeen3 has quit IRC
2014-12-16T03:30:39  *** zz_avozza is now known as avozza
2014-12-16T03:31:28  <openstackgerrit> Matthew Treinish proposed openstack-infra/subunit2sql: Add --average option to sql2subunit cli  https://review.openstack.org/132119
2014-12-16T03:31:34  <openstackgerrit> Matthew Treinish proposed openstack-infra/subunit2sql: Update TODO file  https://review.openstack.org/141965
2014-12-16T03:32:34  *** mmaglana has joined #openstack-infra
2014-12-16T03:33:00  *** boris-42 has quit IRC
2014-12-16T03:33:43  *** KanagarajM has quit IRC
2014-12-16T03:33:50  *** jyuso has joined #openstack-infra
2014-12-16T03:37:50  *** teran has joined #openstack-infra
2014-12-16T03:40:21  *** avozza is now known as zz_avozza
2014-12-16T03:41:18  *** emagana has joined #openstack-infra
2014-12-16T03:42:30  *** teran has quit IRC
2014-12-16T03:43:02  *** mbacchi has quit IRC
2014-12-16T03:46:08  *** zz_sabari is now known as sabari
2014-12-16T03:49:02  *** dims has quit IRC
2014-12-16T03:52:32  *** marun has quit IRC
2014-12-16T03:53:03  *** oomichi has joined #openstack-infra
2014-12-16T03:54:12  *** oomichi has quit IRC
2014-12-16T04:00:01  *** signed8bit has joined #openstack-infra
2014-12-16T04:00:38  *** liusheng has quit IRC
2014-12-16T04:01:14  *** liusheng has joined #openstack-infra
2014-12-16T04:01:22  *** signed8bit has quit IRC
2014-12-16T04:04:49  *** funzo has quit IRC
2014-12-16T04:05:46  *** funzo has joined #openstack-infra
2014-12-16T04:06:36  *** radez is now known as radez_g0n3
2014-12-16T04:08:18  *** armax has joined #openstack-infra
2014-12-16T04:17:00  *** ivar-laz_ has quit IRC
2014-12-16T04:19:53  <openstackgerrit> Matthew Treinish proposed openstack-infra/subunit2sql: Add a contributing file  https://review.openstack.org/141968
2014-12-16T04:19:58  <openstackgerrit> Matthew Treinish proposed openstack-infra/elastic-recheck: Update wording in the CONTRIBUTING.rst file  https://review.openstack.org/141978
2014-12-16T04:21:03  *** mmaglana has left #openstack-infra
2014-12-16T04:21:57  <jogo> mtreinish: do you know why we are still seeign the SQLA error in the gate? http://logs.openstack.org/34/141834/1/gate//gate-grenade-dsvm/26b0e6b//logs/old/screen-s-proxy.txt.gz
2014-12-16T04:29:57  *** sabari is now known as zz_sabari
2014-12-16T04:31:27  *** zz_avozza is now known as avozza
2014-12-16T04:35:02  *** zz_dimtruck has quit IRC
2014-12-16T04:35:02  *** lbragstad has quit IRC
2014-12-16T04:35:33  *** baoli has quit IRC
2014-12-16T04:35:33  *** vishy has quit IRC
2014-12-16T04:36:04  *** wuhg has quit IRC
2014-12-16T04:36:04  *** jraim_ has quit IRC
2014-12-16T04:36:05  *** sileht has quit IRC
2014-12-16T04:36:35  *** fungi has quit IRC
2014-12-16T04:36:35  *** Kiall has quit IRC
2014-12-16T04:36:35  *** gus has quit IRC
2014-12-16T04:37:21  *** Kiall has joined #openstack-infra
2014-12-16T04:38:05  *** wuhg has joined #openstack-infra
2014-12-16T04:38:35  *** zz_dimtruck has joined #openstack-infra
2014-12-16T04:38:36  *** teran has joined #openstack-infra
2014-12-16T04:38:40  *** lbragstad has joined #openstack-infra
2014-12-16T04:38:44  *** jraim has joined #openstack-infra
2014-12-16T04:38:57  *** zz_dimtruck is now known as dimtruck
2014-12-16T04:39:18  *** gus has joined #openstack-infra
2014-12-16T04:40:09  *** sileht has joined #openstack-infra
2014-12-16T04:40:20  *** vishy has joined #openstack-infra
2014-12-16T04:40:34  *** fungi has joined #openstack-infra
2014-12-16T04:41:08  *** avozza is now known as zz_avozza
2014-12-16T04:43:00  *** koolhead_ has joined #openstack-infra
2014-12-16T04:43:08  *** teran has quit IRC
2014-12-16T04:43:28  *** yfried|afk is now known as yfried
2014-12-16T04:44:51  *** koolhead17 has quit IRC
2014-12-16T04:52:18  *** melwitt has joined #openstack-infra
2014-12-16T04:52:21  *** ayoung has quit IRC
2014-12-16T04:56:02  *** yfried is now known as yfried|afk
2014-12-16T05:00:18  *** gnuoy has quit IRC
2014-12-16T05:00:18  *** jamespage has quit IRC
2014-12-16T05:01:00  *** gnuoy has joined #openstack-infra
2014-12-16T05:01:05  *** jamespage has joined #openstack-infra
2014-12-16T05:02:06  *** yaguang has quit IRC
2014-12-16T05:02:29  *** achanda has joined #openstack-infra
2014-12-16T05:02:41  *** otter768 has joined #openstack-infra
2014-12-16T05:03:03  *** yaguang has joined #openstack-infra
2014-12-16T05:03:26  *** hdd has joined #openstack-infra
2014-12-16T05:05:57  *** shashankhegde has joined #openstack-infra
2014-12-16T05:07:25  *** otter768 has quit IRC
2014-12-16T05:08:39  *** sarob has joined #openstack-infra
2014-12-16T05:12:51  *** yfried|afk is now known as yfried
2014-12-16T05:13:07  *** talluri has joined #openstack-infra
2014-12-16T05:25:03  *** yfried is now known as yfried|afk
2014-12-16T05:25:59  *** reed has quit IRC
2014-12-16T05:28:08  *** reed has joined #openstack-infra
2014-12-16T05:28:27  *** yfried|afk is now known as yfried
2014-12-16T05:31:39  *** hdd has quit IRC
2014-12-16T05:32:03  *** zz_avozza is now known as avozza
2014-12-16T05:34:48  *** shashankhegde has quit IRC
2014-12-16T05:35:29  *** nelsnelson has quit IRC
2014-12-16T05:38:10  *** oomichi has joined #openstack-infra
2014-12-16T05:39:26  *** teran has joined #openstack-infra
2014-12-16T05:41:55  *** avozza is now known as zz_avozza
2014-12-16T05:42:02  *** harlowja is now known as harlowja_away
2014-12-16T05:43:44  *** asettle has quit IRC
2014-12-16T05:44:11  *** teran has quit IRC
2014-12-16T05:49:25  *** yfried has quit IRC
2014-12-16T05:52:08  *** sarob has quit IRC
2014-12-16T05:53:38  *** achanda has quit IRC
2014-12-16T05:58:01  *** teran has joined #openstack-infra
2014-12-16T05:59:21  *** boris-42 has joined #openstack-infra
2014-12-16T05:59:22  *** sarob has joined #openstack-infra
2014-12-16T06:02:57  *** oomichi has quit IRC
2014-12-16T06:03:15  *** nikil22 has joined #openstack-infra
2014-12-16T06:03:44  *** achanda has joined #openstack-infra
2014-12-16T06:07:22  *** bradjones has quit IRC
2014-12-16T06:10:09  *** bradjones has joined #openstack-infra
2014-12-16T06:12:57  *** vigneshvar has joined #openstack-infra
2014-12-16T06:14:23  *** dannywilson has joined #openstack-infra
2014-12-16T06:17:57  *** ZZelle has joined #openstack-infra
2014-12-16T06:19:43  *** rmcall has joined #openstack-infra
2014-12-16T06:22:02  *** mrmartin has joined #openstack-infra
2014-12-16T06:23:27  *** emagana has quit IRC
2014-12-16T06:24:25  *** rmcall has quit IRC
2014-12-16T06:25:16  *** rmcall has joined #openstack-infra
2014-12-16T06:27:56  *** dannywilson has quit IRC
2014-12-16T06:28:28  *** dannywilson has joined #openstack-infra
2014-12-16T06:28:32  *** vigneshvar has quit IRC
2014-12-16T06:32:57  *** dannywilson has quit IRC
2014-12-16T06:35:13  *** bradjones has quit IRC
2014-12-16T06:35:53  *** reed has quit IRC
2014-12-16T06:37:44  <openstackgerrit> Joshua Hesketh proposed openstack-infra/project-config: Push dg-tempest-dsvm-full logs to swift  https://review.openstack.org/141668
2014-12-16T06:37:45  <openstackgerrit> Joshua Hesketh proposed openstack-infra/project-config: Rename zuul-swift-upload jobs to use hypens  https://review.openstack.org/141942
2014-12-16T06:41:30  *** nuritv has joined #openstack-infra
2014-12-16T06:41:47  *** zz_avozza is now known as avozza
2014-12-16T06:41:51  *** shashankhegde has joined #openstack-infra
2014-12-16T06:41:54  *** wenlock has joined #openstack-infra
2014-12-16T06:46:00  *** stevemar has quit IRC
2014-12-16T06:48:29  *** zz_sabari is now known as sabari
2014-12-16T06:53:39  *** wenlock has quit IRC
2014-12-16T06:54:06  *** vigneshvar has joined #openstack-infra
2014-12-16T06:54:15  *** yfried has joined #openstack-infra
2014-12-16T06:54:20  *** emagana has joined #openstack-infra
2014-12-16T06:56:01  *** tnovacik has joined #openstack-infra
2014-12-16T06:58:37  *** emagana has quit IRC
2014-12-16T07:01:34  *** rmcall has quit IRC
2014-12-16T07:01:36  *** jamielennox is now known as jamielennox|away
2014-12-16T07:03:15  <nikil22> hi in CI system. the devstack-gate has a function called pre_test_hook. So is this the proper place to enable few drivers and then start the devstack instllation . Like i want to change the default neutron driver to different one in neutron.conf
2014-12-16T07:03:16  <openstackgerrit> Armando Migliaccio proposed openstack-infra/project-config: Add test for validating certain gerrit ACL rules  https://review.openstack.org/140470
2014-12-16T07:03:30  *** otter768 has joined #openstack-infra
2014-12-16T07:03:39  *** shashankhegde has quit IRC
2014-12-16T07:04:23  <openstackgerrit> Armando Migliaccio proposed openstack-infra/project-config: Check that Gerrit ACL files are normalized  https://review.openstack.org/140821
2014-12-16T07:06:13  *** sarob has quit IRC
2014-12-16T07:06:35  *** yamamoto has quit IRC
2014-12-16T07:07:49  *** yolanda has joined #openstack-infra
2014-12-16T07:08:13  *** otter768 has quit IRC
2014-12-16T07:08:40  *** avozza is now known as zz_avozza
2014-12-16T07:10:22  *** yolanda has quit IRC
2014-12-16T07:10:55  *** achanda has quit IRC
2014-12-16T07:11:14  *** _nadya_ has joined #openstack-infra
2014-12-16T07:11:29  *** achanda has joined #openstack-infra
2014-12-16T07:12:32  *** teran has quit IRC
2014-12-16T07:15:13  *** wenlock has joined #openstack-infra
2014-12-16T07:16:12  *** achanda has quit IRC
2014-12-16T07:16:28  *** cnesa has joined #openstack-infra
2014-12-16T07:18:42  *** pcaruana has joined #openstack-infra
2014-12-16T07:22:45  *** ZZelle has quit IRC
2014-12-16T07:24:24  *** tnovacik has quit IRC
2014-12-16T07:24:52  *** Longgeek has joined #openstack-infra
2014-12-16T07:26:11  *** e0ne has joined #openstack-infra
2014-12-16T07:27:29  *** sweston is now known as sweston_away
2014-12-16T07:30:02  *** koolhead_ has quit IRC
2014-12-16T07:34:49  *** achanda has joined #openstack-infra
2014-12-16T07:34:59  *** teran has joined #openstack-infra
2014-12-16T07:35:31  *** yamamoto has joined #openstack-infra
2014-12-16T07:36:08  <e0ne> hi all. does anybody know why almost all check-grenade-dsvm faield on gates?
2014-12-16T07:38:30  <openstackgerrit> Merged openstack-infra/project-config: Run acceptance tests without rake  https://review.openstack.org/141728
2014-12-16T07:38:52  *** nuritv has quit IRC
2014-12-16T07:39:06  *** Nuritv_ has joined #openstack-infra
2014-12-16T07:39:10  *** HeOS has quit IRC
2014-12-16T07:39:27  *** teran has quit IRC
2014-12-16T07:40:50  *** Nuritv_ is now known as nuritv
2014-12-16T07:41:09  *** Murad_ has joined #openstack-infra
2014-12-16T07:41:15  <Murad_> how to prevent keyboard from posting back to gerrit?
2014-12-16T07:43:30  *** belmoreira has joined #openstack-infra
2014-12-16T07:44:44  <AJaeger> e0ne, see the mail "oslo.db 1.2.1 release coming to fix stable/juno" on openstack-dev
2014-12-16T07:45:29  <e0ne> AJaeger: but i'm looking on master
2014-12-16T07:45:44  <AJaeger> e0ne, grenade does update testing from juno to master...
2014-12-16T07:46:12  <e0ne> AJaeger: oh, thanks!
2014-12-16T07:46:51  <AJaeger> e0ne, so have patience until this problem got fixed, please
2014-12-16T07:51:13  *** e0ne has quit IRC
2014-12-16T07:51:43  *** liusheng has quit IRC
2014-12-16T07:52:12  *** jyuso has quit IRC
2014-12-16T07:52:23  *** liusheng has joined #openstack-infra
2014-12-16T07:54:52  *** Guest24100 has joined #openstack-infra
2014-12-16T07:55:03  *** emagana has joined #openstack-infra
2014-12-16T07:57:09  *** jyuso has joined #openstack-infra
2014-12-16T07:58:00  *** yamamoto has quit IRC
2014-12-16T07:58:52  <wuhg> http://status.openstack.org/elastic-recheck/#1402747   is the cause of  http://logs.openstack.org/50/118450/11/check//check-grenade-dsvm/6c0b211/ failure?
2014-12-16T07:58:52  *** jpich has joined #openstack-infra
2014-12-16T07:59:27  *** emagana has quit IRC
2014-12-16T07:59:59  <wuhg> oh, so many check-grenade-dsvm failure ,
2014-12-16T08:00:17  <wuhg> i guess http://status.openstack.org/elastic-recheck/#1402747  is the problem
2014-12-16T08:01:07  *** wenlock has quit IRC
2014-12-16T08:01:10  <AJaeger> wuhg, in fixing the setuptools 8 failures, the team encountered a couple of other problems and fixed them...
2014-12-16T08:01:18  <AJaeger> wuhg, see the mail "oslo.db 1.2.1 release coming to fix stable/juno" on openstack-dev
2014-12-16T08:01:22  *** sarob has joined #openstack-infra
2014-12-16T08:01:42  <wuhg> AJaeger: ok ,thanks
2014-12-16T08:02:04  <anteaya> Murad_: are you attending the third-party meeting?
2014-12-16T08:02:43  <Murad_> yes, is the channel openstack-meeting?
2014-12-16T08:03:05  <nikil22> anteaya : may i know when is third-party meeting time and channel ?
2014-12-16T08:03:30  <anteaya> Murad_: yes
2014-12-16T08:03:44  <Murad_> I don't see anybody there
2014-12-16T08:03:47  <anteaya> nikil22: in #openstack-meeting right now
2014-12-16T08:03:57  <anteaya> Murad_: in #openstack-meeting
2014-12-16T08:04:29  <Murad_> now I see, it seems that it was frozen
2014-12-16T08:05:51  <anteaya> nikil22: I don't see your nick in #openstack-meeting, can you find the channel?
2014-12-16T08:06:28  *** yamamoto has joined #openstack-infra
2014-12-16T08:06:59  *** Murad_ has quit IRC
2014-12-16T08:08:39  *** achanda has quit IRC
2014-12-16T08:09:41  *** zz_avozza is now known as avozza
2014-12-16T08:10:39  *** yamamoto has quit IRC
2014-12-16T08:15:02  *** achanda has joined #openstack-infra
2014-12-16T08:15:11  *** yamamoto has joined #openstack-infra
2014-12-16T08:15:51  *** amuller has joined #openstack-infra
2014-12-16T08:19:54  *** mrunge has joined #openstack-infra
2014-12-16T08:20:48  *** yamamoto has quit IRC
2014-12-16T08:21:35  *** yamamoto has joined #openstack-infra
2014-12-16T08:23:24  *** melwitt has quit IRC
2014-12-16T08:25:59  *** yamamoto has quit IRC
2014-12-16T08:29:10  *** teran has joined #openstack-infra
2014-12-16T08:31:44  *** ala_ has joined #openstack-infra
2014-12-16T08:32:11  <nikil22> anteanya: thanks i was afk
2014-12-16T08:32:28  *** cnesa has quit IRC
2014-12-16T08:33:32  *** arxcruz has joined #openstack-infra
2014-12-16T08:35:53  *** ZZelle__ is now known as ZZelle
2014-12-16T08:38:42  *** bmwiedemann has joined #openstack-infra
2014-12-16T08:42:57  *** Krast has joined #openstack-infra
2014-12-16T08:47:20  *** k4n0 has joined #openstack-infra
2014-12-16T08:48:00  *** liusheng has quit IRC
2014-12-16T08:49:12  *** che-arne|2 has quit IRC
2014-12-16T08:49:14  *** liusheng has joined #openstack-infra
2014-12-16T08:49:29  *** Longgeek has quit IRC
2014-12-16T08:50:50  *** Longgeek has joined #openstack-infra
2014-12-16T08:51:11  *** smcginnis_ has joined #openstack-infra
2014-12-16T08:51:33  *** jcoufal has joined #openstack-infra
2014-12-16T08:52:39  *** cnesa has joined #openstack-infra
2014-12-16T08:53:34  *** armax has quit IRC
2014-12-16T08:55:51  *** emagana has joined #openstack-infra
2014-12-16T08:56:50  *** HeOS has joined #openstack-infra
2014-12-16T09:00:17  *** emagana has quit IRC
2014-12-16T09:00:47  *** sarob has quit IRC
2014-12-16T09:00:59  *** jgallard_ has joined #openstack-infra
2014-12-16T09:01:02  *** skolekonov has joined #openstack-infra
2014-12-16T09:01:11  *** yamamoto has joined #openstack-infra
2014-12-16T09:03:22  *** fandi has joined #openstack-infra
2014-12-16T09:03:34  *** BobBall_AWOL is now known as BobBall
2014-12-16T09:04:29  *** otter768 has joined #openstack-infra
2014-12-16T09:04:44  *** koolhead17 has joined #openstack-infra
2014-12-16T09:04:44  *** koolhead17 has joined #openstack-infra
2014-12-16T09:05:17  *** zz_johnthetubagu is now known as johnthetubaguy
2014-12-16T09:06:04  *** yamamoto has quit IRC
2014-12-16T09:07:18  <anteaya> jhesketh: thanks for the hyphens
2014-12-16T09:07:38  *** sabari is now known as zz_sabari
2014-12-16T09:08:57  *** otter768 has quit IRC
2014-12-16T09:09:28  *** koolhead17 has quit IRC
2014-12-16T09:10:01  *** derekh has joined #openstack-infra
2014-12-16T09:10:03  <anteaya> jhesketh: do you see 141942 in the gate?
2014-12-16T09:10:19  <anteaya> I just approved it yet I don't see it in status.o.o
2014-12-16T09:12:07  <anteaya> there it is
2014-12-16T09:14:40  <anteaya> more sleep for me, g'night again
2014-12-16T09:17:06  *** koolhead17 has joined #openstack-infra
2014-12-16T09:17:06  *** koolhead17 has joined #openstack-infra
2014-12-16T09:20:54  <openstackgerrit> Merged openstack-infra/project-config: Rename zuul-swift-upload jobs to use hypens  https://review.openstack.org/141942
2014-12-16T09:21:01  <openstackgerrit> Merged openstack-infra/project-config: Push dg-tempest-dsvm-full logs to swift  https://review.openstack.org/141668
2014-12-16T09:22:39  *** jlibosva has joined #openstack-infra
2014-12-16T09:26:26  *** dizquierdo has joined #openstack-infra
2014-12-16T09:27:11  *** mpaolino has joined #openstack-infra
2014-12-16T09:29:03  *** MaxV has joined #openstack-infra
2014-12-16T09:32:20  *** achanda has quit IRC
2014-12-16T09:32:23  *** andreaf has joined #openstack-infra
2014-12-16T09:32:58  *** achanda has joined #openstack-infra
2014-12-16T09:33:16  *** dtantsur|afk is now known as dtantsur
2014-12-16T09:34:43  *** sandywalsh has joined #openstack-infra
2014-12-16T09:36:34  *** sandywalsh_ has quit IRC
2014-12-16T09:37:41  *** achanda has quit IRC
2014-12-16T09:38:26  *** smcginnis_ has quit IRC
2014-12-16T09:41:44  *** achanda has joined #openstack-infra
2014-12-16T09:41:50  *** ociuhandu has quit IRC
2014-12-16T09:44:17  *** achanda has quit IRC
2014-12-16T09:44:26  *** mtanino has joined #openstack-infra
2014-12-16T09:44:36  *** achanda has joined #openstack-infra
2014-12-16T09:45:54  <nikil22> hi is there any way to extend the localrc file from devstack-gate in CI system. Like the other parametes REPO, branch and other "post-config" should be appended to localrc file. Before executing stack.sh from devstack-gate
2014-12-16T09:46:37  *** _nadya_ has quit IRC
2014-12-16T09:50:13  *** achanda has quit IRC
2014-12-16T09:50:19  *** achanda has joined #openstack-infra
2014-12-16T09:54:59  *** mtanino is now known as mtanino_zzz
2014-12-16T09:55:50  *** e0ne has joined #openstack-infra
2014-12-16T09:56:39  *** emagana has joined #openstack-infra
2014-12-16T09:57:57  *** cody-somerville has quit IRC
2014-12-16T10:01:19  *** emagana has quit IRC
2014-12-16T10:02:00  *** luqas has quit IRC
2014-12-16T10:04:25  *** ihrachyshka has joined #openstack-infra
2014-12-16T10:07:48  *** ekarlso- has quit IRC
2014-12-16T10:07:49  *** ekarlso- has joined #openstack-infra
2014-12-16T10:07:58  *** Hal has joined #openstack-infra
2014-12-16T10:08:21  *** Hal is now known as Guest51388
2014-12-16T10:11:49  *** cody-somerville has joined #openstack-infra
2014-12-16T10:13:58  <openstackgerrit> Moshe Levi proposed openstack-infra/project-config: Add networking-mlnx project to StackForge  https://review.openstack.org/142054
2014-12-16T10:14:29  *** jerryz has quit IRC
2014-12-16T10:14:53  *** jerryz has joined #openstack-infra
2014-12-16T10:17:25  <openstackgerrit> Moshe Levi proposed openstack-infra/project-config: Add networking-mlnx project to StackForge  https://review.openstack.org/142054
2014-12-16T10:20:57  *** pelix has joined #openstack-infra
2014-12-16T10:21:09  *** andreaf has quit IRC
2014-12-16T10:27:22  *** fandi has quit IRC
2014-12-16T10:29:56  *** avozza is now known as zz_avozza
2014-12-16T10:34:50  *** e0ne has quit IRC
2014-12-16T10:38:39  *** e0ne has joined #openstack-infra
2014-12-16T10:40:11  *** rlandy has joined #openstack-infra
2014-12-16T10:40:30  *** achanda has quit IRC
2014-12-16T10:40:38  *** Roamer` has joined #openstack-infra
2014-12-16T10:41:40  <Roamer`> hi, uh, does anybody know why Jenkins keeps failing check-grenade-dsvm for https://review.openstack.org/#/c/139711 ? It says "HttpConnectionPool is full" creating the cirros image, xing-yang already issued a recheck, it failed again, elastic-recheck doesn't seem to have it.
2014-12-16T10:43:19  <AJaeger> Roamer`, see the mail "oslo.db 1.2.1 release coming to fix stable/juno" on openstack-dev
2014-12-16T10:44:25  *** liusheng has quit IRC
2014-12-16T10:45:04  *** liusheng has joined #openstack-infra
2014-12-16T10:46:20  *** che-arne has joined #openstack-infra
2014-12-16T10:48:23  *** garyk has joined #openstack-infra
2014-12-16T10:50:11  *** jp_at_hp has joined #openstack-infra
2014-12-16T10:50:13  *** jp_at_hp has quit IRC
2014-12-16T10:50:13  *** jp_at_hp has joined #openstack-infra
2014-12-16T10:50:42  *** unicell has quit IRC
2014-12-16T10:53:06  *** garyk has quit IRC
2014-12-16T10:53:14  *** unicell has joined #openstack-infra
2014-12-16T10:53:37  *** andreaf has joined #openstack-infra
2014-12-16T10:55:39  *** zz_avozza is now known as avozza
2014-12-16T10:56:03  *** ociuhandu has joined #openstack-infra
2014-12-16T10:56:44  *** luqas has joined #openstack-infra
2014-12-16T10:57:20  *** emagana has joined #openstack-infra
2014-12-16T10:57:53  *** jgallard_ has quit IRC
2014-12-16T10:58:22  *** ZZelle has quit IRC
2014-12-16T10:58:49  *** ZZelle has joined #openstack-infra
2014-12-16T11:01:32  *** emagana has quit IRC
2014-12-16T11:02:18  <Roamer`> AJaeger, ah, right, I'd completely missed the exception higher up in the log.  Thanks!
2014-12-16T11:05:20  *** otter768 has joined #openstack-infra
2014-12-16T11:06:18  *** adalbas has joined #openstack-infra
2014-12-16T11:06:36  *** yfried is now known as yfried|afk
2014-12-16T11:07:47  *** koolhead17 has quit IRC
2014-12-16T11:09:44  *** e0ne has quit IRC
2014-12-16T11:10:26  *** otter768 has quit IRC
2014-12-16T11:15:09  *** yfried|afk is now known as yfried
2014-12-16T11:15:41  *** bradjones has joined #openstack-infra
2014-12-16T11:22:30  *** cdent has joined #openstack-infra
2014-12-16T11:23:55  *** Masahiro has quit IRC
2014-12-16T11:24:13  *** e0ne has joined #openstack-infra
2014-12-16T11:24:16  *** sputnik13 has joined #openstack-infra
2014-12-16T11:27:29  *** pc_m has joined #openstack-infra
2014-12-16T11:32:21  *** aysyd has joined #openstack-infra
2014-12-16T11:33:06  *** masayukig has quit IRC
2014-12-16T11:35:21  *** jokke_ has joined #openstack-infra
2014-12-16T11:35:46  <jokke_> Hi
2014-12-16T11:36:28  <jokke_> Anyone here able to help with the grenade test failing due the sqlalchemy versioning issue?
2014-12-16T11:37:09  <jokke_> We're trying to sync global-requirements to Glance, but looks like the grenade old fails due to version mismatch
2014-12-16T11:38:23  *** marcusvrn has quit IRC
2014-12-16T11:39:35  *** Masahiro has joined #openstack-infra
2014-12-16T11:39:44  *** masayukig has joined #openstack-infra
2014-12-16T11:41:40  *** berendt has joined #openstack-infra
2014-12-16T11:42:57  *** marcusvrn has joined #openstack-infra
2014-12-16T11:44:11  <openstackgerrit> Christian Berendt proposed openstack/requirements: Bump version of openstack-doc-tools >= 0.21  https://review.openstack.org/142076
2014-12-16T11:44:53  <openstackgerrit> Derek Higgins proposed openstack-infra/system-config: Increase max-servers for rh1  https://review.openstack.org/142077
2014-12-16T11:51:02  <AJaeger> jokke_, see the mail "oslo.db 1.2.1 release coming to fix stable/juno" on openstack-dev
2014-12-16T11:56:37  *** teran has quit IRC
2014-12-16T11:58:10  *** emagana has joined #openstack-infra
2014-12-16T11:58:33  *** teran has joined #openstack-infra
2014-12-16T12:00:22  <dhellmann> AJaeger: thanks for pointing people to the ML
2014-12-16T12:00:37  <AJaeger> dhellmann, I feel like a bot ;)
2014-12-16T12:00:39  <dhellmann> currently rechecking https://review.openstack.org/#/c/141927/
2014-12-16T12:00:43  <dhellmann> AJaeger: haha
2014-12-16T12:01:34  <sdague> dhellmann: https://review.openstack.org/#/c/142075/ - I think we can just reorder the upgrade as well
2014-12-16T12:01:42  <AJaeger> I was surprised to see all of 14927 failing ;(
2014-12-16T12:02:04  *** ddieterly has joined #openstack-infra
2014-12-16T12:02:26  <dhellmann> sdague: that "architectural flaw" is there because that's the only way the swift team would work with them, so at least put the blame on the right team, please
2014-12-16T12:02:44  *** emagana has quit IRC
2014-12-16T12:02:52  <AJaeger> ;(
2014-12-16T12:03:35  <dhellmann> sdague: you missed the discussion with jogo and jeblair yesterday about changing grenade to install the services into separate virtualenvs for upgrade, and upgrading their dependencies, so we don't have the issue with versioning having to overlap -- jogo is going to produce a spec
2014-12-16T12:03:46  <sdague> sure
2014-12-16T12:04:08  <sdague> but right now, no project with a grenade job has been able to merge code for ~20hrs
2014-12-16T12:04:18  *** yamamoto has joined #openstack-infra
2014-12-16T12:04:21  <dhellmann> that's not ceilometer's fault
2014-12-16T12:04:52  <dhellmann> my requirements change for sqlalchemy died on a glance error
2014-12-16T12:04:57  *** mpaolino has quit IRC
2014-12-16T12:05:06  <sdague> yes
2014-12-16T12:05:08  *** jamespage_ has joined #openstack-infra
2014-12-16T12:05:10  <sdague> because swift can't start
2014-12-16T12:05:17  <sdague> because oslo.db
2014-12-16T12:05:22  <sdague> because ceilometer
2014-12-16T12:05:42  <dhellmann> well, it wasn't in an upgrade job that it failed
2014-12-16T12:05:48  <dhellmann> it failed in every dsvm job
2014-12-16T12:05:48  <sdague> dhellmann: correct
2014-12-16T12:05:52  <sdague> yes, go look at the logs
2014-12-16T12:05:53  *** jamespage_ has quit IRC
2014-12-16T12:06:03  <AJaeger> sdague, if you have some time, could you review https://review.openstack.org/#/c/140470/ and https://review.openstack.org/#/c/140821/ to have the ACLs checking in project-config, please? Nothing urgent but something nice I'd like to push ;)
2014-12-16T12:06:24  <AJaeger> dhellmann, all the grenade ones fail
2014-12-16T12:06:37  <sdague> AJaeger: right, but we're not actually talking about that
2014-12-16T12:06:41  <dhellmann> ok, so then sdague's patch is necessary for the requirements change to even land?
2014-12-16T12:06:53  <sdague> dhellmann: no, my patch won't let your patch land
2014-12-16T12:07:10  *** Masahiro has quit IRC
2014-12-16T12:07:15  *** dims has joined #openstack-infra
2014-12-16T12:07:28  <sdague> you have to also couple your patch with blocking all versions of oslo.db that have the new requirements definition
2014-12-16T12:07:59  <sdague> my patch will let us get by without your patch
2014-12-16T12:08:03  <openstackgerrit> Christian Berendt proposed openstack/requirements: Bump version of openstack-doc-tools >= 0.21  https://review.openstack.org/142076
2014-12-16T12:08:43  <Roamer`> .wn
2014-12-16T12:08:46  <Roamer`> oops, sorry
2014-12-16T12:09:05  *** nfedotov has joined #openstack-infra
2014-12-16T12:09:26  *** yamamoto has quit IRC
2014-12-16T12:10:11  <openstackgerrit> Davanum Srinivas (dims) proposed openstack-infra/project-config: move oslo.version to attic  https://review.openstack.org/141812
2014-12-16T12:10:33  *** yamamoto has joined #openstack-infra
2014-12-16T12:11:05  *** yamamoto_ has joined #openstack-infra
2014-12-16T12:11:05  *** yamamoto has quit IRC
2014-12-16T12:11:43  *** marcusvrn has quit IRC
2014-12-16T12:11:46  <jokke_> AJaeger: got it ... thanks!
2014-12-16T12:11:54  *** marcusvrn has joined #openstack-infra
2014-12-16T12:12:19  *** jraim_ has joined #openstack-infra
2014-12-16T12:12:40  *** dougwig_ has joined #openstack-infra
2014-12-16T12:12:43  *** ihrachyshka has quit IRC
2014-12-16T12:13:01  *** erw_ has joined #openstack-infra
2014-12-16T12:14:10  *** jraim has quit IRC
2014-12-16T12:14:11  *** jraim_ is now known as jraim
2014-12-16T12:14:21  *** ala_ has quit IRC
2014-12-16T12:14:25  *** bmwiedemann has quit IRC
2014-12-16T12:14:25  *** dougwig has quit IRC
2014-12-16T12:14:25  *** erw has quit IRC
2014-12-16T12:14:27  *** bmwiedemann has joined #openstack-infra
2014-12-16T12:14:27  *** sileht has quit IRC
2014-12-16T12:14:27  *** luqas has quit IRC
2014-12-16T12:14:28  *** rlandy has quit IRC
2014-12-16T12:14:33  *** dougwig_ is now known as dougwig
2014-12-16T12:15:03  <sdague> AJaeger: so if we send in the first one we get a new job, then we should recheck on the 2nd one?
2014-12-16T12:15:19  <AJaeger> sdague, yeah, might be best
2014-12-16T12:15:29  <sdague> ok approving the first one
2014-12-16T12:16:06  <AJaeger> and the second one will fail for sure but is non-voting. To fix it, we need another normalizing: https://review.openstack.org/#/c/141860/
2014-12-16T12:16:09  <AJaeger> sdague, thanks
2014-12-16T12:16:17  *** sileht has joined #openstack-infra
2014-12-16T12:16:41  *** garyk has joined #openstack-infra
2014-12-16T12:16:49  <garyk> AJaeger: you around for a few questions?
2014-12-16T12:17:01  <AJaeger> garyk, 10 mins, then I have to leave
2014-12-16T12:17:06  *** EmilienM is now known as EmilienM|afk
2014-12-16T12:17:13  <AJaeger> garyk, so ask
2014-12-16T12:17:26  <garyk> ok. regarding https://review.openstack.org/140409. i have follows all of the instructions. i just need to make sure that there is the git history
2014-12-16T12:17:41  <garyk> is that done on the git project that is created or via this patch set?
2014-12-16T12:18:01  *** talluri has quit IRC
2014-12-16T12:18:23  *** talluri has joined #openstack-infra
2014-12-16T12:18:49  <AJaeger> garyk, http://docs.openstack.org/infra/manual/creators.html#add-the-project-to-the-master-project-list - you need to add upstream: URL to projects.yaml
2014-12-16T12:19:05  *** pcrews has quit IRC
2014-12-16T12:19:18  *** ihrachyshka has joined #openstack-infra
2014-12-16T12:19:23  <garyk> AJaeger: brilliant! thanks!
2014-12-16T12:19:24  *** sputnik13 has quit IRC
2014-12-16T12:19:29  *** bcourt has joined #openstack-infra
2014-12-16T12:19:41  <dims> AJaeger: you are fast! :)
2014-12-16T12:19:58  <AJaeger> dims, sometimes ;)
2014-12-16T12:20:06  *** kevinbenton has quit IRC
2014-12-16T12:20:11  *** Roamer` has quit IRC
2014-12-16T12:20:11  *** barnaby has quit IRC
2014-12-16T12:20:11  *** tsufiev has quit IRC
2014-12-16T12:20:26  *** pcrews has joined #openstack-infra
2014-12-16T12:20:31  *** Svedrin has quit IRC
2014-12-16T12:20:42  *** ala_ has joined #openstack-infra
2014-12-16T12:21:15  <sdague> oh, this is wedged even further than I imagined because stable requirements allows olso.db 1.3
2014-12-16T12:21:17  *** _nadya_ has joined #openstack-infra
2014-12-16T12:22:14  *** pelix has quit IRC
2014-12-16T12:22:14  *** ondergetekende has quit IRC
2014-12-16T12:22:14  <openstackgerrit> garyk proposed openstack-infra/project-config: Add VMware-NSX to StackForge  https://review.openstack.org/140409
2014-12-16T12:22:21  *** kevinbenton has joined #openstack-infra
2014-12-16T12:22:28  <garyk> AJaeger: ^ (hope that I did it correctly)
2014-12-16T12:22:29  *** pelix has joined #openstack-infra
2014-12-16T12:23:04  <AJaeger> garyk, the url should be the one you import, you gave git://github.com/openstack/neutron.git which is the original
2014-12-16T12:23:13  <openstackgerrit> Merged openstack-infra/elastic-recheck: Remove queries for closed bugs  https://review.openstack.org/140858
2014-12-16T12:23:25  <AJaeger> you want to remove files from the repository first, so remove everything unrelated to VMware-NSX from neutron
2014-12-16T12:23:33  <openstackgerrit> Doug Hellmann proposed openstack/requirements: Make SQLAlchemy settings compatible with Juno  https://review.openstack.org/141927
2014-12-16T12:23:50  <AJaeger> garyk, see some documentation in https://review.openstack.org/141171
2014-12-16T12:23:50  *** _nadya_ has quit IRC
2014-12-16T12:23:57  *** e0ne has quit IRC
2014-12-16T12:24:09  *** _nadya_ has joined #openstack-infra
2014-12-16T12:24:28  <garyk> AJaeger: yes, we want to import the neutron.git porject. We want to make use of these files - there are files that will be copied from netron/plugins/vmware directoryt. maybe i do not understand
2014-12-16T12:24:49  *** baoli has joined #openstack-infra
2014-12-16T12:25:01  <AJaeger> garyk, you run "git filter-branch" and remove all files you do not want ot import first
2014-12-16T12:25:10  *** baoli has quit IRC
2014-12-16T12:25:21  <AJaeger> garyk, sorry, have to leave now, hope the reference in 141171 helps
2014-12-16T12:25:23  <garyk> AJaeger: ok, will try that
2014-12-16T12:25:27  *** sputnik13 has joined #openstack-infra
2014-12-16T12:25:32  <garyk> AJaeger: ok, thanks
2014-12-16T12:25:36  <AJaeger> garyk, don't import *all* of neutron, just those files and their history you need
2014-12-16T12:25:42  *** baoli has joined #openstack-infra
2014-12-16T12:26:00  <dhellmann> sdague: do you think there's a chance of landing a patch to disallow oslo.db 1.3 in stable/juno? I was planning to do that later, but if we need to do it earlier in the process...
2014-12-16T12:26:23  *** mtanino_zzz has quit IRC
2014-12-16T12:26:25  *** tsufiev has joined #openstack-infra
2014-12-16T12:26:43  *** amotoki has joined #openstack-infra
2014-12-16T12:27:10  *** rlandy has joined #openstack-infra
2014-12-16T12:28:05  <sdague> you'll have to do it in the same patch you did above
2014-12-16T12:28:23  <dhellmann> sdague: that patch is against master :-(
2014-12-16T12:28:29  <sdague> yeh
2014-12-16T12:28:50  <sdague> if you want to roll back sqla, you also have to roll back anything that requires a newer sqla
2014-12-16T12:28:57  <sdague> which oslo.db does
2014-12-16T12:29:08  <dhellmann> yeah, I'm doing that in master -- you suggested we needed to do it in the stable branch, too
2014-12-16T12:29:17  <sdague> yes
2014-12-16T12:29:18  <dhellmann> I can just go delete oslo.db 1.3 from pypi, but it
2014-12-16T12:29:23  <sdague> for the same reasons
2014-12-16T12:29:36  <dhellmann> ok, I'm not sure I know how to patch 2 branches at once, is that possible?
2014-12-16T12:29:52  <sdague> you have to work up from oldest stable
2014-12-16T12:29:54  <dhellmann> or are you saying separate patches and I'm misunderstanding
2014-12-16T12:30:01  <sdague> separate patches
2014-12-16T12:30:08  <dhellmann> ok
2014-12-16T12:30:11  *** yamamoto_ has quit IRC
2014-12-16T12:30:31  <sdague> so here is the crux of this dragon in global requirements (though I don't understand it fully)
2014-12-16T12:30:48  <sdague> we are specifying 2 different allowed sqla versions
2014-12-16T12:30:55  <sdague> 1 via gr
2014-12-16T12:31:03  <sdague> 1 comes in with oslo.db, which is different
2014-12-16T12:31:12  <dhellmann> sdague: so https://review.openstack.org/#/c/141896/
2014-12-16T12:31:15  *** bmwiedemann has quit IRC
2014-12-16T12:31:34  <sdague> something cares a lot about pkg_resource checking compatibility for all these things
2014-12-16T12:31:42  <sdague> whether or not the code's compatible
2014-12-16T12:31:53  <sdague> so it explodes on module loads
2014-12-16T12:32:05  <sdague> so swift can never start
2014-12-16T12:32:13  <sdague> thus everything else falls down
2014-12-16T12:32:14  <dhellmann> paste is loading entry points without turning off requirements checking
2014-12-16T12:32:32  <garyk> dims: you have any idea how i do the git history part? i am not sure what i do after the git filter branch
2014-12-16T12:32:34  <dstufft> that particular feature of pkg_resources is a pain in the ass
2014-12-16T12:32:49  <dhellmann> dstufft: could we change the default behavior?
2014-12-16T12:33:10  *** yamamoto has joined #openstack-infra
2014-12-16T12:33:12  <dims> garyk: one sec
2014-12-16T12:33:47  <dstufft> dhellmann: I'm half asleep but I think possibly yes? would need to talk to jason about it to see what he thought
2014-12-16T12:34:01  *** ondergetekende has joined #openstack-infra
2014-12-16T12:34:13  <dhellmann> sdague: I'm waiting to hear what you think of https://review.openstack.org/#/c/141896/2 as a way to pin oslo.db in stable before I approve it
2014-12-16T12:34:27  <sdague> dhellmann: oh, sorry, still on first cup of coffee
2014-12-16T12:34:28  <dhellmann> dstufft: ok, let's have that conversation later
2014-12-16T12:34:32  <dhellmann> sdague: np, me, too
2014-12-16T12:34:51  <dims> garyk: start by browsing oslo-incubator/tools/graduate.sh, it shows you how to pull files selectively with their history
2014-12-16T12:35:06  <dims> garyk: you will need to modify it to fit your needs
2014-12-16T12:35:17  <sdague> dhellmann: yeh that should help
2014-12-16T12:35:24  <dhellmann> ok, approving
2014-12-16T12:35:37  <sdague> I actually just stuck that into my grenade change - https://review.openstack.org/#/c/142075/2/prep-base,cm
2014-12-16T12:36:05  <dhellmann> cool
2014-12-16T12:36:32  <dhellmann> ugh, the check queue is filling up already
2014-12-16T12:36:49  <sdague> oh, and this isn't an issue for juno because oslo.db wasn't used in icehouse
2014-12-16T12:36:56  <dhellmann> right
2014-12-16T12:37:05  <sdague> so this situation will get worse as more project branches use libraries
2014-12-16T12:37:24  <sdague> because of subtle couplings like these
2014-12-16T12:37:47  *** kevinbenton has quit IRC
2014-12-16T12:37:50  <dhellmann> yeah, that was one reason we thought allowing grenade to update requirements would help
2014-12-16T12:37:52  <garyk> dims: thanks
2014-12-16T12:37:55  *** yamamoto has quit IRC
2014-12-16T12:38:21  <dhellmann> and to maintain the ability to test as rolling updates, we were going to put each service in a venv so we could update them separately
2014-12-16T12:38:32  *** Svedrin has joined #openstack-infra
2014-12-16T12:39:19  <dhellmann> upgrading dependencies also protects us against similar version conflicts coming up in libs we don't control
2014-12-16T12:39:24  *** Guest51388 has quit IRC
2014-12-16T12:40:08  *** johnthetubaguy is now known as zz_johnthetubagu
2014-12-16T12:40:32  *** kevinbenton has joined #openstack-infra
2014-12-16T12:40:32  *** mase_x200 has joined #openstack-infra
2014-12-16T12:40:53  *** bmwiedemann has joined #openstack-infra
2014-12-16T12:41:32  * dhellmann goes to make a little breakfast while the tests run
2014-12-16T12:41:37  *** luqas has joined #openstack-infra
2014-12-16T12:43:25  *** yamamoto has joined #openstack-infra
2014-12-16T12:43:46  <sdague> so.... we do upgrade dependencies
2014-12-16T12:43:51  * sdague is confused 
2014-12-16T12:46:30  *** yamamoto has quit IRC
2014-12-16T12:46:50  <openstackgerrit> Merged openstack-infra/project-config: Add test for validating certain gerrit ACL rules  https://review.openstack.org/140470
2014-12-16T12:48:05  <dhellmann> sdague: ok, for some reason we thought otherwise yesterday and I don't know enough about grenade
2014-12-16T12:49:01  <dhellmann> how is it that we have any 2 projects with conflicting requirements for sqlalchemy being installed? aren't we installing the apps from source after a requirements sync?
2014-12-16T12:51:12  <openstackgerrit> garyk proposed openstack-infra/project-config: Add VMware-NSX to StackForge  https://review.openstack.org/140409
2014-12-16T12:51:41  *** Guest51388 has joined #openstack-infra
2014-12-16T12:52:02  <sdague> we're installing applications
2014-12-16T12:52:35  <sdague> let me find you the line in the logs
2014-12-16T12:54:03  *** che-arne|2 has joined #openstack-infra
2014-12-16T12:54:57  <garyk> sdague: you aware of the reason why grenade-dsvm fails? or maybe i should ask you this on the nova channel…
2014-12-16T12:55:02  *** yfried is now known as yfried|afk
2014-12-16T12:55:12  <sdague> dhellmann: http://logs.openstack.org/26/125926/1/gate//gate-grenade-dsvm/7b736df//logs/grenade.sh.txt.gz#_2014-12-16_11_58_18_274
2014-12-16T12:55:18  <sdague> so starting here is the first install
2014-12-16T12:55:54  <dhellmann> does grenade do a requirements sync before installing anything?
2014-12-16T12:56:01  <dhellmann> or that job, or whatever
2014-12-16T12:56:10  *** che-arne has quit IRC
2014-12-16T12:56:32  <dhellmann> I guess the other jobs fail with a similar error, so it's not just grenade
2014-12-16T12:56:32  <sdague> it's done via the normal pip install -e DIR model
2014-12-16T12:56:57  <sdague> yeh, so the crux of it is pip does a very odd thing with libraries
2014-12-16T12:57:00  <dhellmann> I thought our test jobs forced everything to have the same requirements when it was installing via src
2014-12-16T12:57:05  *** dprince has joined #openstack-infra
2014-12-16T12:57:09  <sdague> dhellmann: yes, they get synced first
2014-12-16T12:57:21  <sdague> let me finish this, it might become clear
2014-12-16T12:57:24  <dhellmann> ok
2014-12-16T12:57:25  *** weshay has joined #openstack-infra
2014-12-16T12:57:47  <sdague> assuming foo 1.0 requires bar>1.3
2014-12-16T12:58:11  <sdague> and package 1.0 requires foo>=1.0
2014-12-16T12:58:38  <sdague> pip install package 1.0 gives you different results if bar was installed previously or not
2014-12-16T12:58:55  <sdague> if bar is not installed, you get >1.3
2014-12-16T12:59:14  <sdague> if it was installed at 1.2, it doesn't touch the install
2014-12-16T12:59:15  *** yamamoto has joined #openstack-infra
2014-12-16T12:59:19  <sdague> even though it's wrong
2014-12-16T12:59:42  *** che-arne|2 has quit IRC
2014-12-16T12:59:44  *** che-arne has joined #openstack-infra
2014-12-16T13:00:09  *** che-arne|2 has joined #openstack-infra
2014-12-16T13:00:45  <sdague> so all along we've been treating requirements as something which can be transitive, except python doesn't have an installer which can actually do transitive dependencies correctly
2014-12-16T13:01:09  <sdague> so in this case, what's broken
2014-12-16T13:01:19  <sdague> which you can see in the install path for keystone
2014-12-16T13:01:34  <sdague> is that oslo.db gets installed after sqla
2014-12-16T13:01:46  <sdague> sqla was satified fine by keystones definition
2014-12-16T13:02:10  <sdague> pip sees that something called sqlalchemy exists, so assumes it's fine
2014-12-16T13:02:22  <sdague> installs an oslo.db with a conflicting requirement
2014-12-16T13:02:47  <sdague> pkg_resources some time in the far future is the first time the conflict is examined
2014-12-16T13:02:47  *** alexpilotti has joined #openstack-infra
2014-12-16T13:02:49  <sdague> and explode
2014-12-16T13:03:01  <dhellmann> ok, the source of the problem makes sense
2014-12-16T13:03:23  *** che-arne has quit IRC
2014-12-16T13:03:41  <sdague> so, honestly, as long as pip remains broken like this, everything is a work around
2014-12-16T13:03:43  <dhellmann> except that keystone and oslo.db require the same version of sqla now, and if we're syncing requirements I would have thought all of the apps did (even if they haven't landed the patch to make it official: http://paste.openstack.org/show/151829/)
2014-12-16T13:04:06  *** ala_ has quit IRC
2014-12-16T13:04:17  <sdague> dhellmann: where do they require the same version?
2014-12-16T13:04:19  <dhellmann> would it make sense to remove sqlalchemy as a direct requirement in the projects and use the oslo.db dependency to get it?
2014-12-16T13:04:47  <dhellmann> sdague: the requirements on line 14 and 23 of that paste look the same to me, unless I'm missing a character
2014-12-16T13:04:59  <dhellmann> sorry, 15
2014-12-16T13:05:12  <sdague> yeh, but that's overridden by global requirements
2014-12-16T13:05:19  <sdague> during install
2014-12-16T13:05:46  <sdague> so what you actually want to compare is openstack/requirements vs. oslo.*
2014-12-16T13:05:50  <dhellmann> which has the same version: SQLAlchemy>=0.9.7,<=0.9.99
2014-12-16T13:05:51  *** _nadya_ has quit IRC
2014-12-16T13:06:01  <sdague> not in juno
2014-12-16T13:06:04  <dhellmann> that was the whole point of this oslo.db release, to make its requirements match that list
2014-12-16T13:06:10  <dhellmann> ok, but we're failing to install even in master
2014-12-16T13:06:14  *** otter768 has joined #openstack-infra
2014-12-16T13:06:31  *** doude has quit IRC
2014-12-16T13:06:38  <sdague> dhellmann: only with your change to the requirements definition
2014-12-16T13:06:41  *** mfink has quit IRC
2014-12-16T13:06:51  *** alexpilotti_ has joined #openstack-infra
2014-12-16T13:06:56  <dhellmann> ah, ok, I thought we were still having issues aside from that in master
2014-12-16T13:07:11  <sdague> not as far as I know
2014-12-16T13:07:12  *** mtanino has joined #openstack-infra
2014-12-16T13:07:21  *** dims has quit IRC
2014-12-16T13:07:22  *** alexpilotti has quit IRC
2014-12-16T13:07:23  *** alexpilotti_ is now known as alexpilotti
2014-12-16T13:07:28  *** doude has joined #openstack-infra
2014-12-16T13:07:36  *** yfried|afk is now known as yfried
2014-12-16T13:07:38  *** dims has joined #openstack-infra
2014-12-16T13:07:38  <dhellmann> yeah, aeromancer doesn't know how to look across branches, yet
2014-12-16T13:07:47  *** dkranz has joined #openstack-infra
2014-12-16T13:07:51  *** Masahiro has joined #openstack-infra
2014-12-16T13:08:04  *** hashar has joined #openstack-infra
2014-12-16T13:08:27  *** mbacchi has joined #openstack-infra
2014-12-16T13:08:39  <sdague> so basically, keeping the projects in sync became way too many of these firedrills, which is why we kind of ignore the projects and just bludgeon in a uniform requirements version
2014-12-16T13:08:48  <dhellmann> is there some way to bump the jobs out of the gate queue that we know are going to fail?
2014-12-16T13:08:58  *** kedkul has joined #openstack-infra
2014-12-16T13:09:05  *** Ala has joined #openstack-infra
2014-12-16T13:09:14  <sdague> update their commit message
2014-12-16T13:09:18  <dhellmann> right, I was confused because I was seeing the same error in my requirements job
2014-12-16T13:09:19  <kedkul> Hi
2014-12-16T13:09:48  <sdague> dhellmann: right, because it's the same pip failing
2014-12-16T13:09:51  <dhellmann> we have a bunch of nova changes in the queue that we know are going to fail, can we bypass them somehow to get that juno requirements patch to land?
2014-12-16T13:09:52  *** e0ne has joined #openstack-infra
2014-12-16T13:10:00  <dhellmann> yeah, makes sense now
2014-12-16T13:10:05  <sdague> dhellmann: update their commit message
2014-12-16T13:10:21  <sdague> then zuul throws them back into the check queue because it's a new change
2014-12-16T13:10:37  *** otter768 has quit IRC
2014-12-16T13:11:09  <kedkul> in my CI setup, after keystone startup using stack.sh, it is failing at project create,  user create
2014-12-16T13:11:36  <kedkul> the command it tries to execute doesn't have some parameters
2014-12-16T13:11:49  <kedkul> for ex. openstack project create admin --or-show -f value -c id
2014-12-16T13:12:09  *** kgiusti has joined #openstack-infra
2014-12-16T13:12:16  <kedkul> the error it shown - openstack project create: error: unrecognized arguments: --or-show
2014-12-16T13:12:17  *** Masahiro has quit IRC
2014-12-16T13:12:46  <sdague> kedkul: don't reuse your devstack nodes, openstackclient is at an old version I expect
2014-12-16T13:12:49  <kedkul> kind of same issue is happening for subsequent user create, role create
2014-12-16T13:13:05  <kedkul> ok
2014-12-16T13:13:20  <kedkul> what do you mean by dont reuse devstack nodes
2014-12-16T13:13:37  <kedkul> can you explain?
2014-12-16T13:14:01  <sdague> kedkul: are you deleting the devstack vm after every CI run?
2014-12-16T13:14:24  <kedkul> no, we are using the same vms,
2014-12-16T13:14:38  <sdague> right, that's the crux of the issue
2014-12-16T13:15:02  <kedkul> isn't there any fix that i don't have to rework on my CI setup?
2014-12-16T13:15:14  <sdague> uninstall openstackclient
2014-12-16T13:15:19  <kedkul> is this issue resolvable by updating openstack client
2014-12-16T13:15:23  <sdague> yes
2014-12-16T13:15:49  <kedkul> sdague: i will try that
2014-12-16T13:16:14  <kedkul> sdague: thanks for quick answer
2014-12-16T13:16:18  <sdague> no prob
2014-12-16T13:16:20  <gilliard> sdague: so the patches with updated commit messages will need +1 workflow again?
2014-12-16T13:16:29  <sdague> gilliard: yep
2014-12-16T13:16:38  <sdague> gilliard: they'll also need passing test results
2014-12-16T13:16:38  <gilliard> sdague: thanks - just checking.
2014-12-16T13:16:49  <gilliard> of course ;)
2014-12-16T13:16:57  <sdague> which they currently don't have :)
2014-12-16T13:17:09  <sdague> which is why they are getting pulled
2014-12-16T13:17:45  <gilliard> yep - I've been following. Just wanted to check my understanding for the check/gate process.
2014-12-16T13:17:57  *** avozza is now known as zz_avozza
2014-12-16T13:18:04  <gilliard> I assume they had passing tests before they were +A anyway...
2014-12-16T13:18:09  <sdague> yep
2014-12-16T13:18:43  *** Roamer` has joined #openstack-infra
2014-12-16T13:19:17  *** yfried_ has joined #openstack-infra
2014-12-16T13:19:25  <gilliard> Your explanation above about the transitive dependency mgmt makes me a sad panda.
2014-12-16T13:19:38  <sdague> gilliard: me too
2014-12-16T13:19:43  *** yfried has quit IRC
2014-12-16T13:20:48  <sdague> dhellmann: I kind of wonder if removing the SQLA from keystone would actually help... because the reason it's not upgrade it is there is a distro package
2014-12-16T13:21:03  <sdague> which means we'd still explode later
2014-12-16T13:21:18  <dhellmann> sqla is being installed as a distro package?
2014-12-16T13:21:30  <kedkul> sdague: i assume you are pointing to python-keystoneclient, python-novaclient etc. am I right?
2014-12-16T13:21:34  <sdague> yeh, it's dragged in via something in the base distro
2014-12-16T13:21:59  <dhellmann> sigh
2014-12-16T13:22:02  <sdague> unless we do monty's crazy patch of installing python from source
2014-12-16T13:22:12  <sdague> we're going to have some stuff there
2014-12-16T13:22:55  *** berendt has quit IRC
2014-12-16T13:23:00  *** bswartz has quit IRC
2014-12-16T13:23:56  <sdague> the reality is, also, doing venvs for all this stuff basically only gets around it by the fact that we're installing the whole world at once. The libraries still can cause the same kind of issues here (like if alembic requires a thing that's incompatible with oslo.db)
2014-12-16T13:25:09  <sdague> dhellmann: if you are pulling stuff out, the swift and neutron changes are also going to fail
2014-12-16T13:25:58  *** e0ne is now known as e0ne_
2014-12-16T13:27:03  *** mase_x200 has quit IRC
2014-12-16T13:28:57  *** EmilienM|afk is now known as EmilienM
2014-12-16T13:29:29  <sdague> dstufft: so, seriously, the lack of dependency solver in pip continues to cause us no end of pain. Is that on your horizon some where?
2014-12-16T13:29:44  *** yfried_ has quit IRC
2014-12-16T13:31:16  *** sweston_away has quit IRC
2014-12-16T13:31:23  *** doude has quit IRC
2014-12-16T13:31:24  *** mase_x200 has joined #openstack-infra
2014-12-16T13:31:31  *** doude has joined #openstack-infra
2014-12-16T13:32:21  *** amuller is now known as amuller_afk
2014-12-16T13:32:23  *** amuller_afk is now known as amuller_meeting
2014-12-16T13:33:17  *** lifeless_ has joined #openstack-infra
2014-12-16T13:33:56  *** mfink has joined #openstack-infra
2014-12-16T13:34:46  *** sweston_away has joined #openstack-infra
2014-12-16T13:35:01  *** sweston_away is now known as sweston
2014-12-16T13:35:15  <dhellmann> sdague: I kicked the swift one, but my requirements change is #2 now behind dib so I think it's good
2014-12-16T13:35:25  * dhellmann takes advantage of a break in the rain to go to the bakery 
2014-12-16T13:35:31  *** lifeless has quit IRC
2014-12-16T13:35:35  *** sputnik13 has quit IRC
2014-12-16T13:35:41  *** dtantsur is now known as dtantsur|brb
2014-12-16T13:35:46  *** e0ne_ has quit IRC
2014-12-16T13:38:31  *** jgallard_ has joined #openstack-infra
2014-12-16T13:38:45  <sdague> yeh
2014-12-16T13:41:06  *** mrmartin has quit IRC
2014-12-16T13:41:24  *** sputnik13 has joined #openstack-infra
2014-12-16T13:41:57  *** sputnik13 has quit IRC
2014-12-16T13:42:01  *** ddieterly has quit IRC
2014-12-16T13:42:16  *** vigneshvar has quit IRC
2014-12-16T13:44:04  <nikil22> hi if there is any code submitted the jenkins CI will run only tempest? will this also run unit tests
2014-12-16T13:44:58  <kedkul> it will run unit tests also
2014-12-16T13:47:02  *** mrmartin has joined #openstack-infra
2014-12-16T13:48:35  *** e0ne has joined #openstack-infra
2014-12-16T13:49:01  *** julim has joined #openstack-infra
2014-12-16T13:49:09  <openstackgerrit> James Polley proposed stackforge/gertty: Add detailed examples and dashboards a la gerrit  https://review.openstack.org/142108
2014-12-16T13:49:32  <tchaypo> yes, yes he did.
2014-12-16T13:49:43  *** mrmartin has quit IRC
2014-12-16T13:54:29  <nikil22> kedkul: could you please point me some unit test job's. Because i have seen under "https://github.com/openstack-infra/project-config/tree/master/jenkins/jobs" and i gues its all related to tempest
2014-12-16T13:56:13  *** mtanino has quit IRC
2014-12-16T13:56:47  *** hdd has joined #openstack-infra
2014-12-16T13:57:45  <openstackgerrit> Sean Dague proposed openstack-infra/devstack-gate: disable ceilometer in grenade runs  https://review.openstack.org/138528
2014-12-16T13:57:55  *** bswartz has joined #openstack-infra
2014-12-16T13:58:48  <openstackgerrit> Sean Dague proposed openstack-infra/devstack-gate: disable ceilometer in grenade runs  https://review.openstack.org/138528
2014-12-16T13:59:43  *** emagana has joined #openstack-infra
2014-12-16T13:59:56  *** markmcclain has joined #openstack-infra
2014-12-16T14:01:00  *** mpaolino has joined #openstack-infra
2014-12-16T14:01:17  *** bradjones has quit IRC
2014-12-16T14:02:33  *** zz_johnthetubagu is now known as johnthetubaguy
2014-12-16T14:02:40  * dhellmann returns
2014-12-16T14:03:30  <nikil22> kedkul: ok i see unit test jobs also in same repo. thanks
2014-12-16T14:03:38  *** mrunge is now known as mrunge_gone
2014-12-16T14:04:08  *** emagana has quit IRC
2014-12-16T14:04:41  *** bradjones has joined #openstack-infra
2014-12-16T14:05:01  *** signed8bit has joined #openstack-infra
2014-12-16T14:05:28  *** _nadya_ has joined #openstack-infra
2014-12-16T14:09:40  *** signed8bit has quit IRC
2014-12-16T14:11:08  *** signed8bit has joined #openstack-infra
2014-12-16T14:14:06  *** mase_x200 has quit IRC
2014-12-16T14:14:09  *** emagana has joined #openstack-infra
2014-12-16T14:15:24  *** doug-fish has joined #openstack-infra
2014-12-16T14:17:11  *** wznoinsk_ has joined #openstack-infra
2014-12-16T14:17:56  *** wznoinsk_ has quit IRC
2014-12-16T14:18:36  *** dustins has joined #openstack-infra
2014-12-16T14:19:35  <nikil22> hi i did not find the jenkins job "gate-neutron-python27" in project-config repo. will this unit job be in a different place?
2014-12-16T14:20:09  *** jseiler_ has joined #openstack-infra
2014-12-16T14:20:12  *** signed8bit has quit IRC
2014-12-16T14:21:18  *** signed8bit has joined #openstack-infra
2014-12-16T14:22:35  *** koolhead17 has joined #openstack-infra
2014-12-16T14:22:35  *** koolhead17 has joined #openstack-infra
2014-12-16T14:22:55  *** mtreinish_ has joined #openstack-infra
2014-12-16T14:23:42  *** pelix1 has joined #openstack-infra
2014-12-16T14:23:42  *** pelix has quit IRC
2014-12-16T14:23:56  *** emagana has quit IRC
2014-12-16T14:25:16  *** marcusvrn1 has joined #openstack-infra
2014-12-16T14:25:30  *** jeblair_ has joined #openstack-infra
2014-12-16T14:25:38  *** changbl has quit IRC
2014-12-16T14:26:06  *** ddieterly has joined #openstack-infra
2014-12-16T14:27:01  *** mriedem has joined #openstack-infra
2014-12-16T14:27:01  *** xyang1 has joined #openstack-infra
2014-12-16T14:27:06  *** mwhudson_ has joined #openstack-infra
2014-12-16T14:28:05  *** HenryG_ has joined #openstack-infra
2014-12-16T14:30:14  *** marcusvrn has quit IRC
2014-12-16T14:30:14  *** k4n0 has quit IRC
2014-12-16T14:30:14  *** arxcruz has quit IRC
2014-12-16T14:30:14  *** jpich has quit IRC
2014-12-16T14:30:14  *** jseiler has quit IRC
2014-12-16T14:30:15  *** uvirtbot has quit IRC
2014-12-16T14:30:15  *** HenryG has quit IRC
2014-12-16T14:30:15  *** mtreinish has quit IRC
2014-12-16T14:30:15  *** jeblair has quit IRC
2014-12-16T14:30:15  *** juice has quit IRC
2014-12-16T14:30:16  *** mrodden has quit IRC
2014-12-16T14:30:16  *** ianw has quit IRC
2014-12-16T14:30:16  *** mwhudson has quit IRC
2014-12-16T14:30:17  *** mtreinish_ is now known as mtreinish
2014-12-16T14:30:18  *** juice_ has joined #openstack-infra
2014-12-16T14:30:26  *** juice_ is now known as juice
2014-12-16T14:30:39  *** ianw has joined #openstack-infra
2014-12-16T14:31:01  *** che-arne has joined #openstack-infra
2014-12-16T14:31:24  *** emagana has joined #openstack-infra
2014-12-16T14:31:43  *** che-arne|2 has quit IRC
2014-12-16T14:31:55  *** jerryz has quit IRC
2014-12-16T14:31:56  *** arxcruz has joined #openstack-infra
2014-12-16T14:31:58  *** k4n0 has joined #openstack-infra
2014-12-16T14:33:12  *** amuller_meeting is now known as amuller
2014-12-16T14:33:15  *** esker has joined #openstack-infra
2014-12-16T14:33:22  *** lttrl has joined #openstack-infra
2014-12-16T14:35:49  *** che-arne has quit IRC
2014-12-16T14:36:37  *** jpich has joined #openstack-infra
2014-12-16T14:37:33  <mordred> sdague: but venv-per-service or similar does get us out of caring from day to day
2014-12-16T14:37:51  <sdague> mordred: so, honestly, it really doesn't
2014-12-16T14:37:54  <mordred> really?
2014-12-16T14:37:54  <sdague> it just masks it
2014-12-16T14:38:06  <mordred> sure. it masks it. but it in and of itself is not actually important
2014-12-16T14:38:19  <mordred> it's important for single-machine continuous delivery systems
2014-12-16T14:38:23  <sdague> so all that venv-per-service does it basically set the minimums in requirements to the current releases
2014-12-16T14:38:45  *** sabeen1 has joined #openstack-infra
2014-12-16T14:38:51  <mordred> sorry - venv-per-service and no more global requirements sync in devstack
2014-12-16T14:38:54  <sdague> sure
2014-12-16T14:39:09  <mordred> because doing just venv-per-service but still syncing is silly :)
2014-12-16T14:39:19  <sdague> but again, you'd get similar behavior if we set min == max more or less
2014-12-16T14:39:39  <mordred> it's possible we're talking about different "the problem"s
2014-12-16T14:40:10  <sdague> the crux of the problem that broke us for the last day is pip not resolving dependencies
2014-12-16T14:40:16  *** Masahiro has joined #openstack-infra
2014-12-16T14:40:32  <sdague> which is made slightly harder by us having so many dependencies
2014-12-16T14:40:39  <sdague> in system
2014-12-16T14:40:49  <mordred> AH - yes, thank you. I was still talking about upgrades in lockstep due to bad upstream upgrade paths
2014-12-16T14:40:58  <sdague> right
2014-12-16T14:41:05  <sdague> so, honestly, that's not really the problem
2014-12-16T14:41:08  <mordred> you're right - your problem is not solved by venvs
2014-12-16T14:41:21  <mordred> your problem is why distro packages were invented
2014-12-16T14:41:49  <sdague> so, sorry, I had other duties last night so had about 5 minutes of context before I had to run
2014-12-16T14:42:06  <mordred> because apt and yum both handle this extremely well
2014-12-16T14:42:07  <sdague> however, in looking through these failures, the venv model wouldn't have helped
2014-12-16T14:42:10  <mordred> agree
2014-12-16T14:42:17  *** tnovacik has joined #openstack-infra
2014-12-16T14:42:57  <sdague> and while it will reduce our exposure to these failures, they'll still all be there, because pip is crazy pants when it comes to transitive dependencies
2014-12-16T14:43:00  <dhellmann> yeah, i think we misunderstood how grenade worked
2014-12-16T14:43:14  *** e0ne is now known as e0ne_
2014-12-16T14:44:12  *** jerryz has joined #openstack-infra
2014-12-16T14:44:38  <dhellmann> sdague: the juno patch merged, and I'm waiting for the master requirements patch to finish failing so I can make sure it only fails on oslo.db before rechecking
2014-12-16T14:44:38  <mordred> sdague: I don't REALLY want to suggest this next thing - but just for sake of completeness...
2014-12-16T14:44:52  *** Masahiro has quit IRC
2014-12-16T14:44:58  <mordred> sdague: should we entertain the idea of returning to creating distro packages for the gate?
2014-12-16T14:45:25  <sdague> for the entire python dependency chain?
2014-12-16T14:45:30  <mordred> yes
2014-12-16T14:45:35  <sdague> oof
2014-12-16T14:45:43  <mordred> most of them are likely able to be done completely automatically
2014-12-16T14:45:47  *** uvirtbot has joined #openstack-infra
2014-12-16T14:45:51  <dhellmann> fpm has a pretty nice "make a package from a setup.py" thing
2014-12-16T14:45:54  <mordred> (I'm not talking about debian policy compliant packages)
2014-12-16T14:46:03  <mordred> yah. something like that
2014-12-16T14:46:12  <sdague> so that would be to bypass pip ?
2014-12-16T14:46:17  <mordred> except with a mechanism so that if there is a specific thing in the chain that needs an override, we can d it
2014-12-16T14:46:18  <sdague> and have an actual dependency resolver
2014-12-16T14:46:19  *** mattfarina has joined #openstack-infra
2014-12-16T14:46:22  <mordred> yah
2014-12-16T14:46:26  <sdague> so that's an option
2014-12-16T14:46:26  *** lttrl has quit IRC
2014-12-16T14:46:28  <mordred> it's how we started life :)
2014-12-16T14:46:44  <dhellmann> or we could go help fix the dependency resolver in pip
2014-12-16T14:46:45  <sdague> if pip is never going to address this hole
2014-12-16T14:46:48  <dhellmann> not sure which is simpler
2014-12-16T14:46:59  <mordred> I know dstufft _wants_ a dep solver
2014-12-16T14:47:15  <mordred> but otoh, pure-python dep solvers aren't exactly growing on trees
2014-12-16T14:47:17  *** lttrl has joined #openstack-infra
2014-12-16T14:47:24  *** amitgandhinz has joined #openstack-infra
2014-12-16T14:47:28  <mordred> but otoh, GOOD pure-python dep solvers aren't exactly growing on trees
2014-12-16T14:47:30  *** e0ne_ is now known as e0ne
2014-12-16T14:48:23  <sdague> also... we apparently found the slowest node in all of HP cloud to run this job on - https://jenkins01.openstack.org/job/check-grenade-dsvm-neutron/6758/console
2014-12-16T14:48:35  *** vhoward has joined #openstack-infra
2014-12-16T14:48:53  <sdague> I'm going to be really interested in looking at those logs once it completes to figure out why
2014-12-16T14:49:12  <sdague> ok, biab
2014-12-16T14:49:55  *** dimtruck is now known as zz_dimtruck
2014-12-16T14:50:35  *** dtantsur|brb is now known as dtantsur
2014-12-16T14:51:18  <fungi> quiet morning so far
2014-12-16T14:53:14  *** kedkul has quit IRC
2014-12-16T14:53:21  *** yaguang has quit IRC
2014-12-16T14:53:48  *** lttrl has quit IRC
2014-12-16T14:53:50  *** ayoung has joined #openstack-infra
2014-12-16T14:55:07  <gilliard> join #openstack-meeting-3
2014-12-16T14:55:32  * gilliard *sigh*
2014-12-16T14:55:39  *** dpaterson has joined #openstack-infra
2014-12-16T14:56:24  *** carl_baldwin has joined #openstack-infra
2014-12-16T14:56:50  *** jerryz has quit IRC
2014-12-16T14:57:03  *** mrodden has joined #openstack-infra
2014-12-16T14:57:14  *** jerryz has joined #openstack-infra
2014-12-16T14:57:19  *** che-arne has joined #openstack-infra
2014-12-16T14:58:00  <mordred> gilliard: not so much with that working :)
2014-12-16T15:00:56  *** dprince has quit IRC
2014-12-16T15:00:57  *** zz_dimtruck is now known as dimtruck
2014-12-16T15:01:14  *** dprince has joined #openstack-infra
2014-12-16T15:03:17  *** dmsimard_away is now known as dmsimard
2014-12-16T15:03:55  *** pblaho has joined #openstack-infra
2014-12-16T15:03:58  *** erikwilson has joined #openstack-infra
2014-12-16T15:04:18  *** erikwilson has quit IRC
2014-12-16T15:05:58  *** lttrl has joined #openstack-infra
2014-12-16T15:07:10  *** otter768 has joined #openstack-infra
2014-12-16T15:09:46  *** wenlock has joined #openstack-infra
2014-12-16T15:09:47  *** ddieterly has quit IRC
2014-12-16T15:10:10  *** dkranz has quit IRC
2014-12-16T15:10:20  *** ddieterly has joined #openstack-infra
2014-12-16T15:11:42  *** hdd has quit IRC
2014-12-16T15:12:06  *** tnovacik has quit IRC
2014-12-16T15:12:08  *** otter768 has quit IRC
2014-12-16T15:12:26  *** lttrl has quit IRC
2014-12-16T15:12:42  *** andreaf has quit IRC
2014-12-16T15:13:17  *** dustins has quit IRC
2014-12-16T15:13:28  *** lttrl has joined #openstack-infra
2014-12-16T15:14:22  *** dustins has joined #openstack-infra
2014-12-16T15:15:48  *** timcline has joined #openstack-infra
2014-12-16T15:16:01  *** timcline has quit IRC
2014-12-16T15:16:34  *** timcline has joined #openstack-infra
2014-12-16T15:17:02  *** nelsnelson has joined #openstack-infra
2014-12-16T15:17:07  <openstackgerrit> Thierry Carrez proposed openstack-infra/project-config: Generate tarballs for neutron-*aas on tags  https://review.openstack.org/142126
2014-12-16T15:17:39  <ttx> fungi: we'll need that one in before we start tagging tomorrow ^
2014-12-16T15:18:21  *** flaper87 has quit IRC
2014-12-16T15:18:21  *** flaper87 has joined #openstack-infra
2014-12-16T15:18:24  <ttx> also, neutron-*aas has stable branches defined (probably a by-product of the git-filter) while they don't make sense there, would be better to just remove them.
2014-12-16T15:19:11  *** jcoufal_ has joined #openstack-infra
2014-12-16T15:19:16  *** wenlock has quit IRC
2014-12-16T15:19:41  <fungi> ttx: clarkb had lobbied pretty strongly to keep the branches for discoverability purposes, but maybe just tagging the tips with something instead and deleting the branches would be an acceptable compromise
2014-12-16T15:20:08  <ttx> fungi: yeah.. I just don't want people to get excited and propose changes there
2014-12-16T15:20:13  <fungi> also i thought there was already a change proposed to add the server release jobs to the neutron advanced services projects... double-checking real quick
2014-12-16T15:20:29  <ttx> since stable/juno changes to fwaas should just be proposed to openstack/neutron
2014-12-16T15:20:41  <fungi> ttx: yep, i agree it could cause trouble
2014-12-16T15:20:56  <fungi> i'll confirm with clarkb and we'll come up with a suitable tag pattern
2014-12-16T15:21:03  <ttx> not sure I understand why you need to "discover" them, but can clarify with clarkb
2014-12-16T15:21:24  *** david-lyle has joined #openstack-infra
2014-12-16T15:21:30  <fungi> it was for purposes of being able to easily diff the kilo and juno versions of a file from one of the drivers, for example
2014-12-16T15:21:37  *** jcoufal has quit IRC
2014-12-16T15:22:01  <ttx> ah. hmm, tags should work for that yes
2014-12-16T15:22:10  <fungi> agreed
2014-12-16T15:22:51  <fungi> i would argue that the existing tags already cut from those branches would be suitable for that matter, but i'll get his input once he's around
2014-12-16T15:23:20  *** dkranz has joined #openstack-infra
2014-12-16T15:23:31  *** jp_at_hp has quit IRC
2014-12-16T15:23:31  *** jp_at_hp has joined #openstack-infra
2014-12-16T15:23:49  <openstackgerrit> Merged openstack-infra/elastic-recheck: Update wording in the CONTRIBUTING.rst file  https://review.openstack.org/141978
2014-12-16T15:24:43  *** stevemar has joined #openstack-infra
2014-12-16T15:24:50  *** signed8bit has quit IRC
2014-12-16T15:24:50  *** signed8bit has joined #openstack-infra
2014-12-16T15:25:01  *** pelix1 has quit IRC
2014-12-16T15:25:01  *** pelix1 has joined #openstack-infra
2014-12-16T15:25:07  *** mriedem has quit IRC
2014-12-16T15:25:07  *** mriedem has joined #openstack-infra
2014-12-16T15:25:08  *** HenryG_ has quit IRC
2014-12-16T15:25:08  *** HenryG_ has joined #openstack-infra
2014-12-16T15:25:11  *** ianw has quit IRC
2014-12-16T15:25:11  *** ianw has joined #openstack-infra
2014-12-16T15:25:12  *** k4n0 has quit IRC
2014-12-16T15:25:12  *** k4n0 has joined #openstack-infra
2014-12-16T15:25:29  *** ayoung has quit IRC
2014-12-16T15:25:29  *** ayoung has joined #openstack-infra
2014-12-16T15:25:33  *** che-arne has quit IRC
2014-12-16T15:25:33  *** che-arne has joined #openstack-infra
2014-12-16T15:26:16  *** jcoufal_ has quit IRC
2014-12-16T15:26:16  *** jcoufal_ has joined #openstack-infra
2014-12-16T15:26:23  *** dkranz has quit IRC
2014-12-16T15:26:23  *** dkranz has joined #openstack-infra
2014-12-16T15:28:07  <openstackgerrit> Jeremy Stanley proposed openstack-infra/system-config: Add an AFS Git mirror for review-dev projects  https://review.openstack.org/142130
2014-12-16T15:28:50  <fungi> it _can't_ be as easy as that ^ so i'm sure i'm missing something (at a minimum i need to set afs acls to allow writes there)
2014-12-16T15:28:56  *** yamamoto has quit IRC
2014-12-16T15:29:18  *** yamamoto has joined #openstack-infra
2014-12-16T15:29:29  *** afazekas has joined #openstack-infra
2014-12-16T15:29:37  <fungi> oh, spotted an error already
2014-12-16T15:29:50  *** afazekas is now known as afazekas_pto
2014-12-16T15:30:16  *** koolhead17 has quit IRC
2014-12-16T15:30:19  <openstackgerrit> Jeremy Stanley proposed openstack-infra/system-config: Add an AFS Git mirror for review-dev projects  https://review.openstack.org/142130
2014-12-16T15:30:21  <mtreinish> jogo: do you still need an answer to that? It's because of juno and the reqs set there
2014-12-16T15:30:56  *** rgerganov has joined #openstack-infra
2014-12-16T15:32:42  *** erlon has joined #openstack-infra
2014-12-16T15:33:48  <rgerganov> fungi: hi, I have replied to your question about the GAE on the mail list
2014-12-16T15:33:55  <rgerganov> fungi: let me know if you need more info
2014-12-16T15:34:27  *** mpaolino has quit IRC
2014-12-16T15:36:18  *** yamamoto has quit IRC
2014-12-16T15:36:38  <clarkb> fungi ttx yup mostly wanted to make sure we werent losing history on the assumption we dont need it today. tags are fine
2014-12-16T15:38:47  *** hdd has joined #openstack-infra
2014-12-16T15:39:54  *** jerryz has quit IRC
2014-12-16T15:40:20  *** wenlock has joined #openstack-infra
2014-12-16T15:41:14  *** emagana has quit IRC
2014-12-16T15:41:58  *** rgerganov has quit IRC
2014-12-16T15:42:03  *** pcaruana has quit IRC
2014-12-16T15:43:21  *** mpaolino has joined #openstack-infra
2014-12-16T15:44:12  *** erikwilson has joined #openstack-infra
2014-12-16T15:44:45  *** mpaolino has quit IRC
2014-12-16T15:45:31  *** erikwilson has quit IRC
2014-12-16T15:45:39  *** mpaolino has joined #openstack-infra
2014-12-16T15:45:51  *** nikil22 has quit IRC
2014-12-16T15:46:38  *** erikwilson has joined #openstack-infra
2014-12-16T15:47:55  <clarkb> what is wrong with the newer requirements in oslo.db?
2014-12-16T15:48:22  <dhellmann> clarkb: ?
2014-12-16T15:48:29  <fungi> clarkb: requirements integration tests are what's wrong
2014-12-16T15:48:32  <clarkb> reading scrollback
2014-12-16T15:48:49  <clarkb> sdague says "new oslo.db" requirements bad
2014-12-16T15:49:01  <clarkb> I think that means 1.3.0
2014-12-16T15:49:03  *** carl_baldwin has quit IRC
2014-12-16T15:49:24  <fungi> clarkb: we want to release an oslo.db compatible with stable/juno's global-requirements.txt, so the sqla version specified in 1.3.0 needs to be rolled back first
2014-12-16T15:50:13  *** erikmwilson has quit IRC
2014-12-16T15:50:18  *** erikwilson is now known as erikmwilson
2014-12-16T15:50:26  <openstackgerrit> Merged openstack-infra/jenkins-job-builder: deprecate postbuildscript onsuccess and onfailure parameter names  https://review.openstack.org/139257
2014-12-16T15:50:37  *** talluri has quit IRC
2014-12-16T15:50:42  <clarkb> because of how grenade tests? or because pinning oslo.db isnt working?
2014-12-16T15:51:30  *** erikwilson has joined #openstack-infra
2014-12-16T15:51:36  <fungi> clarkb: i believe where we got to was _before_ dropping sqla 0.8 support in oslo.db release one which has a requirements file compatible with setuptools 8
2014-12-16T15:51:58  <openstackgerrit> Thierry Carrez proposed openstack-infra/project-config: Generate tarballs for neutron-*aas on tags  https://review.openstack.org/142126
2014-12-16T15:52:19  <ttx> sorry about that ^ -- missed the merge-tags job definition
2014-12-16T15:52:21  *** david-lyle has quit IRC
2014-12-16T15:52:46  <fungi> so roll back to the current stable/juno sqlalchemy requirement, cut a new oslo.db 1.4.0 with that, then drop sqlalchemy 0.8 support in master and pin stable/juno's oslo.db requirement <1.5
2014-12-16T15:53:09  <clarkb> fungi: gotcha
2014-12-16T15:53:55  <fungi> because the only reason 1.3.0 was incompatible with stable/juno was that we "ostensibly" dropped sqlalchemy 0.8 support some people might still be using
2014-12-16T15:54:43  <garyk> AJaeger: you around?
2014-12-16T15:55:20  <clarkb> however the requirements do overlap so I don't think that should be a problem
2014-12-16T15:55:27  <clarkb> eg we didn't remove an upgrade path for anyone
2014-12-16T15:55:27  <sdague> clarkb: just got back from errand, here is the bullet points
2014-12-16T15:55:39  <sdague> the requirements overlap isn't actually required
2014-12-16T15:56:02  <fungi> ttx: aha, i missed that we didn't put merge-tags in the server-release-jobs template
2014-12-16T15:56:17  <fungi> good catch
2014-12-16T15:56:26  <sdague> unless we want to support running new swift with old ceilometer installed into it's pipeline (like we've been doing on grenade upgrade tests forever by accident)
2014-12-16T15:56:55  <ttx> fungi: well, the test caught it for me. Nice one.
2014-12-16T15:57:03  *** reed has joined #openstack-infra
2014-12-16T15:57:06  <fungi> oh, hah
2014-12-16T15:57:08  <sdague> we do need everything that's going to install in a branch to have roughly the same requirements
2014-12-16T15:57:16  <clarkb> sdague: right (we have discussed this before and I was strongly on not bothering with that but everyone else thought it was important)
2014-12-16T15:57:17  *** achanda has joined #openstack-infra
2014-12-16T15:57:39  <sdague> clarkb: so we were arguing slightly different things
2014-12-16T15:58:30  <sdague> I still think services should be able to upgrade one at a time, right now ceilometer is the only thing which violates that
2014-12-16T15:58:36  <fungi> ttx: actually, i think it's the other way around... the jenkins job template for {name}-merge-release-tags needs to be instantiated in jenkins/jobs/projects.yaml
2014-12-16T15:58:46  <sdague> https://review.openstack.org/#/c/142075/ changes upgrade order accordingly
2014-12-16T15:58:49  <sdague> with a bug reference
2014-12-16T15:59:23  <clarkb> sdague: so how is oslo.db 1.3.0 whihc is a "kilo" release dropping sqlalchemy 0.8 a problem for juno which allows 0.8 and 0.9?
2014-12-16T15:59:24  *** dustins has quit IRC
2014-12-16T15:59:41  <clarkb> sdague: when kil should use 1.2.1 of oslo.db that allows oth 0.8 and 0.9?
2014-12-16T15:59:47  <sdague> because juno allowed oslo db
2014-12-16T15:59:50  <sdague> 1.3
2014-12-16T16:00:04  <fungi> clarkb: because we still need some way to backport a fix for this to something before 1.3 if we cap it <1.3 in stable/juno
2014-12-16T16:00:16  *** markmcclain has quit IRC
2014-12-16T16:00:20  <clarkb> but we were going to pin oslo.db
2014-12-16T16:00:31  <sdague> which apparently didn't happen
2014-12-16T16:00:45  <clarkb> fungi: not really since we are currently oeprating in weird realm of setuptools 7
2014-12-16T16:00:46  *** dustins has joined #openstack-infra
2014-12-16T16:00:52  <fungi> clarkb: right, but our branching ideas fell short without significant rework on how we test those library backport branches
2014-12-16T16:01:02  <jeblair_> i am told the oslo.db pin didn't happen because of the grenade failure
2014-12-16T16:01:06  <sdague> until this morning when dhellmann pushed it
2014-12-16T16:01:20  <sdague> no, it passed grenade
2014-12-16T16:01:42  <sdague> I don't know why it didn't happen, but it was outstanding until this morning
2014-12-16T16:01:50  *** emagana has joined #openstack-infra
2014-12-16T16:02:12  <jeblair_> well that changes a lot :)
2014-12-16T16:02:22  <sdague> https://review.openstack.org/#/c/141896/
2014-12-16T16:03:32  <jeblair_> oh, so why wasn't that cap <1.1 ?
2014-12-16T16:03:32  <ttx> fungi: ah, oops.
2014-12-16T16:03:48  <jeblair_> because of grenade, right?
2014-12-16T16:03:49  <sdague> the grenade change provides some equivalent cushion, plus after filing the bug on ceilometer around it, cdent is going to look into reviving a spec
2014-12-16T16:04:02  *** bhunter71 has joined #openstack-infra
2014-12-16T16:04:07  <sdague> jeblair_: I don't know
2014-12-16T16:04:27  <dkranz> sdague: Is there some known failures happening a lot with jobs  failing all juno + check-grenade-dsvm + check-grenade-dsvm-partial-ncpu
2014-12-16T16:04:42  <sdague> dkranz: yes, see *ALL* of the last 4 hrs of backlog here
2014-12-16T16:04:44  <fungi> i thought capping <1.1 when master requires newer than 1.1 was identified as something which wouldn't pass grenade?
2014-12-16T16:04:56  <openstackgerrit> Thierry Carrez proposed openstack-infra/project-config: Generate tarballs for neutron-*aas on tags  https://review.openstack.org/142126
2014-12-16T16:04:58  <dkranz> sdague: ok
2014-12-16T16:05:00  <ttx> fungi: that should do it ^
2014-12-16T16:05:04  *** isviridov is now known as isviridov_away
2014-12-16T16:05:15  <jeblair_> that was our understanding yesterday, but now that sdague is around perhaps that is changing?
2014-12-16T16:05:19  <dhellmann> fungi: it may pass grenade, it won't pass our requirements check that explicitly looks for overlapping ranges
2014-12-16T16:05:38  *** achanda has quit IRC
2014-12-16T16:05:41  <fungi> dhellmann: oh, right, i forgot we have that too. maybe that's just a bad idea in general?
2014-12-16T16:05:42  <dhellmann> jeblair_: after we tag oslo.db 1.4 I planned to land https://review.openstack.org/#/c/142131/
2014-12-16T16:05:58  <dhellmann> fungi: yeah, I'm not sure why we think we need that
2014-12-16T16:05:58  <sdague> so... without https://review.openstack.org/#/c/142075/ (which just merged) that might have been true
2014-12-16T16:06:06  <sdague> because ceilometer
2014-12-16T16:06:17  <dhellmann> I don't understand all of the requirements that led to what we have now
2014-12-16T16:06:32  <dhellmann> sdague: do you mean because of ceilometer & swift?
2014-12-16T16:06:41  <sdague> dhellmann: yep
2014-12-16T16:06:53  <dhellmann> ok, well, if we're pointing fingers let's point them in the right direction
2014-12-16T16:06:56  <fungi> dhellmann: oh, so part of the reason we implemented that check is that if you approve a change in requirements with no overlap from its previous value, then it trashes everything being tested behind it
2014-12-16T16:07:51  <AJaeger> garyk, I'll be around again in two hours or so...
2014-12-16T16:07:57  <dhellmann> fungi: behind it in the gate?
2014-12-16T16:08:25  <sdague> fungi: though that's not true any more right
2014-12-16T16:08:26  <fungi> dhellmann: right, i'm now trying to remember the reasons why that happens
2014-12-16T16:08:38  <sdague> because the mirror used to be controlled via g-r
2014-12-16T16:08:40  <jeblair_> https://bugs.launchpad.net/openstack-ci/+bug/1274731
2014-12-16T16:08:41  <uvirtbot> Launchpad bug 1274731 in openstack-ci "non overalapping change to requirements repo broke gate" [Medium,Confirmed]
2014-12-16T16:08:47  <jeblair_> haha!  it's because of the mirror
2014-12-16T16:08:52  <jeblair_> which is not an issue anymore
2014-12-16T16:08:52  *** rmcall has joined #openstack-infra
2014-12-16T16:08:57  <fungi> sdague: oh, that's why we were doing it, yep
2014-12-16T16:09:11  <fungi> clearly i drank away the brain cells that recorded that info
2014-12-16T16:09:23  <dhellmann> the requirements change to make the settings for sqlalchemy in master match the ones in juno passed its check: https://review.openstack.org/#/c/141927/2
2014-12-16T16:09:27  <fungi> so we should totally get rid of that check now
2014-12-16T16:09:36  <jeblair_> fungi: luckily launchpad remembered
2014-12-16T16:09:42  <dhellmann> shall I self-approve that, or do we have some other people here with +2 on requirements?
2014-12-16T16:09:46  <clarkb> so reading this I am still not sure why we need 141927
2014-12-16T16:10:00  <clarkb> indication seems to be we can pin stable/juno requirements which allows 0.8 and 0.9
2014-12-16T16:10:07  <clarkb> then master can use 0.9?
2014-12-16T16:10:14  *** AJaeger has quit IRC
2014-12-16T16:10:18  <openstackgerrit> Steven Weston proposed openstack-infra/infra-specs: Third Party CI Dashboard Spec  https://review.openstack.org/135170
2014-12-16T16:10:19  <fungi> jeblair_: hah
2014-12-16T16:10:38  <dhellmann> clarkb: we have a job that forbids that. We can turn that off, but that's a bigger change than just making the ranges overlap again.
2014-12-16T16:10:50  * jeblair_ is making that change now
2014-12-16T16:10:59  *** lttrl has quit IRC
2014-12-16T16:11:02  <fungi> clarkb: the change to oslo.db gets tested against master requirements
2014-12-16T16:11:08  *** lttrl has joined #openstack-infra
2014-12-16T16:11:18  <sdague> yeh, I'm not sure I know why we'd do 141927
2014-12-16T16:11:19  <clarkb> fungi: OOOHHHH thats what I was missing
2014-12-16T16:11:27  <dhellmann> oh, I looked away, are we dropping that requirements range thing?
2014-12-16T16:11:29  <clarkb> ok /me feels caught up now
2014-12-16T16:12:02  <dhellmann> I guess that means I don't need https://review.openstack.org/#/c/142131/ either
2014-12-16T16:12:08  <sdague> so... why isn't oslo.db just coming on the stable/juno branch of oslo.db?
2014-12-16T16:12:13  <dhellmann> or a new oslo.db release?
2014-12-16T16:12:23  <fungi> clarkb: unless we want to do something about the fact that the oslo.db stable/juno branch is based on 1.0 even though we want to be able to use newer than 1.0 in stable/juno servers
2014-12-16T16:12:26  <dhellmann> the stable/juno branch of oslo.db was from the 1.0 series
2014-12-16T16:12:30  <clarkb> fungi: right
2014-12-16T16:12:49  <jeblair_> fungi: why do we want to use something newer than 1.0/
2014-12-16T16:12:51  <jeblair_> ?
2014-12-16T16:12:58  <jeblair_> i mean, we want to use 1.0.1...
2014-12-16T16:12:59  <dhellmann> I prepared a patch to merge 1.2 back into stable/juno, but that also includes other requirements updates which I didn't think we wanted in stable branches?
2014-12-16T16:13:01  <fungi> jeblair_: that's a question for dhellmann i think
2014-12-16T16:13:04  <sdague> dhellmann: ok, so why isn't that what get's fixed?
2014-12-16T16:13:18  * dhellmann tries to remember all of what happened yesterday
2014-12-16T16:13:37  <dhellmann> ok, let's just start over
2014-12-16T16:13:57  <fungi> jeblair_: at the moment we say stable/juno works with all versions of oslo.db, so if we backport this fix to a 1.0.1 release then we need to cap stable/juno to oslo.db <1.1 even though we previously said it works with later versions
2014-12-16T16:14:01  <dhellmann> do we care about overlapping ranges on requirements?
2014-12-16T16:14:09  <fungi> so somewhat of a linearity problem
2014-12-16T16:14:20  <openstackgerrit> Steven Weston proposed openstack-infra/infra-specs: Third Party CI Dashboard Spec  https://review.openstack.org/135170
2014-12-16T16:14:37  <sdague> dhellmann: no, that grenade patch works around it
2014-12-16T16:14:42  *** Ala has quit IRC
2014-12-16T16:14:44  *** koolhead17 has joined #openstack-infra
2014-12-16T16:14:56  <dhellmann> sdague: ok, in that case some of what we worked out to do yesterday is no longer needed
2014-12-16T16:15:17  <jeblair_> fungi: oh, i guess i didn't see that as a problem, but i understand how one might.
2014-12-16T16:15:31  <dhellmann> this is the plan I've been working from this morning: https://etherpad.openstack.org/p/cloL2FzTRd
2014-12-16T16:15:51  <sdague> so it seems like a release should come off the stable/juno branch of oslo.db
2014-12-16T16:15:53  *** achanda has joined #openstack-infra
2014-12-16T16:15:58  <sdague> now, that branch could be 1.1
2014-12-16T16:16:02  <sdague> 1.0.1 that is
2014-12-16T16:16:04  <dhellmann> sdague: what release do you want?
2014-12-16T16:16:13  <sdague> or you could roll forward to 1.2.1 on that branch
2014-12-16T16:16:17  <dhellmann> because it sounds like now all we need to do is cap oslo.db <1.1 and we're fine
2014-12-16T16:16:18  *** dannywilson has joined #openstack-infra
2014-12-16T16:16:38  <fungi> sdague: can't exactly roll forward on that branch because it has cherry-picked backports of fixes
2014-12-16T16:16:39  <dhellmann> 1.1 and 1.2 introduce other dependency changes, is it ok to do that to stable?
2014-12-16T16:16:53  <fungi> sdague: so it's not fast-forwardable to 1.2.0
2014-12-16T16:16:53  *** jpich has quit IRC
2014-12-16T16:16:56  <dhellmann> this is why we created the feature/1.2 branch to allow us to have a safe 1.2.1 release
2014-12-16T16:17:00  <sdague> dhellmann: I don't actually care, just the thing which was breaking in a new way was trying to release a stable/juno dependency *not* off a stable/juno branch
2014-12-16T16:17:36  <dhellmann> yeah, that was failing because of the way the requirements check job is written right now (it assumes the branch in the lib and the requirements repo will match)
2014-12-16T16:17:55  <dhellmann> so we'll need to change that, and we talked about how to change it with jeblair_ yesterday
2014-12-16T16:17:56  <sdague> dhellmann: which is a completely sane check, honestly
2014-12-16T16:18:05  <dhellmann> but we thought we could fix all of this without waiting for that change
2014-12-16T16:18:26  <fungi> right, if we try to merge 1.2.0 into the stable/juno branch then we'll be merging a change to requirements.txt which isn't in sync with stable/juno of global requirements
2014-12-16T16:18:30  <dhellmann> sdague: it is, until you start wanting to maintain multiple backport versions of something like a library that isn't tied to the stable release cycle
2014-12-16T16:18:31  <sdague> so... I'm really not understanding how releasing a library, specifically required for stable/juno to work
2014-12-16T16:18:33  *** dannywil_ has joined #openstack-infra
2014-12-16T16:18:39  <sdague> not off the stable/juno branch of the library
2014-12-16T16:18:42  <sdague> is a safer thing
2014-12-16T16:18:43  <jeblair_> sdague: i believe that for feature branches, it should check against master.  i want to make that change regardless.  in a sane world, we should not use a feature branch for this, we should be working from stable/juno.
2014-12-16T16:18:57  <jeblair_> (which is why i'm also interested in fixing that)
2014-12-16T16:19:16  *** hashar has quit IRC
2014-12-16T16:19:21  <dhellmann> sdague: because until this morning we did not think we could have the requirements for oslo.db in juno and kilo not overlap, and so we needed a version of oslo.db with dependencies on sqla that worked in both, and no such library exists
2014-12-16T16:19:22  <sdague> jeblair_: ok
2014-12-16T16:19:45  *** dangers_away is now known as dangers
2014-12-16T16:20:37  *** dannywilson has quit IRC
2014-12-16T16:20:39  <dhellmann> up until this change that involved new requirements, I would have agreed. However, as we're using Semver, we can't change the dependencies of 1.0.x. The fix for this problem was to change the dependencies of oslo.db.
2014-12-16T16:20:48  *** ihrachyshka has quit IRC
2014-12-16T16:21:09  <dhellmann> so we needed a release outside of the 1.0 series with the fix, and the last version known to work in juno and master was 1.2
2014-12-16T16:21:59  <dhellmann> so we were trying to prepare a release of 1.2 that would work in both places, but that didn't work because of some of the jobs, and then we worked out that it would be quicker to release a 1.4 off of master than to fix all of the things we would have to fix to allow us to release a 1.2
2014-12-16T16:22:28  <dhellmann> I had hoped to have this all resolved yesterday, but ran out of time
2014-12-16T16:23:02  <dhellmann> so, now that I've replayed all of that, what do we actually want to do today? Do we want a 1.4, or do we want a lower cap on juno? Or neither?
2014-12-16T16:23:37  *** dannywil_ has quit IRC
2014-12-16T16:23:51  <openstackgerrit> Dave Walker proposed openstack-dev/pbr: Ignore non-release related tags  https://review.openstack.org/142144
2014-12-16T16:24:08  *** dannywilson has joined #openstack-infra
2014-12-16T16:24:22  <clarkb> I think now that I grok where 1.4 comes from I am ok with moving forward on that and improving this process later when we are not under pressure of coming pip release
2014-12-16T16:24:42  <dhellmann> sdague, fungi, jeblair_ : ?
2014-12-16T16:25:26  *** koolhead17 has quit IRC
2014-12-16T16:25:29  <jeblair_> dhellmann: i'm trying to make it so that we can work on the stable/juno branch to release a library version that fixes a stable/juno problem since i think that's the right way to solve this in general.  it's broken now, and i'm happy to do whatever we think is most expeditious.
2014-12-16T16:26:21  <sdague> yeh, I think the thing that got lost is anything with a stable/juno branch needs a cap that references it
2014-12-16T16:26:34  <dhellmann> jeblair_: ok, well, we're always going to have multiple release branches for oslo libs within a cycle because now that we're not using alphas we're going to have lots of X.Y+1 releases instead. So I don't know if it even makes sense to have stable/foo for those repos, but I haven't had time to think about that
2014-12-16T16:26:39  *** kragniz is now known as kragwhale
2014-12-16T16:27:24  *** pelix1 is now known as pelix
2014-12-16T16:27:28  <jeblair_> dhellmann: yeah, our thinking is that you either have stable/<name> or stable/<number>.  this is not well exercised, so yeah, we can push on that later.  :)
2014-12-16T16:27:36  <fungi> i'm trying to think through the potential logistics of the next unidentified stable backport we'll need for oslo.db... if we don't enforce requirements checks for the stable branch until we start development on a version which we intend to make non-backward-compatible, we're still going to have this problem
2014-12-16T16:28:08  <dhellmann> jeblair_: but that aside, it's no longer clear to me if we *need* a 1.4 today because IIUC sdague's proposal is to just cap the version of oslo.db in stable/juno even if that results in a non-overlapping requirements range
2014-12-16T16:28:16  <jeblair_> fungi: i think that's where sdague's "if it has a stable/juno branch, we need to cap use of it" comes in
2014-12-16T16:28:38  <sdague> fungi: so the thing to realize is, all of requirements synchronization is a work around for pip not having a solver
2014-12-16T16:28:40  *** skolekonov has quit IRC
2014-12-16T16:28:44  <jeblair_> dhellmann: yeah -- so in that case are we considering a 1.1 cap or 1.3?
2014-12-16T16:28:54  <sdague> so we need to carefully spoon feed it a set of things which won't explode
2014-12-16T16:28:54  *** yolanda has joined #openstack-infra
2014-12-16T16:29:01  <dhellmann> we did agree at the summit that we wanted to cap versions in the stable branches, but we ran into issues with the upgrade test jobs breaking
2014-12-16T16:29:02  *** Masahiro has joined #openstack-infra
2014-12-16T16:29:08  <clarkb> sdague: sort of. We can still explode it with a solver
2014-12-16T16:29:15  <fungi> where this gets tricky is that we need to cap these even if they don't (yet) have stable branches, because they may need one later
2014-12-16T16:29:19  <sdague> clarkb: but at least we'd explode early
2014-12-16T16:29:28  <clarkb> true
2014-12-16T16:29:38  <sdague> right now the pip silent fail ... oh things are great... kaboom
2014-12-16T16:29:45  <sdague> is really problematic
2014-12-16T16:29:49  <dhellmann> jeblair_: if we're going to cap it permanently, I'd say <1.1 because that lets us avoid releasing fixes of 1.1, 1.2, and 1.3 with the requirements for sqla that work with setuptools
2014-12-16T16:30:05  *** david-lyle has joined #openstack-infra
2014-12-16T16:30:17  <sdague> which actually almost makes me want to do mordred's plan, which is stop using pip
2014-12-16T16:30:20  <sdague> build packages
2014-12-16T16:30:28  <sdague> have a package manager that actually has a solver
2014-12-16T16:30:38  <jeblair_> dhellmann: that seems sensible to me, i believe fungi was suggesting that people may have ended up with juno + 1.2 installed and we would make life hard for them.  i do not know how theoretical of a problem that is.
2014-12-16T16:30:57  <fungi> we release kilo with an open-ended requirement on foolib which is available at version 1.0.0 at the time. we should at the kilo release pin foolib<1.1 in anticipation of later needing to backport fixes which will work with a later state of stable/kilo
2014-12-16T16:31:03  <dhellmann> jeblair_: ok, if we think that's a real thing (it's likely) then we should probably go ahead with the 1.4 release
2014-12-16T16:31:20  <sdague> dhellmann: do we know if tests pass with oslo.db < 1.1?
2014-12-16T16:31:33  <sdague> that would be good data
2014-12-16T16:31:46  <sdague> because projects could have used new features in their backports
2014-12-16T16:31:55  <dhellmann> jeblair_: and then work on the tools to make it possible to do releases from arbitrary stable branches with numbers instead of names
2014-12-16T16:31:56  *** koolhead17 has joined #openstack-infra
2014-12-16T16:32:06  <jeblair_> sdague: would creating clean environments on upgrade help us here?  ie, re-install everything into a new {system,venv,container} on upgrade?  that way pip does the same thing on new install as upgrade?
2014-12-16T16:32:19  <sdague> jeblair_: no, it just reduces the surface
2014-12-16T16:32:20  <dhellmann> sdague: that's a good question, but I think fungi's point about CD sites probably already having 1.2 trumps it
2014-12-16T16:32:21  <clarkb> one issue with mordreds plan is that we shift a lot of effort to the deployers if/when we do that. We essentially say don't install from source (which tripleo does for example) and everyone needs to build packages
2014-12-16T16:32:53  <sdague> because pip's lack of solver still can put us in these binds
2014-12-16T16:32:54  <jeblair_> sdague: but it makes upgrade == install; so it reduces it to the minimum we can if we support installing with pip at all, right?
2014-12-16T16:33:24  <dhellmann> clarkb: we talked about using something like fpm to build "dumb" packages that aren't necessarily compliant. I'd rather find some resources to help fix the pip resolver, though
2014-12-16T16:33:48  <sdague> jeblair_: so... it it was a venv that did not allow system packages, it would make for a small fail surface, but it would still be there
2014-12-16T16:33:51  <clarkb> dhellmann: yup and iirc mordred said "no one should use these packages but us" so we would really expect everyone to start building them
2014-12-16T16:33:57  *** david-lyle has quit IRC
2014-12-16T16:34:01  *** Masahiro has quit IRC
2014-12-16T16:34:01  *** nfedotov has quit IRC
2014-12-16T16:34:07  <dhellmann> clarkb: I'm not sure I follow
2014-12-16T16:34:18  *** EmilienM is now known as EmilienM|afk
2014-12-16T16:34:35  <sdague> package 1.0 depends on foo>=1.0
2014-12-16T16:34:46  <sdague> foo 1.0 depends on bar>=1.3
2014-12-16T16:34:47  <clarkb> dhellmann: today many people deploy from source. eg tripleo. They can do this because upstream of deployment we have taken on a lot of work of curating package dependencies and making sure you can install from source
2014-12-16T16:34:58  <sdague> if bar != installed
2014-12-16T16:35:21  <dstufft> urgh
2014-12-16T16:35:23  <dhellmann> clarkb: oh, I see what you mean
2014-12-16T16:35:25  <clarkb> dhellmann: if we switch to system packages that are built only for testing then we essentially are telling all of these downstream deployers that installing from source is at their own risk (and we know it is risky) or you all need to build packages
2014-12-16T16:35:27  <sdague> pip install -e ./package  drags in foo, and bar >= 1.3
2014-12-16T16:35:31  <jeblair_> sdague: yeah, i understand -- i read all the scrollback :)
2014-12-16T16:35:35  <sdague> jeblair_: ok
2014-12-16T16:35:57  <sdague> jeblair_: so the reality is, it reduces the surface, but the problem still remains
2014-12-16T16:36:06  <jeblair_> sdague: i'm just saying that currently "install openstack via pip" has a behavior; replacing the env during upgrade at least makes the upgrade dependency resolution (such that it is) the same as installation
2014-12-16T16:36:14  <jeblair_> sdague: which as you point out, is problematic still :)
2014-12-16T16:36:17  <sdague> right
2014-12-16T16:36:42  <clarkb> that doesn't rule out system packages, its just a thing to consider
2014-12-16T16:36:53  *** yamamoto has joined #openstack-infra
2014-12-16T16:36:58  *** reed has quit IRC
2014-12-16T16:37:05  <jeblair_> okay.  so i guess if we think that upgrade!=install is a problem, we could look into that.  if we're more concerned with install!=ideal, then we should just do packages or fix pip.
2014-12-16T16:37:05  *** cnesa has quit IRC
2014-12-16T16:37:16  <sdague> which, honestly, we could get *nearly* the same behavior on by just setting the min == max on requirements before we sync
2014-12-16T16:37:19  *** dustins has quit IRC
2014-12-16T16:37:24  *** reed has joined #openstack-infra
2014-12-16T16:37:34  *** MarkAtwood has joined #openstack-infra
2014-12-16T16:37:39  <sdague> because clean venvs are going to produce that
2014-12-16T16:38:04  <dstufft> honestly one of the things blocking a better dep solver in pip is that their is a lack of good libs for it (there is one or two, but last I looked they didn't work well) and I haven't cleared enough time out to actually learn how to write a SAT solver
2014-12-16T16:38:35  <mordred> jeblair_: I played some this morning with both fpm and stdeb
2014-12-16T16:39:09  <jeblair_> sdague, dhellmann: i have a problem -- i can not find that we actually run the requirements overlap check.
2014-12-16T16:39:12  <mordred> jeblair_: I think producing os packages is an automatic manner may not be terrible
2014-12-16T16:39:20  <jeblair_> sdague, dhellmann: https://review.openstack.org/#/c/98262/3  change that added it
2014-12-16T16:39:21  <sdague> jeblair_: we may not
2014-12-16T16:39:36  <jeblair_> sdague, dhellmann: but there's no zuul entry with the word 'overlap' in it
2014-12-16T16:39:46  *** ryanpetrello has joined #openstack-infra
2014-12-16T16:40:31  *** Swanson has left #openstack-infra
2014-12-16T16:41:12  <dhellmann> jeblair_: isn't it in http://git.openstack.org/cgit/openstack-infra/project-config/tree/jenkins/scripts/project-requirements-change.py somewhere?
2014-12-16T16:41:28  *** yamamoto has quit IRC
2014-12-16T16:41:33  <dhellmann> no, that just checks against the global list, doesn't it
2014-12-16T16:41:40  <jeblair_> dhellmann: that was the first version which was reverted due to this bug: https://bugs.launchpad.net/openstack-ci/+bug/1326504
2014-12-16T16:41:42  <uvirtbot> Launchpad bug 1326504 in openstack-ci "Requirements change and check causes proposal failure" [Undecided,Fix released]
2014-12-16T16:42:00  <jeblair_> then the idea was to move it into the requirements repo. and apparently all the work to do that was done except actually running the job
2014-12-16T16:42:47  *** rmcall has quit IRC
2014-12-16T16:43:04  <dhellmann> jeblair_: http://git.openstack.org/cgit/openstack-infra/project-config/tree/jenkins/jobs/projects.yaml#n1414
2014-12-16T16:43:21  <dhellmann> but I guess you're saying that's not in zuul
2014-12-16T16:43:26  <jeblair_> yep
2014-12-16T16:43:33  <dhellmann> fun
2014-12-16T16:43:53  <dhellmann> so the job we're worried about isn't configured to run?
2014-12-16T16:43:53  <jeblair_> everything we thought yesterday was wrong.  :)  hopefully we won't say the same tomorrow
2014-12-16T16:44:05  *** david-lyle_afk is now known as david-lyle
2014-12-16T16:44:11  * dhellmann looks for a softer wall to bang his head on
2014-12-16T16:44:42  <dstufft> fungi: if you're not aware, anatoly is a bit trollish sometimes
2014-12-16T16:44:47  <openstackgerrit> James E. Blair proposed openstack/requirements: Remove requirements overlap check  https://review.openstack.org/142151
2014-12-16T16:44:51  * dims offers dhellmann a pillow :)
2014-12-16T16:44:57  <dstufft> fungi: I think he generally means well, but he doesn't take no for an answer hardly ever heh
2014-12-16T16:45:02  <openstackgerrit> James E. Blair proposed openstack-infra/project-config: Remove requirements overlap check  https://review.openstack.org/142152
2014-12-16T16:45:16  *** andreaf has joined #openstack-infra
2014-12-16T16:45:37  <dhellmann> dstufft: has anatoly found openstack?
2014-12-16T16:45:59  <dstufft> dhellmann: he's on distutils-sig and saying he wants openstack to replace PEP 440 because t's not semver
2014-12-16T16:46:05  <dhellmann> ah
2014-12-16T16:46:41  <dstufft> and fungi was responding so I was just letting fungi know that anatoly can be a huge time suck
2014-12-16T16:46:41  <jeblair_> dstufft: popped that popcorn yet? :)
2014-12-16T16:46:51  <fungi> dstufft: right, i just wanted to make sure he didn't further the general perception that openstack is not a real free software project because many people who work on it are paid contributors
2014-12-16T16:47:07  *** zz_gondoi is now known as gondoi
2014-12-16T16:47:18  <dolphm> is there still an openstack pypi mirror available somewhere?
2014-12-16T16:47:28  <dstufft> theres one per region I believe
2014-12-16T16:47:31  <dstufft> jeblair_: lol
2014-12-16T16:47:45  <fungi> dstufft: particularly on an ml frequented primarily by non-openstack python developers
2014-12-16T16:47:46  *** mattfarina has quit IRC
2014-12-16T16:48:00  <fungi> dolphm: nope, just full pypi mirrors. there's nothing "openstack" about them
2014-12-16T16:48:13  *** mattfarina has joined #openstack-infra
2014-12-16T16:48:29  <dolphm> fungi: hmm - what made it possible for the mirror to go away?
2014-12-16T16:48:29  <sdague> jeblair_: that's some twitterable quote there :)
2014-12-16T16:48:39  *** belmoreira has quit IRC
2014-12-16T16:48:41  <fungi> dolphm: we run some embedded in the providers/regions where we run our tests to have lower-latency package install times for the servers there
2014-12-16T16:49:30  <fungi> dolphm: we stopped using a special limited-scope mirror for enforcing requirements list coordination, in favor of jobs which checked directly
2014-12-16T16:49:32  <dolphm> for the partial* mirror to go away
2014-12-16T16:49:42  <jeblair_> sdague: heh, yesterday dstufft tempted fate by saying something like "only a couple of responses on the thread, maybe i don't have to pop the popcorn"  ;)
2014-12-16T16:49:48  *** changbl has joined #openstack-infra
2014-12-16T16:49:53  <sdague> jeblair_: nice
2014-12-16T16:49:54  <dolphm> fungi: where can i find those jobs?
2014-12-16T16:50:06  <sdague> jeblair_: though I was refering to further up
2014-12-16T16:50:12  <sdague> https://twitter.com/sdague/status/544896798725513216
2014-12-16T16:50:23  <jeblair_> sdague: oh :)
2014-12-16T16:50:33  <fungi> dolphm: mostly http://git.openstack.org/cgit/openstack-infra/project-config/tree/jenkins/jobs/requirements.yaml
2014-12-16T16:51:01  <clarkb> ok so, now that we have rehashed and seem to grok the situation as it is today :) what can I do to help move things along?
2014-12-16T16:51:05  <clarkb> dhellmann: ^
2014-12-16T16:51:05  *** vigneshvar has joined #openstack-infra
2014-12-16T16:51:10  <dolphm> fungi: awesome, thanks
2014-12-16T16:51:22  * clarkb is throwing him self into the fire because this stuff is important
2014-12-16T16:51:58  <dhellmann> clarkb: I still feel more comfortable going ahead with a 1.4 release, then capping juno to use that (skipping the broken versions 1.1, 1.2, and 1.3. It's not clear to me that we have consensus on that, though.
2014-12-16T16:52:01  <clarkb> mordred: still around? your pbr changes fail pep8 again. Also, do we want to hold off on the second one to drop shas to hear back on dstufft's inding?
2014-12-16T16:52:09  *** mrmartin has joined #openstack-infra
2014-12-16T16:52:24  <mordred> clarkb: I'm actually kinda convinced we should just drop them
2014-12-16T16:52:26  <clarkb> s/inding/findings/
2014-12-16T16:52:29  <dstufft> jeblair_: though I'm still pretty happy overalll. I know setuptools 8 is causing some issues here, and a few other places, but overall I think it's gone about as good as changes to this could have gone
2014-12-16T16:52:38  <mordred> clarkb: but I'd also be easy to convince to hold off
2014-12-16T16:52:44  <jeblair_> clarkb: i believe this is dhellman's plan etherpad: https://etherpad.openstack.org/p/cloL2FzTRd
2014-12-16T16:53:07  <clarkb> jeblair_: thanks I have that open now
2014-12-16T16:53:20  <clarkb> I am +1 on releaseing a 1.4
2014-12-16T16:53:31  <dhellmann> clarkb: because even though jeblair_ found that we're not running the requirements overlap job, fungi pointed out that CD environments are probably already running 1.2, so I don't want to make the pin lower than that
2014-12-16T16:53:32  <clarkb> if others agree I will review the requirements change
2014-12-16T16:53:35  *** e0ne is now known as e0ne_
2014-12-16T16:53:38  <clarkb> dhellmann: yup
2014-12-16T16:53:55  *** e0ne_ is now known as e0ne
2014-12-16T16:54:03  <dstufft> clarkb: mordred fwiw I have some meetings today but I plan to get some numbers for the normalization rule after that, if it looks like it won't do anything bad to what we parse as a version thne I'll propose ammending PEP 440 with it on distutils-sig. I don't suspect anyone will fight me on it
2014-12-16T16:54:17  <mordred> k.
2014-12-16T16:54:35  <clarkb> dstufft: ok, and assuming all that the change to not emit normalized versions in setuptools is also non controversial?
2014-12-16T16:54:44  <jeblair_> what's the normalization rule?
2014-12-16T16:54:47  <dhellmann> jeblair_: do you mean cap the dependencies in versions with stable branches, or cap the oslo lib versions with stable branches?
2014-12-16T16:54:55  <dstufft> clarkb: Most likely I'll just make it so pbr can turn off the normalization
2014-12-16T16:54:57  <openstackgerrit> Merged openstack-infra/project-config: Fix publishing rally html results  https://review.openstack.org/140296
2014-12-16T16:55:05  <dstufft> not that setuptools won't in general emit then normalized
2014-12-16T16:55:08  <clarkb> dstufft: toggleable flag? that should work too
2014-12-16T16:55:12  <dstufft> clarkb: yea
2014-12-16T16:55:21  <mordred> clarkb: pushed fixed patch - sorry bout that
2014-12-16T16:55:35  *** alexpilotti has quit IRC
2014-12-16T16:55:43  <clarkb> jeblair_: basically dstufft's proposal is treat a trailing .[:alnum:] string as string sorted not number sorted. This would get normalized to +[:alnum:]
2014-12-16T16:55:45  <dstufft> jeblair_: take a final trailing .alphanumeric (not .alphanumeric.alphanumerc, or anything else, one dot, and alpha num and normalize it to +alphanum)
2014-12-16T16:56:12  <clarkb> jeblair_: the problem right now is that setuptools emits the normalized form (+[:alnum:]) in the package it creates so older setuptools would still be broken
2014-12-16T16:56:18  *** koolhead17 has quit IRC
2014-12-16T16:56:27  <dstufft> we had something similar to that in the course of testing variations of PEP 440 but I don't think we ever tested it on it's own
2014-12-16T16:56:35  <dstufft> I think it also came with some other rules that we ultimately dropped
2014-12-16T16:56:37  *** MaxV has quit IRC
2014-12-16T16:56:39  <dstufft> like an implicit leading zero
2014-12-16T16:56:43  <clarkb> jeblair_: so we would need some way of disabling that to stick with .[:alnum:] then let normalization happen only internal to setuptools. Otherwse we are not forward and backward compat
2014-12-16T16:56:47  <jeblair_> dhellmann: i'm trying to say "try to do the thing we agreed to do at the summit and attempted and failed to do", which i think is "for every project with a stable branch, cap the version of that project to the latest that currently meets the spec for the project in that branch"
2014-12-16T16:56:50  <dstufft> which meant that we got some relaly bad version parses
2014-12-16T16:56:51  *** sputnik13 has joined #openstack-infra
2014-12-16T16:57:08  <dstufft> like object object repr()s that got parsed as 0+<object repr>
2014-12-16T16:57:18  <jeblair_> dhellmann: or put another way: do what would have been needed for us to be able to release 1.0.1 here
2014-12-16T16:57:25  <dstufft> so I just need to make sure that the rule won't allow something crazy
2014-12-16T16:57:26  <mordred> clarkb: the idea of having a normalization that we somehow disable
2014-12-16T16:57:36  <dhellmann> jeblair_: ok. That ship may have sailed for many of the oslo libs, though. We are currently testing juno against releases made during kilo and as fungi pointed out that may mean CD sites have them, too. We would be forcing downgrades on them.
2014-12-16T16:57:43  <mordred> clarkb: sounds like something thats going to increase the amount of strangenes and confusion over time
2014-12-16T16:57:57  <clarkb> mordred: it might and is generally why I am on baord with dropping the shas completely
2014-12-16T16:58:14  <dhellmann> jeblair_: I suppose we could have made a 1.0.3 or whatever that had the sqlalchemy settings specified in a way that worked for setuptools 8
2014-12-16T16:58:14  <dstufft> mordred: to be clear, you're only controlling whether setuptools is going to emit the normalized version, not controlling whether normalization happens on the installee end
2014-12-16T16:58:15  <mordred> from what I can tell, most of the CD deployers munge the versions themselves anyway
2014-12-16T16:58:20  <jeblair_> dhellmann: so maybe we cap it at what's there now to avoid making things worse?  i dunno.  we can come back to it, i just don't want to forget and then in 2 weeks say "i thought we..."
2014-12-16T16:58:32  *** markmcclain has joined #openstack-infra
2014-12-16T16:58:39  <dhellmann> jeblair_: yes, definitely, I'm just trying to figure out what exactly we want to do :-)
2014-12-16T16:58:51  *** garyk has quit IRC
2014-12-16T16:59:02  *** sarob has joined #openstack-infra
2014-12-16T16:59:07  <clarkb> dstufft: right since old setuptools wouldn't normalize at all and just work (tm) then new setuptools could normalize during its install
2014-12-16T16:59:11  <dstufft> mordred: essentially letting you act as if for dist creation you're not using setuptools 8
2014-12-16T16:59:27  <clarkb> dstufft: the important bit is that the intermediate step of a whl or sdist artifact not normalize so that it is portable
2014-12-16T16:59:32  <dstufft> clarkb: yea
2014-12-16T16:59:35  <mordred> yes. I get that
2014-12-16T16:59:37  <mordred> EXCEPT
2014-12-16T16:59:44  <mordred> that it takes a lot of mental effort for me to get that
2014-12-16T16:59:51  <mordred> so it's tripping me "we're making this too hard" alarm
2014-12-16T16:59:54  <mordred> my
2014-12-16T16:59:58  *** dtantsur is now known as dtantsur|afk
2014-12-16T17:00:05  <clarkb> mordred: agreed. I really do like your solution :)
2014-12-16T17:00:10  <mordred> I would prefer to lessen the number of things that only 4 of us understand
2014-12-16T17:00:22  *** cnesa has joined #openstack-infra
2014-12-16T17:00:27  <dhellmann> jeblair_: to cap to something <1.3 (the current highest release, which is broken), we need a way to release a 1.2.1. Going with 1.4 seemed expedient, since the code in 1.3 should work fine, it's just the dependencies that are broken.
2014-12-16T17:00:58  <anteaya> mordred: thanks
2014-12-16T17:01:10  * anteaya is trying to follow along, is totally lost
2014-12-16T17:01:31  <dstufft> mordred: my life is series of things that 4 people understand at this point :V
2014-12-16T17:02:00  <anteaya> dstufft: you are on my list of people to understand, alas not today
2014-12-16T17:02:03  <dstufft> clarkb mordred: I would prefer not to add that normalization rule fwiw, but I'm not opposed to doing it if we can
2014-12-16T17:02:35  <clarkb> mordred: dstufft: maybe it is more productive on the whole to just not worry about it. accept that lifeless would rather we not go down this path, apologize, then merge mordred's changes?
2014-12-16T17:02:50  <mordred> clarkb: I vote for that
2014-12-16T17:02:55  <mordred> jeblair_, dhellmann: ^^ ?
2014-12-16T17:04:01  * dhellmann doesn't understand the question
2014-12-16T17:04:01  *** hashar has joined #openstack-infra
2014-12-16T17:04:48  <dhellmann> mordred, clarkb : which patch?
2014-12-16T17:04:55  <clarkb> dhellmann: 141667
2014-12-16T17:04:59  <mordred> dhellmann: we're debating dropping the git sha from the intra-release generated versions from pbr
2014-12-16T17:05:04  <clarkb> dhellmann: the one you asked for more comments on which I am not opposed to adding :)
2014-12-16T17:05:07  <dstufft> dhellmann: when creating a dev version, pbr currently puts a git sha in the version. That doens't work with the current PEP 440. the choices are a) drop shas from the version string (they will be recorded elsewhere) or b) I go and see about adding some normalization rules to PEP 440 to make it work again
2014-12-16T17:05:14  <mordred> dhellmann: however, if you need your head in the other problem, feel free to ignore us
2014-12-16T17:06:00  <dhellmann> mordred: yeah, I'm really trying to get a resolution on the sqlalchemy issue first, but I give zero toots about shas in version numbers if we can have a "patch number since last tag" or something
2014-12-16T17:06:25  <mordred> dhellmann: yup. we can have that
2014-12-16T17:06:35  <jeblair_> mordred: i personally find including it in the version to be of limited utility, specifically because of the weird sorting, so a weak +1 from me.  i do not pretend to understand all the other possible use cases this might affect.
2014-12-16T17:06:49  <dhellmann> and the issue with dropping the sha is we don't get unique versions for CD folks?
2014-12-16T17:06:51  *** ChuckC_ has joined #openstack-infra
2014-12-16T17:07:04  <mordred> only if they jump around
2014-12-16T17:07:19  <mordred> there might be two different things that are different that have version 1.2.3.4
2014-12-16T17:07:30  <mordred> in that that's two different things that are 4 patches patst 1.2.3
2014-12-16T17:07:32  <clarkb> where 4 is the patch level
2014-12-16T17:07:34  <mordred> I don't really care
2014-12-16T17:07:37  *** ChuckC has quit IRC
2014-12-16T17:07:46  <mordred> at that point, they're doing crazypants and I can't help them anyway
2014-12-16T17:08:00  <dhellmann> yeah, I see that it could be a problem, but I'm not sure it's our problem
2014-12-16T17:08:01  *** otter768 has joined #openstack-infra
2014-12-16T17:08:10  <dhellmann> esp. not if it means everything else is broken for everyone else
2014-12-16T17:08:30  <fungi> the primary concern expressed against boiled down to "cd sysadmins are relying on being able to see the git sha in the package version number now, and shouldn't need to install and run some new command from pbr to find them"
2014-12-16T17:08:35  *** sarob has quit IRC
2014-12-16T17:09:14  <mordred> yah. I think aligning with upstream python sensibilities is more important, even if it means shorterm discomfort for someone
2014-12-16T17:09:24  <fungi> a position which i, as a long-time sysadmin myself, have a hard time developing sympathy for
2014-12-16T17:09:31  <sdague> it seems reasonable to tell cd folks "you need this other tool"
2014-12-16T17:09:47  <mordred> especially when the tool will get installed on your system already
2014-12-16T17:09:50  *** sweston is now known as _sweston
2014-12-16T17:09:51  <sdague> yep
2014-12-16T17:10:15  <dstufft> I think the other thing was that pip would know it needs to reinstall if you do ``pip install foo==<some version with a git hash>`` but it wouldn't if you didn't do that
2014-12-16T17:10:40  <mordred> this is true
2014-12-16T17:10:46  <dstufft> but you can either uninstall first or do pip install -U --force-reinstall foo==<some version without a git hash>
2014-12-16T17:10:49  <mordred> yah
2014-12-16T17:11:00  *** sarob has joined #openstack-infra
2014-12-16T17:11:01  <mordred> it's an edge case, and again, you need to know what your'e doing there
2014-12-16T17:12:21  <dstufft> mordred: I didn't look at the patch recent, but one suggestion I did have was change the comment so it was like # from git <hash> or something
2014-12-16T17:12:27  *** sweston has joined #openstack-infra
2014-12-16T17:12:29  <dstufft> instead of just # <hash>
2014-12-16T17:12:37  *** carl_baldwin has joined #openstack-infra
2014-12-16T17:12:44  *** Guest51388 has quit IRC
2014-12-16T17:12:49  *** otter768 has quit IRC
2014-12-16T17:12:51  *** markmcclain1 has joined #openstack-infra
2014-12-16T17:13:26  *** markmcclain has quit IRC
2014-12-16T17:13:30  <fungi> i like the explicitness of that, though i was okay without (since previous behavior was just as opaque, thus not a regression)
2014-12-16T17:14:49  *** vigneshvar has quit IRC
2014-12-16T17:14:53  *** rmcall has joined #openstack-infra
2014-12-16T17:15:10  *** sweston has quit IRC
2014-12-16T17:15:28  *** sweston has joined #openstack-infra
2014-12-16T17:15:34  <ttx> dstufft: will PEP440 be ahppy with 2015.1.b1 or should it be 2015.1b1 now ?
2014-12-16T17:15:57  <ttx> fungi: about to tag Trove but realized I may have an issue here
2014-12-16T17:16:08  <dstufft> ttx: it'll accept 2015.1.b1 but it'll normalize to 2015.1b1
2014-12-16T17:16:27  <ttx> dstufft: ok, so I'll hit the same hurdle as with 2.2.1.rc1
2014-12-16T17:17:01  <dstufft> ttx: yes most likely
2014-12-16T17:17:06  <ttx> i.e. our usage of setuptools will result in a tarball named 2015.1b1.tar.gz and a tag names 2015.1.b1
2014-12-16T17:17:12  <dstufft> yes
2014-12-16T17:17:21  <dstufft> if you create it with setuptools 8+
2014-12-16T17:17:22  <ttx> hmmm, ok
2014-12-16T17:17:29  <clarkb> speaking of
2014-12-16T17:17:30  *** sputnik13 has quit IRC
2014-12-16T17:17:32  <zaro> morning
2014-12-16T17:17:33  *** enikanorov has quit IRC
2014-12-16T17:17:37  <clarkb> mordred: https://review.openstack.org/#/c/141831/ your thoughts on that are also appreciated
2014-12-16T17:17:43  <clarkb> mordred: it is related to ttx's questions above
2014-12-16T17:17:57  <ttx> clarkb: any hint on whether I should do .b1 or b1 ?
2014-12-16T17:18:02  <clarkb> ttx: note that 141831 would prevent a tag of 2015.1.b1
2014-12-16T17:18:14  <dstufft> I think that's a hint to do b1
2014-12-16T17:18:16  <dstufft> lol
2014-12-16T17:18:16  <ttx> yep
2014-12-16T17:18:25  *** mtanino has joined #openstack-infra
2014-12-16T17:18:40  <ttx> I mean, if we know that we'll only do bX soon, I'm fine with starting today
2014-12-16T17:18:42  *** tonytan4ever has joined #openstack-infra
2014-12-16T17:18:56  <ttx> better than changing in the middle of the cycle
2014-12-16T17:18:56  *** sputnik13 has joined #openstack-infra
2014-12-16T17:19:08  <clarkb> ttx: +1, lets see what mordred thinks about that if he is still around
2014-12-16T17:19:08  <zaro> notmyname: i think you and edwin are talking about 2 different things when you are referring to a 'custom dashboar'.  i think edwin is referring to the custom dashboard feature while you are referring to a custom query.
2014-12-16T17:19:38  *** ChuckC_ has quit IRC
2014-12-16T17:19:47  <zaro> notmyname: this is an example of a custom dashboard: https://review.openstack.org/#/projects/All-Projects,dashboards/important-changes:important-changes-dashboard
2014-12-16T17:20:01  *** ivar-lazzaro has joined #openstack-infra
2014-12-16T17:20:57  <sdague> jeblair_: so... unrelated to all of this
2014-12-16T17:21:06  <sdague> what's up with the zuul event graphs?
2014-12-16T17:21:12  <pleia2> morning
2014-12-16T17:21:19  <notmyname> zaro: ah. right. I'm referring to eg what http://goo.gl/r2mxbe resolves to
2014-12-16T17:21:20  <clarkb> dhellmann: would it be ok if I put non oslo.db related setuptools 8.0 things on your etherpad too?
2014-12-16T17:21:31  *** achanda has quit IRC
2014-12-16T17:21:37  <dhellmann> clarkb: sure
2014-12-16T17:22:50  *** carl_baldwin has quit IRC
2014-12-16T17:23:01  *** sarob has quit IRC
2014-12-16T17:23:05  *** dims has quit IRC
2014-12-16T17:23:07  *** sarob_ has joined #openstack-infra
2014-12-16T17:23:28  <mordred> clarkb: looking
2014-12-16T17:23:35  *** dmsimard is now known as dmsimard_away
2014-12-16T17:23:41  *** dims has joined #openstack-infra
2014-12-16T17:23:46  <dstufft> clarkb: I think you can also update PEP 440 but still emit normalized things, it would just mean that CD operators need to be setuptools 8+
2014-12-16T17:23:57  <zaro> notmyname: yeah, i think what you want is to be able to share just an arbitrary query.
2014-12-16T17:24:00  *** yamamoto has joined #openstack-infra
2014-12-16T17:24:04  <dstufft> if that's a better option for y'all in confusion terroritory wise
2014-12-16T17:24:29  <zaro> notmyname: that feature does not exist in gerrit today.
2014-12-16T17:24:31  <dstufft> I Have a hard time telling the difference between things that make sense to me because they are easy to understand and things that make sense to me becuase I wrote 8000 words on versioning
2014-12-16T17:24:32  <notmyname> zaro: thanks. I'll try to clarify that
2014-12-16T17:24:41  *** achanda_ has joined #openstack-infra
2014-12-16T17:25:10  <jeblair_> sdague: i believe it's hitting timeouts; i landed a fix to address that
2014-12-16T17:25:16  <jeblair_> clarkb, fungi: ^ maybe we should restart zuul now
2014-12-16T17:25:29  *** dmsimard_away is now known as dmsimard
2014-12-16T17:25:34  <clarkb> jeblair_: the fix was to bump the timeout locally again?
2014-12-16T17:25:42  <mordred> clarkb: so pep440 wants us to make 2015.1.1b1 if we were good little chickens?
2014-12-16T17:25:48  <jeblair_> clarkb: yeah, though this time it's in a real change to zuul
2014-12-16T17:25:56  <dstufft> mordred: 2015.1b1
2014-12-16T17:26:01  <clarkb> mordred: correct, and if you do something else it will normalize to that and thats the version in your sdist
2014-12-16T17:26:03  <dstufft> if you want the normalized version
2014-12-16T17:26:07  <dstufft> oh
2014-12-16T17:26:10  <dstufft> I missed the second .1
2014-12-16T17:26:13  <clarkb> dstufft: I think 2014.1.1b1 is also allowed
2014-12-16T17:26:27  <dstufft> yea it Is, I just didn't read close enough and thought mordred was repeating ttx's version
2014-12-16T17:26:42  <ttx> mordred: I tagged Swift 2.2.1.rc1 and that cvreated swift-2.2.1c1.tar.gz, so we backtracked and tagged Swift 2.2.1c1
2014-12-16T17:26:53  <clarkb> mordred: so in the interest of reducing confusion I assert the tag should match pep440 as well
2014-12-16T17:26:57  <ttx> mordred: now I need to push kilo-1 tags... used to be 2015.1.b1
2014-12-16T17:26:58  <dstufft> note that 2015.1.1b1 is newer than 2015.1
2014-12-16T17:27:10  <dstufft> 2015.1.0b1 is equiv though
2014-12-16T17:27:13  <mordred> I agree - the tag should match the thing that will be normalized so taht both things agree
2014-12-16T17:27:18  <ttx> mordred: but 2015.1b1 sounds liek the way to get tags matching tarballs
2014-12-16T17:27:25  *** derekh has quit IRC
2014-12-16T17:27:37  *** shashankhegde has joined #openstack-infra
2014-12-16T17:27:41  <clarkb> dstufft: noted
2014-12-16T17:27:50  *** sarob_ is now known as sarob
2014-12-16T17:27:51  <ttx> If everyone agrees, I'll tag kilo-1 as 2015.1b1
2014-12-16T17:27:51  <mordred> ttx: yes. except then we've got two different regexes - can we just mkae the servers 2015.1.0b1 so that we can have one and only one regex we accept?
2014-12-16T17:27:56  *** alexpilotti has joined #openstack-infra
2014-12-16T17:27:59  *** jcoufal_ has quit IRC
2014-12-16T17:28:05  *** dims_ has joined #openstack-infra
2014-12-16T17:28:08  <clarkb> mordred: my regex accepts both
2014-12-16T17:28:11  <mordred> right.
2014-12-16T17:28:26  <clarkb> mordred: I don't think I follow "two different regexes"
2014-12-16T17:28:30  <mordred> but I don't want to accept a letter in the second stanza for most things - that's a server ideosyncracy
2014-12-16T17:28:31  *** achanda_ has quit IRC
2014-12-16T17:28:37  *** dims has quit IRC
2014-12-16T17:28:52  <mordred> like, we NEVER want 1.0b1 for any of our things if we're trying to trend everythign that isn't the servers towards semver
2014-12-16T17:28:59  <mordred> so if we're changing the server pattern anyway
2014-12-16T17:29:07  *** sarob_ has joined #openstack-infra
2014-12-16T17:29:10  *** achanda has joined #openstack-infra
2014-12-16T17:29:13  <mordred> why not go ahead and make it at least fit the stricter regex
2014-12-16T17:29:13  <clarkb> mordred: so my intent was to match PEP440 as closely as possible
2014-12-16T17:29:20  <clarkb> mordred: and not proscribe anything atop that
2014-12-16T17:29:25  <mordred> oh, I don't want to do that
2014-12-16T17:29:30  <mordred> I want to proscribe on top of it
2014-12-16T17:29:36  <dstufft> pep 440 allows some crazy versions
2014-12-16T17:29:37  <clarkb> because that additional stuff is what is biting us today
2014-12-16T17:29:46  <mordred> because there is no good reason to allow 1.0 instead of 1.0.0
2014-12-16T17:29:48  <dstufft> accepting a subset of pep 440 is recommended
2014-12-16T17:29:52  <mordred> dstufft: ++
2014-12-16T17:30:05  <clarkb> mordred: ok so you want to require three digit sections?
2014-12-16T17:30:07  <mordred> yes
2014-12-16T17:30:13  <clarkb> ok let me update regexes
2014-12-16T17:30:16  <mordred> because then there is just a rule
2014-12-16T17:30:18  *** ihrachyshka has joined #openstack-infra
2014-12-16T17:30:20  <ttx> mordred: and tag finazl as 2015.1.0 ?
2014-12-16T17:30:21  <mordred> well - hang on
2014-12-16T17:30:27  <mordred> make sure other people who aren't me agree :)
2014-12-16T17:30:30  <mordred> ttx: yes
2014-12-16T17:30:55  <mordred> that's my pitch - I could be insane though
2014-12-16T17:31:17  <ttx> I'm not sure I follow the "only 3 digit sections" rationale
2014-12-16T17:31:39  <dstufft> semver says you have to have 3 digits
2014-12-16T17:31:41  <dstufft> semver.org
2014-12-16T17:31:56  <clarkb> we did not enforce that before, but I am happy to enforce it now
2014-12-16T17:31:57  <ttx> dstufft: sure but here we are talking date-based versioning
2014-12-16T17:32:16  *** yamamoto has quit IRC
2014-12-16T17:32:25  *** sarob has quit IRC
2014-12-16T17:32:26  * ttx looks up previous tags to minimize disruption
2014-12-16T17:32:35  <mordred> ttx: right. I don't care about the date based versions per-se
2014-12-16T17:32:35  *** mkerrin has quit IRC
2014-12-16T17:32:49  <mordred> ttx: what I want to do is enforce that non-date-based have 3 stanzas
2014-12-16T17:32:58  <mordred> it doesn't _break_ date based to have 3
2014-12-16T17:33:01  *** marun has joined #openstack-infra
2014-12-16T17:33:08  <mordred> so the simplest thing is just to say "have 3 kthxbai"
2014-12-16T17:33:11  <ttx> and you want a single regexp, ok
2014-12-16T17:33:13  <dstufft> for whatever it's worth, PEP 440 treats 2015.1.0 and 2015.1 as exactly equiv, so it's entirely a human decision
2014-12-16T17:33:15  <ttx> makes sense
2014-12-16T17:33:20  <dstufft> as far as PEP 440 goes
2014-12-16T17:33:23  <ttx> well, not really, but I see your point now
2014-12-16T17:33:26  *** marcusvrn1 has quit IRC
2014-12-16T17:33:30  <mordred> that way there is a very simple rule for people to follow
2014-12-16T17:33:37  *** achanda has quit IRC
2014-12-16T17:33:39  *** bdpayne has joined #openstack-infra
2014-12-16T17:33:48  *** vigneshvar has joined #openstack-infra
2014-12-16T17:33:59  <mordred> that said - we COULD make the regex treat versions that begin with 20\d\d differently
2014-12-16T17:34:07  <mordred> I mean, that's also not a hard regex to write
2014-12-16T17:34:34  <ttx> so the main change (because frankly I don't care about dev milestones), is that we won't be having YYYY.S tags anymore
2014-12-16T17:34:34  <dstufft> mordred: not future compatible with 2100!!!
2014-12-16T17:34:54  <mordred> dstufft: not my problem :)
2014-12-16T17:34:56  <ttx> we always had "2014.2" like things
2014-12-16T17:35:09  <dhellmann> clarkb, fungi: new plan, line 29 of https://etherpad.openstack.org/p/cloL2FzTRd
2014-12-16T17:35:16  *** tonytan4ever has quit IRC
2014-12-16T17:35:17  <ttx> althouigh swift used "2.0.0" so I guess there is precedent
2014-12-16T17:35:44  *** carl_baldwin has joined #openstack-infra
2014-12-16T17:35:48  *** tonytan4ever has joined #openstack-infra
2014-12-16T17:36:28  <ttx> mordred: ok, I think we can leave with that
2014-12-16T17:36:31  <ttx> or live
2014-12-16T17:37:00  *** _nadya_ has quit IRC
2014-12-16T17:37:01  <clarkb> dhellmann: that also works for me
2014-12-16T17:37:04  *** ssam2_ has joined #openstack-infra
2014-12-16T17:37:08  *** garyk has joined #openstack-infra
2014-12-16T17:37:10  *** franred has joined #openstack-infra
2014-12-16T17:37:15  <clarkb> dhellmann: will need to read through what fungi and you discussed to understand why but I am fine with that too
2014-12-16T17:37:39  <ttx> clarkb: if I tag 2015.1.0b1 ... will the current regexp catch it in pre-release ?
2014-12-16T17:38:01  <ttx> clarkb: and setuptools won't barf on me either ?
2014-12-16T17:38:01  <clarkb> ttx: good question, I think so but let me check
2014-12-16T17:38:25  <dstufft> ttx: setuptools will be perfectly happy with that in any version I've ever seen
2014-12-16T17:39:15  <fungi> right, so 2015.1.0b1 sorts earlier than 2015.1.0 (which sorts equivalent to 2015.1)
2014-12-16T17:39:15  <clarkb> looks like our regex allows both .bX and XbY to trail a version
2014-12-16T17:39:23  <clarkb> ttx: so the verison you have above should work fine
2014-12-16T17:39:34  <ttx> ok, just need to update my scripts
2014-12-16T17:40:01  *** andreaf has quit IRC
2014-12-16T17:40:07  <fungi> and setuptools isn't going to renormalize either of 2015.1.0 or 2015.1
2014-12-16T17:40:07  *** tonytan4ever has quit IRC
2014-12-16T17:40:13  <dstufft> fungi: correct
2014-12-16T17:40:14  <clarkb> I will update my regex changes to require 3 digit things
2014-12-16T17:40:24  *** andreaf has joined #openstack-infra
2014-12-16T17:40:43  <clarkb> mordred: ttx do we want to allow more than 3 or 3 only?
2014-12-16T17:40:51  <clarkb> iirc semver requires at least 3 but allows you to do more
2014-12-16T17:40:56  <dhellmann> sdague: do you have any feedback on the plans outlined in https://etherpad.openstack.org/p/cloL2FzTRd ?
2014-12-16T17:41:01  *** erikmwil_ has joined #openstack-infra
2014-12-16T17:41:01  * dhellmann goes for lunch
2014-12-16T17:41:08  <mordred> clarkb: 3 only
2014-12-16T17:41:10  *** erikmwil_ has quit IRC
2014-12-16T17:41:13  <mordred> clarkb: semver == 3 and only three
2014-12-16T17:41:41  *** erikmwil_ has joined #openstack-infra
2014-12-16T17:42:08  <ttx> [ Tagging fd0966935e5ac5007560d0032f7dee1fe5f660dc as 2015.1.0b1 ]
2014-12-16T17:42:18  <ttx> we are a go
2014-12-16T17:42:32  *** erikmwilson has quit IRC
2014-12-16T17:42:57  <clarkb> mordred: are you sure? I thought semver allowed more
2014-12-16T17:43:06  <fungi> mordred: clarkb: so tempest will no longer get to use incrementing integer versions i guess?
2014-12-16T17:43:21  <clarkb> fungi: it will but will have to use 4.0.0
2014-12-16T17:43:25  *** kragwhale is now known as kragniz
2014-12-16T17:43:28  <fungi> or is this only for alpha/beta/candidate pre-releases?
2014-12-16T17:43:59  <mordred> clarkb: "
2014-12-16T17:44:01  <mordred> Additional labels for pre-release and build metadata are available as extensions to the MAJOR.MINOR.PATCH format."
2014-12-16T17:44:01  *** erikmwil_ is now known as erikmwilson
2014-12-16T17:44:04  <clarkb> mordred: now that I reread the only extentions are for the alpha and beta things
2014-12-16T17:44:09  <clarkb> mordred: ya
2014-12-16T17:44:09  <fungi> i could see some reason to require a minimum number of version components in a pre-release version string but not in a release version string
2014-12-16T17:44:10  <mordred> yah
2014-12-16T17:44:30  <clarkb> fungi: I think the reason is because semver
2014-12-16T17:44:37  <clarkb> fungi: basically being good software citizens
2014-12-16T17:44:50  <mordred> I mean, it's still not totally right
2014-12-16T17:44:57  <mordred> because of their -alpha obsession
2014-12-16T17:45:06  *** armax has joined #openstack-infra
2014-12-16T17:45:36  <fungi> clarkb: okay, but tempest doesn't actually have semantics around its versions in that way, so it's sort of a shoehorning into a mismatched release management scheme which is ultimately meaningless there
2014-12-16T17:46:19  <fungi> if we limit our tag matches like that in layout.yaml, we're forcing that part of semver on everyone using our release automation, stackforge projects even
2014-12-16T17:47:25  <clarkb> fungi: they actually do, its an assertion of non backward compat from that point forward beacuse $release support goes away
2014-12-16T17:47:36  <clarkb> fungi: so each major version tag is proper under semver
2014-12-16T17:47:49  *** ChuckC_ has joined #openstack-infra
2014-12-16T17:47:55  <fungi> i can see limiting release automation for python projects to only version strings which are pep-440 compliant, but going further and forcing semver itself on everyone is a bigger leap
2014-12-16T17:48:43  <dstufft> For the record here is the regex that parses all available PEP 440 versions: https://github.com/pypa/packaging/blob/master/packaging/version.py#L162-L198 (including those not normalized)
2014-12-16T17:49:06  *** erikmwilson has quit IRC
2014-12-16T17:49:14  <clarkb> dstufft: I explicitly want to limit to normalized to avoid confusion when tag != version
2014-12-16T17:49:14  <asselin> Hi, I'm trying to create single use jenkins nodepool image and running into this error. Any tips? http://paste.openstack.org/show/151952/
2014-12-16T17:49:34  *** erikmwilson has joined #openstack-infra
2014-12-16T17:49:41  <dstufft> clarkb: makes sense, I don't have a regex that allows all possible versions of that, but it shouldn't be terribly hard to do
2014-12-16T17:49:53  <openstackgerrit> Mauro Rodrigues proposed openstack-infra/elastic-recheck: Update Bug #1365046 query  https://review.openstack.org/142169
2014-12-16T17:49:54  <uvirtbot> Launchpad bug 1365046 in openstack-gate "Job failed due to no devstack directory" [Undecided,Confirmed] https://launchpad.net/bugs/1365046
2014-12-16T17:49:55  <clarkb> dstufft: it isn't the normalized grammar is simple and regular
2014-12-16T17:50:13  *** e0ne has quit IRC
2014-12-16T17:50:22  <clarkb> mordred: ^ want to respond to fungi?
2014-12-16T17:50:41  <dstufft> some people are apparently mad that we did c isntead of rc (though I have no idea why we did c, I just didn't care)
2014-12-16T17:51:18  <mordred> dstufft: I think it's because "c" is not a thing that anyone has actually used to convey that meaning _ever_
2014-12-16T17:51:38  <dstufft> I think it comes from the old PEP
2014-12-16T17:51:47  <dstufft> which is 5 years old at this point and predates me
2014-12-16T17:51:49  <mordred> clarkb, fungi: I can see that - I can give up on it
2014-12-16T17:52:03  <mordred> honestly, it's not a hard stance on my part
2014-12-16T17:52:10  <clarkb> mordred: fungi: maybe we start with just matching the pep440 normalized form as in my current change
2014-12-16T17:52:27  <clarkb> mordred: fungi: and bring up semver enforcement as future improvement since that isn't tied to making things better in the post 440 world
2014-12-16T17:52:33  <mordred> clarkb: ++
2014-12-16T17:52:36  <dstufft> mordred: do you think I should see about ammending PEP 440 to switch c with rc
2014-12-16T17:52:47  <fungi> i'm guessing "c" was suggested by someone obsessed with consistency who wanted to shorten "rc" to the same length as "a" and "b" and liked that they came as a progression in a certain (technically wrong) alphabet
2014-12-16T17:52:49  <mordred> dstufft: it might make people happier
2014-12-16T17:53:16  <dstufft> fungi: probably, that old PEP also put dev after a, b and c
2014-12-16T17:53:26  <dstufft> my first change was arguing that was insane
2014-12-16T17:53:34  <fungi> dstufft: right, i wondered why not shorten "dev" to "d" in that case
2014-12-16T17:54:05  <clarkb> ok I think my change is ready for review and merging then
2014-12-16T17:54:17  *** BobBall is now known as BobBall_AWOL
2014-12-16T17:54:19  *** ChuckC_ has quit IRC
2014-12-16T17:54:21  *** marcusvrn has joined #openstack-infra
2014-12-16T17:54:49  <clarkb> I am reviewing the pbr changes now
2014-12-16T17:55:16  *** sarob_ is now known as sarob
2014-12-16T17:55:27  <cody-somerville> Is it possible to get historical data on core memberships across OpenStack?
2014-12-16T17:55:36  *** shashankhegde has quit IRC
2014-12-16T17:55:56  <mordred> cody-somerville: I do not believe that data exists in any of our systems
2014-12-16T17:55:58  <fungi> cody-somerville: not really. nobody's been tracking it to my knowledge
2014-12-16T17:56:10  *** dustins has joined #openstack-infra
2014-12-16T17:56:15  *** shashankhegde has joined #openstack-infra
2014-12-16T17:56:25  *** achanda has joined #openstack-infra
2014-12-16T17:56:31  <clarkb> in theory that will change when gerrit drops the db as everything will be in git
2014-12-16T17:56:35  <clarkb> but hasn't happened yet
2014-12-16T17:56:37  <fungi> cody-somerville: we could _start_ tracking it fairly easily (i have a script, it could dump into a git repo daily or something) but today that's not the case
2014-12-16T17:56:45  <mordred> you might get close with stackalytics - they don't look at actual core but instead track who has used a +2 vote
2014-12-16T17:56:46  *** ChuckC_ has joined #openstack-infra
2014-12-16T17:56:57  <dstufft> https://mail.python.org/pipermail/distutils-sig/2014-December/025409.html
2014-12-16T17:57:02  *** shashankhegde has quit IRC
2014-12-16T17:57:13  <fungi> also to some extent reviewstats core reviewers list, though it's not a 1:1 match to gerrit and also tends to lag a bit
2014-12-16T17:57:23  <mordred> dstufft: ++
2014-12-16T17:57:57  <cody-somerville> mordred: fungi: Ah, ok. Kudos for the pointers.
2014-12-16T17:59:02  *** arxcruz has quit IRC
2014-12-16T17:59:59  <clarkb> mordred: see comments on https://review.openstack.org/#/c/141667/ basicaly putting other peoples comments that I have heard on that patchset so you can see them easily
2014-12-16T18:00:07  <jeblair_> clarkb, fungi: any objections to my restarting zuul now?
2014-12-16T18:00:25  <clarkb> jeblair_: none from me
2014-12-16T18:01:16  <fungi> jeblair_: no, i agree it's a good idea to go ahead and get that timeout increased
2014-12-16T18:01:27  <clarkb> mordred: oh ignore the comment about git descibe output you capture that in the second change
2014-12-16T18:01:37  *** jp_at_hp has quit IRC
2014-12-16T18:01:45  *** dustins has quit IRC
2014-12-16T18:02:14  *** garyk has quit IRC
2014-12-16T18:02:22  <jogo> sdague dhellmann: I am thinking of going a slightly easier route with the virtualenvs - per devstack venv
2014-12-16T18:02:44  <jogo> so grenade will have two venvs
2014-12-16T18:02:47  *** rmcall has quit IRC
2014-12-16T18:03:38  *** melwitt has joined #openstack-infra
2014-12-16T18:03:38  *** garyk has joined #openstack-infra
2014-12-16T18:03:42  *** dustins has joined #openstack-infra
2014-12-16T18:03:51  *** hashar has quit IRC
2014-12-16T18:04:12  <jeblair_> clarkb, fungi: restarted; also did a full nodepool flush
2014-12-16T18:04:16  *** jeblair_ is now known as jeblair
2014-12-16T18:04:39  <clarkb> mordred: and I am -1 on https://review.openstack.org/#/c/141946/ due to a bug
2014-12-16T18:05:01  <jeblair> clarkb: also we need to delete old nodepool and rename in dns
2014-12-16T18:05:17  *** sputnik13 has quit IRC
2014-12-16T18:05:35  <clarkb> jeblair: yup I think new nodepool has proven to be stable
2014-12-16T18:05:38  *** rmcall has joined #openstack-infra
2014-12-16T18:05:40  *** sputnik13 has joined #openstack-infra
2014-12-16T18:05:42  <clarkb> jeblair: should I go ahead and delete images on old nodepool now?
2014-12-16T18:05:53  <jeblair> clarkb: ++
2014-12-16T18:06:05  *** k4n0 has quit IRC
2014-12-16T18:06:13  *** rmcall has quit IRC
2014-12-16T18:06:28  *** tonytan4ever has joined #openstack-infra
2014-12-16T18:06:29  <mordred> clarkb: thanks. nice catch. that's what I get for tryin to respond to a review comment ...
2014-12-16T18:06:31  <mordred> :)
2014-12-16T18:06:35  *** fandi has joined #openstack-infra
2014-12-16T18:08:11  *** jamielennox|away is now known as jamielennox
2014-12-16T18:08:18  *** rmcall has joined #openstack-infra
2014-12-16T18:08:24  <clarkb> ok image deletion is running
2014-12-16T18:09:02  <fungi> dstufft: new suggestion. pep 440 should be amended to properly normalize alpha, beta, rc and dev to α, β, γ and δ respectively
2014-12-16T18:09:10  <mordred> clarkb: patches update
2014-12-16T18:09:13  <mordred> clarkb: thanks!
2014-12-16T18:09:15  <dstufft> fungi: agreed, doing that now
2014-12-16T18:09:18  <clarkb> mordred: thank you looking now
2014-12-16T18:09:56  <fungi> dstufft: also we want unicode snowman for a revision control hash designator
2014-12-16T18:10:09  <anteaya> we do
2014-12-16T18:10:11  <dstufft> fungi: :pileofpoop:
2014-12-16T18:10:14  <clarkb> mordred: my only other concern is what if I have a tag called banana then it won't do the right thing. but I think in cases like that we just laugh
2014-12-16T18:10:16  <fungi> bwahaha
2014-12-16T18:10:26  <anteaya> like that?
2014-12-16T18:10:55  *** tonytan4ever has quit IRC
2014-12-16T18:11:23  <openstackgerrit> Michael Krotscheck proposed openstack-infra/system-config: Added manifest for storyboard-dev.openstack.org  https://review.openstack.org/140466
2014-12-16T18:11:50  <nibalizer> so, this is a thing now , i guess https://golang.org/doc/contribute.html#tmp_6
2014-12-16T18:12:03  <mordred> clarkb: yup. it will break
2014-12-16T18:12:06  <nibalizer> jeblair: mordred i guess go now has a tool called 'git-review' that interacts with gerrit
2014-12-16T18:12:06  *** Ryan_Lane has joined #openstack-infra
2014-12-16T18:12:25  *** achanda has quit IRC
2014-12-16T18:12:36  *** harlowja_away is now known as harlowja
2014-12-16T18:12:42  <mordred> nibalizer: wow. that's almost unbearably rude
2014-12-16T18:13:04  <nibalizer> im kindof flabergasted
2014-12-16T18:13:10  *** achanda has joined #openstack-infra
2014-12-16T18:13:13  <nibalizer> we already wrote this guys
2014-12-16T18:13:20  <nibalizer> at least name yours something different!
2014-12-16T18:13:20  <mordred> right?
2014-12-16T18:13:40  <krotscheck> fungi: Just switched out to using snakeoil on that patch - the storyboard module already supported it.
2014-12-16T18:13:54  <JayF> Seriously? I wonder if that was what the new 'git-review' recipe was in macbrew
2014-12-16T18:14:19  <crinkle> i thought the plan was to rewrite the whole world in go? :)
2014-12-16T18:14:23  *** achanda has quit IRC
2014-12-16T18:14:26  <anteaya> awesome that is really going to help our developers
2014-12-16T18:14:43  *** achanda has joined #openstack-infra
2014-12-16T18:14:47  <krotscheck> It’s not in google’s best interest to make it easy for us.
2014-12-16T18:15:03  <mordred> anybody know anyone in the go community that we can complain to?
2014-12-16T18:15:05  <krotscheck> (It’s not in their best interest to make it hard either)
2014-12-16T18:15:12  <jeblair> except the go-git-review syntax to push a change to gerrit is "git review mail"
2014-12-16T18:15:15  <nibalizer> i tweeted at kelseyhightower (who is why i know about it)
2014-12-16T18:15:16  <mordred> I know
2014-12-16T18:15:19  <mordred> which is HILARIOUS
2014-12-16T18:15:25  <mordred> nibalizer: thanks
2014-12-16T18:15:46  <nibalizer> we already have a tool, that does this, tahts called that
2014-12-16T18:15:52  <nibalizer> gais, gais stahp
2014-12-16T18:16:27  <ryanpetrello> I'm seeing a bunch of git clone failures for OpenStack cgit
2014-12-16T18:16:32  *** dizquierdo has quit IRC
2014-12-16T18:16:37  <clarkb> ryanpetrello: can you link examples?
2014-12-16T18:16:44  <ryanpetrello> https://review.openstack.org/#/c/141172/
2014-12-16T18:17:01  <ryanpetrello> namely that review
2014-12-16T18:17:09  <clarkb> oh don't clone from cgit/
2014-12-16T18:17:21  <ryanpetrello> I figured it was just a fluke last night, but re-ran a check this morning and still seeing the same issue
2014-12-16T18:17:43  <clarkb> I am not sure cgit/ was ever intended to be a place to clone from. It does caching and weirdness. If you drop the cgit/ from the path you get apache/git daemon and it should be much better
2014-12-16T18:17:53  *** Masahiro has joined #openstack-infra
2014-12-16T18:17:55  <jeblair> wait, why is a job cloning?
2014-12-16T18:18:17  <clarkb> jeblair: because stackforge
2014-12-16T18:18:26  <ryanpetrello> jeblair: pecan has jobs where I clone projects that depend on pecan
2014-12-16T18:18:34  *** tonytan4ever has joined #openstack-infra
2014-12-16T18:18:36  <clarkb> jeblair: I think it was written before zuul cloner existed but would be a perfect place to zuul cloner
2014-12-16T18:18:40  <ryanpetrello> and then run their tests w/ the pecan patchset installed into the virtualenv
2014-12-16T18:18:52  <jeblair> yeah, we should use zuul cloner, and in a config that will use the local git cache instead of a full clone
2014-12-16T18:19:04  <jeblair> ryanpetrello: what does the actual cloning?
2014-12-16T18:19:30  <ryanpetrello> pip
2014-12-16T18:19:36  <ryanpetrello> e.g., https://github.com/stackforge/pecan/blob/master/tox.ini#L140
2014-12-16T18:19:39  <jeblair> http://git.openstack.org/cgit/stackforge/pecan/tree/tox.ini
2014-12-16T18:19:44  <jeblair> ah yeah, so tox -> pip
2014-12-16T18:19:52  <ryanpetrello> right
2014-12-16T18:20:57  <anteaya> asselin: you had items on last weeks infra meeting, they are still on the agenda, are they current?
2014-12-16T18:21:03  <pleia2> nibalizer: wow, yeah, that's very bad open source citizen of them :( https://github.com/golang/review
2014-12-16T18:21:11  <asselin> anteaya, looking
2014-12-16T18:21:17  <anteaya> asselin: thank you
2014-12-16T18:21:27  *** markmcclain1 has quit IRC
2014-12-16T18:21:29  <anteaya> asselin: keep anythign you need, let's just make sure it is current
2014-12-16T18:21:31  <nibalizer> ya, kelsey told me to bring it up with golang-dev
2014-12-16T18:21:33  <ryanpetrello> clarkb: I'll remove the cgit and give that a shot
2014-12-16T18:21:43  *** markmcclain has joined #openstack-infra
2014-12-16T18:21:45  <nibalizer> i haven't exactly found the right thread to respond to
2014-12-16T18:21:49  <pleia2> nibalizer: yeah, I saw the thread on twitter, that's kind of even worse :)
2014-12-16T18:21:56  <clarkb> ryanpetrello: I would at least start with that, there may be other underlying problems but I was always wary of cgit's caching for git operations
2014-12-16T18:22:05  <pleia2> they took a well-established project name, now that it's been pointed out they should just fix it
2014-12-16T18:22:07  <nibalizer> well kelsey is a go user, not a go dev so i think it was fair
2014-12-16T18:22:14  <pleia2> ah, fair enough
2014-12-16T18:22:24  <nibalizer> so ya probably we should post to godev-lang
2014-12-16T18:22:28  <clarkb> clearly we should've been python-git-review
2014-12-16T18:22:30  *** Masahiro has quit IRC
2014-12-16T18:22:40  <nibalizer> and by we probably jim has the most authority ? but i leave that up to others to decide
2014-12-16T18:22:40  <clarkb> so that every language can reinvent this wheel without name collisions
2014-12-16T18:22:52  <pleia2> nibalizer: s/we/nibalizer - thanks :D
2014-12-16T18:22:53  *** sputnik13 has quit IRC
2014-12-16T18:23:03  *** shashankhegde has joined #openstack-infra
2014-12-16T18:23:28  <fungi> i'm still not sure why a tool like git-review needs to be rewritten in every programming language
2014-12-16T18:23:29  *** sputnik13 has joined #openstack-infra
2014-12-16T18:23:45  *** ChuckC_ is now known as ChuckC
2014-12-16T18:23:50  <pleia2> fungi: go people are allergic to python
2014-12-16T18:23:58  <clarkb> fungi: I think that when you write a new programming language one of the things you are required to do is to rewrite everything in that language
2014-12-16T18:24:02  <fungi> i mean, we also submit shell scripts with it, so should we have a version rewritten in bash too?
2014-12-16T18:24:04  <clarkb> even if the utility of a thing is as a tool not a lib
2014-12-16T18:24:07  *** yamamoto has joined #openstack-infra
2014-12-16T18:24:21  <jeblair> clarkb, ryanpetrello: so we should avoid cloning from git at all; there are more efficient and resilient ways of doing it...
2014-12-16T18:24:28  <jeblair> ryanpetrello: let me get you a link
2014-12-16T18:24:30  <clarkb> jeblair: agreed
2014-12-16T18:24:40  *** patrickeast has joined #openstack-infra
2014-12-16T18:25:20  *** rmcall has quit IRC
2014-12-16T18:25:27  <jeblair> ryanpetrello: http://git.openstack.org/cgit/openstack-infra/system-config/tree/tools/apply-test.sh#n52
2014-12-16T18:25:30  <jeblair> ryanpetrello: so i think if you do this...
2014-12-16T18:25:33  *** AJaeger has joined #openstack-infra
2014-12-16T18:25:44  <ryanpetrello> jeblair: that's fine, I can take this approach, too
2014-12-16T18:25:53  <ryanpetrello> I'd like to get the tests *working* today, though, so I can cut a release
2014-12-16T18:26:11  <jeblair> ryanpetrello: (understood; fix this thing, then fix it better :)
2014-12-16T18:26:15  <ryanpetrello> yep
2014-12-16T18:26:46  <ryanpetrello> so my only issue w/ the zuul-cloner thing (assuming I'm understanding this properly)
2014-12-16T18:26:48  <jeblair> ryanpetrello: use zuul-cloner (you probably don't need a clonemap.yaml) and specify the project you want to clone.  i think you should be able to run that, and then run its install command in your tox command section
2014-12-16T18:26:50  <AJaeger> garyk: I'm back now
2014-12-16T18:27:02  <ryanpetrello> how do I allow others to run these tests locally?
2014-12-16T18:27:09  <ryanpetrello> (outside of OpenStack's CI environment)
2014-12-16T18:27:48  *** rmcall has joined #openstack-infra
2014-12-16T18:27:53  <jeblair> ryanpetrello: how about this?  you make a helper script that does the work, and that script can detect whether zuul-cloner exists and if it doesn't, it does a normal clone?
2014-12-16T18:28:02  <ryanpetrello> yea, that's fair
2014-12-16T18:28:21  <jeblair> bonus: the tox sections get smaller too
2014-12-16T18:28:25  <ryanpetrello> yep
2014-12-16T18:28:40  <ryanpetrello> I'll clean this up as soon as I get the chance
2014-12-16T18:28:46  <jeblair> cool, thanks!
2014-12-16T18:29:35  *** rmcall has quit IRC
2014-12-16T18:29:59  <jeblair> clarkb: what if gertty actually had a threaded view of changes so you could visually see the dependencies?
2014-12-16T18:31:17  *** gyee has joined #openstack-infra
2014-12-16T18:32:46  *** shashankhegde has quit IRC
2014-12-16T18:33:04  *** zz_avozza is now known as avozza
2014-12-16T18:33:09  *** jgallard_ has quit IRC
2014-12-16T18:33:12  *** shashankhegde has joined #openstack-infra
2014-12-16T18:33:57  *** wuhg has quit IRC
2014-12-16T18:34:11  *** ZZelle_ has joined #openstack-infra
2014-12-16T18:35:07  <openstackgerrit> Andreas Jaeger proposed openstack-infra/project-config: Fix project-config-compare-xml  https://review.openstack.org/142179
2014-12-16T18:35:14  *** EmilienM|afk is now known as EmilienM
2014-12-16T18:36:14  <AJaeger> anteaya, sdague, jeblair, fungi: We missed that https://review.openstack.org/#/c/140470/ was applied at the wrong place . Patch 142179 fixes it.
2014-12-16T18:36:35  <timrc> nibalizer, mordred Can I submit a pull request the merges our git-review into their repository overwriting whatever it is they did? jk
2014-12-16T18:36:40  <AJaeger> Could you quickly review and approve, please? Otherwise project-config-compare-xml gives wrong failure/success message
2014-12-16T18:36:46  <timrc> s/the merges/that merges/
2014-12-16T18:37:07  <pleia2> hah
2014-12-16T18:37:42  <dstufft> we have always been at war with golang
2014-12-16T18:38:27  <jeblair> AJaeger: +2
2014-12-16T18:38:49  *** rmcall has joined #openstack-infra
2014-12-16T18:38:51  <AJaeger> thanks, jeblair
2014-12-16T18:40:45  *** teran has quit IRC
2014-12-16T18:41:26  <openstackgerrit> Jay Pipes proposed openstack-infra/elastic-recheck: Adds E-R query for bug 1312002  https://review.openstack.org/142183
2014-12-16T18:41:27  <fungi> AJaeger: reviewing it now
2014-12-16T18:41:28  <uvirtbot> Launchpad bug 1312002 in nova "nova cell-show <cell name> causes ValueError: Circular reference detected" [Low,In progress] https://launchpad.net/bugs/1312002
2014-12-16T18:41:43  <jaypipes> mriedem: see ^^
2014-12-16T18:42:06  <fungi> AJaeger: great catch there... i was trying to debug that exact error condition without realizing why it was failing
2014-12-16T18:42:12  <AJaeger> thanks, fungi! I should have catched that during review ;(
2014-12-16T18:42:18  <mriedem> jaypipes: wrong bug
2014-12-16T18:42:23  <mriedem> jaypipes: should be https://bugs.launchpad.net/nova/+bug/1403162
2014-12-16T18:42:25  <uvirtbot> Launchpad bug 1403162 in nova "fake_notifier: ValueError: Circular reference detected" [Critical,In progress]
2014-12-16T18:42:30  <jaypipes> mriedem: lol, crap..
2014-12-16T18:43:10  <mriedem> jaypipes: add the build_name too
2014-12-16T18:43:11  <mriedem> message:"ValueError: Circular reference detected" AND tags:"console" AND build_name:"gate-nova-python27"
2014-12-16T18:44:30  <openstackgerrit> Jay Pipes proposed openstack-infra/elastic-recheck: Adds E-R query for bug 1403162  https://review.openstack.org/142183
2014-12-16T18:44:31  <uvirtbot> Launchpad bug 1403162 in nova "fake_notifier: ValueError: Circular reference detected" [Critical,In progress] https://launchpad.net/bugs/1403162
2014-12-16T18:44:47  <jaypipes> mriedem: ^^ thx for your help :) it's my first e-r submission.
2014-12-16T18:44:59  *** johnthetubaguy is now known as zz_johnthetubagu
2014-12-16T18:45:47  *** dimtruck is now known as zz_dimtruck
2014-12-16T18:47:26  *** shashankhegde has quit IRC
2014-12-16T18:47:44  <openstackgerrit> Jay Pipes proposed openstack-infra/elastic-recheck: Adds E-R query for bug 1403162  https://review.openstack.org/142183
2014-12-16T18:47:45  <uvirtbot> Launchpad bug 1403162 in nova "fake_notifier: ValueError: Circular reference detected" [Critical,In progress] https://launchpad.net/bugs/1403162
2014-12-16T18:47:48  *** shashankhegde has joined #openstack-infra
2014-12-16T18:48:38  *** rmcall has quit IRC
2014-12-16T18:48:43  *** HenryG_ has quit IRC
2014-12-16T18:49:05  *** HenryG has joined #openstack-infra
2014-12-16T18:49:32  *** HeOS has quit IRC
2014-12-16T18:49:36  <anteaya> AJaeger: thanks for fixing that
2014-12-16T18:50:03  <clarkb> jeblair: that would be really cool
2014-12-16T18:50:21  *** rmcall has joined #openstack-infra
2014-12-16T18:50:21  <anteaya> yay jaypipes for your e-r submission
2014-12-16T18:50:39  *** koolhead17 has joined #openstack-infra
2014-12-16T18:50:39  *** koolhead17 has joined #openstack-infra
2014-12-16T18:50:39  <anteaya> jaypipes: mriedem is a tough reviewer :D
2014-12-16T18:50:55  <jaypipes> anteaya: heh. you have to be quick to beat mriedem or jogo to the punch ;)
2014-12-16T18:51:02  <anteaya> AJaeger: I was reviewing but can't match the speed of fungi
2014-12-16T18:51:08  <anteaya> jaypipes: no kidding
2014-12-16T18:51:20  <anteaya> I don't try, I just gaze in awe
2014-12-16T18:51:32  <anteaya> look at them go, aren't they amazing
2014-12-16T18:51:38  <adam_g> dstufft, re: pip dep resolution. short of a full blown dependency solver, would adding some smarts about versions here be an option?  https://github.com/pypa/pip/blob/develop/pip/req/req_set.py#L119 i dug into pip last time this happened and some basic version logic there seemed to help get correct things installed/detect conflict early, but i assumed that function is purposefully dumb?
2014-12-16T18:51:42  *** _nadya_ has joined #openstack-infra
2014-12-16T18:51:52  <mriedem> jaypipes: i had just checked out the local topic branch when you posted that,
2014-12-16T18:52:02  <mriedem> jaypipes: would have beat you if i weren't waiting for dansmith to open the new bug
2014-12-16T18:52:05  <AJaeger> anteaya: thanks for reviewing!
2014-12-16T18:52:10  <mriedem> jaypipes: so i'll accuse you of cheating
2014-12-16T18:52:24  <jaypipes> lol :)
2014-12-16T18:52:33  *** zz_dimtruck is now known as dimtruck
2014-12-16T18:52:48  <openstackgerrit> Merged openstack-infra/project-config: Generate tarballs for neutron-*aas on tags  https://review.openstack.org/142126
2014-12-16T18:53:17  *** gokrokve has joined #openstack-infra
2014-12-16T18:53:20  <jeblair> nibalizer, pleia2: golang git-review does not have anything like our .gitreview file parsing; so you have to clone from gerrit or manually set your origin remote
2014-12-16T18:53:47  <clarkb> we are down to 6 troublesome images on old nodepool
2014-12-16T18:53:50  * clarkb tries to delete them again
2014-12-16T18:54:06  *** _nadya_ has quit IRC
2014-12-16T18:54:23  <AJaeger> anteaya: to further continue with the Gerrit ACL checks (https://review.openstack.org/#/c/140821/), we need to have https://review.openstack.org/#/c/141860/ in. Reviews are welcome but nothing urgent.
2014-12-16T18:54:24  <dstufft> adam_g: I'm honetly not sure. I'd need to dig into that. One problem that would need to be solved is that if a later dependency on foo forces you to switch what version of foo you install, then you have to "undo" any versions you added because of foo so you download a different foo and see what versions it depends on
2014-12-16T18:54:46  <jeblair> nibalizer, pleia2: and the first commit was oct 28.
2014-12-16T18:55:10  *** vigneshvar has quit IRC
2014-12-16T18:55:15  <anteaya> AJaeger: okay was trying to clear a mindspace to wrap my head around where we are on that
2014-12-16T18:55:21  *** che-arne has quit IRC
2014-12-16T18:55:48  <anteaya> btw AJaeger you and armax are two of my favourite people so I am so glad we are working together on this
2014-12-16T18:55:57  <anteaya> AJaeger: I hope you get to meet him at the next summit
2014-12-16T18:56:07  <AJaeger> anteaya: the first patch for that series is in (with the error that 142179 fixed), so we can continue.
2014-12-16T18:56:16  <AJaeger> anteaya: thanks!
2014-12-16T18:56:30  <armax> AJaeger: apologies for the brainfart
2014-12-16T18:56:30  <clarkb> ConnectionError: HTTPSConnectionPool(host='ci-overcloud.tripleo.org', port=13000): Max retries exceeded with url: /v2.0/tokens (Caused by <class 'socket.error'>: [Errno 110] Connection timed out)
2014-12-16T18:56:40  <clarkb> I get that on the remaining 4 images (I got it down to 4 \o/
2014-12-16T18:56:42  <armax> those yaml files can be intimidating for the untrained eye
2014-12-16T18:57:08  <jogo> jeblair dhellmann: so I am very confused about https://review.openstack.org/#/c/141952/2/specs/non-overlapping-dependency-upgrades.rst,cm bow
2014-12-16T18:57:10  <jogo> now
2014-12-16T18:57:11  <AJaeger> armax: I should have catched it during review but didn't
2014-12-16T18:57:27  <armax> AJaeger: I guess those lines can be easy to miss
2014-12-16T18:57:52  <anteaya> armax: you are amazing
2014-12-16T18:58:01  <anteaya> every excuse to work with you, I will take
2014-12-16T18:58:11  <jogo> jeblair dhellmann: sdague seems to think this isn't an issue ?
2014-12-16T18:58:15  <armax> anteaya: well, not quite :) I caused more issues than I solved!
2014-12-16T18:58:18  <AJaeger> armax: thanks for all your work on this, we're getting closer - see my comments above to anteaya !
2014-12-16T18:58:37  <dhellmann> jogo: it turns out the job that was testing for overlapping ranges was turned off sometime in the last few weeks and noone noticed
2014-12-16T18:58:55  <anteaya> armax: ah I got you involved more in infra
2014-12-16T18:59:03  <anteaya> armax: which was part of my evil plan
2014-12-16T18:59:08  <armax> AJaeger: I am happy to help :)
2014-12-16T18:59:08  <jeblair> dhellmann, jogo: it was disabled in june
2014-12-16T18:59:08  <AJaeger> armax: See your patch in action: http://logs.openstack.org/21/140821/7/check//project-config-gerrit/93b597e/console.html
2014-12-16T18:59:10  <anteaya> opps meeting time
2014-12-16T18:59:17  <anteaya> will review more after meetings
2014-12-16T18:59:18  <dhellmann> jogo: sdague is correct that part of the problem here was ceilometer having to install itself into the swift pipeline
2014-12-16T18:59:24  <dhellmann> jeblair: that long ago? wow
2014-12-16T18:59:47  <jogo> dhellmann: overlapping ranges in global-reqs job?
2014-12-16T18:59:49  *** fandi has quit IRC
2014-12-16T18:59:51  <dhellmann> jeblair: are you sure? because I'm pretty sure I got an error from that job not long after I capped the oslo lib versions in juno
2014-12-16T19:00:17  <jeblair> dhellmann: if you can find the change where you capped those versions, it would probably be good for us to look at the failures for that at the time
2014-12-16T19:00:19  <mriedem> blarg, trove logs aren't indexed by logstash?
2014-12-16T19:00:39  <clarkb> mriedem: you have to be more specific than that, also the specific list is always available let mdig it up
2014-12-16T19:00:53  <fungi> meeting time!
2014-12-16T19:00:53  <mriedem> clarkb: http://logs.openstack.org/21/140121/8/gate//gate-trove-functional-dsvm-mysql/29dacef/logs/screen-tr-api.txt.gz#_2014-12-16_07_55_08_717
2014-12-16T19:00:59  <mriedem> clarkb: http://status.openstack.org/elastic-recheck/data/uncategorized.html#gate-trove-functional-dsvm-mysql
2014-12-16T19:01:03  <mriedem> https://review.openstack.org/#/c/141564/
2014-12-16T19:01:10  <mriedem> some trove gate job is busted
2014-12-16T19:01:14  *** sarob has quit IRC
2014-12-16T19:01:20  <clarkb> mriedem: https://git.openstack.org/cgit/openstack-infra/system-config/tree/modules/openstack_project/files/logstash/jenkins-log-client.yaml#n23
2014-12-16T19:01:21  <mtreinish> mriedem: just add it the list
2014-12-16T19:01:30  <mriedem> mtreinish: the list of busted stuff?
2014-12-16T19:01:32  <mriedem> clarkb: thanks
2014-12-16T19:01:44  <mtreinish> the list of indexed files (the one clarkb just linked)
2014-12-16T19:01:53  <mriedem> mtreinish: yeah, doing that now
2014-12-16T19:01:57  <mriedem> gawd! :)
2014-12-16T19:02:08  <jogo> mriedem: example patch Ic3b2e33177bdc65fe294ddddd581a93de6c1cb60
2014-12-16T19:02:21  <dhellmann> jeblair: I'll dig some more
2014-12-16T19:02:27  <SlickNik> mriedem: Thanks. Let me know if you want me to submit the patch.
2014-12-16T19:02:30  <mriedem> jogo: yeah i've done this before, for n-meta-api or whatever
2014-12-16T19:02:38  <jogo> mriedem: oh right
2014-12-16T19:02:50  <mriedem> SlickNik: np, i've got it
2014-12-16T19:02:59  <jogo> dhellmann jeblair: so do we need to change how grenade works?
2014-12-16T19:03:08  *** sarob has joined #openstack-infra
2014-12-16T19:03:11  <SlickNik> mriedem: appreciate it much.
2014-12-16T19:03:12  <jogo> and if yes, is it still a priority?
2014-12-16T19:03:46  *** bswartz has quit IRC
2014-12-16T19:04:08  <notmyname> jogo: dhellmann: doesn't the testing ignore local requirements.txt and use global requirements to install dependencies? did that change?
2014-12-16T19:04:43  <dhellmann> notmyname: it didn't change, but pip doesn't always do exactly what we want even when we give it the requirements list
2014-12-16T19:05:02  *** pblaho has quit IRC
2014-12-16T19:05:36  <adam_g> dhellmann, sorry, oslo.vmware thing was in stable/icehouse
2014-12-16T19:05:38  <dhellmann> sdague: ew, the etherpad is a mess now
2014-12-16T19:05:43  <dhellmann> adam_g: ah, ok
2014-12-16T19:05:46  <adam_g> https://bugs.launchpad.net/openstack-ci/+bug/1395814
2014-12-16T19:05:47  <uvirtbot> Launchpad bug 1395814 in openstack-ci "grenades failing eventlet 0.13.0 is installed but eventlet>=0.15.2 is required by ['oslo.vmware']" [Undecided,Fix released]
2014-12-16T19:06:11  <sdague> dhellmann: I was trying to move the obsolete stuff off the top of the page, as I spent 5 minutes going through it before noticing the "ignore all this"
2014-12-16T19:06:58  <dhellmann> sdague: ok, the text is all giant though and we lost track of who was saying what between me and fungi
2014-12-16T19:07:23  <jogo> dhellmann: so do we still need grenade to support upgrading across non-overlapping python deps?
2014-12-16T19:07:32  *** yamamoto has quit IRC
2014-12-16T19:07:36  <dhellmann> jogo: I don't think that's a priority for today.
2014-12-16T19:07:53  *** vigneshvar has joined #openstack-infra
2014-12-16T19:07:57  <jogo> dhellmann: thanks, so not a priority but do we still need it in the future?
2014-12-16T19:08:09  <dhellmann> jogo: I'm not sure. This plan is still evolving.
2014-12-16T19:08:10  <sdague> dhellmann: hmph, on my etherpad it kept the author bits, but apparently not on the server. Boo.
2014-12-16T19:08:14  *** amuller has quit IRC
2014-12-16T19:08:22  *** Rockyg has joined #openstack-infra
2014-12-16T19:08:25  <jogo> dhellmann: ok I am dropping that work all together unless I am told otherwise
2014-12-16T19:08:34  <dhellmann> jogo: ok, that seems reasonable
2014-12-16T19:08:36  <jogo> dhellmann: assuming its not needed at all for now
2014-12-16T19:08:36  *** bswartz has joined #openstack-infra
2014-12-16T19:08:56  *** otter768 has joined #openstack-infra
2014-12-16T19:11:45  * jogo wonders off to nova land
2014-12-16T19:12:00  <openstackgerrit> Matt Riedemann proposed openstack-infra/system-config: Index trove logs for logstash goodness  https://review.openstack.org/142193
2014-12-16T19:12:03  <mriedem> SlickNik: ^
2014-12-16T19:12:05  <clarkb> mordred: fyi one last pep8 issue on your pbr changes
2014-12-16T19:12:16  <clarkb> mordred: if you can update that so we can get shiny +1's then possibly merge that would be excellent
2014-12-16T19:12:18  <mriedem> jogo: ^
2014-12-16T19:13:32  <dstufft> clarkb: mordred did y'all decide not to want the sha normalization thing in the PEP?
2014-12-16T19:13:46  *** otter768 has quit IRC
2014-12-16T19:14:12  <mordred> dstufft: yah. we're just going to remove them
2014-12-16T19:14:25  <dstufft> mordred: okay
2014-12-16T19:14:30  <dstufft> less work for me is ok with me
2014-12-16T19:14:59  <openstackgerrit> Merged openstack/requirements: pymemcache and sysv_ipc for tooz  https://review.openstack.org/140920
2014-12-16T19:15:59  *** Daviey has joined #openstack-infra
2014-12-16T19:20:18  <SlickNik> mriedem: Looks good — thanks!
2014-12-16T19:21:16  <openstackgerrit> Matt Riedemann proposed openstack-infra/elastic-recheck: Add query for devstack/trove bug 1402227  https://review.openstack.org/142197
2014-12-16T19:21:17  <uvirtbot> Launchpad bug 1402227 in devstack "trove configuration is broken" [Undecided,In progress] https://launchpad.net/bugs/1402227
2014-12-16T19:21:17  <mriedem> jogo: ^
2014-12-16T19:22:51  *** ssam2_ has quit IRC
2014-12-16T19:23:08  *** weshay has quit IRC
2014-12-16T19:23:59  *** weshay has joined #openstack-infra
2014-12-16T19:24:10  *** weshay is now known as weshay_bbiab
2014-12-16T19:25:25  *** sputnik1_ has joined #openstack-infra
2014-12-16T19:26:21  *** sputnik13 has quit IRC
2014-12-16T19:26:52  *** achanda has quit IRC
2014-12-16T19:30:10  *** garyk has quit IRC
2014-12-16T19:30:39  *** ryanpetrello_ has joined #openstack-infra
2014-12-16T19:30:41  <anteaya> AJaeger: good one, yeah not changing an acl to avoid someone following protocol for permissions
2014-12-16T19:31:00  <dhellmann> jeblair: that failure is on a patch that I think landed, and I'm having trouble formulating a query to find it :-/
2014-12-16T19:31:16  *** ryanpetrello has quit IRC
2014-12-16T19:31:16  *** ryanpetrello_ is now known as ryanpetrello
2014-12-16T19:32:21  <anteaya> jeblair: any idea when it landed? or what repo?
2014-12-16T19:32:28  <AJaeger> anteaya: there're two cores - and one is in the release group and the other is not aware of it ;(
2014-12-16T19:32:35  <openstackgerrit> Merged openstack-infra/infra-specs: Add Migrate to Zanata spec  https://review.openstack.org/133222
2014-12-16T19:32:37  <anteaya> AJaeger: awesome
2014-12-16T19:32:44  <openstackgerrit> Alexandre Viau proposed openstack-infra/project-config: python-surveilclient: Added gate checks  https://review.openstack.org/142202
2014-12-16T19:34:34  <dhellmann> anteaya: I reverted the caps on oslo libs in stable/juno in https://review.openstack.org/#/c/138546/ so it would have been some time around then, the failure would be before and the merge would be after
2014-12-16T19:34:59  *** dprince has quit IRC
2014-12-16T19:35:05  <openstackgerrit> Merged openstack-infra/elastic-recheck: Adds E-R query for bug 1403162  https://review.openstack.org/142183
2014-12-16T19:35:06  <uvirtbot> Launchpad bug 1403162 in nova "fake_notifier: ValueError: Circular reference detected" [Critical,In progress] https://launchpad.net/bugs/1403162
2014-12-16T19:35:08  <dhellmann> anteaya: I don't know what repo it was, but it was probably in oslo somewhere
2014-12-16T19:35:20  <anteaya> hmmm
2014-12-16T19:36:12  <dhellmann> maybe I'm mis-remembering, and it was another requirements job that failed
2014-12-16T19:36:33  <dhellmann> maybe I extrapolated that this other job would also fail, but didn't actually see it
2014-12-16T19:36:49  <openstackgerrit> Alexandre Viau proposed openstack-infra/project-config: python-surveilclient: Added gate checks  https://review.openstack.org/142202
2014-12-16T19:36:58  <anteaya> dhellmann: well here are the merged requirements patches: https://review.openstack.org/#/q/project:openstack/requirements+status:merged,n,z
2014-12-16T19:37:09  *** ihrachyshka has quit IRC
2014-12-16T19:37:12  <anteaya> not very complex but I'm not sure what else to search for
2014-12-16T19:38:13  <openstackgerrit> Merged openstack-infra/project-config: Fix project-config-compare-xml  https://review.openstack.org/142179
2014-12-16T19:38:36  <dhellmann> anteaya: I'm looking at http://bit.ly/1DHTOTL now but can't seem to make it search for comments from jenkins about requirements job failures
2014-12-16T19:39:08  *** _nadya_ has joined #openstack-infra
2014-12-16T19:40:01  *** mpaolino has quit IRC
2014-12-16T19:41:56  *** ivar-lazzaro has quit IRC
2014-12-16T19:42:03  <openstackgerrit> Merged openstack-infra/project-config: Remove requirements overlap check  https://review.openstack.org/142152
2014-12-16T19:45:49  <anteaya> oh getting it to search on comments from jenkins
2014-12-16T19:46:00  <anteaya> not sure as I have ever tried to do that
2014-12-16T19:46:31  <fungi> you can search on negatove verification votes
2014-12-16T19:46:35  <fungi> negative
2014-12-16T19:46:58  <fungi> label:Verification=-1
2014-12-16T19:46:58  <fungi> i think
2014-12-16T19:47:12  <fungi> but breaking that down to specific jobs would be harder
2014-12-16T19:47:13  <anteaya> yes
2014-12-16T19:47:25  <anteaya> but searching the comments
2014-12-16T19:47:33  <anteaya> I don't know if I have seen that
2014-12-16T19:48:23  *** hdd has quit IRC
2014-12-16T19:49:06  *** markmcclain has quit IRC
2014-12-16T19:49:28  <anteaya> dhellmann: https://review.openstack.org/#/q/project:%255Eopenstack/oslo.*+branch:master+label:Verified%253D-1,n,z
2014-12-16T19:49:40  *** markmcclain has joined #openstack-infra
2014-12-16T19:49:58  <anteaya> but that just might be the most recent verification vote
2014-12-16T19:50:00  <dhellmann> the patch is merged now, so would it still have that label?
2014-12-16T19:50:05  <dhellmann> yeah
2014-12-16T19:50:07  <openstackgerrit> Christian Berendt proposed openstack/requirements: Bump version of openstack-doc-tools >= 0.21  https://review.openstack.org/142076
2014-12-16T19:50:07  <sdague> anteaya: well, except it's the last vote
2014-12-16T19:50:14  <anteaya> not sure if you could search on patches that have failed in teh past
2014-12-16T19:50:16  <anteaya> sdague: yeah
2014-12-16T19:50:28  <sdague> you probably would need to hit the gerrit cli directly
2014-12-16T19:50:31  <anteaya> dhellmann: so no it wouldn't have that if it was merged
2014-12-16T19:50:32  <dhellmann> I've tagged oslo.db 1.0.3 and am waiting for it to build
2014-12-16T19:50:41  <sdague> and go through all patches
2014-12-16T19:50:42  <dhellmann> anteaya; yeah, that's what I thought
2014-12-16T19:50:53  *** koolhead17 has quit IRC
2014-12-16T19:51:56  <anteaya> dhellmann: :(
2014-12-16T19:52:13  <dhellmann> anteaya: I'll spend more time looking after my meetings this afternoon
2014-12-16T19:52:20  <anteaya> dhellmann: kk
2014-12-16T19:52:34  *** koolhead17 has joined #openstack-infra
2014-12-16T19:52:39  *** CICoverageBuilds has joined #openstack-infra
2014-12-16T19:53:18  *** emagana has quit IRC
2014-12-16T19:53:28  *** markmcclain has quit IRC
2014-12-16T19:53:30  <openstackgerrit> Alexandre Viau proposed openstack-infra/project-config: python-surveilclient: Added gate checks  https://review.openstack.org/142202
2014-12-16T19:55:47  <openstackgerrit> Alexandre Viau proposed openstack-infra/project-config: python-surveilclient: Added gate checks  https://review.openstack.org/142202
2014-12-16T19:55:51  *** hdd has joined #openstack-infra
2014-12-16T19:56:03  *** markmcclain has joined #openstack-infra
2014-12-16T19:56:53  *** pfalleno1 has quit IRC
2014-12-16T19:57:08  *** pfallenop has joined #openstack-infra
2014-12-16T19:57:34  *** koolhead17 has quit IRC
2014-12-16T19:57:44  <openstackgerrit> Alexandre Viau proposed openstack-infra/project-config: python-surveilclient: Added gate checks  https://review.openstack.org/142202
2014-12-16T19:58:20  *** rmcall has quit IRC
2014-12-16T19:58:59  *** dims_ has quit IRC
2014-12-16T19:59:09  *** rmcall has joined #openstack-infra
2014-12-16T19:59:34  *** dims has joined #openstack-infra
2014-12-16T20:00:18  <openstackgerrit> Alexandre Viau proposed openstack-infra/project-config: python-surveilclient: Added gate checks  https://review.openstack.org/142202
2014-12-16T20:01:19  *** kgiusti1 has joined #openstack-infra
2014-12-16T20:01:34  *** kgiusti has quit IRC
2014-12-16T20:02:43  <pleia2> we didn't get to this, but it is time sensitive (Tracy's AWS instance is going non-free and she asked us for help) so if we could make a decision here it would be good: http://lists.openstack.org/pipermail/openstack-infra/2014-December/002247.html
2014-12-16T20:03:15  <AJaeger> Since we run over time, I couldn't bring up my request for reviews of infra-manual. Would be great if we could move forward there...
2014-12-16T20:03:19  <jeblair> pleia2: what decision needs to be made?
2014-12-16T20:03:40  *** sabeen2 has joined #openstack-infra
2014-12-16T20:03:44  <fungi> pleia2: i think mikal offered to host that for her? could work as a temporary solution until someone puppets the service (assuming it's worth us hosting longer term)
2014-12-16T20:03:48  <pleia2> jeblair: whether we bring in the nova dashboard into infra as is (and how - make new project? pull for github) or let mikal host it
2014-12-16T20:03:59  *** dims has quit IRC
2014-12-16T20:03:59  *** dkranz has quit IRC
2014-12-16T20:04:08  <pleia2> until we can integrate with reviewday
2014-12-16T20:04:37  <pleia2> fungi: long term we want to integrate it with reviewday, so no new puppet module needed, probably just changes to the current reviewday one
2014-12-16T20:04:53  <pleia2> but that's not going to happen before her server goes away
2014-12-16T20:04:54  <sdague> clarkb: on https://review.openstack.org/#/c/141831/1/zuul/layout.yaml,cm  is there a limit to the # of \. ?
2014-12-16T20:05:20  *** e0ne has joined #openstack-infra
2014-12-16T20:05:25  <jeblair> pleia2: i see no reason why we can't run an additional service if people find it useful.  what we run is controlled by puppet, so someone would need to write some code to handle the new service
2014-12-16T20:05:34  <clarkb> sdague: not other than each set of digits must be prepended with . except for the first
2014-12-16T20:05:36  *** MaxV has joined #openstack-infra
2014-12-16T20:05:39  <jeblair> but anyone is free to do that at any time.
2014-12-16T20:05:40  *** sabeen1 has quit IRC
2014-12-16T20:05:53  *** _buzz has joined #openstack-infra
2014-12-16T20:06:06  <fungi> i see no problem with us running it as a stand-alone service (puppeted obviously) until such time as it can be more properly folded into reviewday mk ii or whatever
2014-12-16T20:06:24  <pleia2> ok, great
2014-12-16T20:06:32  *** lttrl has quit IRC
2014-12-16T20:06:38  *** Masahiro has joined #openstack-infra
2014-12-16T20:06:45  <pleia2> so should we create a new project for it in openstack-infra? (it's on github now)
2014-12-16T20:06:55  *** sputnik1_ has quit IRC
2014-12-16T20:07:08  *** sweston has quit IRC
2014-12-16T20:07:14  <fungi> it's not necessary that we control upstream git for every application we host
2014-12-16T20:07:29  *** sweston has joined #openstack-infra
2014-12-16T20:07:30  <anteaya> pleia2: sorry what am I missing that creating a new project is the solution
2014-12-16T20:07:33  <pleia2> even better
2014-12-16T20:07:36  <fungi> after all, we run lots of things which aren't
2014-12-16T20:07:42  <anteaya> I thought she was running an instance of reviewday
2014-12-16T20:07:54  <pleia2> anteaya: no, completely different code
2014-12-16T20:08:05  *** yamamoto has joined #openstack-infra
2014-12-16T20:08:18  <pleia2> thanks fungi and jeblair, I'll update the interested parties accordingly to see who wants to do the work ;)
2014-12-16T20:08:22  *** aysyd has quit IRC
2014-12-16T20:08:33  <anteaya> oh sorry
2014-12-16T20:09:21  *** lttrl has joined #openstack-infra
2014-12-16T20:09:43  <clarkb> mordred: any chance we can get pep8 fixed on the pbr change?
2014-12-16T20:11:04  *** Masahiro has quit IRC
2014-12-16T20:11:21  <openstackgerrit> Merged openstack-infra/elastic-recheck: Add query for devstack/trove bug 1402227  https://review.openstack.org/142197
2014-12-16T20:11:22  <uvirtbot> Launchpad bug 1402227 in devstack "trove configuration is broken" [Undecided,In progress] https://launchpad.net/bugs/1402227
2014-12-16T20:11:47  <mordred> clarkb: I have re-uploaded
2014-12-16T20:12:37  *** yamamoto has quit IRC
2014-12-16T20:12:41  <clarkb> mordred: I don't see it
2014-12-16T20:13:02  *** shashankhegde has quit IRC
2014-12-16T20:13:18  <clarkb> mordred: I am leaving a ocmment on the line
2014-12-16T20:13:22  <fungi> there are two versions of it, right? the backport and the master tip
2014-12-16T20:13:30  <clarkb> mordred: its on 141667
2014-12-16T20:14:37  <fungi> oh, and 141666 is failing too, but a lot worse
2014-12-16T20:16:27  * mordred is not touching tip for now
2014-12-16T20:16:41  <mordred> until we get feature/0.10 _sorted_
2014-12-16T20:16:51  *** MaxV_ has joined #openstack-infra
2014-12-16T20:17:01  <clarkb> +1
2014-12-16T20:17:07  *** esker has quit IRC
2014-12-16T20:17:34  <clarkb> mordred: ok jenkins commented too so 141667 should hae the info you need to fix
2014-12-16T20:18:03  *** dims has joined #openstack-infra
2014-12-16T20:18:29  <mordred> clarkb: oh - I didn't type yet
2014-12-16T20:18:31  <mordred> yes
2014-12-16T20:18:37  <mordred> new version should be up now
2014-12-16T20:19:37  *** MaxV has quit IRC
2014-12-16T20:19:50  <clarkb> mordred fungi jeblair: https://storyboard.openstack.org/#!/story/2000082 is the new bug I discovered cleaning up old nodepool
2014-12-16T20:19:53  *** emagana has joined #openstack-infra
2014-12-16T20:20:23  *** MaxV_ has quit IRC
2014-12-16T20:20:45  *** MaxV has joined #openstack-infra
2014-12-16T20:20:56  <clarkb> old nodepool is down to 4 stubborn tripleo rh1 images. all nodes are deleted though
2014-12-16T20:21:08  <clarkb> we can likely shut it down as is and deal with those images separately
2014-12-16T20:21:37  *** koolhead17 has joined #openstack-infra
2014-12-16T20:23:11  <clarkb> mordred: thank you I am +2 on both now
2014-12-16T20:23:23  <fungi> clarkb: wow, really? that could account for some of the alien node "leaks" i was seeing previously
2014-12-16T20:24:01  <clarkb> fungi: I also see that many alien nodes are simply in the process of being deleted by the provider so show up in nova listings
2014-12-16T20:24:07  <clarkb> fungi: but then go away after a short while
2014-12-16T20:24:13  <clarkb> though it is harless to delete those again
2014-12-16T20:24:52  *** dizquierdo has joined #openstack-infra
2014-12-16T20:25:01  <fungi> clarkb: yep, my search for alien nodes involves generating the list, then sleeping for 10 minutes, then generating the list again and only recording the instance uuids which were present in both
2014-12-16T20:25:26  <clarkb> so the rh1 cloud is really unhappy with us
2014-12-16T20:25:33  <clarkb> even listing alien nodes I get that token error
2014-12-16T20:25:46  *** andreykurilin_ has joined #openstack-infra
2014-12-16T20:26:08  *** koolhead17 has quit IRC
2014-12-16T20:27:29  *** dstufft has quit IRC
2014-12-16T20:28:33  *** teran has joined #openstack-infra
2014-12-16T20:29:58  <fungi> mordred: i am a little worried that there's no record in gerrit of addressing lifeless's expressed concern in 141667 (which is now more appropriately directed at 141946)
2014-12-16T20:31:08  <fungi> i mean, i know it got hashed over some more in here, but he probably won't see it due to travel, et cetera
2014-12-16T20:32:56  *** prad has joined #openstack-infra
2014-12-16T20:33:11  *** prad has quit IRC
2014-12-16T20:35:49  *** ddieterly has quit IRC
2014-12-16T20:37:19  *** doug-fish has quit IRC
2014-12-16T20:38:46  *** cdent has quit IRC
2014-12-16T20:39:02  <pc_m> dhellmann: ping
2014-12-16T20:40:20  *** ddieterly has joined #openstack-infra
2014-12-16T20:40:52  *** franred has quit IRC
2014-12-16T20:41:03  <clarkb> ok rh1 is not cooperative so I think we don't wait on that to remove old nodepool.o.o. My vote is to delete it now but would be good to get at least one other set of eyes to look at it quickly
2014-12-16T20:41:36  <fungi> clarkb: checking it out now
2014-12-16T20:42:10  <fungi> clarkb: tripleo-test-cloud is the old hp1 not rh1, righth?
2014-12-16T20:42:21  <clarkb> fungi: yes that sounds right.
2014-12-16T20:42:27  <fungi> i believe there's a nodepool config change pending to connect us to the new hp1
2014-12-16T20:42:54  <pc_m> Can anyone tell me where we are with the grenade issue (SQLAlchemy version)? I saw mention of 141927, but the comments seem to indicate another approach being taken?
2014-12-16T20:43:02  <fungi> clarkb: okay, the old precise nodepool.o.o looks safe to tear down
2014-12-16T20:43:44  <fungi> clarkb: pretty sure those remaining instances no longer exist because the cloud it thinks they're still in has been rebuilt from scratch a while ago
2014-12-16T20:43:49  <fungi> s/instances/images/
2014-12-16T20:44:16  *** pelix has quit IRC
2014-12-16T20:44:33  *** doug-fish has joined #openstack-infra
2014-12-16T20:44:42  *** mrunge_gone has quit IRC
2014-12-16T20:45:02  <openstackgerrit> Clark Boylan proposed openstack-infra/system-config: Remove nodepool-dev as it is becoming nodepool.o.o  https://review.openstack.org/142216
2014-12-16T20:45:03  <openstackgerrit> Steve Baker proposed openstack-infra/project-config: Don't run check-heat-dsvm-functional-mysql in stable/juno  https://review.openstack.org/142217
2014-12-16T20:45:27  <clarkb> fungi: gotcha
2014-12-16T20:45:29  <fungi> pc_m: there is an oslo.db 1.0.3 release about an hour ago, and a requirements pin in flight for pinning oslo.db to <1.1 in stable/juno
2014-12-16T20:45:45  <clarkb> 142216 is part of the nodepool cleanup too
2014-12-16T20:46:09  *** ChuckC has quit IRC
2014-12-16T20:46:11  <clarkb> jeblair: when you finish with meeting let me know if you concur that old nodepool.o.o can be deleted
2014-12-16T20:46:17  <pc_m> fungi: nice! Do you know the commit # for the requirements pin?
2014-12-16T20:46:32  <clarkb> I am going to go ahead and update dns now
2014-12-16T20:46:44  <fungi> pc_m: https://review.openstack.org/142180
2014-12-16T20:46:50  <fungi> clarkb: sounds good
2014-12-16T20:46:52  <pc_m> fungi: Thanks!
2014-12-16T20:47:13  <clarkb> hrm I actually need to go catch a bus nowish if I am going to make it to this openstack hacking thing
2014-12-16T20:47:24  <fungi> which is about to finish in the check pipeline and could stand one more +2 and an approval
2014-12-16T20:47:24  <clarkb> so I will do that then cleanup nodepool from there
2014-12-16T20:47:53  <fungi> k
2014-12-16T20:48:06  <clarkb> fungi: approved the reqs change
2014-12-16T20:49:03  *** HeOS has joined #openstack-infra
2014-12-16T20:49:25  *** ddieterly has quit IRC
2014-12-16T20:49:59  <fungi> thanks!
2014-12-16T20:50:01  <fungi> dhellmann: ^
2014-12-16T20:50:08  <armax> AJaeger: do you want me to look into the failure for the project-config-gerrit job?
2014-12-16T20:50:23  <AJaeger> armax: I just commented on it ;)
2014-12-16T20:50:31  *** dmsimard is now known as dmsimard_away
2014-12-16T20:50:34  <armax> AJaeger: you beat me to it then
2014-12-16T20:51:04  *** sputnik13 has joined #openstack-infra
2014-12-16T20:51:11  <armax> AJaeger: nice one
2014-12-16T20:51:32  *** shashankhegde has joined #openstack-infra
2014-12-16T20:51:44  *** unicell has quit IRC
2014-12-16T20:51:46  <AJaeger> armax: a previous version of that merged yesterday (run last week), we introduced already some non-normalized files ;(
2014-12-16T20:51:53  <AJaeger> armax: so yeah, this patch is helpfull...
2014-12-16T20:52:05  *** carl_baldwin has quit IRC
2014-12-16T20:52:44  <AJaeger> armax: But you could look what needs to be done for other namespaces so that we can run the job for openstack-infra and openstack as well...
2014-12-16T20:53:00  <armax> AJaeger: will do
2014-12-16T20:53:57  <AJaeger> armax: let's see whether we get some reviews for https://review.openstack.org/#/c/141860/ and https://review.openstack.org/#/c/140821/ by the cores to move forward here. anteaya wanted to continue reviewing after meetings, so hope these are on her list
2014-12-16T20:53:59  <AJaeger> armax: thanks
2014-12-16T20:54:52  *** tonytan4ever has quit IRC
2014-12-16T20:54:58  <anteaya> AJaeger: they are on my list
2014-12-16T20:55:11  <AJaeger> thanks, anteaya
2014-12-16T20:55:53  *** carl_baldwin has joined #openstack-infra
2014-12-16T20:57:10  <jeblair> clarkb: ++del nodepool
2014-12-16T20:57:11  *** _nadya_ has quit IRC
2014-12-16T20:58:53  <armax> AJaeger: I may need to tweak the normalize_acl script to include other formatting exceptions
2014-12-16T20:59:18  *** Rockyg has quit IRC
2014-12-16T20:59:35  <AJaeger> armax: fungi has written the normalize_acl script, I suggest you talk with him. I'm fine with changing it as needed in general.
2014-12-16T21:00:00  <armax> AJaeger: right, I need to tweak the transformation that I added
2014-12-16T21:00:15  *** Rockyg has joined #openstack-infra
2014-12-16T21:00:24  <armax> AJaeger: I’ll post a patch to show you what I mean
2014-12-16T21:00:39  *** salv-orlando has quit IRC
2014-12-16T21:00:46  <fungi> i'm also fine with that script being simplified/rewritten. it was initially added as a stepping-stone to perform a series of different normalizations across the entire repo as individual changes
2014-12-16T21:00:53  *** chuckC_ has joined #openstack-infra
2014-12-16T21:01:01  *** salv-orlando has joined #openstack-infra
2014-12-16T21:01:16  *** dstufft has joined #openstack-infra
2014-12-16T21:01:24  <fungi> but if it's going to get used for enforcement going forward, then there's a lot of optional complexity which it no longer needs
2014-12-16T21:02:43  <krotscheck> fungi: https://review.openstack.org/#/c/140466/ passed
2014-12-16T21:02:45  <AJaeger> fungi, please have again a look at 140821 on what armax is doing with it...
2014-12-16T21:03:20  *** amitgandhinz has quit IRC
2014-12-16T21:03:25  <anteaya> AJaeger: reviewed, I would like to see 141860 merge first but this is my idealist side talking
2014-12-16T21:03:28  *** MaxV has quit IRC
2014-12-16T21:04:09  *** amitgandhinz has joined #openstack-infra
2014-12-16T21:04:52  <AJaeger> anteaya: yeah, my preference as well - let's see whether fungi or sdague find time for 141860 (please;)
2014-12-16T21:05:39  <anteaya> yeah it isn't a fire so I wasn't going to push
2014-12-16T21:05:54  <anteaya> but good work here from both you and armax, AJaeger
2014-12-16T21:06:07  <anteaya> thank you
2014-12-16T21:06:09  * AJaeger calls it a day, good night!
2014-12-16T21:06:16  <armax> anteaya: I think after the last patch from AJaeger, we could extend the check ot the openstack namespace
2014-12-16T21:06:25  <armax> anteaya: I’ll follow uo
2014-12-16T21:06:26  <jeblair> anteaya: prvd
2014-12-16T21:06:29  *** koolhead17 has joined #openstack-infra
2014-12-16T21:06:29  <armax> *up
2014-12-16T21:06:38  <AJaeger> armax: the -release might needs tweaking
2014-12-16T21:06:46  <AJaeger> ok, bye and thanks anteaya and armax!
2014-12-16T21:06:53  *** AJaeger has quit IRC
2014-12-16T21:07:00  <armax> AJaeger: right, and the stable-maint
2014-12-16T21:07:32  <anteaya> jeblair: thanks
2014-12-16T21:08:00  <anteaya> armax: thank you
2014-12-16T21:09:51  *** otter768 has joined #openstack-infra
2014-12-16T21:09:58  <fungi> so many pings. i'll catch up after the cross-project meeting
2014-12-16T21:11:51  *** ChuckC has joined #openstack-infra
2014-12-16T21:12:43  *** koolhead17 has quit IRC
2014-12-16T21:14:43  *** otter768 has quit IRC
2014-12-16T21:14:58  <mattoliverau> Morning
2014-12-16T21:15:31  <anteaya> morning mattoliverau
2014-12-16T21:16:20  *** weshay_bbiab is now known as weshay
2014-12-16T21:18:10  <openstackgerrit> Merged openstack-infra/project-config: Normalize ACLs  https://review.openstack.org/141860
2014-12-16T21:18:26  <openstackgerrit> Merged openstack-infra/subunit2sql: Add a contributing file  https://review.openstack.org/141968
2014-12-16T21:19:26  *** kgiusti1 has quit IRC
2014-12-16T21:21:33  *** andreaf has quit IRC
2014-12-16T21:22:13  *** koolhead17 has joined #openstack-infra
2014-12-16T21:24:26  <openstackgerrit> Michael Krotscheck proposed openstack-infra/storyboard: Plugins may now register cron workers.  https://review.openstack.org/129609
2014-12-16T21:24:46  <anteaya> armax: so I would like to merge https://review.openstack.org/#/c/140821/ now
2014-12-16T21:24:56  <anteaya> armax: you said you wanted to tweak
2014-12-16T21:25:08  <anteaya> armax: can I convince you to tweak in a follow up patch?
2014-12-16T21:25:34  <anteaya> I would like to get the job running as it is on current and new acl changes
2014-12-16T21:26:46  <armax> anteaya: it can be done in a follow-up patch, IMO
2014-12-16T21:26:52  <anteaya> thanks
2014-12-16T21:26:56  * anteaya +As
2014-12-16T21:26:56  <armax> anteaya: I want to see if we can extend the check to other namespaces
2014-12-16T21:27:19  *** dkranz has joined #openstack-infra
2014-12-16T21:27:24  <armax> anteaya: but to do so, I may need to relax the normalization logic a bit, but not a big deal
2014-12-16T21:28:37  *** dizquierdo has quit IRC
2014-12-16T21:29:05  *** MaxV has joined #openstack-infra
2014-12-16T21:30:06  <openstackgerrit> Merged openstack-infra/project-config: Don't run check-heat-dsvm-functional-mysql in stable/juno  https://review.openstack.org/142217
2014-12-16T21:31:01  <anteaya> armax: fair enough
2014-12-16T21:31:15  <anteaya> I would like to check all the namespaces as well, if possible
2014-12-16T21:32:53  *** koolhead17 has quit IRC
2014-12-16T21:33:17  <fungi> armax: at least the initial state of the script does apply sanely to all namespaces
2014-12-16T21:33:38  <fungi> your additions might need some adjustment to accomodate different namespaces though
2014-12-16T21:33:43  <armax> fungi: indeed
2014-12-16T21:34:03  <fungi> and we probably need another cleanup pass since we're not enforcing anything at the moment
2014-12-16T21:34:06  *** emagana has quit IRC
2014-12-16T21:34:10  <armax> fungi: correct
2014-12-16T21:34:46  *** bdpayne has quit IRC
2014-12-16T21:36:06  <fungi> also, an unfinished part of the reason i started normalizing those acls at all is so that we can identify some which are identical and collapse them in the git repo, replacing them with acl-path references in projects.yaml
2014-12-16T21:36:32  *** esker has joined #openstack-infra
2014-12-16T21:36:40  *** julim has quit IRC
2014-12-16T21:36:41  <dkranz> fungi: I see the juno problem has cleared. Is the grenade issue supposed to be fixed? My patch is failing grenade but in theory my change could be at fault.
2014-12-16T21:37:19  *** MaxV has quit IRC
2014-12-16T21:37:28  <clarkb> I approved the reqs change. if that merged we shouldbe working
2014-12-16T21:37:35  *** ddieterly has joined #openstack-infra
2014-12-16T21:38:42  <openstackgerrit> Merged openstack-infra/project-config: Check that Gerrit ACL files are normalized  https://review.openstack.org/140821
2014-12-16T21:41:54  <fungi> clarkb: there are 18 changes ahead of it in the gate
2014-12-16T21:42:06  *** emagana has joined #openstack-infra
2014-12-16T21:43:17  *** dprince has joined #openstack-infra
2014-12-16T21:43:37  *** baoli has quit IRC
2014-12-16T21:43:53  <openstackgerrit> Armando Migliaccio proposed openstack-infra/project-config: Extend ACL checks to OpenStack namespace.  https://review.openstack.org/142230
2014-12-16T21:44:34  <armax> fungi: ^^^, there should be a project that’s not complying now: /openstack/ossa.config
2014-12-16T21:44:54  *** dizquierdo has joined #openstack-infra
2014-12-16T21:45:44  <fungi> yep
2014-12-16T21:45:55  <fungi> i saw that one go in without alphabetization
2014-12-16T21:46:04  <jhesketh> Morning
2014-12-16T21:46:31  <fungi> i think there were quite a few actually for the stable branch management split out too
2014-12-16T21:46:32  <anteaya> morning jhesketh
2014-12-16T21:47:15  *** mrmartin has quit IRC
2014-12-16T21:50:17  <jeblair> nibalizer, fungi, clarkb, asselin: so there's a whole slew of changes to get rid of hardcoded variables in the openstack_project module.  see https://review.openstack.org/#/q/topic:mosi,n,z
2014-12-16T21:51:03  *** sputnik13 has quit IRC
2014-12-16T21:51:11  *** sputnik1_ has joined #openstack-infra
2014-12-16T21:51:38  <jeblair> SergeyLukjanov and company are proposing them; i'm assuming it's from an effort to make openstack_project itself more reusable
2014-12-16T21:52:00  <fungi> jeblair: yep, i've gone through a few so far, some have been approved
2014-12-16T21:52:31  <jeblair> does the overall direction seem like something we should do?
2014-12-16T21:52:34  *** dizquierdo has quit IRC
2014-12-16T21:52:47  <fungi> mostly they just need more eyes, and in a few cases some guidance on whether the things they're doing make sense (like extracting every valuable into a class variable)
2014-12-16T21:53:01  <fungi> s/valuable/variable/
2014-12-16T21:53:43  <jeblair> yeah, i'm kind of wondering whether it makes sense in all cases
2014-12-16T21:53:44  *** Longgeek has quit IRC
2014-12-16T21:53:57  *** mbacchi has quit IRC
2014-12-16T21:54:00  <fungi> my primary worry with those is that they're adding a lot of knobs indiscriminate of whether they're things which sanely benefit from being changeable
2014-12-16T21:55:00  <SergeyLukjanov> jeblair, yeah, that's correct, it's part of our activity to make infra more re-usable, one of the future plans - guide for building single node "infra" for dev/test
2014-12-16T21:55:20  *** dmsimard_away is now known as dmsimard
2014-12-16T21:55:25  *** Masahiro has joined #openstack-infra
2014-12-16T21:55:54  <jeblair> so if we take https://review.openstack.org/#/c/133705/ as an example
2014-12-16T21:56:19  <jeblair> SergeyLukjanov: how does that help?
2014-12-16T21:56:31  <jeblair> it lets you override the elasticsearch version
2014-12-16T21:57:15  <jeblair> (real question -- just wondering what the use case is)
2014-12-16T21:57:21  * asselin reading
2014-12-16T21:57:25  *** dustins has quit IRC
2014-12-16T21:57:50  <SergeyLukjanov> jeblair, the latest er release is 1.4.X i think and AFAIK it'll work good with current puppet scripts
2014-12-16T21:57:57  <jeblair> nibalizer: i'm also curious as to how this would fit in with the idea of putting more config info in hiera/yaml
2014-12-16T21:58:04  *** mpaolino has joined #openstack-infra
2014-12-16T21:58:08  *** mpaolino has quit IRC
2014-12-16T21:59:07  <mriedem> who is hosting triple-o provided VMs in CI?
2014-12-16T21:59:18  <asselin> i'm in favor of making this reusable
2014-12-16T21:59:25  *** timcline has left #openstack-infra
2014-12-16T21:59:34  <mriedem> looking at http://git.openstack.org/cgit/openstack-infra/system-config/tree/modules/openstack_project/templates/nodepool/nodepool.yaml.erb#n980
2014-12-16T21:59:42  <jeblair> asselin: yeah, i'm just not seeing the big picture of how it accomplishes that
2014-12-16T21:59:53  *** dangers is now known as dangers_away
2014-12-16T21:59:54  <SergeyLukjanov> jeblair, honestly, some of the stuff has been probably extracted prematurely while the first iteration on puppet manifests, if you have some objections for extracting some parameters than it's a confirm for it :(
2014-12-16T21:59:55  <jeblair> mriedem: the tripleo project
2014-12-16T21:59:59  <asselin> jeblair, I got some questions about where to put the reusable bits
2014-12-16T22:00:12  *** Masahiro has quit IRC
2014-12-16T22:00:18  <fungi> mriedem: hpcloud and red hat i believe are the sponsors providing teh hardware resources for that
2014-12-16T22:00:29  <mriedem> fungi: ok, thanks
2014-12-16T22:00:39  <jeblair> mriedem: but the tripleo project runs the clouds
2014-12-16T22:00:57  <mriedem> yeah, didn't see info here https://wiki.openstack.org/wiki/TripleO
2014-12-16T22:01:13  <mriedem> or here really https://github.com/openstack-infra/tripleo-ci/blob/master/README.md
2014-12-16T22:01:39  *** rmcall has quit IRC
2014-12-16T22:01:41  *** melwitt has quit IRC
2014-12-16T22:01:42  <asselin> jeblair, other opinions on reuseable are here: https://review.openstack.org/#/c/138913/
2014-12-16T22:01:50  <asselin> in comments
2014-12-16T22:01:59  <fungi> mriedem: they also have a #tripleo channel where they are possibly more likely to see discussions and answer questions
2014-12-16T22:02:03  *** melwitt has joined #openstack-infra
2014-12-16T22:02:17  *** melwitt has quit IRC
2014-12-16T22:02:35  *** melwitt has joined #openstack-infra
2014-12-16T22:02:58  *** bswartz has quit IRC
2014-12-16T22:03:02  *** rmcall has joined #openstack-infra
2014-12-16T22:03:10  <mriedem> fungi: i got what i needed, i wrote a little yaml parser to separate out max-servers per provider in nodepool.yaml and rax/hp is obvious, i just wasn't sure about triple-o
2014-12-16T22:03:17  <dhellmann> fungi, clarkb : thanks for reviewing that requirements patch for stable/juno
2014-12-16T22:03:23  *** sputnik1_ is now known as sputnik13
2014-12-16T22:04:26  *** ayoung has quit IRC
2014-12-16T22:04:51  <jeblair> or this one: https://review.openstack.org/#/c/133710/
2014-12-16T22:05:09  <jeblair> i'm not sure why the vhost root or directory should be parameters?
2014-12-16T22:05:40  <jeblair> so is that the sort of thing we should comment on in review?
2014-12-16T22:06:37  <jeblair> like: it's okay to have the admin user as a parameter, because maybe you want to run a groups server with different admins and a different name, but it doesn't make sense to have different filesystem paths?
2014-12-16T22:06:55  <nibalizer> jeblair: so they absolutely open the door for configuration to be put in hiera
2014-12-16T22:07:06  *** ivar-lazzaro has joined #openstack-infra
2014-12-16T22:07:16  <openstackgerrit> Michael Krotscheck proposed openstack-infra/storyboard: Plugins may now register cron workers.  https://review.openstack.org/129609
2014-12-16T22:07:27  *** ivar-lazzaro has quit IRC
2014-12-16T22:07:51  *** rlandy has quit IRC
2014-12-16T22:08:06  <jeblair> i think the reason i'm having trouble with this is that i think it's step 4 of the plan, which we deferred until we had experience with other parts of it
2014-12-16T22:08:16  <jeblair> including the config in hiera part, which we still haven't really done
2014-12-16T22:08:21  *** ivar-lazzaro has joined #openstack-infra
2014-12-16T22:08:26  <jeblair> (and that was step 1)
2014-12-16T22:09:07  *** gmurphy has joined #openstack-infra
2014-12-16T22:09:19  <clarkb> ok back
2014-12-16T22:09:28  <clarkb> I am going to do nodepool things now
2014-12-16T22:09:29  <jeblair> step 2 is in progress (module split) and step 3 is mostly done, project-config split
2014-12-16T22:09:49  <clarkb> jeblair: I haven't looked closely at those changes but in general I agree I think its mixing order
2014-12-16T22:10:06  *** dimtruck is now known as zz_dimtruck
2014-12-16T22:10:55  <jeblair> basically, i think we know that having too much stuff in openstack_project is a problem
2014-12-16T22:11:20  <nibalizer> jeblair: i dont see the advantage of those patches
2014-12-16T22:11:44  <nibalizer> in the early sets of "remove hardcoded variables" i tried to argue that they were kinda pointless and not the right place to put abstractions
2014-12-16T22:11:58  <asselin> jeblair, there's a big question as to where to put the reusable parts. Leave them in openstack_project, or move somewhere else?
2014-12-16T22:12:24  <nibalizer> but I dont really have the confidence to -1 20 patches and keep -1ing forever so i've kinda been shouted out of that conversation it feels like
2014-12-16T22:12:25  <jeblair> asselin: i agree, and i don't think we've answered that yet
2014-12-16T22:14:16  *** mattfarina has quit IRC
2014-12-16T22:15:33  <asselin> I was thinking of adding a new module to system-config called e.g. openstack_shared or openstack_components, or something else that would contain the parts designed for reuse
2014-12-16T22:16:32  <jeblair> asselin: or perhaps the solution is to continue to refine the puppet modules we have so that they have better / more complete interfaces
2014-12-16T22:17:11  <jeblair> in other words, shrink the contents of openstack_module to a minimum so that it does not need to be re-used
2014-12-16T22:17:38  <asselin> jeblair, +1 on making openstack_module non-reuseable
2014-12-16T22:17:52  <jeblair> i'm starting to think that we're not ready for this set of patches, at least not without some discussion and agreement first
2014-12-16T22:18:23  <jeblair> SergeyLukjanov: do you think we could WIP them for now and write a spec first?
2014-12-16T22:19:11  <asselin> jeblair, but, in the example of a ci "log server", there is no puppet module. Do we create one? It's really a collection of misc items put together to build a server.
2014-12-16T22:19:47  <jeblair> asselin: yeah, that and also a 'zuul+nodepool' are good examples of things that we have assembled that should be reusable.  so maybe we should create puppet modules for those things and then use them
2014-12-16T22:20:01  <clarkb> nodepool.o.o A and AAAA records are updated. TTL is 5 minutes
2014-12-16T22:20:25  <clarkb> removing nodepool-dev.o.o records now
2014-12-16T22:20:42  <asselin> jeblair, right, but creating a puppet module for each seems overkill to me. I was thinking of having one puppet module to contain all of those.
2014-12-16T22:21:03  *** hashar has joined #openstack-infra
2014-12-16T22:21:08  <clarkb> thats all done. Now to delete the old node completely
2014-12-16T22:21:28  *** dkliban is now known as dkliban_afk
2014-12-16T22:22:25  *** markmcclain has quit IRC
2014-12-16T22:22:40  <jeblair> asselin: on the one hand, we're getting good at creating puppet modules (thanks ;), on the other hand, maybe "openstack_infra::nifty_log_system" and "openstack_infra::really_cool_ci_system" might be more convenient.
2014-12-16T22:22:41  *** markmcclain has joined #openstack-infra
2014-12-16T22:23:08  <asselin> jeblair, agree with that
2014-12-16T22:23:15  <fungi> jeblair: asselin: the expressed use case seems to be "i want a module to be able to run a clone of openstack-infra but with the freedom to change any hard-coded values therein"
2014-12-16T22:23:59  <fungi> rather than "i want to piecemeal a bunch of modules and classes together with my own manifests"
2014-12-16T22:24:02  *** lttrl has quit IRC
2014-12-16T22:24:08  *** markmcclain has quit IRC
2014-12-16T22:24:08  <clarkb> ok delete submitted now we wait
2014-12-16T22:24:25  *** markmcclain has joined #openstack-infra
2014-12-16T22:24:29  <fungi> not sure that's a realistic goal, but it's where that change series is focused
2014-12-16T22:24:33  <jeblair> fungi: yeah, but that's use-case that sort of embeds the solution to an implied problem in it, rather than expressing the problem :)
2014-12-16T22:24:38  <openstackgerrit> Adrian Turjak proposed openstack-infra/project-config: Add new Openstack-Pydashie project  https://review.openstack.org/142240
2014-12-16T22:24:49  <fungi> jeblair: agreed
2014-12-16T22:25:04  <jeblair> so i look at the changes and have trouble saying "does this help with the problem it's trying to solve" and have trouble :/
2014-12-16T22:25:09  *** alex7376 has joined #openstack-infra
2014-12-16T22:25:10  *** asettle has joined #openstack-infra
2014-12-16T22:25:10  <jeblair> and repeat myself
2014-12-16T22:25:18  <fungi> i can only assume this spun out from the mirantis effort to offer openstack-infra-as-a-service
2014-12-16T22:25:39  <clarkb> old one is gone
2014-12-16T22:25:40  <asselin> fungi, if we split out the resuable components correctly, the openstack_project is really just a bunch of configurations like project-config
2014-12-16T22:25:43  *** markmcclain has quit IRC
2014-12-16T22:25:44  *** asettle has quit IRC
2014-12-16T22:25:54  <clarkb> ok now to catch up on everything else
2014-12-16T22:25:59  *** amitgandhinz has quit IRC
2014-12-16T22:26:01  *** markmcclain has joined #openstack-infra
2014-12-16T22:26:15  <fungi> my guess is that it's an internal fork they're running now, and want to upstream as much of as they can, but doesn't necessarily match our proposal for decomposing and making all this ultimately reusable for other use cases
2014-12-16T22:26:40  <jeblair> asselin: yeah, and that's where config-in-hiera becomes relevant -- because puppet itself may not be the best way to supply that info, hiera may be
2014-12-16T22:26:54  <openstackgerrit> Adrian Turjak proposed openstack-infra/project-config: Add new Openstack-Pydashie project  https://review.openstack.org/142240
2014-12-16T22:27:08  *** gmurphy has left #openstack-infra
2014-12-16T22:27:18  <fungi> or am i confusing mirantis with enovance?
2014-12-16T22:27:21  <jeblair> (so instead of making a class that says "this is a log server with the hostname logs.openstack.org", we just have some values in hiera)
2014-12-16T22:27:25  <SergeyLukjanov> fungi, we're not going to provide infra-aas, we just already have too many installation of it's parts
2014-12-16T22:27:30  *** doug-fish has left #openstack-infra
2014-12-16T22:27:39  *** vigneshvar has quit IRC
2014-12-16T22:27:40  <SergeyLukjanov> fungi, it's enovance
2014-12-16T22:27:40  <fungi> SergeyLukjanov: oh, that's right. mirantis is using a lot of it internally
2014-12-16T22:27:44  <clarkb> I have a bunch of +2 on https://review.openstack.org/#/c/141831/ any opposition to me self approving?
2014-12-16T22:27:44  *** alex7376 is now known as asettle
2014-12-16T22:28:02  <nibalizer> jeblair: agee
2014-12-16T22:28:03  <jeblair> clarkb: go for it
2014-12-16T22:28:27  <SergeyLukjanov> fungi, in fact it includes stuff like 3rd party CIs (sahara, murano, trove probably)
2014-12-16T22:29:10  <SergeyLukjanov> jeblair, re spec - do you mean to push some kind of "extract hardcoded hostnames and urls" spec?
2014-12-16T22:29:18  *** doug-fish1 has joined #openstack-infra
2014-12-16T22:30:11  <SergeyLukjanov> jeblair, fungi, one of the main ideas of such extraction was to make contributors able to test anything locally w/o changing all of the hardcoded stuff
2014-12-16T22:31:02  <SergeyLukjanov> jeblair, fungi, because now you'll always will face some internally hardcoded .openstack.org hostnames and urls even if you want to test installation of some servises
2014-12-16T22:31:13  <SergeyLukjanov> the split initiative could solve it eventually
2014-12-16T22:31:31  <SergeyLukjanov> but extraction will be needed for making split successful ;)
2014-12-16T22:31:58  <SergeyLukjanov> if you think that split should be done first - I think we could take some subprojects to work on
2014-12-16T22:32:05  <nibalizer> jeblair: i am in favor of the openstack_project::<someapp> class that calls classes and resource from the <someapp> module
2014-12-16T22:32:13  <nibalizer> this is a great way to set things up and I've used it before
2014-12-16T22:32:37  <nibalizer> it lets openstack specific users and backup logic and coordinatoion live in the openstack space and lets the module do one thing right
2014-12-16T22:32:46  <openstackgerrit> James Carey  proposed openstack-dev/hacking: Add optional hacking checks  https://review.openstack.org/134052
2014-12-16T22:33:04  <SergeyLukjanov> sorry, /me falling asleep (already 1:30am)
2014-12-16T22:33:23  <jeblair> SergeyLukjanov: oh, sorry we can pick this up later, thanks! :)
2014-12-16T22:33:26  *** matel has joined #openstack-infra
2014-12-16T22:33:50  *** matel has quit IRC
2014-12-16T22:34:51  <jeblair> ImportError: No module named unittest2
2014-12-16T22:35:00  <jeblair> so i get that when i try to run zuul's unit tests locally
2014-12-16T22:36:09  <jeblair> that's from testtools
2014-12-16T22:36:12  <openstackgerrit> Merged openstack-infra/project-config: Make prerelease and release pipelines match pep440  https://review.openstack.org/141831
2014-12-16T22:36:17  *** cnesa has quit IRC
2014-12-16T22:36:50  *** pc_m has quit IRC
2014-12-16T22:38:29  <mordred> jeblair: yes - that was fixed by something a while ago
2014-12-16T22:38:44  * mordred can't remember the root cause/fix ... clarkb ^^^ do you remember?
2014-12-16T22:38:49  <EmilienM> fungi: are you talking about software factory?
2014-12-16T22:39:02  *** Rockyg has quit IRC
2014-12-16T22:39:04  <EmilienM> tristanC: ^
2014-12-16T22:39:06  <fungi> EmilienM: possibly. i didn't remember the name of it
2014-12-16T22:39:08  <clarkb> mordred: uh
2014-12-16T22:39:10  <asselin> nibalizer, anteaya clarkb fungi, is this a good time to discuss the pre puppet module split proposal?
2014-12-16T22:39:20  <EmilienM> fungi: if you talk about OpenStack CI as a service, yes.
2014-12-16T22:39:39  <nibalizer> im available
2014-12-16T22:40:00  <EmilienM> fungi: https://github.com/enovance/software-factory
2014-12-16T22:40:24  <fungi> EmilienM: ahh, yep--that's definitely what i was thinking of
2014-12-16T22:40:40  *** CICoverageBuilds has quit IRC
2014-12-16T22:40:46  <anteaya> asselin: I'm around
2014-12-16T22:40:52  <EmilienM> fungi: tristanC is one of the core developers on this project. just FYI
2014-12-16T22:40:53  *** esker has quit IRC
2014-12-16T22:41:04  <asselin> anteaya, nibalizer ok, let's just start with us and go from there
2014-12-16T22:41:16  <anteaya> okay
2014-12-16T22:41:23  * anteaya listens to asselin
2014-12-16T22:41:29  <clarkb> mordred: no I do not recall, but I seem to remember that we needed to update testtools
2014-12-16T22:41:35  <clarkb> mordred: so maybe jeblair has stale venvs?
2014-12-16T22:41:44  * mordred lookng at zuul tree
2014-12-16T22:41:56  <jeblair> clarkb: rm -rf .tox was the first thing i tried
2014-12-16T22:41:57  *** dprince has quit IRC
2014-12-16T22:42:08  <asselin> so the idea is to simplify the process a bit since there are quite a few modules to do
2014-12-16T22:42:40  <boris-42> clarkb: hi there
2014-12-16T22:43:05  <mordred> jeblair: any chance you wound up with testtools 1.2.0 installed in the venv?
2014-12-16T22:43:05  <boris-42> clarkb: recently (seems like not more than few days) we start getting such warnings http://paste.openstack.org/show/152045/
2014-12-16T22:43:17  <boris-42> clarkb: do you know something about that?
2014-12-16T22:43:17  <asselin> nibalizer, anteaya I can understand the contention on the 2nd patch: https://review.openstack.org/#/c/140548/ especially w.r.t merge conflicts
2014-12-16T22:43:31  <mordred> jeblair: we added an exclude: testtools>=0.9.36,!=1.2.0
2014-12-16T22:43:33  <mordred> for other things
2014-12-16T22:43:34  <boris-42> clarkb: seems like not only related to rally
2014-12-16T22:43:36  <mordred> because of evil
2014-12-16T22:43:39  *** changbl has quit IRC
2014-12-16T22:43:44  <nibalizer> so one idea is we could just laeve 140548 up as a review
2014-12-16T22:43:52  <nibalizer> and copy/paste stuff out of it when we need to
2014-12-16T22:43:56  <asselin> nibalizer, anteaya but I think the first patch should be lower-risk and straight-forward: https://review.openstack.org/#/c/140523/
2014-12-16T22:44:05  <nibalizer> the problem that clarkb brought up is valid
2014-12-16T22:44:07  <asselin> nibalizer, that's a good idea
2014-12-16T22:44:13  <nibalizer> which is that thats a huge patch and hard to reviews
2014-12-16T22:44:19  <clarkb> boris-42: ya you need to downgrade setuptools
2014-12-16T22:44:19  <nibalizer> isn't there a middle ground?
2014-12-16T22:44:28  <clarkb> boris-42: until we get a release of pbr out that fixes this
2014-12-16T22:44:40  <anteaya> asselin: two items brought up at the infra meeting today
2014-12-16T22:44:50  <boris-42> clarkb: Oh thank you sir!
2014-12-16T22:44:52  <jeblair> mordred: Source in ./.tox/py27/build/testtools has version 1.5.0, which satisfies requirement testtools>=0.9.32
2014-12-16T22:44:55  <nibalizer> instead of 1 module at a time and all modulues at a time, we could pick 10 modules to do in a 2 week period and do those?
2014-12-16T22:45:01  <anteaya> asselin: 1) we need to follow the spec and only include the projects identified in the spec
2014-12-16T22:45:13  <clarkb> boris-42: you want <8.0
2014-12-16T22:45:22  <anteaya> asselin: 2) names with both hyphens and underscores are currently a blocker
2014-12-16T22:45:37  <mordred> jeblair: k. well, I just ran tox -epy27 -r locally in zuul and it worked
2014-12-16T22:45:38  <anteaya> asselin: can you spin up a new patch that addresses those two points?
2014-12-16T22:45:54  <asselin> anteaya, both are easy to fix. First, I'd like to get agreement onthe direction. otherwise we can just abandon
2014-12-16T22:46:03  <anteaya> asselin: you had suggested perhaps removing projects with underscores for the moment
2014-12-16T22:46:11  <jeblair> mordred: jenkins works too
2014-12-16T22:46:14  <mordred> hrm
2014-12-16T22:46:24  * mordred tries to remember what the unittest2 problem was
2014-12-16T22:46:32  *** ociuhandu has quit IRC
2014-12-16T22:46:41  <anteaya> asselin: well sometimes the general agreement becomes disagreement when we can't address the details
2014-12-16T22:46:47  <mordred> (it's one of those where I _believe_ not having unittest2 isn't actually the problem)
2014-12-16T22:46:52  <anteaya> asselin: that is just part of the workflow
2014-12-16T22:47:09  <anteaya> asselin: you don't have a agreement now
2014-12-16T22:47:29  <anteaya> asselin: if you are willing to put up another patchset you might get agreement, or you might not
2014-12-16T22:47:34  <mordred> jeblair: just to cover bases - what version of tox do you have?
2014-12-16T22:47:41  <anteaya> asselin: it is a risk and I can't give you a guarentee
2014-12-16T22:47:46  <jeblair> mordred: 161
2014-12-16T22:47:54  <mordred> ok. I'm on 1.8.0
2014-12-16T22:48:00  <anteaya> asselin: the only thing I can pretty much guarentee is that I won't merge as it is right now
2014-12-16T22:48:07  <mordred> gimme a sec - lemme test 1.6.1
2014-12-16T22:48:20  <asselin> anteaya, ok, so then I'll assume then at least there's no strong disagreement, e.g. -2.
2014-12-16T22:48:22  *** carl_baldwin has quit IRC
2014-12-16T22:48:33  <anteaya> there is no -2 on the patch correct
2014-12-16T22:48:43  <asselin> anteaya, no, not yet....
2014-12-16T22:48:48  <anteaya> so if someone wanted to -2, they have had a chance and haven't
2014-12-16T22:48:54  <anteaya> I never know what someone else will do
2014-12-16T22:48:59  <fungi> dhellmann: the juno global-reqs change just merged
2014-12-16T22:49:17  <anteaya> all I can say is that that patch right now, needs work in my opinion
2014-12-16T22:49:18  <asselin> anteaya, ok, so I will do 1) we need to follow the spec and only include the projects identified in the spec
2014-12-16T22:49:19  <mordred> fungi: ^^ do you remember the unittest2 testtools thing from a couple of weeks ago?
2014-12-16T22:49:26  *** carl_baldwin has joined #openstack-infra
2014-12-16T22:49:28  <fungi> the gate's in remarkably great shape... just saw 14 changes merge from the integrated change queue in one shot
2014-12-16T22:49:35  *** chuckC_ has quit IRC
2014-12-16T22:49:37  *** alexpilotti_ has joined #openstack-infra
2014-12-16T22:49:58  <fungi> mordred: yeah, it's a little fuzzy now
2014-12-16T22:49:58  <asselin> anteaya, nibalizer I can split out these into a separate patch:  2) names with both hyphens and underscores are currently a blocker
2014-12-16T22:49:59  *** alexpilotti_ has quit IRC
2014-12-16T22:50:17  <anteaya> asselin: I think you are hearing what I am saying
2014-12-16T22:50:22  <anteaya> asselin: which heartens me
2014-12-16T22:50:23  *** alexpilotti has quit IRC
2014-12-16T22:50:29  <mordred> jeblair: ftr, 1.6.1 works for me too. here's the bug: https://bugs.launchpad.net/devstack/+bug/1393006
2014-12-16T22:50:32  <anteaya> asselin: if you offer another patch I will review it
2014-12-16T22:50:32  <fungi> mordred: there were some bugs in our projects which it exposed, but also bugs resulting in another minor release or two of testtools as well
2014-12-16T22:50:32  <uvirtbot> Launchpad bug 1393006 in devstack "testtools 1.2.0 with old unittest2 breaks subunit.run discover --list" [Critical,Fix released]
2014-12-16T22:50:49  <nibalizer> so what to do about the underscores though?
2014-12-16T22:50:59  <anteaya> good question
2014-12-16T22:51:02  <anteaya> I don't know
2014-12-16T22:51:02  <asselin> anteaya, nibalizer and for the 2nd patch, I'll mark it WIP. We can just refer to it as nibalizer suggested
2014-12-16T22:51:18  *** sputnik13 has quit IRC
2014-12-16T22:51:19  <anteaya> nibalizer: we can deal with them one at a time rather than a group
2014-12-16T22:51:29  <anteaya> nibalizer: might have a better chance of success
2014-12-16T22:51:40  <asselin> anteaya, nibalizer I prefer to do all at once.
2014-12-16T22:51:40  *** sputnik13 has joined #openstack-infra
2014-12-16T22:51:42  <anteaya> nibalizer: I don't think we can arrive at a solution for the whole group
2014-12-16T22:51:50  *** mriedem has quit IRC
2014-12-16T22:51:54  <asselin> anteaya, nibalizer it seems the solutions should be consistent
2014-12-16T22:51:54  <anteaya> asselin: let's focus on what we can do all at once
2014-12-16T22:52:10  <nibalizer> so are you at all flexible about having hypens and underscores?
2014-12-16T22:52:20  <anteaya> I can opt out
2014-12-16T22:52:21  * asselin has no opinion on it
2014-12-16T22:52:21  <jeblair> nibalizer: iiuc, install_modules installs a module by creating a directory named "foo" assuming that all modules are named "puppet-foo"
2014-12-16T22:52:26  <anteaya> I can shut up and go away
2014-12-16T22:52:32  <anteaya> I can do that
2014-12-16T22:52:52  <nibalizer> anteaya: that wasn't what i meant, or what i want
2014-12-16T22:52:53  *** melwitt has quit IRC
2014-12-16T22:53:03  <anteaya> let's focus on where we have agreement
2014-12-16T22:53:11  <mordred> jeblair: I've tested both with and without the updated requirement from global-requirements and on tox 1.8.0 and 1.6.1 - all work for me- so I'm a bit confused
2014-12-16T22:53:13  *** spzala has quit IRC
2014-12-16T22:53:13  <anteaya> follow the spec, repos with hyphens
2014-12-16T22:53:27  <anteaya> even if we only merge that that is still substantial
2014-12-16T22:53:36  <mordred> I also can't see anywhere in openstack where we are importing unittest2
2014-12-16T22:53:40  <clarkb> mordred: jeblair: is there a link to the error someplace?
2014-12-16T22:53:48  <jeblair> anteaya: let's try to understand the technical issue related to naming and figure out a solution
2014-12-16T22:53:52  <mordred> so if we used that as a workaround at one point, we don't seem to be doing it anymore
2014-12-16T22:54:01  <anteaya> jeblair: we can do that too
2014-12-16T22:54:38  <jeblair> nibalizer: so the issue comes up because our install script knows to strip "puppet-" from the directory that the module is installed to, but does no other transformation
2014-12-16T22:54:43  *** carl_baldwin has quit IRC
2014-12-16T22:54:59  <jeblair> nibalizer: and this even works for "puppetlabs-foo" because it's just stripping up to the first hyphen
2014-12-16T22:55:06  <anteaya> nibalizer: this is _our_ install script?
2014-12-16T22:55:14  <anteaya> I didn't know this was ours
2014-12-16T22:55:20  <nibalizer> i wasn't aware we had a problem with the install script
2014-12-16T22:55:33  <jeblair> okay, backing up then
2014-12-16T22:55:55  <nibalizer> if you have a repo called puppet-log_processor ... what is the problem?
2014-12-16T22:55:57  <jeblair> the problem is that puppet modules are actually directories, and puppet modules may only consist of alphanumeric and underscore, rightL
2014-12-16T22:56:04  <nibalizer> that is true
2014-12-16T22:56:35  *** amitgandhinz has joined #openstack-infra
2014-12-16T22:56:36  <jeblair> okay, so the reason that "puppet-foo_bar" works is that our install script strips puppet- from it.  so the _first_ hyphen is not a problem for us.  right?
2014-12-16T22:56:47  <nibalizer> as i understand it
2014-12-16T22:56:55  <jeblair> similarly puppetlabs-foo
2014-12-16T22:57:03  *** zz_dimtruck is now known as dimtruck
2014-12-16T22:57:23  *** gokrokve has quit IRC
2014-12-16T22:57:43  <jeblair> i'm scanning puppetlabs git org to see what they do
2014-12-16T22:57:50  <jeblair> most of the time the module name is one word
2014-12-16T22:57:52  <nibalizer> but creating puppet-log-processor would break
2014-12-16T22:57:54  <jeblair> https://github.com/puppetlabs/puppetlabs-policy_engine
2014-12-16T22:58:06  <jeblair> there's a case where they use the mix
2014-12-16T22:58:47  *** yamamoto has joined #openstack-infra
2014-12-16T22:59:07  <jeblair> so it sort of looks like "something-module_with_underscores" is actually an established pattern
2014-12-16T22:59:29  <jeblair> (i'm seeing a few more of those)
2014-12-16T23:00:18  *** rmcall has quit IRC
2014-12-16T23:00:48  *** carl_baldwin has joined #openstack-infra
2014-12-16T23:01:10  <nibalizer> sorry my internet died
2014-12-16T23:01:20  <nibalizer> yes, puppet modules do this
2014-12-16T23:01:27  <nibalizer> no one loves it, to be sure, but its where we are
2014-12-16T23:01:32  <jeblair> so as annoying as it is to have the mixture, it seems like puppet-module_name is probably going to be the most compatible with existing tooling related to puppet modules
2014-12-16T23:01:40  <mordred> jeblair: ++
2014-12-16T23:01:42  *** baoli has joined #openstack-infra
2014-12-16T23:02:01  <jeblair> and if we were to try to "improve" the situation by switching to "puppet_module_name" we'd probably actually make it harder for people (even though i'm sure we could fix our own install script fairly easily)
2014-12-16T23:02:23  <jeblair> and changing to "puppet-module-name" would be even harder for people to deal with than that
2014-12-16T23:02:24  *** gokrokve has joined #openstack-infra
2014-12-16T23:02:58  <nibalizer> another option is to move it to puppet-modulename
2014-12-16T23:03:06  <nibalizer> but that hinders reabability
2014-12-16T23:04:13  <jeblair> nibalizer: the stackforge puppet modules have a mixture
2014-12-16T23:04:20  <jeblair> nibalizer: http://git.openstack.org/cgit/stackforge/puppet-openstack-cloud/tree/
2014-12-16T23:04:28  <anteaya> any way of creating something to point at for the cargo culters that says that hyphens and underscores are only permissible for puppet modules
2014-12-16T23:04:40  <clarkb> ok we have all of the setuptools fixes in except for pbr
2014-12-16T23:04:46  <clarkb> mordred: ^ can you address fungi's -1?
2014-12-16T23:04:56  <anteaya> since I am seeing this in job names and non puppet stackforge repo names
2014-12-16T23:04:58  * clarkb would really like to push up a rvert of setuptools pin to devstack to see what breaks
2014-12-16T23:05:05  <anteaya> and anything one project does, they all copy
2014-12-16T23:05:06  <clarkb> but need to fix pbr first otherwise pbr will break
2014-12-16T23:05:12  <mordred> fungi: how would you like that addressed?
2014-12-16T23:05:37  <mordred> fungi: you seem to have summed it up in that comment - should I just acknowledge that comment?
2014-12-16T23:05:43  <fungi> mordred: clarkb: either an update to the commit message or a comment in the review. just something recording this as the decision rather than merely that the concerns were ignored (which they weren't)
2014-12-16T23:05:51  <jeblair> nibalizer: dow does puppet-openstack-cloud work?
2014-12-16T23:05:54  <fungi> mordred: yep, that would be fine
2014-12-16T23:05:56  <mordred> ok
2014-12-16T23:06:02  <fungi> then i'm happy to approve'
2014-12-16T23:06:14  *** hashar has quit IRC
2014-12-16T23:06:37  <jeblair> clarkb, fungi, mordred: http://paste.openstack.org/show/152047/
2014-12-16T23:06:54  *** gokrokve has quit IRC
2014-12-16T23:07:02  *** dims has quit IRC
2014-12-16T23:07:19  *** rmcall has joined #openstack-infra
2014-12-16T23:07:21  <jogo> mordred: any recent PBR changes
2014-12-16T23:07:23  <mordred> fungi: done
2014-12-16T23:07:28  *** gokrokve has joined #openstack-infra
2014-12-16T23:07:32  <jogo> mordred: http://logs.openstack.org/52/134052/5/check//gate-hacking-integration-nova/c4d107b/console.html#_2014-12-16_22_38_03_070
2014-12-16T23:07:33  <mordred> jogo: that's WAY too broad of a question
2014-12-16T23:07:35  <fungi> clarkb: also the proposed stable/juno patches which just updated to all projects using oslo.db need to merge, yeah?
2014-12-16T23:07:36  *** dims has joined #openstack-infra
2014-12-16T23:07:42  <fungi> mordred: thanks--approving
2014-12-16T23:08:11  <clarkb> wow testools setup.py depends on unittest2
2014-12-16T23:08:13  <fungi> mordred: also a change from pip freeze to pbr freeze in all jobs would be helpful
2014-12-16T23:08:17  *** dims has quit IRC
2014-12-16T23:08:23  <fungi> mordred: i can hack that up if you haven't started
2014-12-16T23:08:30  *** dims has joined #openstack-infra
2014-12-16T23:08:34  <mordred> jogo, clarkb: might have to do with the setuptools mess?
2014-12-16T23:08:34  <asselin> anteaya, are you good with mixed case? or would you prefer to consider it more as a separate patch set?
2014-12-16T23:08:36  <anteaya> nibalizer jeblair the make an exception for me argument, just becomes "hey look what your future looks like"
2014-12-16T23:08:37  <clarkb> fungi: that will need to merge but not to test a revert of the setuptools pin because we patch all reqs from global reqs
2014-12-16T23:08:38  <mordred> fungi: I can get it
2014-12-16T23:08:51  <fungi> clarkb: oh, great point
2014-12-16T23:08:52  <clarkb> mordred: jeblair maybe? what version of setuptools is in there?
2014-12-16T23:08:54  <nibalizer> jeblair: that module is actually called (from metadata.json) "eNovance-cloud",
2014-12-16T23:09:00  <mordred> clarkb: no - jogo's thing
2014-12-16T23:09:35  <clarkb> oh maybe?
2014-12-16T23:09:39  <EmilienM> jeblair: it works in production for us. If you have any question, I'm a main contributor
2014-12-16T23:09:40  <jogo> mordred: hmm
2014-12-16T23:09:46  <EmilienM> jeblair: (puppet-openstack-cloud)
2014-12-16T23:09:50  <clarkb> except that pbr is running on what is basically 0.10.0 now
2014-12-16T23:09:55  <anteaya> EmilienM: we are talking about repo names
2014-12-16T23:09:56  *** yamamoto has quit IRC
2014-12-16T23:09:58  <jeblair> EmilienM: i'm told puppet modules can't have hyphens in their names
2014-12-16T23:09:58  <clarkb> so pbr changes wouldn't be related but setuptools mihgt be
2014-12-16T23:10:04  *** sigmavirus24 has joined #openstack-infra
2014-12-16T23:10:15  <anteaya> EmilienM: and nibalizer is making the point that they have to be called puppet-foo_bar
2014-12-16T23:10:15  <jeblair> EmilienM: that it is a restriction in puppet
2014-12-16T23:10:19  *** rmcall has quit IRC
2014-12-16T23:10:22  <EmilienM> jeblair: oh. Then we have an issue with our module. Not an issue if you want to rename it.
2014-12-16T23:10:24  <anteaya> EmilienM: as puppet-foo-bar will break
2014-12-16T23:10:34  <EmilienM> jeblair: I don't see where is causes problem though
2014-12-16T23:10:38  <anteaya> EmilienM: no issue
2014-12-16T23:10:41  *** otter768 has joined #openstack-infra
2014-12-16T23:10:41  <nibalizer> jeblair: see http://git.openstack.org/cgit/stackforge/puppet-openstack-cloud/tree/manifests/cache.pp#n31 they use just cloud in their module name
2014-12-16T23:10:45  <EmilienM> we already have puppet-neutron, etc
2014-12-16T23:10:49  <clarkb> EmilienM: puppet specifically says that names may not have -'s in them
2014-12-16T23:10:52  <anteaya> EmilienM: we are curious
2014-12-16T23:11:01  <EmilienM> anteaya: I know you are :P
2014-12-16T23:11:02  <clarkb> EmilienM: puppet-neutron is fine because that is renamed to neutron in puppet right?
2014-12-16T23:11:15  <clarkb> EmilienM: you don't use neutron::thing { 'stuff':
2014-12-16T23:11:19  <clarkb> er
2014-12-16T23:11:27  <clarkb> puppet-neutron::thing { 'stuff':
2014-12-16T23:11:28  <jogo> mordred: yeah pbr/util hasn't been touched in months :/
2014-12-16T23:11:46  *** e0ne has quit IRC
2014-12-16T23:11:51  <jeblair> nibalizer: oh, in the _code_ not in the directory?
2014-12-16T23:11:52  <EmilienM> clarkb: ok. While we use "cloud::" thing I see your point
2014-12-16T23:12:09  <mordred> jogo: well, the setuptools stuff would have the potential to break name resolution
2014-12-16T23:12:26  <jogo> sigmavirus24: ^
2014-12-16T23:12:27  <jeblair> nibalizer: but then, would you have to install puppet-openstack-cloud into /puppet/module/directory/cloud for it to work?
2014-12-16T23:12:29  <jeblair> EmilienM: ^?
2014-12-16T23:12:38  <mordred> clarkb, fungi: do we have anything that tests with tox and doesn't use pbr?
2014-12-16T23:12:38  <jogo> mordred: doh
2014-12-16T23:12:41  <nibalizer> jeblair: yes
2014-12-16T23:12:57  <mordred> clarkb, fungi: because if we do, then the jobs to do the pip freeze -> pbr freeze are going to have to get more complex
2014-12-16T23:13:01  <fungi> mordred: at one point i would have said git-review but that's no longer the case
2014-12-16T23:13:14  <sigmavirus24> mordred: I didn't think there were any entry point related changes in 8.x
2014-12-16T23:13:31  *** emagana has quit IRC
2014-12-16T23:13:48  <mordred> sigmavirus24: I believe you're correct - but I was thinking that the setuptools version normalization could trigger somethign there?
2014-12-16T23:13:50  *** krtaylor has quit IRC
2014-12-16T23:13:55  <fungi> mordred: wrapper slave script which looks for pbr as an executable and then calls that instead of pip for the freeze output?
2014-12-16T23:14:02  *** rmcall has joined #openstack-infra
2014-12-16T23:14:02  <jogo> sigmavirus24: whatever the issue, I don't see it just running 'tox -epep8' on nova
2014-12-16T23:14:10  <EmilienM> jeblair: yes
2014-12-16T23:14:12  <jogo> so not in the hacking 0.9
2014-12-16T23:14:17  <EmilienM> jeblair: our Puppetfile does it
2014-12-16T23:14:17  <jeblair> nibalizer, anteaya: so i think our thoughts about maintaining puppet-module_name for maximum compatability still stands
2014-12-16T23:14:22  *** amitgandhinz has quit IRC
2014-12-16T23:14:24  <mordred> fungi: yah - I think we need to do that
2014-12-16T23:14:34  <sigmavirus24> mordred: so the code in particular causing this is that nova.hacking.checks is imported but we can't getattr(nova.hacking,checks, 'factory')
2014-12-16T23:14:37  <jeblair> EmilienM: thanks, that explains it and i think i understand now
2014-12-16T23:14:47  <EmilienM> jeblair: though I'm still not sure we are doing right
2014-12-16T23:14:48  <sigmavirus24> jogo: what happens if you recreate the env?
2014-12-16T23:14:52  <sigmavirus24> tox -epep8 -r
2014-12-16T23:14:53  <anteaya> jeblair: I am hearing that, do we have any hope of containing the bleed to puppet modules
2014-12-16T23:14:55  <EmilienM> but it works ^^
2014-12-16T23:14:55  <jogo> sigmavirus24: did that
2014-12-16T23:15:19  <anteaya> or are we going to have to accept everything being named with hyphens and underscores henceforth
2014-12-16T23:15:27  <clarkb> fungi: mordred I think we do [ -e .tox/venv/py27/pbr ] && pbr freese
2014-12-16T23:15:35  <clarkb> I don't think we need to make it more complex than that
2014-12-16T23:15:41  *** otter768 has quit IRC
2014-12-16T23:15:58  <mordred> clarkb: [ -e .tox/venv/py27/pbr ] && pbr freeze || pip freeze
2014-12-16T23:16:06  <clarkb> mordred: ya that
2014-12-16T23:16:32  *** gondoi is now known as zz_gondoi
2014-12-16T23:17:24  *** ddieterly has quit IRC
2014-12-16T23:17:26  <jeblair> anteaya: many systems are going to have specific naming requirements.  oslo.foo for example.  i think we're going to have to be flexible.  try to point out potential typos or areas for improvement, but otherwise, bend.  :)
2014-12-16T23:17:33  <jogo> mordred:  pbr.util.resolve_name('nova.hooks.add_hook')
2014-12-16T23:17:43  <jogo> mordred: lools like resolve_name is not resolving anymore
2014-12-16T23:17:59  *** ddieterly has joined #openstack-infra
2014-12-16T23:18:05  <anteaya> sigh in the stackforge/third party space that translates to get trampled
2014-12-16T23:18:20  <anteaya> okay fine
2014-12-16T23:18:25  <sigmavirus24> jogo: and you're on setuptools.__version__.startswith('8.0') ?
2014-12-16T23:18:28  <openstackgerrit> Monty Taylor proposed openstack-infra/project-config: Move to pbr freeze from pip freeze  https://review.openstack.org/142257
2014-12-16T23:18:49  *** rmcall has quit IRC
2014-12-16T23:19:01  * anteaya invests in more beeswax candles
2014-12-16T23:19:35  *** emagana has joined #openstack-infra
2014-12-16T23:20:04  <openstackgerrit> James Carey  proposed openstack-dev/hacking: Add optional hacking checks  https://review.openstack.org/134052
2014-12-16T23:20:11  <sigmavirus24> jogo: with nova on tip, tox -epep8 -r doesn't work for me
2014-12-16T23:20:22  *** rmcall has joined #openstack-infra
2014-12-16T23:20:24  <jogo> sigmavirus24: huh,
2014-12-16T23:20:35  <mordred> sigmavirus24: with setuptools.__version__.startswith('8.0') ?
2014-12-16T23:20:39  <sigmavirus24> and the setuptools version in the venv is 3.6 odly
2014-12-16T23:20:42  * sigmavirus24 upgrades
2014-12-16T23:20:45  <mordred> ah. ok
2014-12-16T23:20:58  *** mfink has quit IRC
2014-12-16T23:20:59  <jeblair> clarkb: do you understand the testtools error i'm seeing?
2014-12-16T23:21:01  <mordred> well, me needs to afk for a few - would LOVE more infos
2014-12-16T23:21:47  <jogo> sigmavirus24: setuptools.__version__
2014-12-16T23:21:50  <jogo> '3.6'
2014-12-16T23:21:53  <jogo> confused about that
2014-12-16T23:22:01  <jogo> that is inside a tox venv
2014-12-16T23:22:03  <sigmavirus24> our virtualenv versions might be old
2014-12-16T23:22:17  *** ddieterly has quit IRC
2014-12-16T23:22:23  <mordred> jeblair: since I can't reproduce locally - can you try adding unittest2 to your test-requires and verify that that does fix it for you
2014-12-16T23:22:38  <mordred> jeblair: and in the mean time I'll keep trying to figure out why this is affecting you and not me and what the root cause is
2014-12-16T23:22:41  <openstackgerrit> Armando Migliaccio proposed openstack-infra/project-config: Extend ACL checks to OpenStack namespace.  https://review.openstack.org/142230
2014-12-16T23:22:42  <openstackgerrit> Armando Migliaccio proposed openstack-infra/project-config: Fix the OSSA ACL config  https://review.openstack.org/142258
2014-12-16T23:23:11  <clarkb> jeblair: not really just that it seems to need unittest2 to be installed for its setup.py to run
2014-12-16T23:23:12  <mordred> jeblair: OOOOOHHHHHHHHHH
2014-12-16T23:23:13  <mordred> I get it
2014-12-16T23:23:13  <clarkb> jeblair: which is odd
2014-12-16T23:23:24  <mordred> it will take a bit more jiggering to reproduce
2014-12-16T23:23:27  <jogo> sigmavirus24 mordred: well I saw this fail on infra
2014-12-16T23:23:48  *** bdpayne has joined #openstack-infra
2014-12-16T23:23:50  <clarkb> mordred: can you explain more than that?
2014-12-16T23:23:54  <jogo> so I don't think its just our local boxes  http://logs.openstack.org/52/134052/5/check//gate-hacking-integration-nova/c4d107b/console.html#_2014-12-16_22_38_03_070
2014-12-16T23:23:55  <mordred> jeblair, clarkb: but this is the "setup_requires downloads an egg which causes install_requires to not need to install something even though it _Does_ need to install it" bug
2014-12-16T23:23:59  *** dmsimard is now known as dmsimard_away
2014-12-16T23:24:01  <mordred> it was fixed in upstream pip iirc
2014-12-16T23:24:05  <nibalizer> so does that mean asselin can add the underscore projects in to his patch?
2014-12-16T23:24:20  <mordred> but it was the cause  of many a weird error like this for a while
2014-12-16T23:24:31  * mordred will try to put together a test case to show that
2014-12-16T23:24:38  <mordred> but must afk for a sec - back ina  few
2014-12-16T23:24:39  <asselin> nibalizer, at this point, I will keep them in...err...not take them out.
2014-12-16T23:24:47  <sigmavirus24> jogo: well my box failed on install
2014-12-16T23:25:19  *** teran_ has joined #openstack-infra
2014-12-16T23:25:22  <sigmavirus24> ah libvirt needs to be installed apparently ... good old c extensions
2014-12-16T23:25:34  *** wenlock has quit IRC
2014-12-16T23:25:34  *** melwitt has joined #openstack-infra
2014-12-16T23:25:47  <nibalizer> okay cool
2014-12-16T23:25:48  <jogo> haha
2014-12-16T23:25:51  <jogo> bbiab relocating
2014-12-16T23:25:55  <asselin> nibalizer, anteaya and check consistency with the spec
2014-12-16T23:26:21  *** krtaylor has joined #openstack-infra
2014-12-16T23:27:09  <nibalizer> cool
2014-12-16T23:27:24  *** shashankhegde has quit IRC
2014-12-16T23:28:01  *** teran has quit IRC
2014-12-16T23:28:44  *** shashankhegde has joined #openstack-infra
2014-12-16T23:28:47  *** gokrokve has quit IRC
2014-12-16T23:30:19  *** andreykurilin_ has quit IRC
2014-12-16T23:31:05  <openstackgerrit> James Carey  proposed openstack-dev/hacking: Add optional hacking checks  https://review.openstack.org/134052
2014-12-16T23:31:49  <jeblair> clarkb, mordred: adding unittest2 to the beginning of test-requirements avoids the problem
2014-12-16T23:32:52  <openstackgerrit> James Carey  proposed openstack-dev/hacking: Add optional hacking checks  https://review.openstack.org/134052
2014-12-16T23:33:10  <jeblair> clarkb, mordred: so do i need a newer pip?
2014-12-16T23:34:05  *** dimtruck is now known as zz_dimtruck
2014-12-16T23:34:15  <jeblair> clarkb, mordred: https://github.com/testing-cabal/testtools/commit/6f12789a398a99fc39e4380bd063af841a262c62
2014-12-16T23:35:18  <clarkb> maybe I still don't quite get what mordred is saying
2014-12-16T23:35:27  <jeblair> clarkb, mordred: so it switched to using setup_requires
2014-12-16T23:35:29  <clarkb> jeblair: however your tox bundles pip
2014-12-16T23:35:39  <clarkb> jeblair: so its likely related to your tox version if pip version matters
2014-12-16T23:36:09  <jeblair> clarkb: mordred tried using my version of tox and it worked for him
2014-12-16T23:36:28  <clarkb> so likely not related to pip version
2014-12-16T23:36:42  <clarkb> let me give reproduction a go. just `tox -epy27`?
2014-12-16T23:36:48  <jeblair> yep
2014-12-16T23:38:25  *** fandi has joined #openstack-infra
2014-12-16T23:38:49  *** fandi has quit IRC
2014-12-16T23:41:07  *** zz_dimtruck is now known as dimtruck
2014-12-16T23:41:10  *** e0ne has joined #openstack-infra
2014-12-16T23:41:22  <fungi> tox -repy27 with zuul master works for me (using tox 1.8.1)
2014-12-16T23:42:12  <clarkb> wow running tox like that killed the battery very quickly :)
2014-12-16T23:42:16  <clarkb> thankfully I can plug in
2014-12-16T23:44:06  *** erikmwilson has quit IRC
2014-12-16T23:44:12  *** Masahiro has joined #openstack-infra
2014-12-16T23:44:57  <clarkb> but unable to reproduce with tox 1.6.1
2014-12-16T23:46:36  *** MarkAtwood has quit IRC
2014-12-16T23:47:08  *** e0ne has quit IRC
2014-12-16T23:47:10  <openstackgerrit> Ramy Asselin proposed openstack-infra/project-config: Prepare project-config for puppet module split #1  https://review.openstack.org/140523
2014-12-16T23:47:36  <asselin> nibalizer, anteaya ^^
2014-12-16T23:47:55  *** amotoki has quit IRC
2014-12-16T23:48:37  *** Masahiro has quit IRC
2014-12-16T23:48:56  <clarkb> woot I did not see that fungi approved pbr changes \o/ I am excited
2014-12-16T23:49:21  <fungi> clarkb: yeah, now we need a 0.10.3 tag
2014-12-16T23:49:43  <clarkb> well it needs to merge but its in process
2014-12-16T23:49:47  <fungi> mordred: ^ would you like to do the honors this time?
2014-12-16T23:49:57  <fungi> oh, right, gating feh
2014-12-16T23:50:19  <fungi> details details
2014-12-16T23:50:50  *** yamamoto has joined #openstack-infra
2014-12-16T23:52:16  *** andreaf has joined #openstack-infra
2014-12-16T23:52:17  <fungi> according to https://github.com/openstack/openstack/graphs/commit-activity week before last we merged more openstack/openstack changes than, well, ever
2014-12-16T23:52:19  *** rmcall has quit IRC
2014-12-16T23:52:49  *** lttrl has joined #openstack-infra
2014-12-16T23:52:51  <clarkb> wow
2014-12-16T23:52:55  <fungi> 554 commits the week of november 30
2014-12-16T23:53:09  <pleia2> wow
2014-12-16T23:53:31  <nibalizer> jeblair: pleia2 so do we want to give some kind of ping to the golang folks?
2014-12-16T23:53:38  *** dimtruck is now known as zz_dimtruck
2014-12-16T23:54:20  <pleia2> nibalizer: I think so
2014-12-16T23:54:41  <mordred> nibalizer: maybe they can put the word go in theirs
2014-12-16T23:54:44  <pleia2> I do worry it will get very confusing in the long run because the tools are so similar
2014-12-16T23:54:57  <pleia2> just different enough to make people crazy when they land on the wrong man page
2014-12-16T23:55:01  <fungi> pleia2: nibalizer: know any of the people listed at https://github.com/golang/review/commits/master/git-review ?
2014-12-16T23:55:08  <mordred> fungi: what gating?
2014-12-16T23:55:29  <fungi> mordred: i know, right?
2014-12-16T23:55:30  <pleia2> I don't know anyone in the go community
2014-12-16T23:55:37  *** sputnik13 has quit IRC
2014-12-16T23:55:48  *** mfink has joined #openstack-infra
2014-12-16T23:56:17  <timrc> at least it is a review tool for go and not a review tool for an go-implementation of openstack aka gopenstack
2014-12-16T23:56:31  <mordred> timrc: yah - but it's a review tool for _Gerrit_
2014-12-16T23:56:34  * anteaya 's tox just failed on No module named unittest2 and is reading backscroll
2014-12-16T23:56:50  <mordred> timrc: like, it literally does the same thing, except less generally and written in go
2014-12-16T23:56:58  <clarkb> anteaya: cool you can reproduce. what version of tox do you have?
2014-12-16T23:57:04  <greghaynes> I submit https://code.google.com/p/go/issues/detail?id=9 as evidence they may not care
2014-12-16T23:57:06  <clarkb> would be interesting if your version is different than jeblairs
2014-12-16T23:57:16  <mordred> ooh!
2014-12-16T23:57:17  <timrc> mordred, Aye.
2014-12-16T23:57:21  <mordred> anteaya broke too
2014-12-16T23:57:23  <mordred> I'm happy
2014-12-16T23:57:41  *** sputnik13 has joined #openstack-infra
2014-12-16T23:57:41  *** jlibosva has quit IRC
2014-12-16T23:58:16  <anteaya> anita@anita-hp:~/work/project-config$ tox --version
2014-12-16T23:58:17  <anteaya> 1.6.1 imported from /usr/local/lib/python2.7/dist-packages/tox/__init__.pyc
2014-12-16T23:58:21  <nibalizer> fungi: this is an easeir to parse list https://github.com/golang/review/graphs/contributors
2014-12-16T23:58:40  <pleia2> greghaynes: wow, I hadn't seen that before, pretty epic, "There's no law against being rude" x_x
2014-12-16T23:58:52  <anteaya> mordred: I'm glad my breaking makes you happy
2014-12-16T23:58:54  <mordred> clarkb: are we _certain_ that tox is bundling virtualenv?
2014-12-16T23:59:04  <mordred> pleia2: can you tell me pip --version and virtualenv --version too?
2014-12-16T23:59:04  <anteaya> here I was trying to do reviews to accomplish that
2014-12-16T23:59:22  <mordred> gah
2014-12-16T23:59:24  <mordred> anteaya: ^^
2014-12-16T23:59:32  * anteaya gets versions
2014-12-16T23:59:39  <mordred> pleia2: I do not need to nkow your pip --version and virtualenv --version
2014-12-16T23:59:41  <fungi> mordred: i think dstufft suggested that tox merely installs virtualenv
2014-12-16T23:59:43  <clarkb> mordred: ya well at least it did in the past
2014-12-16T23:59:44  <pleia2> :)
2014-12-16T23:59:58  <clarkb> mordred: I can say it definitely vendored virtualenv a year ago
