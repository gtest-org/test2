2015-02-19T00:01:26  <foobio> hey whaddyaknow, ironic py27 passes and runs db migrations for mysql and postgresql
2015-02-19T00:01:50  <clarkb> woot
2015-02-19T00:01:53  <foobio> i guess i _could_ just drop the db_name param from the mysql-db and pgsql-db macros in that case
2015-02-19T00:02:06  <foobio> simplifies things nicely
2015-02-19T00:02:32  <foobio> also tested neutron and cinder. they check out without needing anything additional beyond what i install for nova
2015-02-19T00:02:46  <foobio> i expect ceilo to be a little on the special side tho
2015-02-19T00:03:09  <foobio> running it now
2015-02-19T00:03:17  <foobio> i should probably try some random clients too
2015-02-19T00:03:28  <foobio> though those don't need the db
2015-02-19T00:03:37  <foobio> but would be a good exercise of teh package set
2015-02-19T00:03:38  <clarkb> ya clients shouldn't need the db, just lxml
2015-02-19T00:04:07  *** yamamoto has joined #openstack-infra
2015-02-19T00:05:46  *** camunoz has quit IRC
2015-02-19T00:07:46  *** dangers is now known as dangers_away
2015-02-19T00:08:00  <foobio> yep, ceilo wants mongod
2015-02-19T00:08:22  <clarkb> we don't install that for them do we?
2015-02-19T00:08:42  <clarkb> apparently we do
2015-02-19T00:08:50  <clarkb> also zookeeper is there for tooz/taskflow
2015-02-19T00:08:58  <foobio> for their unit tests, looks like we preinstall mongodb-server
2015-02-19T00:09:06  <clarkb> ya
2015-02-19T00:10:05  *** patrickeast has quit IRC
2015-02-19T00:13:11  <openstackgerrit> greghaynes proposed openstack-infra/project-config: Respect NODEPOOL_SSH_KEY in prepare-node for dib  https://review.openstack.org/157205
2015-02-19T00:16:13  *** stevemar has quit IRC
2015-02-19T00:17:49  <foobio> okay, mongodb-server got ceilo passing
2015-02-19T00:17:55  <mordred> Woot
2015-02-19T00:18:04  <mordred> This is exciting
2015-02-19T00:18:59  <jhesketh> clarkb: so I think we need to restart zuul to get the update swift timeout... is this somethign we want to do? Alternatively I should be able to increase the timeout on a per-job basis in the layout
2015-02-19T00:19:22  <clarkb> jhesketh: ya we probably should
2015-02-19T00:19:25  *** markvoelker has quit IRC
2015-02-19T00:19:41  <jhesketh> clarkb: as in should restart or do the more graceful layout.yaml?
2015-02-19T00:19:55  <clarkb> jhesketh: sorry, should restart zuul
2015-02-19T00:20:07  <clarkb> jogo: I think that centos7 glusterfs job is broken
2015-02-19T00:20:12  <foobio> i guess the tooz unit tests opportunistically check for zookeeper?
2015-02-19T00:20:26  <clarkb> jogo: at least on that tempest change, I am watching a couple others now
2015-02-19T00:20:29  <clarkb> foobio: yes iirc
2015-02-19T00:22:07  *** stevemar has joined #openstack-infra
2015-02-19T00:22:08  *** ddieterly has joined #openstack-infra
2015-02-19T00:22:12  *** camunoz has joined #openstack-infra
2015-02-19T00:22:39  <openstackgerrit> Merged openstack-infra/jenkins-job-builder: xUnit publisher: add test-time-margin extra config option  https://review.openstack.org/134922
2015-02-19T00:22:53  <clarkb> harlowja_: ^ you would know care to full us in
2015-02-19T00:23:37  <harlowja_> ??
2015-02-19T00:23:49  <clarkb> harlowja_: 00:20:12      foobio | i guess the tooz unit tests opportunistically check for zookeeper?
2015-02-19T00:24:09  <harlowja_> correcto
2015-02-19T00:24:25  <harlowja_> tooz/taskflow do at least
2015-02-19T00:24:55  *** dkliban is now known as dkliban_afk
2015-02-19T00:25:28  <clarkb> thanks (we are working on doing package installs at job runtime rather than during image build time, so that we can reduce the number of images we carry and better document/manage system deps)
2015-02-19T00:25:35  <foobio> harlowja_: thanks, i just managed to confirm that for myself too
2015-02-19T00:25:50  <harlowja_> cool
2015-02-19T00:25:59  <harlowja_> redis also
2015-02-19T00:26:06  <harlowja_> and probably memcache (at least by tooz)
2015-02-19T00:26:11  <clarkb> we would cache the packages on the images so installs should be pretty quick
2015-02-19T00:26:26  *** ddieterly has quit IRC
2015-02-19T00:26:37  <foobio> yep
2015-02-19T00:27:26  *** sarob has quit IRC
2015-02-19T00:27:27  <harlowja_> does 'test-time-margin' affect these kind of probings (aka the tests try to connect to redis, and timeout if can't get there...)
2015-02-19T00:27:50  * harlowja_ pretty sure that the fails pretty quick, but just want to check
2015-02-19T00:28:26  <foobio> cool, i'll check those too. thanks!
2015-02-19T00:28:33  <openstackgerrit> Lucas Dutra Nunes proposed openstack-infra/jenkins-job-builder: xUnit publisher: add option to skip if there are no tests files  https://review.openstack.org/134923
2015-02-19T00:28:37  <openstackgerrit> Merged openstack-infra/jenkins-job-builder: add support for EnvInject mask password params option  https://review.openstack.org/148724
2015-02-19T00:29:10  <clarkb> harlowja_: I don't understand the test-time-margin question
2015-02-19T00:29:26  <clarkb> harlowja_: where is test-time-margin from?
2015-02-19T00:29:37  <harlowja_> nm, probably a bad up pointer, lol
2015-02-19T00:29:39  <harlowja_>  https://review.openstack.org/134922
2015-02-19T00:30:27  <clarkb> we don't use xunit
2015-02-19T00:30:35  <harlowja_> ya, nm, my confusion
2015-02-19T00:31:05  <clarkb> thats just a feature that JJB supports but not something we use. that plugin has a global lock in the jenkins master so each job is serially processed one after the other
2015-02-19T00:31:18  <clarkb> harlowja_: create a major backup for jobs that run quickly when they bump up against jobs that run slowly
2015-02-19T00:31:23  <harlowja_> kk
2015-02-19T00:31:32  * harlowja_ thought that was connected to this discussion, but i think its not, ha
2015-02-19T00:31:46  *** rmcall has joined #openstack-infra
2015-02-19T00:32:09  *** stevemar has quit IRC
2015-02-19T00:32:28  *** bhuvan has quit IRC
2015-02-19T00:32:32  *** zul has quit IRC
2015-02-19T00:32:40  <foobio> harlowja_: yeah, this is just working on figuring out how to make unit and static analysis jobs run successfully (and completely) on the same relatively raw servers where we also run devstack-based jobs
2015-02-19T00:32:59  <harlowja_> cool
2015-02-19T00:33:16  *** melwitt has quit IRC
2015-02-19T00:33:21  <openstackgerrit> Merged openstack-infra/jenkins-job-builder: Add 'last-completed' to copyartifact 'which-build' values  https://review.openstack.org/154418
2015-02-19T00:33:41  *** tmcpeak has quit IRC
2015-02-19T00:33:44  *** ghostpl_ has joined #openstack-infra
2015-02-19T00:33:46  <foobio> harlowja_: interesting, so with zookeeperd, redis-server and memcached installed, the tooz py27 job still says Ran 295...skips=243
2015-02-19T00:34:10  <clarkb> foobio: maybe the opportunistic stuff isn't working, should cross check against previous jobs on bare-*
2015-02-19T00:34:20  <harlowja_> probably missed out on a few more oppurinities foobio
2015-02-19T00:34:22  <harlowja_> https://github.com/openstack/tooz/blob/master/tooz/tests/test_coordination.py#L31
2015-02-19T00:34:23  <foobio> yep, doing
2015-02-19T00:34:43  <harlowja_> kazoo (zookeeper), memcached, redis should all proceed
2015-02-19T00:34:55  <clarkb> harlowja_: well we only care about maintaining those that are tested today
2015-02-19T00:35:10  <clarkb> and if none are tested today then this gets simpler :)
2015-02-19T00:35:12  *** tmcpeak has joined #openstack-infra
2015-02-19T00:35:14  <harlowja_> :)
2015-02-19T00:35:16  <harlowja_> fair enough, ha
2015-02-19T00:35:39  <foobio> our motto is "no regressions"
2015-02-19T00:35:44  <foobio> (or as few as possible anyway)
2015-02-19T00:35:45  <clarkb> should be simpleish to fix once we move too since this makes it a lot more direct in the job(s)
2015-02-19T00:36:05  <foobio> even moreso if i do the bindep integration i want next
2015-02-19T00:36:16  <clarkb> jhesketh: did you see my comment on 98306?
2015-02-19T00:36:32  <foobio> ahh, yep, same quantity of tests run and skipped on a bare-trusty node too, so this matches anyway
2015-02-19T00:36:48  <clarkb> yup confirmed the glusterfs centos7 job is borked
2015-02-19T00:37:09  <clarkb> the nodes just seem to stop talking to jenkins after a bit then zuul restarts the jobs
2015-02-19T00:37:15  <clarkb> I am going to push up a change to stop running that test
2015-02-19T00:37:31  <jhesketh> clarkb: nope, that's an old one... I'll need to refresh my state but will reply shortly :-)
2015-02-19T00:38:32  *** ghostpl_ has quit IRC
2015-02-19T00:38:38  *** dprince has quit IRC
2015-02-19T00:39:20  <openstackgerrit> Clark Boylan proposed openstack-infra/project-config: Remove the tempest glusterfs job  https://review.openstack.org/157213
2015-02-19T00:39:29  <clarkb> jogo: foobio ^
2015-02-19T00:39:40  <clarkb> jhesketh: ya I sat down with fresh eyes and had new questions :)
2015-02-19T00:40:26  <clarkb> and the author of that test isn't in here anymore
2015-02-19T00:41:11  *** david-lyle is now known as david-lyle_afk
2015-02-19T00:41:41  <foobio> clarkb: who was shepherding that job?
2015-02-19T00:41:49  <clarkb> BharatK
2015-02-19T00:41:54  <jhesketh> clarkb: you mean since the first patchset, or you have more since your latest comment (and I should wait before replying)
2015-02-19T00:42:05  *** bdpayne has quit IRC
2015-02-19T00:42:07  *** gordc has quit IRC
2015-02-19T00:42:22  <clarkb> jhesketh since the land before time. my comment thwre is current
2015-02-19T00:42:26  *** zul has joined #openstack-infra
2015-02-19T00:43:10  <jhesketh> cool
2015-02-19T00:43:51  *** tmcpeak has quit IRC
2015-02-19T00:45:19  *** arosen1 has quit IRC
2015-02-19T00:46:05  <clarkb> foobio: https://jenkins04.openstack.org/job/check-tempest-dsvm-full-glusterfs-centos7/30/consoleFull thats an example of a job that just dropped off
2015-02-19T00:46:32  <foobio> nice. my bet is on network reconfiguration
2015-02-19T00:46:48  <clarkb> ya but gluster shouldn't do any of that but its a long time since I played with gluster
2015-02-19T00:47:00  <foobio> though i suppose it could be flat out panicking the instance
2015-02-19T00:47:40  <clarkb> it is in the object storage tests I don't know if glusterfs is being used as a backend for swift there but ya it may be causing the fs to go belly up
2015-02-19T00:47:44  <clarkb> and kernel panic
2015-02-19T00:49:23  *** tkelsey has quit IRC
2015-02-19T00:51:25  *** ddieterly has joined #openstack-infra
2015-02-19T00:51:57  *** hyakuhei has quit IRC
2015-02-19T00:52:34  *** markvoelker has joined #openstack-infra
2015-02-19T00:52:58  *** ddieterl_ has joined #openstack-infra
2015-02-19T00:53:18  *** ddieterly has quit IRC
2015-02-19T00:55:01  *** pcrews has quit IRC
2015-02-19T00:55:48  <ianw> clarkb: i guess on reflection i want to walk "providers->images" not "labels->provider" since the logger is setup logging.getLogger("nodepool.image.build.%s.%s" % (self.provider.name, self.image.name))
2015-02-19T00:55:59  <clarkb> ianw: yup
2015-02-19T00:56:14  <clarkb> ianw: I think one of my comments addresses that (and using a set as there may be duplicate entries in that list)
2015-02-19T00:56:14  *** dannywilson has quit IRC
2015-02-19T00:56:22  *** nelsnelson has joined #openstack-infra
2015-02-19T00:56:28  *** amitgandhinz has joined #openstack-infra
2015-02-19T00:56:47  <openstackgerrit> Joshua Hesketh proposed openstack-infra/nodepool: Remove the need for zmq in proper demand calcs.  https://review.openstack.org/98306
2015-02-19T00:57:00  <jhesketh> clarkb: ^ updated the commit message to help a little (and commented)
2015-02-19T00:57:20  *** otter768 has joined #openstack-infra
2015-02-19T00:57:27  <ianw> clarkb: don't think there are duplicates in provider->images['name'] ?
2015-02-19T00:57:42  <clarkb> jhesketh: thank you
2015-02-19T00:57:46  *** ZZelle_ has quit IRC
2015-02-19T00:58:07  *** sdake__ has joined #openstack-infra
2015-02-19T00:58:10  *** bknudson has quit IRC
2015-02-19T00:58:23  <clarkb> ianw: well you want to map label -> image -> provider to only use images that are in use otherwise its just noise (though maybe that won't hurt here)
2015-02-19T00:58:51  <clarkb> ianw: and you can have mutiple entries for image -> provider from multiple labels. one example is the case of our 2 node envs they use the same images as our single node envs
2015-02-19T00:59:10  *** markvoelker has quit IRC
2015-02-19T01:00:57  <ianw> clarkb: right, but i think really the simplest thing to do is just create loggers for provider.image['name'] .  even if min-ready is 0 it's still there as a image build
2015-02-19T01:00:58  *** amitgandhinz has quit IRC
2015-02-19T01:01:34  *** sdake_ has quit IRC
2015-02-19T01:01:49  <clarkb> ianw: not talking about min ready here, we don't build images if they are not associated to a label regardless of the min ready
2015-02-19T01:01:54  *** otter768 has quit IRC
2015-02-19T01:02:01  *** sigmavirus24 is now known as sigmavirus24_awa
2015-02-19T01:02:01  <clarkb> since nodepool only acts on images that end up attached to jenkins with a label
2015-02-19T01:02:15  <clarkb> but you are probably right, that since its just logging config not a runtime optimization we can ignore that
2015-02-19T01:04:47  <ianw> i even called the fn _get_providers_and_images so i'm not sure what happened in between.  too much staring at yaml
2015-02-19T01:05:43  *** yamamoto has quit IRC
2015-02-19T01:07:38  *** vishy has quit IRC
2015-02-19T01:08:14  *** vishy has joined #openstack-infra
2015-02-19T01:10:16  *** patrickeast has joined #openstack-infra
2015-02-19T01:12:44  <jeblair> oh, i'm an hour late, but happy utc lunar new year
2015-02-19T01:13:01  *** sdake__ has quit IRC
2015-02-19T01:16:10  <openstackgerrit> Ghanshyam Mann proposed openstack-infra/project-config: Add non-voting job for Nova V2.1 API with neutron  https://review.openstack.org/151564
2015-02-19T01:16:51  <openstackgerrit> Joe Gordon proposed openstack-infra/devstack-gate: Set custom cpu_model for live_migrate  https://review.openstack.org/141530
2015-02-19T01:18:02  *** krotscheck has quit IRC
2015-02-19T01:19:27  *** MarkAtwood has joined #openstack-infra
2015-02-19T01:21:26  *** sputnik13 has quit IRC
2015-02-19T01:22:35  <asselin> jeblair, happy lunar year :)
2015-02-19T01:23:21  *** zz_dimtruck is now known as dimtruck
2015-02-19T01:23:42  <openstackgerrit> Ian Wienand proposed openstack-infra/nodepool: Add generate-log-config command  https://review.openstack.org/153904
2015-02-19T01:25:17  *** mayurig has joined #openstack-infra
2015-02-19T01:25:28  *** ivar-laz_ has quit IRC
2015-02-19T01:25:37  *** mayurig has quit IRC
2015-02-19T01:25:41  *** mtanino has quit IRC
2015-02-19T01:26:12  *** ivar-lazzaro has joined #openstack-infra
2015-02-19T01:28:17  *** ivar-lazzaro has quit IRC
2015-02-19T01:29:10  *** markvoelker has joined #openstack-infra
2015-02-19T01:29:17  *** ivar-lazzaro has joined #openstack-infra
2015-02-19T01:29:52  *** nelsnelson has quit IRC
2015-02-19T01:31:41  *** doug-fish has quit IRC
2015-02-19T01:36:22  *** EmilienM is now known as EmilienM|afk
2015-02-19T01:37:53  *** stevemar has joined #openstack-infra
2015-02-19T01:40:00  *** ivar-lazzaro has quit IRC
2015-02-19T01:41:01  *** crc32 has joined #openstack-infra
2015-02-19T01:41:07  *** ivar-lazzaro has joined #openstack-infra
2015-02-19T01:41:33  <zaro> HAPPY LUNAR NEW YEAR!
2015-02-19T01:41:59  <clarkb> zaro: I just saw that space jam dunk
2015-02-19T01:43:42  *** kgiusti has left #openstack-infra
2015-02-19T01:47:33  *** tiswanso has joined #openstack-infra
2015-02-19T01:49:51  *** tiswanso has quit IRC
2015-02-19T01:50:24  *** tiswanso has joined #openstack-infra
2015-02-19T01:53:03  <anteaya> zaro: and to you
2015-02-19T01:53:07  * anteaya is a sheep
2015-02-19T01:53:11  <anteaya> zaro: what are you?
2015-02-19T01:54:58  *** patrickeast has quit IRC
2015-02-19T01:55:52  *** devlaps has quit IRC
2015-02-19T02:00:39  *** claudiub has joined #openstack-infra
2015-02-19T02:03:08  *** krotscheck has joined #openstack-infra
2015-02-19T02:03:20  *** crc32 has quit IRC
2015-02-19T02:03:28  *** vilobhmm has quit IRC
2015-02-19T02:08:48  *** krtaylor has joined #openstack-infra
2015-02-19T02:10:32  <openstackgerrit> K Jonathan Harker proposed openstack-infra/nodepool: Reset the client object before creating the image  https://review.openstack.org/74943
2015-02-19T02:12:37  *** krotscheck has quit IRC
2015-02-19T02:13:07  *** pcrews has joined #openstack-infra
2015-02-19T02:13:46  *** krotscheck has joined #openstack-infra
2015-02-19T02:18:07  <anteaya> my goodness, two weeks of eating: https://en.wikipedia.org/wiki/Chinese_New_Year
2015-02-19T02:19:25  *** arosen1 has joined #openstack-infra
2015-02-19T02:20:23  <arosen1> Hi I was wondering if anyone could tell me why my CI is going to pypi.python.org and pypi.dfw.opentack.org here: http://logs2.aaronorosen.com/01/157201/4/check/dsvm-tempest-full-congress-nodepool/ab67d5f/logs/devstacklog.txt.gz#_2015-02-19_02_11_21_174
2015-02-19T02:20:51  <arosen1> In my nodepool configurations I don't see any more references to pypi.dfw
2015-02-19T02:21:28  <clarkb> arosen1: depending on how old your images are puppet sets up pypi.dfw as a default
2015-02-19T02:21:36  <clarkb> I don't know why pypi.python.org is also used yet
2015-02-19T02:22:28  *** ghostpl_ has joined #openstack-infra
2015-02-19T02:22:41  <clarkb> arosen1: look in /etc/pip.conf $HOME/.pip/pip.conf
2015-02-19T02:22:42  <arosen1> clarkb:  the only place I have it set is: scripts/configure_mirror.sh:NODEPOOL_PYPI_MIRROR=${NODEPOOL_PYPI_MIRROR:-https://pypi.python.org/simple/}
2015-02-19T02:22:53  <openstackgerrit> Matthew Treinish proposed openstack-infra/project-config: Fix if check in neutron lib forward testing definition  https://review.openstack.org/157235
2015-02-19T02:23:13  *** FallenPegasus has joined #openstack-infra
2015-02-19T02:23:24  <arosen1> clarkb:  i should look on one of the jenkin slaves?
2015-02-19T02:23:27  <mtreinish> jhesketh, clarkb, foobio, anteaya: ^^^ That should be super simple
2015-02-19T02:23:29  <clarkb> arosen1: yes
2015-02-19T02:24:05  <clarkb> mtreinish: I have used my discretion to fast approve
2015-02-19T02:24:28  <mtreinish> clarkb: cool, thanks
2015-02-19T02:24:42  <arosen1> clarkb:  ah okay i see: [global]
2015-02-19T02:24:43  <arosen1> index-url = http://pypi.dfw.openstack.org/simple/ there
2015-02-19T02:25:05  *** MarkAtwood has quit IRC
2015-02-19T02:25:05  *** FallenPegasus is now known as MarkAtwood
2015-02-19T02:26:08  <arosen1> clarkb:  seems weird because: http://paste.openstack.org/show/177303/
2015-02-19T02:26:33  <clarkb> arosen1: images up to date?
2015-02-19T02:26:57  <arosen1> clarkb:  hrm one thing i'm wondering is why  i only have one dib image here : http://paste.openstack.org/show/177304/
2015-02-19T02:27:07  *** ghostpl_ has quit IRC
2015-02-19T02:27:57  <arosen1> clarkb:  when I added this new provider it didn't create a dib image just a normal image though it's the same config as the other provider
2015-02-19T02:28:32  <clarkb> arosen1: ya the idea is you can use a single dib image
2015-02-19T02:29:00  <arosen1> clarkb:  okay let me delete the dib image and have it rebuild it and see if that fixes this.
2015-02-19T02:29:27  <clarkb> arosen1: this way you don' do a couple hundred image builds a day like us :) also you get better consistency across providers
2015-02-19T02:30:09  *** armax has quit IRC
2015-02-19T02:31:40  <arosen1> clarkb:  ah okay i see so you don't build a new dib image for multiple providers.
2015-02-19T02:31:56  <clarkb> nope, it does mean a few things get a little weird but overall its been a big win
2015-02-19T02:31:59  <arosen1> i went to update the image but i created a new provider to do so and i guess it pushed the same image.
2015-02-19T02:32:15  <arosen1> I added a new provider only because there is this gluster bug in our cloud
2015-02-19T02:32:19  <clarkb> ya it will upload the same qcow2
2015-02-19T02:32:26  <arosen1> cool thanks hopefully this will fix it.
2015-02-19T02:33:31  *** achanda has quit IRC
2015-02-19T02:38:55  *** otter768 has joined #openstack-infra
2015-02-19T02:40:11  *** salv-orlando has quit IRC
2015-02-19T02:40:30  <openstackgerrit> Merged openstack-infra/project-config: Fix if check in neutron lib forward testing definition  https://review.openstack.org/157235
2015-02-19T02:42:02  *** achanda has joined #openstack-infra
2015-02-19T02:45:13  *** koolhead17 has joined #openstack-infra
2015-02-19T02:46:03  *** achanda has quit IRC
2015-02-19T02:50:25  <arosen1> clarkb:  quick question. Rebuilding the image im seeing this error: INFO nodepool.image.build.devstack-trusty-dib: [ERROR] /tmp/image.ZsWcsDJr/mnt/opt/git/openstack-dev/devstack/stackrc:665 Could not determine host ip address. See local.conf for suggestions on setting HOST_IP.
2015-02-19T02:50:52  <clarkb> arosen1: I think there is a patch up to devstack to avoid that problem
2015-02-19T02:51:04  <clarkb> arosen1: otherwise check the HOST_IP stuff that devstack is looking for
2015-02-19T02:51:16  <arosen1> clarkb:  how do i set that for nodepool dib?
2015-02-19T02:51:38  <clarkb> arosen1: it will depend on what DEVSTACK is looking for
2015-02-19T02:51:42  <clarkb> er devstack
2015-02-19T02:52:23  *** dims_ has quit IRC
2015-02-19T02:52:49  <clarkb> its just a chroot so its your build node's interfaces that it iwll be looking at
2015-02-19T02:52:52  <arosen1> clarkb:  sorry i don't follow. This error is showing in the nodepool log.
2015-02-19T02:53:13  *** mriedem has joined #openstack-infra
2015-02-19T02:53:18  <clarkb> arosen1: yes, one of the things nodepool does is ask devstack for a list of files to cache. When it does that devstack expects to be able to determine your ip address
2015-02-19T02:53:43  *** cody-somerville has joined #openstack-infra
2015-02-19T02:53:44  <clarkb> arosen1: this is unnecessary for the functionality so there is a patch to devstack to stop requiring that, but as a workaround you just need to have devstack be able to determine the host's ip address
2015-02-19T02:54:12  <arosen1> clarkb: okay let me see want i need to do to make that happen.
2015-02-19T02:54:16  <arosen1> thanks.
2015-02-19T02:54:35  *** rkukura has quit IRC
2015-02-19T02:55:21  *** rkukura has joined #openstack-infra
2015-02-19T03:02:18  *** hyakuhei has joined #openstack-infra
2015-02-19T03:02:45  *** achanda has joined #openstack-infra
2015-02-19T03:03:43  <openstackgerrit> Adam Gandelman proposed openstack-infra/elastic-recheck: Add query for bug 1423427  https://review.openstack.org/157245
2015-02-19T03:03:44  <openstack> bug 1423427 in OpenStack Compute (nova) "os-baremetal-node ext relies on presence of specific ironic node properties " [Undecided,New] https://launchpad.net/bugs/1423427
2015-02-19T03:10:05  *** spzala has joined #openstack-infra
2015-02-19T03:15:18  *** harlowja_ is now known as harlowja_away
2015-02-19T03:15:34  *** amitgandhinz has joined #openstack-infra
2015-02-19T03:18:31  <arosen1> clarkb: do you know why you guys don't hit this bug ?
2015-02-19T03:19:34  <clarkb> devstack can figure out what our hosts ip is
2015-02-19T03:21:12  *** rmcall has quit IRC
2015-02-19T03:36:48  *** nelsnelson has joined #openstack-infra
2015-02-19T03:37:21  *** unicell1 has quit IRC
2015-02-19T03:38:18  <openstackgerrit> Matt Riedemann proposed openstack-infra/elastic-recheck: Cap irc < 11.1 due to ImportError  https://review.openstack.org/157248
2015-02-19T03:41:03  *** salv-orlando has joined #openstack-infra
2015-02-19T03:45:10  *** achanda has quit IRC
2015-02-19T03:47:50  <arosen1> clarkb:  ah i figured it out. It's because my host_ip is in the range of 10.0.0.0/24 as $FIXED_IPS
2015-02-19T03:48:17  <arosen1> clarkb:  i'm guessing there is no way to inject my own localrc or setting HOST_IP through nodepool.
2015-02-19T03:48:21  *** yamamoto has joined #openstack-infra
2015-02-19T03:48:27  <arosen1> i'd rather not have to re ip the box unless i don't have to .
2015-02-19T03:49:29  <openstackgerrit> Merged openstack-infra/elastic-recheck: Cap irc < 11.1 due to ImportError  https://review.openstack.org/157248
2015-02-19T03:49:53  *** Vivek_ has quit IRC
2015-02-19T03:50:56  *** spzala has quit IRC
2015-02-19T03:52:32  *** achanda has joined #openstack-infra
2015-02-19T03:52:53  *** dims__ has joined #openstack-infra
2015-02-19T03:52:56  *** koolhead17 has quit IRC
2015-02-19T03:54:25  *** yamahata has quit IRC
2015-02-19T03:54:31  <openstackgerrit> Adam Gandelman proposed openstack-infra/elastic-recheck: Add query for bug 1423427  https://review.openstack.org/157245
2015-02-19T03:54:32  <openstack> bug 1423427 in OpenStack Compute (nova) "os-baremetal-node ext relies on presence of specific ironic node properties " [Undecided,New] https://launchpad.net/bugs/1423427
2015-02-19T03:57:39  *** dims__ has quit IRC
2015-02-19T03:58:08  *** hyakuhei has left #openstack-infra
2015-02-19T03:59:20  *** tkelsey has joined #openstack-infra
2015-02-19T04:04:09  *** amotoki has joined #openstack-infra
2015-02-19T04:09:23  *** koolhead17 has joined #openstack-infra
2015-02-19T04:09:23  *** koolhead17 has joined #openstack-infra
2015-02-19T04:11:14  *** ghostpl_ has joined #openstack-infra
2015-02-19T04:11:48  *** otter768 has quit IRC
2015-02-19T04:13:25  *** teran has quit IRC
2015-02-19T04:14:20  <openstackgerrit> Matt Riedemann proposed openstack-infra/elastic-recheck: Uncap some test requirements  https://review.openstack.org/157251
2015-02-19T04:15:53  <openstackgerrit> Matt Riedemann proposed openstack-infra/elastic-recheck: Uncap some test requirements  https://review.openstack.org/157251
2015-02-19T04:16:04  *** ghostpl_ has quit IRC
2015-02-19T04:16:23  *** achanda has quit IRC
2015-02-19T04:16:53  <mordred> clarkb: gahhhhhh!!!!!!!
2015-02-19T04:19:14  <clarkb> indeed
2015-02-19T04:19:25  *** claudiub has quit IRC
2015-02-19T04:20:04  *** yamamoto has quit IRC
2015-02-19T04:22:30  <arosen1> clarkb:  doh i figured it out. I just needed to export HOST_IP="1..." in the process that  nodepoold was running to get it to use that value instead.
2015-02-19T04:23:36  <openstackgerrit> Matt Riedemann proposed openstack-infra/elastic-recheck: Add query for bug 1423427  https://review.openstack.org/157245
2015-02-19T04:23:37  <openstack> bug 1423427 in OpenStack Compute (nova) "os-baremetal-node ext relies on presence of specific ironic node properties " [Undecided,New] https://launchpad.net/bugs/1423427
2015-02-19T04:25:51  *** ivar-laz_ has joined #openstack-infra
2015-02-19T04:28:18  *** coolsvap_ is now known as coolsvap
2015-02-19T04:28:52  *** btran has quit IRC
2015-02-19T04:29:40  *** ivar-lazzaro has quit IRC
2015-02-19T04:30:22  *** nelsnelson has quit IRC
2015-02-19T04:30:34  *** ivar-laz_ has quit IRC
2015-02-19T04:31:04  *** salv-orlando has quit IRC
2015-02-19T04:34:20  <openstackgerrit> Merged openstack-infra/elastic-recheck: Add query for bug 1423427  https://review.openstack.org/157245
2015-02-19T04:34:21  <openstack> bug 1423427 in OpenStack Compute (nova) "os-baremetal-node ext relies on presence of specific ironic node properties " [High,Confirmed] https://launchpad.net/bugs/1423427
2015-02-19T04:36:14  *** koolhead17 has quit IRC
2015-02-19T04:38:32  *** changbl has joined #openstack-infra
2015-02-19T04:40:18  <mordred> clarkb: +++++++++
2015-02-19T04:40:19  *** woodster_ has quit IRC
2015-02-19T04:40:27  <mordred> (We miss you in the bar)
2015-02-19T04:41:29  <clarkb> so I hear
2015-02-19T04:41:38  <clarkb> mordred I appointed crinkle my proxy
2015-02-19T04:41:48  <clarkb> and instructed on proper cloud init stance
2015-02-19T04:42:00  *** markvoelker has quit IRC
2015-02-19T04:42:27  *** miqui has joined #openstack-infra
2015-02-19T04:42:35  *** markvoelker has joined #openstack-infra
2015-02-19T04:46:50  *** markvoelker has quit IRC
2015-02-19T04:47:05  <mordred> clarkb: I may be coming around .. You haven't taken the right stance on a different topic
2015-02-19T04:47:26  *** dimtruck is now known as zz_dimtruck
2015-02-19T04:47:48  <clarkb> whats the other thing
2015-02-19T04:51:46  <clarkb> the ansible stuff? I think I have come around. facter does the right thing
2015-02-19T04:52:11  *** BharatK has joined #openstack-infra
2015-02-19T04:52:13  *** amitgandhinz has quit IRC
2015-02-19T04:52:14  *** miqui has quit IRC
2015-02-19T04:53:39  *** miqui has joined #openstack-infra
2015-02-19T04:56:02  <mordred> clarkb: I'm not telling, I'm assuming we are in complete agreement
2015-02-19T04:56:05  <mordred> :)
2015-02-19T04:56:39  <clarkb> ha
2015-02-19T04:58:25  *** bhunter71 has quit IRC
2015-02-19T05:00:02  *** asselin_ has joined #openstack-infra
2015-02-19T05:01:29  *** camunoz has quit IRC
2015-02-19T05:02:17  <mordred> #goduke
2015-02-19T05:02:20  *** vigneshvar has joined #openstack-infra
2015-02-19T05:02:59  *** asselin_ has quit IRC
2015-02-19T05:05:13  *** mriedem has quit IRC
2015-02-19T05:05:50  *** coolsvap is now known as coolsvap_
2015-02-19T05:07:21  *** yamamoto has joined #openstack-infra
2015-02-19T05:09:59  *** garyh has quit IRC
2015-02-19T05:10:17  *** mriedem has joined #openstack-infra
2015-02-19T05:11:10  *** mriedem has quit IRC
2015-02-19T05:11:13  *** koolhead17 has joined #openstack-infra
2015-02-19T05:13:06  *** markvoelker has joined #openstack-infra
2015-02-19T05:14:46  *** camunoz has joined #openstack-infra
2015-02-19T05:15:09  *** coolsvap_ is now known as coolsvap
2015-02-19T05:16:55  *** achanda has joined #openstack-infra
2015-02-19T05:17:12  *** tkelsey has quit IRC
2015-02-19T05:17:34  *** markvoelker has quit IRC
2015-02-19T05:18:36  *** achanda has quit IRC
2015-02-19T05:18:52  *** achanda has joined #openstack-infra
2015-02-19T05:19:09  *** Sukhdev has joined #openstack-infra
2015-02-19T05:19:20  *** yamahata has joined #openstack-infra
2015-02-19T05:19:59  <dstufft> mordred: what dates are you in philly again
2015-02-19T05:20:01  <dstufft> I forget
2015-02-19T05:20:03  <dstufft> march something
2015-02-19T05:20:41  <mordred> dstufft: march 9-10
2015-02-19T05:23:49  <dstufft> mordred: cool thanks
2015-02-19T05:24:43  *** koolhead_ has joined #openstack-infra
2015-02-19T05:27:19  *** koolhead17 has quit IRC
2015-02-19T05:28:13  *** mfink_ has joined #openstack-infra
2015-02-19T05:30:54  *** ParsectiX has quit IRC
2015-02-19T05:31:09  *** ParsectiX has joined #openstack-infra
2015-02-19T05:33:00  <openstackgerrit> Khai Do proposed stackforge/gertty: Disable InsecureRequestWarning  https://review.openstack.org/157259
2015-02-19T05:36:37  *** gyee has quit IRC
2015-02-19T05:36:51  *** vigneshvar has quit IRC
2015-02-19T05:37:21  *** vigneshvar has joined #openstack-infra
2015-02-19T05:37:51  *** sandywalsh has joined #openstack-infra
2015-02-19T05:40:22  *** sandywalsh_ has quit IRC
2015-02-19T05:44:25  *** amotoki_ has joined #openstack-infra
2015-02-19T05:45:22  *** achanda has quit IRC
2015-02-19T05:46:01  <openstackgerrit> Igor Belikov proposed openstack-infra/jenkins-job-builder: Add 'readable-message' parameter to gerrit trigger  https://review.openstack.org/152641
2015-02-19T05:47:17  *** tkelsey has joined #openstack-infra
2015-02-19T05:47:26  *** amotoki has quit IRC
2015-02-19T05:54:56  *** zigo has quit IRC
2015-02-19T05:55:23  *** zigo has joined #openstack-infra
2015-02-19T05:56:48  *** achanda has joined #openstack-infra
2015-02-19T05:58:15  *** ParsectiX has quit IRC
2015-02-19T05:58:51  *** ParsectiX has joined #openstack-infra
2015-02-19T05:59:59  *** ghostpl_ has joined #openstack-infra
2015-02-19T06:00:28  *** woodster_ has joined #openstack-infra
2015-02-19T06:01:27  *** r1chardj0n3s is now known as r1chardj0n3s_afk
2015-02-19T06:04:43  *** ghostpl_ has quit IRC
2015-02-19T06:10:32  *** hamzy has quit IRC
2015-02-19T06:10:43  *** cnesa1 has quit IRC
2015-02-19T06:10:46  *** garyh has joined #openstack-infra
2015-02-19T06:12:41  *** otter768 has joined #openstack-infra
2015-02-19T06:12:43  *** Sukhdev has quit IRC
2015-02-19T06:13:52  *** markvoelker has joined #openstack-infra
2015-02-19T06:14:27  *** hamzy has joined #openstack-infra
2015-02-19T06:15:41  *** mfink_ has quit IRC
2015-02-19T06:15:55  *** salv-orlando has joined #openstack-infra
2015-02-19T06:17:13  *** otter768 has quit IRC
2015-02-19T06:17:32  *** mfink_ has joined #openstack-infra
2015-02-19T06:18:34  *** markvoelker has quit IRC
2015-02-19T06:21:40  *** Sukhdev has joined #openstack-infra
2015-02-19T06:22:22  *** tkelsey has quit IRC
2015-02-19T06:22:28  *** signed8bit has joined #openstack-infra
2015-02-19T06:23:25  *** signed8bit_ZZZzz has quit IRC
2015-02-19T06:26:19  *** belmoreira has joined #openstack-infra
2015-02-19T06:26:48  *** miqui has quit IRC
2015-02-19T06:28:37  <openstackgerrit> fumihiko kakuma proposed openstack-infra/devstack-gate: Allow for git base override  https://review.openstack.org/151034
2015-02-19T06:32:41  <openstackgerrit> fumihiko kakuma proposed openstack-infra/devstack-gate: post_test_hook is not executed when the gate test returns an error  https://review.openstack.org/148863
2015-02-19T06:34:51  *** dannywilson has joined #openstack-infra
2015-02-19T06:38:39  *** camunoz has quit IRC
2015-02-19T06:41:41  *** dannywilson has quit IRC
2015-02-19T06:42:14  *** dannywilson has joined #openstack-infra
2015-02-19T06:47:37  *** ildikov has quit IRC
2015-02-19T06:49:23  *** tkelsey has joined #openstack-infra
2015-02-19T06:51:26  *** yamahata has quit IRC
2015-02-19T06:52:08  *** yamahata has joined #openstack-infra
2015-02-19T06:52:10  <openstackgerrit> Merged openstack-infra/jenkins-job-builder: xUnit publisher: add option to skip if there are no tests files  https://review.openstack.org/134923
2015-02-19T06:52:26  *** harlowja_at_home has joined #openstack-infra
2015-02-19T07:03:25  *** tkelsey has quit IRC
2015-02-19T07:03:34  *** mrunge has joined #openstack-infra
2015-02-19T07:03:35  *** mrunge has quit IRC
2015-02-19T07:03:35  *** mrunge has joined #openstack-infra
2015-02-19T07:04:26  *** Sukhdev has quit IRC
2015-02-19T07:06:11  *** mrmartin has joined #openstack-infra
2015-02-19T07:08:32  *** afazekas has joined #openstack-infra
2015-02-19T07:08:48  *** hdd has joined #openstack-infra
2015-02-19T07:11:18  *** Ryan_Lane has joined #openstack-infra
2015-02-19T07:13:05  *** harlowja_at_home has quit IRC
2015-02-19T07:14:52  *** markvoelker has joined #openstack-infra
2015-02-19T07:16:44  *** Sukhdev has joined #openstack-infra
2015-02-19T07:17:43  *** doobi-sham-95717 has quit IRC
2015-02-19T07:19:01  *** chlong has quit IRC
2015-02-19T07:19:53  *** markvoelker has quit IRC
2015-02-19T07:20:14  *** arosen1 has quit IRC
2015-02-19T07:20:26  *** MarkAtwood has quit IRC
2015-02-19T07:21:09  *** MarkAtwood has joined #openstack-infra
2015-02-19T07:22:02  *** Ryan_Lane has quit IRC
2015-02-19T07:26:06  *** salv-orlando has quit IRC
2015-02-19T07:29:38  *** ildikov has joined #openstack-infra
2015-02-19T07:30:48  *** dims__ has joined #openstack-infra
2015-02-19T07:31:26  *** zz_dimtruck is now known as dimtruck
2015-02-19T07:32:38  *** ZZelle has quit IRC
2015-02-19T07:33:04  *** ZZelle has joined #openstack-infra
2015-02-19T07:34:11  *** Sukhdev has quit IRC
2015-02-19T07:35:14  *** dims__ has quit IRC
2015-02-19T07:37:44  *** hdd has quit IRC
2015-02-19T07:39:06  *** cipcosma has joined #openstack-infra
2015-02-19T07:48:30  *** sputnik13 has joined #openstack-infra
2015-02-19T07:48:44  *** ghostpl_ has joined #openstack-infra
2015-02-19T07:49:19  *** sdake_ has joined #openstack-infra
2015-02-19T07:49:35  *** cinerama has quit IRC
2015-02-19T07:53:24  *** ghostpl_ has quit IRC
2015-02-19T07:53:46  *** vponomaryov has quit IRC
2015-02-19T07:54:26  *** vponomaryov has joined #openstack-infra
2015-02-19T07:54:39  <openstackgerrit> Andreas Jaeger proposed openstack-infra/project-config: Bandit is a stackforge project  https://review.openstack.org/156774
2015-02-19T07:55:04  *** jgallard__ has joined #openstack-infra
2015-02-19T07:59:20  <openstackgerrit> Merged openstack-infra/project-config: VPNaaS: make functional test voting  https://review.openstack.org/156281
2015-02-19T08:03:03  *** harlowja_away has quit IRC
2015-02-19T08:07:21  *** dimtruck is now known as zz_dimtruck
2015-02-19T08:08:41  *** doude has quit IRC
2015-02-19T08:08:47  *** arxcruz has joined #openstack-infra
2015-02-19T08:09:23  *** cnesa has joined #openstack-infra
2015-02-19T08:09:31  *** sergsh has joined #openstack-infra
2015-02-19T08:13:21  *** doude has joined #openstack-infra
2015-02-19T08:13:37  *** otter768 has joined #openstack-infra
2015-02-19T08:15:53  *** markvoelker has joined #openstack-infra
2015-02-19T08:17:56  *** otter768 has quit IRC
2015-02-19T08:19:54  *** Ala has joined #openstack-infra
2015-02-19T08:20:32  *** markvoelker has quit IRC
2015-02-19T08:21:41  *** mpavone has joined #openstack-infra
2015-02-19T08:22:19  *** stevemar has quit IRC
2015-02-19T08:23:13  *** HeOS has quit IRC
2015-02-19T08:23:47  *** scheuran has joined #openstack-infra
2015-02-19T08:24:38  *** yamamoto has quit IRC
2015-02-19T08:25:10  *** jcoufal has joined #openstack-infra
2015-02-19T08:25:11  *** salv-orlando has joined #openstack-infra
2015-02-19T08:29:21  *** achanda has quit IRC
2015-02-19T08:29:23  *** andreykurilin_ has joined #openstack-infra
2015-02-19T08:29:47  *** achanda has joined #openstack-infra
2015-02-19T08:29:53  *** sdake__ has joined #openstack-infra
2015-02-19T08:30:10  *** achanda has quit IRC
2015-02-19T08:30:19  *** woodster_ has quit IRC
2015-02-19T08:33:22  *** sdake_ has quit IRC
2015-02-19T08:35:33  *** koolhead_ has quit IRC
2015-02-19T08:36:30  *** luqas___ has quit IRC
2015-02-19T08:41:05  *** dtantsur|afk is now known as dtantsur
2015-02-19T08:41:25  <openstackgerrit> Merged openstack-infra/jenkins-job-builder: Add support for 'All Nodes For Label Factory'  https://review.openstack.org/149359
2015-02-19T08:42:36  *** jistr has joined #openstack-infra
2015-02-19T08:43:17  *** sergsh has quit IRC
2015-02-19T08:43:54  *** hamzy has quit IRC
2015-02-19T08:44:30  *** hamzy has joined #openstack-infra
2015-02-19T08:44:59  *** zz_avozza is now known as zz_zz_avozza
2015-02-19T08:45:08  *** sergsh has joined #openstack-infra
2015-02-19T08:47:22  *** luqas___ has joined #openstack-infra
2015-02-19T08:48:43  *** cinerama has joined #openstack-infra
2015-02-19T08:48:53  *** markus_z has joined #openstack-infra
2015-02-19T08:50:45  *** MaxV has joined #openstack-infra
2015-02-19T08:52:12  *** deepakcs has joined #openstack-infra
2015-02-19T08:52:15  <deepakcs> clarkb, ping
2015-02-19T08:52:18  *** salv-orlando has quit IRC
2015-02-19T08:52:30  *** salv-orlando has joined #openstack-infra
2015-02-19T08:52:34  <AJaeger> deepakcs, I expect clarkb to sleep...
2015-02-19T08:52:51  *** teran has joined #openstack-infra
2015-02-19T08:52:57  <deepakcs> AJaeger, sure :) I wanted to see if someone has more details on https://review.openstack.org/#/c/157213/
2015-02-19T08:53:25  <deepakcs> AJaeger, you seem to +2 it.. myself and BharatK are working on the glusterfs job. We are not clear on what 'partway' in the commit msg mean ?
2015-02-19T08:53:43  <AJaeger> deepakcs, just check the experimental queue at http://status.openstack.org/zuul/
2015-02-19T08:53:51  <deepakcs> AJaeger, ok.. checking now
2015-02-19T08:53:58  *** teran_ has joined #openstack-infra
2015-02-19T08:54:07  <AJaeger> there'S a job running for 40+ hours - and that because of glusterfs
2015-02-19T08:55:49  <deepakcs> AJaeger, is it bcos of 'check experimental' in https://review.openstack.org/152401 ?
2015-02-19T08:56:07  * deepakcs still trying to understand why it would take 40+ hours. local tempest runs go fine
2015-02-19T08:56:07  <AJaeger> deepakcs, also scrollback or read the public logs http://eavesdrop.openstack.org/irclogs/%23openstack-infra/%23openstack-infra.2015-02-19.log for details
2015-02-19T08:56:55  *** jp_at_hp has joined #openstack-infra
2015-02-19T08:57:05  *** teran has quit IRC
2015-02-19T08:57:20  <AJaeger> deepakcs, as said in the commit message: This comes from "check experimental" and somehow the glusterfs job stops in the middle and then gets restarted - in an endless loop
2015-02-19T08:57:55  <AJaeger> We can't have that ;( Please talk with clarkb or foobio at US time again on how to fix this.
2015-02-19T08:58:32  <deepakcs> AJaeger, i read the logs, it says its failign in the object tests
2015-02-19T08:58:37  *** andreykurilin_ has quit IRC
2015-02-19T08:58:59  <AJaeger> deepakcs, I can't help further here...
2015-02-19T08:59:19  <deepakcs> AJaeger, any idea how to add a job to run tempest volume tests only ?
2015-02-19T09:00:09  <AJaeger> deepakcs, there're ways to limit what tempest tests are run, check what other jobs do - in project-config/jenkins/jobs/*
2015-02-19T09:00:20  <deepakcs> AJaeger, thanks, will do
2015-02-19T09:03:04  *** xyang1 has quit IRC
2015-02-19T09:03:09  *** jlibosva has joined #openstack-infra
2015-02-19T09:05:11  *** jcoufal_ has joined #openstack-infra
2015-02-19T09:07:19  <AJaeger> deepakcs, the top most experimental job just got into the next iteration ;(
2015-02-19T09:07:42  <AJaeger> and I now approved that change to get it stopped
2015-02-19T09:08:01  <AJaeger> deepakcs, once you're sure everything is working as it should, we can enable the test again
2015-02-19T09:08:12  *** jcoufal has quit IRC
2015-02-19T09:08:19  <deepakcs> AJaeger, you mean https://review.openstack.org/#/c/141424/ is running for 40+ hours. I am still trying to understand how is that related to glusterfs job
2015-02-19T09:08:41  <AJaeger> deepakcs, look at http://status.openstack.org/zuul/
2015-02-19T09:08:49  <AJaeger> 141424 is the first change
2015-02-19T09:09:02  <AJaeger> If you monitor the glusterfs job, you see it'S the only job that has not passed
2015-02-19T09:09:34  <AJaeger> And if you look at it over time, you see that it runs for a long time - and then starts again, as just now
2015-02-19T09:10:03  *** dizquierdo has joined #openstack-infra
2015-02-19T09:10:32  <AJaeger> I can't help you debug why this happens - but what happens is that the glusterfs job suddenly dies and then zuul starts it again and again and again - now since 40 hours.
2015-02-19T09:11:02  <deepakcs> AJaeger, i see 141424 change, but what do I need to do to monitor glusterfs job ? The zuul links points me back to the patch
2015-02-19T09:11:35  <AJaeger> deepakcs, check the link of the glusterfs job, it's currently: https://jenkins07.openstack.org/job/check-tempest-dsvm-full-glusterfs-centos7/36/
2015-02-19T09:11:49  <AJaeger> Or check one of the others - each glusterfs job is a link
2015-02-19T09:11:55  *** mpaolino has joined #openstack-infra
2015-02-19T09:12:21  *** ghostpl_ has joined #openstack-infra
2015-02-19T09:12:57  *** vigneshvar has quit IRC
2015-02-19T09:13:00  <deepakcs> AJaeger, clicking on check-tempest-dsvm-full-glusterfs-centos7 #36: None  gets me to the same page again :)
2015-02-19T09:13:10  <openstackgerrit> Merged openstack-infra/project-config: Remove the tempest glusterfs job  https://review.openstack.org/157213
2015-02-19T09:13:13  <deepakcs> let me check the console link
2015-02-19T09:13:59  <AJaeger> deepakcs, yes, in jenkins you need to click on console output
2015-02-19T09:14:03  *** vigneshvar has joined #openstack-infra
2015-02-19T09:14:47  <deepakcs> AJaeger, thanks, looking at that.. new to jenkins/infra... so trying to make my way to the error. I still haven't been able to see the actual error on the node that causes zuul to think its gone and hence restartsit
2015-02-19T09:15:17  <AJaeger> deepakcs, there are more experimental glusterfs jobs running if you need more data ;)
2015-02-19T09:16:03  <deepakcs> AJaeger, yeah i am still a bit lost on what exactly is happening inside the job. Shall i just start from the jenkins dashboard to get a list of all experimental glustefs jobs ?
2015-02-19T09:16:04  <AJaeger> deepakcs, you might need to discuss with clarkb and foobio later today (US time - so UTC 15:00 or later).
2015-02-19T09:16:18  <deepakcs> AJaeger, ok will do
2015-02-19T09:16:36  <AJaeger> start from the zuul page - we have several jenkins running and zuul is the best way to guide you
2015-02-19T09:16:53  *** markvoelker has joined #openstack-infra
2015-02-19T09:18:13  *** skolekonov has joined #openstack-infra
2015-02-19T09:18:57  *** dannywilson has quit IRC
2015-02-19T09:19:40  *** derekh has joined #openstack-infra
2015-02-19T09:21:43  *** markvoelker has quit IRC
2015-02-19T09:27:29  *** ildikov has quit IRC
2015-02-19T09:29:53  *** salv-orlando has quit IRC
2015-02-19T09:31:44  *** yamamoto has joined #openstack-infra
2015-02-19T09:33:09  *** salv-orlando has joined #openstack-infra
2015-02-19T09:34:59  *** ssam2 has joined #openstack-infra
2015-02-19T09:35:32  *** HeOS has joined #openstack-infra
2015-02-19T09:36:42  *** sdake_ has joined #openstack-infra
2015-02-19T09:39:29  *** yamahata has quit IRC
2015-02-19T09:40:01  *** ildikov has joined #openstack-infra
2015-02-19T09:40:19  *** sdake__ has quit IRC
2015-02-19T09:43:27  *** mpaolino has quit IRC
2015-02-19T09:47:11  *** viktors|afk is now known as viktors
2015-02-19T09:50:59  *** yamamoto has quit IRC
2015-02-19T09:52:34  *** zz_zz_avozza is now known as avozza
2015-02-19T09:54:47  *** hashar has joined #openstack-infra
2015-02-19T09:55:26  <mescanef> hi there, ihve created a patch for adding new repository on stackforge for fuel plugin (https://review.openstack.org/#/c/153173/)
2015-02-19T09:55:34  <mescanef> would like to be added to the core-group
2015-02-19T09:55:43  <mescanef> please add me :-)
2015-02-19T09:56:30  *** mpaolino has joined #openstack-infra
2015-02-19T10:00:36  *** yamamoto has joined #openstack-infra
2015-02-19T10:01:44  <AJaeger> mescanef, which repository exactly and what's your email?
2015-02-19T10:02:09  <mescanef> AJaeger: fuel-plugin-contrail
2015-02-19T10:02:15  <mescanef> AJaeger: mmatuszkowiak@mirantis.com
2015-02-19T10:02:38  <mescanef> "stackforge/fuel-plugin-contrail" ;-)
2015-02-19T10:03:05  <AJaeger> mescanef, Let's ask foobio or clarkb to do this later today (US time). They normally scroll back and should see the above lines.
2015-02-19T10:03:19  <mescanef> :-)) ok TY
2015-02-19T10:08:36  *** teran_ has quit IRC
2015-02-19T10:10:02  *** yamamoto has quit IRC
2015-02-19T10:13:39  *** hashar_ has joined #openstack-infra
2015-02-19T10:14:04  *** amotoki_ has quit IRC
2015-02-19T10:14:28  *** otter768 has joined #openstack-infra
2015-02-19T10:17:08  *** hashar has quit IRC
2015-02-19T10:17:39  *** markvoelker has joined #openstack-infra
2015-02-19T10:18:23  *** amotoki has joined #openstack-infra
2015-02-19T10:18:46  <cody-somerville> Hey folks.
2015-02-19T10:19:10  <cody-somerville> Are you seeing timeouts on sshing into nodes in hp cloud on spawn?
2015-02-19T10:19:37  *** otter768 has quit IRC
2015-02-19T10:21:00  *** dtantsur is now known as dtantsur|bbl
2015-02-19T10:21:11  *** ihrachyshka has joined #openstack-infra
2015-02-19T10:21:38  *** koolhead17 has joined #openstack-infra
2015-02-19T10:21:50  *** e0ne has joined #openstack-infra
2015-02-19T10:21:53  *** yamamoto has joined #openstack-infra
2015-02-19T10:22:17  *** markvoelker has quit IRC
2015-02-19T10:22:53  *** briancline has quit IRC
2015-02-19T10:22:53  *** hogepodge has quit IRC
2015-02-19T10:23:53  *** briancline has joined #openstack-infra
2015-02-19T10:24:25  *** teran has joined #openstack-infra
2015-02-19T10:24:29  *** hogepodge has joined #openstack-infra
2015-02-19T10:28:47  *** teran has quit IRC
2015-02-19T10:31:39  *** yamamoto has quit IRC
2015-02-19T10:35:52  *** nikil89_ has joined #openstack-infra
2015-02-19T10:35:52  *** nikil89_ is now known as naggappan
2015-02-19T10:38:27  *** rlandy has joined #openstack-infra
2015-02-19T10:39:02  *** e0ne is now known as e0ne_
2015-02-19T10:39:41  *** e0ne_ is now known as e0ne
2015-02-19T10:39:52  *** yamamoto has joined #openstack-infra
2015-02-19T10:40:12  *** ldnunes has joined #openstack-infra
2015-02-19T10:40:45  <openstackgerrit> Andreas Jaeger proposed openstack-infra/project-config: Updates training guides jobs  https://review.openstack.org/152118
2015-02-19T10:42:46  *** rfolco has joined #openstack-infra
2015-02-19T10:45:57  *** jcoufal_ has quit IRC
2015-02-19T10:46:11  *** jcoufal has joined #openstack-infra
2015-02-19T10:46:19  *** yfried_ is now known as yfried|afk
2015-02-19T10:46:55  *** pelix has joined #openstack-infra
2015-02-19T10:47:55  *** yamamoto has quit IRC
2015-02-19T10:48:15  *** yfried|afk is now known as yfried_
2015-02-19T10:50:06  *** dims__ has joined #openstack-infra
2015-02-19T10:52:54  *** hashar_ has quit IRC
2015-02-19T10:53:34  *** e0ne is now known as e0ne_
2015-02-19T10:54:47  *** e0ne_ is now known as e0ne
2015-02-19T10:54:47  *** dims__ has quit IRC
2015-02-19T11:03:49  *** teran has joined #openstack-infra
2015-02-19T11:04:06  *** yfried_ is now known as yfried|afk
2015-02-19T11:05:39  *** mpaolino has quit IRC
2015-02-19T11:07:02  *** avozza is now known as zz_avozza
2015-02-19T11:08:56  <openstackgerrit> Merged openstack-infra/elastic-recheck: Uncap some test requirements  https://review.openstack.org/157251
2015-02-19T11:11:26  *** salv-orlando has quit IRC
2015-02-19T11:12:00  *** salv-orlando has joined #openstack-infra
2015-02-19T11:13:37  <openstackgerrit> yolanda.robla proposed openstack-infra/shade: Add hasExtension method to check cloud capabilities  https://review.openstack.org/156954
2015-02-19T11:14:35  *** hashar has joined #openstack-infra
2015-02-19T11:14:55  *** koolhead17 has quit IRC
2015-02-19T11:16:15  *** zz_avozza is now known as avozza
2015-02-19T11:17:16  <openstackgerrit> Sergey Lukjanov proposed openstack-infra/project-config: Clone using git.o.o instead of directly from gerrit  https://review.openstack.org/157330
2015-02-19T11:17:39  *** kashyap has left #openstack-infra
2015-02-19T11:18:41  *** markvoelker has joined #openstack-infra
2015-02-19T11:19:33  *** mpaolino has joined #openstack-infra
2015-02-19T11:19:34  *** hichihara has quit IRC
2015-02-19T11:20:48  *** jedimike has joined #openstack-infra
2015-02-19T11:21:38  *** mpaolino has quit IRC
2015-02-19T11:23:16  *** markvoelker has quit IRC
2015-02-19T11:23:38  <openstackgerrit> yolanda.robla proposed openstack-infra/infra-specs: Spec for nodepool image update retries  https://review.openstack.org/155305
2015-02-19T11:24:16  *** yfried|afk is now known as yfried_
2015-02-19T11:31:20  *** salv-orlando has quit IRC
2015-02-19T11:31:28  *** aysyd has joined #openstack-infra
2015-02-19T11:31:59  *** salv-orlando has joined #openstack-infra
2015-02-19T11:32:45  <openstackgerrit> yolanda.robla proposed openstack-infra/infra-specs: Add nodepool image testing spec.  https://review.openstack.org/139598
2015-02-19T11:34:46  *** e0ne is now known as e0ne_
2015-02-19T11:38:57  *** deepakcs has quit IRC
2015-02-19T11:40:25  *** pc_m has joined #openstack-infra
2015-02-19T11:40:37  *** hashar_ has joined #openstack-infra
2015-02-19T11:41:47  *** chlong has joined #openstack-infra
2015-02-19T11:43:35  *** hashar has quit IRC
2015-02-19T11:44:45  *** nicodemos has joined #openstack-infra
2015-02-19T11:49:37  *** vigneshvar has quit IRC
2015-02-19T11:49:39  *** marcusvrn1 has quit IRC
2015-02-19T11:49:42  *** enikanorov_ has quit IRC
2015-02-19T11:50:11  *** enikanorov has joined #openstack-infra
2015-02-19T11:50:28  *** yamamoto has joined #openstack-infra
2015-02-19T11:50:44  *** marcusvrn has joined #openstack-infra
2015-02-19T11:51:49  *** alexpilotti has joined #openstack-infra
2015-02-19T11:52:49  *** marcusvrn1 has joined #openstack-infra
2015-02-19T11:55:34  *** yamamoto has quit IRC
2015-02-19T11:56:22  *** marcusvrn has quit IRC
2015-02-19T11:56:41  *** dtantsur|bbl is now known as dtantsur
2015-02-19T11:59:31  *** adalba has quit IRC
2015-02-19T11:59:45  *** adalba has joined #openstack-infra
2015-02-19T12:06:57  *** agentle_ has quit IRC
2015-02-19T12:08:03  *** koolhead17 has joined #openstack-infra
2015-02-19T12:08:58  *** oomichi has joined #openstack-infra
2015-02-19T12:09:26  *** oomichi has quit IRC
2015-02-19T12:09:49  <openstackgerrit> Merged openstack-infra/jenkins-job-builder: Add 'readable-message' parameter to gerrit trigger  https://review.openstack.org/152641
2015-02-19T12:10:21  *** mwagner_lap has quit IRC
2015-02-19T12:10:31  *** e0ne_ is now known as e0ne
2015-02-19T12:15:22  *** otter768 has joined #openstack-infra
2015-02-19T12:16:29  *** ihrachyshka has quit IRC
2015-02-19T12:16:45  *** yamamoto has joined #openstack-infra
2015-02-19T12:19:33  *** dannywilson has joined #openstack-infra
2015-02-19T12:19:48  *** markvoelker has joined #openstack-infra
2015-02-19T12:20:26  *** otter768 has quit IRC
2015-02-19T12:21:46  *** yfried_ is now known as yfried|afk
2015-02-19T12:22:44  *** woodster_ has joined #openstack-infra
2015-02-19T12:23:52  *** dannywilson has quit IRC
2015-02-19T12:24:52  *** markvoelker has quit IRC
2015-02-19T12:28:22  *** hashar_ has quit IRC
2015-02-19T12:30:35  *** doude has quit IRC
2015-02-19T12:31:22  *** salv-orlando has quit IRC
2015-02-19T12:31:40  *** hashar has joined #openstack-infra
2015-02-19T12:31:59  *** salv-orlando has joined #openstack-infra
2015-02-19T12:33:34  *** koolhead17 has quit IRC
2015-02-19T12:33:51  *** doude has joined #openstack-infra
2015-02-19T12:40:31  *** salv-orlando has quit IRC
2015-02-19T12:40:48  *** cdent has joined #openstack-infra
2015-02-19T12:41:23  *** salv-orlando has joined #openstack-infra
2015-02-19T12:42:43  *** avozza is now known as zz_avozza
2015-02-19T12:43:04  *** psedlak has quit IRC
2015-02-19T12:43:40  *** amotoki has quit IRC
2015-02-19T12:44:18  *** dims__ has joined #openstack-infra
2015-02-19T12:45:02  *** psedlak has joined #openstack-infra
2015-02-19T12:45:06  *** yfried|afk is now known as yfried_
2015-02-19T12:49:28  *** salv-orlando has quit IRC
2015-02-19T12:53:58  *** tiswanso has quit IRC
2015-02-19T12:54:27  *** dkranz has quit IRC
2015-02-19T12:57:17  *** spredzy|afk is now known as spredzy
2015-02-19T12:58:40  *** Hal has joined #openstack-infra
2015-02-19T12:58:44  *** EmilienM|afk is now known as EmilienM
2015-02-19T12:58:59  *** kashyap has joined #openstack-infra
2015-02-19T12:59:04  *** Hal is now known as Guest43224
2015-02-19T13:01:30  *** marcusvrn has joined #openstack-infra
2015-02-19T13:02:04  *** yfried_ is now known as yfried|afk
2015-02-19T13:02:52  *** markvoelker has joined #openstack-infra
2015-02-19T13:03:47  <kashyap> rfolco, Redirecting discussion from #openstack-dev,
2015-02-19T13:04:03  *** marcusvrn1 has quit IRC
2015-02-19T13:04:13  <kashyap> Yeah - for minimal installs - I can't recommend enough `virt-builder`, I personally think it is a lot more secure and convenient than 'disk-image-builder'
2015-02-19T13:04:50  <kashyap> Here's some convenient CLI on usage - https://kashyapc.fedorapeople.org/virt/virt-builder-usage.txt
2015-02-19T13:05:10  *** alexpilotti has quit IRC
2015-02-19T13:05:41  *** sputnik13 has quit IRC
2015-02-19T13:06:25  <rfolco> kashyap, hmm perhaps its a good time for moving to f21 ?
2015-02-19T13:06:50  <kashyap> rfolco, Sure. I've been testing/developing (and DevStack too) on F21 for about 6 months already
2015-02-19T13:07:23  <kashyap> rfolco, Especially, for a server/minimal-core style stuff, it should not be much disruptive at all
2015-02-19T13:07:27  <kashyap> s/much/any
2015-02-19T13:08:05  *** vigneshvar has joined #openstack-infra
2015-02-19T13:09:33  <openstackgerrit> Nikita Konovalov proposed openstack-infra/storyboard: Session per request  https://review.openstack.org/155751
2015-02-19T13:09:47  <rfolco> kashyap, nice, the reason for rebuilding my base image is that f20 updates repo is broken for perl... and I had pre-cached many packages from the updates repo so I can't downgrade all them now...are your aware of that problem ?
2015-02-19T13:10:45  *** zz_avozza is now known as avozza
2015-02-19T13:11:33  *** koolhead17 has joined #openstack-infra
2015-02-19T13:11:34  *** koolhead17 has joined #openstack-infra
2015-02-19T13:11:51  <kashyap> rfolco, 1 sec, having a parallel discussion elsewhere on #openstack-nova
2015-02-19T13:12:38  *** BharatK has quit IRC
2015-02-19T13:13:08  <rfolco> kashyap, sure :)
2015-02-19T13:16:32  <BobBall> Does Zuul have this magic way of finding changesets that it should check but it hasn't voted on?  (i.e. missed changesets)... My external CI seems to have queued up a whole bunch of old jobs from openstack-dev/sandbox without there being resubmits of the jobs or comments
2015-02-19T13:17:09  <openstackgerrit> Merged openstack-infra/release-tools: Skip tag and push if tag exists  https://review.openstack.org/151282
2015-02-19T13:19:17  <BobBall> oh - ignore me... it was a "depends on" chain. Ouch.
2015-02-19T13:21:00  *** mbacchi has joined #openstack-infra
2015-02-19T13:21:50  *** Guest43224 has quit IRC
2015-02-19T13:22:12  *** yfried|afk is now known as yfried_
2015-02-19T13:23:45  *** cnesa has quit IRC
2015-02-19T13:23:56  *** dkliban_afk is now known as dkliban
2015-02-19T13:24:02  *** cnesa has joined #openstack-infra
2015-02-19T13:27:33  *** bswartz has quit IRC
2015-02-19T13:28:09  *** cnesa has quit IRC
2015-02-19T13:29:32  *** kgiusti has joined #openstack-infra
2015-02-19T13:31:33  <openstackgerrit> Merged openstack-infra/storyboard: Removed unsupported python versions from setup.cfg  https://review.openstack.org/154582
2015-02-19T13:32:13  *** yfried_ is now known as yfried|afk
2015-02-19T13:34:26  *** nicodemos has quit IRC
2015-02-19T13:37:05  *** jistr_ has joined #openstack-infra
2015-02-19T13:37:12  <kashyap> rfolco, I don't know about any Perl broken updates
2015-02-19T13:37:51  *** ociuhandu has joined #openstack-infra
2015-02-19T13:38:22  <rfolco> kashyap, not sure if it affects ppc64 only...
2015-02-19T13:39:25  *** jistr has quit IRC
2015-02-19T13:42:17  *** markvoelker_ has joined #openstack-infra
2015-02-19T13:42:18  *** markvoelker has quit IRC
2015-02-19T13:45:28  *** yfried|afk is now known as yfried_
2015-02-19T13:45:53  *** Hal has joined #openstack-infra
2015-02-19T13:46:17  *** Hal is now known as Guest21555
2015-02-19T13:46:19  *** koolhead17 has quit IRC
2015-02-19T13:46:53  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Updated library versions.  https://review.openstack.org/155942
2015-02-19T13:47:03  *** hogepodge has quit IRC
2015-02-19T13:47:03  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Added root state  https://review.openstack.org/155943
2015-02-19T13:47:36  <openstackgerrit> Thierry Carrez proposed openstack-infra/python-storyboardclient: Improved exception handling  https://review.openstack.org/153217
2015-02-19T13:48:32  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Session checks resolution against session info service.  https://review.openstack.org/155944
2015-02-19T13:48:43  *** briancline has quit IRC
2015-02-19T13:48:53  *** jistr_ is now known as jistr
2015-02-19T13:49:28  *** briancline has joined #openstack-infra
2015-02-19T13:49:35  *** hogepodge has joined #openstack-infra
2015-02-19T13:50:06  *** salv-orlando has joined #openstack-infra
2015-02-19T13:51:07  *** yamamoto has quit IRC
2015-02-19T13:52:01  <openstackgerrit> Merged openstack-infra/python-storyboardclient: Python34 Fixes.  https://review.openstack.org/157192
2015-02-19T13:52:10  *** sigmavirus24_awa is now known as sigmavirus24
2015-02-19T13:52:12  <openstackgerrit> Merged openstack-infra/python-storyboardclient: Removed py33, pypy from python-storyboardclient  https://review.openstack.org/157193
2015-02-19T13:52:38  *** ihrachyshka has joined #openstack-infra
2015-02-19T13:55:36  <openstackgerrit> Aleksey Ripinen proposed openstack-infra/storyboard: Split auth in api and change user_tokens  https://review.openstack.org/153591
2015-02-19T13:55:52  *** mkerrin has quit IRC
2015-02-19T13:56:32  *** jklare has quit IRC
2015-02-19T13:57:52  *** hashar has quit IRC
2015-02-19T13:57:57  *** BharatK has joined #openstack-infra
2015-02-19T13:58:08  *** jklare has joined #openstack-infra
2015-02-19T13:59:56  *** claudiub has joined #openstack-infra
2015-02-19T14:00:44  *** bhunter71 has joined #openstack-infra
2015-02-19T14:01:09  <openstackgerrit> Aleksey Ripinen proposed openstack-infra/storyboard: Split auth in api and change user_tokens  https://review.openstack.org/153591
2015-02-19T14:01:29  *** bswartz has joined #openstack-infra
2015-02-19T14:02:22  *** jklare has quit IRC
2015-02-19T14:02:26  <BobBall> How do I specify credentials for zuul-swift-upload-logs?  Seems I need to set environment variables like a HMAC but I can't find in the infra repos where this is created
2015-02-19T14:03:01  *** sdake_ has quit IRC
2015-02-19T14:03:39  *** jklare has joined #openstack-infra
2015-02-19T14:04:07  *** vigneshvar has quit IRC
2015-02-19T14:04:31  *** mpaolino has joined #openstack-infra
2015-02-19T14:07:42  *** pblaho has quit IRC
2015-02-19T14:08:17  *** BharatK has quit IRC
2015-02-19T14:08:41  *** naggappan has quit IRC
2015-02-19T14:09:22  *** dkranz has joined #openstack-infra
2015-02-19T14:11:22  *** weshay has joined #openstack-infra
2015-02-19T14:11:24  *** koolhead17 has joined #openstack-infra
2015-02-19T14:12:56  *** ddieterl_ has quit IRC
2015-02-19T14:15:37  *** xyang1 has joined #openstack-infra
2015-02-19T14:16:21  *** otter768 has joined #openstack-infra
2015-02-19T14:20:33  *** dustins has joined #openstack-infra
2015-02-19T14:20:49  *** BharatK has joined #openstack-infra
2015-02-19T14:20:53  *** otter768 has quit IRC
2015-02-19T14:23:25  <anteaya> wznoinsk: are you in the nova meeting?
2015-02-19T14:23:42  <wznoinsk> I am
2015-02-19T14:23:58  <anteaya> okay I hadn't seen your hand up, so I thought I would check
2015-02-19T14:27:48  *** mriedem has joined #openstack-infra
2015-02-19T14:27:58  *** gulic has joined #openstack-infra
2015-02-19T14:28:53  *** ildikov has quit IRC
2015-02-19T14:30:20  *** woodster_ has quit IRC
2015-02-19T14:30:29  <openstackgerrit> Max Rasskazov proposed openstack-infra/jenkins-job-builder: Add support of multiple credentials for ssh-agent-credentials wrapper  https://review.openstack.org/156681
2015-02-19T14:31:58  <openstackgerrit> Merged openstack/requirements: Remove configobj  https://review.openstack.org/144363
2015-02-19T14:32:43  *** EmilienM is now known as EmilienM|afk
2015-02-19T14:34:39  <openstackgerrit> Merged openstack/requirements: remove python-openstackclient  https://review.openstack.org/155991
2015-02-19T14:36:38  *** hogepodge has quit IRC
2015-02-19T14:37:28  *** briancline has quit IRC
2015-02-19T14:38:21  *** markvoelker_ has quit IRC
2015-02-19T14:38:30  *** briancline has joined #openstack-infra
2015-02-19T14:39:07  *** hogepodge has joined #openstack-infra
2015-02-19T14:39:08  *** salv-orlando has quit IRC
2015-02-19T14:39:10  *** markvoelker has joined #openstack-infra
2015-02-19T14:39:41  *** sabeen has joined #openstack-infra
2015-02-19T14:40:21  *** yfried_ is now known as yfried|afk
2015-02-19T14:40:26  *** salv-orlando has joined #openstack-infra
2015-02-19T14:40:31  *** yfried|afk is now known as yfried_
2015-02-19T14:41:35  *** woodster_ has joined #openstack-infra
2015-02-19T14:42:26  *** koolhead17 has quit IRC
2015-02-19T14:42:33  *** tiswanso has joined #openstack-infra
2015-02-19T14:43:45  *** dustins has quit IRC
2015-02-19T14:43:55  *** bswartz has quit IRC
2015-02-19T14:45:34  *** marcusvrn1 has joined #openstack-infra
2015-02-19T14:46:16  *** marcusvrn has quit IRC
2015-02-19T14:46:29  *** marcusvrn has joined #openstack-infra
2015-02-19T14:47:00  <anteaya> wznoinsk: were you going to introduce yourself?
2015-02-19T14:47:18  *** marcusvrn has quit IRC
2015-02-19T14:47:37  *** marcusvrn has joined #openstack-infra
2015-02-19T14:49:30  *** zz_dimtruck is now known as dimtruck
2015-02-19T14:49:52  *** marcusvrn1 has quit IRC
2015-02-19T14:51:07  *** deepakcs has joined #openstack-infra
2015-02-19T14:51:29  *** MaxV has quit IRC
2015-02-19T14:51:46  <deepakcs> clarkb, foobio ping
2015-02-19T14:52:04  <anteaya> deepakcs: best to state what you need
2015-02-19T14:52:11  <anteaya> others may be available to help
2015-02-19T14:52:12  <deepakcs> anteaya, sure
2015-02-19T14:52:19  <deepakcs> clarkb, foobio reg: https://review.openstack.org/#/c/157213/
2015-02-19T14:52:30  *** ildikov has joined #openstack-infra
2015-02-19T14:52:48  <deepakcs> anteaya, ^^
2015-02-19T14:53:08  <anteaya> it is merged
2015-02-19T14:53:13  <anteaya> so what do you need?
2015-02-19T14:53:31  <deepakcs> anteaya, :) yeah, it is removing the glusterfs tempest job, bcos in recent past the job was getting restarted by zuul
2015-02-19T14:53:41  <anteaya> that is fine
2015-02-19T14:53:45  *** wenlock has joined #openstack-infra
2015-02-19T14:53:45  <anteaya> what you do need?
2015-02-19T14:54:09  <deepakcs> anteaya, i need that job back so that i can claim my CI to be working. I don't see those failures in the local setup
2015-02-19T14:54:24  <deepakcs> anteaya, https://jenkins07.openstack.org/job/check-tempest-dsvm-full-glusterfs-centos7/35/consoleFull
2015-02-19T14:54:45  <anteaya> see right there we have a problem
2015-02-19T14:54:51  <deepakcs> anteaya, as you can see, the job is getting killed bcos of some java hudson excp, i have no idea why thats happening
2015-02-19T14:55:03  <anteaya> since I am not interersted in helping you to _claim_ your CI is working
2015-02-19T14:55:03  *** yfried_ is now known as yfried|afk
2015-02-19T14:55:15  <anteaya> I will however support you in getting your CI working
2015-02-19T14:55:20  <anteaya> can you see the difference?
2015-02-19T14:55:24  <deepakcs> anteaya, yeah the latter :) i see it
2015-02-19T14:55:28  <anteaya> great
2015-02-19T14:55:32  *** mwagner_lap has joined #openstack-infra
2015-02-19T14:55:38  <deepakcs> I did some research
2015-02-19T14:55:40  <anteaya> so you are asking how to get your CI working?
2015-02-19T14:55:54  <deepakcs> anteaya, and it looks like most of the glusterfs tempest jobs are failing with java excp
2015-02-19T14:55:56  *** sabeen has quit IRC
2015-02-19T14:56:04  <anteaya> that is good information to have
2015-02-19T14:56:08  <deepakcs> anteaya, which looks like zuul <-> jenkins issue ? ( I am not a expert in infra)
2015-02-19T14:56:22  <deepakcs> anteaya, and some of the jobs are failing with "Build timeout"
2015-02-19T14:56:34  <anteaya> have you a stacktrace of the exceptions?
2015-02-19T14:56:43  <anteaya> that might be a place to begin
2015-02-19T14:57:03  <deepakcs> anteaya, the link above, scroll to end, it has the java trace
2015-02-19T14:57:23  *** carl_baldwin has joined #openstack-infra
2015-02-19T14:57:39  *** yamahata has joined #openstack-infra
2015-02-19T14:58:21  *** ddieterly has joined #openstack-infra
2015-02-19T14:58:31  <anteaya> 2015-02-19 08:40:36.696 | FATAL: hudson.remoting.RequestAbortedException: java.io.IOException: Unexpected termination of the channel
2015-02-19T14:59:00  <deepakcs> anteaya, yes and i have no idea why thats happening. so need help from infra folks
2015-02-19T14:59:03  *** sabeen has joined #openstack-infra
2015-02-19T14:59:18  *** bswartz has joined #openstack-infra
2015-02-19T14:59:19  <anteaya> so are you asking for information on what that exception means?
2015-02-19T15:00:03  <openstackgerrit> Matt Riedemann proposed openstack-infra/elastic-recheck: Uncap irc, block on 11.1  https://review.openstack.org/157395
2015-02-19T15:00:11  <deepakcs> anteaya, well it says IO Excp and below the original excp seems to be EOF, but not sure why or how is it related to glusterfs devstack job
2015-02-19T15:00:38  <deepakcs> anteaya, wondering in infra has seen such things before for any other job/scenario from where we can get some clues
2015-02-19T15:00:50  <anteaya> well since it occurs due to the addition of your job are you willing to consider that it might in fact be a result of your job and start there?
2015-02-19T15:01:32  <deepakcs> anteaya, there are around 30+ glustefs experimental jobs that have failed and they don't fail at the same testcase, its random, so can't tie it to the testcase running at failure too
2015-02-19T15:03:00  *** amitgandhinz has joined #openstack-infra
2015-02-19T15:04:18  <sdague> so did someone look at the melody stats?
2015-02-19T15:04:26  *** dimtruck is now known as zz_dimtruck
2015-02-19T15:04:31  *** dustins has joined #openstack-infra
2015-02-19T15:05:45  *** dannywilson has joined #openstack-infra
2015-02-19T15:05:48  *** yfried|afk is now known as yfried_
2015-02-19T15:06:34  <anteaya> I think melody stats were mentioned the other day
2015-02-19T15:06:41  <anteaya> I haven't seen them mentioned today
2015-02-19T15:07:11  <openstackgerrit> yolanda.robla proposed openstack-infra/nodepool: WIP: Not even close to finished - use shade  https://review.openstack.org/156322
2015-02-19T15:07:34  <sdague> right, gerrit is quite slow again
2015-02-19T15:08:02  <sdague> it would be nice to see if there is a thing to be done to make it not so, as it's definitely impacting review time
2015-02-19T15:09:17  <anteaya> ack
2015-02-19T15:09:50  *** dannywilson has quit IRC
2015-02-19T15:09:58  <openstackgerrit> Max Rasskazov proposed openstack-infra/jenkins-job-builder: Add support of multiple credentials for ssh-agent-credentials wrapper  https://review.openstack.org/156681
2015-02-19T15:10:05  <BobBall> deepakcs: I suspect that error means the node lost SSH connectivity ?
2015-02-19T15:11:01  <deepakcs> BobBall, ok, so does it mean something in the job is causing it to lose SSH connectivity ?
2015-02-19T15:11:30  <openstackgerrit> Merged openstack-infra/elastic-recheck: Uncap irc, block on 11.1  https://review.openstack.org/157395
2015-02-19T15:11:34  <deepakcs> BobBall, anteaya couple of days back the job was running fine, with 2 testcases failing, it was never broken, until now
2015-02-19T15:11:42  <BobBall> If it's reproducible, perhaps, yes.  Otherwise might be some random cloudy thing that caused that node to die
2015-02-19T15:12:06  <deepakcs> BobBall, https://jenkins07.openstack.org/job/check-tempest-dsvm-full-glusterfs-centos7/
2015-02-19T15:12:11  <AJaeger> anteaya, sdague: I did some hands-on help with the training-guides team, could you review my updated patch https://review.openstack.org/#/c/152118/ this week, please?
2015-02-19T15:12:17  <deepakcs> BobBall, most of the jobs there are aborted due to this java excp
2015-02-19T15:12:36  <deepakcs> BobBall, and few due to build timeout error
2015-02-19T15:12:39  <foobio> deepakcs: so, there are two prime possibilities for what was happening with that job
2015-02-19T15:12:44  <openstackgerrit> Max Rasskazov proposed openstack-infra/jenkins-job-builder: Add support of multiple credentials for ssh-agent-credentials wrapper  https://review.openstack.org/156681
2015-02-19T15:12:56  <deepakcs> foobio, ah, u r there :)
2015-02-19T15:13:32  *** nelsnelson has joined #openstack-infra
2015-02-19T15:13:39  <foobio> deepakcs: either something is making network configuration changes (routing, interface reconfiguration, firewall rules, et cetera) which are causing the jenkins master to no longer be able to reach teh worker, or something is causing a kernel panic (maybe something filesystem-related?)
2015-02-19T15:14:17  <foobio> deepakcs: can you attempt to recreate the situation on virtual machines of your own to identify the problem?
2015-02-19T15:14:21  *** nelsnelson has quit IRC
2015-02-19T15:14:58  <deepakcs> foobio, we don't touch neutron / networking, its a cinder-glusterfs job. Do u remember where/when u saw the kernel panic.. most of the failed jobs I saw either had java excp or build timeout as the reason for abortion
2015-02-19T15:15:10  *** MaxV has joined #openstack-infra
2015-02-19T15:15:13  <foobio> deepakcs: we see nothing. we just stop getting a response from the vm
2015-02-19T15:15:20  *** nelsnelson has joined #openstack-infra
2015-02-19T15:15:28  *** mpaolino has quit IRC
2015-02-19T15:15:31  *** koolhead17 has joined #openstack-infra
2015-02-19T15:15:31  <deepakcs> foobio, BharatK runs the tempest volume only and full tests in VM locally, and they are running fine.
2015-02-19T15:15:46  <foobio> deepakcs: those java exceptions are the jenkins master saying "i am no longer getting a response from the remote worker so i'm giving up now"
2015-02-19T15:15:59  *** cdent has quit IRC
2015-02-19T15:16:10  *** cdent has joined #openstack-infra
2015-02-19T15:16:25  <deepakcs> foobio, 2 days back the job was running fine (~2 hours to complete as its a full test), but were failing 2 testcases, we added a change to allow nova policy for online snap, post which we are seeing this
2015-02-19T15:16:52  <foobio> deepakcs: another possibility is an out-of-memory condition which is causing the kernel to kill lots of processes on the worker and also happens to blow out the jenkins slave agent in the process... is it possible this job would require more than 8gb ram?
2015-02-19T15:16:58  <deepakcs> foobio, with the same change on a local VM, we don't see that issue
2015-02-19T15:17:12  *** hyakuhei has joined #openstack-infra
2015-02-19T15:17:27  <anteaya> AJaeger: slides will be posted to docs after the patch merges?
2015-02-19T15:17:29  <deepakcs> BharatK, how much is ur local VM RAM where u test the tempest ?
2015-02-19T15:17:40  *** dims__ has quit IRC
2015-02-19T15:17:46  <AJaeger> anteaya, slides will not be posted at the moment for master
2015-02-19T15:17:47  <BharatK> deepakcs, locally I am using 4GB RAM
2015-02-19T15:18:04  <AJaeger> They're in complete reorganization mode and have nothing to publish from master for now...
2015-02-19T15:18:07  <anteaya> AJaeger: ah okay just created in the check and gate jobs, okay
2015-02-19T15:18:08  <deepakcs> foobio, since it says EOF excp (if u follow the caused by in java excp) i was wondering if its running out of disk space ?
2015-02-19T15:18:12  <foobio> so that's probably not the issue then
2015-02-19T15:18:14  <anteaya> AJaeger: ah okay thanks
2015-02-19T15:18:17  *** dims__ has joined #openstack-infra
2015-02-19T15:18:22  <AJaeger> anteaya, correct
2015-02-19T15:18:29  <foobio> deepakcs: do you need more than 20gb disk?
2015-02-19T15:18:51  <deepakcs> BharatK, locally whats ur disk size ?
2015-02-19T15:18:56  <BharatK> foobio, in the local environment I am using 40 GB
2015-02-19T15:19:29  <clarkb> also note we run the "full" tempest run not a subset
2015-02-19T15:19:32  <BharatK> foobio, while job is running I have seen the 34GB free space in "df -h" output
2015-02-19T15:19:36  <deepakcs> BharatK, foobio  but the max we do is create a loop device of 8G using the disk file to be used as a brick for glusterfs storage, so 20G should be sufficient
2015-02-19T15:19:49  <clarkb> so you may not see this locally if running a subset
2015-02-19T15:19:50  <deepakcs> clarkb, hi
2015-02-19T15:19:52  <foobio> jenkins will automatically offline the worker if its root filesystem fills up, but it also often misreports a full filesystem as the reason for offlining when in actuality it loses contact with the worker, so that tends to be a false error
2015-02-19T15:20:25  <foobio> deepakcs: do you create it in /opt or somewhere else? we do have hundreds of gb in /opt generally but / can be as small as 20gb
2015-02-19T15:20:30  <BharatK> clarkb, In local environment we ran full tempest
2015-02-19T15:20:32  <deepakcs> BharatK, u did run "full" tempest too, and it ran fine, right ?
2015-02-19T15:20:53  <BharatK> deepakcs, just one hour back I ran full tempest without any issues.
2015-02-19T15:21:04  <deepakcs> BharatK, can u answer foobio 's q on where we create the 8G disk file ?
2015-02-19T15:21:29  <deepakcs> foobio, looking at the console logs, before the tests start, df -h shows 32G as free space for root
2015-02-19T15:21:58  <clarkb> BobBall you put your swift creds in zuul's ini file then zuul generates the job specific creds
2015-02-19T15:21:59  <deepakcs> foobio,  /dev/xvda1       40G  5.9G   32G  16% /
2015-02-19T15:22:17  <BharatK> foobio, we are creating loopback device in /var/lib/glance
2015-02-19T15:22:19  <BobBall> oh brilliant clarkb *looks* thanks.
2015-02-19T15:22:41  <foobio> deepakcs: yeah, some have 40 and some 20 depending on what provider they end up running in (we have virtual machines from a couple different service providers)
2015-02-19T15:22:42  <BharatK> foobio, /var/lib/glusterfs/
2015-02-19T15:22:45  <clarkb> BobBall those creds are scoped to the container and path and have anexpiry iirc
2015-02-19T15:23:03  <deepakcs> foobio, i don't see /opt as a diff mnt in the df -h
2015-02-19T15:23:09  <deepakcs> so /opt is part of / itself
2015-02-19T15:23:29  <clarkb> that df likely runs before the mount then
2015-02-19T15:23:39  <clarkb> see the setup host log
2015-02-19T15:23:44  <foobio> we might want to see if we can fix the ordering there at some point
2015-02-19T15:24:00  <clarkb> we carve out the ephemeral drive and mount swap and /opt
2015-02-19T15:24:14  <deepakcs> clarkb, ok, setup host log can be seen only if the job completed gracefully, right ?
2015-02-19T15:24:17  *** timcline has joined #openstack-infra
2015-02-19T15:24:46  <clarkb> deepakcs oh right because the node goes away in this case
2015-02-19T15:24:47  <foobio> good point, we won't have other logs/files on the aborted or timed out jobs
2015-02-19T15:24:54  <deepakcs> clarkb, yes :)
2015-02-19T15:25:08  <BobBall> clarkb: Yes - I saw that.  Now looking at the zuul config file it seems easy enough.  Will test and see if/where I get errors...
2015-02-19T15:25:19  <foobio> clarkb: any idea if we were we seeing this happen in both hpcloud and rax?
2015-02-19T15:25:37  <deepakcs> clarkb, foobio since we are not able to recreate this in local VM is it possible to somehow enable this job, but not come in the queue for others, so that we can debug with some ideas ?
2015-02-19T15:27:01  <clarkb> foobio no I didnt get that far. it was ever job running yesterday though so I would be suprised if it wasnt both
2015-02-19T15:27:04  <openstackgerrit> Aleksey Ripinen proposed openstack-infra/storyboard: Split auth in api and change user_tokens  https://review.openstack.org/153591
2015-02-19T15:27:12  <foobio> deepakcs: i can try to rerun the job by hand as long as i know which provider i'm likely to trigger the failure scenario in
2015-02-19T15:27:21  <deepakcs> clarkb, foobio Other than the java excp , the only other error i saw was "build timeout / aborted" - what does that signify ? jenkins server timedout connecting to slave ?
2015-02-19T15:28:03  <clarkb> deepakcs I think in both cases that is what happens
2015-02-19T15:28:09  *** koolhead17 has quit IRC
2015-02-19T15:28:11  <deepakcs> clarkb, foobio just wondering if there is any clue hidden in there when both the diff types of aborts are taken into consideration ?
2015-02-19T15:28:23  <clarkb> jenkins just doesnt express it the same depending on how it notices
2015-02-19T15:29:00  *** mtanino has joined #openstack-infra
2015-02-19T15:29:03  <foobio> deepakcs: i suspect i'll need to manually run the same steps the job does, and then when i (likely) lose access to the virtual machine, try to log in through an out-of-band console to see what's gone wrong
2015-02-19T15:29:11  *** yamamoto has joined #openstack-infra
2015-02-19T15:29:13  <deepakcs> clarkb, foobio by provider u mean the cloud provider (hpcloud Vs rax) ?
2015-02-19T15:29:20  <clarkb> yes
2015-02-19T15:29:32  <deepakcs> clarkb, and where in the console log i can figure that ?
2015-02-19T15:29:56  <clarkb> at the beginning, it is encoded into the hostname
2015-02-19T15:30:01  *** tim_o has quit IRC
2015-02-19T15:30:12  <sdague> clarkb: so, was there any resolution from the melody graphs on gerrit the other day? Gerrit still seems like it's dragging quite a bit
2015-02-19T15:31:04  <foobio> i suspect anyone here running a lenovo laptop is installing linux anyway, but this sets a disturbing precedent: http://www.zdnet.com/article/lenovo-accused-of-pushing-superfish-self-signed-mitm-proxy/
2015-02-19T15:31:20  <foobio> i wonder what hardware backdoors they're also installing in those
2015-02-19T15:31:26  <clarkb> sdague no I think it likely need to be restarted again, but jeblair wasnt convinced? should see if the graph helped swing him over to restarting
2015-02-19T15:31:34  <deepakcs> clarkb, 2015-02-19 06:14:56.918 | Available disk space on this host:
2015-02-19T15:31:34  <deepakcs> 2015-02-19 06:14:56.920 |     Filesystem      Size  Used Avail Use% Mounted on
2015-02-19T15:31:34  <deepakcs> 2015-02-19 06:14:56.920 |     /dev/xvda1       40G  5.9G   32G  16% /
2015-02-19T15:31:34  <deepakcs> 2015-02-19 06:14:56.920 |     devtmpfs        3.7G     0  3.7G   0% /dev
2015-02-19T15:31:34  <deepakcs> 2015-02-19 06:14:56.920 |     tmpfs           3.7G     0  3.7G   0% /dev/shm
2015-02-19T15:31:35  <deepakcs> 2015-02-19 06:14:56.920 |     tmpfs           3.7G  8.3M  3.7G   1% /run
2015-02-19T15:31:37  <deepakcs> 2015-02-19 06:14:56.921 |     tmpfs           3.7G     0  3.7G   0% /sys/fs/cgroup
2015-02-19T15:31:41  <deepakcs> Oops.. sorry!
2015-02-19T15:31:47  <clarkb> foobio ya never booted windows at all :)
2015-02-19T15:31:49  <deepakcs> clarkb, https://jenkins07.openstack.org/computer/devstack-centos7-rax-iad-912561
2015-02-19T15:31:55  <deepakcs> so its rax provider
2015-02-19T15:31:55  <clarkb> depoakcs please use a paste service
2015-02-19T15:32:02  <deepakcs> clarkb, that was by mistake
2015-02-19T15:32:10  <deepakcs> apologies
2015-02-19T15:32:22  *** AJaeger has quit IRC
2015-02-19T15:32:36  <sdague> so I saw you send him a graph, but then the conversation stopped. Anyway, lots of "people nagios" are reporting in that it's slow, including me.
2015-02-19T15:33:04  <deepakcs> clarkb, foobio is it a bad idea to add the job again and we do some debug (Like limit the tests to volume only, reduce the size of loop device etc )?
2015-02-19T15:33:21  <foobio> deepakcs: i can grab a centos7 machine in rax-iad and try to recreate the failure
2015-02-19T15:33:28  <mugsie> anteaya: ping?
2015-02-19T15:33:35  <foobio> clarkb: when did we get confirmation that those centos7 workers were actually operational?
2015-02-19T15:33:41  *** achanda has joined #openstack-infra
2015-02-19T15:33:49  <deepakcs> clarkb, foobio or add it to a different expt pipeline so that it doesn't affect others ?
2015-02-19T15:34:15  <clarkb> foobio a while back, just devstack/temlest failed on them but the nodes themselves were ok
2015-02-19T15:34:46  <foobio> oh, got it. so as long as they're not running devstack/tempest on centos7 their job should work i guess?
2015-02-19T15:34:53  <deepakcs> foobio,  i just randonly checked 4-5 jobs and all had 'rax' in the hostname
2015-02-19T15:35:20  <foobio> because it sort of sounds like they're trying to set up devstack and run tempest against it on centos7 there
2015-02-19T15:35:25  <clarkb> foobio it is a tempest job but the other centos7 jobs dont die like this they fail normally
2015-02-19T15:35:27  *** frickler has joined #openstack-infra
2015-02-19T15:35:29  <deepakcs> foobio, yes thats what we are doing there
2015-02-19T15:35:54  <foobio> oh, got it. so other jobs failing on centos7 weren't tanking the entire worker
2015-02-19T15:36:12  *** avozza is now known as zz_avozza
2015-02-19T15:36:15  <clarkb> correct
2015-02-19T15:36:23  <foobio> i'll hold a ready devstack-centos7 worker in rax and see if i can recreate the failure by hand
2015-02-19T15:36:38  <openstackgerrit> Max Rasskazov proposed openstack-infra/jenkins-job-builder: Fix broken link on documentation  https://review.openstack.org/157416
2015-02-19T15:37:08  <deepakcs> foobio, let me or BharatK know if u need any help
2015-02-19T15:37:22  *** yamamoto has quit IRC
2015-02-19T15:37:35  *** zz_dimtruck is now known as dimtruck
2015-02-19T15:37:43  <deepakcs> foobio, clarkb Do we in parallel also start looking at a F20/f21 based gate job, if centos7 has issues ?
2015-02-19T15:38:30  *** ddieterly has quit IRC
2015-02-19T15:38:38  <anteaya> mugsie: how can I help?
2015-02-19T15:39:02  *** yamamoto has joined #openstack-infra
2015-02-19T15:39:20  <mugsie> about https://review.openstack.org/#/c/155788/
2015-02-19T15:39:29  <anteaya> what about it?
2015-02-19T15:39:41  <clarkb> deepakcs no I think we figure this one out
2015-02-19T15:39:45  <mugsie> is there a problem allowing us to have the third party ci?
2015-02-19T15:40:03  <anteaya> do you need to have third party ci?
2015-02-19T15:40:13  <mugsie> we don;t have a massive immediate need, but I want to try running a few other job against our patches
2015-02-19T15:40:17  <mugsie> jobs*
2015-02-19T15:40:19  <anteaya> I'm feeling is is a fashion statement rather than something folks need
2015-02-19T15:40:27  <deepakcs> clarkb, foobio thanks in advance :) Do we shar eour email IDs with you so that you can keep us in the loop (given the TZ diff, we will be asleep soon) :)
2015-02-19T15:40:32  <mugsie> and we will eventually need it (in the next cycle or so)
2015-02-19T15:40:41  <anteaya> mugsie: you can run a few jobs against your patches
2015-02-19T15:40:52  <anteaya> and you can have the ci systems comment on your patches
2015-02-19T15:40:53  <mugsie> but not vote
2015-02-19T15:40:58  <anteaya> all without needing a gerrit group
2015-02-19T15:41:00  <anteaya> right
2015-02-19T15:41:10  <foobio> mugsie: you need to test things against designate that involve special hardware or non-free software? curious why you can't just run the jobs in our system
2015-02-19T15:41:30  *** achanda has quit IRC
2015-02-19T15:41:31  *** EmilienM|afk is now known as EmilienM
2015-02-19T15:41:32  <mugsie> i am not sure if they are usful, its a sonar job
2015-02-19T15:41:52  <openstackgerrit> James Graf proposed openstack-infra/jenkins-job-builder: Add support for Job DSL plugin for Groovy-based job and view creation and management  https://review.openstack.org/150112
2015-02-19T15:42:05  <foobio> mugsie: that'
2015-02-19T15:42:09  <foobio> s coverage right?
2015-02-19T15:42:12  <mugsie> I want to see if having something that votes helps us with code complexity
2015-02-19T15:42:23  <mugsie> code complexity / syntax etc
2015-02-19T15:42:23  <foobio> ahh, code complexity
2015-02-19T15:42:32  <deepakcs> clarkb, foobio ^^
2015-02-19T15:42:33  <mugsie> it can take code coverage as well
2015-02-19T15:42:50  <mugsie> but its mainly a static analyis tool
2015-02-19T15:43:24  *** skolekonov has quit IRC
2015-02-19T15:43:33  <mugsie> we will need to start testing backend that talk to APIs / comercial software as well, and 3rd party testing is must for that
2015-02-19T15:43:34  <foobio> mugsie: a commercial/proprietary tool?
2015-02-19T15:43:54  <mugsie> nope, there is a GPL version
2015-02-19T15:43:57  <clarkb> there are free/open tools to do this
2015-02-19T15:44:12  *** abhirc has joined #openstack-infra
2015-02-19T15:44:15  <mugsie> http://www.sonarqube.org/
2015-02-19T15:44:35  <foobio> mugsie: because you can probably just install and run it on our workers without needing to set up a separate entire system for it
2015-02-19T15:44:45  *** Sukhdev has joined #openstack-infra
2015-02-19T15:44:52  <foobio> deepakcs: if you can't leave your irc client connected while you sleep, then i guess start a brief mailing list thread and one of us will follow up to it with what we find
2015-02-19T15:45:12  <deepakcs> foobio, ok, will start a thread on -infra, hope that is fine ?
2015-02-19T15:45:29  <clarkb> yes that would be good
2015-02-19T15:45:32  <foobio> deepakcs: i would say start one on openstack-dev@lists.openstack.org instead
2015-02-19T15:45:39  <foobio> but infra will work if you'd rather
2015-02-19T15:45:39  <clarkb> or there
2015-02-19T15:45:46  <mugsie> foobio: yeah. but if left as a long running thing it gives interesting trends etc
2015-02-19T15:46:01  <clarkb> actually ya -dev will get more eyes on it and maybe other will recognize the behavior
2015-02-19T15:46:01  <deepakcs> i thought infra was more appropriate for this
2015-02-19T15:46:05  <foobio> mugsie: oh, so it's not a testing tool, it's a trending tool?
2015-02-19T15:46:28  <foobio> deepakcs: infra is more appropriate for topics which are not of interest to openstack, but you're testing openstack with glusterfs, right?
2015-02-19T15:46:39  <mugsie> it can do both. Its can give an incremental report, and then keep track of results over time
2015-02-19T15:46:46  <deepakcs> foobio, yes
2015-02-19T15:47:02  <deepakcs> foobio, i can start on -dev too, not a issue
2015-02-19T15:47:18  *** mrunge has quit IRC
2015-02-19T15:48:00  *** cipcosma has quit IRC
2015-02-19T15:48:23  <foobio> mugsie: out of curiosity, what trending is of interest across _proposed_ changes? wouldn't you want to trend the state of the codebase itself?
2015-02-19T15:49:00  <mugsie> foobio: yeah, was going to trigger the trending jobs on post-merge
2015-02-19T15:49:36  <foobio> mugsie: in that case as anteaya says you don't need a -ci group for that. it's only to be able to control what accounts can leave code verification votes on proposed changes
2015-02-19T15:50:27  <foobio> mugsie: any account can listen to the event stream, which is all you need to be able to see the change-merged events
2015-02-19T15:50:41  *** hashar has joined #openstack-infra
2015-02-19T15:51:00  <mugsie> yeah, and as i said earlier - we have some backends that aren't fully tested currently, and will need this as well
2015-02-19T15:51:23  <mugsie> (commercial API driven dns vendors etc)
2015-02-19T15:51:28  *** jaypipes has quit IRC
2015-02-19T15:51:34  <mugsie> but that req is not immediate
2015-02-19T15:51:53  <foobio> ahh, and for that yes you would need something like this. we wouldn't be able to interface with your commercial vendor dns server devices
2015-02-19T15:51:56  *** imcsk8 has quit IRC
2015-02-19T15:51:58  *** yamamoto has quit IRC
2015-02-19T15:52:02  *** imcsk8 has joined #openstack-infra
2015-02-19T15:52:08  *** ddieterly has joined #openstack-infra
2015-02-19T15:52:16  * foobio assumes things like infoblox, bluecoat, et cetera
2015-02-19T15:52:22  <mugsie> so, shoiuld I back out the reuest until we need it asap? I figured getting it in early means its one less thjing to worry about
2015-02-19T15:52:34  <mugsie> yup, and Dyn, and as few others
2015-02-19T15:52:38  <mugsie> a*
2015-02-19T15:54:10  <anteaya> mtreinish: can you indicate you are okay with this new non-voting job being added to tempest: https://review.openstack.org/#/c/151564/6
2015-02-19T15:54:21  <foobio> it's fine if you forsee a need, just be wary not to run things externally which you could instead run upstream
2015-02-19T15:54:35  <anteaya> mugsie: if you recall my question was why do you need it
2015-02-19T15:54:44  <anteaya> mugsie: if you have a need that is fine
2015-02-19T15:55:02  <mtreinish> anteaya: sure I'll take a look
2015-02-19T15:55:07  <anteaya> but many folks feel they have to have something because other projects do and then don't know what to do with it
2015-02-19T15:55:10  <anteaya> mtreinish: thanks
2015-02-19T15:55:15  *** bogdando has quit IRC
2015-02-19T15:55:43  *** ddieterl_ has joined #openstack-infra
2015-02-19T15:56:19  *** ddieterly has quit IRC
2015-02-19T15:57:41  *** yolanda has quit IRC
2015-02-19T15:57:57  *** bcourt has joined #openstack-infra
2015-02-19T15:58:09  *** Sukhdev has quit IRC
2015-02-19T16:00:48  *** yolanda has joined #openstack-infra
2015-02-19T16:00:50  *** ParsectiX has quit IRC
2015-02-19T16:01:05  *** ParsectiX has joined #openstack-infra
2015-02-19T16:01:09  *** hyakuhei has quit IRC
2015-02-19T16:01:18  *** jaypipes has joined #openstack-infra
2015-02-19T16:02:49  *** armax has joined #openstack-infra
2015-02-19T16:04:09  *** jlibosva has quit IRC
2015-02-19T16:04:23  *** annegentle has joined #openstack-infra
2015-02-19T16:04:39  *** david-lyle_afk is now known as david-lyle
2015-02-19T16:05:27  <foobio> mescanef: i've added you as the initial member of https://review.openstack.org/#/admin/groups/599,members sorry for the wait
2015-02-19T16:05:33  *** denis_makogon has quit IRC
2015-02-19T16:05:42  *** afazekas has quit IRC
2015-02-19T16:06:02  *** jlibosva has joined #openstack-infra
2015-02-19T16:06:18  <mescanef> foobio: thank you
2015-02-19T16:06:23  <openstackgerrit> Matthew Treinish proposed openstack-infra/devstack-gate: DO NOT MERGE COPY ALL OF .TESTREPOSITORY to log server  https://review.openstack.org/149719
2015-02-19T16:07:05  <mtreinish> anteaya: lgtm
2015-02-19T16:07:17  <mugsie> anteaya: yeap, I understand that
2015-02-19T16:07:18  *** tmcpeak has joined #openstack-infra
2015-02-19T16:07:24  <anteaya> mtreinish: thanks
2015-02-19T16:07:39  <anteaya> mugsie: great, so can you add a reply as a comment on the patch
2015-02-19T16:07:44  <mugsie> it just seems everytime we go to get something that is standard for other projects we get push back
2015-02-19T16:07:46  <anteaya> so others can read it too?
2015-02-19T16:07:59  <mugsie> anteaya: doing it now
2015-02-19T16:08:05  <anteaya> mugsie: you believe having a -ci group is standard for other projects?
2015-02-19T16:08:21  <mugsie> no, but the ability to have it is standard
2015-02-19T16:08:23  <anteaya> that is a perception that is a shame if that is what you believe
2015-02-19T16:08:28  *** hashar_ has joined #openstack-infra
2015-02-19T16:08:30  <anteaya> you have the ability to have it
2015-02-19T16:08:36  <anteaya> I simply asked a question
2015-02-19T16:08:46  <anteaya> part of my reviewing process is to ask questions
2015-02-19T16:09:44  *** arxcruz has quit IRC
2015-02-19T16:09:54  <foobio> mugsie: other projects that have it don't have it just because they're able to have it. they have it because they have ci systems leaving comments on their changes and want to be able to control whether those can vote
2015-02-19T16:10:37  *** hashar has quit IRC
2015-02-19T16:11:18  <foobio> mugsie: we simply ask that you don't speculatively request support for features you might exercise in the future without some certainty of that, because otherwise it adds unnecessary workload on our team, which is already stretched extremely thin (hundreds and hundreds of outstanding changes/support requests we have to prioritize)
2015-02-19T16:12:00  <foobio> mugsie: so it's not just your project. pretty much any project which requests something should expect to have to justify their request
2015-02-19T16:12:09  *** marun has joined #openstack-infra
2015-02-19T16:12:35  *** deepakcs has quit IRC
2015-02-19T16:13:19  <openstackgerrit> Matthew Treinish proposed openstack-infra/devstack-gate: DO NOT MERGE COPY ALL OF .TESTREPOSITORY to log server  https://review.openstack.org/149719
2015-02-19T16:13:30  *** cody-somerville has quit IRC
2015-02-19T16:13:39  *** sergsh has quit IRC
2015-02-19T16:14:25  *** stevemar has joined #openstack-infra
2015-02-19T16:16:06  <anteaya> foobio clarkb any problem with raising a stable job timeout from 40 to 90? python26: https://review.openstack.org/#/c/156734/1
2015-02-19T16:17:11  *** otter768 has joined #openstack-infra
2015-02-19T16:17:39  <clarkb> pcrews: ^ any chance we can bump that timeout a little less and still get things to go through?
2015-02-19T16:17:57  <clarkb> anteaya: my only concern is that that is a huge jump and may hide a larger underlying issue if 90 minutes is really necessary
2015-02-19T16:19:13  *** dannywilson has joined #openstack-infra
2015-02-19T16:19:20  *** dangers_away is now known as dangers
2015-02-19T16:19:31  *** dannywilson has quit IRC
2015-02-19T16:19:41  <pcrews> clarkb: sure - just shot for a high value to ensure it would pass (or if it doesn't run in 90 min, it needs more tlc imo) - do you have an opinion / recommendation for time?
2015-02-19T16:19:44  <anteaya> clarkb: thanks
2015-02-19T16:20:46  <clarkb> pcrews: no immediate opinion, but usually if jobs start timing out over time we are straddling the boundary and don't need a large jump. maybe just bump to 50-60 minutes?
2015-02-19T16:21:32  *** otter768 has quit IRC
2015-02-19T16:21:32  <foobio> pcrews: the general rule of thumb is that if you allow that job to run for 90 minutes instead of only 40 then it will _very_soon_ start taking 90 minutes instead of only 40
2015-02-19T16:22:09  <pcrews> foobio: ack and noted ;)
2015-02-19T16:22:15  <foobio> because the only pushback on whether tests are poorly-written and take too long is when they start causing the job to time out
2015-02-19T16:22:25  <pcrews> clarkb: ack - omw to office then will submit a new patch
2015-02-19T16:22:27  *** marcusvrn1 has joined #openstack-infra
2015-02-19T16:23:08  *** zz_avozza is now known as avozza
2015-02-19T16:23:09  *** dannywilson has joined #openstack-infra
2015-02-19T16:23:11  <foobio> clarkb: the experimental glusterfs job has gotten as far as starting tempest now. still up and running at the moment
2015-02-19T16:23:41  <anteaya> pcrews: ack, I 1'd for now
2015-02-19T16:23:46  <anteaya> -1'd
2015-02-19T16:23:53  <foobio> no signs yet of resource exhaustion or disconnection
2015-02-19T16:24:07  *** med_` is now known as medberry
2015-02-19T16:24:10  *** ddieterl_ has quit IRC
2015-02-19T16:24:17  *** tmcpeak has quit IRC
2015-02-19T16:24:23  *** ssam2 has quit IRC
2015-02-19T16:24:34  *** medberry is now known as medberry2
2015-02-19T16:24:42  <clarkb> foobio: ya it seems to go under during object storage tests
2015-02-19T16:24:54  <clarkb> foobio: so hopefully you will see something soon :)
2015-02-19T16:24:59  *** marcusvrn has quit IRC
2015-02-19T16:25:00  *** krtaylor has quit IRC
2015-02-19T16:25:11  <foobio> clarkb: running on 104.130.229.191 if you get curious
2015-02-19T16:25:23  <sdague> pcrews: do you have any idea why this regressed?
2015-02-19T16:26:17  *** ddieterly has joined #openstack-infra
2015-02-19T16:26:45  <foobio> pcrews: also, note that we have some problem on centos6 nodes where sometimes git remote actions take an indefinite amount of time and cause jobs to time out. if it's hitting that, then upping the timeout won't help at all
2015-02-19T16:27:04  *** pcrews has quit IRC
2015-02-19T16:27:08  <clarkb> oh right this is the python26 job
2015-02-19T16:27:30  <foobio> i've so far been entirely unable to recreate the condition to be able to nail down a root cause, but seemed to start right after the most recent big security fix scramble
2015-02-19T16:28:42  <mordred> clarkb: I remembered why I did the puppet ansible thign in python rather than pure ansible yaml
2015-02-19T16:29:02  <mordred> clarkb: it's because there is a need to parse the stdout string frmo puppet because it double-uses 2 return codes for different things
2015-02-19T16:29:18  <clarkb> mordred: I want to cry right now
2015-02-19T16:29:23  <mordred> clarkb: and although the primitives for respoding to error codes are good - once you get to expressing string parsing logic in yaml
2015-02-19T16:29:25  <mordred> you know
2015-02-19T16:29:27  <mordred> it's just crazypants
2015-02-19T16:29:31  *** rcarrillocruz has quit IRC
2015-02-19T16:29:38  <mordred> sorry it took me so long to remember the reasoning that led to that
2015-02-19T16:30:03  <clarkb> mordred: thats ok, maybe we should tack it into a docstring/comment for the python file that says "No really there are reasons and they are:"
2015-02-19T16:30:08  <mordred> ++
2015-02-19T16:30:09  *** spredzy is now known as spredzy|afk
2015-02-19T16:30:17  <mordred> I will do that - as soon as I write the patch I owe you :)
2015-02-19T16:32:06  <openstackgerrit> Merged openstack-infra/project-config: Remove retired repos from channel notification  https://review.openstack.org/156211
2015-02-19T16:32:28  *** rcarrillocruz has joined #openstack-infra
2015-02-19T16:32:43  *** ssam2 has joined #openstack-infra
2015-02-19T16:32:59  *** hashar_ has quit IRC
2015-02-19T16:36:00  *** openstackgerrit has quit IRC
2015-02-19T16:36:30  *** openstackgerrit has joined #openstack-infra
2015-02-19T16:37:46  *** jlibosva has quit IRC
2015-02-19T16:37:49  *** cnesa has joined #openstack-infra
2015-02-19T16:39:42  *** annegentle has quit IRC
2015-02-19T16:39:52  *** yamahata has quit IRC
2015-02-19T16:40:31  <BobBall> So apparently I'm missing something obvious... Trying to add a new parameter I added swift_authurl to the class block mimicking other parameters but I get an error saying the parameter is invalid.  I'd appreciate help on two levels - 1) why is it invalid, 2) where is this line 114 it's complaining about :) http://paste.openstack.org/show/177740/
2015-02-19T16:40:33  *** annegentle has joined #openstack-infra
2015-02-19T16:41:53  <clarkb> BobBall: I think the os_ext_testing puppet class doesn't take that parameter
2015-02-19T16:42:09  <BobBall> I added it at https://github.com/citrix-openstack/os-ext-testing/blob/master/puppet/modules/os_ext_testing/manifests/master.pp#L49
2015-02-19T16:42:27  <clarkb> BobBall: so likely need to update that puppet to pass through swift_authurl similarly to https://git.openstack.org/cgit/openstack-infra/system-config/tree/modules/openstack_project/manifests/zuul_prod.pp
2015-02-19T16:42:40  <BobBall> I may have needed to add it somewhere else too, but that's the bit I don't understand currently...
2015-02-19T16:43:01  <BobBall> yes, that's exactly what I tried to do :/
2015-02-19T16:43:22  *** mpavone has quit IRC
2015-02-19T16:43:29  <clarkb> BobBall: that appears to be the right file, is it updated in your puppet path?
2015-02-19T16:43:34  <krotscheck> So, when using storyboard, can y'all keep an eye on that page-not-loading-when-direct-link issue you were seeing? A patch that went in recently is supposed to fix that.
2015-02-19T16:43:34  *** ddieterly has quit IRC
2015-02-19T16:43:50  <clarkb> krotscheck: noted, will try to track if I notice it
2015-02-19T16:43:56  <krotscheck> clarkb: Thanks.
2015-02-19T16:44:33  <BobBall> Yup ... root@jenkins:~/os-ext-testing/puppet# grep -r swift_authurl /root/os-ext-testing/puppet/os-ext-testing/puppet/modules: /root/os-ext-testing/puppet/os-ext-testing/puppet/modules/logging/manifests/master.pp:  $swift_authurl = '',
2015-02-19T16:45:10  *** yfried_ is now known as yfried|afk
2015-02-19T16:45:25  *** ddieterly has joined #openstack-infra
2015-02-19T16:47:11  <BobBall> hang on...
2015-02-19T16:47:20  * BobBall is an idiot.
2015-02-19T16:47:22  <BobBall> Thanks :)
2015-02-19T16:47:23  *** dmsimard_away is now known as dmsimard
2015-02-19T16:47:40  *** krtaylor has joined #openstack-infra
2015-02-19T16:48:05  <clarkb> BobBall: oh what was it? I had traced it down through the zuul manifest too and it seemed to be there
2015-02-19T16:48:19  <clarkb> the only odd thing I noticed was the line number if complains about doesn't seem right based on your github link
2015-02-19T16:49:42  *** mestery has quit IRC
2015-02-19T16:50:11  <clarkb> krotscheck: fwiw I just ran through a couple things that normally triggered it for me and it was fine (open bug, login, get bug back instead of blank page)
2015-02-19T16:50:18  *** hyakuhei has joined #openstack-infra
2015-02-19T16:50:20  <BobBall> I had a nested version of the repository which was messing things up
2015-02-19T16:50:31  <BobBall> "os-ext-testing/puppet/os-ext-testing/puppet" from above
2015-02-19T16:50:47  <BobBall> I need a rubber duck.
2015-02-19T16:50:49  *** koolhead17 has joined #openstack-infra
2015-02-19T16:51:43  *** tkelsey has joined #openstack-infra
2015-02-19T16:52:25  *** salv-orlando has quit IRC
2015-02-19T16:52:29  *** yamamoto has joined #openstack-infra
2015-02-19T16:52:52  *** scheuran has quit IRC
2015-02-19T16:53:14  <foobio> git clean -dfx
2015-02-19T16:54:01  <openstackgerrit> yolanda.robla proposed openstack-infra/shade: Add hasExtension method to check cloud capabilities  https://review.openstack.org/156954
2015-02-19T16:55:45  *** gondoi is now known as zz_gondoi
2015-02-19T16:57:11  *** zz_gondoi is now known as gondoi
2015-02-19T16:57:23  *** yamamoto has quit IRC
2015-02-19T16:57:30  <openstackgerrit> Merged openstack-infra/project-config: Python34 Jobs for StoryBoard are now voting.  https://review.openstack.org/157190
2015-02-19T16:57:55  *** coolsvap is now known as coolsvap_
2015-02-19T16:58:18  *** dprince has joined #openstack-infra
2015-02-19T16:58:38  *** tiswanso has quit IRC
2015-02-19T16:59:01  <openstackgerrit> Andrew Lazarev proposed openstack/requirements: Bump sahara client version  https://review.openstack.org/155428
2015-02-19T17:01:39  *** annegentle has quit IRC
2015-02-19T17:02:02  *** jlibosva has joined #openstack-infra
2015-02-19T17:02:38  *** carl_baldwin has quit IRC
2015-02-19T17:03:09  *** ihrachyshka has quit IRC
2015-02-19T17:03:58  <ctlaugh> Are there plans / another recommendation to move away from using scp-plugin?  No new release since 2011?
2015-02-19T17:04:31  <openstackgerrit> patrick-crews proposed openstack-infra/project-config: Increase py26 timeouts for nova-stable  https://review.openstack.org/156734
2015-02-19T17:04:49  <zaro> ctlaugh: we use master
2015-02-19T17:05:07  <krotscheck> clarkb: Awesome, thanks
2015-02-19T17:05:19  <ctlaugh> zaro: master, as in manually built it from master?
2015-02-19T17:05:19  <anteaya> krotscheck: ack
2015-02-19T17:05:35  <zaro> ctlaugh: yes.
2015-02-19T17:05:40  *** ParsectiX has quit IRC
2015-02-19T17:06:02  <clarkb> ctlaugh: zaro: and we are moving to using swift uploads instead
2015-02-19T17:06:12  <clarkb> all of the infra jobs use swift uploaded logs exclusively now
2015-02-19T17:06:12  * anteaya hands BobBall a rubber duck
2015-02-19T17:06:17  *** ParsectiX has joined #openstack-infra
2015-02-19T17:06:19  <clarkb> or a vast majority at least
2015-02-19T17:06:30  <ctlaugh> zaro: yeah, I did that too... just doesn't feel right relying on it.
2015-02-19T17:06:38  *** tmcpeak has joined #openstack-infra
2015-02-19T17:07:04  <ctlaugh> clarkb: any more details/pointers to info on how that works?
2015-02-19T17:07:11  *** tmcpeak has quit IRC
2015-02-19T17:07:15  *** tmcpeak1 has joined #openstack-infra
2015-02-19T17:07:42  <clarkb> ctlaugh: zuul hands out upload urls to jobs that are scoped to specific locations and have an expiry, then the job has a script that uploads files with that info
2015-02-19T17:07:55  <foobio> the glusterfs job is _still_ going
2015-02-19T17:08:03  <clarkb> ctlaugh: http://ci.openstack.org/zuul/zuul.html#swift
2015-02-19T17:08:21  <clarkb> foobio: is tempest still running new tests or has it hung?
2015-02-19T17:08:40  *** dtantsur is now known as dtantsur|afk
2015-02-19T17:08:49  <foobio> clarkb: still going through tests
2015-02-19T17:08:56  <ctlaugh> clarkb: thank you!
2015-02-19T17:09:12  <BobBall> thanks anteaya!
2015-02-19T17:09:32  <clarkb> foobio: it is much slower than the non glusterfs job so this may be normal
2015-02-19T17:10:03  <foobio> yeah, the devstack setup phase took 20+ minutes (i didn't wall-clock it but a while)
2015-02-19T17:10:13  <anteaya> BobBall: let me know if it helps
2015-02-19T17:10:48  *** yamahata has joined #openstack-infra
2015-02-19T17:11:35  * anteaya has to leave soon for errands which will take most of the afternoon
2015-02-19T17:12:12  *** markus_z has quit IRC
2015-02-19T17:12:54  <foobio> clarkb: btw i'm testing on master tip of everything... is it possible the experimental job loop you saw was specific to a particular change?
2015-02-19T17:13:16  <clarkb> foobio: I thought so initially so I made sure to check all of the glusterfs runs that were going and every one did it
2015-02-19T17:13:21  *** teran_ has joined #openstack-infra
2015-02-19T17:13:26  *** afazekas has joined #openstack-infra
2015-02-19T17:13:29  <clarkb> foobio: so I think it is unlikely related to a specific unmerged change
2015-02-19T17:13:35  <foobio> k
2015-02-19T17:13:51  <clarkb> there were ~5 running across 4 projects iirc
2015-02-19T17:14:09  <foobio> ahh, yeah then must have been endemic to the job
2015-02-19T17:14:27  <foobio> right now it's on tempest.api.compute.servers.test_servers_negative.ServersNegativeTestJSON.test_update_server_set_empty_name
2015-02-19T17:14:51  *** teran has quit IRC
2015-02-19T17:15:42  *** ihrachyshka has joined #openstack-infra
2015-02-19T17:16:14  <foobio> i've got free and df looping once a second in a separate ssh session to the worker, and am also trying to maintain an active virtual console session to it in case there's a kernel panic
2015-02-19T17:19:36  *** pradk has joined #openstack-infra
2015-02-19T17:20:21  *** Ala has quit IRC
2015-02-19T17:20:27  *** teran has joined #openstack-infra
2015-02-19T17:21:11  *** cdent has quit IRC
2015-02-19T17:21:11  *** pcrews has joined #openstack-infra
2015-02-19T17:21:51  <foobio> okay, it's on object_storage tests now
2015-02-19T17:22:07  <foobio> so hopefully rsn
2015-02-19T17:22:09  <clarkb> foobio: this is where I saw the others stop
2015-02-19T17:22:35  *** teran__ has joined #openstack-infra
2015-02-19T17:23:23  <foobio> it's running very close to 8gb active ram, about to dip into swap i think
2015-02-19T17:23:28  <krotscheck> I'm pondering removing the apache2 vhost from puppet-storyboard, because it presumes to know how you want to set things up.
2015-02-19T17:23:33  <krotscheck> Any opinions?
2015-02-19T17:23:37  *** teran_ has quit IRC
2015-02-19T17:23:54  <clarkb> krotscheck: what do you have in mind to replace it with?
2015-02-19T17:23:58  <foobio> krotscheck: we could move that into system-config's openstack_project module instead
2015-02-19T17:24:08  <clarkb> oh I see
2015-02-19T17:24:23  <clarkb> ya you could decouple storyboard deployment from deploment of a proxy for storyboard
2015-02-19T17:24:37  <foobio> but i sort of like the idea that installing the module gives you a working _something_ you can then proceed to extend as needed
2015-02-19T17:24:44  <clarkb> or maybe ship a manifest that you can include that uses some relatively sane defaults but otherwise doesn't force you into using it
2015-02-19T17:24:53  <foobio> yeah, i think move the vhost handling into a separate optional class?
2015-02-19T17:24:57  *** cdent has joined #openstack-infra
2015-02-19T17:24:57  <clarkb> foobio: ya
2015-02-19T17:24:59  *** teran has quit IRC
2015-02-19T17:25:12  <krotscheck> Yeah, what foobio just said makes the most sense to me.
2015-02-19T17:25:12  *** jcoufal has quit IRC
2015-02-19T17:25:14  <foobio> then a deployer can choose to use it or substitute their own
2015-02-19T17:25:26  <clarkb> +1
2015-02-19T17:25:33  <krotscheck> That also neatly solves my http/https problem.
2015-02-19T17:26:04  *** bknudson has joined #openstack-infra
2015-02-19T17:26:24  *** cdent has quit IRC
2015-02-19T17:26:26  <foobio> clarkb: actually the https://jenkins07.openstack.org/job/check-tempest-dsvm-full-glusterfs-centos7/35/consoleFull example failure got to volume snapshot and instance resize tests
2015-02-19T17:27:10  *** teran_ has joined #openstack-infra
2015-02-19T17:27:25  *** teran__ has quit IRC
2015-02-19T17:28:14  *** jistr has quit IRC
2015-02-19T17:29:29  <nibalizer> +1
2015-02-19T17:30:00  *** MaxV has quit IRC
2015-02-19T17:30:13  *** teran__ has joined #openstack-infra
2015-02-19T17:30:17  *** dansmith has quit IRC
2015-02-19T17:30:31  <foobio> krotscheck: though if you want to make http vs https configurable, have a look at my proposed puppet-zuul change (not quite the same, it allows you to enable/disable https in addition to http, but the mechanisms you need to switch that stuff are similar)
2015-02-19T17:30:47  *** dansmith has joined #openstack-infra
2015-02-19T17:31:13  <BobBall> clarkb: So I've got the values set in zuul/zuul.conf now (http://paste.openstack.org/show/177758/), I've restarted zuul and rebuild the jobs but I'm getting Environment variable 'SWIFT_logs_LOGSERVER_PREFIX' not found
2015-02-19T17:31:26  <BobBall> Where should I be looking to debug why zuul isn't setting this up like you expect?
2015-02-19T17:31:54  *** bdpayne has joined #openstack-infra
2015-02-19T17:31:59  <foobio> and now it's past the cli and scenario tests and into the thirdparty boto tests
2015-02-19T17:31:59  <clarkb> BobBall: oh I think you ma actually need to enable it in layout.yaml per job as well (or with a regex that matches everything)
2015-02-19T17:32:05  *** teran_ has quit IRC
2015-02-19T17:32:08  *** jlibosva has quit IRC
2015-02-19T17:32:23  <clarkb> BobBall: https://git.openstack.org/cgit/openstack-infra/project-config/tree/zuul/layout.yaml#n527 sorry I forgot about that
2015-02-19T17:32:48  <BobBall> ahhh perfect! Many thanks again :)
2015-02-19T17:33:07  * BobBall is getting there...
2015-02-19T17:33:20  <foobio> clarkb: hrm, i guess tempest test order is nondeterministic so trying to track progress there is likely not tractable
2015-02-19T17:33:33  <clarkb> foobio: ya
2015-02-19T17:33:45  *** teran has joined #openstack-infra
2015-02-19T17:34:06  *** teran__ has quit IRC
2015-02-19T17:34:08  *** unicell has joined #openstack-infra
2015-02-19T17:34:10  <foobio> been running for ~95 minutes now
2015-02-19T17:34:11  *** derekh has quit IRC
2015-02-19T17:34:23  *** Shrews has quit IRC
2015-02-19T17:34:30  *** patrickeast has joined #openstack-infra
2015-02-19T17:35:25  <mtreinish> foobio: heh, well normally you can since the preseeding is a crapshoot on whether it does anything or not
2015-02-19T17:35:34  <jogo> anyone else having issues with gerrit's responsiveness?
2015-02-19T17:35:43  <mtreinish> then it's pseudo alphabetical order
2015-02-19T17:35:46  <foobio> mtreinish: nice!
2015-02-19T17:35:53  *** ldnunes has quit IRC
2015-02-19T17:36:32  *** krotscheck has quit IRC
2015-02-19T17:36:48  <clarkb> anteaya: on 157330 would you like to see those changes enough to -1 instead of +2? otherwise I think I will approve it
2015-02-19T17:38:36  <mtreinish> foobio: do you have a console output somewhere?
2015-02-19T17:38:37  *** ihrachyshka has quit IRC
2015-02-19T17:38:47  *** hdd has joined #openstack-infra
2015-02-19T17:38:51  <foobio> mtreinish: in my ssh session
2015-02-19T17:38:57  <mtreinish> ah, ok
2015-02-19T17:39:28  <zaro> clarkb: i don't see how asselin change (https://review.openstack.org/#/c/155154/) helps with getting '/p/' in review-dev.o.o URL to work.  would you be able to enlighten me?
2015-02-19T17:39:36  *** krotscheck has joined #openstack-infra
2015-02-19T17:40:08  <sigmavirus24> Is anyone else noticing that review.o.o is sluggish today?
2015-02-19T17:40:16  <foobio> sigmavirus24: sdague was noticing it
2015-02-19T17:40:19  *** teran_ has joined #openstack-infra
2015-02-19T17:40:20  <mtreinish> foobio: fwiw, 95 min is a very long time (if you're running in parallel)
2015-02-19T17:40:24  <BobBall> OK - one more question... When running a job kicked by zuul, jenkins does offline my node, but nodepool doesn't delete it.  It doesn't seem to go into the Used state either, just sits there "Ready".  Any ideas?
2015-02-19T17:40:26  <zaro> sigmavirus24: me too
2015-02-19T17:40:37  <clarkb> zaro: by default /p is served by gerrit itself so the normal proxying to gerrit makes /p work. However for us we want /p to bypass gerrit and hit the git repo replica on /var/lib/git. This requirse running a git cgi script so apache needs to be told that it is ok to do that
2015-02-19T17:40:37  * sigmavirus24 wonders if we'll ever find the memory leak causing this
2015-02-19T17:40:41  <foobio> mtreinish: this is the glusterfs job we turned off last night
2015-02-19T17:41:04  <clarkb> zaro: for 155208, should we build 2.8 and 2.9 instead of just 2.9?
2015-02-19T17:41:09  *** teran has quit IRC
2015-02-19T17:41:17  *** Shrews has joined #openstack-infra
2015-02-19T17:41:18  <foobio> sigmavirus24: no signs of packet loss or excessive latency between your system and review.o.o?
2015-02-19T17:41:37  *** bhuvan has joined #openstack-infra
2015-02-19T17:41:49  <sigmavirus24> foobio: everything else seems to be just fine I haven't done a lot of investigation yet though
2015-02-19T17:41:51  <clarkb> foobio: no I am pretty sure its related to gerrits JVM heap size
2015-02-19T17:41:57  <clarkb> foobio: let me link the melody graph again
2015-02-19T17:42:31  *** carl_baldwin has joined #openstack-infra
2015-02-19T17:42:44  *** gondoi is now known as zz_gondoi
2015-02-19T17:43:05  <foobio> log-start-timestamp.txt says i started running it at 16:01:57 utc
2015-02-19T17:43:12  *** markus_z has joined #openstack-infra
2015-02-19T17:43:21  <zaro> foobio: can you check the gerrit queue to see if there are errors?
2015-02-19T17:43:24  <foobio> i want it to hurry up and break so i can go get lunch
2015-02-19T17:44:21  <foobio> zaro: 107 tasks, lots of pending push/upload
2015-02-19T17:44:23  *** ParsectiX has quit IRC
2015-02-19T17:44:35  *** ParsectiX has joined #openstack-infra
2015-02-19T17:44:37  * StevenK peers at zuul
2015-02-19T17:44:40  <clarkb> I think the whole thing gums up as it runs into memory pressure
2015-02-19T17:44:45  *** timcline has quit IRC
2015-02-19T17:44:51  <clarkb> https://review.openstack.org/monitoring?part=graph&graph=usedMemory is the week graph
2015-02-19T17:45:16  <clarkb> mean use has been in steady increase since monday
2015-02-19T17:45:20  *** timcline has joined #openstack-infra
2015-02-19T17:46:10  *** unicell has quit IRC
2015-02-19T17:46:18  *** unicell has joined #openstack-infra
2015-02-19T17:46:51  *** markus_z has quit IRC
2015-02-19T17:46:56  <krotscheck> Hrm, this puppet module is starting to look like it needs a more well developed conf manifest :/
2015-02-19T17:47:12  *** markus_z has joined #openstack-infra
2015-02-19T17:47:28  <zaro> clarkb: good point about keeping the javamelody 2.8 build.  but i don't see any development on it after the upgrade.
2015-02-19T17:48:49  <zaro> foobio: that doesn't seem too bad.  are those mostly from replication?
2015-02-19T17:49:00  <openstackgerrit> Ricardo Carrillo Cruz proposed openstack-infra/shade: Revamp README file  https://review.openstack.org/157463
2015-02-19T17:49:40  <clarkb> zaro: I am more thinking to that we have it if necessary (rollback etc)
2015-02-19T17:49:46  <zaro> clarkb: also wouldn't it get a little unwiedly if we start adding more plugins?
2015-02-19T17:49:46  <clarkb> zaro: then we remove 2.8 when we are happily on 2.9
2015-02-19T17:49:53  <clarkb> zaro: I don't think so
2015-02-19T17:49:57  <foobio> zaro: the git push ones are (that's about half of them) but not sure if the git-upload-pack tasks (roughly the other half) are replication as well
2015-02-19T17:49:58  *** BobBall is now known as BobBall_AWOL
2015-02-19T17:50:04  *** timcline has quit IRC
2015-02-19T17:50:27  <foobio> though now the queue has dropped to 53 tasks so it does seem to be working through them
2015-02-19T17:50:39  <clarkb> https://review.openstack.org/monitoring?part=graph&graph=usedMemory&period=mois that graph is a lot more telling
2015-02-19T17:50:47  <clarkb> zaro: just instantiate the jobs multiple times with different parameters
2015-02-19T17:51:14  <openstackgerrit> Michael Krotscheck proposed openstack-infra/puppet-storyboard: Added new OAuth Parameters  https://review.openstack.org/157464
2015-02-19T17:51:15  <openstackgerrit> Michael Krotscheck proposed openstack-infra/puppet-storyboard: Added a Vagrant module and manifest for easier development.  https://review.openstack.org/157465
2015-02-19T17:51:47  <zaro> clarkb: i don't see why you would need it for rollback since the built version is still gonna be on tarballs
2015-02-19T17:51:58  <foobio> clarkb: score! no kernel panic (yet) but the console is now unresponsive to carriage returns and the df i had running in a loop is hanging
2015-02-19T17:52:05  <openstackgerrit> Ricardo Carrillo Cruz proposed openstack-infra/shade: Revamp README file  https://review.openstack.org/157463
2015-02-19T17:52:13  <krotscheck> nibalizer: I'm trying to find some docs on best practice for module development - like, how to break out all the various config options into something shared.
2015-02-19T17:52:18  <krotscheck> nibalizer: Any pointers?
2015-02-19T17:52:22  <clarkb> foobio: I have never been this excited for brokeness before :)
2015-02-19T17:52:45  <clarkb> zaro: its more a matter of, we haev it today, so it is probably useful, therefore why remove it until we don't need it anymore
2015-02-19T17:52:48  <foobio> clarkb: unfortunately, i have no additional detail, so this doesn't help a bunch
2015-02-19T17:52:54  *** HeOS has quit IRC
2015-02-19T17:52:58  *** salv-orlando has joined #openstack-infra
2015-02-19T17:53:05  <clarkb> foobio: at least it is reproduceable :)
2015-02-19T17:53:53  <zaro> clarkb: ok, i have no arguement against that except that it adds code where not really necessary and requires slightly more maintenance going forward.
2015-02-19T17:54:04  <foobio> clarkb: the ip address still responds to icmp echo but attempting to open a tcp socket to port 22 times out
2015-02-19T17:54:15  <zaro> clarkb: i'm happy to update the change if you feel we should keep it around though.
2015-02-19T17:54:21  <foobio> clarkb: and both my existing ssh sessions seem to have hung
2015-02-19T17:54:30  <clarkb> foobio: anything on the console? eg panic?
2015-02-19T17:54:53  <mkoderer> hi folks, could someone add steveg and me to telcowg-usecases-core?
2015-02-19T17:55:02  <foobio> nope, though it's back to responding to carriage returns ...very...slowly
2015-02-19T17:55:08  *** SumitNaiksatam has joined #openstack-infra
2015-02-19T17:55:15  <nibalizer> krotscheck:  eh not really
2015-02-19T17:55:19  <clarkb> mkoderer: sure, give me a minute
2015-02-19T17:55:29  <nibalizer> krotscheck: you're in seattle tho
2015-02-19T17:55:29  <mkoderer> clarkb: thx :)
2015-02-19T17:55:37  <nibalizer> so sit with crinkle
2015-02-19T17:55:55  <foobio> clarkb: it's too bad i can't send sysrq through rackspace's virtual console
2015-02-19T17:56:19  *** Ryan_Lane has joined #openstack-infra
2015-02-19T17:56:26  <clarkb> mkoderer: you are added but there is no 'steveg' account
2015-02-19T17:56:48  <krotscheck> Who?
2015-02-19T17:56:48  <clarkb> mkoderer: you should be able to add whomever you like at this point though
2015-02-19T17:56:58  <mkoderer> clarkb: ah great :)
2015-02-19T17:57:07  <foobio> clarkb: i'll have to try again to recreate this after lunch and leave myself a console backdoor open. this vm isn't likely to give us much else useful :/
2015-02-19T17:57:21  <clarkb> foobio: ok thanks for the help
2015-02-19T17:57:38  <mkoderer> clarkb: ok worked thx again
2015-02-19T17:57:40  <openstackgerrit> Michael Krotscheck proposed openstack-infra/puppet-storyboard: Added a Vagrant module and manifest for easier development.  https://review.openstack.org/157465
2015-02-19T17:57:41  <openstackgerrit> Michael Krotscheck proposed openstack-infra/puppet-storyboard: Added new OAuth Parameters  https://review.openstack.org/157464
2015-02-19T17:57:45  <zaro> foobio: are you referring to ssh hang to review.o.o?
2015-02-19T17:57:47  <foobio> i lacked the foresight to create a working password login so i could do more than just play with the virtual console login prompt
2015-02-19T17:57:59  <clarkb> zaro: no
2015-02-19T17:58:04  <foobio> zaro: no, completely unrelated problem we've been trying to identify all morning
2015-02-19T17:58:08  <clarkb> zaro: the review.o.o slowness appears to be a memory leak in gerrit
2015-02-19T17:58:19  <clarkb> zaro: over time we use up the entire 8GB heap and things grind to a halt
2015-02-19T17:58:47  <foobio> okay, i'm going out to the burrito bar. back in a while
2015-02-19T17:59:03  <krotscheck> foobio: I hope that's a bar made out of burrito's
2015-02-19T17:59:06  <foobio> thankfully the weather has finally subsided to where we can leave the house again
2015-02-19T17:59:06  <StevenK> Haha
2015-02-19T17:59:13  <zaro> clarkb: nothing's changed for a while. so memory leak must be caused by something right?
2015-02-19T17:59:24  <foobio> krotscheck: it's a burrito made out of bars. steel bars
2015-02-19T17:59:44  <StevenK> foobio: Sounds rather hard to digest, really.
2015-02-19T17:59:49  * krotscheck passes foobio the tums.
2015-02-19T17:59:53  <clarkb> zaro: this has been going on for a while too
2015-02-19T17:59:53  <zaro> clarkb: any info from javamelody?
2015-02-19T18:00:11  <foobio> StevenK: it's an australian recipe
2015-02-19T18:00:15  <StevenK> Woo, zuul queue length is now >1,000
2015-02-19T18:00:17  <clarkb> zaro: yes javamelody is how I have narrowed it down to memory pressure but haven't been able to narrow it from there
2015-02-19T18:00:32  * foobio will bbiaw
2015-02-19T18:00:38  <StevenK> foobio: Surely Australians would be using vegemite jars and beer cans?
2015-02-19T18:00:57  <clarkb> also cpu pegs but I think that is because the garbage collector is doing more work
2015-02-19T18:01:40  *** bswartz has quit IRC
2015-02-19T18:03:38  *** ivar-lazzaro has joined #openstack-infra
2015-02-19T18:04:18  <clarkb> zaro: also restarting the service corrects the problem
2015-02-19T18:04:43  *** bswartz has joined #openstack-infra
2015-02-19T18:05:04  *** AJaeger has joined #openstack-infra
2015-02-19T18:07:09  *** timcline has joined #openstack-infra
2015-02-19T18:07:47  *** olaph has joined #openstack-infra
2015-02-19T18:08:24  *** e0ne has quit IRC
2015-02-19T18:09:19  *** avozza is now known as zz_avozza
2015-02-19T18:09:37  <openstackgerrit> Andreas Jaeger proposed openstack/requirements: Require openstack-doc-tools 0.22  https://review.openstack.org/157472
2015-02-19T18:10:00  *** harlowja has joined #openstack-infra
2015-02-19T18:10:35  *** jgallard__ has quit IRC
2015-02-19T18:10:36  *** doug-fish has joined #openstack-infra
2015-02-19T18:11:11  *** belmoreira has quit IRC
2015-02-19T18:12:35  *** sdake_ has joined #openstack-infra
2015-02-19T18:13:41  <clarkb> javamelody reports that we are spending 10% of our time garbage collecitng now
2015-02-19T18:13:45  <clarkb> and that is a recent change
2015-02-19T18:13:59  <clarkb> will link that graph for people that have access shortly
2015-02-19T18:14:12  <clarkb> https://review.openstack.org/monitoring?part=graph&graph=gc
2015-02-19T18:15:01  <asselin> clarkb,^^ " Forbidden access" for me
2015-02-19T18:15:05  *** teran has joined #openstack-infra
2015-02-19T18:15:07  *** teran has quit IRC
2015-02-19T18:15:12  <olaph> same here
2015-02-19T18:15:20  <clarkb> asselin: ya melody is restricted to gerrit admins because it does a few things that are potentially scary
2015-02-19T18:15:34  *** teran has joined #openstack-infra
2015-02-19T18:15:40  <clarkb> though I can probably screenshot the graph and share that
2015-02-19T18:16:03  *** ParsectiX has quit IRC
2015-02-19T18:16:38  *** ParsectiX has joined #openstack-infra
2015-02-19T18:17:08  *** sdake_ has quit IRC
2015-02-19T18:18:06  *** otter768 has joined #openstack-infra
2015-02-19T18:18:59  *** teran_ has quit IRC
2015-02-19T18:22:41  *** otter768 has quit IRC
2015-02-19T18:22:46  <clarkb> http://i.imgur.com/9c3ZVzr.png
2015-02-19T18:22:51  <clarkb> zaro: olaph asselin ^
2015-02-19T18:25:35  <clarkb> zaro: any other ideas on how to debug this? I am gessing we will need a dump of the heap to figure out where the memory is being used
2015-02-19T18:27:46  <zaro> clarkb: yeah, dump might help
2015-02-19T18:29:24  *** andreaf_ has joined #openstack-infra
2015-02-19T18:30:40  *** prad has quit IRC
2015-02-19T18:31:03  <clarkb> greghaynes: commented on your ssh key in dib change. needs small puppet fix
2015-02-19T18:31:29  *** achanda has joined #openstack-infra
2015-02-19T18:31:38  *** pradk is now known as prad
2015-02-19T18:35:10  *** cnesa1 has joined #openstack-infra
2015-02-19T18:35:13  *** cnesa has quit IRC
2015-02-19T18:35:16  *** sputnik13 has joined #openstack-infra
2015-02-19T18:37:26  <bcourt> this might be a silly question, how does nodepool validate that an image built correctly?  Is it checking the return code of the prepare node script?
2015-02-19T18:39:23  <clarkb> bcourt: it has two bits that do that. First is image building where it checks the return code of the prepare node script. Second is the ready node script which it runs post boot and also checks the return code on
2015-02-19T18:39:44  <clarkb> bcourt: so if nodeool cannot ssh into a node and subsequently run whatever ready script it has successfully that node will be deleted and a new one booted
2015-02-19T18:40:08  <bcourt> clarkb, thanks
2015-02-19T18:40:26  *** EmilienM is now known as EmilienM|afk
2015-02-19T18:41:38  *** hdd has quit IRC
2015-02-19T18:41:58  *** ashleighfarnham has quit IRC
2015-02-19T18:42:23  *** dizquierdo has quit IRC
2015-02-19T18:42:25  *** ashleighfarnham has joined #openstack-infra
2015-02-19T18:42:35  <greghaynes> clarkb: im guessing puppet doesnt mind a trailing end comma?
2015-02-19T18:42:43  <greghaynes> because I also have that going on
2015-02-19T18:42:49  <clarkb> greghaynes: it does not (at least not in puppet3 it did way back when)
2015-02-19T18:42:53  <greghaynes> kk
2015-02-19T18:43:11  <openstackgerrit> greghaynes proposed openstack-infra/project-config: Respect NODEPOOL_SSH_KEY in prepare-node for dib  https://review.openstack.org/157205
2015-02-19T18:43:12  *** melwitt has joined #openstack-infra
2015-02-19T18:43:31  *** BharatK has quit IRC
2015-02-19T18:44:15  <nibalizer> ogod greghaynes is writing poopit?
2015-02-19T18:44:22  * nibalizer watches for other signs of the apocalypes
2015-02-19T18:47:02  *** Sukhdev has joined #openstack-infra
2015-02-19T18:47:02  *** sdake_ has joined #openstack-infra
2015-02-19T18:47:38  <tchaypo> jeblair: i *finally* managed to invoke gerttys search functionality
2015-02-19T18:48:56  <greghaynes> nibalizer: most certainly not
2015-02-19T18:49:20  <tchaypo> nibalizer: have you looked at the weather map of the eastern seaboard?
2015-02-19T18:49:50  <tchaypo> my hometown had an earthquake last week and is expecting a hurricane tomorrow
2015-02-19T18:50:26  *** teran has quit IRC
2015-02-19T18:50:33  *** MaxV has joined #openstack-infra
2015-02-19T18:52:50  <dstufft> sdague: do you just ant a commit message like "stevedore depends on this but doesn't declare it, so let's declare it" ?
2015-02-19T18:53:55  *** ashleighfarnham has quit IRC
2015-02-19T18:54:05  <openstackgerrit> Dan Prince proposed openstack-infra/project-config: Remove check job from tripleo-puppet-elements  https://review.openstack.org/157486
2015-02-19T18:54:17  <sdague> dstufft: sure
2015-02-19T18:54:59  *** ssam2 has quit IRC
2015-02-19T18:57:24  *** yolanda has quit IRC
2015-02-19T18:57:41  <openstackgerrit> James Polley proposed stackforge/gertty: Expand sample keymaps to ameliorate OSX features  https://review.openstack.org/157488
2015-02-19T18:57:44  *** salv-orlando has quit IRC
2015-02-19T18:57:47  *** yolanda has joined #openstack-infra
2015-02-19T18:57:51  <openstackgerrit> Donald Stufft proposed openstack/requirements: Add setuptools to global requirements  https://review.openstack.org/155498
2015-02-19T18:58:01  <dstufft> sdague: ^^
2015-02-19T18:59:14  *** dims_ has joined #openstack-infra
2015-02-19T18:59:31  <dstufft> dhellmann: ^^
2015-02-19T19:00:57  <openstackgerrit> Dan Prince proposed openstack-infra/project-config: Update prepare_tripleo.sh to use git.openstack.org  https://review.openstack.org/157490
2015-02-19T19:02:38  *** dims__ has quit IRC
2015-02-19T19:03:13  <openstackgerrit> James Polley proposed stackforge/gertty: Print keymap command names correctly  https://review.openstack.org/157492
2015-02-19T19:03:29  *** bswartz has quit IRC
2015-02-19T19:04:27  *** yfried|afk has quit IRC
2015-02-19T19:06:50  *** e0ne has joined #openstack-infra
2015-02-19T19:06:51  *** ghostpl_ has quit IRC
2015-02-19T19:10:34  *** r-daneel has joined #openstack-infra
2015-02-19T19:11:22  *** achanda has quit IRC
2015-02-19T19:12:06  *** mestery has joined #openstack-infra
2015-02-19T19:12:35  *** TravT_ has joined #openstack-infra
2015-02-19T19:14:55  *** Guest21555 has quit IRC
2015-02-19T19:14:57  *** Hal has joined #openstack-infra
2015-02-19T19:15:20  *** Hal is now known as Guest42102
2015-02-19T19:15:53  <zaro> clarkb: Just a guess, it might be sshd causing memory leak, similar to https://code.google.com/p/gerrit/issues/detail?id=2003 ,  dump might narrow it down.
2015-02-19T19:15:58  *** dustins has quit IRC
2015-02-19T19:17:35  <TravT_> Hello infra: if anybody has some time to look at a couple of requirements patches we have up. Would appreciate it.
2015-02-19T19:17:43  <TravT_> we're running a "virtual sprint" in horizon
2015-02-19T19:17:55  <TravT_> where everybody comes together for several hours on code reviews
2015-02-19T19:18:12  <TravT_> and the patches that need a couple of requirements are coming up.
2015-02-19T19:18:13  *** MarkAtwood has quit IRC
2015-02-19T19:18:17  <TravT_> https://review.openstack.org/#/c/147362/
2015-02-19T19:18:25  <TravT_> https://review.openstack.org/#/c/155625/
2015-02-19T19:19:13  *** r-daneel has quit IRC
2015-02-19T19:19:24  <zaro> clarkb: Gerrit 2.8 is using sshd ver 0.11.0, Gerrit 2.9 reverted to using ver 0.9.0
2015-02-19T19:19:24  *** Guest42102 has quit IRC
2015-02-19T19:19:32  *** sarob has joined #openstack-infra
2015-02-19T19:19:50  <AJaeger> TravT_: infra is just the fallback for requirements, see here for list of cores: https://review.openstack.org/#/admin/projects/openstack/requirements,access
2015-02-19T19:20:40  <TravT_> thanks, also figured dropping a note in here might help.
2015-02-19T19:23:11  *** HeOS has joined #openstack-infra
2015-02-19T19:23:34  *** MaxV has quit IRC
2015-02-19T19:23:59  *** markus_z has quit IRC
2015-02-19T19:24:45  *** bswartz has joined #openstack-infra
2015-02-19T19:26:34  *** dims_ has quit IRC
2015-02-19T19:26:52  <greghaynes> huh, my loal nodepool dib image is failing to build because the 90-venv-swift-logs install.d needs virtualenv but this isnt installed
2015-02-19T19:26:56  <greghaynes> do we not have an element that does this?
2015-02-19T19:27:14  <openstackgerrit> Michael Krotscheck proposed openstack-infra/puppet-storyboard: Added a Vagrant module and manifest for easier development.  https://review.openstack.org/157465
2015-02-19T19:28:23  <asselin> anyone seen this nodepool exception deleting a node? http://paste.openstack.org/show/177836/
2015-02-19T19:28:46  *** vigneshvar has joined #openstack-infra
2015-02-19T19:29:02  <otherwiseguy> So, all neutron patches seem to be failing on gate-neutron-pylint all of a sudden.
2015-02-19T19:29:42  <foobio> otherwiseguy: new version of pylint maybe?
2015-02-19T19:29:44  <otherwiseguy> ala https://jenkins04.openstack.org/job/gate-neutron-pylint/1383/console
2015-02-19T19:30:05  *** tiswanso has joined #openstack-infra
2015-02-19T19:30:07  *** dustins has joined #openstack-infra
2015-02-19T19:30:11  <foobio> hrm, no new pylint for a month
2015-02-19T19:30:41  <foobio> clarkb: interesting update, i left my hung ssh sessions going while lunching. on returning i found they'd recovered
2015-02-19T19:31:09  *** abhirc has quit IRC
2015-02-19T19:31:15  <foobio> clarkb: devstack-gate _did_ eventually successfully timeout and kill tempest
2015-02-19T19:31:54  <otherwiseguy> Looks like a change in novaclient or something maybe.
2015-02-19T19:31:57  * otherwiseguy investigates
2015-02-19T19:32:09  *** BobBall_AWOL is now known as BobBall
2015-02-19T19:32:09  <foobio> clarkb: oom
2015-02-19T19:32:15  <foobio> clarkb: Killed process 6448 (mysqld) total-vm:4797460kB, anon-rss:228456kB, file-rss:0kB
2015-02-19T19:32:39  *** salv-orlando has joined #openstack-infra
2015-02-19T19:34:01  <foobio> otherwiseguy: i have to wonder why neutron pylint jobs would be checking novaclient source
2015-02-19T19:34:08  <openstackgerrit> James Graf proposed openstack-infra/jenkins-job-builder: Add support for Job DSL plugin for Groovy-based job and view creation and management  https://review.openstack.org/150112
2015-02-19T19:34:10  *** achanda has joined #openstack-infra
2015-02-19T19:34:20  <otherwiseguy> neutron has a notifier that uses novaclient
2015-02-19T19:35:13  <BobBall> What should be setting nodepool nodes to USED?  Zuul successfully runs a job on a node, but it's not transitioning to USED then to deleting - presumably because the onStarted messages aren't sent and/or received, but I don't see where they are sent from and why they might not be being sent.
2015-02-19T19:35:17  *** mpavone has joined #openstack-infra
2015-02-19T19:35:35  <foobio> otherwiseguy: oh, is pylint failing in some way other than pointing out lint-specific issues?
2015-02-19T19:35:44  <otherwiseguy> No name 'client' in module 'novaclient.v1_1
2015-02-19T19:35:48  <foobio> like hitting an import failure or something?
2015-02-19T19:35:53  <foobio> yeah, that seems likely then
2015-02-19T19:35:54  <otherwiseguy> No name 'contrib' in module 'novaclient.v1_1
2015-02-19T19:36:08  <foobio> so the pylint run isn't so much failing ans completely breaking
2015-02-19T19:36:11  <otherwiseguy> from lines:
2015-02-19T19:36:13  <otherwiseguy> 18 import novaclient.v1_1.client as nclient
2015-02-19T19:36:13  <otherwiseguy>  19 from novaclient.v1_1.contrib import server_external_events
2015-02-19T19:36:36  <foobio> probably was a novaclient release today
2015-02-19T19:37:03  <foobio> yep, see https://pypi.python.org/pypi/python-novaclient and -dev ml thread
2015-02-19T19:37:09  <foobio> 2.21.0 release today
2015-02-19T19:37:30  <otherwiseguy> why would the v1_1 stuff change with a new release?
2015-02-19T19:37:31  * otherwiseguy sighs
2015-02-19T19:38:07  <otherwiseguy> So close to getting everything merged. No more 20-patch-long chains for me. :p
2015-02-19T19:38:34  *** krtaylor has quit IRC
2015-02-19T19:38:38  *** tiswanso has quit IRC
2015-02-19T19:38:55  <foobio> otherwiseguy: i would suggest asking the novaclient devs for details (though a quick hack through git diff 2.20.0..2.21.0 and some selective blaming would get you a commit message and possibly bug/spec link with details)
2015-02-19T19:38:59  *** vigneshvar has quit IRC
2015-02-19T19:39:13  *** tiswanso has joined #openstack-infra
2015-02-19T19:39:15  *** TravT_ has left #openstack-infra
2015-02-19T19:39:28  <otherwiseguy> https://github.com/openstack/python-novaclient/blob/master/novaclient/v1_1/__init__.py
2015-02-19T19:40:16  <otherwiseguy> "Rename v1_1 to v2" for a patch name sounds ominous.
2015-02-19T19:40:22  <foobio> heh
2015-02-19T19:40:24  <foobio> indeed!
2015-02-19T19:41:01  <foobio> if that was a public api, then leaving v1_1 aliased to that would have been nice
2015-02-19T19:41:23  *** mrunge has joined #openstack-infra
2015-02-19T19:41:37  <otherwiseguy> foobio: yes, yes it would have been.
2015-02-19T19:42:32  <foobio> otherwiseguy: might be a quick patch and 2.21.1 brown-bag release away
2015-02-19T19:42:58  <foobio> i suggest following up to the release announcement on the -dev ml
2015-02-19T19:43:17  <openstackgerrit> Dan Prince proposed openstack-infra/project-config: Actually test tripleo-puppet-elements  https://review.openstack.org/157503
2015-02-19T19:44:26  *** pelix has quit IRC
2015-02-19T19:44:26  *** mestery has quit IRC
2015-02-19T19:44:30  <foobio> also, mikal ^ if you're around, see otherwiseguy's shiny new brokenness
2015-02-19T19:46:05  <clarkb> foobio interesting
2015-02-19T19:46:21  <clarkb> I am running errands for sick wife should be able to help debug in a while
2015-02-19T19:46:44  <foobio> clarkb: take your time. it will keep
2015-02-19T19:46:57  <clarkb> BobBall nodepool listens to the jenkins zmq event publisher
2015-02-19T19:47:57  <BobBall> *sigh* somehow that had been disabled.  That'll be the issue then.  Thanks again clarkb.
2015-02-19T19:48:18  <foobio> BobBall: sounds like you need to take away someone's mouse finger
2015-02-19T19:48:21  <mordred> foobio: wait - what?
2015-02-19T19:48:29  <mordred> they renamed v1_1 to v2?
2015-02-19T19:48:35  <BobBall> *grin*
2015-02-19T19:48:36  <foobio> mordred: what the what what?
2015-02-19T19:48:51  * mordred reading scrollback
2015-02-19T19:48:54  <foobio> mordred: yeah, but not in anything widely used, just you know novaclient
2015-02-19T19:48:58  <mordred> AWESOME
2015-02-19T19:49:40  <foobio> and apparently at least some feature of neutron (master at a minimum) was importing from it
2015-02-19T19:49:57  <jroll> o.o
2015-02-19T19:50:16  <foobio> i guess not in devstack-deployed scenarios, so only tripped on neutron's pylint job
2015-02-19T19:50:28  <foobio> hence not noticed until a new novaclient release happened
2015-02-19T19:51:12  *** erlon has quit IRC
2015-02-19T19:52:07  <dhellmann> dstufft: +2a
2015-02-19T19:52:18  <mordred> foobio: well, also - I USE THAT CODE PATH
2015-02-19T19:52:46  <foobio> mordred: not any more you don't
2015-02-19T19:52:59  <mordred> mikal, sdague, jogo: ^^^ I would like to complain about your breakage of library
2015-02-19T19:53:02  <foobio> (well, until they fix it hopefully)
2015-02-19T19:54:00  <mordred> https://github.com/openstack-infra/shade/blob/master/shade/__init__.py#L27
2015-02-19T19:54:18  <mordred> https://github.com/openstack-infra/nodepool/blob/master/nodepool/provider_manager.py#L24
2015-02-19T19:54:43  <mordred> https://github.com/openstack-infra/system-config/blob/master/launch/launch-node.py#L50
2015-02-19T19:54:44  <otherwiseguy> foobio: is it possible to temporarily disable neutron's pylint test voting?
2015-02-19T19:54:59  <mordred> mikal, sdague, jogo: ^^^ it turns out that infra uses that code path
2015-02-19T19:55:06  *** yamamoto has joined #openstack-infra
2015-02-19T19:55:15  <mordred> and I find removing it from a widely used library yuck
2015-02-19T19:55:48  <otherwiseguy> mordred: it looked like they just modify sys.modules directly to alias it, which pylint doesn't see?
2015-02-19T19:55:54  <foobio> otherwiseguy: yeah, you could override it in neutron's tox.ini to just always return true, or submit a patch to openstack-infra/project-config to override it to voting:false in zuul/layout.yaml
2015-02-19T19:56:18  <mordred> otherwiseguy: oh, how clever
2015-02-19T19:56:23  <otherwiseguy> mordred: https://github.com/openstack/python-novaclient/blob/master/novaclient/v1_1/__init__.py#L43
2015-02-19T19:58:57  <mordred> otherwiseguy: sigh
2015-02-19T19:59:23  *** yamamoto has quit IRC
2015-02-19T19:59:53  <openstackgerrit> Terry Wilson proposed openstack-infra/project-config: Disable voting on pylint because of novaclient breakage  https://review.openstack.org/157507
2015-02-19T19:59:59  <otherwiseguy> foobio: ^ like that?
2015-02-19T20:00:03  * otherwiseguy has no idea what he is doing
2015-02-19T20:00:34  <foobio> it's entirely possible that this could also be considered a http://xkcd.com/1172 on pylint's part
2015-02-19T20:00:59  <mordred> ok - I will scream less - I have tested that the code paths work
2015-02-19T20:01:07  <mordred> although now they throw deprecation warnings
2015-02-19T20:01:23  <mordred> it would be great if someone had an example of the "right" way
2015-02-19T20:01:24  *** dims__ has joined #openstack-infra
2015-02-19T20:01:42  <foobio> otherwiseguy: also further down in the openstack/neutron entry for the projects list take it out of the gate pipeline
2015-02-19T20:01:43  *** bswartz has quit IRC
2015-02-19T20:02:11  *** crc32 has joined #openstack-infra
2015-02-19T20:02:55  <foobio> otherwiseguy: this way it runs non-voting in the check pipeline and not at all in the gate pipeline
2015-02-19T20:03:19  <openstackgerrit> Terry Wilson proposed openstack-infra/project-config: Disable voting on pylint because of novaclient breakage  https://review.openstack.org/157507
2015-02-19T20:03:44  *** r1chardj0n3s_afk is now known as r1chardj0n3s
2015-02-19T20:04:26  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Import from v2 instead of v1_1  https://review.openstack.org/157509
2015-02-19T20:05:08  <vipul> question about global-requirements.. is there a reason why python-openstackclient isn't there?  noticed most of the other clients exist
2015-02-19T20:05:26  <otherwiseguy> mordred: https://github.com/openstack/python-novaclient/blob/master/novaclient/v1_1/__init__.py#L32
2015-02-19T20:05:27  <otherwiseguy> :)
2015-02-19T20:05:28  <foobio> vipul: what other projects use python-openstackclient?
2015-02-19T20:05:35  <otherwiseguy> mordred: looks like https://github.com/openstack/python-novaclient/blob/master/novaclient/v1_1/__init__.py#L32
2015-02-19T20:05:37  <otherwiseguy> doh
2015-02-19T20:05:39  *** dims__ has quit IRC
2015-02-19T20:05:40  <foobio> vipul: that is, what is it a requirement of?
2015-02-19T20:05:55  <otherwiseguy> mordred: I'm guessing https://github.com/openstack/python-novaclient/blob/master/novaclient/client.py#L778 get_client_class()
2015-02-19T20:06:07  <vipul> foobio: https://github.com/stackforge/python-cueclient/blob/master/requirements.txt
2015-02-19T20:06:35  *** crc32 has quit IRC
2015-02-19T20:06:40  <vipul> foobio: also... https://github.com/stackforge/python-congressclient/blob/master/requirements.txt
2015-02-19T20:07:06  <openstackgerrit> Monty Taylor proposed openstack-infra/nodepool: Change references from v1_1 to v2  https://review.openstack.org/157512
2015-02-19T20:07:26  <mordred> otherwiseguy: awsome
2015-02-19T20:07:34  <foobio> vipul: weird. what do they use openstackclient for? just avoiding depending on the python sdk (novaclient, neutronclient, et cetera)?
2015-02-19T20:07:35  *** r1chardj0n3s has left #openstack-infra
2015-02-19T20:08:01  <vipul> foobio: they are implemented as 'plugins' to python-openstackclient rather than introducing their own shell
2015-02-19T20:08:47  *** dprince has quit IRC
2015-02-19T20:08:54  <vipul> foobio: https://github.com/stackforge/python-congressclient/blob/master/setup.cfg#L27
2015-02-19T20:09:00  <foobio> vipul: that seems like it gets the dependency backwards then... you're saying they don't use openstackclient, but openstackclient uses them?
2015-02-19T20:09:07  <mordred> no - they're right
2015-02-19T20:09:10  <mordred> if you want to install cueclient
2015-02-19T20:09:12  <mordred> you install it
2015-02-19T20:09:18  *** ghostpl_ has joined #openstack-infra
2015-02-19T20:09:24  <mordred> and it installs an _additional_ optional plugin for python-openstackclient
2015-02-19T20:09:27  *** MaxV has joined #openstack-infra
2015-02-19T20:09:30  <foobio> oh, so it's still invoked ac cueclient, not as a plugin to openstackclient
2015-02-19T20:09:33  <mordred> that is then consumed by running openstackclient
2015-02-19T20:09:35  <mordred> nope
2015-02-19T20:09:39  <mordred> you run openstackclient
2015-02-19T20:09:40  <vipul> essentially it allows you to run 'openstack <your plugin command>'
2015-02-19T20:09:45  <foobio> er
2015-02-19T20:09:48  <mordred> but if you install the cueclient plugin, you get more commands in openstackclient
2015-02-19T20:09:58  <mordred> so openstackclient doesn't depend on it
2015-02-19T20:10:07  <mordred> but cueclient is useless without openstackclient
2015-02-19T20:10:13  <foobio> i mean, the same could be said of any optional dependency i guess
2015-02-19T20:10:16  <mordred> yes
2015-02-19T20:10:43  <mordred> it's like "apt-get install firefox-plugin-lightning" which you'd expect to wind up also installing firefox if it's not installed
2015-02-19T20:11:17  <vipul> mordred: great example !
2015-02-19T20:12:23  <foobio> yep, that analogy works
2015-02-19T20:12:38  <vipul> shall i submit a patch? foobio
2015-02-19T20:13:00  <foobio> so this goes back to the "should we include dependencies only requested by stackforge projects in the openstack projects global requirements list?" debate
2015-02-19T20:13:21  <mordred> foobio: I honestly think python-openstackclient is fair game for requirements
2015-02-19T20:13:22  <foobio> vipul: feel free to submit a patch. i don't generally vote on requirements patches though so my opinion should be taken with a grain of salt
2015-02-19T20:13:27  <mordred> without having to go down the rabbithole
2015-02-19T20:13:31  <vipul> should stackforge projects be allowed to plugin to devstack?
2015-02-19T20:13:33  *** ghostpl_ has quit IRC
2015-02-19T20:13:45  *** mestery has joined #openstack-infra
2015-02-19T20:13:47  *** ghostpl_ has joined #openstack-infra
2015-02-19T20:13:49  <vipul> this is where this dependency is needed.. when setting up devstack
2015-02-19T20:14:22  <vipul> foobio: will do
2015-02-19T20:14:43  *** aysyd has quit IRC
2015-02-19T20:14:46  <foobio> vipul: we have soft requirements where unofficial projects can set a flag that lets them include requirements which aren't in the official global requirements list
2015-02-19T20:14:57  <foobio> in devstack-based jobs
2015-02-19T20:15:24  <vipul> something i can set in my local.conf?
2015-02-19T20:15:32  <foobio> it basically turns off devstack's complaint about using a package which isn't in global requirements
2015-02-19T20:15:35  * foobio gets the details
2015-02-19T20:16:03  *** krtaylor has joined #openstack-infra
2015-02-19T20:16:14  *** dprince has joined #openstack-infra
2015-02-19T20:16:33  <foobio> REQUIREMENTS_MODE=soft
2015-02-19T20:16:44  <foobio> looking for an example job definition to point you at now
2015-02-19T20:16:59  <vipul> foobio: awesome i'll try that.. thx for the help
2015-02-19T20:19:01  *** otter768 has joined #openstack-infra
2015-02-19T20:19:07  <foobio> yeah, REQUIREMENTS_MODE defaults to "strict" in devstack-gate but can be overridden from the calling environment, and then passes that into devstack which also defaults to "strict" but bypasses that extra requirements check if it's "soft" instead
2015-02-19T20:19:37  <foobio> however i don't see any current jobs passing that into devstack-gate, in theory it's an implemented and working feature
2015-02-19T20:20:47  *** tkelsey has quit IRC
2015-02-19T20:22:52  *** rfolco has quit IRC
2015-02-19T20:23:13  *** ociuhandu has quit IRC
2015-02-19T20:23:42  *** otter768 has quit IRC
2015-02-19T20:25:09  *** abhirc has joined #openstack-infra
2015-02-19T20:28:14  *** achanda has quit IRC
2015-02-19T20:28:43  <openstackgerrit> Merged openstack-infra/project-config: Disable voting on pylint because of novaclient breakage  https://review.openstack.org/157507
2015-02-19T20:29:12  <AJaeger> otherwiseguy: once pylint passes again, please propose a revert of the patch
2015-02-19T20:29:49  <otherwiseguy> AJaeger: will do. Also have a patch that should adapt to the new novaclient change pending in the neutron queue.
2015-02-19T20:30:17  <AJaeger> otherwiseguy: great!
2015-02-19T20:30:18  <otherwiseguy> I haven't run even basic testing on it, and have no idea if I did things right because I pretty much just wrote and submitted to see what would happen.
2015-02-19T20:30:51  <otherwiseguy> (the neutron way?) /js
2015-02-19T20:30:57  <otherwiseguy> er, 's
2015-02-19T20:31:02  * otherwiseguy gives up
2015-02-19T20:32:27  *** ihrachyshka has joined #openstack-infra
2015-02-19T20:32:49  *** achanda has joined #openstack-infra
2015-02-19T20:37:06  <jogo> mordred: looking into it
2015-02-19T20:37:30  *** MaxV has quit IRC
2015-02-19T20:37:33  *** hdd has joined #openstack-infra
2015-02-19T20:39:24  <otherwiseguy> weird, disconnected right as I sent that message. Guest79?
2015-02-19T20:42:20  *** tkelsey has joined #openstack-infra
2015-02-19T20:42:39  *** bswartz has joined #openstack-infra
2015-02-19T20:43:47  <openstackgerrit> mbitard proposed openstack-infra/jenkins-job-builder: add slack notification support, largely inspired by hipchat module  https://review.openstack.org/136627
2015-02-19T20:44:43  *** ddieterly has quit IRC
2015-02-19T20:46:56  *** Sukhdev has quit IRC
2015-02-19T20:47:05  *** e0ne has quit IRC
2015-02-19T20:47:41  <jogo> mordred: we didn't break anything novaclient.v1_1 still works https://review.openstack.org/#/c/149006/13/novaclient/v1_1/__init__.py,cm
2015-02-19T20:47:45  *** jedimike has quit IRC
2015-02-19T20:48:01  <jogo> mordred: its just pylint isn't smart
2015-02-19T20:48:06  <foobio> jogo: yeah, it turns out it just wasn't backward-compatible in a way which pylint could follow
2015-02-19T20:48:07  <mikal> mordred: I find the tone of your conversation intriguing
2015-02-19T20:48:20  <clarkb> ok mostly back now
2015-02-19T20:48:43  <jogo> foobio: silly pylint
2015-02-19T20:48:48  *** ZZelle_ has joined #openstack-infra
2015-02-19T20:49:12  <foobio> jogo: i like to anagram it as "pintly"
2015-02-19T20:49:30  *** ddieterly has joined #openstack-infra
2015-02-19T20:49:58  <jogo> haha
2015-02-19T20:50:13  *** arosen has quit IRC
2015-02-19T20:51:19  *** yamahata has quit IRC
2015-02-19T20:51:48  <foobio> jogo: a cursory review of novaclient commit subject lines since the prior release turned up a change which looked like it was moving v1_1 to v2 which would have explained the pylint error, but closer examination revealed that it was still aliased to the new name and pylint was merely a mendicant
2015-02-19T20:52:07  *** mpavone has quit IRC
2015-02-19T20:52:32  *** w_ has joined #openstack-infra
2015-02-19T20:52:55  *** dkranz has quit IRC
2015-02-19T20:53:34  *** gyee has joined #openstack-infra
2015-02-19T20:53:45  <mikal> jogo: but we still managed to make it sound like the nova team is incompetent, just to keep it real
2015-02-19T20:53:51  <mordred> mikal: I'd like to sell you some real estate
2015-02-19T20:54:13  *** sdake_ has quit IRC
2015-02-19T20:54:53  <clarkb> hrm if I were to make a heap dump of gerrit I doubt I could share it because secrets
2015-02-19T20:55:06  <clarkb> also I doubt that I will have the patience to dig through it to find a memory leak
2015-02-19T20:55:21  <foobio> clarkb: yeah we'd probably need to spend quite a lot of time to filter than down and sanitize/redact things
2015-02-19T20:55:59  <mriedem> mordred
2015-02-19T20:56:05  <mriedem> oops, disregard
2015-02-19T20:56:15  <clarkb> so I am leaning towards just restarting it, but can figure out jmap if someone really wants that heap data and its safe to share it with them
2015-02-19T20:56:21  <clarkb> foobio: jeblair mordred jhesketh SergeyLukjanov pleia2 ^
2015-02-19T20:56:23  *** sdake_ has joined #openstack-infra
2015-02-19T20:57:19  <foobio> clarkb: i wouldn't know what to do with it, but if it's easy to dump and stash for now then we can always trot it out later to answer more directed questions if there's a gerritite willing to help us troubleshoot post-mortem
2015-02-19T20:57:42  <clarkb> wait people willingly use pylint?
2015-02-19T20:57:53  <clarkb> foobio: well I think it will make an 8GB binary file
2015-02-19T20:57:59  <foobio> clarkb: yes, neutron (recentlyish i believe) added it back
2015-02-19T20:58:02  <clarkb> foobio: which would then have to be sanitized
2015-02-19T20:58:16  *** arosen has joined #openstack-infra
2015-02-19T20:58:25  *** ZZelle__ has joined #openstack-infra
2015-02-19T20:58:31  *** ZZelle__ has quit IRC
2015-02-19T20:58:52  <clarkb> and jmap isn't in my path on review.o.o
2015-02-19T20:59:06  <clarkb> zaro: ^ is jmap what I should be using? the internet says it is but I am a noob at jvm debugging tools
2015-02-19T20:59:09  <foobio> clarkb: if memory serves the reasoning was that pyflakes' static analysis didn't cover some of the problems deeper inspection via pylint pointed out
2015-02-19T20:59:24  <clarkb> foobio: ya but pylint also points out a lot of things that aren't issues
2015-02-19T20:59:32  <clarkb> its false positive rate is incredibly high
2015-02-19T20:59:34  <BobBall> foobio: Did you get to the bottom of the EOF issue from earlier?  I'm hitting it too on my Ubuntu nodes - testing with Xen.  During the devstack setup script it dies
2015-02-19T20:59:45  <dansmith> clarkb: yeah I was thinking "holy crap, voting pylint in a gate?"
2015-02-19T21:00:01  <foobio> and also to achieve that deeper analysis it has to do things like import modules outside of normal python mechanisms
2015-02-19T21:00:09  <foobio> hence... this
2015-02-19T21:00:40  <foobio> BobBall: eof problem what now?
2015-02-19T21:00:43  *** crc32 has joined #openstack-infra
2015-02-19T21:00:49  <anteaya> clarkb: nah, you can go ahead on https://review.openstack.org/#/c/157330
2015-02-19T21:01:07  <BobBall> foobio: SSH session just dying causing an exception log in jenkins
2015-02-19T21:01:20  <clarkb> anteaya: thanks
2015-02-19T21:01:23  <BobBall> foobio: it was deepakcs problem with the glusterfs jobs
2015-02-19T21:01:25  <foobio> BobBall: for glusterfs?
2015-02-19T21:01:58  <foobio> BobBall: the held worker i ran it manually on eventually recovered, though the kernel oom killer did shoot mysqld in the head along the way
2015-02-19T21:02:19  <openstackgerrit> mbitard proposed openstack-infra/jenkins-job-builder: add slack notification support, largely inspired by hipchat module  https://review.openstack.org/136627
2015-02-19T21:02:22  <BobBall> Hmmmz - interesting...
2015-02-19T21:02:44  *** sdake_ has quit IRC
2015-02-19T21:02:47  <otherwiseguy> clarkb: yeah, neutron gates on pylint...after disabling at least 50 tests.
2015-02-19T21:02:54  <otherwiseguy> :)
2015-02-19T21:02:56  <BobBall> Also interesting I just noticed that nodepool failed to kill the nodes that seem to be dying... saying they don't exist.  Which sound highly fatal and interesting to me...
2015-02-19T21:03:14  *** sdake_ has joined #openstack-infra
2015-02-19T21:03:32  <clarkb> supposedly jmap comes from the jdk, we must only install jre. I am confirming that. There is an option to have signal 3 create a heap dump which I may enable post restart for next time this happens
2015-02-19T21:03:35  <foobio> i started devstack-gate at 16:01:57 and the kernel killed mysqld at 18:47:08 so that may have been unrelated breakage after the fact
2015-02-19T21:03:51  <BobBall> ah no - I misread the log - it was the node in jenkins that had disappeared
2015-02-19T21:04:13  *** unicell has quit IRC
2015-02-19T21:04:21  *** unicell has joined #openstack-infra
2015-02-19T21:04:45  * BobBall holds a node to try and get some debug info out
2015-02-19T21:04:51  <clarkb> ya we install the openjdk-7-jre-headless package so no jmap. My vote is for not doing a heap dump today, but add the flag to the jvm that will do a heap dump on signal 3 when we restart gerrit
2015-02-19T21:04:56  <clarkb> I will write the puppet change for that now
2015-02-19T21:05:25  <foobio> ahh, nope, timing works out. mysqld oom'd about 4 seconds before the devstack-gate-cleanup-host.txt log starts
2015-02-19T21:06:01  <BobBall> Ah - yes.  I bet mine is an OOM too.
2015-02-19T21:06:10  <jogo> mordred: btw did you ever re-fix the pbr/setuptools issue with creating binaries
2015-02-19T21:06:13  <BobBall> *fixes dom0 RAM*...
2015-02-19T21:06:15  *** achanda has quit IRC
2015-02-19T21:06:46  <BobBall> I wonder if we should give the OOMkiller some hints not to kill SSH
2015-02-19T21:06:55  *** sabeen2 has joined #openstack-infra
2015-02-19T21:07:05  <jogo> mordred: a release with https://review.openstack.org/#/c/150803/  in it that is
2015-02-19T21:07:13  <BobBall> but perhaps to kill the d-g-wrap script first which should let us extract logs perhaps?
2015-02-19T21:07:24  <mordred> No. Thanks for reminder
2015-02-19T21:07:45  <clarkb> BobBall: at one point we did use cgroups for that. not sure if those are still in use
2015-02-19T21:07:52  *** sabeen has quit IRC
2015-02-19T21:08:00  <clarkb> BobBall: basically set a lower memory threshhold for the safe processes allowing ssh to survive
2015-02-19T21:08:37  *** mpavone has joined #openstack-infra
2015-02-19T21:09:36  *** sdake_ has quit IRC
2015-02-19T21:10:00  *** doude has quit IRC
2015-02-19T21:10:27  *** doude has joined #openstack-infra
2015-02-19T21:11:32  <openstackgerrit> Merged openstack-infra/project-config: Clone using git.o.o instead of directly from gerrit  https://review.openstack.org/157330
2015-02-19T21:13:10  *** mpavone has quit IRC
2015-02-19T21:13:44  *** abhirc has quit IRC
2015-02-19T21:14:43  <openstackgerrit> Clark Boylan proposed openstack-infra/puppet-gerrit: Collect Gerrit heap dumps on signal 3  https://review.openstack.org/157527
2015-02-19T21:14:48  <clarkb> zaro: foobio ^ something like that
2015-02-19T21:14:58  <clarkb> I should probably test that on review dev first though
2015-02-19T21:15:18  <clarkb> zaro: is it ok for me to use review-dev for some testing of that?
2015-02-19T21:15:32  <AJaeger> clarkb, foobio: If either of you have some spare review cycles, I would like to unblock the training-guides folks: https://review.openstack.org/#/c/152118/
2015-02-19T21:15:42  <AJaeger> could you review it, please?
2015-02-19T21:16:01  <clarkb> AJaeger: sure
2015-02-19T21:16:05  <AJaeger> There's on +2 already - and I did the last change, so don't want to +2 myself ;)
2015-02-19T21:16:09  <AJaeger> thanks, clarkb!
2015-02-19T21:16:24  <sarob> \o/
2015-02-19T21:17:18  <openstackgerrit> Khai Do proposed openstack-infra/project-config: Add a job for Gerrit javamelody plugin ver 2.9  https://review.openstack.org/155208
2015-02-19T21:17:20  *** abhirc has joined #openstack-infra
2015-02-19T21:18:39  <jogo> wee cells broke the gate
2015-02-19T21:18:48  *** markmcclain has quit IRC
2015-02-19T21:19:30  <openstackgerrit> Joe Gordon proposed openstack-infra/project-config: Stop making devstack-dsvm-cells voting  https://review.openstack.org/157530
2015-02-19T21:19:47  <jogo> mriedem alaski: ^
2015-02-19T21:20:04  <jogo> foobio clarkb: ^ that should unwedge the world
2015-02-19T21:20:32  *** mbacchi has quit IRC
2015-02-19T21:20:53  <clarkb> hahahahahahahaha I figured out why my puppet env is borken
2015-02-19T21:21:01  <clarkb> I fetched puppet-gerrit into system-config
2015-02-19T21:21:07  <clarkb> such shame
2015-02-19T21:21:26  <clarkb> jogo: why not revert the nova change that broke cells?
2015-02-19T21:21:37  <jogo> clarkb: we don't know what it is yet
2015-02-19T21:21:45  <jogo> plus that job should really go bye bte
2015-02-19T21:21:49  <jogo> plus that job should really go bye bye
2015-02-19T21:21:59  *** timcline has quit IRC
2015-02-19T21:22:06  *** ghostpl_ has quit IRC
2015-02-19T21:22:11  *** mbacchi has joined #openstack-infra
2015-02-19T21:22:32  <clarkb> then delete the job don't make it non voting...
2015-02-19T21:22:36  <openstackgerrit> Joe Gordon proposed openstack-infra/project-config: Stop making devstack-dsvm-cells voting  https://review.openstack.org/157530
2015-02-19T21:22:45  <openstackgerrit> Matt Riedemann proposed openstack-infra/project-config: Stop making devstack-dsvm-cells voting  https://review.openstack.org/157530
2015-02-19T21:23:00  <clarkb> zaro: ok I don't hear any nays to me restarting review-dev with those jvm options
2015-02-19T21:23:08  <clarkb> zaro: I am going to restart it shortly if I don't hear otherwise
2015-02-19T21:23:17  <alaski> jogo: why do you want to remove that job?  It works as a good smoke test for cells
2015-02-19T21:23:28  <jogo> alaski: first things first
2015-02-19T21:23:46  <jogo> alaski: lets make it non-voting to unwedge everything
2015-02-19T21:24:05  <jogo> then we can have the to remove or not discussion
2015-02-19T21:24:15  *** achanda has joined #openstack-infra
2015-02-19T21:24:17  *** signed8bit has quit IRC
2015-02-19T21:24:39  *** signed8bit has joined #openstack-infra
2015-02-19T21:25:34  <openstackgerrit> Matt Riedemann proposed openstack-infra/elastic-recheck: Add query for cells bug 1423695  https://review.openstack.org/157532
2015-02-19T21:25:34  <openstack> bug 1423695 in OpenStack Compute (nova) "gate-devstack-dsvm-cells fails attaching volume" [Undecided,New] https://launchpad.net/bugs/1423695
2015-02-19T21:25:57  *** AJaeger has quit IRC
2015-02-19T21:26:52  <openstackgerrit> Merged openstack-infra/project-config: Updates training guides jobs  https://review.openstack.org/152118
2015-02-19T21:26:56  *** mrmartin has quit IRC
2015-02-19T21:27:02  * clarkb restarts review-dev
2015-02-19T21:27:53  <pleia2> oof, between conference and related events, and the time change, I've been totally not here all week
2015-02-19T21:28:09  <anteaya> pleia2: how goes the long sleeves in hot weather set?
2015-02-19T21:28:29  *** mbacchi has quit IRC
2015-02-19T21:28:30  <pleia2> anteaya: they have amazing air conditioning, and it's a dry heat, so when we do go outside it's ok
2015-02-19T21:28:31  *** ddieterly has quit IRC
2015-02-19T21:28:44  <anteaya> hehehe
2015-02-19T21:28:46  <anteaya> awesome
2015-02-19T21:28:49  <anteaya> how is the food?
2015-02-19T21:28:53  *** ddieterly has joined #openstack-infra
2015-02-19T21:29:03  <clarkb> woo my change totally makes gerrit not start :)
2015-02-19T21:29:07  <pleia2> very indian-influenced, so it's good
2015-02-19T21:29:09  <clarkb> zaro: any idea why?
2015-02-19T21:29:18  <jogo> andreaf: ping, see my comment on https://review.openstack.org/#/c/157530/3
2015-02-19T21:29:24  <anteaya> pleia2: sounds yummy
2015-02-19T21:29:30  <anteaya> pleia2: when do you fly again?
2015-02-19T21:29:31  <pleia2> anteaya: it is :)
2015-02-19T21:29:39  *** dims__ has joined #openstack-infra
2015-02-19T21:29:40  <pleia2> my first flight is in 4 hours
2015-02-19T21:29:56  <anteaya> you are in an airport then, yes?
2015-02-19T21:30:03  <anteaya> how are the dates and figs there?
2015-02-19T21:30:06  <pleia2> nah, just wrapping up at my hotel, heading over in an hour
2015-02-19T21:30:11  <anteaya> cool
2015-02-19T21:30:15  <pleia2> dates and figs are good!
2015-02-19T21:30:18  <anteaya> I bet
2015-02-19T21:30:30  <anteaya> that would be what I would consider a highlight
2015-02-19T21:30:36  <pleia2> and they drink a lot of juice here
2015-02-19T21:30:40  <anteaya> do they
2015-02-19T21:30:43  <anteaya> what kind?
2015-02-19T21:30:49  <pleia2> mango, orange, pineapple
2015-02-19T21:30:59  <anteaya> sounds tasty
2015-02-19T21:31:11  <pleia2> it's a dry country, so most places where we'd have alcohol are replaced with juice, no complaints from me :)
2015-02-19T21:31:22  *** MaxV has joined #openstack-infra
2015-02-19T21:31:36  <anteaya> I have no problem with that
2015-02-19T21:31:38  *** mbacchi has joined #openstack-infra
2015-02-19T21:31:48  <pleia2> anyway, I shall finish packing and will be back next week to catch up on things
2015-02-19T21:31:57  <anteaya> safe flights
2015-02-19T21:32:03  <pleia2> thanks :)
2015-02-19T21:32:48  *** morganfainberg is now known as needscoffee
2015-02-19T21:33:32  <nibalizer> pleia2: don't forget your charger this time
2015-02-19T21:33:33  <nibalizer> :P
2015-02-19T21:35:01  <jogo> clarkb: can you take a second look at https://review.openstack.org/#/c/157530
2015-02-19T21:35:16  <jogo> as this is hurting a lot of projects
2015-02-19T21:35:45  <clarkb> jogo: sure, ajaegers -1 applies still
2015-02-19T21:35:52  *** sabeen2 has quit IRC
2015-02-19T21:36:42  <jogo> clarkb: kk will update
2015-02-19T21:38:04  <openstackgerrit> Joe Gordon proposed openstack-infra/project-config: Stop making devstack-dsvm-cells voting  https://review.openstack.org/157530
2015-02-19T21:39:16  *** BobBall is now known as BobBall_AWOL
2015-02-19T21:40:09  <openstackgerrit> Merged openstack-infra/elastic-recheck: Add query for cells bug 1423695  https://review.openstack.org/157532
2015-02-19T21:40:10  <openstack> bug 1423695 in OpenStack Compute (nova) "gate-devstack-dsvm-cells fails attaching volume" [Undecided,New] https://launchpad.net/bugs/1423695
2015-02-19T21:40:19  *** achanda has quit IRC
2015-02-19T21:40:27  *** doude has quit IRC
2015-02-19T21:40:36  *** doude has joined #openstack-infra
2015-02-19T21:40:46  <clarkb> jogo: almost one small change
2015-02-19T21:41:00  *** ivar-laz_ has joined #openstack-infra
2015-02-19T21:41:42  <openstackgerrit> Joe Gordon proposed openstack-infra/project-config: Stop making devstack-dsvm-cells voting  https://review.openstack.org/157530
2015-02-19T21:42:01  <anteaya> sdague: any objection to this change merging? the stable python26 jobs going from 40 to 60: https://review.openstack.org/#/c/156734/
2015-02-19T21:42:40  *** bswartz has quit IRC
2015-02-19T21:43:19  <clarkb> jogo: +2
2015-02-19T21:43:45  *** ivar-lazzaro has quit IRC
2015-02-19T21:43:56  <openstackgerrit> Dan Prince proposed openstack-infra/project-config: Remove wasteful tripleo workspace-cache cloning  https://review.openstack.org/157490
2015-02-19T21:44:21  *** ihrachyshka has quit IRC
2015-02-19T21:44:52  <jogo> clarkb: thanks!
2015-02-19T21:45:26  *** andreykurilin_ has joined #openstack-infra
2015-02-19T21:46:17  *** ivar-laz_ has quit IRC
2015-02-19T21:46:39  *** achanda has joined #openstack-infra
2015-02-19T21:46:49  *** ivar-lazzaro has joined #openstack-infra
2015-02-19T21:46:52  *** sarob has quit IRC
2015-02-19T21:47:27  <jhesketh> Morning
2015-02-19T21:47:35  *** ivar-lazzaro has quit IRC
2015-02-19T21:48:14  *** jp_at_hp has quit IRC
2015-02-19T21:48:32  <clarkb> ohai
2015-02-19T21:48:32  *** ivar-lazzaro has joined #openstack-infra
2015-02-19T21:48:45  <clarkb> jhesketh: I would totally try to make zuul things happen but I am wrestling java and gerrit
2015-02-19T21:49:27  <jhesketh> clarkb: no worries, all good :-). Maybe there's something I could help with?
2015-02-19T21:50:08  <clarkb> jhesketh: it appears that gerrit 2.8 has a memory leak. I have discovered that there are in theory options to the jvm that will cause it to dump a heap dump on signal 3
2015-02-19T21:50:19  <clarkb> but applying those options to review-dev makes gerrit daemon not start
2015-02-19T21:50:42  <clarkb> my current plan is to figure out how to run gerrit with those options so that after we restart to kill the current leak we have debugging options fr next time
2015-02-19T21:51:49  <anteaya> jhesketh: morning
2015-02-19T21:52:28  *** dkranz has joined #openstack-infra
2015-02-19T21:53:37  *** wenlock has quit IRC
2015-02-19T21:53:54  *** jaypipes has quit IRC
2015-02-19T21:53:57  <jhesketh> clarkb: okay. I don't know much about java but if there is something specific I can do let me know :-).
2015-02-19T21:54:22  *** oomichi has joined #openstack-infra
2015-02-19T21:54:45  <clarkb> jhesketh: will do, maybe I should recheck the dg jobs right now and see if you can get in there with the 2 hour window?
2015-02-19T21:54:55  <clarkb> jhesketh: since its relatively low overhead for me to start a job and hold a node
2015-02-19T21:55:51  <clarkb> ok HeapDumpOnCtrlBreak is an unrecognized option
2015-02-19T21:55:59  *** wenlock has joined #openstack-infra
2015-02-19T21:56:19  <clarkb> apparently its an old option and no longer supported
2015-02-19T21:56:27  <jhesketh> clarkb: up to you. Maybe keep your current state and I'll deal with email and other stuff instead of distracting you
2015-02-19T21:57:01  <clarkb> jhesketh: well I think I am about to give up on this. I think our only other option is to install the jdk instead of jre to get jmap
2015-02-19T21:59:30  <clarkb> foobio: what do you think about just restarting gerrit now? then we can worry about switching to a jdk install later?
2015-02-19T21:59:39  <clarkb> jeblair: mordred jhesketh ^
2015-02-19T22:00:11  <foobio> clarkb: i'm fine with it. need help?
2015-02-19T22:00:45  <foobio> i'm mostly just tweaking and rerunning random non-devstack jobs on held devstack nodes to improve my baseline for the image convergence
2015-02-19T22:01:02  <clarkb> foobio: I shouldn't just want to make sure that others are on board. Will restart it now
2015-02-19T22:01:52  *** zz_gondoi is now known as gondoi
2015-02-19T22:02:13  <clarkb> foobio: maybe do a statusbot alert?
2015-02-19T22:02:15  *** patrickeast_ has joined #openstack-infra
2015-02-19T22:02:24  <anteaya> gerrit is down for me
2015-02-19T22:02:25  <greghaynes> hrmmm, gerrit 503
2015-02-19T22:02:29  <anteaya> did you restart?
2015-02-19T22:02:37  <clarkb> you guys crack me up
2015-02-19T22:02:47  <greghaynes> Im glad we can entertain :)
2015-02-19T22:02:59  *** dannywil_ has joined #openstack-infra
2015-02-19T22:03:05  <anteaya> why do a status bot alert then
2015-02-19T22:03:08  <anteaya> after the restart
2015-02-19T22:03:11  <clarkb> anteaya: because I just restarted it
2015-02-19T22:03:14  *** MaxV has quit IRC
2015-02-19T22:03:27  <anteaya> status that 503? that was me
2015-02-19T22:03:30  <foobio> it's working for me! ;)
2015-02-19T22:03:40  <clarkb> anteaya: I am confused
2015-02-19T22:03:47  <greghaynes> Yes, it has returned
2015-02-19T22:04:04  <clarkb> anyways /me digs up statusbot syntax
2015-02-19T22:04:05  *** patrickeast has quit IRC
2015-02-19T22:04:05  *** patrickeast_ is now known as patrickeast
2015-02-19T22:04:17  *** dannywilson has quit IRC
2015-02-19T22:04:27  <anteaya> well usually for me a status bot is effective before the restart
2015-02-19T22:04:39  *** marun has quit IRC
2015-02-19T22:04:44  <anteaya> not sure of the value after the restart
2015-02-19T22:05:32  <clarkb> anteaya: to let people know why it happened so that I don't get a flood of "is gerrit down?" questions
2015-02-19T22:05:59  <anteaya> okay
2015-02-19T22:06:03  <clarkb> looks like #status notice Gerrit was restarted to correct memory pressure due to what appears to be a memory leak
2015-02-19T22:06:08  <clarkb> how does that sound?
2015-02-19T22:06:20  <anteaya> I can live with that
2015-02-19T22:06:43  <foobio> clarkb: lgtm
2015-02-19T22:07:06  <foobio> and yeah, you want notice so that it's a non-stateful message with no topic editing
2015-02-19T22:07:17  *** carl_baldwin has quit IRC
2015-02-19T22:07:30  <clarkb> #status notice Gerrit was restarted to correct memory pressure due to what appears to be a memory leak
2015-02-19T22:07:37  *** vponomaryov has quit IRC
2015-02-19T22:07:46  *** enikanorov_ has joined #openstack-infra
2015-02-19T22:07:50  <clarkb> no statusbot?
2015-02-19T22:08:04  *** viktors has quit IRC
2015-02-19T22:08:13  *** rlandy has quit IRC
2015-02-19T22:08:44  <clarkb> or is it #notice? this bot doesn't have docs and can never remember what to execute /me should fix this
2015-02-19T22:09:04  <foobio> no, openstackstatis is mia apparently
2015-02-19T22:09:05  *** enikanorov has quit IRC
2015-02-19T22:09:16  <foobio> er, openstackstatus
2015-02-19T22:09:38  *** carl_baldwin has joined #openstack-infra
2015-02-19T22:09:44  <foobio> also it's been long enough now i'd say just fix statusbot and no bother sending the notice ;)
2015-02-19T22:10:18  <openstackgerrit> Spencer Krum proposed openstack-infra/infra-specs: Spec to refactor puppet code in openstack_project  https://review.openstack.org/137471
2015-02-19T22:10:54  <jhesketh> clarkb: restarting the dev Gerrit or live?
2015-02-19T22:11:01  <anteaya> live
2015-02-19T22:11:04  <anteaya> and done
2015-02-19T22:11:09  *** vponomaryov has joined #openstack-infra
2015-02-19T22:11:34  <jhesketh> Cool :-)
2015-02-19T22:11:36  <openstackgerrit> Merged openstack-infra/project-config: Remove check job from tripleo-puppet-elements  https://review.openstack.org/157486
2015-02-19T22:11:41  <clarkb> foobio: statusbot is running on eavesdrop I guess it just left this channel? restart the whole daemon?
2015-02-19T22:11:50  <clarkb> seems like you tpically kick that bot
2015-02-19T22:12:05  *** bswartz has joined #openstack-infra
2015-02-19T22:12:10  *** viktors has joined #openstack-infra
2015-02-19T22:12:28  <foobio> yeah
2015-02-19T22:12:32  <openstackgerrit> Joe Gordon proposed openstack-infra/devstack-gate: Skip volume devstack exercise  https://review.openstack.org/157553
2015-02-19T22:12:39  <foobio> i just use the initscript to restart it
2015-02-19T22:12:43  <foobio> on eavesdrop
2015-02-19T22:13:13  *** mrunge has quit IRC
2015-02-19T22:13:17  <openstackgerrit> greghaynes proposed openstack-infra/project-config: Allow ability to prevent static dns resolver  https://review.openstack.org/157554
2015-02-19T22:13:24  <foobio> 2015-02-07 22:50:33     <--     openstackstatus (~openstack@eavesdrop.openstack.org) has quit (Ping timeout: 245 seconds)
2015-02-19T22:13:30  <foobio> so it's been gone... a while
2015-02-19T22:13:44  <anteaya> it should send postcards
2015-02-19T22:13:50  <clarkb> foobio: kk doing that now
2015-02-19T22:13:53  <anteaya> I try to when I am gone that long
2015-02-19T22:14:05  <foobio> even my vacation next week won't rival that bot's time off
2015-02-19T22:14:21  <anteaya> foobio: where are you next week?
2015-02-19T22:14:27  <anteaya> or would you prefer not to say?
2015-02-19T22:14:36  <foobio> florida
2015-02-19T22:14:39  <anteaya> nice
2015-02-19T22:14:43  *** koolhead17 has quit IRC
2015-02-19T22:14:45  <foobio> get away from some of the ice and wind here
2015-02-19T22:14:47  <anteaya> beach sand sun
2015-02-19T22:14:50  <anteaya> good call
2015-02-19T22:14:50  <openstackgerrit> greghaynes proposed openstack-infra/project-config: Allow ability to prevent static dns resolver  https://review.openstack.org/157554
2015-02-19T22:14:56  <anteaya> shark's teeth?
2015-02-19T22:14:56  <clarkb> foobio: https://review.openstack.org/monitoring?part=graph&graph=usedMemory&period=jour you can see the drop in memory use post restart thee
2015-02-19T22:15:00  *** openstackstatus has joined #openstack-infra
2015-02-19T22:15:00  *** ChanServ sets mode: +v openstackstatus
2015-02-19T22:15:13  <anteaya> i remember collecting shark's teeth in florida as a kid
2015-02-19T22:15:25  <foobio> clarkb: yep, classic leak (or cache, but if that's a cache it's a terrible one)
2015-02-19T22:15:42  <foobio> anteaya: yeah, they have those. also sharks
2015-02-19T22:15:53  <anteaya> okay maybe leave the sharks alone?
2015-02-19T22:15:53  <clarkb> foobio: not just the teeth? :P
2015-02-19T22:15:59  *** dims__ has quit IRC
2015-02-19T22:16:03  <foobio> clarkb: oh, they have both
2015-02-19T22:16:08  *** tmcpeak1 has quit IRC
2015-02-19T22:16:20  *** sabeen has joined #openstack-infra
2015-02-19T22:16:28  <foobio> definitely
2015-02-19T22:16:40  <clarkb> ok  Ithink gerrit is a happier camper now
2015-02-19T22:16:48  <clarkb> jhesketh: ok where were we on swift logs?
2015-02-19T22:17:02  *** hdd has quit IRC
2015-02-19T22:18:00  <clarkb> jhesketh: I'm thinking maybe we just change the timeout on the jobs for now? that avoids a zuul restart and the gate is thrashing so I would like to avoid making that worse
2015-02-19T22:18:47  <openstackgerrit> Jamie Lennox proposed openstack/requirements: Update version of neutronclient  https://review.openstack.org/142657
2015-02-19T22:19:02  <jhesketh> clarkb: okay, fair enough, give me a minute
2015-02-19T22:19:55  *** otter768 has joined #openstack-infra
2015-02-19T22:20:29  <jogo> clarkb: an alternate unbreak the world patch https://review.openstack.org/#/c/157553/
2015-02-19T22:20:42  <clarkb> jogo: looks like they are narrowing in on an actual fix though
2015-02-19T22:20:48  *** tmcpeak has joined #openstack-infra
2015-02-19T22:20:58  <jogo> clarkb: hopefully. at this point its a race
2015-02-19T22:21:11  <jogo> clarkb: ideally we get a fix out first. but just in case
2015-02-19T22:21:37  <anteaya> jogo: I can't weigh in on this patch until dansmith and alaski get behind it: https://review.openstack.org/#/c/157530/
2015-02-19T22:22:01  <jogo> the clock is ticking on a half dozen projects are blocked
2015-02-19T22:22:02  <anteaya> or at least change their -1's to 0's
2015-02-19T22:22:04  <clarkb> they are actively debugging so I am happy to let them do that and probably remove the job only from ceilometer
2015-02-19T22:22:10  <clarkb> (based on what dansmith said)
2015-02-19T22:22:14  <dansmith> clarkb: thanks
2015-02-19T22:22:25  <jogo> anteaya: there is an alternate proposal
2015-02-19T22:22:29  *** ghostpl_ has joined #openstack-infra
2015-02-19T22:22:30  <dansmith> clarkb: from what we can tell, it's an actual novaclient bug that we can't hit any other way than this exercise
2015-02-19T22:22:36  <anteaya> 157553?
2015-02-19T22:22:38  <dansmith> clarkb: just happens that we only run those on the cells job
2015-02-19T22:22:42  <clarkb> dansmith: neat
2015-02-19T22:22:54  <dansmith> clarkb: so leaving it is the right thing to do for the moment, IMHO
2015-02-19T22:24:04  <openstackgerrit> Merged openstack-infra/project-config: Add non-voting job for Nova V2.1 API with neutron  https://review.openstack.org/151564
2015-02-19T22:24:12  <openstackgerrit> Joshua Hesketh proposed openstack-infra/project-config: Update swift upload expiry for all jobs  https://review.openstack.org/157561
2015-02-19T22:24:13  <jhesketh> clarkb: ^
2015-02-19T22:24:23  *** otter768 has quit IRC
2015-02-19T22:24:33  <jogo> dansmith: well whoever gets there first the fix or this skip passes check https://review.openstack.org/#/c/157553/
2015-02-19T22:24:51  <clarkb> jhesketh: +2, maybe we can get foobio behind that too then I can go about triggering and holding nodes and all that
2015-02-19T22:25:14  *** ociuhandu has joined #openstack-infra
2015-02-19T22:26:27  *** oomichi has quit IRC
2015-02-19T22:26:28  *** signed8bit has quit IRC
2015-02-19T22:27:42  *** ghostpl_ has quit IRC
2015-02-19T22:28:13  *** signed8bit has joined #openstack-infra
2015-02-19T22:30:17  <openstackgerrit> Merged openstack-infra/jenkins-job-builder: Fix broken link on documentation  https://review.openstack.org/157416
2015-02-19T22:31:33  *** mbacchi has quit IRC
2015-02-19T22:31:34  <harlowja> jeblair dhellmann was i think wanting to change the owner of https://launchpad.net/debtcollector/ i think u can do that right?
2015-02-19T22:31:49  * harlowja not sure why i set that as the owner (guess i did, ha)
2015-02-19T22:31:55  <harlowja> owner/maintainer
2015-02-19T22:32:46  <clarkb> harlowja: what should it be?
2015-02-19T22:33:00  <harlowja> clarkb i think 'Oslo Drivers'
2015-02-19T22:33:25  *** mriedem has quit IRC
2015-02-19T22:33:50  <clarkb> harlowja: done
2015-02-19T22:33:53  <harlowja> thx:)
2015-02-19T22:35:13  *** ghostpl_ has joined #openstack-infra
2015-02-19T22:35:25  <openstackgerrit> Merged openstack-infra/project-config: Enable non-voting keystoneclient functional tests  https://review.openstack.org/156123
2015-02-19T22:36:53  <openstackgerrit> Joshua Harlow proposed openstack/requirements: Add openstack/debtcollector to projects.txt  https://review.openstack.org/157566
2015-02-19T22:37:31  *** medberry2 is now known as med_
2015-02-19T22:37:34  *** med_ has quit IRC
2015-02-19T22:37:34  *** med_ has joined #openstack-infra
2015-02-19T22:38:12  *** signed8bit has quit IRC
2015-02-19T22:40:16  <openstackgerrit> Douglas Mendizbal proposed openstack-infra/project-config: Add devstack gate to barbicanclient  https://review.openstack.org/157568
2015-02-19T22:42:16  <openstackgerrit> Merged openstack-infra/project-config: Add pypi jobs for stackforge/networking-cisco  https://review.openstack.org/156948
2015-02-19T22:43:28  *** pc_m has quit IRC
2015-02-19T22:44:56  <openstackgerrit> Merged openstack-infra/project-config: Update swift upload expiry for all jobs  https://review.openstack.org/157561
2015-02-19T22:45:42  <anteaya> clarkb: am I reading your comment correctly? the value that currently is 115 should be 125, yes? https://review.openstack.org/#/c/155100/1..2/jenkins/jobs/devstack-gate.yaml
2015-02-19T22:45:54  *** Alexandra_ has joined #openstack-infra
2015-02-19T22:45:55  *** hyakuhei has quit IRC
2015-02-19T22:46:25  <hogepodge> foobio irc operator error
2015-02-19T22:46:26  <zaro> clarkb: did you get review-dev working with special VM args yet?
2015-02-19T22:47:04  *** MarkAtwood has joined #openstack-infra
2015-02-19T22:47:07  *** camunoz has joined #openstack-infra
2015-02-19T22:47:57  <clarkb> zaro no they arent supported so I reverted
2015-02-19T22:48:31  <openstackgerrit> Vipul Sabhaya proposed openstack/requirements: Add python-openstackclient to global-requirements  https://review.openstack.org/157569
2015-02-19T22:48:33  <zaro> clarkb: not supported on jvm version?
2015-02-19T22:48:36  <clarkb> anteaya yes
2015-02-19T22:48:38  *** hyakuhei has joined #openstack-infra
2015-02-19T22:48:59  <clarkb> zaro ya according to my testing java didnt like those args
2015-02-19T22:50:02  <zaro> clarkb: where did you find those args?
2015-02-19T22:50:06  <ekarlso> what's up with stackforge projects now being enforced with globla requirements ?
2015-02-19T22:50:40  <foobio> hogepodge: i consider defcore/refstack concerns to be equally on-topic in #-qa, so either was fine by me ;)
2015-02-19T22:50:44  <anteaya> clarkb: thank you, I will comment
2015-02-19T22:51:12  <foobio> ekarlso: what do you mean?
2015-02-19T22:51:27  <clarkb> zaro on a blog that took me to oracle docs
2015-02-19T22:51:50  *** thingee has joined #openstack-infra
2015-02-19T22:51:50  <clarkb> but we dont use oracle jvm and I think the args were removed in favor of jmap
2015-02-19T22:52:22  <foobio> ekarlso: stackforge projects can both be global requirements and can have global requirements forced on them, but whether they can request additions to the global requirements list is still debated i think
2015-02-19T22:52:24  *** kgiusti has left #openstack-infra
2015-02-19T22:53:35  <clarkb> yup
2015-02-19T22:54:45  *** hyakuhei has quit IRC
2015-02-19T22:55:25  *** jgrimm is now known as zz_jgrimm
2015-02-19T22:56:13  <clarkb> foobio can you review jheskeths change above?
2015-02-19T22:56:13  *** hyakuhei has joined #openstack-infra
2015-02-19T22:56:30  <clarkb> will help the swift log upload performance debugging
2015-02-19T22:57:34  *** yamamoto has joined #openstack-infra
2015-02-19T22:58:24  *** jedimike has joined #openstack-infra
2015-02-19T22:58:43  *** claudiub has quit IRC
2015-02-19T23:00:08  *** andreaf_ has quit IRC
2015-02-19T23:00:44  <foobio> clarkb: the one that already merged, or something else?
2015-02-19T23:01:12  <clarkb> oh it merged ignore me
2015-02-19T23:01:17  <clarkb> too much going on
2015-02-19T23:01:17  *** marun has joined #openstack-infra
2015-02-19T23:01:22  <foobio> yeah, i approved it a while back
2015-02-19T23:01:30  <foobio> so, um, done! ;)
2015-02-19T23:01:37  <anteaya> ha ha ha
2015-02-19T23:02:22  *** yamamoto has quit IRC
2015-02-19T23:02:46  <openstackgerrit> Douglas Mendizbal proposed openstack-infra/project-config: Add devstack-gate job to barbicanclient  https://review.openstack.org/157568
2015-02-19T23:04:36  <openstackgerrit> Douglas Mendizbal proposed openstack-infra/project-config: Add a devstack-gate job to barbicanclient's tests  https://review.openstack.org/157568
2015-02-19T23:04:49  *** dannywil_ has quit IRC
2015-02-19T23:04:51  *** abhirc has quit IRC
2015-02-19T23:05:53  <ekarlso> foobio: funky that bit, cause it didn't use to be like that
2015-02-19T23:06:04  <foobio> ekarlso: which bit?
2015-02-19T23:06:27  *** marun has quit IRC
2015-02-19T23:06:34  <ekarlso> the hard requirement enforcement :p
2015-02-19T23:06:41  <clarkb> its always been that way...
2015-02-19T23:06:42  <ekarlso> it use to work like a few days or weeks back
2015-02-19T23:06:47  <ekarlso> rly with devstack ?
2015-02-19T23:06:54  <clarkb> ekarlso: I think we are talking past each other on what "it" is
2015-02-19T23:07:02  <foobio> ekarlso: yeah, i'm not following
2015-02-19T23:07:05  <clarkb> global requirements has always been applied to all projects in its project list
2015-02-19T23:07:12  <clarkb> and requirements have been enforced
2015-02-19T23:07:28  *** hichihara has joined #openstack-infra
2015-02-19T23:07:33  <ekarlso>  'python-openstackclient' is not in global-requirements.txt
2015-02-19T23:07:44  *** sarob has joined #openstack-infra
2015-02-19T23:07:46  *** crc32 has quit IRC
2015-02-19T23:07:49  <ekarlso> when python-cueclient is depending on it
2015-02-19T23:07:51  <foobio> ekarlso: why would it be?
2015-02-19T23:07:54  <ekarlso> that used to work before :/
2015-02-19T23:07:59  <dtroyer> it was just removed in the last day or so.
2015-02-19T23:08:08  <ekarlso> dtroyer: rly, why ?
2015-02-19T23:08:15  <dtroyer> because nothing 'should' depend on it
2015-02-19T23:08:16  <clarkb> jhesketh: I just rechecked a change and will hold a couple nodes from that
2015-02-19T23:08:29  <clarkb> jhesketh: should runwith the 4 hour expiry
2015-02-19T23:08:38  <dtroyer> apparently a couple of clients with OSC plugins do though.  I'd argue that they should not so that as it is really optional
2015-02-19T23:08:59  <ekarlso> dtroyer: isn't openstackclient the way to go for cli forwards kinda ?
2015-02-19T23:09:08  <jhesketh> clarkb: thanks :-)
2015-02-19T23:09:09  <foobio> ekarlso: if python-cueclient is a stackforge project, it can use the REQUIREMENTS_MODE=soft option to devstack-gate/devstack allowing it to install additional requirements which aren't in the global requirements list
2015-02-19T23:09:27  <dtroyer> if you just want the congressclient libs, you would otherwise have to install OSC and _all_ of its dependencies, which may not be what you want
2015-02-19T23:10:09  <foobio> dtroyer: the counterargument from congressclient and cueclient is "i want to pip install this thing that's a plugin to openstackclient, so it should automatically install openstackclient for me when i do"
2015-02-19T23:10:18  <dtroyer> IOW, OSC and the various client lins with OSC plugins should not have each other in their requirements as they are both useful without the other
2015-02-19T23:10:31  <clarkb> jhesketh: do you think I/we should add better logging to the threadpull change? we should be able to use python's logging lib to get synchronized log writes across the threads
2015-02-19T23:11:06  *** MarkAtwood has quit IRC
2015-02-19T23:11:56  <needscoffee> mordred, you know if I stick with this name instead of morganfainberg, no more tab-doh,wrongperson
2015-02-19T23:12:10  *** bkero has quit IRC
2015-02-19T23:12:10  <needscoffee> for "mor-<tab>"
2015-02-19T23:12:15  *** MarkAtwood has joined #openstack-infra
2015-02-19T23:12:17  <clarkb> foobio: does nodepool look funny to you?
2015-02-19T23:12:29  <dtroyer> ekarlso, foobio: I'm not going to get in their way from putting OSC into their requirements.txt, but I think it the tradeoff of having to install two pacakges with pi vs being required to install 23 deps is a better user experience
2015-02-19T23:12:38  <clarkb> foobio: the graph indicates we aren't building nodes. I am tailing logs now
2015-02-19T23:12:44  <foobio> clarkb: no, looks like zuul stopped running jobs though?
2015-02-19T23:12:51  <ekarlso> dtroyer: +1
2015-02-19T23:13:16  <openstackgerrit> Joshua Harlow proposed openstack-infra/devstack-gate: Add debtcollector to devstack-vm-gate-wrap.sh  https://review.openstack.org/157580
2015-02-19T23:13:17  <foobio> clarkb: i think nodepool "caught up" now that zuul seems to have ceased starting new jobs
2015-02-19T23:13:27  *** Guest936 has joined #openstack-infra
2015-02-19T23:13:35  <clarkb> oh good point
2015-02-19T23:13:43  <clarkb> jhesketh: so is it possible that config change broke teh zuul?
2015-02-19T23:13:52  *** Guest936 is now known as annegentle
2015-02-19T23:13:54  <anteaya> foobio: do you consider this patch mergable or are you still working on it? https://review.openstack.org/#/c/156698/
2015-02-19T23:14:09  <clarkb> AttributeError: 'int' object has no attribute 'format'
2015-02-19T23:14:27  <jhesketh> clarkb: possibly not a bad idea, although any errors should raise up to the main thread
2015-02-19T23:14:41  <clarkb> http://paste.openstack.org/show/177964/
2015-02-19T23:14:51  <foobio> anteaya: it's mergeable, though if nobody approves it i may extend it to test more broadly. otherwise i'll extend with new changes
2015-02-19T23:14:52  *** hichihara has quit IRC
2015-02-19T23:15:01  <anteaya> very good
2015-02-19T23:15:11  <clarkb> jhesketh: I wonder if that string should be quoted
2015-02-19T23:15:11  <jhesketh> clarkb: :-(
2015-02-19T23:15:16  <clarkb> jhesketh: let me try that really quick by hand
2015-02-19T23:15:18  <jhesketh> clarkb: should we revert?
2015-02-19T23:15:19  <anteaya> needscoffee: yes easier for tab complete, keep this one
2015-02-19T23:15:25  <needscoffee> anteaya, haha
2015-02-19T23:15:31  <needscoffee> :P
2015-02-19T23:15:36  <anteaya> #vote or
2015-02-19T23:15:45  <needscoffee> anteaya, troooooooollll ;)
2015-02-19T23:15:54  *** yamamoto has joined #openstack-infra
2015-02-19T23:16:05  *** prad has quit IRC
2015-02-19T23:16:05  <anteaya> :)
2015-02-19T23:16:09  <clarkb> jhesketh: no I think quotes fixes it
2015-02-19T23:16:09  <anteaya> you opened the door
2015-02-19T23:16:16  <foobio> jhesketh: clarkb: yep, timing and the error message indicate that it is indeed that
2015-02-19T23:16:21  <clarkb> jhesketh: so just '14400' unless the swift stuff needs it as an int
2015-02-19T23:16:44  <jhesketh> clarkb: looking at swift.py there is int(time() + settings['expiry']), so I'm not sure if a string will screw that up
2015-02-19T23:16:57  <jhesketh> or if the layout stuff reads it in as an int
2015-02-19T23:17:16  <foobio> yeah, i think without wrapping like int(settings['expiry']) that will asplode
2015-02-19T23:17:16  <clarkb> oh then ya we should revert
2015-02-19T23:17:19  <jhesketh> clarkb: I'll revert the change to layout
2015-02-19T23:18:29  <clarkb> so I think a better way to handle this is where the exception is thrown coerce to a string first
2015-02-19T23:18:31  <clarkb> I will write that change
2015-02-19T23:19:02  <openstackgerrit> Joshua Hesketh proposed openstack-infra/project-config: Revert "Update swift upload expiry for all jobs"  https://review.openstack.org/157585
2015-02-19T23:19:04  <jhesketh> clarkb: ^
2015-02-19T23:19:17  <jhesketh> clarkb: okay so you're going to look into fixing zuul? Otherwise I can
2015-02-19T23:19:33  *** crc32 has joined #openstack-infra
2015-02-19T23:19:35  *** mjturek1 has quit IRC
2015-02-19T23:19:40  <clarkb> ya I think I see a simple fix already
2015-02-19T23:19:44  <foobio> i'm mildly surprised the layout parser doesn't hate that
2015-02-19T23:20:15  <foobio> seems like it would be opinionated about what datatype it's getting there
2015-02-19T23:20:16  *** weshay has quit IRC
2015-02-19T23:20:16  <clarkb> I think the layout may expect an int
2015-02-19T23:20:25  <foobio> aha
2015-02-19T23:21:09  <openstackgerrit> Michael Krotscheck proposed openstack-infra/puppet-storyboard: Parameterized working directories.  https://review.openstack.org/157587
2015-02-19T23:21:09  <openstackgerrit> Michael Krotscheck proposed openstack-infra/puppet-storyboard: Added storyboard working_dir config option to correct block.  https://review.openstack.org/157588
2015-02-19T23:21:10  <openstackgerrit> Michael Krotscheck proposed openstack-infra/puppet-storyboard: Moved all module parameters into one manifest.  https://review.openstack.org/157589
2015-02-19T23:21:18  <foobio> well, except doesn't the voluptuous check run on config reloading too?
2015-02-19T23:21:34  <foobio> so i expect you'd have seen it complain when you manually edited the file too
2015-02-19T23:21:38  <jhesketh> yeah the layout expects an int
2015-02-19T23:21:58  <foobio> weird
2015-02-19T23:22:10  <foobio> i need to spend some time rereading that i guess
2015-02-19T23:22:19  <jhesketh> it's more that the code tries to substitute things on all variables rather than just the strings
2015-02-19T23:22:53  *** carl_baldwin has quit IRC
2015-02-19T23:23:21  *** gondoi is now known as zz_gondoi
2015-02-19T23:23:45  <clarkb> ya but I think coersion to string is what we want anyways since they end up as env vars right?
2015-02-19T23:24:09  *** yamamoto has quit IRC
2015-02-19T23:24:19  <clarkb> anyways waiting for tox to finish to avoid any embarassing format issues but will push up what I think is the simple fix
2015-02-19T23:24:35  <jhesketh> clarkb: I think for the expiry we want to coerce it at the hmac
2015-02-19T23:24:42  <jhesketh> otherwise adding time.time() to it won't work
2015-02-19T23:24:46  <anteaya> foobio: what is the reason the new job is experimental in nova? https://review.openstack.org/#/c/156698/2
2015-02-19T23:24:51  <jhesketh> see lib/swift.py line 151
2015-02-19T23:25:02  <anteaya> as opposed to an infra repo
2015-02-19T23:25:12  <foobio> anteaya: because it's a nova job?
2015-02-19T23:25:45  <clarkb> jhesketh: I see
2015-02-19T23:26:12  <foobio> anteaya: selecting nova as probably one of the more complex/needy projects from a unit testing perspective (exercises database configuration on the worker as well as some system package expectations)
2015-02-19T23:26:26  <anteaya> foobio: but that is just the title of it, right? there is nothing else that is specific to nova, is there?
2015-02-19T23:26:38  *** bhuvan has quit IRC
2015-02-19T23:26:39  <anteaya> foobio: oh okay, yes that makes sense
2015-02-19T23:26:43  <jhesketh> clarkb: although expires is substituted into the string with %s which is surprising
2015-02-19T23:26:49  <anteaya> I just wasn't seeing anything nova specific
2015-02-19T23:26:57  <jhesketh> if you're fixing that up, it should probably be %d
2015-02-19T23:26:59  <foobio> anteaya: it checks out nova source code and runs tox -e py27 basically
2015-02-19T23:27:01  <anteaya> it just installs packages and sets up the dbs
2015-02-19T23:27:07  <jhesketh> clarkb: let me know if you'd prefer I made the changes
2015-02-19T23:27:10  <clarkb> jhesketh: %s basically just does str() on the thing first iirc
2015-02-19T23:27:16  <jogo> clarkb: so we broke icehouse which means d-g is wedged too
2015-02-19T23:27:19  <jogo> clarkb: so your welcome :)
2015-02-19T23:27:27  <jhesketh> clarkb: ah, okay
2015-02-19T23:27:44  <foobio> anteaya: the next step (whether in that same change or in a new change) will be to extend that so i can add it as several experimental jobs to basically all projects
2015-02-19T23:27:51  <clarkb> jhesketh: so I think we don't coerce in launchers/gearman then, instead maybe just only do the format() call if v is a string type?
2015-02-19T23:28:11  <clarkb> jhesketh: since there shouldn't be a reason for expiry to have that format called on it
2015-02-19T23:28:12  <jhesketh> clarkb: that was my thinking
2015-02-19T23:28:20  <jhesketh> +1
2015-02-19T23:28:25  <anteaya> foobio: okay yes in the experimental-workers.yaml
2015-02-19T23:28:33  <foobio> anteaya: but nova provides a good initial proving ground that the mechanics of the macros work (i've already tested the scripts they contain so more worried about making sure parameter substitution and worker node label selection work correctly)
2015-02-19T23:28:34  <clarkb> jhesketh: ok I have things open should have this done soon
2015-02-19T23:28:44  <anteaya> foobio: right that is what I was expecting, hence my question about nova
2015-02-19T23:28:53  <anteaya> right
2015-02-19T23:28:56  <anteaya> okay thanks
2015-02-19T23:29:01  <anteaya> I understand now
2015-02-19T23:29:13  <krotscheck> nibalizer: So, working on puppet-storyboard, I'm trying to figure out a good way to notify an optional module. Have you seen something like that before?
2015-02-19T23:29:40  <anteaya> I'll wait until -nova has fixed their fire
2015-02-19T23:29:44  <anteaya> then bug them
2015-02-19T23:29:50  <anteaya> the look close
2015-02-19T23:29:53  <foobio> okay, so having built a _full_ package install list from our thick slave class manifest, installing those (mostly locally cached) at job run time adds ~1m11s. once i add bindep hooks, projects can bypass that by providing a more specific bindep manifest to just install the packages they really need
2015-02-19T23:29:53  <anteaya> they
2015-02-19T23:30:52  <anteaya> cool
2015-02-19T23:30:57  *** dannywilson has joined #openstack-infra
2015-02-19T23:31:13  <foobio> but once i extend it to cover more than just ubuntu-trusty and also get the same package lists unioned to the lists we're pre-caching via nodepool prep scripts/dib elements, we'll be almost there
2015-02-19T23:31:19  <nibalizer> krotscheck: the optional thing can subscribe to the required thing
2015-02-19T23:31:30  <krotscheck> nibalizer: BUT THAT WOULD MAKE SENSE.
2015-02-19T23:31:34  <krotscheck> nibalizer: :)
2015-02-19T23:31:41  <krotscheck> So clearly I can't do it.
2015-02-19T23:31:47  <openstackgerrit> Clark Boylan proposed openstack-infra/zuul: Only format swift string parameters  https://review.openstack.org/157592
2015-02-19T23:31:54  <clarkb> jhesketh: ^ something like that?
2015-02-19T23:32:24  <krotscheck> nibalizer: How would I then tell service['http'] (from an extrnal module) to subscribe to something that I'm doing inside of mine?
2015-02-19T23:32:30  *** yamamoto has joined #openstack-infra
2015-02-19T23:32:32  <anteaya> foobio: makes sense
2015-02-19T23:32:55  <clarkb> oh wait the fix won't hrm
2015-02-19T23:33:09  <openstackgerrit> Miro Hroncok proposed openstack-infra/project-config: Add Python 3 template for openstack/heat-cfntools  https://review.openstack.org/157593
2015-02-19T23:33:15  <clarkb> foobio: jhesketh so zuul stopped running jobs so our fix won't merge :) I will stop puppet on zuul and apply by hand then reenable puppet once it goes through
2015-02-19T23:33:46  <greghaynes> clarkb: do we care about python3 in that location?
2015-02-19T23:34:08  <clarkb> greghaynes: no zuul isn't py3k friendly
2015-02-19T23:34:16  <greghaynes> ok
2015-02-19T23:34:56  <jhesketh> clarkb: if zuul stopped running jobs won't it need a manual restart?
2015-02-19T23:35:18  <clarkb> jhesketh: well its "stopped" basically was in a tight loop on that error, removing the error allowed it to continue
2015-02-19T23:35:20  <clarkb> jobs are starting now
2015-02-19T23:35:37  <clarkb> but will keep an eye on it just in case it does need a restart for some reason
2015-02-19T23:35:51  <jhesketh> oh right, puppet kept putting the bad config back in
2015-02-19T23:35:59  <clarkb> jhesketh: right
2015-02-19T23:36:05  <jhesketh> okay, sounds good then
2015-02-19T23:36:09  <clarkb> so puppet is disabled, I removed the line, and HUP'd the service
2015-02-19T23:36:19  <clarkb> once your change gets in I will reenable puppet and we should be good
2015-02-19T23:36:45  <openstackgerrit> Douglas Mendizbal proposed openstack-infra/project-config: Add a devstack-gate job to barbicanclient's tests  https://review.openstack.org/157568
2015-02-19T23:36:59  <clarkb> Deficit: devstack-trusty: 0 (start: 293 min: 293 ready: 312 capacity: 8) looks much better on the nodepool side
2015-02-19T23:37:41  <clarkb> jhesketh: I think this would happen with the global change as well
2015-02-19T23:37:51  <clarkb> so good thing we caught it just with the simple config change :)
2015-02-19T23:38:41  <openstackgerrit> Brant Knudson proposed openstack-infra/project-config: Add bandit jobs  https://review.openstack.org/157595
2015-02-19T23:38:50  *** thingee has quit IRC
2015-02-19T23:39:08  *** salv-orlando has quit IRC
2015-02-19T23:39:18  *** bdpayne has quit IRC
2015-02-19T23:39:31  <clarkb> jogo: ok now that I have caught up. we intend on making the icehouse and juno jobs for dg non voting
2015-02-19T23:39:40  <clarkb> jogo: pleia2 was working on that I thought I had reviewed the change too
2015-02-19T23:39:59  <jogo> clarkb: cool, I spoke too soon -- neutron broke it not nova
2015-02-19T23:40:18  <jogo> clarkb: a better upper limit is needed in icehouse for neutronclient
2015-02-19T23:40:19  <clarkb> jogo: also it would be good if you could expand in your email. What you linked does not explain anything as far as how these things are related
2015-02-19T23:40:27  <clarkb> python-keystone is the issue
2015-02-19T23:40:29  *** andreykurilin_ has quit IRC
2015-02-19T23:40:45  <jogo> clarkb: yeah I should explain but I am sick of cleaning up after people
2015-02-19T23:40:53  *** salv-orlando has joined #openstack-infra
2015-02-19T23:41:04  <clarkb> jogo: but no one else knows how to clean up bceause there is no info...
2015-02-19T23:41:37  <clarkb> jogo: also this sort of makes my point about capping vs pinning :)
2015-02-19T23:41:40  <jhesketh> clarkb: actually I'm not sure it would because the defaults are looked up in lib/swift.py and aren't formatted
2015-02-19T23:41:43  <clarkb> we aren't any better so meh
2015-02-19T23:41:48  *** amitgandhinz has quit IRC
2015-02-19T23:42:04  <clarkb> jhesketh: but those don't appear to be the defaults from the ini file?
2015-02-19T23:42:07  * clarkb double checks
2015-02-19T23:42:24  <jhesketh> clarkb: line 149 it fetches from the ini file
2015-02-19T23:42:26  <clarkb> oh nevermind you are right
2015-02-19T23:42:28  <clarkb> ya
2015-02-19T23:43:20  *** carl_baldwin has joined #openstack-infra
2015-02-19T23:43:31  <jogo> they broke semver
2015-02-19T23:44:31  <foobio> i guess the good semver solution would be to revert that patch, make a new micro point release, then restore it and have a version bump?
2015-02-19T23:44:41  <clarkb> jogo: I don't think they did
2015-02-19T23:44:53  <clarkb> jogo: requiring a different version of keystoneclient isn't a backward incompatible change
2015-02-19T23:44:55  <jogo> clarkb: wild dependency jumps
2015-02-19T23:45:05  <clarkb> its only becuse you have decided to pin everthing :)
2015-02-19T23:45:42  <clarkb> but I don't think that makes it a backward incompat change. Its just not compatible with how you ahve chosen to do requirements
2015-02-19T23:45:47  *** carl_baldwin has quit IRC
2015-02-19T23:46:13  <jogo> clarkb: actually no. it was from this Id5a53eaf3da86932999d62e51d07f7015b0ab53a
2015-02-19T23:47:04  *** tmcpeak has quit IRC
2015-02-19T23:47:08  <foobio> i tried to embark on a similar solution for folsom/grizzly and didn't get nearly this far because we didn't have good requirements sync across projects, but could forsee even then that trying to do that given how pypi handles dep resolution was going to be fraught with peril
2015-02-19T23:47:13  <clarkb> jogo: I don't follow the leap there either
2015-02-19T23:47:23  *** dimtruck is now known as zz_dimtruck
2015-02-19T23:47:37  <jogo> clarkb: that is where OSC was pinned. which is what is breaking
2015-02-19T23:48:30  <clarkb> right but its breaking because ou have pinned keystone clietn and neutronclient did a release that didn't respect that pin
2015-02-19T23:48:51  <clarkb> which would be fine if the pins in general weren't in place
2015-02-19T23:49:03  <clarkb> anyways this is why I have been wary of the pins. I think it will lead to just as much work and pain
2015-02-19T23:49:09  *** markvoelker has quit IRC
2015-02-19T23:49:22  *** hyakuhei has quit IRC
2015-02-19T23:49:24  <openstackgerrit> Michael Krotscheck proposed openstack-infra/puppet-storyboard: Apache Config is now an optional module.  https://review.openstack.org/157600
2015-02-19T23:49:27  <clarkb> caps on the other hand give you enough flexibility to work around with things when they shift within reason
2015-02-19T23:49:51  <jogo> clarkb: well neutron client has a cap <2.4
2015-02-19T23:49:53  <jogo> not a pin
2015-02-19T23:49:57  <jogo> same with OSC
2015-02-19T23:50:03  <krotscheck> nibalizer: ^^ is the relevant code. I'm not certain where I can fit the subscription though. Wouldn't mind your feedback
2015-02-19T23:50:03  <jogo> its not a hard '=='
2015-02-19T23:50:04  <clarkb> jogo: what about keystoneclient?
2015-02-19T23:50:10  <clarkb> keystoneclient is the thing at fault here
2015-02-19T23:50:15  <jogo> python-keystoneclient>=0.7.0,<0.12
2015-02-19T23:50:36  <jogo> clarkb: I think its safe to say there is no easy answer for any of this
2015-02-19T23:50:43  <clarkb> jogo: yes that is what I have said :)
2015-02-19T23:50:44  <tchaypo> ah, this is still going, excellent
2015-02-19T23:50:56  <clarkb> jogo: which is why I have had a preference to just deal with status quo since its all bad and least effort
2015-02-19T23:50:58  <jogo> clarkb: capped,uncapped,pinned or other
2015-02-19T23:51:10  *** Alexandra_ has quit IRC
2015-02-19T23:51:12  <clarkb> but am open to trying other things, we just have to realize there is pain in every direction we turn
2015-02-19T23:51:34  <jogo> clarkb: this was a a status quo break. my cap all stable/juno didn't impact this
2015-02-19T23:52:23  <foobio> when i started to try, i concluded that it's really not particularly tractable even with requirements sync (which we thankfully now have) unless someone has available time to help get a smart dep solver into pip
2015-02-19T23:52:51  <clarkb> jogo: you didn't also cap/pin icehouse?
2015-02-19T23:52:55  <clarkb> jogo: I thought you did both
2015-02-19T23:53:10  *** dustins has quit IRC
2015-02-19T23:53:16  <lifeless> foobio: harlowja wrote one, does it have to be /in/ pip ?
2015-02-19T23:53:21  <jogo> clarkb: nope. I didn't realize it was voting on anything besides stable/icehouse and juno.
2015-02-19T23:53:28  *** mriedem has joined #openstack-infra
2015-02-19T23:53:35  <jogo> clarkb: forgot about devstack-gate
2015-02-19T23:53:38  *** yamamoto has quit IRC
2015-02-19T23:53:42  <harlowja> i start writing one, its still sorta WIP :-P
2015-02-19T23:53:44  <foobio> lifeless: i suppose not. i guess we can replace pip
2015-02-19T23:53:53  *** bknudson has quit IRC
2015-02-19T23:54:05  <harlowja> https://github.com/harlowja/pippin has a few idea(s)
2015-02-19T23:54:15  <foobio> harlowja: my understanding is it just turns pip into a downloader and handles the dep resolution on its own?
2015-02-19T23:54:21  <harlowja> basically
2015-02-19T23:55:05  <foobio> sounds reasonable, though i can already see the ensuing shitstorm from "here's how you pip install openstack projects _now_"
2015-02-19T23:55:17  <harlowja> the current code in that repo uses pip for downloading, expands the full dependency graph, then creates 'requirement' trees (where each path in that tree is one solution for a requirement)
2015-02-19T23:55:33  <clarkb> jhesketh: ssh jenkins@104.239.149.53 for https://jenkins01.openstack.org/job/check-dg-tempest-dsvm-full/329/ and ssh jenkins@104.239.162.27 for https://jenkins07.openstack.org/job/check-dg-tempest-dsvm-full-reexec/231/ they are running anwys so may as well try to use them?
2015-02-19T23:55:45  *** oomichi has joined #openstack-infra
2015-02-19T23:55:49  *** tkelsey has quit IRC
2015-02-19T23:55:55  <harlowja> foobio ya, anythings possible :-P
2015-02-19T23:56:04  <harlowja> https://github.com/harlowja/pippin/blob/future/pippin.py#L449 (the main routine); feel free to hack on that as much as u want
2015-02-19T23:56:10  <harlowja> and https://github.com/harlowja/pippin/blob/future/pippin.py#L489
2015-02-19T23:56:17  <clarkb> honestly the right place to fix this *is* pip
2015-02-19T23:56:28  <clarkb> because you will install other python things too
2015-02-19T23:56:38  <foobio> i mean, we're already partway there with declaring that we just don't support easy_install, so saying you can't use straight pip to install this stuff either is only likely to alienate the remaining parts of the python community we haven't already
2015-02-19T23:56:43  <jhesketh> clarkb: awesome, thanks!
2015-02-19T23:56:43  <lifeless> foobio: we don't need to change anyone elses behaviour to fix the gate
2015-02-19T23:56:56  *** abhirc has joined #openstack-infra
2015-02-19T23:57:13  *** ddieterly has quit IRC
2015-02-19T23:57:19  <foobio> lifeless: only those people who wish to have test results similar to ours, or installations similar to what we tested
2015-02-19T23:57:25  <clarkb> lifeless: you do if ou expect to map your tests onto what people are doing real world
2015-02-19T23:57:28  <foobio> you're right about that
2015-02-19T23:57:28  <clarkb> ya what foobio just said
2015-02-19T23:57:53  <foobio> but honestly, pip doesn't guarantee much of that to start with
2015-02-19T23:57:53  <jhesketh> clarkb: I have to wait for the job to finish to get the build params
2015-02-19T23:58:09  <harlowja> u can all join https://groups.google.com/forum/#!topic/pypa-dev/YqgoE1ZLpqg :-P
2015-02-19T23:58:14  <clarkb> jhesketh: and to have it generate all the artifacts
2015-02-19T23:58:15  <harlowja> 'Dependency solver (working group?)' (my post)
2015-02-19T23:58:19  *** dannywilson has quit IRC
2015-02-19T23:58:26  <dstufft> oh goody
2015-02-19T23:58:29  <dstufft> what did pipd o now
2015-02-19T23:58:29  <foobio> harlowja: i applaud this effort ;)
2015-02-19T23:58:54  <foobio> dstufft: it convinced people to start pitching in on the lack of a smart dep solver
2015-02-19T23:58:59  <foobio> dstufft: positive stuff
2015-02-19T23:59:00  <clarkb> looks like matthew has outlined exactly what needs to be done
2015-02-19T23:59:09  <openstackgerrit> Khai Do proposed openstack-infra/project-config: Refactor Gerrit plugin build jobs  https://review.openstack.org/157603
2015-02-19T23:59:22  <harlowja> ya, and i think its also fine to have a POC somewhere that someone can get to work (whether thats pippin or not)
2015-02-19T23:59:32  <harlowja> i've got the full dep graph
2015-02-19T23:59:48  <clarkb> harlowja: POC doesn't hurt but I don't think we should use it for the reasons foobio described
2015-02-19T23:59:58  <lifeless> pip doesn't guarantee same as what we have anyway :)
2015-02-19T23:59:58  <harlowja> sure
