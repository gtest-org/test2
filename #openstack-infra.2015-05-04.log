2015-05-04T00:00:35  *** mikeit_ has quit IRC
2015-05-04T00:01:58  *** Alexandra_ has joined #openstack-infra
2015-05-04T00:02:58  *** mikeit_ has joined #openstack-infra
2015-05-04T00:07:55  *** sdake_ has joined #openstack-infra
2015-05-04T00:10:42  *** woodster_ has quit IRC
2015-05-04T00:11:04  *** sdake has quit IRC
2015-05-04T00:18:07  *** akshai has joined #openstack-infra
2015-05-04T00:18:11  *** mikeit_ has quit IRC
2015-05-04T00:19:44  *** ashleighfarnham has joined #openstack-infra
2015-05-04T00:21:02  *** markvoelker has joined #openstack-infra
2015-05-04T00:21:26  *** akshai has quit IRC
2015-05-04T00:21:54  *** mikeitt has joined #openstack-infra
2015-05-04T00:22:34  *** armax has joined #openstack-infra
2015-05-04T00:25:16  *** markvoelker has quit IRC
2015-05-04T00:31:47  *** mikeitt has quit IRC
2015-05-04T00:32:11  *** mikeit has joined #openstack-infra
2015-05-04T00:34:31  *** mpaolino has joined #openstack-infra
2015-05-04T00:34:33  *** camunoz has quit IRC
2015-05-04T00:36:30  *** mpaolino has quit IRC
2015-05-04T00:37:26  *** zhiwei has joined #openstack-infra
2015-05-04T00:46:46  *** otter768 has joined #openstack-infra
2015-05-04T00:47:23  *** camunoz has joined #openstack-infra
2015-05-04T00:47:29  *** salv-orlando has joined #openstack-infra
2015-05-04T00:50:08  *** salv-orlando has quit IRC
2015-05-04T00:53:18  *** kiseok7_ has quit IRC
2015-05-04T00:53:54  *** ashleighfarnham has quit IRC
2015-05-04T00:54:09  *** cody-somerville has quit IRC
2015-05-04T00:57:32  *** marcusvrn has joined #openstack-infra
2015-05-04T01:05:27  *** salv-orlando has joined #openstack-infra
2015-05-04T01:08:34  *** armax has quit IRC
2015-05-04T01:12:29  *** salv-orlando has quit IRC
2015-05-04T01:19:16  *** marcusvrn has quit IRC
2015-05-04T01:21:53  *** markvoelker has joined #openstack-infra
2015-05-04T01:24:28  *** sdake has joined #openstack-infra
2015-05-04T01:26:18  *** sdake_ has quit IRC
2015-05-04T01:26:30  *** markvoelker has quit IRC
2015-05-04T01:27:02  *** sdake_ has joined #openstack-infra
2015-05-04T01:29:59  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Enhance the OperatorCloud constructor  https://review.openstack.org/179647
2015-05-04T01:30:05  <mordred> Shrews: ^^ there ya go
2015-05-04T01:30:39  *** sdake has quit IRC
2015-05-04T01:40:42  <openstackgerrit> Jeremy Stanley proposed openstack-infra/system-config: Split diskimage-builder built images out  https://review.openstack.org/167837
2015-05-04T01:41:03  *** Alexandra_ has quit IRC
2015-05-04T01:41:21  *** sputnik13 has joined #openstack-infra
2015-05-04T01:43:04  *** sputnik13 has quit IRC
2015-05-04T01:43:31  *** sputnik13 has joined #openstack-infra
2015-05-04T01:44:58  *** camunoz has quit IRC
2015-05-04T01:44:59  *** kiseok7_ has joined #openstack-infra
2015-05-04T01:45:41  *** sputnik13 has quit IRC
2015-05-04T01:49:14  *** sputnik13 has joined #openstack-infra
2015-05-04T01:49:40  *** patrickeast has joined #openstack-infra
2015-05-04T01:54:24  *** zz_dimtruck is now known as dimtruck
2015-05-04T01:55:12  *** rkukura_ has quit IRC
2015-05-04T01:56:24  *** rkukura has joined #openstack-infra
2015-05-04T01:57:16  *** sarob has quit IRC
2015-05-04T01:57:47  *** camunoz has joined #openstack-infra
2015-05-04T01:57:49  *** gokrokve has joined #openstack-infra
2015-05-04T01:58:28  *** btully has quit IRC
2015-05-04T02:00:47  *** patrickeast has quit IRC
2015-05-04T02:01:45  *** Kennan has quit IRC
2015-05-04T02:04:27  *** dimsum__ has quit IRC
2015-05-04T02:06:03  *** Kennan has joined #openstack-infra
2015-05-04T02:06:39  <openstackgerrit> Merged openstack-infra/system-config: Split diskimage-builder built images out  https://review.openstack.org/167837
2015-05-04T02:08:27  *** Kennan has quit IRC
2015-05-04T02:11:09  *** emagana has joined #openstack-infra
2015-05-04T02:11:15  *** Kennan has joined #openstack-infra
2015-05-04T02:15:51  *** dimtruck is now known as zz_dimtruck
2015-05-04T02:17:21  *** sabeen1 has quit IRC
2015-05-04T02:19:08  *** Somay has joined #openstack-infra
2015-05-04T02:22:38  *** Somay has quit IRC
2015-05-04T02:22:39  *** markvoelker has joined #openstack-infra
2015-05-04T02:25:27  *** achanda has quit IRC
2015-05-04T02:27:25  *** markvoelker has quit IRC
2015-05-04T02:28:28  *** sputnik13 has quit IRC
2015-05-04T02:38:12  *** mikeit has quit IRC
2015-05-04T02:41:40  *** patrickeast has joined #openstack-infra
2015-05-04T02:42:16  *** patrickeast has quit IRC
2015-05-04T02:44:08  <openstackgerrit> Merged openstack-infra/bindep: Allow mixed-case package names  https://review.openstack.org/179111
2015-05-04T02:44:23  *** sdake_ is now known as sdake
2015-05-04T02:46:34  <openstackgerrit> Merged openstack-infra/bindep: Add positive/negative tests exercising the parser  https://review.openstack.org/178378
2015-05-04T02:51:59  <openstackgerrit> Jamie Lennox proposed openstack-infra/project-config: Add django-openstack-auth-kerberos project  https://review.openstack.org/172803
2015-05-04T02:56:14  *** salv-orlando has joined #openstack-infra
2015-05-04T02:56:21  *** sergsh has quit IRC
2015-05-04T02:56:55  *** sergsh has joined #openstack-infra
2015-05-04T03:01:37  *** salv-orlando has quit IRC
2015-05-04T03:05:07  *** dimsum__ has joined #openstack-infra
2015-05-04T03:09:46  <openstackgerrit> Merged openstack-infra/bindep: Allow hyphens in profile strings  https://review.openstack.org/178379
2015-05-04T03:10:20  *** dimsum__ has quit IRC
2015-05-04T03:14:18  *** salv-orlando has joined #openstack-infra
2015-05-04T03:16:25  *** sputnik13 has joined #openstack-infra
2015-05-04T03:19:01  *** yfried|afk is now known as yfried
2015-05-04T03:19:12  *** salv-orlando has quit IRC
2015-05-04T03:22:08  *** coolsvapl is now known as coolsvap
2015-05-04T03:22:10  *** SumitNaiksatam has joined #openstack-infra
2015-05-04T03:22:59  <openstackgerrit> Jeremy Stanley proposed openstack-infra/project-config: Look for yum instead of rpm when caching devstack  https://review.openstack.org/179687
2015-05-04T03:23:27  *** markvoelker has joined #openstack-infra
2015-05-04T03:26:03  *** achanda has joined #openstack-infra
2015-05-04T03:27:10  <openstackgerrit> Jeremy Stanley proposed openstack-infra/project-config: Import subprocess in cache devstack element  https://review.openstack.org/179688
2015-05-04T03:27:44  *** markvoelker has quit IRC
2015-05-04T03:30:52  *** unicell has joined #openstack-infra
2015-05-04T03:31:19  *** achanda has quit IRC
2015-05-04T03:32:22  *** unicell1 has quit IRC
2015-05-04T03:34:55  <openstackgerrit> Ian Wienand proposed openstack-infra/devstack-gate: [WIP] run centos7 with neutron  https://review.openstack.org/179689
2015-05-04T03:35:06  *** reed_ has joined #openstack-infra
2015-05-04T03:37:07  *** reed_ has quit IRC
2015-05-04T03:42:10  *** jyuso1 has joined #openstack-infra
2015-05-04T03:43:03  *** Somay has joined #openstack-infra
2015-05-04T03:48:35  <openstackgerrit> Merged openstack-infra/project-config: Import subprocess in cache devstack element  https://review.openstack.org/179688
2015-05-04T03:50:41  *** bswartz has quit IRC
2015-05-04T03:52:52  *** bswartz has joined #openstack-infra
2015-05-04T04:01:00  <lifeless> tchaypo: I've closed off the pr's you had open on my github tripleo-end-to-end repo: I'm not hacking on that, nor maintaining it atm
2015-05-04T04:02:18  *** ivar-laz_ has joined #openstack-infra
2015-05-04T04:03:35  *** ivar-laz_ has quit IRC
2015-05-04T04:04:11  *** otter768 has quit IRC
2015-05-04T04:04:23  *** fedexo has joined #openstack-infra
2015-05-04T04:04:28  *** ivar-laz_ has joined #openstack-infra
2015-05-04T04:04:32  *** ivar-lazzaro has quit IRC
2015-05-04T04:07:04  <tchaypo> thanks
2015-05-04T04:11:30  *** sarob has joined #openstack-infra
2015-05-04T04:12:23  *** sputnik13 has quit IRC
2015-05-04T04:14:20  *** Hal has joined #openstack-infra
2015-05-04T04:14:43  *** Hal is now known as Guest17598
2015-05-04T04:18:50  *** AlecTaylor has joined #openstack-infra
2015-05-04T04:18:55  <AlecTaylor> hi
2015-05-04T04:20:51  *** jyuso has joined #openstack-infra
2015-05-04T04:21:38  *** Guest17598 has quit IRC
2015-05-04T04:23:16  *** sputnik13 has joined #openstack-infra
2015-05-04T04:23:40  *** jyuso1 has quit IRC
2015-05-04T04:24:04  *** markvoelker has joined #openstack-infra
2015-05-04T04:25:16  <openstackgerrit> Jeremy Stanley proposed openstack-infra/project-config: Do a better job of identifying CentOS 6  https://review.openstack.org/179694
2015-05-04T04:28:29  *** markvoelker has quit IRC
2015-05-04T04:30:33  *** heyongli has quit IRC
2015-05-04T04:31:10  *** heyongli has joined #openstack-infra
2015-05-04T04:31:17  *** tjones1 has left #openstack-infra
2015-05-04T04:31:49  *** sks has joined #openstack-infra
2015-05-04T04:31:57  *** cryptarium has quit IRC
2015-05-04T04:39:07  *** yfried has quit IRC
2015-05-04T04:41:45  *** unicell has quit IRC
2015-05-04T04:43:28  *** unicell has joined #openstack-infra
2015-05-04T04:51:59  *** tjones1 has joined #openstack-infra
2015-05-04T04:54:29  *** abregman has joined #openstack-infra
2015-05-04T04:56:59  <AlecTaylor> PaaS cloud, considering: libcloud+consul+etcd+mesos+deis+drone, thoughts?
2015-05-04T04:57:41  *** woodster_ has joined #openstack-infra
2015-05-04T05:02:13  *** achanda has joined #openstack-infra
2015-05-04T05:04:00  *** chhavi has joined #openstack-infra
2015-05-04T05:04:16  *** btully has joined #openstack-infra
2015-05-04T05:04:28  <chhavi> Hi all
2015-05-04T05:04:42  <chhavi> I am facing issues while commit the changes to openstack
2015-05-04T05:05:07  <chhavi> fatal: The remote end hung up unexpectedly
2015-05-04T05:05:07  <chhavi> chhavi@chhavi-KVM:~/chhavi/nova$ git push gerrit HEAD:refs/for/master/fix-bug-1451030
2015-05-04T05:05:08  <chhavi> fatal: ICLA contributor agreement requires current contact information.
2015-05-04T05:05:08  <chhavi> Please review your contact information:
2015-05-04T05:05:08  <chhavi>   https://review.openstack.org/#/settings/contact
2015-05-04T05:05:08  <chhavi> fatal: The remote end hung up unexpectedly
2015-05-04T05:21:38  <jhesketh> chhavi: have you updated your contact information as per the instructions?
2015-05-04T05:22:23  <chhavi> yes, the issue just got resolved. there was issue while running git remote
2015-05-04T05:22:29  <chhavi> I am able to commit the change now
2015-05-04T05:24:52  <jhesketh> excellent
2015-05-04T05:24:52  *** markvoelker has joined #openstack-infra
2015-05-04T05:27:12  *** ivar-laz_ has quit IRC
2015-05-04T05:29:16  *** markvoelker has quit IRC
2015-05-04T05:34:48  *** ashleighfarnham has joined #openstack-infra
2015-05-04T05:36:40  <tchaypo> dhellmann: .
2015-05-04T05:37:00  *** gokrokve has quit IRC
2015-05-04T05:37:08  *** chhavi has left #openstack-infra
2015-05-04T05:37:32  *** gokrokve has joined #openstack-infra
2015-05-04T05:39:24  *** ashleighfarnham has quit IRC
2015-05-04T05:42:07  *** gokrokve has quit IRC
2015-05-04T05:42:37  *** hdd has joined #openstack-infra
2015-05-04T05:43:31  *** BharatK has joined #openstack-infra
2015-05-04T05:43:32  *** sarob has quit IRC
2015-05-04T05:49:49  <tchaypo> well done me.
2015-05-04T05:50:37  *** ibiris_away is now known as ibiris
2015-05-04T05:53:47  *** salv-orlando has joined #openstack-infra
2015-05-04T05:55:31  *** Somay has quit IRC
2015-05-04T05:56:25  *** Somay has joined #openstack-infra
2015-05-04T05:56:50  *** salv-orlando has quit IRC
2015-05-04T05:58:44  *** Darkwan has quit IRC
2015-05-04T05:59:30  *** salv-orlando has joined #openstack-infra
2015-05-04T05:59:52  *** salv-orlando has quit IRC
2015-05-04T06:03:23  *** tnovacik has joined #openstack-infra
2015-05-04T06:05:07  *** otter768 has joined #openstack-infra
2015-05-04T06:05:37  *** AlecTaylor has quit IRC
2015-05-04T06:08:02  *** gokrokve has joined #openstack-infra
2015-05-04T06:09:35  *** gokrokve has quit IRC
2015-05-04T06:09:52  *** gokrokve has joined #openstack-infra
2015-05-04T06:10:01  *** otter768 has quit IRC
2015-05-04T06:11:20  *** salv-orlando has joined #openstack-infra
2015-05-04T06:14:21  *** deepakcs has joined #openstack-infra
2015-05-04T06:15:54  *** salv-orlando has quit IRC
2015-05-04T06:16:38  *** mrunge has joined #openstack-infra
2015-05-04T06:18:34  *** vlaza has joined #openstack-infra
2015-05-04T06:22:16  *** sdake_ has joined #openstack-infra
2015-05-04T06:22:18  *** fedexo has quit IRC
2015-05-04T06:23:26  <openstackgerrit> Andreas Jaeger proposed openstack/requirements: Rename keystoneclient-federation to saml2  https://review.openstack.org/179706
2015-05-04T06:25:00  *** sergsh has quit IRC
2015-05-04T06:25:00  *** sergsh_ has quit IRC
2015-05-04T06:25:21  *** yfried has joined #openstack-infra
2015-05-04T06:25:55  *** sdake has quit IRC
2015-05-04T06:35:11  *** sdake_ is now known as sdake
2015-05-04T06:36:53  *** yfried is now known as yfried|afk
2015-05-04T06:37:31  *** yfried|afk is now known as yfried
2015-05-04T06:42:45  *** dimsum__ has joined #openstack-infra
2015-05-04T06:43:21  *** ibiris is now known as ibiris_away
2015-05-04T06:44:07  *** xylan_kong has left #openstack-infra
2015-05-04T06:45:17  *** salv-orl_ has joined #openstack-infra
2015-05-04T06:47:25  *** ibiris_away is now known as ibiris
2015-05-04T06:47:45  *** dimsum__ has quit IRC
2015-05-04T06:55:06  *** jcoufal has joined #openstack-infra
2015-05-04T06:55:11  *** sushilkm has left #openstack-infra
2015-05-04T06:58:50  <ttx> lifeless: doing it now
2015-05-04T06:59:54  *** hdd has quit IRC
2015-05-04T07:00:24  *** hdd has joined #openstack-infra
2015-05-04T07:02:52  <ttx> mtreinish, morganfainberg: stable-maint-core owns $PROJECT-stable-maint because we are supposed to check that proposed members know and will follow the stable policy
2015-05-04T07:03:28  <ttx> You don't want each $PROJECT to come up with their own culture of what is an acceptable stable branch backport -- consistency is needed there
2015-05-04T07:04:54  *** Ala has joined #openstack-infra
2015-05-04T07:05:39  <ttx> So project teams propose members and stable-maint-core lecture the proposed member with Stable Branch Policy, then we add them
2015-05-04T07:06:37  <ttx> Reference: https://wiki.openstack.org/wiki/StableBranch#Project-specific_teams
2015-05-04T07:09:27  *** scheuran has joined #openstack-infra
2015-05-04T07:12:03  <lifeless> ttx: thanks
2015-05-04T07:12:57  *** mrmartin has joined #openstack-infra
2015-05-04T07:14:13  *** yamahata has quit IRC
2015-05-04T07:21:36  *** sdake has quit IRC
2015-05-04T07:21:58  *** doude has joined #openstack-infra
2015-05-04T07:22:02  <openstackgerrit> Steve Kowalik proposed openstack-infra/infra-specs: Add a specification about building packages  https://review.openstack.org/179713
2015-05-04T07:23:51  *** achanda has quit IRC
2015-05-04T07:24:17  *** ashleighfarnham has joined #openstack-infra
2015-05-04T07:24:52  <openstackgerrit> Sebastian Kalinowski proposed openstack-infra/project-config: Remove old Fuel plugins  https://review.openstack.org/179714
2015-05-04T07:26:12  *** btully has quit IRC
2015-05-04T07:26:19  *** markvoelker has joined #openstack-infra
2015-05-04T07:26:28  *** achanda has joined #openstack-infra
2015-05-04T07:28:34  *** ashleighfarnham has quit IRC
2015-05-04T07:29:56  *** ildikov has joined #openstack-infra
2015-05-04T07:30:39  *** markvoelker has quit IRC
2015-05-04T07:33:47  *** Kennan has quit IRC
2015-05-04T07:34:16  *** Kennan has joined #openstack-infra
2015-05-04T07:36:51  *** markus_z has joined #openstack-infra
2015-05-04T07:36:52  *** dizquierdo has joined #openstack-infra
2015-05-04T07:37:30  *** achanda has quit IRC
2015-05-04T07:37:37  *** chlong has quit IRC
2015-05-04T07:40:19  *** mpavone has joined #openstack-infra
2015-05-04T07:40:42  *** woodster_ has quit IRC
2015-05-04T07:43:46  *** Hal has joined #openstack-infra
2015-05-04T07:44:10  *** Hal is now known as Guest36998
2015-05-04T07:49:56  *** swat30 has quit IRC
2015-05-04T07:50:36  *** begal-sop_ has quit IRC
2015-05-04T07:50:55  *** funzo_ has joined #openstack-infra
2015-05-04T07:50:55  *** aswadr has joined #openstack-infra
2015-05-04T07:50:55  *** arxcruz has joined #openstack-infra
2015-05-04T07:50:56  *** funzo has quit IRC
2015-05-04T07:50:56  *** swat30_ has joined #openstack-infra
2015-05-04T07:51:03  *** swat30_ is now known as swat30
2015-05-04T07:51:12  *** begal-sop__ has joined #openstack-infra
2015-05-04T07:52:41  *** tnovacik has quit IRC
2015-05-04T07:56:06  <openstackgerrit> Jan Klare proposed openstack-infra/project-config: added chef-rake-jobs for openstack-chef-repo  https://review.openstack.org/179721
2015-05-04T07:56:28  <openstackgerrit> Fabien Boucher proposed openstack-infra/infra-specs: Specification proposal about system-config testing using containers  https://review.openstack.org/172833
2015-05-04T07:56:46  *** hashar has joined #openstack-infra
2015-05-04T07:57:20  *** hashar_ has joined #openstack-infra
2015-05-04T07:59:08  *** jistr has joined #openstack-infra
2015-05-04T08:02:30  *** hashar has quit IRC
2015-05-04T08:04:54  *** AJaeger has joined #openstack-infra
2015-05-04T08:05:57  *** otter768 has joined #openstack-infra
2015-05-04T08:08:18  <GheRiver1> hi all
2015-05-04T08:08:23  *** GheRiver1 is now known as GheRivero
2015-05-04T08:08:52  *** pblaho has joined #openstack-infra
2015-05-04T08:10:47  *** ildikov has quit IRC
2015-05-04T08:10:57  *** otter768 has quit IRC
2015-05-04T08:13:02  *** fhubik has joined #openstack-infra
2015-05-04T08:14:38  *** sushilkm has joined #openstack-infra
2015-05-04T08:14:41  *** sushilkm has left #openstack-infra
2015-05-04T08:17:49  *** vlaza has quit IRC
2015-05-04T08:17:53  *** vlaza1 has joined #openstack-infra
2015-05-04T08:26:19  *** ajo has joined #openstack-infra
2015-05-04T08:26:27  *** ildikov has joined #openstack-infra
2015-05-04T08:27:08  *** markvoelker has joined #openstack-infra
2015-05-04T08:27:40  *** sergsh_ has joined #openstack-infra
2015-05-04T08:29:04  *** vlaza has joined #openstack-infra
2015-05-04T08:29:17  *** vlaza1 has quit IRC
2015-05-04T08:30:41  *** Hal has joined #openstack-infra
2015-05-04T08:30:52  *** SumitNaiksatam has quit IRC
2015-05-04T08:31:05  *** Hal is now known as Guest64971
2015-05-04T08:31:21  *** markvoelker has quit IRC
2015-05-04T08:31:27  *** fhubik is now known as fhubik_afk
2015-05-04T08:31:30  *** sergsh has joined #openstack-infra
2015-05-04T08:32:52  <openstackgerrit> Huang Rui proposed openstack-infra/project-config: enable python-jobs for networking-zvm  https://review.openstack.org/179730
2015-05-04T08:33:50  *** Guest36998 has quit IRC
2015-05-04T08:33:53  *** tnovacik has joined #openstack-infra
2015-05-04T08:34:54  *** SumitNaiksatam has joined #openstack-infra
2015-05-04T08:35:13  *** Guest64971 has quit IRC
2015-05-04T08:36:41  *** mrunge has quit IRC
2015-05-04T08:38:13  *** vlaza has quit IRC
2015-05-04T08:38:23  *** vlaza has joined #openstack-infra
2015-05-04T08:39:49  <openstackgerrit> Merged openstack-infra/project-config: Puppet/Beaker: drop puppet-{gnocchi,tuskar}  https://review.openstack.org/179601
2015-05-04T08:41:01  *** Somay has quit IRC
2015-05-04T08:42:37  *** Somay has joined #openstack-infra
2015-05-04T08:45:28  *** alexpilotti has quit IRC
2015-05-04T08:48:15  *** ociuhandu has joined #openstack-infra
2015-05-04T08:50:29  *** vlaza has quit IRC
2015-05-04T08:50:40  *** vlaza has joined #openstack-infra
2015-05-04T08:54:11  *** alexpilotti has joined #openstack-infra
2015-05-04T08:56:23  <openstackgerrit> Sirushti Murugesan proposed openstack-infra/project-config: Add grenade jobs for Heat  https://review.openstack.org/178352
2015-05-04T09:02:14  <openstackgerrit> Huang Rui proposed openstack-infra/project-config: Move zvm-driver to stackforge-attic  https://review.openstack.org/179738
2015-05-04T09:04:43  *** e0ne has joined #openstack-infra
2015-05-04T09:06:42  *** hashar_ is now known as hasharOut
2015-05-04T09:10:10  *** yfried is now known as yfried|afk
2015-05-04T09:10:15  *** e0ne has quit IRC
2015-05-04T09:11:16  *** asrangne has joined #openstack-infra
2015-05-04T09:13:05  *** salv-orlando has joined #openstack-infra
2015-05-04T09:13:06  *** salv-orl_ has quit IRC
2015-05-04T09:13:07  *** ashleighfarnham has joined #openstack-infra
2015-05-04T09:13:44  *** aswadr has quit IRC
2015-05-04T09:16:41  *** hdd has quit IRC
2015-05-04T09:17:20  *** _dguerri is now known as dguerri
2015-05-04T09:17:21  *** ashleighfarnham has quit IRC
2015-05-04T09:18:41  *** hdd has joined #openstack-infra
2015-05-04T09:22:27  *** sergsh has quit IRC
2015-05-04T09:22:27  *** sergsh_ has quit IRC
2015-05-04T09:23:06  *** fhubik_afk is now known as fhubik
2015-05-04T09:27:52  *** markvoelker has joined #openstack-infra
2015-05-04T09:27:58  *** jyuso has quit IRC
2015-05-04T09:28:27  *** dguerri is now known as _dguerri
2015-05-04T09:29:28  *** mpaolino has joined #openstack-infra
2015-05-04T09:30:26  *** vlaza has left #openstack-infra
2015-05-04T09:32:26  *** markvoelker has quit IRC
2015-05-04T09:32:54  <openstackgerrit> Giulio Fidente proposed openstack-infra/tripleo-ci: Bump up delorean pinning  https://review.openstack.org/177176
2015-05-04T09:33:26  <openstackgerrit> Julian Taylor proposed openstack-infra/jenkins-job-builder: add support for measurement plots plugin to junit publisher  https://review.openstack.org/179743
2015-05-04T09:34:52  *** Somay_ has joined #openstack-infra
2015-05-04T09:35:16  *** Somay has quit IRC
2015-05-04T09:35:22  *** sergsh has joined #openstack-infra
2015-05-04T09:35:27  *** sergsh_ has joined #openstack-infra
2015-05-04T09:35:54  *** mpaolino has quit IRC
2015-05-04T09:38:48  *** abregman is now known as abregmansd
2015-05-04T09:38:59  *** abregmansd is now known as abregman|food
2015-05-04T09:39:14  *** abregman|food is now known as abregman|food-ti
2015-05-04T09:39:38  *** abregman|food-ti is now known as abregman|launch
2015-05-04T09:39:57  *** abregman|launch is now known as abregman|lunch
2015-05-04T09:42:11  *** _dguerri is now known as dguerri
2015-05-04T09:43:12  *** salv-orlando has quit IRC
2015-05-04T09:44:50  *** ociuhandu has quit IRC
2015-05-04T09:46:45  *** salv-orl_ has joined #openstack-infra
2015-05-04T09:46:45  *** mrunge has joined #openstack-infra
2015-05-04T09:47:11  *** fhubik is now known as fhubik_afk
2015-05-04T09:49:04  <openstackgerrit> Giulio Fidente proposed openstack-infra/tripleo-ci: Bump up delorean pinning  https://review.openstack.org/177176
2015-05-04T09:49:06  *** luqas has joined #openstack-infra
2015-05-04T09:49:20  *** abregman|lunch is now known as abregman
2015-05-04T09:50:00  *** dguerri is now known as _dguerri
2015-05-04T09:50:02  *** fhubik_afk is now known as fhubik
2015-05-04T09:50:11  *** salv-orlando has joined #openstack-infra
2015-05-04T09:52:20  <openstackgerrit> Victor Stinner proposed openstack/requirements: Add mysqlclient dependency  https://review.openstack.org/179745
2015-05-04T09:53:46  *** salv-orl_ has quit IRC
2015-05-04T09:53:56  *** dimsum__ has joined #openstack-infra
2015-05-04T09:55:10  <openstackgerrit> Sirushti Murugesan proposed openstack-infra/project-config: Add grenade jobs for Heat  https://review.openstack.org/178352
2015-05-04T09:55:26  *** devvesa has joined #openstack-infra
2015-05-04T09:55:45  *** Hal has joined #openstack-infra
2015-05-04T09:56:09  *** Hal is now known as Guest84883
2015-05-04T10:00:28  *** zhiwei has quit IRC
2015-05-04T10:04:46  *** rlandy has joined #openstack-infra
2015-05-04T10:05:22  *** dguitarbite has quit IRC
2015-05-04T10:06:50  *** otter768 has joined #openstack-infra
2015-05-04T10:08:59  *** abregman is now known as abregman|lunch
2015-05-04T10:09:41  *** vlaza has joined #openstack-infra
2015-05-04T10:11:21  *** otter768 has quit IRC
2015-05-04T10:14:05  <lifeless> a few hours late, but just FYI, new releases of testscenarios and fixtures were cut earlier today
2015-05-04T10:14:13  <lifeless> not expecting any fallout,but just in case....
2015-05-04T10:15:58  *** armax has joined #openstack-infra
2015-05-04T10:16:43  *** yfried|afk is now known as yfried
2015-05-04T10:17:32  *** pc_m has joined #openstack-infra
2015-05-04T10:17:34  *** dguitarbite has joined #openstack-infra
2015-05-04T10:22:48  *** Somay_ has quit IRC
2015-05-04T10:23:04  *** macjack has joined #openstack-infra
2015-05-04T10:26:02  *** fhubik is now known as fhubik_afk
2015-05-04T10:27:58  *** _dguerri is now known as dguerri
2015-05-04T10:28:02  *** tnovacik has quit IRC
2015-05-04T10:28:19  *** sushilkm has joined #openstack-infra
2015-05-04T10:28:31  *** sushilkm has left #openstack-infra
2015-05-04T10:28:45  *** fhubik_afk is now known as fhubik
2015-05-04T10:31:02  *** salv-orl_ has joined #openstack-infra
2015-05-04T10:31:46  *** e0ne has joined #openstack-infra
2015-05-04T10:34:56  *** salv-orlando has quit IRC
2015-05-04T10:36:51  *** weshay has joined #openstack-infra
2015-05-04T10:40:06  *** mrmartin has quit IRC
2015-05-04T10:40:32  *** samueldmq has joined #openstack-infra
2015-05-04T10:40:35  <samueldmq> morning :)
2015-05-04T10:43:33  *** asrangne has quit IRC
2015-05-04T10:43:33  *** dguerri is now known as _dguerri
2015-05-04T10:44:45  *** armax has quit IRC
2015-05-04T10:46:28  *** salv-orl_ has quit IRC
2015-05-04T10:47:02  *** salv-orlando has joined #openstack-infra
2015-05-04T10:49:08  <openstackgerrit> Julian Taylor proposed openstack-infra/jenkins-job-builder: add support for measurement plots plugin to junit publisher  https://review.openstack.org/179743
2015-05-04T10:49:33  *** ociuhandu has joined #openstack-infra
2015-05-04T10:50:34  *** fhubik is now known as fhubik_afk
2015-05-04T10:52:36  *** fhubik_afk is now known as fhubik
2015-05-04T10:54:51  *** tjones2 has joined #openstack-infra
2015-05-04T10:57:30  *** tjones1 has quit IRC
2015-05-04T10:57:33  *** luqas has quit IRC
2015-05-04T10:57:52  *** mrmartin has joined #openstack-infra
2015-05-04T10:59:13  *** tnovacik has joined #openstack-infra
2015-05-04T11:01:55  *** ashleighfarnham has joined #openstack-infra
2015-05-04T11:02:15  <openstackgerrit> Michal Kovarik proposed openstack-infra/jenkins-job-builder: Adding support for Beaker Builder Plugin  https://review.openstack.org/179756
2015-05-04T11:03:58  *** claudiub has joined #openstack-infra
2015-05-04T11:04:52  *** baoli has joined #openstack-infra
2015-05-04T11:05:35  *** baoli has quit IRC
2015-05-04T11:06:11  *** abregman|lunch is now known as abregman
2015-05-04T11:06:36  *** ashleighfarnham has quit IRC
2015-05-04T11:07:17  <sdague> ls
2015-05-04T11:07:20  <sdague> doh
2015-05-04T11:09:21  <openstackgerrit> Sirushti Murugesan proposed openstack-infra/project-config: Add grenade jobs for Heat  https://review.openstack.org/178352
2015-05-04T11:09:52  *** vlaza has left #openstack-infra
2015-05-04T11:11:32  <samueldmq> sdague, echo "hehe"; ./good-morning.sh
2015-05-04T11:11:43  <AJaeger> morning, sdague! The requirements post job propose-requirements-update fails due to a project rename - https://review.openstack.org/#/c/179706/ should fix it...
2015-05-04T11:14:26  <samueldmq> AJaeger, and this also should be renamed in the  openstack/requirements .. which was failing to find python-keystoneclient-federation
2015-05-04T11:14:37  <samueldmq> right ?
2015-05-04T11:14:47  <AJaeger> samueldmq, yep
2015-05-04T11:15:00  <samueldmq> AJaeger, nice
2015-05-04T11:15:06  *** Longgeek has joined #openstack-infra
2015-05-04T11:15:28  <AJaeger> samueldmq, https://jenkins.openstack.org/job/propose-requirements-updates/539/console
2015-05-04T11:17:30  <samueldmq> AJaeger, cool .. I just added a reference to your patch on the previous one (which renamed the project)
2015-05-04T11:19:13  <AJaeger> thanks, samueldmq.
2015-05-04T11:19:39  <sdague> AJaeger: could you make propose-requirements-update more robust as well?
2015-05-04T11:19:50  <sdague> it seems like 1 project not existing shouldn't make it go fatal
2015-05-04T11:19:59  *** luqas has joined #openstack-infra
2015-05-04T11:20:50  <AJaeger> sdague, would be a nice idea. I doubt I have time quickly for this, so if anybody else wants to take it...
2015-05-04T11:23:18  *** salv-orlando has quit IRC
2015-05-04T11:23:28  <openstackgerrit> Gal Sagie proposed openstack-infra/project-config: Enable a check job for stackforge/dragonflow  https://review.openstack.org/175152
2015-05-04T11:26:08  <samueldmq> sdague, AJaeger how would be that change ? I'd probably be able to help, but I am not familiar with this code
2015-05-04T11:26:39  <samueldmq> any entry point to the code ?
2015-05-04T11:26:43  <AJaeger> samueldmq, jenkins/scripts/propose_update.sh in project-config
2015-05-04T11:27:41  *** ildikov has quit IRC
2015-05-04T11:27:58  <samueldmq> AJaeger, sdague what should be the expected behavior when it cannot fetch a project ?
2015-05-04T11:28:26  <AJaeger> http://git.openstack.org/cgit/openstack-infra/project-config/tree/jenkins/scripts/propose_update.sh#n43 is the line that currently breaks it
2015-05-04T11:28:37  *** eharney has quit IRC
2015-05-04T11:28:56  <AJaeger> samueldmq, setting ALL_SUCCESS to 1 and moving on to the next project
2015-05-04T11:29:38  <AJaeger> Together with some error message to look out for
2015-05-04T11:29:53  *** luqas has quit IRC
2015-05-04T11:30:13  <sdague> samueldmq: yeh, so it should accumulate errors somewhere to report at the end, but definitely keep looping through all projects
2015-05-04T11:30:29  *** wznoinsk has quit IRC
2015-05-04T11:30:37  *** marcusvrn has joined #openstack-infra
2015-05-04T11:30:45  <pc_m> Hi, I'm getting a failure in gate-neutron-vpnaas-python27 that is quite odd. It passes all the tests and then fails in the script after. Anyone hear of this?
2015-05-04T11:30:54  <pc_m> Ref:  http://logs.openstack.org/15/168115/32/check/gate-neutron-vpnaas-python27/5d9ecf1/console.html#_2015-05-02_16_28_39_906
2015-05-04T11:30:56  <AJaeger> sdague, there are more projects in requirements that were renamed...
2015-05-04T11:31:03  * AJaeger does a second patch...
2015-05-04T11:31:10  <sdague> AJaeger: cool, thanks
2015-05-04T11:31:26  <openstackgerrit> Michal Kovarik proposed openstack-infra/jenkins-job-builder: Adding support for Beaker Builder Plugin  https://review.openstack.org/179756
2015-05-04T11:31:56  *** luqas has joined #openstack-infra
2015-05-04T11:32:59  <samueldmq> AJaeger, sdague should be something similar to what we do when a project fails to sync .. http://git.openstack.org/cgit/openstack-infra/project-config/tree/jenkins/scripts/propose_update.sh#n114
2015-05-04T11:33:03  <samueldmq> right ?
2015-05-04T11:33:19  <AJaeger> yes
2015-05-04T11:33:25  <samueldmq> k got it
2015-05-04T11:36:02  *** deepakcs has quit IRC
2015-05-04T11:38:14  <openstackgerrit> Andreas Jaeger proposed openstack/requirements: Follow project renames  https://review.openstack.org/179706
2015-05-04T11:38:19  <AJaeger> sdague, samueldmq : Updated my patch ^
2015-05-04T11:39:05  <openstackgerrit> Andreas Jaeger proposed openstack/requirements: Follow project renames  https://review.openstack.org/179706
2015-05-04T11:39:10  <AJaeger> and sorted projects again ^
2015-05-04T11:40:15  *** mase_x200 has joined #openstack-infra
2015-05-04T11:41:13  *** dimsum__ is now known as dims
2015-05-04T11:41:49  <samueldmq> AJaeger, and congress/rally changed from stackforge to opesntack, right?
2015-05-04T11:41:59  <AJaeger> samueldmq, they did
2015-05-04T11:42:06  <samueldmq> AJaeger, k looks good, thanks
2015-05-04T11:42:22  <AJaeger> samueldmq, let me enhance the commit message...
2015-05-04T11:43:04  *** ildikov has joined #openstack-infra
2015-05-04T11:43:11  <samueldmq> AJaeger, oh, already +1'ed, the commit message already says rally and congress were renamed
2015-05-04T11:43:26  <samueldmq> AJaeger, but feel free to enhance it as you want :)
2015-05-04T11:43:28  <openstackgerrit> Andreas Jaeger proposed openstack/requirements: Follow project renames  https://review.openstack.org/179706
2015-05-04T11:43:39  <AJaeger> samueldmq, if you ask, somebody else wonders as well - so let's be clear here...
2015-05-04T11:43:49  <AJaeger> samueldmq, thanks for the reviews
2015-05-04T11:44:42  <samueldmq> AJaeger, you added links to the commits on each project, nice
2015-05-04T11:44:50  *** claudiub_ has joined #openstack-infra
2015-05-04T11:45:19  <samueldmq> AJaeger, np, just trying to get things moving, my reviews aren't still that valuable in #infra though
2015-05-04T11:45:43  <AJaeger> samueldmq, every review is important - and you learn as well with them ;)
2015-05-04T11:45:58  *** claudiub has quit IRC
2015-05-04T11:46:07  <samueldmq> AJaeger, :)
2015-05-04T11:47:27  *** ldnunes has joined #openstack-infra
2015-05-04T11:47:53  *** esker has quit IRC
2015-05-04T11:50:43  *** markvoelker has joined #openstack-infra
2015-05-04T11:51:06  *** alexpilotti has quit IRC
2015-05-04T11:51:20  *** luqas has quit IRC
2015-05-04T11:52:27  *** dkranz has joined #openstack-infra
2015-05-04T11:53:12  <openstackgerrit> Samuel de Medeiros Queiroz proposed openstack-infra/project-config: Don't short circuit when projects fails to clone  https://review.openstack.org/179760
2015-05-04T11:53:17  <samueldmq> AJaeger, sdague ^
2015-05-04T11:53:37  <openstackgerrit> Samuel de Medeiros Queiroz proposed openstack-infra/project-config: Don't short circuit when projects fail to clone  https://review.openstack.org/179760
2015-05-04T11:53:54  <samueldmq> well, just fixed the commit message
2015-05-04T11:54:30  <foobio> pc_m: i've commented on your https://review.openstack.org/168115 change pointing out where you're introducing that issue
2015-05-04T11:55:58  <pc_m> foobio: Thanks. I was wondering if it was the copy of rootwrap.conf. will look at your comment.
2015-05-04T11:56:38  <pc_m> foobio: Ah that is what you saw. Thanks
2015-05-04T11:56:59  <AJaeger> thanks, samueldmq!
2015-05-04T11:57:24  <pc_m> foobio: I'm not too familiar with tox.ini. Can I have a command for a target, depend on another target's command?
2015-05-04T11:57:28  <claudiub_> sdague: hello. Could I have your +2 on a 1 line commit? It already has a +2. https://review.openstack.org/#/c/178993/ Thanks!
2015-05-04T11:57:38  <samueldmq> AJaeger, np, anytime :)
2015-05-04T11:58:43  *** rfolco has joined #openstack-infra
2015-05-04T12:00:02  <pc_m> foobio: IOW, have the command on that and the previous two lines in a "functional" target, and then have the dsvm-functional and dsvm-functional-sswan targets use that command?
2015-05-04T12:00:18  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: use optimized url for zuul status  https://review.openstack.org/170935
2015-05-04T12:00:18  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: add dbg function to hideci  https://review.openstack.org/179573
2015-05-04T12:00:19  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: add jquery visibility  https://review.openstack.org/179362
2015-05-04T12:00:19  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: create proxy for testing hideci  https://review.openstack.org/179360
2015-05-04T12:00:20  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: Revert "Revert zuul status in gerrit"  https://review.openstack.org/179361
2015-05-04T12:00:57  <pc_m> foobio: like... command = {|functional|command}?
2015-05-04T12:03:42  <foobio> pc_m: i don't think there's a way to inherit and then extend those variables from one env to the next, though you might check the documentation for tox. you'll probably just need to have that command appear explicitly in each env where it's needed
2015-05-04T12:04:07  <pc_m> foobio: ok. will do. thanks
2015-05-04T12:05:01  <foobio> pc_m: oh, though it is possible to add an env to the commands list of another env
2015-05-04T12:05:25  <foobio> for example nova (and a lot of other projects) have a pep8 env that calls the flake8 env
2015-05-04T12:05:28  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Convert node_set_provision_state to task  https://review.openstack.org/177987
2015-05-04T12:05:28  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Update recent Ironic exceptions  https://review.openstack.org/177986
2015-05-04T12:05:29  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Enhance error message in update_machine  https://review.openstack.org/177985
2015-05-04T12:05:29  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Enhance the OperatorCloud constructor  https://review.openstack.org/179647
2015-05-04T12:05:54  <AJaeger> foobio, we have an idle CI system with a IMHO very slow throughput. project-config changes need over an hour to get through, waiting very long for gate-infra-puppet-apply-precise - if I interpret status.openstack.org/zuul correctly
2015-05-04T12:06:41  <foobio> pc_m: wait, i just brained wrong. the pep8 env calls the flake8 command line utility. flake8 itself magically reads tox.ini too and looks for a "flake8" env containing its configuration
2015-05-04T12:06:56  <foobio> pc_m: so forget what i said about calling an env from another env
2015-05-04T12:07:10  *** luqas has joined #openstack-infra
2015-05-04T12:07:56  <foobio> AJaeger: yes, i think that jenkins-gearman bug superbee and zaro were looking at last week is still an issue. i'll clear out more stale ready nodes for now and that should speed things back up
2015-05-04T12:08:30  <AJaeger> foobio, thanks! That jenkins-gearman bug is becoming famous ;/
2015-05-04T12:08:31  <jhesketh> sdague: oh cool, nice stuff (re zuul status patches)
2015-05-04T12:10:20  <sdague> jhesketh: yeh, so the jquery visibility bit still needs that file to actually get deployed, I don't know where best to do that
2015-05-04T12:10:28  <sdague> jhesketh: do you?
2015-05-04T12:10:35  *** mrmartin has quit IRC
2015-05-04T12:10:56  <openstackgerrit> Samuel de Medeiros Queiroz proposed openstack-infra/project-config: Don't short circuit when projects fails to clone  https://review.openstack.org/179760
2015-05-04T12:11:01  <sdague> also, the targettted status calls aren't working still
2015-05-04T12:11:02  <jhesketh> sdague: I just started reviewing at the top (the web server), so not sure which file that is sorry?
2015-05-04T12:11:04  <samueldmq> foobio, ^ thanks for your review
2015-05-04T12:11:14  <sdague> https://review.openstack.org/179362
2015-05-04T12:12:11  <jhesketh> sdague: oh yeah, I know where that goes... gimme a sec
2015-05-04T12:12:16  *** hdd has quit IRC
2015-05-04T12:12:49  <openstackgerrit> Merged openstack-infra/project-config: Adds pypi-jobs to networking-hyperv  https://review.openstack.org/178993
2015-05-04T12:14:12  <jhesketh> sdague: it goes in system-config/modules/openstack_project/files/gerrit/GerritSiteHeader.html
2015-05-04T12:14:46  <sdague> jhesketh: ok, we also deploy it for zuul, so I wasn't sure if there was a common deploy point that we wanted
2015-05-04T12:14:49  <jhesketh> sdague: do it similar to the hideci.js in that file, the important part is the notify => Exec['reload_gerrit_header'] because of the way gerrit signs static files
2015-05-04T12:15:13  <sdague> right, my only concern was copying the file a second time into a tree
2015-05-04T12:15:26  <sdague> and if that's what people want or not
2015-05-04T12:15:51  *** luqas has quit IRC
2015-05-04T12:15:52  <jhesketh> sdague: oh right, I see.. Well we could link to the file on zuul.o.o but that's not great
2015-05-04T12:15:54  <foobio> sdague: sdague what do you mean by the targeted status calls aren't working still? http://zuul.openstack.org/status/change/179754,2 returns json for me right now
2015-05-04T12:16:36  <sdague> foobio: oh... but not over https
2015-05-04T12:16:56  <foobio> sdague: oh! right, we probably need to duplicate that block for https as well. i completely forgot :/
2015-05-04T12:17:15  <sdague> ok, no prob, let me go look for that
2015-05-04T12:17:17  <jhesketh> sdague: but the actual file isn't copied into the tree, so something like this: http://git.openstack.org/cgit/openstack-infra/puppet-zuul/tree/manifests/init.pp#n249
2015-05-04T12:17:24  *** doug-fish has left #openstack-infra
2015-05-04T12:17:41  <foobio> sdague: it's later in the same file you modified previously
2015-05-04T12:18:00  <foobio> sdague: one vhost template providing http and optionally https
2015-05-04T12:18:03  <jhesketh> sdague: but the notify part I mentioned is still important and the gerrit.pp is the place
2015-05-04T12:18:16  <sdague> jhesketh: any chance you want to write that puppet? I need to get my presentations for summit sorted early this week, so I'm going to loose this thread for a bit
2015-05-04T12:18:25  *** shakamunyi has quit IRC
2015-05-04T12:18:44  <jhesketh> sdague: also, looks like I had a paste failure... I meant to say it'd go into system-config/modules/openstack_project/manifests/gerrit.pp
2015-05-04T12:18:52  <jhesketh> sdague: heh, I was just about to offer
2015-05-04T12:18:57  <jhesketh> happy to
2015-05-04T12:19:31  *** bswartz has quit IRC
2015-05-04T12:19:33  *** aysyd has joined #openstack-infra
2015-05-04T12:19:57  *** ashleighfarnham has joined #openstack-infra
2015-05-04T12:20:30  <openstackgerrit> Sean Dague proposed openstack-infra/puppet-zuul: also add targeted status redirects to https  https://review.openstack.org/179764
2015-05-04T12:20:35  <sdague> jhesketh: thanks!
2015-05-04T12:20:44  <sdague> foobio: ok, that's hopefully the other fix
2015-05-04T12:22:09  *** gordc has joined #openstack-infra
2015-05-04T12:24:03  <mordred> jhesketh: ooh - you're still up
2015-05-04T12:24:08  *** salv-orlando has joined #openstack-infra
2015-05-04T12:24:17  <jhesketh> mordred: corright
2015-05-04T12:24:25  *** ashleighfarnham has quit IRC
2015-05-04T12:24:27  <mordred> jhesketh: I think I took care of your notes on https://review.openstack.org/177985
2015-05-04T12:24:38  <jhesketh> mordred: looking
2015-05-04T12:24:39  <mordred> jhesketh: and good points, btw, thanks
2015-05-04T12:26:55  <openstackgerrit> Joshua Hesketh proposed openstack-infra/system-config: Serve up jquery-visibility.min.js for gerrit  https://review.openstack.org/179765
2015-05-04T12:27:03  <jhesketh> sdague: ^
2015-05-04T12:27:37  <jhesketh> mordred: cool, lgtm
2015-05-04T12:27:53  <mordred> jhesketh: yay!
2015-05-04T12:28:13  *** fhubik has quit IRC
2015-05-04T12:28:18  <mordred> jhesketh: wow, we weren't jquerying already?
2015-05-04T12:28:50  <jhesketh> mordred: we weren't jquery-visibilitying
2015-05-04T12:29:01  <yolanda> mordred, i'm having issues with https://git.openstack.org/cgit/openstack-infra/nodepool/commit/?id=8b87890b978a54be10eff272f7bb6d9955e2d999
2015-05-04T12:29:05  *** fhubik has joined #openstack-infra
2015-05-04T12:29:05  <yolanda> the change for nodepool and proxy
2015-05-04T12:29:21  <yolanda> you are not using that upstream, right?
2015-05-04T12:29:57  *** luqas has joined #openstack-infra
2015-05-04T12:30:02  <mordred> yolanda: we are not
2015-05-04T12:30:11  <yolanda> i'd say that this change doesn't work
2015-05-04T12:30:16  <yolanda> let me paste you the error
2015-05-04T12:30:45  <yolanda> mordred, http://paste.openstack.org/show/214843/
2015-05-04T12:30:53  <mordred> yolanda: oh! we are
2015-05-04T12:30:56  <yolanda> that code is not raising a ProxyError, but a Timeout
2015-05-04T12:31:09  <yolanda> it happens when i do a manual image-update
2015-05-04T12:31:10  <mordred> yolanda: but we're not behind a proxy - so we've never seen that condition ourselves
2015-05-04T12:31:34  <yolanda> also, according to the logs, it even doesn't reach the provider_manager.py runTask method
2015-05-04T12:31:43  <mordred> hrm
2015-05-04T12:31:56  *** hdd has joined #openstack-infra
2015-05-04T12:34:12  *** dizquierdo has quit IRC
2015-05-04T12:34:37  *** luqas has quit IRC
2015-05-04T12:35:39  *** alexpilotti has joined #openstack-infra
2015-05-04T12:36:20  *** woodster_ has joined #openstack-infra
2015-05-04T12:37:15  *** salv-orlando has quit IRC
2015-05-04T12:38:10  <yolanda> mordred, so i guess the intention of that change is to override runtask, and add the proxy settings there, and call provider_manager.runTask instead of task_manage.runTask ?
2015-05-04T12:38:26  *** _dguerri is now known as dguerri
2015-05-04T12:38:49  <openstackgerrit> Merged openstack-infra/project-config: Don't short circuit when projects fails to clone  https://review.openstack.org/179760
2015-05-04T12:39:16  *** dprince has joined #openstack-infra
2015-05-04T12:40:12  <mordred> yolanda: yah - I think so
2015-05-04T12:40:58  <yolanda> looking at the code i'd say this runtask is not even reached, as i cannot see traces of errors there
2015-05-04T12:41:22  <yolanda> i even amended the code to accept Timeout exception, but same problem
2015-05-04T12:43:15  <mordred> yolanda: weird
2015-05-04T12:43:48  <yolanda> we have all of our images older than a day due to that error, and i'm unable to update manually, i'm testing more
2015-05-04T12:44:15  *** radez_g0n3 is now known as radez
2015-05-04T12:45:06  *** dguerri is now known as _dguerri
2015-05-04T12:46:07  *** kgiusti has joined #openstack-infra
2015-05-04T12:48:08  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Convert node_set_provision_state to task  https://review.openstack.org/177987
2015-05-04T12:48:08  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Update recent Ironic exceptions  https://review.openstack.org/177986
2015-05-04T12:48:09  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Enhance error message in update_machine  https://review.openstack.org/177985
2015-05-04T12:48:09  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Enhance the OperatorCloud constructor  https://review.openstack.org/179647
2015-05-04T12:48:14  *** dizquierdo has joined #openstack-infra
2015-05-04T12:48:39  *** dprince has quit IRC
2015-05-04T12:51:00  <yolanda> mm, mordred, i think i got it
2015-05-04T12:51:12  <yolanda> command lines aren't using the thread interface , right?
2015-05-04T12:53:06  *** mikeit has joined #openstack-infra
2015-05-04T12:55:56  <mordred> yolanda: oh! you are right
2015-05-04T12:56:11  *** links has joined #openstack-infra
2015-05-04T12:56:44  *** fhubik has quit IRC
2015-05-04T12:57:08  *** fhubik has joined #openstack-infra
2015-05-04T12:57:29  *** pc_m has quit IRC
2015-05-04T12:57:43  *** sdake has joined #openstack-infra
2015-05-04T12:57:44  <anteaya> reed: I'm glad you are having a faster experience with git, I find it odd that ipv6 would be playing a role
2015-05-04T12:57:48  *** macjack has left #openstack-infra
2015-05-04T12:58:07  <yolanda> mordred, actually where it fails is in createservertask, and that's embedded inside a submittask method
2015-05-04T12:58:09  *** jaypipes has joined #openstack-infra
2015-05-04T12:58:37  <mordred> anteaya: that's a fascinating first sentence of the day
2015-05-04T12:59:13  <anteaya> I aim to facinate
2015-05-04T12:59:20  <anteaya> my job for the day is complete
2015-05-04T12:59:21  <anteaya> thank you
2015-05-04T12:59:30  * mordred hands anteaya a japanese eggplant and a bowl of salsa
2015-05-04T12:59:41  <anteaya> well thank you
2015-05-04T13:01:30  <foobio> mmmeggplantsalsa
2015-05-04T13:01:53  *** bknudson has quit IRC
2015-05-04T13:02:10  *** BobH has joined #openstack-infra
2015-05-04T13:02:33  *** yfried is now known as yfried|afk
2015-05-04T13:03:41  <anteaya> I never knew it could be good for breakfast
2015-05-04T13:06:37  <yolanda> mordred, ok, i think i got it, needed to add timeout exception as well to task_manager code. Will test it and send a patch upstream
2015-05-04T13:07:40  *** _elmiko is now known as elmiko
2015-05-04T13:09:12  *** signed8bit has joined #openstack-infra
2015-05-04T13:09:12  *** signed8bit has quit IRC
2015-05-04T13:09:33  *** miqui has joined #openstack-infra
2015-05-04T13:10:28  <jhesketh> sdague: I wonder with the live zuul status stuff if we should have a toggle to turn it on/off. If we merge this and find the optimisations aren't enough, turning it off again will require a number of reverts
2015-05-04T13:10:34  *** jpeeler has joined #openstack-infra
2015-05-04T13:10:34  <jhesketh> if we have a toggle switch it'll make it easier
2015-05-04T13:10:56  *** mrmartin has joined #openstack-infra
2015-05-04T13:11:07  <jhesketh> and also mean that if it works for the next 5 months but then zuul is under stupid amounts of load, we can change it back then too while we look at further optimisations
2015-05-04T13:11:11  <sdague> jhesketh: yes, I was thinking putting it behind an experimental flag would be good
2015-05-04T13:11:48  <sdague> which we could default off, then turn on inline, like the debug
2015-05-04T13:11:54  <sdague> so it would be easy to turn off
2015-05-04T13:11:59  <jhesketh> sdague: good idea
2015-05-04T13:13:10  <sdague> I think the only issue is we might need to change the caching model on review.openstack.org
2015-05-04T13:13:11  *** hasharOut is now known as hashar
2015-05-04T13:13:18  <sdague> so that it expires hideci more often
2015-05-04T13:13:50  <sdague> so that a change like that would deploy to people more quickly
2015-05-04T13:13:53  <jhesketh> sdague: what is it currently?
2015-05-04T13:14:05  <jhesketh> deployment is always going to be slow if we have to wait for jenkins+puppet etc
2015-05-04T13:14:22  *** BobH has quit IRC
2015-05-04T13:14:23  <sdague> yeh, that's not the concern, but js resources from the browser seem to have long lifetimes
2015-05-04T13:14:27  *** dims has quit IRC
2015-05-04T13:14:47  <sdague> so we might need an explicit expiration time to make browsers come back
2015-05-04T13:14:58  *** dustins has joined #openstack-infra
2015-05-04T13:15:01  *** dims has joined #openstack-infra
2015-05-04T13:15:02  *** erlon_awaY has joined #openstack-infra
2015-05-04T13:15:05  <jhesketh> sure, that's probably a good idea
2015-05-04T13:15:34  <mordred> jeblair_: when you return -I'm having an issue with gertty where it seems to have finished all of its syncing, and then I go to a change, and the change is not present, so it goes and figures out that it needs to sync new things
2015-05-04T13:16:05  <mordred> jeblair_: it's happening frequently - I would have expected all of the things to sync at some point, otherwise prep-for-being-offline becomes unhappy
2015-05-04T13:16:17  <foobio> mordred: is it a change for a subscribed project?
2015-05-04T13:16:21  <mordred> foobio: yes
2015-05-04T13:16:25  <foobio> odd
2015-05-04T13:16:42  *** alexpilotti has quit IRC
2015-05-04T13:16:59  *** bcourt has joined #openstack-infra
2015-05-04T13:17:25  <mordred> foobio, jeblair_: and in fact, like, every change I go to review in devstack-gate right now is doing this.
2015-05-04T13:17:47  *** hdd has quit IRC
2015-05-04T13:18:07  *** yfried|afk is now known as yfried
2015-05-04T13:18:20  *** tiswanso has joined #openstack-infra
2015-05-04T13:18:22  *** hdd has joined #openstack-infra
2015-05-04T13:19:02  <mrmartin> morning
2015-05-04T13:20:11  <foobio> mordred: hrm, running tip of master i am not having that problem on devstack-gate changes
2015-05-04T13:20:44  *** jtriley has joined #openstack-infra
2015-05-04T13:21:28  * mordred is the SpamapS of gertty
2015-05-04T13:21:54  *** baoli has joined #openstack-infra
2015-05-04T13:22:11  <mordred> wow. I JUST DID a ctrl-r on the devstack-gate screen, it finished, and tried to go to a review and I got the commits-not-present message
2015-05-04T13:22:38  <Shrews> mordred: give up. monday has won
2015-05-04T13:22:38  <foobio> problem with your local git cache?
2015-05-04T13:22:57  <mordred> foobio: my local git cache is my source tree
2015-05-04T13:23:30  <foobio> yeah, mine too. just didn't know if there might be something funky with your devtsack-gate clone in there
2015-05-04T13:23:35  *** bswartz has joined #openstack-infra
2015-05-04T13:23:36  <mordred> foobio: and I'm running tip of master too
2015-05-04T13:23:42  <mordred> foobio: well, it was doing it on other repos too
2015-05-04T13:23:51  <mordred> foobio: this is just the one I'm on in this morning's reviews
2015-05-04T13:24:10  *** dizquierdo has quit IRC
2015-05-04T13:24:43  *** jcoufal_ has joined #openstack-infra
2015-05-04T13:24:53  * mordred gives Shrews a case of the mondays
2015-05-04T13:24:57  <openstackgerrit> Merged openstack-infra/release-tools: Add a --stable-series argument to release_notes.py  https://review.openstack.org/178194
2015-05-04T13:25:57  *** mestery_ is now known as mestery
2015-05-04T13:26:01  <openstackgerrit> Merged openstack-infra/release-tools: Add option to format release notes for email  https://review.openstack.org/178195
2015-05-04T13:26:33  *** amitgandhinz has joined #openstack-infra
2015-05-04T13:27:22  *** jcoufal has quit IRC
2015-05-04T13:27:26  *** erlon_awaY is now known as erlon
2015-05-04T13:28:14  <mordred> foobio, sdague: 167412 - looks safe to merge now (this is temporarily enabling trove plugin stuff in d-g) - any gotchas you're aware of?
2015-05-04T13:28:26  *** peristeri has joined #openstack-infra
2015-05-04T13:28:28  <openstackgerrit> Merged openstack-infra/release-tools: Update rccut and rcdelivery to match Kilo process  https://review.openstack.org/177202
2015-05-04T13:28:37  <openstackgerrit> Jeremy Stanley proposed stackforge/gertty: Be more verbose on non-tagged versions  https://review.openstack.org/179776
2015-05-04T13:29:20  <sdague> mordred: yeh, it should be
2015-05-04T13:29:43  <foobio> lgtm, but didn't approve in case you were still reviewing
2015-05-04T13:29:45  <sdague> it's basically a hack to deal with the fact that project-config can't be pre gated
2015-05-04T13:30:15  <foobio> oh, though its dependency chain is still in need of work
2015-05-04T13:30:38  <foobio> but yeah, that one should be able to merge, it's just changes depending on it which need some updating
2015-05-04T13:30:51  <mordred> sdague: what does ;& mean in a base case statement?
2015-05-04T13:31:05  *** sdake_ has joined #openstack-infra
2015-05-04T13:31:06  <sdague> mordred: fall through
2015-05-04T13:31:18  <mordred> doesn't ;; also mean that?
2015-05-04T13:31:25  <sdague> no, ;; is break
2015-05-04T13:31:36  <mordred> well then
2015-05-04T13:31:41  <sdague> I thought at least
2015-05-04T13:32:02  <sdague> I had some sample code to ensure this did the right thing
2015-05-04T13:32:10  *** dprince has joined #openstack-infra
2015-05-04T13:32:18  *** pabelanger has joined #openstack-infra
2015-05-04T13:32:18  *** pabelanger has joined #openstack-infra
2015-05-04T13:32:36  <mordred> it's fine - I just didn't know that syntax
2015-05-04T13:32:38  *** craigbr has joined #openstack-infra
2015-05-04T13:33:03  <sdague> yeh, is a bash 4 thing apparently
2015-05-04T13:33:14  <sdague> because default shell case doesn't have fall through
2015-05-04T13:33:17  <sdague> which... is weird
2015-05-04T13:33:24  <sdague> because that's the point of case in my mind
2015-05-04T13:33:52  *** bknudson has joined #openstack-infra
2015-05-04T13:34:56  *** sdake has quit IRC
2015-05-04T13:35:27  <openstackgerrit> Sirushti Murugesan proposed openstack-infra/project-config: Add grenade jobs for Heat  https://review.openstack.org/178352
2015-05-04T13:37:30  *** coolsvap is now known as coolsvap|afk
2015-05-04T13:38:31  <foobio> dims: you're abandoning wip changes?
2015-05-04T13:39:04  <mordred> in which project(s)?
2015-05-04T13:39:10  <mordred> I would not like my WIP changes abandoned
2015-05-04T13:39:11  <foobio> oslo.*
2015-05-04T13:39:13  <mordred> k
2015-05-04T13:39:17  <mordred> as long as it's not infra
2015-05-04T13:39:26  <foobio> i'm restoring one that's still waiting on an ubuntu bug fix
2015-05-04T13:40:10  <dims> foobio: which one? (still tuning the script)
2015-05-04T13:40:12  *** luqas has joined #openstack-infra
2015-05-04T13:41:07  <foobio> dims: 120228
2015-05-04T13:42:11  <foobio> unfortunately bugs in ubuntu lts take a while to get fixed
2015-05-04T13:42:22  <dims> thanks foobio!
2015-05-04T13:42:39  <openstackgerrit> Merged openstack-infra/shade: Enhance error message in update_machine  https://review.openstack.org/177985
2015-05-04T13:42:48  <openstackgerrit> Merged openstack-infra/shade: Update recent Ironic exceptions  https://review.openstack.org/177986
2015-05-04T13:43:11  <foobio> dims: you're welcome
2015-05-04T13:43:25  <mordred> sdague: could we do something clever to make a passthrough config to devstack? every time I approve a patch like 179662 it makes me think we're doing something wrong
2015-05-04T13:43:42  <sdague> mordred: 179662 ?
2015-05-04T13:43:48  *** prad has joined #openstack-infra
2015-05-04T13:43:55  <sdague> oh, yes, we already have that
2015-05-04T13:43:55  <openstackgerrit> Merged openstack-dev/pbr: Allow overwriting sphinx builder from command line  https://review.openstack.org/117478
2015-05-04T13:44:03  *** jeblair_ is now known as jeblair
2015-05-04T13:44:06  *** superdan is now known as dansmith
2015-05-04T13:44:12  <mordred> sdague: yeah? what is it?
2015-05-04T13:44:25  <sdague> grep for enable_plugin in project-config
2015-05-04T13:44:56  <sdague> DEVSTACK_LOCAL_CONFIG
2015-05-04T13:44:57  <sdague> that's it
2015-05-04T13:45:08  <mrmartin> foobio: the refactoring for puppet-askbot staging is almost ready, I just found some issues with askbot-devel. so it have issues with ubuntu precise cloudimg, so I made tests with trusty, and it works well
2015-05-04T13:45:11  <openstackgerrit> Yanis Guenane proposed openstack-infra/project-config: Add support for backport-potential commit flag  https://review.openstack.org/175849
2015-05-04T13:45:25  <mrmartin> so, what is the proper way of ask.o.o upgrade from precise to trusty?
2015-05-04T13:45:30  <mordred> sdague: col
2015-05-04T13:45:32  <mordred> cool
2015-05-04T13:45:34  <mordred> we shoudl start using that more
2015-05-04T13:46:27  <sdague> mordred: yes
2015-05-04T13:46:41  *** mriedem has joined #openstack-infra
2015-05-04T13:46:48  *** dboik has joined #openstack-infra
2015-05-04T13:46:58  <sdague> it gets a little janky with multi lines in the project config files, we probably want to come up with a better way to make that work
2015-05-04T13:47:05  <foobio> mrmartin: we build a new server running trusty and migrate from the current one to the new one (similar to how we migrated from the non-managed server to the current managed one)
2015-05-04T13:47:17  <mrmartin> ok great
2015-05-04T13:47:17  <sdague> but the intent was about 1/2 of d-g vars should be able to go away
2015-05-04T13:47:23  <sdague> just never got there
2015-05-04T13:47:26  <mordred> sdague: ++
2015-05-04T13:47:33  <mordred> sdague: well, I'm going to start -1ing new variables
2015-05-04T13:47:48  <mrmartin> can we disable the puppet on the precise ask.o.o?
2015-05-04T13:47:51  *** lascii is now known as alaski
2015-05-04T13:48:35  *** luqas has quit IRC
2015-05-04T13:48:43  *** julim has joined #openstack-infra
2015-05-04T13:48:45  <mrmartin> This new patch contains some breaking changes, removes the slotX directory structure, and consume askbot-devel directly from github instead of pip
2015-05-04T13:48:51  <mordred> foobio: speaking of that ^^ https://review.openstack.org/#/c/179581/
2015-05-04T13:49:08  <mordred> foobio: I'd argue we should stop spinning up new precise servers unless we really mean it
2015-05-04T13:50:14  <mrmartin> yeah, that's the case we like to upgrade the precise nodes to trusty
2015-05-04T13:50:29  <mordred> foobio: also, while I'm bothering you with things that do not matter (good morning): https://review.openstack.org/#/q/status:open+branch:master+topic:hound,n,z - and there is a server running at hound.openstack.org with those changes if you want to check it out
2015-05-04T13:50:45  <foobio> mordred: yep, saw that. +2 but we should get a little more consensus. worth mentioning briefly in the meeting tomorrow perhaps
2015-05-04T13:51:00  <foobio> mordred: on the default-to-trusty change i mean
2015-05-04T13:51:02  *** luqas has joined #openstack-infra
2015-05-04T13:51:45  <mordred> foobio: ++
2015-05-04T13:51:57  <foobio> mrmartin: well, if we merge changes that won't work for the current production server, we're basically setting ourselves up to be unable to update that server further until we migrate... so we should be really sure we can arrange the migration maintenance in a short timeframe
2015-05-04T13:52:11  <mrmartin> ok.
2015-05-04T13:52:29  <samueldmq> mordred, ping - just saw your review on 'Pass the flag for Identity v3 API only jobs'
2015-05-04T13:52:47  <mordred> samueldmq: yah
2015-05-04T13:52:50  <mrmartin> but what you think about temporarily commenting out the askbot related manifests there?
2015-05-04T13:52:51  <samueldmq> mordred, so I just need to put what I need in DEVSTACK_LOCAL_CONFIG in my project-config change
2015-05-04T13:52:55  <samueldmq> mordred, right ?
2015-05-04T13:52:56  <mordred> samueldmq: yup!
2015-05-04T13:53:09  <samueldmq> mordred, that's happening in a lot of places
2015-05-04T13:53:10  <mordred> samueldmq: no need to teach d-g about it at all
2015-05-04T13:53:15  *** emagana has quit IRC
2015-05-04T13:53:24  <sdague> mordred: +1
2015-05-04T13:53:37  <samueldmq> mordred, do we need to refactor all the other places we are already doing this ?
2015-05-04T13:53:49  <foobio> mrmartin: if it's not too hard to adjust it so that it works on trusty for the ask-dev server but continues working on precise for the production ask server, that would make things a little easier to test and coordinate, but if that's a lot of extra work then i think just updating the module and migrating the server within a maintenance is probably okay
2015-05-04T13:53:52  <samueldmq> mordred, I can do this refactor if you want me too
2015-05-04T13:54:06  <mordred> samueldmq: it would be nice - although as sdague mentions, if there are jobs taht need to set more than one thing, it's a little odd syntax-wise, so we might want to sort that
2015-05-04T13:54:11  <mrmartin> ok.
2015-05-04T13:54:27  <mordred> samueldmq: but probably all of the jobs that just set one thing that's just a passthrough and does not trigger additional logic in d-g are good candidates
2015-05-04T13:54:39  <mrmartin> we have some open issues with askbot-devel which must be closed first, so when it works well, I'll come back with some plan
2015-05-04T13:54:44  <samueldmq> mordred, great I will do it later today
2015-05-04T13:54:54  <samueldmq> mordred, will ping you once I submit the patch, thanks
2015-05-04T13:55:13  <openstackgerrit> Claudiu Belu proposed openstack-infra/project-config: Adds pypi-jobs to compute-hyperv  https://review.openstack.org/179782
2015-05-04T13:55:23  <samueldmq> mordred, yeah I will get those good candidates first, it should already be a nice cleanup
2015-05-04T13:55:35  <foobio> mrmartin: great. i'll try to make sure i keep reviewing those a priority, but ping me when you have related changes i haven't noticed/reviewed just in case
2015-05-04T13:55:36  *** luqas has quit IRC
2015-05-04T13:55:50  <mrmartin> foobio, ok nothing urgent here
2015-05-04T13:56:40  <mrmartin> we have only one large issue with google-auth but it still requires some work from askbot devs.
2015-05-04T13:58:08  *** chlong has joined #openstack-infra
2015-05-04T14:01:55  <foobio> okay, thanks for the update!
2015-05-04T14:02:10  *** btully has joined #openstack-infra
2015-05-04T14:02:56  *** yfried is now known as yfried|afk
2015-05-04T14:03:34  *** btully has quit IRC
2015-05-04T14:03:38  *** fhubik has quit IRC
2015-05-04T14:04:26  *** zz_naotok has quit IRC
2015-05-04T14:06:03  *** zz_naotok has joined #openstack-infra
2015-05-04T14:08:23  *** eharney has joined #openstack-infra
2015-05-04T14:08:43  *** ashleighfarnham has joined #openstack-infra
2015-05-04T14:08:48  *** otter768 has joined #openstack-infra
2015-05-04T14:08:56  *** chlong has quit IRC
2015-05-04T14:09:02  *** ayoung has joined #openstack-infra
2015-05-04T14:09:41  *** dguitarbite has quit IRC
2015-05-04T14:12:41  *** _dguerri is now known as dguerri
2015-05-04T14:13:03  <openstackgerrit> Matt Riedemann proposed openstack-infra/elastic-recheck: Add query for nova unit test bug 1451389  https://review.openstack.org/179788
2015-05-04T14:13:03  <openstack> bug 1451389 in OpenStack Compute (nova) "Nova gate broke due to failed unit test" [Critical,In progress] https://launchpad.net/bugs/1451389 - Assigned to Sean Dague (sdague)
2015-05-04T14:13:21  *** otter768 has quit IRC
2015-05-04T14:13:25  *** dguerri is now known as _dguerri
2015-05-04T14:13:28  *** _dguerri is now known as dguerri
2015-05-04T14:13:56  *** ashleighfarnham has quit IRC
2015-05-04T14:14:47  *** e0ne has quit IRC
2015-05-04T14:14:57  *** sigmavirus24_awa is now known as sigmavirus24
2015-05-04T14:16:02  *** salv-orlando has joined #openstack-infra
2015-05-04T14:16:02  *** rossella_s has quit IRC
2015-05-04T14:16:35  *** rossella_s has joined #openstack-infra
2015-05-04T14:17:12  *** mrunge has quit IRC
2015-05-04T14:17:12  *** pc_m has joined #openstack-infra
2015-05-04T14:19:54  *** signed8bit has joined #openstack-infra
2015-05-04T14:22:10  *** yfried|afk is now known as yfried
2015-05-04T14:23:28  *** BharatK has quit IRC
2015-05-04T14:23:42  *** stevemar has joined #openstack-infra
2015-05-04T14:24:17  *** gsagie has joined #openstack-infra
2015-05-04T14:26:46  *** chlong has joined #openstack-infra
2015-05-04T14:27:13  <openstackgerrit> Merged openstack-infra/elastic-recheck: Add query for nova unit test bug 1451389  https://review.openstack.org/179788
2015-05-04T14:27:14  <openstack> bug 1451389 in OpenStack Compute (nova) "Nova gate broke due to failed unit test" [Critical,In progress] https://launchpad.net/bugs/1451389 - Assigned to Sean Dague (sdague)
2015-05-04T14:30:38  *** dboik_ has joined #openstack-infra
2015-05-04T14:32:59  *** salv-orlando has quit IRC
2015-05-04T14:33:02  *** armax has joined #openstack-infra
2015-05-04T14:33:35  *** gsagie has left #openstack-infra
2015-05-04T14:34:02  *** gokrokve_ has joined #openstack-infra
2015-05-04T14:34:06  *** dboik has quit IRC
2015-05-04T14:34:41  <openstackgerrit> Merged openstack-infra/devstack-gate: Temporarily add trove plugin configuration  https://review.openstack.org/167412
2015-05-04T14:34:52  <openstackgerrit> Paul Belanger proposed openstack-infra/system-config: WIP: Initial commit for grafana  https://review.openstack.org/179208
2015-05-04T14:35:20  *** zz_jgrimm is now known as jgrimm
2015-05-04T14:35:28  *** ajmiller has joined #openstack-infra
2015-05-04T14:36:54  <openstackgerrit> Gal Sagie proposed openstack-infra/project-config: Enable a check job for stackforge/dragonflow  https://review.openstack.org/175152
2015-05-04T14:37:23  *** gokrokve has quit IRC
2015-05-04T14:38:25  *** jgrimm is now known as zz_jgrimm
2015-05-04T14:40:03  <openstackgerrit> Monty Taylor proposed openstack-infra/project-config: Run shade functional tests on neutron and nova-net  https://review.openstack.org/179797
2015-05-04T14:40:21  <mordred> sdague: is that correct? ^^
2015-05-04T14:40:42  *** wenlock has joined #openstack-infra
2015-05-04T14:40:47  *** mtanino has joined #openstack-infra
2015-05-04T14:40:52  *** unicell1 has joined #openstack-infra
2015-05-04T14:40:58  *** wenlock1 has joined #openstack-infra
2015-05-04T14:41:24  <sdague> I don't think you need L54 in - https://review.openstack.org/#/c/179797/1/jenkins/jobs/shade.yaml,cm
2015-05-04T14:41:47  *** packet has joined #openstack-infra
2015-05-04T14:42:08  <sdague> otherwise, I think this is right
2015-05-04T14:42:37  *** unicell has quit IRC
2015-05-04T14:42:40  *** emagana has joined #openstack-infra
2015-05-04T14:44:03  <mordred> sdague: what if we change the default in the future?
2015-05-04T14:44:28  *** claudiub_ has quit IRC
2015-05-04T14:46:17  <mtreinish> mordred: heh, you really think that'll happen? :)
2015-05-04T14:46:34  *** Somay has joined #openstack-infra
2015-05-04T14:46:55  *** mase_x200 has quit IRC
2015-05-04T14:47:32  <mordred> mtreinish: *sad trombone*
2015-05-04T14:47:33  <openstackgerrit> Emilien Macchi proposed openstack-infra/system-config: Create rubygems mirror from rubygems.org  https://review.openstack.org/178026
2015-05-04T14:52:39  *** tonytan4ever has joined #openstack-infra
2015-05-04T14:52:52  <sdague> mordred: so... if the default flips we're going to have to update it a bunch of places in project config
2015-05-04T14:53:05  <mordred> sdague: k.
2015-05-04T14:53:10  <sdague> I'm +2 either way
2015-05-04T14:53:17  <sdague> just saying it's not strictly needed
2015-05-04T14:53:30  *** alexpilotti has joined #openstack-infra
2015-05-04T14:54:25  *** vhoward has quit IRC
2015-05-04T14:55:05  *** vhoward has joined #openstack-infra
2015-05-04T14:55:06  <mordred> nod
2015-05-04T14:55:17  *** gokrokve_ has quit IRC
2015-05-04T14:55:49  <AJaeger> mordred, just gave a +2 - feel free to self-approve once you finished the discussion here ;)
2015-05-04T14:55:50  *** gokrokve has joined #openstack-infra
2015-05-04T14:56:11  *** links has quit IRC
2015-05-04T14:57:30  *** gokrokve has quit IRC
2015-05-04T14:58:11  <openstackgerrit> Peter Hamilton proposed openstack/requirements: Update PyKMIP version in requirements  https://review.openstack.org/164449
2015-05-04T14:58:11  *** gokrokve has joined #openstack-infra
2015-05-04T14:58:46  *** sushilkm has joined #openstack-infra
2015-05-04T14:58:50  *** sushilkm has left #openstack-infra
2015-05-04T14:58:50  <openstackgerrit> Victor Stinner proposed openstack/requirements: Add mysqlclient dependency  https://review.openstack.org/179745
2015-05-04T15:00:15  *** craigbr has quit IRC
2015-05-04T15:01:07  *** sdake has joined #openstack-infra
2015-05-04T15:02:56  *** sarob has joined #openstack-infra
2015-05-04T15:03:11  *** sdake__ has joined #openstack-infra
2015-05-04T15:03:24  *** sdake_ has quit IRC
2015-05-04T15:03:25  <openstackgerrit> Merged openstack-infra/puppet-jeepyb: Modernize template syntax  https://review.openstack.org/168147
2015-05-04T15:03:32  <openstackgerrit> Merged openstack-infra/puppet-jeepyb: Parameterize git revision of jeepyb  https://review.openstack.org/170960
2015-05-04T15:03:38  <openstackgerrit> Merged openstack-infra/puppet-jeepyb: Add helpers to execute manage_projects  https://review.openstack.org/171538
2015-05-04T15:03:48  *** sarob has quit IRC
2015-05-04T15:03:58  *** sarob has joined #openstack-infra
2015-05-04T15:07:12  *** sdake has quit IRC
2015-05-04T15:07:17  <mordred> jeblair: so - basically every time I go to a new change now, I get the no-revs error, and then gertty adds about 100 things to the queue, processes them, then I have the change
2015-05-04T15:07:26  <mordred> jeblair: the 100-ish number is consistent
2015-05-04T15:07:34  *** asselin has joined #openstack-infra
2015-05-04T15:07:43  <mordred> jeblair: also, I have nothing in my logs to indicate that gertty thinks anything is broken
2015-05-04T15:07:56  *** ociuhandu_ has joined #openstack-infra
2015-05-04T15:09:21  <openstackgerrit> Emilien Macchi proposed openstack-infra/project-config: Disable voting for puppet-syntax-future on havana/icehouse  https://review.openstack.org/179809
2015-05-04T15:10:11  *** arxcruz has quit IRC
2015-05-04T15:11:42  <pabelanger> Looking for some feedback for provisioning grafana.  Right now, there is a manual process for connecting data sources.  If you read here: http://docs-draft.openstack.org/08/179208/5/check/gate-system-config-docs/e8333d4//doc/build/html/grafana.html
2015-05-04T15:12:03  <pabelanger> however, need to setup default admin credentials and looking for which openstack-infra group to be using
2015-05-04T15:12:09  <pabelanger> and even a default location for password
2015-05-04T15:12:37  <openstackgerrit> Merged openstack-infra/puppet-jenkins: Allow for plugin pinning  https://review.openstack.org/160549
2015-05-04T15:12:48  <pabelanger> Basically, once I am done with that info, it would be ready for review
2015-05-04T15:14:27  <openstackgerrit> Merged openstack-infra/tripleo-ci: Bump up delorean pinning  https://review.openstack.org/177176
2015-05-04T15:14:43  *** claudiub has joined #openstack-infra
2015-05-04T15:14:56  *** spzala has joined #openstack-infra
2015-05-04T15:15:42  <mordred> pabelanger: I don't suppose it's possible to set those things directly in the grafana db is it?
2015-05-04T15:16:46  <pabelanger> mordred, checking
2015-05-04T15:16:56  <mordred> because, I mean, I know that we don't want to create graphs through the web
2015-05-04T15:16:58  <jeblair> pabelanger: i was talking with timrc recently about grafana and he suggested that it would be possible to write a short python script to translate a yaml file and write it into the db
2015-05-04T15:17:05  <openstackgerrit> Merged openstack-infra/puppet-jenkins: Use jenkins group instead of nogroup  https://review.openstack.org/175368
2015-05-04T15:17:16  <jeblair> pabelanger: iirc, he said the db format was basically just a json blob describing each dashboard
2015-05-04T15:17:40  <pabelanger> jeblair, Ya, that was mentioned last week. Seems like the right approach
2015-05-04T15:17:49  <jeblair> timrc meet pabelanger
2015-05-04T15:17:53  <jeblair> pabelanger meet timrc
2015-05-04T15:18:00  <pabelanger> timrc, ohai
2015-05-04T15:18:07  *** jcoufal_ has quit IRC
2015-05-04T15:18:27  <jeblair> pabelanger: so maybe check with timrc and see if he's started anything, and if not, fight it out between the two of you? :)
2015-05-04T15:20:24  <pabelanger> jeblair, timrc Sure. I'll dive into DB right now to see what it looks like
2015-05-04T15:20:31  <openstackgerrit> Merged openstack-infra/project-config: Run shade functional tests on neutron and nova-net  https://review.openstack.org/179797
2015-05-04T15:22:00  *** craigbr has joined #openstack-infra
2015-05-04T15:22:50  <jeblair> mordred: i'm getting asymtoptically closer to post-travel usefulness, i'll get with you on gertty soon -- though in the mean time, if you have time to capture a 'refresh, missing git refs' cycle with debug logging enabled ("-d" on command line); and probably quit shortly after to keep log size small, that will probably help.
2015-05-04T15:23:42  <mordred> jeblair: on it
2015-05-04T15:23:45  *** dannywilson has joined #openstack-infra
2015-05-04T15:24:13  <openstackgerrit> Merged openstack-infra/puppet-log_processor: Setting dependencies in metadata.json  https://review.openstack.org/153821
2015-05-04T15:24:49  <mordred> jeblair: are gertty logs safe to pastebin?
2015-05-04T15:25:22  *** craigbr has quit IRC
2015-05-04T15:26:08  *** sarob_ has joined #openstack-infra
2015-05-04T15:26:52  <jeblair> mordred: i believe so
2015-05-04T15:27:10  *** hdd has quit IRC
2015-05-04T15:27:56  *** dannywilson has quit IRC
2015-05-04T15:28:01  <mordred> jeblair: http://paste.openstack.org/show/214861
2015-05-04T15:28:31  *** sarob has quit IRC
2015-05-04T15:28:41  *** e0ne has joined #openstack-infra
2015-05-04T15:28:57  *** sks has quit IRC
2015-05-04T15:29:24  *** sabeen has joined #openstack-infra
2015-05-04T15:29:36  *** dannywilson has joined #openstack-infra
2015-05-04T15:29:56  *** ashleighfarnham has joined #openstack-infra
2015-05-04T15:30:28  <openstackgerrit> Merged openstack-infra/jenkins-job-builder: Added parallelization options  https://review.openstack.org/75514
2015-05-04T15:30:39  *** Somay has quit IRC
2015-05-04T15:31:14  *** ociuhandu_ has quit IRC
2015-05-04T15:32:07  <openstackgerrit> Merged openstack-infra/jenkins-job-builder: Added gerrit trigger missing options  https://review.openstack.org/167175
2015-05-04T15:32:16  *** maishsk has joined #openstack-infra
2015-05-04T15:33:47  *** mtanino has quit IRC
2015-05-04T15:35:05  *** harlowja_at_home has joined #openstack-infra
2015-05-04T15:35:21  *** sarob has joined #openstack-infra
2015-05-04T15:35:21  <openstackgerrit> Merged openstack-infra/askbot-theme: updated theme to match version 0.7.53  https://review.openstack.org/177485
2015-05-04T15:36:06  *** yamahata has joined #openstack-infra
2015-05-04T15:36:14  <foobio> jeblair: also when you're settled back in, i've noticed that gertty doesn't deal well with reviewing multi-parent changes like a merge commit (it dies in flames, actually). i haven't had time to dig into possible fixes for it, but will write a story with the trace in a bit
2015-05-04T15:36:48  <openstackgerrit> Merged openstack-infra/askbot-theme: deleted unused file  https://review.openstack.org/177486
2015-05-04T15:36:54  <jeblair> foobio: yeah, there's a "TODO: support multiple parents" in the database schema :)
2015-05-04T15:36:58  <openstackgerrit> Merged openstack-infra/askbot-theme: css changes for language nav and dropdown menu  https://review.openstack.org/179472
2015-05-04T15:37:05  <jeblair> foobio: so it's a substantial project
2015-05-04T15:37:37  <foobio> jeblair: i figured i wasn't the only one to spot that. good to know
2015-05-04T15:37:38  <jeblair> foobio: though, i mean, hopefully "not crashing" might be a less substantial bugfix
2015-05-04T15:38:02  <foobio> i thought a stopgap might be to just treat a multi-parent change as a non-parented change and move on
2015-05-04T15:38:03  <superbee> jeblair: question about gearman, if you send a RESET_ABILITIES does that clear out a pending GET JOB?
2015-05-04T15:38:15  <superbee> zaro: I think ^ may be the problem and it is much less complicated than I thought
2015-05-04T15:38:46  <jeblair> superbee: hehe, i do not immediately know the answer to your pop quiz!  i'll look
2015-05-04T15:38:54  *** sputnik13 has quit IRC
2015-05-04T15:39:03  <superbee> jeblair: we are seeing nodepool nodes remain "ready" for long periods of time and reading jenkins logs inidicates they go in that state if they send a GET JOB then immediately register functions
2015-05-04T15:39:08  *** sarob_ has quit IRC
2015-05-04T15:39:26  <superbee> jeblair: I had thought the run loop was getting live locked but in this case I think it may be the server state is changing around the GET JOB because we RESET ABILITIES
2015-05-04T15:40:01  <jeblair> superbee: we send 'get job' before registering functions?  that sounds buggy, right?
2015-05-04T15:40:14  <superbee> jeblair: yes, and yes I think that is a bug
2015-05-04T15:40:27  <superbee> jeblair: however we do receive the JOB_UNIQ response we just never seem to handle it
2015-05-04T15:40:31  *** mfisch has quit IRC
2015-05-04T15:40:40  <jeblair> superbee: JOB_ASSIGN_UNIQ?
2015-05-04T15:40:50  *** Longgeek_ has joined #openstack-infra
2015-05-04T15:41:03  *** ildikov has quit IRC
2015-05-04T15:41:09  <superbee> jeblair: I have a change up with logs inthe ocmmit message https://review.openstack.org/#/c/178929/
2015-05-04T15:41:18  *** salv-orlando has joined #openstack-infra
2015-05-04T15:41:37  <superbee> jeblair: you should probably ignore the reset of the commit message though as zaro indicates my change does not work beyond the mvn run tests (which I Had run locally)
2015-05-04T15:41:41  *** Guest65197 has joined #openstack-infra
2015-05-04T15:42:14  <jeblair> superbee: that makes it sound like geard is doing what we want in this situation (which is behavior i would expect -- i would expect geard to react to adding functions and then wake the worker as appropriate)
2015-05-04T15:42:16  *** Longgeek has quit IRC
2015-05-04T15:42:42  <jeblair> superbee: oh, but maybe your question is -- does geard think the job it assigned is no longer running?
2015-05-04T15:42:51  <superbee> jeblair: correct
2015-05-04T15:42:54  <jeblair> superbee: got it
2015-05-04T15:43:14  <superbee> jeblair: because the worker ends up not running any job at that point and does not go offline or emit events saying it did anything
2015-05-04T15:43:25  <superbee> jeblair: so we essentially have a worker that can run a job but never does
2015-05-04T15:43:39  <superbee> (and this disrupts nodepool's deficit calculations)
2015-05-04T15:43:55  <jeblair> superbee: i do not think geard would take any action there; i would expect it to think the worker is running the job but slowly.  however, that would suggest that zuul would see stuck jobs
2015-05-04T15:45:17  <timrc> pabelanger, Hi, reading up.
2015-05-04T15:45:43  <timrc> jeblair, pabelanger I actually think it would be best if we used the grafana rest API to update / overwrite dashboards.
2015-05-04T15:46:29  *** Guest84883 has quit IRC
2015-05-04T15:46:37  <timrc> I have something somewhere on my laptop which does that.  The import script would then be a simple matter of converting yaml to json and then using the rest API to post new dashboards / update existing ones.
2015-05-04T15:46:52  <jeblair> timrc: ooh there's one of those?  that sounds even better
2015-05-04T15:47:02  <timrc> jeblair, Yep.
2015-05-04T15:47:03  <superbee> jeblair: I am not sure that we have seen that, I think I have seen jobs earlier in the pipeline that are queued but not running even though jobs that run on the same node type are running later in the pipeline
2015-05-04T15:47:17  <superbee> I will keep an eye out for ^ today
2015-05-04T15:47:19  *** mwagner_lap has quit IRC
2015-05-04T15:47:49  <timrc> jeblair, At the time we talked I didn't realize there was a rest API but discovered there was on the long flight back from Ireland.
2015-05-04T15:47:51  <pabelanger> timrc, Oh, nice. Didn't know there was restapi
2015-05-04T15:49:14  <superbee> foobio: fyi https://github.com/openstack-infra/git-review/pull/8
2015-05-04T15:49:20  <jeblair> superbee: i'm guessing we don't have any info on the job that was assigned (and apparently ignored)?
2015-05-04T15:49:54  <superbee> jeblair: not that I could fine
2015-05-04T15:49:58  <superbee> s/fine/find/
2015-05-04T15:51:18  <foobio> superbee: conveniently, git-review does not enforce a signed icla, so i'll be happy to git-am that pr into gerrit on the author's behalf, unless you wanted dibs
2015-05-04T15:52:21  <superbee> foobio: well I am wondering if we should close won't fix because it runs on windows natively last I checked
2015-05-04T15:52:44  *** mattfarina has joined #openstack-infra
2015-05-04T15:52:52  <superbee> but I don't know enough about windows to know why one would try to use a cygwin utility without cygwin paths
2015-05-04T15:53:16  <openstackgerrit> Darragh Bailey proposed openstack-infra/jenkins-job-builder: Ensure tests run with ConfigParser object  https://review.openstack.org/179822
2015-05-04T15:53:32  *** sigmavirus24 is now known as Apsu_
2015-05-04T15:53:47  <pabelanger> timrc, jeblair: okay, sweet.  API is there, simple json blob returned. Going to now hack up a dashboard now
2015-05-04T15:53:54  <pabelanger> timrc, do you have any code started?
2015-05-04T15:53:57  *** Apsu_ is now known as sigmavirus24
2015-05-04T15:54:12  *** mtanino has joined #openstack-infra
2015-05-04T15:54:18  <timrc> pabelanger, Not really, I just validated I could create and overwrite JSON dashboards
2015-05-04T15:54:32  <timrc> via the rest api
2015-05-04T15:54:39  <pabelanger> roger
2015-05-04T15:55:18  <pabelanger> going to go get some food, but will start work on something after lunch
2015-05-04T15:55:22  <timrc> pabelanger, Do you think it would be best if the import code ran on the grafana host itself and posted against the localhost:3000? I didn't know how that would actually work.
2015-05-04T15:55:44  *** hdd has joined #openstack-infra
2015-05-04T15:56:03  <pabelanger> timrc, My thoughts are to have it work like JJB does.  At least thats my preference
2015-05-04T15:56:11  <timrc> That way we could use http basic auth and store those creds in hiera.  Maybe a post pipeline job to ssh and curl?
2015-05-04T15:56:17  <pabelanger> I've done both JJB local and remote
2015-05-04T15:56:21  <timrc> pabelanger, Ah okay.
2015-05-04T15:56:24  <foobio> superbee: unless maybe people trapped on 'doze prefer a cygwin-provided shell/environment (i haven't tried it in nearly two decades at this point, honestly)
2015-05-04T15:56:27  *** devvesa has quit IRC
2015-05-04T15:56:54  *** armax has quit IRC
2015-05-04T15:56:57  <superbee> jeblair: I wonder if the sequence of events is, worker send GET JOB, server receives GET JOB and sends JOB ASSIGN UNIQ, worker sends RESET ABILITIES, worker gets JOB ASSIGN UNIQ, server gets RESET ABILITIES, "kills" previously assigned UNIQ
2015-05-04T15:57:39  *** hashar is now known as hasharAway
2015-05-04T15:57:47  <superbee> foobio: ya in any case its probably worht a follow up with the author to understand the usecase then they/you/we can push the change to gerrit if needed
2015-05-04T15:57:55  *** craigbr has joined #openstack-infra
2015-05-04T15:58:01  *** maishsk has quit IRC
2015-05-04T15:58:10  *** sabeen2 has joined #openstack-infra
2015-05-04T15:58:19  <jeblair> superbee: i don't believe geard has the assumptiong that a worker can only have one job, so i don't think it would alter the previously assigned job
2015-05-04T15:58:25  <foobio> superbee: i am asking it on the pr now
2015-05-04T15:59:04  *** whayutin_ has joined #openstack-infra
2015-05-04T15:59:07  <jeblair> superbee: my current understanding is: zuul submits job to geard, geard assigns it to worker, worker receives assignment and ignores job, geard assumes job is running as long as that worker is connected, and so does zuul
2015-05-04T15:59:12  *** ashleighfarnham has quit IRC
2015-05-04T15:59:36  <superbee> jeblair: I am almost sure that isn't what happens because we will have a lot of leaked nodes but no leaked jobs
2015-05-04T15:59:37  <jeblair> superbee: so i would expect to see stuck jobs in zuul unless we were "lucky" enough for them to be canceled gate jobs or something.
2015-05-04T15:59:50  <jeblair> superbee: i agree, but i can't falsify that yet :/
2015-05-04T15:59:54  <superbee> ok
2015-05-04T16:00:14  *** asselin has quit IRC
2015-05-04T16:00:35  <jeblair> superbee: even zuul's "look for missing jobs" thing, which is mostly a holdover from jenkins days, just checks that gearman knows about the job
2015-05-04T16:00:40  <jeblair> geard that is
2015-05-04T16:00:41  <openstackgerrit> Merged openstack-infra/jenkins-job-builder: (hipchat) Accept list of hipchat rooms.  https://review.openstack.org/153831
2015-05-04T16:01:06  *** maishsk has joined #openstack-infra
2015-05-04T16:01:12  *** gokrokve_ has joined #openstack-infra
2015-05-04T16:01:43  *** gokrokve_ has quit IRC
2015-05-04T16:01:46  *** sabeen has quit IRC
2015-05-04T16:01:50  <foobio> superbee: actually, the pr mentions http://babun.github.io/ so maybe that's the key
2015-05-04T16:02:03  *** whayutin_ has quit IRC
2015-05-04T16:02:09  *** SumitNaiksatam has quit IRC
2015-05-04T16:02:27  *** whayutin_ has joined #openstack-infra
2015-05-04T16:02:33  <openstackgerrit> Ken Dreyer proposed stackforge/python-jenkins: support six 1.3  https://review.openstack.org/179826
2015-05-04T16:02:56  *** weshay has quit IRC
2015-05-04T16:02:57  *** Guest65197 has quit IRC
2015-05-04T16:03:08  <superbee> foobio: maybe, I am just confused becuase I would expect the cygwin path to work in cygwin and the non cygwin path to work in normal windows, we shouldn't be crossing path streams
2015-05-04T16:03:12  *** emagana has quit IRC
2015-05-04T16:03:43  <foobio> also, my wife and i just had an offer accepted on a house, so i'm likely not around much later today as we're scrambling to get mortgage paperwork finalized
2015-05-04T16:03:51  <superbee> but that likelyreflects my poor understanding of windows
2015-05-04T16:03:58  <superbee> foobio: gl
2015-05-04T16:03:59  *** SumitNaiksatam has joined #openstack-infra
2015-05-04T16:04:22  <foobio> superbee: i consider that i have basically _no_ understanding of windows at this point, except maybe still how to spell it
2015-05-04T16:04:37  *** gokrokve has quit IRC
2015-05-04T16:04:42  *** emagana has joined #openstack-infra
2015-05-04T16:05:53  <openstackgerrit> Merged openstack-infra/jenkins-job-builder: Add support for 'raw' to inject direct xml to job configs.  https://review.openstack.org/160158
2015-05-04T16:06:14  *** dguerri is now known as _dguerri
2015-05-04T16:06:15  <jeblair> foobio: congrats!
2015-05-04T16:06:19  *** mikeit has quit IRC
2015-05-04T16:06:20  *** unicell1 has quit IRC
2015-05-04T16:06:30  *** gokrokve has joined #openstack-infra
2015-05-04T16:06:58  *** gokrokve has quit IRC
2015-05-04T16:07:18  <foobio> thanks--hopefully no expensive surprises on the inspection
2015-05-04T16:08:44  <zaro> morning
2015-05-04T16:08:59  *** mpavone has quit IRC
2015-05-04T16:09:19  *** yamahata has quit IRC
2015-05-04T16:09:31  *** otter768 has joined #openstack-infra
2015-05-04T16:09:45  <superbee> zaro: good morning, jeblair and I were discussing possibility that RESET ABILITIES being sent is potentially related to the gearman plugin trouble. jeblair was looking at the geard side. Might be worth reading some of the recent scrollback for that and let us know what you think
2015-05-04T16:10:00  *** sergsh_ has quit IRC
2015-05-04T16:10:00  *** sergsh has quit IRC
2015-05-04T16:11:43  *** markus_z has quit IRC
2015-05-04T16:12:14  *** salv-orlando has quit IRC
2015-05-04T16:13:22  *** maishsk has quit IRC
2015-05-04T16:14:23  *** otter768 has quit IRC
2015-05-04T16:14:35  *** yfried has quit IRC
2015-05-04T16:14:54  <openstackgerrit> Emilien Macchi proposed openstack-infra/project-config: Disable voting for puppet-syntax-future on havana/icehouse  https://review.openstack.org/179809
2015-05-04T16:14:57  <EmilienM> AJaeger: thx for your review ^
2015-05-04T16:14:59  *** ashleighfarnham has joined #openstack-infra
2015-05-04T16:15:29  *** scheuran has quit IRC
2015-05-04T16:17:29  *** hdd has quit IRC
2015-05-04T16:17:48  *** alexsyip has joined #openstack-infra
2015-05-04T16:18:33  *** zz_jgrimm is now known as jgrimm
2015-05-04T16:20:13  <openstackgerrit> Andreas Jaeger proposed openstack-infra/project-config: Disable voting for puppet-syntax-future on havana/icehouse  https://review.openstack.org/179809
2015-05-04T16:20:28  <openstackgerrit> Andreas Jaeger proposed openstack-infra/project-config: Disable voting for puppet-syntax-future on havana/icehouse  https://review.openstack.org/179809
2015-05-04T16:21:54  *** _dguerri is now known as dguerri
2015-05-04T16:24:42  <mordred> foobio: woot!
2015-05-04T16:24:53  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: use optimized url for zuul status  https://review.openstack.org/170935
2015-05-04T16:24:53  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: add dbg function to hideci  https://review.openstack.org/179573
2015-05-04T16:24:54  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: add jquery visibility  https://review.openstack.org/179362
2015-05-04T16:24:54  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: create proxy for testing hideci  https://review.openstack.org/179360
2015-05-04T16:24:55  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: Revert "Revert zuul status in gerrit"  https://review.openstack.org/179361
2015-05-04T16:25:28  <openstackgerrit> Merged openstack-infra/jenkins-job-builder: Support the use of lists in trigger-build builder.  https://review.openstack.org/150597
2015-05-04T16:27:46  *** maishsk has joined #openstack-infra
2015-05-04T16:33:56  *** whoops has joined #openstack-infra
2015-05-04T16:34:10  *** yamahata has joined #openstack-infra
2015-05-04T16:34:23  *** Guest19502 has joined #openstack-infra
2015-05-04T16:37:43  *** unicell has joined #openstack-infra
2015-05-04T16:38:46  *** baoli has quit IRC
2015-05-04T16:40:24  *** maishsk has quit IRC
2015-05-04T16:40:30  *** flashgordon is now known as jogo
2015-05-04T16:40:55  *** MarkAtwood has joined #openstack-infra
2015-05-04T16:41:07  *** emagana has quit IRC
2015-05-04T16:42:42  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: use optimized url for zuul status  https://review.openstack.org/170935
2015-05-04T16:42:43  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: add dbg function to hideci  https://review.openstack.org/179573
2015-05-04T16:42:43  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: add jquery visibility  https://review.openstack.org/179362
2015-05-04T16:42:44  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: create proxy for testing hideci  https://review.openstack.org/179360
2015-05-04T16:42:44  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: Revert "Revert zuul status in gerrit"  https://review.openstack.org/179361
2015-05-04T16:42:51  *** emagana has joined #openstack-infra
2015-05-04T16:42:54  <sdague> greghaynes: doh, there was a pep8 at the bottom of the last patch
2015-05-04T16:43:01  <greghaynes> sdague: fun
2015-05-04T16:43:38  *** harlowja_at_home has quit IRC
2015-05-04T16:44:02  <sdague> greghaynes: so the issue with nginx is that it's not just a proxy, it's also rewriting urls inside of content on the fly to get sub resources to go back to the proxy
2015-05-04T16:44:27  <greghaynes> sdague: yea, you can do all that fun stuff in nginx, but it would probably end up being about as much config as you had code
2015-05-04T16:44:36  <sdague> and if anyone figures out how to do that for the openid request from gerrit so that you can actually log in, that would be super awesome
2015-05-04T16:44:48  <sdague> greghaynes: ok, well that would be beyond my level of experience :)
2015-05-04T16:44:59  *** hdd has joined #openstack-infra
2015-05-04T16:45:11  <sdague> and this requires nothing beyond python stdlib except requests
2015-05-04T16:45:38  *** cody-somerville has joined #openstack-infra
2015-05-04T16:46:09  *** sarob_ has joined #openstack-infra
2015-05-04T16:47:01  <greghaynes> yep, and its readable, which is a big win over $webserver_config
2015-05-04T16:48:08  <sdague> I wrote a version to test ui in elastic recheck, then thought "I wonder if this would work in gerrit"
2015-05-04T16:48:32  <sdague> which led to this tweet - https://twitter.com/sdague/status/594102249875451904
2015-05-04T16:48:49  *** sarob_ has quit IRC
2015-05-04T16:48:58  <sdague> because, gerrit's post back channel as a single page app, is kind of a pain
2015-05-04T16:49:09  <mordred> reed: ping - question about sending  out a survey to people in #openstack-horizon if yo uhave a minute
2015-05-04T16:49:25  <reed> mordred, sure
2015-05-04T16:50:16  *** gokrokve has joined #openstack-infra
2015-05-04T16:50:28  <foobio> superbee: revisiting that git-review patch briefly, it looks like the use case is git running in cygwin but python running outside cygwin, so git-review is getting conflicting file paths between what its callouts to git return and what it tries to access via python
2015-05-04T16:50:55  * foobio has no idea if this is a sane/common configuration
2015-05-04T16:52:15  *** bcornec has joined #openstack-infra
2015-05-04T16:53:03  <bcornec> Hello everybody. I was directed to this IRC chat room by Devananda while reporting an issue I had on the ironic channel. Hope that's fine.
2015-05-04T16:53:47  *** hdd has quit IRC
2015-05-04T16:53:47  <mordred> bcornec: hey! welcome to the madhouse
2015-05-04T16:54:06  <bcornec> The issue I had is with i18n with the git review command. I put info on the wiki so that others can work around it, but I think it should behave differently (meaning without the need to abandon my LANGUAGE setup). Cf: https://wiki.openstack.org/wiki/Documentation/HowTo/FirstTimers#i18n
2015-05-04T16:54:14  <bcornec> Thx mordred !
2015-05-04T16:54:39  *** maishsk has joined #openstack-infra
2015-05-04T16:54:58  <openstackgerrit> Terry Wilson proposed openstack/requirements: global-requirements: Add ovs  https://review.openstack.org/177891
2015-05-04T16:55:43  *** dizquierdo has joined #openstack-infra
2015-05-04T16:56:16  <superbee> bcornec: what version of git-review do you have? I believe that the latest version should override the envs LANGUAGE and set it to C for each git command
2015-05-04T16:56:24  <superbee> bcornec: that way you don't have to set it yourself
2015-05-04T16:56:25  <openstackgerrit> Claudiu Belu proposed openstack-infra/project-config: Adds pypi-jobs to compute-hyperv  https://review.openstack.org/179782
2015-05-04T16:57:00  <bcornec> $ rpm -q git-review
2015-05-04T16:57:00  <bcornec> git-review-1.23-3.mga4
2015-05-04T16:57:19  <sdague> or and mordred while you are active - https://review.openstack.org/#/c/179764/ - we need the redirect on https in zuul as well
2015-05-04T16:57:23  *** blahdeblah has joined #openstack-infra
2015-05-04T16:57:50  <mordred> sdague: on it
2015-05-04T16:58:15  <superbee> bcornec: can you test 1.24 and see if the problem persists? You can install it to a virtualenv and run it from there
2015-05-04T16:58:41  *** sdake__ is now known as sdake
2015-05-04T16:58:54  <mordred> bcornec: virtualenv foo  ; foo/bin/pip install git-review ; foo/bin/git-review  ... in case "install to a virtualenv" is new for you
2015-05-04T16:59:04  <superbee> bcornec: a quick check of the git history shows we added the fix in 1.24
2015-05-04T16:59:23  <superbee> but if it isn't fixed we should know that too
2015-05-04T17:00:27  *** bswartz has quit IRC
2015-05-04T17:01:20  <bcornec> Thanks testing now...
2015-05-04T17:01:24  <foobio> okay, heading out to run some errands, bbiaw
2015-05-04T17:01:34  *** ivar-lazzaro has joined #openstack-infra
2015-05-04T17:01:44  <bcornec> mordred: everything pythong is new for me ;-)
2015-05-04T17:01:53  <bcornec> s/pythong/python/
2015-05-04T17:02:00  *** abregman has quit IRC
2015-05-04T17:02:58  <superbee> though I note it sets LANG=C but does not set LANGUAGE, possible it needs an update
2015-05-04T17:03:12  <bcornec> LANGUAGE was needed for sure on my side.
2015-05-04T17:03:22  *** baoli has joined #openstack-infra
2015-05-04T17:04:01  <mordred> cool. good to know
2015-05-04T17:04:16  <openstackgerrit> Clark Boylan proposed openstack-infra/nodepool: Document running Nodepool for testing  https://review.openstack.org/179840
2015-05-04T17:04:20  <superbee> nibalizer: ^
2015-05-04T17:04:28  *** dboik_ has quit IRC
2015-05-04T17:05:03  *** dboik has joined #openstack-infra
2015-05-04T17:05:24  <mordred> superbee: I only see us doing it on the git branch command
2015-05-04T17:05:35  <mordred> superbee: perhaps we should do it on every command?
2015-05-04T17:06:00  *** dguerri is now known as _dguerri
2015-05-04T17:06:10  *** baoli has quit IRC
2015-05-04T17:06:22  <superbee> oh I thought it was in the subprocess wrapper
2015-05-04T17:06:23  *** zul has quit IRC
2015-05-04T17:06:27  <mordred> superbee: it's not
2015-05-04T17:06:28  <superbee> if not, then ya it should be pushed down to there
2015-05-04T17:06:30  <openstackgerrit> Andreas Jaeger proposed openstack-infra/release-tools: Add script to cleanup of translations  https://review.openstack.org/172827
2015-05-04T17:06:43  *** baoli has joined #openstack-infra
2015-05-04T17:07:08  <openstackgerrit> Merged openstack-infra/puppet-zuul: also add targeted status redirects to https  https://review.openstack.org/179764
2015-05-04T17:07:55  *** zul has joined #openstack-infra
2015-05-04T17:08:04  <pabelanger> jeblair, timrc: suggestions on naming for grafana yaml app?
2015-05-04T17:08:13  <openstackgerrit> Monty Taylor proposed openstack-infra/git-review: Push language override down into the cmd wrapper  https://review.openstack.org/179841
2015-05-04T17:08:25  <timrc> pabelanger, grafyaml jk...
2015-05-04T17:08:25  <pabelanger> grafana dashboard builder was first choice, but gdb seems a bad naming ;)
2015-05-04T17:08:31  <openstackgerrit> Monty Taylor proposed openstack-infra/git-review: Push language override down into the cmd wrapper  https://review.openstack.org/179841
2015-05-04T17:08:34  <pabelanger> timrc, Oooh
2015-05-04T17:08:57  <mordred> superbee, bcornec: ^^ I think that should be the thing we're talking about?
2015-05-04T17:08:57  <pabelanger> timrc, I'm not even mad
2015-05-04T17:09:32  <superbee> mordred: ya that looks right
2015-05-04T17:10:03  *** Longgeek_ has quit IRC
2015-05-04T17:11:18  <mordred> uhm
2015-05-04T17:11:40  *** achanda has joined #openstack-infra
2015-05-04T17:11:43  <bcornec> mordred: for what I can understand yes it seems that is at least needed.
2015-05-04T17:11:55  <superbee> mordred: yes?
2015-05-04T17:12:19  <mordred> nm
2015-05-04T17:12:22  <mordred> I'm stoopid
2015-05-04T17:12:29  <anteaya> never
2015-05-04T17:13:03  *** _nadya_ has joined #openstack-infra
2015-05-04T17:15:05  *** jistr has quit IRC
2015-05-04T17:15:13  <openstackgerrit> Claudiu Belu proposed openstack-infra/project-config: Adds publish-to-pypi to networking-hyperv  https://review.openstack.org/179844
2015-05-04T17:15:15  *** Guest19502 has quit IRC
2015-05-04T17:15:15  *** Guest19502 has joined #openstack-infra
2015-05-04T17:15:46  *** tnovacik has quit IRC
2015-05-04T17:16:11  *** bswartz has joined #openstack-infra
2015-05-04T17:16:14  *** sputnik13 has joined #openstack-infra
2015-05-04T17:16:16  *** Krinkle|detached is now known as Krinkle
2015-05-04T17:17:12  *** dizquierdo has quit IRC
2015-05-04T17:17:23  <pabelanger> timrc, https://github.com/pabelanger/grafyaml now lives :)
2015-05-04T17:17:32  <mordred> this is exciting
2015-05-04T17:17:39  *** dizquierdo has joined #openstack-infra
2015-05-04T17:18:33  *** patrickeast has joined #openstack-infra
2015-05-04T17:19:11  <timrc> pabelanger, Sweet.
2015-05-04T17:21:30  <cody-somerville>  w00t
2015-05-04T17:21:31  <anteaya> pabelanger: congratulations
2015-05-04T17:22:32  *** Sukhdev has joined #openstack-infra
2015-05-04T17:22:46  *** luqas has joined #openstack-infra
2015-05-04T17:23:06  *** armax has joined #openstack-infra
2015-05-04T17:24:25  *** ociuhandu has quit IRC
2015-05-04T17:24:29  <mordred> sdague, dhellmann, superbee: where did we ever get with markerlib support for things in requirements/
2015-05-04T17:24:30  <mordred> ?
2015-05-04T17:24:40  <mordred> is that real? or just a vision of the future still?
2015-05-04T17:24:41  <openstackgerrit> Emilien Macchi proposed openstack-infra/system-config: Create rubygems mirror from rubygems.org  https://review.openstack.org/178026
2015-05-04T17:25:37  *** mrmartin has quit IRC
2015-05-04T17:25:44  *** _nadya_ has quit IRC
2015-05-04T17:26:37  *** Guest19502 is now known as mfisch
2015-05-04T17:27:21  *** gokrokve has quit IRC
2015-05-04T17:27:23  <superbee> mordred: vision of the future iirc, lifeless had a ml response explaining why
2015-05-04T17:27:31  <mordred> k
2015-05-04T17:27:52  <mordred> so a requirements change to add a requirement that is really only intended for python3 is not happyface
2015-05-04T17:28:01  *** mrmartin has joined #openstack-infra
2015-05-04T17:28:46  <timrc> pabelanger, Luckily converting yaml to json relatively simple.  I don't think there's a python grafana cli that implements the rest interface.  Are you just going to put a thing wrapper around requests to post dashboards?
2015-05-04T17:28:49  *** mrmartin has quit IRC
2015-05-04T17:28:54  <timrc> is relatively*
2015-05-04T17:29:09  *** mrmartin has joined #openstack-infra
2015-05-04T17:29:09  <timrc> Man thing wrapper? _thin_ wrapper.
2015-05-04T17:29:13  <timrc> It's going to be one of those Mondays.
2015-05-04T17:29:57  *** dboik_ has joined #openstack-infra
2015-05-04T17:30:02  <pabelanger> timrc, Ya, I don't see any python libs for grafana / or CLI. So, ya for now just build out some simple CRUD for it.  It likely can be moved out at some future point.
2015-05-04T17:30:18  *** erikmwilson is now known as Guest14807
2015-05-04T17:30:18  *** erikmwil_ has joined #openstack-infra
2015-05-04T17:30:18  *** Guest14807 has quit IRC
2015-05-04T17:30:18  *** erikmwil_ is now known as erikmwilson
2015-05-04T17:30:19  *** salv-orlando has joined #openstack-infra
2015-05-04T17:30:27  *** erikmwilson_ has joined #openstack-infra
2015-05-04T17:31:09  *** armax has quit IRC
2015-05-04T17:31:22  *** ociuhandu has joined #openstack-infra
2015-05-04T17:32:45  *** tiswanso has quit IRC
2015-05-04T17:33:32  *** tiswanso_ has joined #openstack-infra
2015-05-04T17:33:53  *** luqas has quit IRC
2015-05-04T17:34:04  *** dboik has quit IRC
2015-05-04T17:34:50  *** harlowja has joined #openstack-infra
2015-05-04T17:34:58  <anteaya> timrc: I was hoping for thing wrapper
2015-05-04T17:36:20  *** baoli has quit IRC
2015-05-04T17:36:23  <openstackgerrit> Merged openstack-infra/shade: Rename get_endpoint() to get_session_endpoint()  https://review.openstack.org/178859
2015-05-04T17:37:16  *** baoli has joined #openstack-infra
2015-05-04T17:37:21  <superbee> nibalizer: so looking up the puppet beaker stuff. Have questions about https://review.openstack.org/#/c/179249/8/spec/acceptance/basic_swift_spec.rb comments says run puppet twice but it appears to run puppet 3 times, what is going on there?
2015-05-04T17:37:44  <superbee> nibalizer: and why would you ever want t catch failures? shouldn't a failure alwys be a failure and raised as such?
2015-05-04T17:38:07  <openstackgerrit> Merged openstack-infra/shade: Convert node_set_provision_state to task  https://review.openstack.org/177987
2015-05-04T17:38:24  <superbee> EmilienM: ^ I guess same questions for you
2015-05-04T17:38:55  *** baoli has quit IRC
2015-05-04T17:39:16  *** salv-orlando has quit IRC
2015-05-04T17:39:26  <superbee> also not a fan of the inlined heredoc, the test file should be a fixture so that it is reuseable as a "known working"
2015-05-04T17:39:29  *** baoli has joined #openstack-infra
2015-05-04T17:41:01  *** gokrokve has joined #openstack-infra
2015-05-04T17:42:16  <openstackgerrit> Matt Riedemann proposed openstack-infra/elastic-recheck: Add query for libvirt socket hangup bug 1451506  https://review.openstack.org/179851
2015-05-04T17:42:17  <openstack> bug 1451506 in OpenStack Compute (nova) "spawn failed with "libvirtError: internal error: received hangup / error event on socket" in the gate" [Undecided,New] https://launchpad.net/bugs/1451506
2015-05-04T17:42:34  <crinkle> superbee: i think that's an error
2015-05-04T17:42:39  <nibalizer> superbee: probably thats because that particular case isn't idempotent
2015-05-04T17:42:40  *** russellb has quit IRC
2015-05-04T17:42:42  <crinkle> superbee: convention with beaker-rspec is to use the heredoc
2015-05-04T17:42:44  *** jogo has quit IRC
2015-05-04T17:42:50  <timrc> anteaya, :)
2015-05-04T17:42:52  <nibalizer> and doesn't swift use exported resources? so it'd have to run twice ya?
2015-05-04T17:42:59  <nibalizer> crinkle: ^?
2015-05-04T17:43:09  <crinkle> maybe
2015-05-04T17:43:13  <crinkle> if so the comment should be updated
2015-05-04T17:43:21  <superbee> nibalizer: crinkle I see so its "run twice, then run a third time" not "run twice"
2015-05-04T17:43:34  *** russellb has joined #openstack-infra
2015-05-04T17:43:39  <crinkle> yeah the comment may have been cargoculted
2015-05-04T17:43:43  *** jogo has joined #openstack-infra
2015-05-04T17:43:44  <nibalizer> superbee: so this is more the pattern: http://git.openstack.org/cgit/stackforge/puppet-keystone/tree/spec/acceptance/basic_keystone_spec.rb#n61
2015-05-04T17:44:04  <superbee> for the heredoc is there an advantage to inlining that file?
2015-05-04T17:44:13  <superbee> its clearly a test fixture and should be treated as one...
2015-05-04T17:44:23  <mordred> superbee, nibalizer, crinkle: the more I look at things, the more I think we should do beaker-rspec so that we can do things the same way as the puppet-openstack stuff and enhance each other's happy
2015-05-04T17:44:43  <superbee> mordred: thats funny, the more I look at it the less I like it :)
2015-05-04T17:44:45  <mordred> I was able to read and understand and reason about writing new tests looking at the stuff in puppet-openstack
2015-05-04T17:44:51  <superbee> mordred: it comes off as very hacky
2015-05-04T17:45:03  <crinkle> superbee: the advantage is we can see it immediately without looking at a fixture
2015-05-04T17:45:06  <crinkle> and it's conventional
2015-05-04T17:45:20  *** gokrokve has quit IRC
2015-05-04T17:45:26  *** gokrokve has joined #openstack-infra
2015-05-04T17:45:34  <mordred> superbee: that may be - but if it's the recommended puppet way, and it's what EmilienM and crinkle and folks are doing in the other puppet things, I think we'd be better off working together than doing it all a bit differently ourselves
2015-05-04T17:45:59  *** mwagner_lap has joined #openstack-infra
2015-05-04T17:46:03  * EmilienM reads backlog
2015-05-04T17:46:04  <mordred> basically, I'm not commenting on whether it's a good tool - more whether we have another option that is better _enough_ to warrant divergence
2015-05-04T17:46:04  <superbee> mordred: you have to do a fair bit of setup t make it work in nodepool nodes for example, and it completely bypasses the zuul-cloner goodness we have (though shouldn't be required, just means an extra step)
2015-05-04T17:46:30  <mordred> superbee: well, we should figure out how to fix it to not bypass zuul cloner so that EmilienM is also not unhappy
2015-05-04T17:46:40  <mordred> which might mean making beaker itself less bong
2015-05-04T17:47:01  <mordred> or - we should convince EmilienM to do something different with us
2015-05-04T17:47:35  <crinkle> I think we're pretty set on using beaker-rspec for those modules
2015-05-04T17:47:45  <crinkle> but i have no opinion on whether infra decides to follow suit
2015-05-04T17:47:47  <nibalizer> superbee: i really really want to get zuul cloner and beaker playing nice with each other
2015-05-04T17:47:52  <mordred> I spend enough time yelling at openstack devs about divergence, that I believe diverging myself would be quite hypocritical
2015-05-04T17:47:56  <mordred> nibalizer: ++
2015-05-04T17:48:20  <nibalizer> because zuulcloner + a gate for the puppet openstack modules would be sooo cool
2015-05-04T17:48:24  * nibalizer gets chills
2015-05-04T17:48:26  <superbee> mordred: ya its definitely nice to converge, I am just pointing out the first impression problems I see with it
2015-05-04T17:48:33  <mordred> superbee: sure
2015-05-04T17:48:47  <nibalizer> superbee: also beaker is opensource, we can take feedback upstream and patches too if we want
2015-05-04T17:48:49  <mordred> superbee: also- I mean, I'm sstill not really sure if I should write thigns in rspec or serverspec or both or somethign else
2015-05-04T17:49:01  <mordred> I will say I think that serverspec is very nicely readable
2015-05-04T17:49:13  <superbee> nibalizer: well these issues appaer to be conventions
2015-05-04T17:49:20  <superbee> nibalizer: for example rspec expects to install the module for you
2015-05-04T17:49:20  <mordred> but beaker-rspec seems to be different?
2015-05-04T17:49:24  <superbee> er sorry beaker
2015-05-04T17:49:25  <nibalizer> superbee: conventions evolve
2015-05-04T17:49:26  *** luqas has joined #openstack-infra
2015-05-04T17:49:33  <superbee> nibalizer: and heredocing fixtures inline in code
2015-05-04T17:49:53  <nibalizer> beaker-rspec sits above beaker because largely of conventions disagreements (as i understand it)
2015-05-04T17:49:55  <superbee> mordred: beaker-rspec is just run rspec tests after beakering
2015-05-04T17:50:11  <superbee> mordred: the openstack puppet modules seem to use beaker-rspec not beaker alone
2015-05-04T17:50:36  <mordred> yah
2015-05-04T17:50:49  <mordred> but something in the beaker-rspec docs mentions serverspec
2015-05-04T17:51:00  <mordred> although it does not seem like that's actually used/true
2015-05-04T17:51:06  *** luqas has quit IRC
2015-05-04T17:51:38  <mordred> https://github.com/puppetlabs/beaker-rspec/blob/master/lib/beaker-rspec/helpers/serverspec.rb
2015-05-04T17:51:40  <superbee> fwiw https://review.openstack.org/#/c/179249/8/spec/spec_helper_acceptance.rb is the thing that would need to be made to grok zuul-cloner aiui
2015-05-04T17:51:51  <superbee> right now, it appears to want to install all the things for you
2015-05-04T17:52:06  *** gulic has joined #openstack-infra
2015-05-04T17:52:26  <superbee> except it doesn't really understand the gate and testing things together, which is fine until you want to gate things together (unsure if that is necessary)
2015-05-04T17:52:33  *** gulic has left #openstack-infra
2015-05-04T17:52:34  <mordred> yah - we'd need to be able to have that find zuul cloner repos to install from
2015-05-04T17:52:43  <mordred> superbee: I think we'll want to gate things together for sure
2015-05-04T17:52:52  <crinkle> superbee: yeah, actually gating things together would be nice, right now it just git clones from master
2015-05-04T17:52:54  <mordred> superbee: we ahve enough thigns with depends-on relationships
2015-05-04T17:53:07  *** ZZelle has quit IRC
2015-05-04T17:53:29  *** ZZelle has joined #openstack-infra
2015-05-04T17:53:39  <nibalizer> ya so my plan to hack that was to shell out to zuul cloner from inside spec_helper_acceptance, but thats kinda gross
2015-05-04T17:53:55  <mordred> so maybe we'll need to write a ruby library called beaker-rspec-zuul or something, and have that have a function that knows how to clone things, and will ook for zuul-cloner prepared repos and clone from them, otherwise clone from source
2015-05-04T17:54:15  <superbee> mordred: or maybe beaker should gets its hands out of everything...
2015-05-04T17:54:17  <mordred> that way anyone doing beaker-rspec things in a zuul context can just use beaker-rspec-zuul
2015-05-04T17:54:28  <superbee> mordred: it doesn't need to install the modules, and it doesn't need to setup test nodes
2015-05-04T17:54:32  <jeblair> mordred, nibalizer: joining late, sorry, but can you say in 20 words why this should happen inside of a tool and not as a preparatory step before running it?
2015-05-04T17:54:35  <superbee> it just needs to assert some state
2015-05-04T17:54:41  <mordred> superbee: sure - but let's one step at a time - I think we are the exceptional case
2015-05-04T17:54:55  <jeblair> (i think superbee might also be asking my question)
2015-05-04T17:55:01  <superbee> jeblair: I think so :)
2015-05-04T17:55:09  <mordred> jeblair: because not everyone in the world has an infra-quality repo prep system at their disposal, so "do the thigns for me" is a feature fora  lot of people
2015-05-04T17:55:18  <crinkle> jeblair: it's meant to be able to run from a user's laptop, so having it self contained is preferred
2015-05-04T17:55:22  *** tnovacik has joined #openstack-infra
2015-05-04T17:55:33  <mordred> jeblair: what we need is a way to easily say "please don't do that, kthxbai" in a way that doesn't break people trying to do local testing with, say, vagrant
2015-05-04T17:55:48  <claudiub> Hello, anyone can give me a helping hand regarding stackforge pushed versions through gerrit? It seems I have a little bit of a problem and I did not find a proper solution yet and I was wondering if you folks would know.
2015-05-04T17:56:14  <nibalizer> jeblair: what crinkle and mordred are saying is valid, I'm not 100% satisfied that what we have now (not includin zuul cloner) is enabling local development to match ci testing
2015-05-04T17:56:36  <nibalizer> so adding zuul cloner functionality as a hidden side effect, to me, sounds like a step in the wrong direction
2015-05-04T17:56:50  <jeblair> mordred: yeah; i feel like that's the approach to start with; as there are many testing tools out there that do not manipulate git repos, so i don't actually think we're weird.  i appreciate the extra helpfulness, but it should be extra.  if every computing tool had to understand an scm, the world would be a bad place.
2015-05-04T17:57:26  <jeblair> nibalizer: by 'what we have now' do you mean the proposal in 179249?
2015-05-04T17:57:30  <nibalizer> I worry that we're pushing vagrant files out to local developers and no one is validating that they work
2015-05-04T17:57:31  <jeblair> nibalizer: or something else?
2015-05-04T17:57:40  <EmilienM> superbee: swift was a  bad example
2015-05-04T17:57:52  <EmilienM> all other modules needs 1 puppet run
2015-05-04T17:57:55  <dhellmann> mordred, jd__: regarding lockfile, it's in murano's requirements list. murano is not in the requirements/projects.txt list though so that won't break anything, but now that murano is an official project maybe it would want to be in the projects list?
2015-05-04T17:58:11  <superbee> EmilienM: thanks, I will have to look at the others too, I choose swift somewhat randomly
2015-05-04T17:58:16  <mordred> jeblair: yah - and it soudns like nibalizer is going to write us some upstream ruby to help with that
2015-05-04T17:58:19  <nibalizer> jeblair: 179249 is just the swift version of over a dozen patches that EmilienM has spun up, some are landed
2015-05-04T17:58:40  *** sabeen2 has quit IRC
2015-05-04T17:58:44  <jeblair> nibalizer: i agree -- i believe there is no warranty of functionality or fitness of purpose for anything in infra repos if we don't gate-test it.  :)
2015-05-04T17:58:52  <mordred> dhellmann: yes. in fact, I think it should be in the projects list
2015-05-04T17:58:56  <jeblair> (and maybe not even then ;)
2015-05-04T17:59:01  <nibalizer> jeblair: this is the file im worried about: https://review.openstack.org/#/c/179249/8/spec/spec_helper_acceptance.rb
2015-05-04T17:59:02  *** harlowja has quit IRC
2015-05-04T17:59:04  *** harlowja_ has joined #openstack-infra
2015-05-04T17:59:04  <superbee> claudiub: what is the problem?
2015-05-04T17:59:14  *** tonytan4ever has quit IRC
2015-05-04T17:59:17  <claudiub> superbee: hello. So, I've pushed 1.0.3 to https://github.com/stackforge/networking-hyperv and if I download the zip / tar.gz, unzip it and python setup.py install it, this occurs: Exception: Versioning for this project requires either an sdist tarball, or access to an upstream git repository. Are you sure that git is installed?
2015-05-04T17:59:20  <nibalizer> in that I think there are assumptions about running in infra, that wouldn't be there if a developer was using vagrant
2015-05-04T17:59:30  <mordred> claudiub: yes, that's totally not supported
2015-05-04T17:59:36  *** luqas has joined #openstack-infra
2015-05-04T17:59:42  <superbee> claudiub: ya, you either need a git repository or an sdist
2015-05-04T17:59:44  <mordred> claudiub: github zip/tarball files are not and never will be a format that you can use
2015-05-04T17:59:56  <dhellmann> mordred: so do we remove lockfile and force murano to update before they can be added, or do we do it in the other order?
2015-05-04T18:00:10  <mordred> claudiub: what you want is http://tarballs.openstack.org/networking-hyperv/
2015-05-04T18:00:23  <nibalizer> so I think we're in a grey area now, and we need to be careful about how we add zuul-cloner so that we enable both local development and CI
2015-05-04T18:00:26  <mordred> claudiub: http://tarballs.openstack.org/networking-hyperv/networking-hyperv-master.tar.gz if you want a thing that tracks master
2015-05-04T18:00:31  <superbee> nibalizer: to some degree, but say I am making a change to one module that requires an update to a dep too, I need to be able to express that even on my laptop
2015-05-04T18:00:39  *** erikmwil_ has joined #openstack-infra
2015-05-04T18:00:39  *** erikmwilson is now known as Guest38131
2015-05-04T18:00:39  *** erikmwil_ is now known as erikmwilson
2015-05-04T18:00:40  <mordred> superbee: ++
2015-05-04T18:00:45  *** erikmwilson has quit IRC
2015-05-04T18:00:49  *** armax has joined #openstack-infra
2015-05-04T18:00:59  <superbee> nibalizer: I think vagrant areas are likely where we need to more directly work around the laptop use case. "Install the correct stuff" is something that should be the same whereever
2015-05-04T18:01:02  <jeblair> EmilienM, nibalizer: i see -- i think since puppet modules are joining the big tent we should probably work together on a solution that works for puppet-openstack and infra
2015-05-04T18:01:03  <mordred> in fact, I know the tchaypo frequently talks about wanting to locally test complex interaction chains
2015-05-04T18:01:12  <superbee> nibalizer: and many tools solve that by making you do the install
2015-05-04T18:01:13  *** erikmwilson_ is now known as erikmwilson
2015-05-04T18:01:18  *** luqas has quit IRC
2015-05-04T18:01:19  <claudiub> ah, I see. cool. So, another question.. in order to have certain versions for the tarballs, there has to be a specific job in project-config, right?
2015-05-04T18:01:19  <mordred> jeblair: ++
2015-05-04T18:01:21  <superbee> nibalizer: which I think is a very valid way to do it
2015-05-04T18:01:40  <dhellmann> mordred: actually, it looks like they may not be using that dependency, let me try a patch
2015-05-04T18:01:52  <claudiub> also, if the pypi job is defined on the project-config, pip install should not have any problems, right?
2015-05-04T18:02:20  <mordred> claudiub: that's right - although the pypi jobs will only release something to pypi when you push a signed tag
2015-05-04T18:02:25  *** emagana has quit IRC
2015-05-04T18:02:42  *** chlong has quit IRC
2015-05-04T18:03:35  <nibalizer> superbee: so you think we should set up the right repos in the right places before the test runs, and not do those things in spec_helper_acceptance ?
2015-05-04T18:03:36  <claudiub> mordred: I assume - name: openstack-server-publish-jobs should be added to layout/zuul.yaml, right?
2015-05-04T18:03:48  <jeblair> nibalizer, mordred, superbee: is this similar to devstack vagrant testing?  where you want to use vagrant to run devstack in a local vm based on git repos on your host?
2015-05-04T18:04:07  <superbee> nibalizer: correct, because I think its better to have the user think about what they should do and do it correctly instead of doing it poorly and most likely wrong for them
2015-05-04T18:04:13  <openstackgerrit> Merged openstack-infra/elastic-recheck: Add query for libvirt socket hangup bug 1451506  https://review.openstack.org/179851
2015-05-04T18:04:13  <claudiub> mordred: and - openstack-publish-jobs to project.yaml
2015-05-04T18:04:14  <openstack> bug 1451506 in OpenStack Compute (nova) "spawn failed with "libvirtError: internal error: received hangup / error event on socket" in the gate" [Undecided,Confirmed] https://launchpad.net/bugs/1451506
2015-05-04T18:04:26  <openstackgerrit> Doug Hellmann proposed openstack/requirements: Remove lockfile from requirements  https://review.openstack.org/151224
2015-05-04T18:04:28  *** SumitNaiksatam has quit IRC
2015-05-04T18:04:31  <jeblair> superbee, nibalizer: ++
2015-05-04T18:04:34  <nibalizer> jeblair: i have no information about that workflow, but sounds related
2015-05-04T18:04:37  *** Guest38131 has quit IRC
2015-05-04T18:05:16  <dhellmann> mordred, jd__ : The global requirements patch now depends on the patch to remove it from murano.
2015-05-04T18:05:26  *** EmilienM is now known as EmilienM|mtg
2015-05-04T18:05:29  *** sandywalsh_ has joined #openstack-infra
2015-05-04T18:05:31  *** SumitNaiksatam has joined #openstack-infra
2015-05-04T18:05:58  <dmsimard> Would love a core review on https://review.openstack.org/#/c/179809/ when anyone gets a chance, thanks :)
2015-05-04T18:06:02  *** sandywalsh has quit IRC
2015-05-04T18:06:41  <nibalizer> superbee: okay, and we could write a little 'grab the tip of master for everything' script for the people who aren't doing anything fancy?
2015-05-04T18:06:47  <superbee> nibalizer: ya
2015-05-04T18:06:57  <superbee> nibalizer: similar to how devstack works
2015-05-04T18:07:12  <superbee> devstack will use what you give it or if lazy give you $BRANCH
2015-05-04T18:07:35  <nibalizer> superbee: okay i think we can do this, note that we'll have to put /some/ logic in spec_helper_acceptance since thats our entry point into running stuff on the vagrant vm before the actuall tests start
2015-05-04T18:07:49  <greghaynes> sdague: Commented on https://review.openstack.org/#/c/179573/4/modules/openstack_project/files/gerrit/hideci.js
2015-05-04T18:08:34  *** jcoufal has joined #openstack-infra
2015-05-04T18:08:42  *** maishsk has quit IRC
2015-05-04T18:09:15  *** packet has quit IRC
2015-05-04T18:09:21  *** Sukhdev has quit IRC
2015-05-04T18:09:25  <sdague> greghaynes: *shrug*? that was how I figured out not to crush all the important object info :)
2015-05-04T18:09:33  <sdague> if you have a better way, I'm all for it
2015-05-04T18:09:52  * sdague doesn't even pretty to play a js expert on tv
2015-05-04T18:09:59  *** SumitNaiksatam has quit IRC
2015-05-04T18:10:01  <sdague> s/pretty/pretend/
2015-05-04T18:10:21  *** otter768 has joined #openstack-infra
2015-05-04T18:10:31  <greghaynes> heh, I probably shouldnt pretent
2015-05-04T18:10:34  <greghaynes> pretend
2015-05-04T18:10:43  <claudiub> superbee, mordred: anyways, thanks a lot for the help! :D
2015-05-04T18:10:49  <anteaya> greghaynes: but can you pretty
2015-05-04T18:10:56  *** maishsk has joined #openstack-infra
2015-05-04T18:11:12  <greghaynes> :)
2015-05-04T18:11:55  <greghaynes> sdague: The thing I pasted should work I think, ill test it out using your fancy proxy patch though
2015-05-04T18:11:56  *** emagana has joined #openstack-infra
2015-05-04T18:12:50  <sdague> ok, I did it that way so that the objects came through natively in the chrome console, which lets you click through them
2015-05-04T18:13:18  <greghaynes> yes, IIRC that is a matter of the type of the first argument you pass in
2015-05-04T18:13:30  <greghaynes> if your first arg is not a string then itll output objects
2015-05-04T18:14:28  *** rbradfor has quit IRC
2015-05-04T18:14:29  <nibalizer> superbee: so I think we have s_p_a do some inspection to see if it is in a zuul environment (maybe check $ZUUL_REF or something), then if not do the git clone from tip of master, probably need s_p_a to clean /etc/puppet/modules and copy the zuul-cloner'd repos into /etc/puppet/modules though. Also need it to do the pure dependency installs such as stahnma-epel etc
2015-05-04T18:15:13  *** otter768 has quit IRC
2015-05-04T18:15:18  *** chlong has joined #openstack-infra
2015-05-04T18:15:42  <superbee> nibalizer: can we check for the existence of the modules? or is it possible these nodes are reused even with vagrant?
2015-05-04T18:16:37  *** Krinkle is now known as Krinkle|detached
2015-05-04T18:17:49  <nibalizer> superbee: beaker works by starting up a vm and then doing things to it, then turning it off
2015-05-04T18:17:59  <nibalizer> so making that work with side effects is gonna be a bit tricky
2015-05-04T18:18:21  *** sabeen has joined #openstack-infra
2015-05-04T18:18:23  <nibalizer> and yes sometimes people run beaker with BEAKER_destroy=no or BEAKER_provision=no which allows for reusing the vm
2015-05-04T18:18:28  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Enhance the OperatorCloud constructor  https://review.openstack.org/179647
2015-05-04T18:18:30  <superbee> nibalizer: hrm, right because something in the new VM has to figure it out
2015-05-04T18:18:30  <nibalizer> mostly when debugging the testing harness in my experience
2015-05-04T18:18:48  <nibalizer> but I can't speak for all developers
2015-05-04T18:19:02  <nibalizer> it does make it a ton faster if you know what you're doing isn't corrupting the tests you are doing
2015-05-04T18:19:23  <mordred> so we'd want normal beaker to do the thing people expect from a normal beaker
2015-05-04T18:19:40  <mordred> and we'd want to be able to run it in a way that says not only BEAKER_provision=no - but also "hi, we've done some prep for you"
2015-05-04T18:19:48  <superbee> mordred: sort of, normal beaker is wrong from a install the list of correct things perspective
2015-05-04T18:20:00  <mordred> what do you mean?
2015-05-04T18:20:29  <superbee> mordred: normal operation appears to be install master or latest release
2015-05-04T18:20:44  <superbee> mordred: it does not grok "install this development commit so I can iterate on my dev workflow"
2015-05-04T18:20:47  <mordred> yah
2015-05-04T18:20:49  <openstackgerrit> Merged openstack-infra/project-config: Disable voting for puppet-syntax-future on havana/icehouse  https://review.openstack.org/179809
2015-05-04T18:20:51  <mordred> well, that CLEARLY needs to be fixed
2015-05-04T18:20:57  <nibalizer> mordred: so we don't set BEAKER_provision=no, we tell it to use a very dumb hypervisor called 'just ssh into localhost, itll be ok'
2015-05-04T18:21:22  <superbee> nibalizer: its super close to metal
2015-05-04T18:21:27  <superbee> nibalizer: not even a container in the way
2015-05-04T18:21:41  <nibalizer> superbee: right well so... beacuse the beaker consumers are also using the github workflow, they get around that :P
2015-05-04T18:21:46  <nibalizer> so they have a stack of commits checked out locally
2015-05-04T18:21:53  *** EmilienM|mtg is now known as EmilienM
2015-05-04T18:21:57  <nibalizer> on a brnach when they(we) run beaker locally
2015-05-04T18:22:05  <mordred> superbee: we need to make beaker work for the "clone from master" case like normal puppet people expect - we need to improve their experience by adding a thign that knows how to run beaker using the git commits they have locally and not pushed, and we need to support zuul-cloner envs
2015-05-04T18:22:13  <mordred> superbee: once that's done, it'll be good :)
2015-05-04T18:22:13  <superbee> nibalizer: how does that help if beaker is installing via puppet module?
2015-05-04T18:22:17  <nibalizer> as for depending on an unlanded commit in another module, idunno how pepole do that other than derping with spec_helper_acceptance
2015-05-04T18:22:22  <superbee> nibalizer: (I want to know because that is essentially how zuul-cloner works)
2015-05-04T18:22:31  <nibalizer> superbee: only applies to the repo you're working in
2015-05-04T18:22:36  <superbee> nibalizer: ah, ok
2015-05-04T18:22:55  *** zaneb has joined #openstack-infra
2015-05-04T18:23:43  <nibalizer> so for some extra diversity, here is another s_p_a https://github.com/elastic/puppet-elasticsearch/blob/master/spec/spec_helper_acceptance.rb
2015-05-04T18:23:50  <nibalizer> in my experience, these things vary kinda wildly
2015-05-04T18:24:12  <jeblair> nibalizer: s_p_a means what?
2015-05-04T18:24:24  <nibalizer> also https://github.com/puppetlabs/puppetlabs-postgresql/blob/master/spec/spec_helper_acceptance.rb
2015-05-04T18:24:39  <nibalizer> jeblair: spec_helper_acceptance.rb, it is the script that runs before the testing in beaker
2015-05-04T18:24:52  <jeblair> where's the p come from?
2015-05-04T18:25:10  <nibalizer> so this is where you install puppet dependencies, and even puppet itsefl sometimes
2015-05-04T18:25:22  <jeblair> to avoid collision with sha? (ha!)
2015-05-04T18:25:29  <nibalizer> jeblair: i dont know, i think i meant s_h_a but ended up saying s_p_a (my bad!)
2015-05-04T18:25:46  <nibalizer> hehe
2015-05-04T18:25:52  <superbee> right its basically our run install_puppet.sh script step
2015-05-04T18:25:52  <jeblair> nibalizer: ok, np.  maybe you just invented a thing.  :)
2015-05-04T18:26:03  <anteaya> nibalizer: I like s_p_a as acronyms go
2015-05-04T18:26:04  <superbee> except our install_puppet.sh understands these things
2015-05-04T18:27:50  *** dizquierdo has quit IRC
2015-05-04T18:28:53  *** mattfarina has quit IRC
2015-05-04T18:29:59  *** Sukhdev has joined #openstack-infra
2015-05-04T18:30:38  *** nikita09 has joined #openstack-infra
2015-05-04T18:30:59  *** sdake_ has joined #openstack-infra
2015-05-04T18:31:13  <EmilienM> nibalizer: I think fbo found out why we can't use beaker5 on OS infra
2015-05-04T18:31:26  <EmilienM> https://github.com/puppetlabs/beaker/blob/master/lib/beaker/host_prebuilt_steps.rb#L528
2015-05-04T18:31:31  <EmilienM> and http://git.openstack.org/cgit/openstack-infra/project-config/tree/jenkins/jobs/puppet-module-jobs.yaml#n39
2015-05-04T18:31:59  *** dboik_ has quit IRC
2015-05-04T18:32:59  <asselin__> nibalizer, can you reevaluate your -1 on this? https://review.openstack.org/#/c/167425/
2015-05-04T18:33:19  *** tonytan4ever has joined #openstack-infra
2015-05-04T18:33:29  <superbee> mordred: hahaha see EmilienM's links. We very recently had a discussion about this
2015-05-04T18:33:31  <nibalizer> asselin__: sure
2015-05-04T18:33:34  <openstackgerrit> Ken Dreyer proposed stackforge/python-jenkins: support six 1.3  https://review.openstack.org/179826
2015-05-04T18:33:46  *** tiswanso_ has quit IRC
2015-05-04T18:33:50  <EmilienM> superbee: it's time to collaborate seriously, isn't ? :)
2015-05-04T18:33:53  <nibalizer> EmilienM: i dont understand?
2015-05-04T18:34:03  <EmilienM> nibalizer: when I started to play with beaker
2015-05-04T18:34:06  <EmilienM> I tried beaker 5
2015-05-04T18:34:18  <superbee> EmilienM: it was a week or two ago that mordred and I were arguing about how ansible should know how to pass envs through to remote end
2015-05-04T18:34:22  <EmilienM> and I failed and did not investigate because I wanted to move forward with your work
2015-05-04T18:34:26  <superbee> EmilienM: and it appears that that is one thing beaker depends on
2015-05-04T18:34:46  *** sdake has quit IRC
2015-05-04T18:34:51  <EmilienM> nibalizer: fbo found our the same issue and it seems it comes from the links I shared here
2015-05-04T18:34:52  *** sdake_ is now known as sdake
2015-05-04T18:34:53  <nibalizer> EmilienM: yea so the issue is that infra and beaker fight over the ssh config file?
2015-05-04T18:34:55  <superbee> (I am still not sure I know the answer around that, but having the option to with a tool like ansible seems useful)
2015-05-04T18:35:01  <EmilienM> nibalizer++
2015-05-04T18:35:12  <mordred> superbee: for the record, I've not been arguing that passing env vars is not something it shoudl do - I've been arguing that the framing of the way that you want to do it is not the way they do it
2015-05-04T18:36:59  <waynr> does anyone know what a gerrit patchSet "number" is?
2015-05-04T18:37:00  *** samueldmq_ has joined #openstack-infra
2015-05-04T18:37:06  *** boris-42 has joined #openstack-infra
2015-05-04T18:37:30  <superbee> waynr: yes, its the number assigned to the patchset. It is an incrementing counter for each patchset starting at 1
2015-05-04T18:38:06  <waynr> oh right, that makes sense
2015-05-04T18:38:25  <superbee> waynr: in gerrit a change has a series of patchsets. Unlike github you don't continuously append to your pull request, instead you push a new version of a chnage. Each version of a change is a patchset and is assigned a unique number
2015-05-04T18:38:42  <nibalizer> asselin__: you have feedback :)
2015-05-04T18:38:53  <waynr> yeah i was just confused, the number makes sense to me now
2015-05-04T18:40:06  <nikita09> hi, does Jenkins job builder support passing list parameters to macros ???
2015-05-04T18:41:05  <nikita09> i want to pass list of branches to my git macro, that my job will be building, im not sure if its allowed to pass a list of items as parameter to a macro..
2015-05-04T18:41:14  <waynr> I find the implementation of JJB macros confusing and inconsistent (can't reference otherwise globally-defined JJB variables, can't pass yaml "objects") so I tend to stay away from them
2015-05-04T18:41:18  <superbee> nikita09: I think so, you have to annotate the type otherwise you get the macro expanded n time where n = length of list
2015-05-04T18:41:39  <waynr> oh maybe you cant pass yaml objects
2015-05-04T18:41:41  <superbee> waynr: you should be able to pass yaml objects
2015-05-04T18:41:44  <waynr> s/cant/can/
2015-05-04T18:42:06  <openstackgerrit> Merged openstack/requirements: also install a new pbr into the venvs  https://review.openstack.org/155410
2015-05-04T18:42:26  <superbee> http://ci.openstack.org/jenkins-job-builder/definition.html#variable-references
2015-05-04T18:42:29  <superbee> waynr: nikita09 see ^
2015-05-04T18:43:25  <waynr> superbee: i seem to recall not being able to simply use '{obj:key}' format for passing objects like that, but haven't tried recently enough--maybe it's fixed now?
2015-05-04T18:43:43  <waynr> i also definitely didn't try with the type annotation
2015-05-04T18:43:43  <superbee> I have no idea, we don't use the feature anywhere, I have yet to find a case where it is necessary
2015-05-04T18:44:03  <superbee> but you can in theory use it
2015-05-04T18:44:10  <superbee> and it is in theory tested by JJBs tests
2015-05-04T18:44:10  *** gokrokve has quit IRC
2015-05-04T18:44:22  <waynr> yeah i started using it when I first tried JJB but quickly stopped when i realized I couldn't reference JJB variables defined elsewhere inside a macro
2015-05-04T18:44:42  <superbee> waynr: you have to pass variables into macros same as any job template
2015-05-04T18:45:02  <superbee> so you can use them they just have to be passed through
2015-05-04T18:45:34  <nikita09> superbee: thanks...) how do i annotate the type ? im not sure what that means ..:/
2015-05-04T18:45:41  <waynr> superbee: yeah but if i define a variable in a project, then list job-group in that project's "jobs" the variable defined at the project-level will be available at the job-template level for job templates defined in the job-group
2015-05-04T18:45:58  <nikita09> like '{obj:list"'???
2015-05-04T18:45:59  <superbee> nikita09: the documentation there should show you, !!python/tuple for a tuple looks like
2015-05-04T18:46:19  <waynr> but for macros if I remember correctly i always have to explicitly pass variables when calling the macro, otherwise variables defined at other levels in the jjb object hierarchy aren't available
2015-05-04T18:46:44  <superbee> waynr: you can think of putting the job template in the job list of a project as an explicit pass
2015-05-04T18:47:02  <superbee> waynr: there is nothing global about that var, you are explicitly passing it through to every entry in the jobs list
2015-05-04T18:47:03  <nikita09> superbee: got it / thanks alot :)
2015-05-04T18:47:29  <waynr> but i'm saying that the variables from the project get passed to the job-template even if that job-template is only transitively referenced in the list of jobs for that project which is very different from the macro behavior
2015-05-04T18:47:56  <waynr> when I say "global" what I really mean is "gets passed in from outer scopes"
2015-05-04T18:48:40  *** gokrokve has joined #openstack-infra
2015-05-04T18:49:42  *** subscope_ has joined #openstack-infra
2015-05-04T18:50:11  *** shivharis has joined #openstack-infra
2015-05-04T18:50:39  *** tsg has joined #openstack-infra
2015-05-04T18:51:37  *** SumitNaiksatam has joined #openstack-infra
2015-05-04T18:51:39  <anteaya> mtreinish: thanks for the post to that email, I was wondering what the issue was
2015-05-04T18:52:20  <mtreinish> anteaya: oh, the depends-on thing? Sure, np
2015-05-04T18:52:20  *** ildikov has joined #openstack-infra
2015-05-04T18:52:27  <mtreinish> yeah it took me a sec to figure out what he was asking
2015-05-04T18:52:50  <anteaya> mtreinish: I looked at it too, had no idea, and marked it as something to track for the solution
2015-05-04T18:53:10  <anteaya> mtreinish: I didn't know tempest-lib check jobs installed from last release not source
2015-05-04T18:53:35  <lifeless> mordred: what requirements change?
2015-05-04T18:53:44  <mtreinish> anteaya: all the openstack libs and clients install from releases (unless it's a source job)
2015-05-04T18:54:00  <anteaya> mtreinish: well shows how much I know
2015-05-04T18:54:02  <mordred> lifeless: ECONTEXT
2015-05-04T18:54:11  <anteaya> mtreinish: thank you
2015-05-04T18:54:12  <openstackgerrit> Walter A. Boring IV (hemna) proposed openstack/requirements: Adding os-brick for managing initiators  https://review.openstack.org/177372
2015-05-04T18:54:36  <lifeless> 05:27 < superbee> mordred: vision of the future iirc, lifeless had a ml response explaining why
2015-05-04T18:54:39  <lifeless> 05:27 < mordred> k
2015-05-04T18:54:41  <lifeless> 05:27 < mordred> so a requirements change to add a requirement that is really only intended for python3 is not
2015-05-04T18:54:44  <lifeless>                  happyface
2015-05-04T18:55:08  <mordred> lifeless: gotcha
2015-05-04T18:55:11  <mtreinish> anteaya: heh, a few people have been tripped on it before, especially because we used to install everything from git not that long ago
2015-05-04T18:55:27  <anteaya> mtreinish: not that long ago -- last week maybe?
2015-05-04T18:55:55  <mordred> lifeless: was about a proposed patch to requirements adding new mysqlclient library - except the intent was to only use it for python 3 (at least that's what the mailing list came down to)
2015-05-04T18:56:12  <mordred> lifeless: so I was poking at whether I shold -1 broadly - or -1 saying "add markerlib thing"
2015-05-04T18:56:14  *** shivharis has quit IRC
2015-05-04T18:56:14  <lifeless> yeah
2015-05-04T18:56:20  <lifeless> so today
2015-05-04T18:56:21  <mtreinish> anteaya: I think it was an early kilo thing, but it might have been earlier, my sense of time gets skewed
2015-05-04T18:56:24  <lifeless> add to requirements-py3.txt
2015-05-04T18:56:35  <lifeless> but
2015-05-04T18:56:35  *** tsg has quit IRC
2015-05-04T18:56:41  <anteaya> mtreinish: ah
2015-05-04T18:56:46  <lifeless> point out reallllly clearly that that means that we can't build wheels
2015-05-04T18:56:51  <lifeless> for that project
2015-05-04T18:56:56  <anteaya> mtreinish: yes time moves in strange ways
2015-05-04T18:56:59  <lifeless> [that get published to PyPI]
2015-05-04T18:57:20  <lifeless> without infra changes - and it would be better to do the environment marker work than change infra
2015-05-04T18:57:52  *** sslypush1nko is now known as sslypushenko
2015-05-04T18:58:40  <zaro> superbee: hey sorry for late reply.  read your conversation about gearman plugin.
2015-05-04T18:59:01  <zaro> i'm looking at it and trying to debug some more to see if i can validate your theories.
2015-05-04T18:59:48  <anteaya> zaro: I've lost track, what needs to happen before Saturday?
2015-05-04T18:59:51  *** rockyg has joined #openstack-infra
2015-05-04T18:59:56  <anteaya> zaro: is there an etherpad started yet?
2015-05-04T19:00:01  <openstackgerrit> Emilien Macchi proposed openstack-infra/system-config: Create rubygems mirror from rubygems.org  https://review.openstack.org/178026
2015-05-04T19:00:58  <zaro> anteaya: https://etherpad.openstack.org/p/gerrit-2.10-upgrade
2015-05-04T19:01:08  *** radez is now known as radez_g0n3
2015-05-04T19:02:00  *** julim has quit IRC
2015-05-04T19:02:45  <anteaya> zaro: great thank you
2015-05-04T19:03:29  *** whayutin_ is now known as weshay
2015-05-04T19:03:36  <anteaya> zaro: what a stunning lavender
2015-05-04T19:03:54  <pleia2> hehe
2015-05-04T19:04:19  *** julim has joined #openstack-infra
2015-05-04T19:04:19  *** craigbr has quit IRC
2015-05-04T19:04:20  *** rbradfor has joined #openstack-infra
2015-05-04T19:04:56  <anteaya> isn't it a great colour?
2015-05-04T19:05:07  *** hdd has joined #openstack-infra
2015-05-04T19:05:18  <pleia2> it is
2015-05-04T19:07:20  *** yfried has joined #openstack-infra
2015-05-04T19:07:21  *** chlong has quit IRC
2015-05-04T19:07:35  <nikita09> superbee: well...didnt go as expected :(  im getting error about 'obj:' ... full paste is here :  http://fpaste.org/218313/43076639/
2015-05-04T19:09:06  *** dboik has joined #openstack-infra
2015-05-04T19:09:11  <openstackgerrit> Matthew Treinish proposed openstack/requirements: Remove tempest from projects.txt on stable  https://review.openstack.org/179887
2015-05-04T19:09:13  *** sdake_ has joined #openstack-infra
2015-05-04T19:09:26  <lifeless> mtreinish: wat?
2015-05-04T19:09:26  <superbee> nikita09: I don't think youare passing those vars across
2015-05-04T19:09:58  *** sandywalsh_ has quit IRC
2015-05-04T19:10:00  <superbee> nikita09: I don't know why that is the case but looking at the error that seems to be what is happening?
2015-05-04T19:10:03  <openstackgerrit> Matthew Treinish proposed openstack/requirements: Remove tempest from projects.txt on stable  https://review.openstack.org/179888
2015-05-04T19:10:19  <superbee> nikita09: its saying it doesn't know what obj is but it should realize thats special before that and do the replacement
2015-05-04T19:10:34  <openstackgerrit> Matthew Treinish proposed openstack/requirements: Remove tempest from projects.txt on stable  https://review.openstack.org/179889
2015-05-04T19:10:51  <nikita09> superbee: just to be clear...variable refereces can be made to macros...not just job-templates as the docs say..
2015-05-04T19:10:54  <nikita09> rite?
2015-05-04T19:11:05  <superbee> nikita09: orrect
2015-05-04T19:11:06  <mtreinish> lifeless: grenade fun, it is g-r syncing stable on tempest master
2015-05-04T19:11:11  <superbee> nikita09: what version of jjb do you have?
2015-05-04T19:11:22  <lifeless> mtreinish: ah, so -
2015-05-04T19:11:23  <mtreinish> which is causing the wrong version of tempest-lib from being installed for the grenade job
2015-05-04T19:11:33  <nikita09> superbee: 1.1.0
2015-05-04T19:11:34  <lifeless> mtreinish: I'm worried about uninstallability happening
2015-05-04T19:11:47  <lifeless> mtreinish: can you you think about someway to prevent that?
2015-05-04T19:12:08  <openstackgerrit> Merged openstack-infra/shade: Enhance the OperatorCloud constructor  https://review.openstack.org/179647
2015-05-04T19:12:24  <mtreinish> lifeless: so tempest should be venv isolated in the gate cases I'm thinking of because it should always be a clone followed by tox
2015-05-04T19:12:53  <superbee> nikita09: ok that version should be new enough according to git logs
2015-05-04T19:13:08  <mtreinish> lifeless: I'm not sure I understand what you mean by uninstallability
2015-05-04T19:13:11  <mordred> superbee, jeblair, Shrews: https://review.openstack.org/#/c/178886/ - I'd  like to land that shade patch and then cut a release
2015-05-04T19:13:38  *** sdake has quit IRC
2015-05-04T19:13:44  *** dprince has quit IRC
2015-05-04T19:14:10  <nikita09> superbee: yes..i have almost latest version... i just want to pass a list to my git scm macro.... i tried !!python/tuple and it also gave same "keyerror obj"   error..:/
2015-05-04T19:14:36  *** tiswanso has joined #openstack-infra
2015-05-04T19:14:37  *** samueldmq_ has quit IRC
2015-05-04T19:14:56  <mtreinish> lifeless: we wouldn't be able to use branchless tempest on a stable devstack if it wasn't venv isolated
2015-05-04T19:15:29  <superbee> nikita09: zaro may know more
2015-05-04T19:15:51  *** sandywalsh has joined #openstack-infra
2015-05-04T19:16:01  <mordred> the isolation makes sense to me - tempest is not part of an openstack install - it's a thing taht sits outside of the install and judges it
2015-05-04T19:16:03  <foobio> okay, sort of back now
2015-05-04T19:16:22  <mordred> foobio: https://review.openstack.org/#/c/178886/ if you have a sec - I'd like to get that landed and cut a release
2015-05-04T19:17:39  <jeblair> mordred: ack; i hope to be reviewing after lunch
2015-05-04T19:17:48  <mordred> jeblair: thanks
2015-05-04T19:18:02  <mtreinish> mordred: yeah, although I don't think we want the isolation on master (we do use it for gate runs though) But, having tempest installed systemwide on a devstack install is a better dev story for most
2015-05-04T19:18:49  *** mjturek1 has joined #openstack-infra
2015-05-04T19:18:52  <zaro> nikita09: are you doing multiple scm or just one?
2015-05-04T19:19:10  <mordred> jeblair, superbee, foobio, Shrews: also https://review.openstack.org/#/c/175891/ ... those are the last two that need to go in this release
2015-05-04T19:19:13  <lifeless> mtreinish: co-installability, not uninstallability
2015-05-04T19:19:20  <lifeless> mtreinish: with master
2015-05-04T19:19:33  <nikita09> zaro: i have multiple scm macros...but im in my im using just one scm
2015-05-04T19:19:35  *** ildikov has quit IRC
2015-05-04T19:19:48  <lifeless> mtreinish: I have a chain of assumptions; let me spell it out
2015-05-04T19:19:56  *** mjturek1 has quit IRC
2015-05-04T19:20:05  <lifeless> mtreinish: ops value us having everything co-installable; I assume that that includes tempest
2015-05-04T19:20:25  <zaro> superbee: are we using jjb from master or the latest release (v 0.5.5)?
2015-05-04T19:20:30  *** mjturek1 has joined #openstack-infra
2015-05-04T19:20:36  <lifeless> mtreinish: global-requirements inclusion in projects.txt is how we ensure that co-installability is maintained for a given branch, including master
2015-05-04T19:20:40  <superbee> zaro: we use master, latest release is 1.20
2015-05-04T19:20:41  <zaro> superbee: jjb/geard
2015-05-04T19:20:44  <superbee> er 1.2.0
2015-05-04T19:20:44  *** yfried is now known as yfried|afk
2015-05-04T19:20:58  <superbee> zaro: do you mean gearman-plugin?
2015-05-04T19:21:11  <zaro> nikita09: multiple scm requires a special plugin
2015-05-04T19:21:18  <lifeless> mtreinish: ... and I just noticed your patch is to s/kilo. :)
2015-05-04T19:21:19  <zaro> nikita09: do you have that?
2015-05-04T19:21:29  <zaro> superbee: no python gear
2015-05-04T19:21:29  <superbee> zaro: nikita09's error appears to be in jjb not jenkins
2015-05-04T19:21:34  <zaro> superbee: the server
2015-05-04T19:21:35  <mtreinish> lifeless: oh, heh. Yeah it;s just for stable :)
2015-05-04T19:21:35  <superbee> zaro: python gear we install from latest release
2015-05-04T19:21:42  *** emagana has quit IRC
2015-05-04T19:21:48  <nikita09> zaro: WHICH plugin?? jenkins multiple SCM plugin??
2015-05-04T19:22:00  <nikita09> zaro: i have that jenkins plugin...
2015-05-04T19:22:02  <zaro> superbee: ok. i was testing with v 5.5
2015-05-04T19:22:23  *** ZZelle_ has joined #openstack-infra
2015-05-04T19:22:44  *** salv-orlando has joined #openstack-infra
2015-05-04T19:23:37  <nikita09> zaro: i also tested passing multiple branches to git scm macro...got same 'keyerror obj' ... :/    i -passed like this  >>  branch: !!python/list ['branch1',branch2','branch3']   and it git scm >>> branches : '{obj:branch}'
2015-05-04T19:24:43  <openstackgerrit> Merged openstack/requirements: Bump requests version support  https://review.openstack.org/173290
2015-05-04T19:25:02  <openstackgerrit> Merged openstack/requirements: update openstackclient requirement to 1.0.3  https://review.openstack.org/177337
2015-05-04T19:26:19  <mtreinish> jeblair: if you get a sec: https://review.openstack.org/175008 should be super simple :)
2015-05-04T19:26:25  *** e0ne has quit IRC
2015-05-04T19:26:34  *** claudiub has quit IRC
2015-05-04T19:26:56  <superbee> mordred: it seems really weird that the flag to use tasks for image uploads is a cloud flag
2015-05-04T19:27:19  <superbee> mordred: but thats because rax glance v2 is not glance v2
2015-05-04T19:27:24  <superbee> mordred: right?
2015-05-04T19:27:32  <Shrews> mordred: oh, this can merge now   https://review.openstack.org/168673
2015-05-04T19:27:54  <Shrews> err
2015-05-04T19:28:10  <Shrews> https://review.openstack.org/168672, rather
2015-05-04T19:28:43  <nikita09> zaro: the thing is, JJB git SCM doesnt understand what 'obj' is ...i see thats a feature described for project templates, but not sure if its also supposed to work for git scm too....
2015-05-04T19:29:00  <Shrews> mordred: though, hrm... guess we need swiftclient to make another release, so maybe not
2015-05-04T19:29:06  <superbee> nikita09: I am pretty sure that we use the same substitution method on all the things, but it is possible there is a big
2015-05-04T19:29:09  <lifeless> superbee: no, its because each v2 cloud can choose to run the tasks stuff or not
2015-05-04T19:29:11  <superbee> er s/big/bug/
2015-05-04T19:29:17  *** _nadya_ has joined #openstack-infra
2015-05-04T19:29:20  <superbee> lifeless: then wtf are api versions for?
2015-05-04T19:29:27  *** alexpilotti has quit IRC
2015-05-04T19:29:32  <lifeless> superbee: [also rax isn't quite standard, but thats actually a distraction here]
2015-05-04T19:29:33  <mordred> superbee: well, yes and no
2015-05-04T19:29:36  <lifeless> superbee: confusing users.
2015-05-04T19:29:40  <superbee> lifeless: awesome
2015-05-04T19:29:46  <zaro> nikita09: git001.yaml test here: http://git.openstack.org/cgit/openstack-infra/jenkins-job-builder/tree/tests/scm/fixtures has config for multiple branches.
2015-05-04T19:29:48  <mordred> superbee: it's a feature that takes a priori knowledge that cannot be inferred from the keystone catalog
2015-05-04T19:30:01  <zaro> nikita09: does the corresponding xml look correct to you?
2015-05-04T19:30:02  <superbee> mordred: because it is not reflected in either the catalog of glance api version?
2015-05-04T19:30:06  <mordred> superbee: so, the API for tasks that rackspace uses is the v2 tasks api
2015-05-04T19:30:10  <mordred> superbee: that's right
2015-05-04T19:30:15  <superbee> mordred: can we go back and -2 this glance stuff and make them delete v2 and tasks?
2015-05-04T19:30:16  <mordred> superbee: so - there are two axes
2015-05-04T19:30:22  <mordred> superbee: well, v2 isn't a problem
2015-05-04T19:30:23  *** e0ne has joined #openstack-infra
2015-05-04T19:30:25  <mordred> superbee: PUT works in v2
2015-05-04T19:30:26  <superbee> mordred: then have them make a v3 that works?
2015-05-04T19:30:34  <mordred> there is "is this v1 or v2"
2015-05-04T19:30:37  <superbee> mordred: sure except that v2 doesn't have a way of telling you to use tasks or not
2015-05-04T19:30:42  <mordred> and there is "must you use tasks"
2015-05-04T19:30:44  <lifeless> superbee: I feel your pain, but thats just going to be worse still
2015-05-04T19:30:45  <superbee> mordred: and if the are optional but sometimes required the api should tell you
2015-05-04T19:30:55  <mordred> superbee: well, the "must use tasks" is a deployment policy decision at rax
2015-05-04T19:30:56  <zaro> nikita09: does that work in a macro?
2015-05-04T19:31:02  <superbee> mordred: either via a capabilities requests or via making it required
2015-05-04T19:31:07  <mordred> superbee: AIUI, what they did is reduce the available quota for PUT calls to 0
2015-05-04T19:31:12  <mordred> or something
2015-05-04T19:31:20  * mordred waves hands
2015-05-04T19:31:22  <nikita09> superbee: can you please link me to an example job config where you guys use same list parameters passed ? using obj:key??
2015-05-04T19:31:26  <superbee> mordred: sure all I am suggesting is that it is glance's job to reflect this to the user
2015-05-04T19:31:30  <mordred> superbee: 100% agree
2015-05-04T19:31:35  <superbee> nikita09: we have none, we never use them
2015-05-04T19:31:39  <mordred> superbee: I jjust think it's an even bigger problem
2015-05-04T19:31:55  <mordred> superbee: because the same thign is potentially the case with every single thing that an operator can set in policy.json
2015-05-04T19:32:04  <superbee> mordred: fun
2015-05-04T19:32:12  <mordred> superbee: this just happens to be one that one of our deployers did set and we hit it and learned about it
2015-05-04T19:32:22  <mordred> superbee: so, I'd argue that policy.json itself should be shot in the face
2015-05-04T19:32:25  <superbee> so policy.json can affect the functionality of the api wihtout having any way to reflect such things to the user before they use the api
2015-05-04T19:32:28  *** ildikov has joined #openstack-infra
2015-05-04T19:32:28  <mordred> yes
2015-05-04T19:32:33  <superbee> or at least before they use the api to interrogate functionality
2015-05-04T19:32:37  <superbee> thats insane
2015-05-04T19:32:40  <mordred> and that exists as an idea across all of openstack
2015-05-04T19:32:50  <mordred> "deployer freedom" man
2015-05-04T19:32:56  <zaro> nikita09: http://git.openstack.org/cgit/openstack-infra/jenkins-job-builder/tree/tests/yamlparser/fixtures/custom_distri.yaml
2015-05-04T19:33:19  *** salv-orlando has quit IRC
2015-05-04T19:33:46  <zaro> nikita09: and http://git.openstack.org/cgit/openstack-infra/jenkins-job-builder/tree/tests/yamlparser/fixtures/expand-yaml-for-template-job/dimensionality-test001.yaml
2015-05-04T19:33:48  <nikita09> zaro: thanks..yes i see same example in docs..but thats referring to project template...i was wondering if there is similar for git scm..
2015-05-04T19:34:27  *** mjturek2 has joined #openstack-infra
2015-05-04T19:34:56  <superbee> mordred: my only suggestion for shade then is to somehow distinguish between glance tasks and shade tasks
2015-05-04T19:35:08  *** e0ne has quit IRC
2015-05-04T19:35:11  <zaro> nikita09: no, unfortunately no test for that.  so probably not supported in scm
2015-05-04T19:35:18  <superbee> mordred: the docstring is ambiguous as to which task is in use here
2015-05-04T19:35:42  <nikita09> zaro: i have tried passing list of branches in both ways... using []  and using @branch
2015-05-04T19:35:52  <nikita09> - branch 1   - branch 2 - branch3
2015-05-04T19:36:06  <superbee> mordred: left a comment
2015-05-04T19:36:24  <nikita09> zaro: both times it says 'keyerror: obj' so it means this feature is not enabled for git scm ..right?
2015-05-04T19:36:24  <zaro> nikita09: doesn't the git001.yaml do that?
2015-05-04T19:36:34  *** mjturek1 has quit IRC
2015-05-04T19:37:17  <zaro> nikita09: i see a list of branches getting passed to git scm
2015-05-04T19:37:42  *** e0ne has joined #openstack-infra
2015-05-04T19:37:49  *** jgrimm is now known as zz_jgrimm
2015-05-04T19:38:06  <nikita09> zaro: git001.yaml is not a macro...
2015-05-04T19:38:51  *** mjturek2 has quit IRC
2015-05-04T19:39:06  *** e0ne has quit IRC
2015-05-04T19:39:47  *** e0ne has joined #openstack-infra
2015-05-04T19:39:58  <nikita09> zaro: i have macro of git scm just like git001.yaml but in that, under `branches` , i passed a list of branches from my jobs... so branches : '{obj:mybranchlist}'  and in my job ,  mybranchlist: !!python/list [a,b,c ,]  etc etc
2015-05-04T19:40:13  <anteaya> mtreinish: tempest is being invoked here: https://etherpad.openstack.org/p/YVR-ops-user-committee
2015-05-04T19:40:21  *** luqas has joined #openstack-infra
2015-05-04T19:40:21  <anteaya> mtreinish: you may want to climb in
2015-05-04T19:40:29  <nikita09> but it doesnt get what obj is .....
2015-05-04T19:40:56  *** yfried|afk is now known as yfried
2015-05-04T19:40:57  <mtreinish> anteaya: I support both of those bullet points
2015-05-04T19:41:17  <anteaya> mtreinish: tim bell may appreciate your support
2015-05-04T19:41:41  *** e0ne has quit IRC
2015-05-04T19:41:43  <mtreinish> those are things I've been pushing for some time, but never got volunteers before
2015-05-04T19:41:45  <zaro> nikita09: ahh, sorry i misunderstood your use case.
2015-05-04T19:41:48  <anteaya> next time he reads that etherpad
2015-05-04T19:41:56  <anteaya> mtreinish: good to know, I didn't know that
2015-05-04T19:42:07  <nikita09> zaro: np :)  is it fine if i report a bug on storyboard for it ??
2015-05-04T19:42:12  <anteaya> mtreinish: I wonder how many user committee folks know your thoughts
2015-05-04T19:42:22  <mtreinish> anteaya: should I just +1 it in the etherpad? Sorry I don't know the contxt of it
2015-05-04T19:42:23  *** e0ne has joined #openstack-infra
2015-05-04T19:42:28  *** mjturek1 has joined #openstack-infra
2015-05-04T19:42:32  <anteaya> this is tim bells etherpad
2015-05-04T19:42:40  <anteaya> sorry let me get context for you
2015-05-04T19:42:44  <zaro> nikita09: yes, please do.
2015-05-04T19:42:45  *** e0ne has quit IRC
2015-05-04T19:43:08  <pabelanger> Anybody know of a yaml schema validator?
2015-05-04T19:43:14  <pabelanger> ... for python
2015-05-04T19:43:24  <anteaya> mtreinish: context: http://lists.openstack.org/pipermail/openstack-dev/2015-May/063102.html
2015-05-04T19:43:26  *** e0ne has joined #openstack-infra
2015-05-04T19:43:45  <superbee> pabelanger: voluptuous, zuul uses it
2015-05-04T19:43:50  *** e0ne has quit IRC
2015-05-04T19:43:55  <anteaya> mtreinish: this is the who can vote for tc thread, and this is tim saying he is trying to organize the user committee better via this etherpad
2015-05-04T19:44:06  <pabelanger> superbee, Ah, yes. I knew that
2015-05-04T19:44:08  <pabelanger> thanks
2015-05-04T19:44:20  <mtreinish> anteaya: oh heh, no wonder I missed it, it was part of that thread I was keeping away from
2015-05-04T19:44:21  <anteaya> mtreinish: via, using in support of
2015-05-04T19:44:28  <anteaya> mtreinish: ah sorry to drag you in
2015-05-04T19:44:32  <anteaya> mtreinish: but tempest
2015-05-04T19:44:44  <anteaya> mtreinish: and things you want to support
2015-05-04T19:44:52  <mtreinish> hehe, no worries, I don't need to chime in on the thread, just comment on the etherpad :)
2015-05-04T19:44:55  *** e0ne has joined #openstack-infra
2015-05-04T19:45:07  *** luqas has quit IRC
2015-05-04T19:45:21  *** sushilkm has joined #openstack-infra
2015-05-04T19:45:25  *** e0ne has quit IRC
2015-05-04T19:45:29  *** sushilkm has left #openstack-infra
2015-05-04T19:47:13  <anteaya> mtreinish: yes I concur
2015-05-04T19:47:59  <mtreinish> anteaya: ok I left some comments
2015-05-04T19:48:08  <nikita09> well...this also seems like a valid bug in jjb.. using awk statements that have {} , jjb thinks this this mapping to something.. liike awk '{print $1}' , jjb thinks 'print $1' is key in our macro :) lol  https://storyboard.openstack.org/#!/story/2000180
2015-05-04T19:48:10  *** emagana has joined #openstack-infra
2015-05-04T19:48:13  *** tiswanso has quit IRC
2015-05-04T19:48:24  <mtreinish> if the blinding red didn't give that away :)
2015-05-04T19:48:50  <anteaya> mtreinish: thank you
2015-05-04T19:48:53  <anteaya> mtreinish: ha ha ha
2015-05-04T19:49:04  *** unicell has quit IRC
2015-05-04T19:49:08  <anteaya> I always have to look for my sunglasses when you speak up
2015-05-04T19:49:10  <anteaya> :)
2015-05-04T19:49:32  <anteaya> not sure what they would want in terms of a ci here
2015-05-04T19:50:38  <jeblair> nikita09: should work if you double them "{{foo}}"
2015-05-04T19:50:57  *** yfried is now known as yfried|afk
2015-05-04T19:50:58  <mtreinish> anteaya: honestly we probably could leverage infra to just have a job which installs tempest somewhere and configures it to talk to public facing cloud X
2015-05-04T19:51:17  <mtreinish> I know that's something that came up in a summit session at some point in the past
2015-05-04T19:51:36  *** emagana_ has joined #openstack-infra
2015-05-04T19:51:40  <mtreinish> I think foobio or superbee proposed just running a periodic job to have tempest run against infra's rax account
2015-05-04T19:51:56  <mtreinish> (which it turns out would fail miserably :) )
2015-05-04T19:52:04  <anteaya> awesome
2015-05-04T19:52:31  *** emagana has quit IRC
2015-05-04T19:52:48  <anteaya> well I'm more at the let's keep discussing phase than let's decide on the solution, but that might be an interesting solution
2015-05-04T19:53:07  <anteaya> mtreinish: any thoughts on where I might dig up the etherpad that references said idea?
2015-05-04T19:54:03  <mtreinish> I'm not sure it would be in etherpad notes, iirc it was just a random comment at a session in HK (but super hazy)
2015-05-04T19:54:14  <foobio> mtreinish: yeah, you'd want a dedicated tenant for that, and make sure the job was nonconcurrent with other jobs using the same tenant probably
2015-05-04T19:54:18  <anteaya> mtreinish: can you be a bit more vague please
2015-05-04T19:54:23  <mtreinish> it might have been portland too
2015-05-04T19:54:24  <anteaya> mtreinish: way too much detail there
2015-05-04T19:54:26  <mtreinish> anteaya: ^^^ :)
2015-05-04T19:54:29  <anteaya> mtreinish: there we go, thanks
2015-05-04T19:54:38  <anteaya> spread it a little thinner
2015-05-04T19:54:47  <openstackgerrit> Joshua Harlow proposed openstack-infra/release-tools: Include 'source_url' in notes and use readme parser function  https://review.openstack.org/176528
2015-05-04T19:55:18  <anteaya> foobio: have we the ability to dedicate a tenant now, if we should want to?
2015-05-04T19:55:30  <mtreinish> foobio: sure, we probably would actually need multiple separate tenants to do it right (so we could run in parallel)
2015-05-04T19:56:20  <foobio> anteaya: we'd have to request one
2015-05-04T19:57:13  * mtreinish remembers he needs to kill his rax node running his blog and close his account as it's no longer free
2015-05-04T19:57:16  <anteaya> foobio: okay thanks, not jumping the gun, just trying to understand what is required should this route be selected
2015-05-04T19:57:18  <foobio> anteaya: not looking at the etherpad, i would infer this is for the benefit of confirming that tempest testing some real cloud returns sane results (to validate tempest's operation? to validate the cloud it's hitting? both?)
2015-05-04T19:57:23  <mtreinish> mikal: ^^^ unless you want to fix that for me :)
2015-05-04T19:57:36  <anteaya> foobio: both
2015-05-04T19:57:42  *** e0ne has joined #openstack-infra
2015-05-04T19:57:53  <mtreinish> foobio: yeah, both
2015-05-04T19:57:56  *** _nadya_ has quit IRC
2015-05-04T19:57:59  <anteaya> foobio: the way it is worded to verify the cloud code does as expected
2015-05-04T19:58:07  <foobio> anteaya: also once we have an infra-cloud, this might be waaaaay easier to organize
2015-05-04T19:58:13  <anteaya> but tempest code would be evaluated too as a result
2015-05-04T19:58:17  <anteaya> foobio: ohhhh
2015-05-04T19:58:29  <superbee> mtreinish: oh ya I need to do that too
2015-05-04T19:58:42  <anteaya> foobio: might we be open to trying to recruite some ops folks to help with infra-cloud?
2015-05-04T19:58:51  <foobio> but yeah, validating our infra-cloud, while something we probably should do, doesn't necessarily help rackspace. that's where stuff like refstack is aiming to fill the gap i think
2015-05-04T19:58:54  <anteaya> should I seed the etherpad with that idea?
2015-05-04T19:59:11  *** wenlock has quit IRC
2015-05-04T19:59:16  <anteaya> foobio: funny so far none of the ops folks have mentioned refstack
2015-05-04T19:59:26  *** dboik has quit IRC
2015-05-04T19:59:29  <foobio> i am unsure they're even aware
2015-05-04T19:59:35  *** mriedem has quit IRC
2015-05-04T19:59:52  <foobio> that's probably one of those places where we're getting too siloed and people are working in parallel toward similar goals without even knowing about each other
2015-05-04T19:59:58  *** dboik has joined #openstack-infra
2015-05-04T19:59:59  * mtreinish probably should try to be nice and not say anything
2015-05-04T20:00:06  <openstackgerrit> Merged openstack-dev/pbr: Stop re-invoking pip  https://review.openstack.org/175369
2015-05-04T20:00:07  *** jcoufal has quit IRC
2015-05-04T20:00:17  <anteaya> mtreinish: good strategy
2015-05-04T20:00:27  <anteaya> foobio: possibly
2015-05-04T20:00:33  <foobio> mtreinish: all i'll say is that at least one if not both groups might benefit from some additional help from outside their silo
2015-05-04T20:00:47  <jeblair> foobio: ++
2015-05-04T20:00:54  <anteaya> foobio: that is a diplomatic thing to say
2015-05-04T20:01:00  <anteaya> and I can agree with it
2015-05-04T20:01:28  <mtreinish> foobio: heh, I wasn't taking issue with that. That's a good statement
2015-05-04T20:02:33  *** dboik_ has joined #openstack-infra
2015-05-04T20:03:07  *** claudiub has joined #openstack-infra
2015-05-04T20:04:24  *** wenlock1 has quit IRC
2015-05-04T20:05:56  *** dboik has quit IRC
2015-05-04T20:07:46  *** SumitNaiksatam has quit IRC
2015-05-04T20:07:56  * tchaypo joins the conversation hours late
2015-05-04T20:08:18  <tchaypo> nibalizer: you mentioned “adding zuul-cloner” but I couldn’t figure out what you were talking about adding it to
2015-05-04T20:08:19  *** subscope_ has quit IRC
2015-05-04T20:08:38  <superbee> tchaypo: the openstack puppet module beaker tests
2015-05-04T20:08:58  <superbee> tchaypo: right now they only test the current change, there is no integration testing or cogating going on
2015-05-04T20:09:47  <tchaypo> and the concern is that adding it to the tests makes it hard to run outside infra?
2015-05-04T20:10:04  *** Somay has joined #openstack-infra
2015-05-04T20:10:06  <nibalizer> tchaypo: basically
2015-05-04T20:10:19  <nibalizer> tchaypo: tests on a local workstation should do the right thing
2015-05-04T20:10:20  *** doude has quit IRC
2015-05-04T20:10:40  *** doude has joined #openstack-infra
2015-05-04T20:10:46  <tchaypo> where “right thing” means “same tests as CI will do”?
2015-05-04T20:11:16  <greghaynes> foobio: Hey, any idea where the change to add https://zuul.openstack.org/status/change/ is?
2015-05-04T20:11:18  *** otter768 has joined #openstack-infra
2015-05-04T20:11:19  <superbee> tchaypo: yes, but using vagrant
2015-05-04T20:11:38  <foobio> greghaynes: i +2'd it, i think it needs a second set of eyes
2015-05-04T20:11:41  <superbee> tchaypo: since locally the expectation from beaker is to spin up VMs
2015-05-04T20:12:19  *** SumitNaiksatam has joined #openstack-infra
2015-05-04T20:12:33  <superbee> mordred: reading https://review.openstack.org/#/c/175891/24/shade/cmd/inventory.py shade inventory is an ini file, why would we output yaml and json but not ini?
2015-05-04T20:12:39  <superbee> Shrews: ^ maybe you know?
2015-05-04T20:12:43  <greghaynes> superbee: inventory plugin
2015-05-04T20:12:44  <mordred> superbee: 2 things
2015-05-04T20:12:50  <mordred> superbee: that's not an ansible inventory plugin
2015-05-04T20:13:23  <mordred> superbee: that's a script that a user can use to get a printout of what's in their clouds without necessarily seeing the extra ansible things like group info
2015-05-04T20:13:35  <foobio> greghaynes: oh, it's https://review.openstack.org/179764 and merged several hours ago
2015-05-04T20:13:42  <mordred> superbee: I wind up looking at printouts of my ansible inventory a lot of times to just see somethinigs about the data
2015-05-04T20:13:53  <greghaynes> foobio: ah! that would explain why my digging through open reviews isnt finding it
2015-05-04T20:13:56  <mordred> superbee: second - a dynamic ansible inventory is not ini - it is a program that outputs json
2015-05-04T20:14:01  *** radez_g0n3 is now known as radez
2015-05-04T20:14:20  <mordred> superbee: so a program that outputs inventory in an ini format is not a thing that anything would consume
2015-05-04T20:14:28  <superbee> mordred: can I take that json and pass it to ansible -i ?
2015-05-04T20:14:42  <mordred> superbee: that's not how the mechanism works, no
2015-05-04T20:14:54  <foobio> greghaynes: working example https://zuul.openstack.org/status/change/179706,4
2015-05-04T20:14:56  <mordred> superbee: what you do is you pass the location of teh script to ansible -i
2015-05-04T20:14:56  <superbee> mordred: then I think you need to also output ini
2015-05-04T20:15:00  <mordred> superbee: no
2015-05-04T20:15:03  <superbee> mordred: hold on
2015-05-04T20:15:05  *** cloudnull has quit IRC
2015-05-04T20:15:07  <foobio> greghaynes: that's a requirements change in the gate right now
2015-05-04T20:15:10  <mordred> superbee: you tell ansible what the script is, and ansible runs it for you
2015-05-04T20:15:13  <greghaynes> foobio: ahoy
2015-05-04T20:15:15  <mordred> superbee: and the script outputs json
2015-05-04T20:15:16  <superbee> mordred: yes I get that
2015-05-04T20:15:18  <superbee> mordred: BUT
2015-05-04T20:15:40  <superbee> mordred: what if I want to edit the file first? I don't want to write a new script, just take output, make some changes then pass it back in
2015-05-04T20:15:55  <superbee> mordred: its just really weird to me that the interface here is inconsistent
2015-05-04T20:15:56  <mordred> superbee: this script is not an ansible inventory
2015-05-04T20:16:03  *** otter768 has quit IRC
2015-05-04T20:16:05  <Shrews> this is *dynamic* inventory
2015-05-04T20:16:15  <superbee> mordred: except you just said I could pass it to ansible for invetory purposes
2015-05-04T20:16:15  <mordred> this is not a tool for generating static inventories
2015-05-04T20:16:23  <mordred> superbee: sorry - what I meant was
2015-05-04T20:16:32  <mordred> you can pass an ansible dynamic inventory script to ansible
2015-05-04T20:16:38  <mordred> this is not an ansible inventory script
2015-05-04T20:16:48  <superbee> ok, then what is it?
2015-05-04T20:16:55  <mordred> this is a program to produce some information about your clouds for whatever purpose you might find useful
2015-05-04T20:17:06  *** rockyg has quit IRC
2015-05-04T20:17:07  <mordred> I personally use it to debug looking at all of my cloud info
2015-05-04T20:17:13  <superbee> and one of those useful things is not giving the data back to ansible?
2015-05-04T20:17:13  <Shrews> superbee: http://docs.ansible.com/intro_dynamic_inventory.html
2015-05-04T20:17:16  <mordred> no
2015-05-04T20:17:22  <superbee> ok
2015-05-04T20:17:33  <mordred> beause I havea n ansible dynamic inventory plugin that uses the same underlying code as this, but does othe rthings too
2015-05-04T20:17:47  <mordred> like add group information and ansible_ssh_hostname varaibles
2015-05-04T20:17:48  <rcarrill`> i use the ansible inventory to target plays against servers that have a certain nova metadata
2015-05-04T20:17:48  <tchaypo> I think http://docs.ansible.com/developing_inventory.html is the better link for explaining what a dynamic inventory script looks like
2015-05-04T20:17:51  <rcarrill`> it's pretty cool
2015-05-04T20:17:53  *** rcarrill` is now known as rcarrillocruz
2015-05-04T20:17:55  <mordred> yup
2015-05-04T20:18:06  <superbee> so I understand whay a dynamic inventory script is
2015-05-04T20:18:07  *** cloudkiller has joined #openstack-infra
2015-05-04T20:18:11  <superbee> I understand it outputs jsob
2015-05-04T20:18:21  <superbee> I also understand that ansible -i can take an ini input file
2015-05-04T20:18:30  <superbee> so an inventory script should support that too imo
2015-05-04T20:18:38  <superbee> but if this isn't an inventory script then whatever
2015-05-04T20:18:42  <lifeless> jsob?
2015-05-04T20:18:46  <superbee> sorry json
2015-05-04T20:18:49  <lifeless> do you men json or bson...
2015-05-04T20:18:51  <lifeless> thanks
2015-05-04T20:19:02  <mordred> lifeless: json
2015-05-04T20:19:07  <greghaynes> jsob is what you do when you pass json via command line arguments
2015-05-04T20:19:09  <foobio> boson
2015-05-04T20:19:10  <foobio> awesome
2015-05-04T20:19:17  <superbee> greghaynes: ++
2015-05-04T20:19:20  <mordred> superbee: I could see the thing you're saying - but it's not really a thing with ansible inventories so far
2015-05-04T20:19:29  <mordred> superbee: I'd be happy though to add that as a feature to the openstack one
2015-05-04T20:19:36  <mordred> superbee: if you thnk it's a thing you'd find useful
2015-05-04T20:19:36  <superbee> mordred: sure it is, I run command get ini file. Now I can do what I want with that and pass it to -i
2015-05-04T20:19:40  <mordred> superbee: since it would not be ahrd
2015-05-04T20:19:52  <mordred> superbee: no, what I'm saing is that that's not how people in ansible world do this
2015-05-04T20:19:58  <mordred> and none of the current ansible tools do it
2015-05-04T20:20:02  <mordred> however, it's an interesting idea
2015-05-04T20:20:02  <greghaynes> superbee: im curious why you would want to do that?
2015-05-04T20:20:03  * foobio is going to create a bunch of json-like serialization languages named after subatomic particles
2015-05-04T20:20:04  <mordred> and easy to add
2015-05-04T20:20:08  <superbee> mordred: no, instead they reinvent the world and write a NEW script to do dynamic inventory
2015-05-04T20:20:17  *** doug-fish has joined #openstack-infra
2015-05-04T20:20:20  <mordred> well, no - there's no need to do that
2015-05-04T20:20:26  <mordred> you can have multiple inventoies
2015-05-04T20:20:32  <sdague> foobio: hmmm... so when I try to urlopen from python https://zuul.openstack.org/status/change/179706,4
2015-05-04T20:20:33  <rcarrillocruz> yeah
2015-05-04T20:20:37  <superbee> greghaynes: first thing that comes to mind is to be extra sure that any restricted roll outs are restricted
2015-05-04T20:20:38  <mordred> so if you want to suppliment the openstack dynamic inventory
2015-05-04T20:20:44  <rcarrillocruz> you point to a folder containing several inventories
2015-05-04T20:20:44  <superbee> greghaynes: ansible can't touch a host if it doesn't know about it
2015-05-04T20:20:45  <mordred> you just put some more static inventory next to it
2015-05-04T20:20:45  <sdague> I get an SSL error
2015-05-04T20:20:47  <sdague> URLError: <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)>
2015-05-04T20:20:50  <superbee> greghaynes: then I don't have to worry about bugs in my inventory
2015-05-04T20:20:59  <mordred> superbee: see what I just said ^^
2015-05-04T20:21:12  <mordred> superbee: you make your inventory point to a dir - one of the things in the dir is a script, the other things are static files
2015-05-04T20:21:18  <superbee> mordred: thats additive not restricting nodes
2015-05-04T20:21:20  <greghaynes> superbee: you can also do -l to limit your inventory ontop
2015-05-04T20:21:31  <greghaynes> er, limit ontop your inventory
2015-05-04T20:21:34  <superbee> mordred: so I am not sure how I would say "make sure this node never shows up when I run the new scary thing"
2015-05-04T20:21:48  <greghaynes> -l !host or somesuch
2015-05-04T20:21:56  <rcarrillocruz> you can exclude in the 'hosts' section
2015-05-04T20:22:53  <mordred> superbee: so - I understand your general usecase, but I don't have a concrete example of it in mind, so it's hard to conjecture about how it might be solved for real... that said, I think adding a thing that outputs some ini would be pretty easy to do
2015-05-04T20:22:54  <superbee> greghaynes: rcarrillocruz ok did not know bout -l
2015-05-04T20:23:01  <mordred> and I'm happy to do it
2015-05-04T20:23:01  <greghaynes> :) its nifty
2015-05-04T20:23:12  <openstackgerrit> Doug Hellmann proposed openstack/requirements: Remove lockfile from requirements  https://review.openstack.org/151224
2015-05-04T20:23:17  <mordred> if anything - it could be used for debugging purposes
2015-05-04T20:23:26  <mordred> "give me a static ini-style output I can futz with"
2015-05-04T20:23:27  <foobio> sdague: i'll take a look at why my browser is cool with it but other tools might not be
2015-05-04T20:23:27  <foobio> sdague: it's possible the chain cert there is wrongish or something
2015-05-04T20:23:54  *** cloudkiller has quit IRC
2015-05-04T20:23:55  *** sigmavirus24 has quit IRC
2015-05-04T20:23:55  *** d34dh0r53 has quit IRC
2015-05-04T20:24:07  <mordred> superbee: also - fwiw, you can do static file ansible inventories in json and yaml too
2015-05-04T20:24:12  <openstackgerrit> Michael Krotscheck proposed openstack/requirements: Updated oslo_middleware to 1.2.0  https://review.openstack.org/179926
2015-05-04T20:24:14  <mordred> superbee: they do not have to be ini
2015-05-04T20:24:19  *** hockeynut has quit IRC
2015-05-04T20:24:28  <superbee> mordred: so I have to say this is where the docs break down
2015-05-04T20:24:34  <superbee> mordred: everything I have read is ini
2015-05-04T20:24:35  <mordred> I believe they make all the docs ini because it's the easiest thing for people to do
2015-05-04T20:24:38  *** d34dh0r53 has joined #openstack-infra
2015-05-04T20:24:44  *** hockeynut has joined #openstack-infra
2015-05-04T20:24:46  <superbee> and honestly yaml is probably easier to read and I would likely just use that if I knew I could
2015-05-04T20:24:53  <mordred> I'm 99% sure you can do that
2015-05-04T20:24:58  <mordred> I _know_ you can for variables files
2015-05-04T20:25:04  *** cloudkiller has joined #openstack-infra
2015-05-04T20:25:06  <mordred> and for local facts
2015-05-04T20:25:14  <tchaypo> nibalizer: do you have specific concerns about zuul_cloner, or is it just the complexity?
2015-05-04T20:25:27  <mordred> superbee: I'll verify and get back to you
2015-05-04T20:25:29  <sdague> foobio: so I can force this back to http for my testing proxy, I'm just surprised
2015-05-04T20:25:29  <superbee> tchaypo: I think its "how do we make beaker and zuul_cloner play nice"
2015-05-04T20:25:35  *** sigmavirus24 has joined #openstack-infra
2015-05-04T20:25:38  <mordred> superbee: and yes- much docs hacking is no my TDL
2015-05-04T20:25:38  <superbee> tchaypo: importantly beaker should not run zuul-cloner imo
2015-05-04T20:26:04  <superbee> tchaypo: because that adds a weird dependency, Instead beaker should say "give me the thngs to use else use sane default" basically what devstack does
2015-05-04T20:26:10  *** tiswanso has joined #openstack-infra
2015-05-04T20:26:12  <mordred> ++
2015-05-04T20:26:14  <foobio> sdague: yeah, i believe crd doesn't kick in when you're supplying local javascript in the debugger console or something
2015-05-04T20:26:22  <mordred> I totally agree with superbee there ...
2015-05-04T20:26:28  <tchaypo> maybe I should step back and ask what problem zuul_cloner could be used to solve
2015-05-04T20:26:30  <mordred> "if I made one for you, use it, otherwise, do this"
2015-05-04T20:26:44  <superbee> tchaypo: it solves the problem of what should be tested
2015-05-04T20:26:55  *** e0ne has quit IRC
2015-05-04T20:27:02  <superbee> tchaypo: currently beaker doesn't really solve that at all and also doesn't give you a good interface to communicate your decisions to it
2015-05-04T20:27:03  <mordred> tchaypo: I think superbee is agreeing with you - that we shoudl not teach beaker about zuul cloner
2015-05-04T20:27:12  <sdague> foobio: crd?
2015-05-04T20:27:21  <mordred> but instead, should teach beaker how to deal with repos that have already been managed by zuul cloner (or anything else)
2015-05-04T20:27:24  <mordred> yeah?
2015-05-04T20:27:28  <superbee> mordred: ya
2015-05-04T20:27:32  <mordred> and I agree with that
2015-05-04T20:27:47  <superbee> and from what I am reading that is basically going to look like a hook to beaker the s_h_a thing that would do the correct thing for us and not beaker itself
2015-05-04T20:27:48  <mordred> that way the scripts run by beaker can look like things that want to clone and work with local things like people expect them to be
2015-05-04T20:28:22  <mordred> when they're run by $person on $laptop
2015-05-04T20:28:36  <openstackgerrit> Doug Hellmann proposed openstack-infra/release-tools: Do not automatically target bugs for stable releases  https://review.openstack.org/179447
2015-05-04T20:28:37  <openstackgerrit> Doug Hellmann proposed openstack-infra/release-tools: Add list_oslo_unreleased_changes.sh  https://review.openstack.org/179396
2015-05-04T20:28:37  <openstackgerrit> Doug Hellmann proposed openstack-infra/release-tools: Print release notes as part of releasing the library  https://review.openstack.org/179445
2015-05-04T20:28:38  <openstackgerrit> Doug Hellmann proposed openstack-infra/release-tools: Move get_last_tag to functions  https://review.openstack.org/179444
2015-05-04T20:29:20  *** dustins has quit IRC
2015-05-04T20:29:32  <tchaypo> as in, use these three local repos for these modules, but get HEAD for everything else?
2015-05-04T20:29:44  *** ociuhandu has quit IRC
2015-05-04T20:29:47  *** dustins has joined #openstack-infra
2015-05-04T20:29:53  *** Sukhdev has quit IRC
2015-05-04T20:30:11  <sdague> foobio: is there anything special about zuul's cert?
2015-05-04T20:30:25  *** e0ne has joined #openstack-infra
2015-05-04T20:30:26  <superbee> tchaypo: that would be one way, I think its probably easier to do all local repos or use HEAD for everything though
2015-05-04T20:30:42  <superbee> tchaypo: that way you get clear failure modes rather than seemingly random workingness
2015-05-04T20:30:47  *** jraim has quit IRC
2015-05-04T20:30:47  *** boris-42 has quit IRC
2015-05-04T20:30:49  *** kun_huang has quit IRC
2015-05-04T20:30:57  <superbee> "it works for module X but not Y, what is going on?:
2015-05-04T20:31:02  *** cyeoh has quit IRC
2015-05-04T20:31:03  *** apmelton has quit IRC
2015-05-04T20:31:08  *** Trozz has quit IRC
2015-05-04T20:31:25  *** dboik_ has quit IRC
2015-05-04T20:31:31  *** gondoi has quit IRC
2015-05-04T20:31:37  <openstackgerrit> Doug Hellmann proposed openstack-infra/release-tools: update make_library_stable_branch.sh to set defaultbranch  https://review.openstack.org/173919
2015-05-04T20:31:40  *** tiswanso has quit IRC
2015-05-04T20:31:54  *** Trozz has joined #openstack-infra
2015-05-04T20:32:00  *** Nakato has quit IRC
2015-05-04T20:32:13  *** tiswanso has joined #openstack-infra
2015-05-04T20:32:27  <superbee> mordred: last inventory question, shouldn't the --list and --host options imply no print(output_format_dict)?
2015-05-04T20:32:29  *** persia has quit IRC
2015-05-04T20:32:44  *** cloudkiller is now known as cloudnull
2015-05-04T20:32:54  <superbee> oh wait I see, thoseare passed to output_format_dict and it renders them and inventory depending, nvm
2015-05-04T20:32:54  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Switch tasks vs put on a boolean config flag  https://review.openstack.org/178886
2015-05-04T20:33:11  *** Nakato has joined #openstack-infra
2015-05-04T20:33:18  <mordred> superbee: ^^ fixed your comment - good call on the confusing
2015-05-04T20:33:42  <superbee> mordred: I just read it and its "use task manager, use tasks for uploads"
2015-05-04T20:33:43  *** hockeynut has quit IRC
2015-05-04T20:33:43  *** jraim has joined #openstack-infra
2015-05-04T20:33:48  <superbee> and went wait a minute
2015-05-04T20:33:56  *** foobio has quit IRC
2015-05-04T20:34:03  *** persia has joined #openstack-infra
2015-05-04T20:34:03  *** persia has quit IRC
2015-05-04T20:34:03  *** persia has joined #openstack-infra
2015-05-04T20:34:07  *** jvrbanac has quit IRC
2015-05-04T20:34:10  *** apmelton has joined #openstack-infra
2015-05-04T20:34:15  *** hockeynut has joined #openstack-infra
2015-05-04T20:34:15  *** unicell has joined #openstack-infra
2015-05-04T20:34:22  *** julim has quit IRC
2015-05-04T20:34:25  *** tchaypo has quit IRC
2015-05-04T20:34:27  *** cyeoh has joined #openstack-infra
2015-05-04T20:34:42  *** d34dh0r53 has quit IRC
2015-05-04T20:34:45  *** sigmavirus24 has quit IRC
2015-05-04T20:34:48  *** gondoi has joined #openstack-infra
2015-05-04T20:34:52  *** dboik has joined #openstack-infra
2015-05-04T20:34:57  *** kun_huang has joined #openstack-infra
2015-05-04T20:35:01  *** jvrbanac has joined #openstack-infra
2015-05-04T20:35:04  *** d34dh0r53 has joined #openstack-infra
2015-05-04T20:35:10  <superbee> mordred: actually one more question :) why are you using flamel? yaml.dump(thing, default_flow_style=False) should work too right?
2015-05-04T20:35:17  <openstackgerrit> Doug Hellmann proposed openstack-infra/release-tools: Add script to update .gitreview files  https://review.openstack.org/174594
2015-05-04T20:35:26  *** foobio has joined #openstack-infra
2015-05-04T20:35:34  *** sigmavirus24 has joined #openstack-infra
2015-05-04T20:36:22  *** boris-42 has joined #openstack-infra
2015-05-04T20:36:49  <mordred> superbee: flamel does a few other things that are important that I did not want to cargo cult in - most importantly it manages unicode representaiton and also knows how to deal with ordereddicts
2015-05-04T20:37:21  *** tchaypo has joined #openstack-infra
2015-05-04T20:37:27  <superbee> ok
2015-05-04T20:37:30  <mordred> superbee: granted, it's only 14 lines of python - but it's in a library, so why not :)
2015-05-04T20:37:37  <tchaypo> woo, that was fun
2015-05-04T20:37:38  <superbee> out of curiousity what unicode things need to be done? it should all be utf8
2015-05-04T20:37:45  <mordred>     def unicode_representer(dumper, uni):
2015-05-04T20:37:45  <superbee> and pyyaml will handle ^ for you
2015-05-04T20:37:46  <mordred>         node = yaml.ScalarNode(tag=u'tag:yaml.org,2002:str', value=uni)
2015-05-04T20:37:48  <mordred>         return node
2015-05-04T20:37:54  <tchaypo> I love it when I randomly miss 10 minutes or irc in the middle of conversation
2015-05-04T20:38:10  <superbee> mordred: I am not sure that is necessary
2015-05-04T20:38:17  <superbee> mordred: but ok
2015-05-04T20:38:31  <mordred> superbee: I believe I hit it - it's possible it isnt' - I'll go back and figure it out
2015-05-04T20:38:35  <superbee> yaml strings are always utf8
2015-05-04T20:38:52  <superbee> unless you do other crazness which we arne't
2015-05-04T20:39:08  <mtreinish> lifeless: fwiw, I use arch linux on most of my machines and pbr works fine :)
2015-05-04T20:39:11  <mordred> superbee: these strings don't necessarily always come from a sane place
2015-05-04T20:39:59  <foobio> sdague: yep, wrong/incorrect chain... fixing now
2015-05-04T20:40:40  <superbee> mordred: hrm how do you handle ordered dict? either you serialize to regular dict and lose ordering or you serialize a python object which yaml should already know how to do
2015-05-04T20:40:44  *** fawadkhaliq has joined #openstack-infra
2015-05-04T20:41:13  *** dizquierdo has joined #openstack-infra
2015-05-04T20:41:18  <superbee> (or I suppose some third representation that only a special yaml loader can load)
2015-05-04T20:41:20  <openstackgerrit> Ramy Asselin proposed openstack-infra/puppet-openstackci: Create a log server like http://logs.openstack.org  https://review.openstack.org/167425
2015-05-04T20:41:22  <mordred> superbee: the first - serialize to a regular dict and lose ordering
2015-05-04T20:41:47  <mordred> superbee: if you serilize to a representaiton, then you could only load back into python with pyyaml
2015-05-04T20:42:03  <superbee> mordred: correct, but the alternative is to lose ordering which is supposedly important
2015-05-04T20:42:12  <mordred> well, you don't actually lose ordering it turns out
2015-05-04T20:42:13  <superbee> both seem bad
2015-05-04T20:42:24  <mordred> in the flamel case
2015-05-04T20:42:37  <superbee> mordred: you should, python hashes starting with python3 (and any use of tox) have random seeds
2015-05-04T20:43:23  <mordred> right. so - this is mainly to keep things human readable - not to keep actual important data an ordered fashion
2015-05-04T20:43:42  *** zz_jgrimm has quit IRC
2015-05-04T20:43:44  <mordred> so far it's working to output the stuff in a mostly sane order -  i"m not 100% how that's working
2015-05-04T20:44:03  <openstackgerrit> Ramy Asselin proposed openstack-infra/puppet-openstackci: Simple script to setup and test log server  https://review.openstack.org/169117
2015-05-04T20:44:05  <mordred> but in flamel's case, it means when you read the json in and then write it back out as yaml, the keys are in pretty much teh same arragement
2015-05-04T20:44:10  <mordred> and vice versa
2015-05-04T20:44:10  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: use optimized url for zuul status  https://review.openstack.org/170935
2015-05-04T20:44:10  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: add dbg function to hideci  https://review.openstack.org/179573
2015-05-04T20:44:11  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: add jquery visibility  https://review.openstack.org/179362
2015-05-04T20:44:11  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: create proxy for testing hideci  https://review.openstack.org/179360
2015-05-04T20:44:12  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: Revert "Revert zuul status in gerrit"  https://review.openstack.org/179361
2015-05-04T20:44:24  *** maurosr has quit IRC
2015-05-04T20:44:27  <sdague> foobio: cool, thank you
2015-05-04T20:44:48  <sdague> greghaynes: so... I think there isn't a sufficiently better interface for dbg atm given the contraints of js
2015-05-04T20:45:14  <sdague> so how do you feel about just living with the slightly wonky interface for now, which is at least useful
2015-05-04T20:45:34  <superbee> mordred: it looks like flamel also ships a loader that preserves order, but it does so by assuming all dicts are ordered from what I can tell
2015-05-04T20:45:41  <superbee> mordred: either way we lose some data
2015-05-04T20:45:52  *** e0ne has quit IRC
2015-05-04T20:45:59  *** sdake has joined #openstack-infra
2015-05-04T20:46:02  <sdague> foobio: also, in this go around of all these patches I put all the zuul embedded logic behind a kill switch - https://review.openstack.org/#/c/179361/6/modules/openstack_project/files/gerrit/hideci.js,cm
2015-05-04T20:46:05  *** maurosr has joined #openstack-infra
2015-05-04T20:46:13  <sdague> so flipping it off is a single global
2015-05-04T20:46:15  <greghaynes> sdague: oh, my specific suggestion was to use console.log(arguments[0]); and start the for loop at 1 and do console.dir(arguments[i]);
2015-05-04T20:46:17  <sdague> if it's wrong
2015-05-04T20:46:26  *** markvan__ is now known as markvan
2015-05-04T20:46:33  <sdague> greghaynes: ok, what does that buy us?
2015-05-04T20:46:35  *** zz_jgrimm has joined #openstack-infra
2015-05-04T20:46:43  <mordred> superbee: yah. in this case I mainly wanted to make sure that we weren't outputting unreadable pyyaml unicode tags - I don't think the ordereing really comes in to play
2015-05-04T20:46:51  <mordred> at least not for the inventory output thing
2015-05-04T20:46:54  <superbee> mordred: ok
2015-05-04T20:46:56  <nibalizer> tchaypo: I think we should use zuul_cloner
2015-05-04T20:46:58  <greghaynes> sdague: youll always get a nagivable object in the case youre using - using console.log doesnt necessarially give you that
2015-05-04T20:47:00  <sdague> because console.log(obj) does a useful thing, at least in chrome
2015-05-04T20:47:06  <nibalizer> but I want to advocate early for ensuring a happy path forward for local development
2015-05-04T20:47:07  <sdague> oh, it's always doing it here
2015-05-04T20:47:14  <mordred> superbee: but you're right - I'll go verify a few of those things because I'm curious now
2015-05-04T20:47:20  *** hasharAway is now known as hashar
2015-05-04T20:47:22  <greghaynes> sdague: yes, apparently that depends on argument type and browser
2015-05-04T20:47:34  <sdague> well, all of the interface does :)
2015-05-04T20:47:49  <sdague> console is kind of a ghetto interface that no one standardized
2015-05-04T20:48:32  <greghaynes> sdague: yes, supposedly .dir is consistent about giving you an object though. Im not hugely bent on it I just know ive run into a lot of cases of "huh, why am I all of a sudden not getting an object"
2015-05-04T20:48:49  *** samueldmq_ has joined #openstack-infra
2015-05-04T20:48:58  *** amitgandhinz has quit IRC
2015-05-04T20:49:11  <sdague> ok
2015-05-04T20:49:21  <greghaynes> sdague: not sure if you saw https://review.openstack.org/#/c/170935/ ye
2015-05-04T20:49:21  *** pabelanger has quit IRC
2015-05-04T20:49:37  *** sdake_ has quit IRC
2015-05-04T20:49:42  <greghaynes> sdague: my brain hurt reasoning that one out, so let me know if it makes sense
2015-05-04T20:50:05  *** mrmartin has quit IRC
2015-05-04T20:50:44  <jogo> greghaynes: FYI one of your wheel patches needs a rebase https://review.openstack.org/#/c/164927/
2015-05-04T20:50:45  <sdague> so... yeh, the challenge is the following....
2015-05-04T20:51:05  <tchaypo> nibalizer: why do you think we should use it?
2015-05-04T20:51:12  <greghaynes> jogo: oy
2015-05-04T20:51:16  <greghaynes> jogo: again :(
2015-05-04T20:51:17  <sdague> we trigger a timer loop for zuul polling based on the current url
2015-05-04T20:51:28  <jogo> greghaynes: yeah :(
2015-05-04T20:51:46  <sdague> which self propogates, because javascript doesn't have threads
2015-05-04T20:51:58  <sdague> if you navigate to a different url
2015-05-04T20:52:08  *** sdake_ has joined #openstack-infra
2015-05-04T20:52:18  <sdague> when the current request cycles back around it needs to realize "oh, we're not there any more, stop"
2015-05-04T20:52:39  <sdague> if you have a better suggestion on how to structure that code, please pastebin or post a solution
2015-05-04T20:52:45  <sdague> because... thems as good as I got
2015-05-04T20:52:46  <greghaynes> sdague: ah. So that part is desired. What about the visibility interaction though?
2015-05-04T20:52:56  <greghaynes> I didnt realize that was a feature though ;)
2015-05-04T20:53:41  <sdague> you are right, we want to restart that on a return to visible
2015-05-04T20:53:52  <sdague> oh, we do that
2015-05-04T20:53:58  <sdague> #516
2015-05-04T20:54:04  <sdague> we just start the top loop again
2015-05-04T20:54:06  <asselin__> nibalizer, I made the change to ::jenkins but I think it will fail b/c it's not merged yet. Let's do these one at a time
2015-05-04T20:54:07  <zaro> superbee: i'm seeing something odd with gearman.
2015-05-04T20:54:24  <asselin__> nibalizer, so I plan to revert back...let me know your opinion though...
2015-05-04T20:54:25  <nibalizer> asselin__: okay let me review
2015-05-04T20:54:26  <greghaynes> sdague: ah! ok. I think that has some race issues then
2015-05-04T20:54:37  <sdague> yeh, for visibility that was a jeblair requested feature that if the tab goes hidden in the browser that we stop polling
2015-05-04T20:54:39  <zaro> superbee: i send a job to the server and keep the connection until job ends and that works fine.
2015-05-04T20:54:48  <sdague> so we aren't adding load for hidden tabs
2015-05-04T20:54:58  <sdague> greghaynes: probably :)
2015-05-04T20:55:08  <greghaynes> sdague: I think if you flip between tabs before the timeout occurs you end up with two loops
2015-05-04T20:55:26  *** fawadkhaliq has quit IRC
2015-05-04T20:55:27  <openstackgerrit> Jeremy Stanley proposed openstack-infra/puppet-zuul: Correct the variable for the chain cert  https://review.openstack.org/179935
2015-05-04T20:55:28  <foobio> sdague: ^ i finally tracked the typo back through all my puppeghetti
2015-05-04T20:55:30  <sdague> greghaynes: yeh
2015-05-04T20:55:31  *** miqui has quit IRC
2015-05-04T20:55:35  <zaro> superbee: when i send a job to the server without keeping a connection then the server reponds with NO_JOB
2015-05-04T20:55:35  *** salv-orlando has joined #openstack-infra
2015-05-04T20:55:39  <sdague> it's not the end of the world though
2015-05-04T20:55:46  <nibalizer> asselin__: you mean in line 30 of https://review.openstack.org/#/c/167425/10/manifests/logserver.pp ?
2015-05-04T20:55:55  <superbee> zaro: ya, if you disconnect from the server then the server assumes you are no longer valid
2015-05-04T20:55:56  <zaro> superbee: but clearly the job is registered.
2015-05-04T20:56:00  *** sdake has quit IRC
2015-05-04T20:56:03  <asselin__> nibalizer, yes
2015-05-04T20:56:10  <superbee> zaro: and es it doesn't unregister the job
2015-05-04T20:56:11  <foobio> sdague: i'm _shockec_ (okay not really) that my browser didn't just asplode all over that error
2015-05-04T20:56:25  <zaro> superbee: the job doesn't get executed
2015-05-04T20:56:32  <sdague> foobio: go go SSL?
2015-05-04T20:56:43  <zaro> superbee: in the past the job would get executed.
2015-05-04T20:56:47  <nibalizer> asselin__: why would that fail? there is a jenkins class in the jenkins module now right?
2015-05-04T20:56:57  <sdague> yeh, that's not making me feel super excited about security of browsers :)
2015-05-04T20:57:12  <superbee> zaro: I think the job should stop running if it started
2015-05-04T20:57:30  <waynr> superbee greghaynes (or anyone) interested in pairing on github/zuul integration work? I am at the point where zuul is sending jobs to gearman based on updates to PRs but i'm not sure why the zuul log doesn't seem to reference job names...maybe it's not supposed to
2015-05-04T20:57:30  <sdague> greghaynes: so, do you have a suggestion on how to block that double update?
2015-05-04T20:57:49  <zaro> superbee: huh?  i expect the job to execute to completion.
2015-05-04T20:58:41  <zaro> superbee: does zuul keep a connection open for every job it sends to the gearman server?
2015-05-04T20:58:44  <asselin__> nibalizer, there's a jenkinsuser.pp
2015-05-04T20:58:56  <asselin__> which is what I had before...right?
2015-05-04T20:59:05  <greghaynes> sdague: let me poke at it a bit, it takes me a little while to reason about that bit of code ;)
2015-05-04T20:59:15  <superbee> zaro: no, zuul has one connection to the server iirc then the server has one connection per job
2015-05-04T20:59:17  *** bswartz has quit IRC
2015-05-04T20:59:27  <superbee> zaro: if a worker connection goes away then server tells client that job failed
2015-05-04T20:59:36  *** spzala has quit IRC
2015-05-04T21:00:15  <zaro> superbee: ohh yeah.  that makes sense.  I'm referring to connection from client to server.
2015-05-04T21:00:21  *** kgiusti has left #openstack-infra
2015-05-04T21:00:38  <waynr> superbee: do you have any advice for monitoring/inspecting the gearman queue?
2015-05-04T21:00:44  <mordred> waynr: neat!
2015-05-04T21:00:55  <asselin__> nibalizer, back in a bit....
2015-05-04T21:00:56  *** Sukhdev has joined #openstack-infra
2015-05-04T21:00:57  * mordred isn't going to be helpful - it purely just waiting for the day that work magically makes his life better
2015-05-04T21:01:03  <zaro> superbee: client sends job to zuul.  worker sends GRAB_JOB server reponds with NO_JOB
2015-05-04T21:01:04  <superbee> waynr: connect to gearman via telent/nc and run status against it to get a full listing
2015-05-04T21:01:12  <mordred> and with that - I'm going to the airport - I'll be back online in a bit
2015-05-04T21:01:17  <superbee> waynr: you can also configure it to emit graphite events and track things with graphite
2015-05-04T21:01:44  <waynr> okay i'll give that a shot
2015-05-04T21:01:47  <zaro> superbee: here's my simple client: https://github.com/zaro0508/gearman-plugin-client/blob/master/gear_client.py
2015-05-04T21:02:13  *** luqas has joined #openstack-infra
2015-05-04T21:02:26  *** hdd has quit IRC
2015-05-04T21:02:34  <openstackgerrit> Merged openstack/requirements: Follow project renames  https://review.openstack.org/179706
2015-05-04T21:02:39  <waynr> superbee: just FYI, looking at my 'lsof' output it seems like gearman keeps one connection open per worker (rather than one per job)
2015-05-04T21:03:11  <zaro> superbee: here's the log http://paste.openstack.org/show/214898/
2015-05-04T21:03:39  <zaro> superbee: this definately used to work. so i'm guessing there is some regression going on.
2015-05-04T21:03:41  <superbee> waynr: sorry, ya that is correct
2015-05-04T21:04:22  <zaro> superbee: i'm not sure how any jobs run because i'm pretty sure zuul sends jobs to gearman server just like this.
2015-05-04T21:04:57  <foobio> sdague: looks like the version of firefox i'm running has the ca that signed our zuul cert in its trust ring, and since apache was serving two copies of the server cert (rather than the server cert plus the chain cert) the browser probably just ignored one of them
2015-05-04T21:05:04  <superbee> zaro: zuul alwys has a persistent connection
2015-05-04T21:05:14  *** tonytan4ever has quit IRC
2015-05-04T21:05:16  <sdague> foobio: gotcha
2015-05-04T21:05:42  <sdague> hey, slightly off topic, but does anyone have a link to where the ops tracks are listed with time slots?
2015-05-04T21:06:08  <lifeless> sdague: https://libertydesignsummit.sched.org/ ?
2015-05-04T21:06:48  <lifeless> sdague: https://docs.google.com/spreadsheets/d/1VsFdRYGbX5eCde81XDV7TrPBfEC7cgtOFikruYmqbPY/edit#gid=569963128 has rooms but not topics
2015-05-04T21:06:59  <sdague> lifeless: yep, thank you
2015-05-04T21:07:00  *** luqas has quit IRC
2015-05-04T21:07:10  <superbee> ok comments on https://review.openstack.org/#/c/175891/ not sure if any of them are worth a -1
2015-05-04T21:07:11  <sdague> the sched link seems useful enough
2015-05-04T21:07:14  <waynr> hmm it's not obvious to me how projects specified in layout.yaml get mapped to gearman functions and how gearman knows how many of its workers are capable of running each job
2015-05-04T21:07:16  <superbee> Shrews: mordred SpamapS ^ feedback appreciated
2015-05-04T21:07:25  <superbee> waynr: the names must match
2015-05-04T21:07:34  <superbee> waynr: basically the name specific in layout.yaml is the gearman function name
2015-05-04T21:07:44  <zaro> superbee: hmm, ok. more debugging..
2015-05-04T21:07:47  <lifeless> sdague: http://libertydesignsummit.sched.org/type/design+summit/ops#.VUffnN_va00 may be better
2015-05-04T21:08:16  *** ldnunes has quit IRC
2015-05-04T21:08:31  <SpamapS> superbee: I was just reviewing that right now as well.
2015-05-04T21:09:09  <openstackgerrit> Emilien Macchi proposed openstack-infra/system-config: Create rubygems mirror from rubygems.org  https://review.openstack.org/178026
2015-05-04T21:09:45  <waynr> superbee: i see functions that match the names i have specified in my layout.yaml, but I also see functions that exist nowhere in my project.yaml such as "merger:update", and I'm not sure which part of that job name actually needs to exist on my jenkins masters
2015-05-04T21:09:50  <openstackgerrit> Darragh Bailey proposed openstack-infra/git-review: Use plumbing rev-parse to get the branch name  https://review.openstack.org/179937
2015-05-04T21:09:55  <mordred> superbee: I think they're worth fixing. new patch coming soon
2015-05-04T21:10:00  <EmilienM> superbee, nibalizer: does it make sense if I file a bug for latest beaker not working? I would like to investigate more
2015-05-04T21:10:10  <openstackgerrit> Samuel de Medeiros Queiroz proposed openstack-infra/project-config: Experimental Devstack job for Identity v3 API only  https://review.openstack.org/179661
2015-05-04T21:10:10  <superbee> waynr: merger:update is a merger function registered by the merger worker
2015-05-04T21:10:10  <sdague> lifeless: they say Ops: so I was able to get what I wanted out of it
2015-05-04T21:10:12  <SpamapS> mordred: I'm also looking at why it takes 10s... ;)
2015-05-04T21:10:13  <sdague> thanks again
2015-05-04T21:10:14  <EmilienM> not working (in OS infra)
2015-05-04T21:10:19  <superbee> waynr: you get that regardless of your layout.yaml
2015-05-04T21:10:34  <SpamapS> mordred: should take like 1s at the worst.
2015-05-04T21:10:40  <lifeless> sdague: cool
2015-05-04T21:10:40  <waynr> superbee: do i need to configure a specific worker as the "merger" worker?
2015-05-04T21:10:55  <superbee> waynr: layout.yaml does not register any functions, layout.yaml describes to the gearman client what functions to run on which events
2015-05-04T21:11:09  <superbee> waynr: your workers all register the functions for you. In this case likel jenkins and the merger worker
2015-05-04T21:11:14  <waynr> oh...so the workers register the functions?
2015-05-04T21:11:35  <superbee> waynr: its a separate service you run to merge things. Zuul may start one automagically for you like it starts the geard server though, check ps
2015-05-04T21:11:46  <waynr> okay
2015-05-04T21:11:49  <superbee> waynr: yes workers advertise what work can be done, clients select from those lists
2015-05-04T21:12:28  <waynr> so there is a gearman function showing up in my gearmand status that doesn't appear on any of my workers
2015-05-04T21:12:47  <greghaynes> sdague: How about just a todo comment about theres a known race here :)
2015-05-04T21:12:50  <waynr> but it is a name that exists as a result of the interpolation of variables into my zuul project template
2015-05-04T21:13:00  <greghaynes> sdague: then I can poke at it in a followup
2015-05-04T21:13:19  <sdague> greghaynes: I'm good with that
2015-05-04T21:13:50  <waynr> oh wait i'm wrong, there is no way that function comes from any of my layout.yaml sorry
2015-05-04T21:14:37  <openstackgerrit> Samuel de Medeiros Queiroz proposed openstack-infra/project-config: Experimental Devstack job for Identity v3 API only  https://review.openstack.org/179661
2015-05-04T21:14:44  <samueldmq> mordred, ^ project config patch is now updated to use DEVSTACK_LOCAL_CONFIG, thanks
2015-05-04T21:15:11  *** dustins has quit IRC
2015-05-04T21:15:25  *** amitgandhinz has joined #openstack-infra
2015-05-04T21:15:34  <foobio> superbee: waynr: technicality, but zuul (the scheduled daemon) doesn't start the merger daemon, that's generally a second initscript
2015-05-04T21:15:34  <waynr> superbee: so zuul will register gearman workers for stuff like "merger:update"
2015-05-04T21:15:43  <waynr> oh
2015-05-04T21:15:50  <foobio> s/scheduled/scheduler/
2015-05-04T21:16:27  <mordred> samueldmq: woot!
2015-05-04T21:16:43  <waynr> i'm confused right now about where some of these gearman functions are coming from and why zuul doesn't seem to try to run jobs named in my layout.yaml for the particular project I am updating
2015-05-04T21:16:48  <foobio> waynr: those merger:.* functions are registered by the separate zuul-merger daemon which is running
2015-05-04T21:17:00  <waynr> ooohhh
2015-05-04T21:17:33  <waynr> well i didn't start any zuul-merger daemon just FYI
2015-05-04T21:18:01  <superbee> right which is why I think zuul may fork one off for you
2015-05-04T21:18:06  *** mmedvede has quit IRC
2015-05-04T21:18:07  <superbee> or run it internally
2015-05-04T21:18:12  <foobio> if it does, that's a new change
2015-05-04T21:18:25  <foobio> we still start ours from a separate zuul-merger initscript
2015-05-04T21:18:58  <openstackgerrit> Sean Dague proposed openstack-infra/system-config: use optimized url for zuul status  https://review.openstack.org/170935
2015-05-04T21:19:04  <sdague> there you go greghaynes
2015-05-04T21:19:10  <sdague> I hope you appreciate the comment :)
2015-05-04T21:19:11  <foobio> last i looked the only separate daemon process forked by the zuul scheduler daemon was the internalized geard
2015-05-04T21:19:22  <superbee> quick grep says we don't fork a different process
2015-05-04T21:19:29  *** hdd has joined #openstack-infra
2015-05-04T21:19:43  <greghaynes> haha
2015-05-04T21:20:25  *** hdd has quit IRC
2015-05-04T21:20:49  <waynr> superbee foobio that makes sense, because the merger:update function has 2 queued jobs that don't seem to be leaving the queue
2015-05-04T21:21:10  <waynr> so there is no worker actually accepting those jobs
2015-05-04T21:21:13  <foobio> waynr: and no workers? you probably need to start the zuul-merger daemon
2015-05-04T21:21:47  <waynr> okay, but i'm not sure i want anything merged by zuul...just want to run tests on jenkins based on PR updates
2015-05-04T21:22:07  *** eharney has quit IRC
2015-05-04T21:22:12  <foobio> waynr: you do want things merged by zuul. the zuul-merger is what serves the merged testing refs to your workers
2015-05-04T21:22:22  <foobio> so they have something to test
2015-05-04T21:22:40  <foobio> the zuul-merger creates your zuul refs
2015-05-04T21:22:42  <superbee> ya github doesnt solve this problem for you
2015-05-04T21:22:59  <waynr> oh, i think i see what you're saying
2015-05-04T21:23:30  <waynr> because there may be multiple open PRs that could be merged
2015-05-04T21:23:43  <foobio> for example you proposed patch x to branch y, the zuul merger attempts to merge x to a local clone of y and then that gets served as ref z
2015-05-04T21:23:55  *** blahdeblah has left #openstack-infra
2015-05-04T21:24:05  <foobio> and the jenkins workers check out that ref to run jobs
2015-05-04T21:24:12  <nibalizer> github does expose those refs for you, per PR
2015-05-04T21:24:23  <nibalizer> its right there in the api "merge commit ref" or something
2015-05-04T21:24:32  *** wenlock has joined #openstack-infra
2015-05-04T21:24:40  <superbee> nibalizer and those update as masyer moves?
2015-05-04T21:24:40  <nibalizer> doesn't help at gate time though, I think
2015-05-04T21:24:59  <nibalizer> superbee: i think so, but :shrug:
2015-05-04T21:25:22  <nibalizer> i know i've never pressed the green button and then github has said 'oops sorry I mean it can't merge'
2015-05-04T21:25:31  <waynr> yeah github has refs of the form "refs/pulls/<PR#>"
2015-05-04T21:25:36  <nibalizer> but none of the repos I merge on are very high velocity
2015-05-04T21:25:43  <greghaynes> nibalizer: but theres also the case of it can merge but tests fail because master moved
2015-05-04T21:25:49  *** radez is now known as radez_g0n3
2015-05-04T21:25:52  <superbee> that doesnt address deps though which is what you mean by gate I think
2015-05-04T21:25:54  <greghaynes> and you just werent testing that rebase
2015-05-04T21:25:59  <waynr> nibalizer: github usually tells you before you try to merge whether or not a change can be merged
2015-05-04T21:26:59  <waynr> since the merge target is usually a known ref, whenever that ref is updated github will check to see if open PRs can be merged and provide an indication of whether or not it they can on the PR page
2015-05-04T21:27:06  <waynr> s/usually/always/
2015-05-04T21:27:09  <foobio> nibalizer: are you saying there's a way to have github serve you the result which would be obtained from merging pr x to branch y as ref z without actually also merging x to y in the public repo and serving that to everyone as the new tip of y?
2015-05-04T21:27:23  <openstackgerrit> David Shrewsbury proposed openstack-infra/shade: Split security group list operations  https://review.openstack.org/179945
2015-05-04T21:27:37  <superbee> foobio ya but it wont do x depends on a because gate
2015-05-04T21:27:55  <waynr> foobio: I think we're saying that github does expose the result of merging x to y in the form of refs/pulls/<PR#>
2015-05-04T21:28:16  <foobio> well, it might if github prs can have dependencies specified in github, but as i avoid it for the most part i really don't know much about github's more esoteric workflow options
2015-05-04T21:28:57  <waynr> i don't think github has the concept of inter-project dependencies
2015-05-04T21:28:59  <greghaynes> I dont think theres a way
2015-05-04T21:29:05  <foobio> oh, i see, a way to request an arbitrary series of prs merged in order even when there's no dependency specified in github
2015-05-04T21:29:11  *** Krinkle|detached is now known as Krinkle
2015-05-04T21:29:14  <greghaynes> every time thats come up in a project ive just seen it done manually
2015-05-04T21:29:46  <superbee> you cpuld do it with zuul
2015-05-04T21:29:55  <nibalizer> foobio: I use this: http://paste.ubuntu.com/10986825/
2015-05-04T21:30:01  <superbee> and thats why you need mergers so gate works
2015-05-04T21:30:04  <waynr> also I think I have been talking about a simplified single-PR case...in the case of ordering multiple PRs and checked that they are merge/test compatible, that is a different story
2015-05-04T21:30:15  <foobio> yeah, so anyway, those are the things the zuul-merger process does, and i don't think we can replace any of that when using teh github trigger
2015-05-04T21:30:19  <nibalizer> so ill cd into puppet-postgresql, then pr 284 and it will checkout the code of that pull request
2015-05-04T21:30:25  <waynr> so yeah i agree, zuul would need to handle detection of dependencies between PRs
2015-05-04T21:31:31  <waynr> githubs's notion of PR allows one PR to be a subset of another PR since there can be multiple patches in a given PR, i'm not sure how the commit tree changes once the subset PR is merged into master
2015-05-04T21:31:52  <foobio> waynr: well, and ordering multiple prs is basically necessary in the gate pipeline because you may approve several at once and want to know that they don't break each other
2015-05-04T21:32:22  <foobio> waynr: so your simplified solution would be more like the check pipeline and then a no-op gate
2015-05-04T21:32:44  <foobio> i.e. independently test the pull requests, hope they don't have negative interactions when you approve them
2015-05-04T21:34:18  <waynr> so it seems like the reason my intended build jobs aren't running then is that the zuul-merger hasn't done its thing...time to play with that now i guess
2015-05-04T21:34:31  <foobio> waynr: and i doubt that's sufficient, since zuul lets you have more than one trigger for a pipeline, so you might be comingling prs from github with changes in gerrit on a single project
2015-05-04T21:35:04  <foobio> and would need to have them both support a common set of jobs in the same pipelines together
2015-05-04T21:35:13  *** jtriley has quit IRC
2015-05-04T21:35:49  *** mwagner_lap has quit IRC
2015-05-04T21:36:05  <waynr> i think my goal for now is to implement the simplified "either or" case where a project either has "github" trigger or "gerrit" trigger
2015-05-04T21:36:25  <waynr> i'm sure it should be possible to specify that kind of mutual exclusion in the layout schema
2015-05-04T21:36:56  <waynr> (to provide users immediate feedback if they try to use both styles of trigger on given pipeline)
2015-05-04T21:37:05  <waynr> unless i am misunderstanding zuul configuration
2015-05-04T21:37:29  <waynr> which i probably am
2015-05-04T21:38:22  <waynr> dang it's not even 3 yet
2015-05-04T21:38:53  <superbee> waynr: a single project will only ever come from one most likely, but it may be nice to mix projects on github and projects on gerrit together in the same pipeline for cogating. That said I don't think you need to support that off the bat if its more complicated
2015-05-04T21:39:09  <foobio> i think your options there are to document the exclusivity of those triggers in a pipeline, have zuul log an error if someone mistakenly adds both, and optionally refuse to load the config
2015-05-04T21:39:10  *** dkranz has quit IRC
2015-05-04T21:39:29  <waynr> yeah
2015-05-04T21:39:48  <foobio> enforcing that exclusivity in the voluptuous validation would probably be possible
2015-05-04T21:40:06  <waynr> that's what i'm hoping
2015-05-04T21:40:23  <foobio> which also makes it easier for someone to run a gate job validating their zuul layout to catch it
2015-05-04T21:40:29  *** samueldmq has quit IRC
2015-05-04T21:40:32  *** samueldmq_ is now known as samueldmq
2015-05-04T21:40:53  *** peristeri has quit IRC
2015-05-04T21:41:41  *** pc_m has quit IRC
2015-05-04T21:42:36  <waynr> i really prefer gerrit's notion of changes and patchsets over github pr's
2015-05-04T21:43:42  <superbee> ++
2015-05-04T21:44:19  <pleia2> ++
2015-05-04T21:45:03  *** dizquierdo has quit IRC
2015-05-04T21:49:19  <mtreinish> superbee, foobio: do you have any thoughts on: https://review.openstack.org/176564 I'm debating doing something like that vs spinning up a separate liberty db
2015-05-04T21:51:40  *** rfolco has quit IRC
2015-05-04T21:51:49  <superbee> mtreinish: is that going to take locks out on the db and prevent us from writing to it for long periods of time?
2015-05-04T21:52:27  *** Somay has quit IRC
2015-05-04T21:53:27  <mtreinish> superbee: honestly dunno, maybe, the sqlalchemy calls are here: http://git.openstack.org/cgit/openstack-infra/subunit2sql/tree/subunit2sql/db/api.py#n644
2015-05-04T21:54:05  <mtreinish> given our past experience everything gets to be kinda slow with the db at this size, I forget how long that last migration took
2015-05-04T21:54:30  *** _dguerri has quit IRC
2015-05-04T21:54:34  <foobio> hours. i too forget exactly
2015-05-04T21:54:49  *** zz_jgrimm has quit IRC
2015-05-04T21:55:01  *** zz_zz_ja has quit IRC
2015-05-04T21:56:33  <superbee> mtreinish: http://docs.sqlalchemy.org/en/improve_toc/orm/query.html check out the warning for snychronize_session there
2015-05-04T21:56:42  *** zz_jgrimm has joined #openstack-infra
2015-05-04T21:57:06  <superbee> mtreinish: I think its bascally gonna do a select for all the things that match the filter, then delete them
2015-05-04T21:57:14  <superbee> so at the very least it won't be super efficient
2015-05-04T21:57:29  *** samueldmq has quit IRC
2015-05-04T21:57:42  *** zz_ja has joined #openstack-infra
2015-05-04T21:58:39  <superbee> but I am noexpert here
2015-05-04T21:58:59  <superbee> just worried that it will be expensive. Worth noting that we drop an entire index per day with ES because thats cheap
2015-05-04T21:59:01  <mtreinish> superbee: yeah I remember reading that when I wrote the api call. I figured evaluate was the best tradeoff but I really didn't have enough background to weigh things well
2015-05-04T21:59:02  <openstackgerrit> Darragh Bailey proposed openstack-infra/git-review: Isolate tests from user/system git configuration  https://review.openstack.org/179954
2015-05-04T22:00:40  <mtreinish> superbee: yeah, I'm no expert either. I was just trying to come up with a solution so we don't run out of space on the trove node and this was my first thought
2015-05-04T22:00:46  *** dguerri has joined #openstack-infra
2015-05-04T22:02:27  *** dboik has quit IRC
2015-05-04T22:03:10  *** rbradfor has quit IRC
2015-05-04T22:06:19  *** rbradfor has joined #openstack-infra
2015-05-04T22:06:49  <foobio> mtreinish: i would say before going forward with something like 176564 we should probably do a couple manual runs, spaced as far apart as we're considering setting the cron job, and then time the second one
2015-05-04T22:06:53  *** harlowja_ has quit IRC
2015-05-04T22:07:17  *** harlowja has joined #openstack-infra
2015-05-04T22:07:37  <foobio> and also try to pick a trough time in the historical activity graphs to minimize impact
2015-05-04T22:07:40  *** zz_ja has quit IRC
2015-05-04T22:07:55  *** gordc has quit IRC
2015-05-04T22:08:55  <mtreinish> foobio: sure, that sounds like a good idea
2015-05-04T22:09:24  <mtreinish> if I've learned anything around this db it's that the automation never works the first time anyway :)
2015-05-04T22:09:34  *** zz_jgrimm has quit IRC
2015-05-04T22:09:48  *** mmedvede has joined #openstack-infra
2015-05-04T22:10:06  <mtreinish> foobio: but you think the db pruning approach is the way to go over spinning up a second db or something else?
2015-05-04T22:10:08  <foobio> (and often not the second or third either)
2015-05-04T22:10:26  <mtreinish> foobio: heh, yep
2015-05-04T22:10:36  <foobio> i hadn't previously considered adding more databases, but i suppose that could be engineered
2015-05-04T22:11:16  *** maurosr has quit IRC
2015-05-04T22:11:28  <waynr> wooo with zuul-merger running jobs are correctly triggered
2015-05-04T22:11:38  <superbee> waynr: woot
2015-05-04T22:12:11  *** otter768 has joined #openstack-infra
2015-05-04T22:12:14  *** zz_jgrimm has joined #openstack-infra
2015-05-04T22:13:15  <waynr> so how does zuul get the merged branch to the jenkins jobs?
2015-05-04T22:13:38  <foobio> mtreinish: unfortunately any automation around creating and removing the trove instances themselves, if it were only exercised every 6 months, would probably bitrot and break between every invocation
2015-05-04T22:13:56  <foobio> so per-cycle databases would likely be a manual process to add and remove
2015-05-04T22:14:43  <superbee> waynr: the zuul merger has created a zuul ref for you in the repo with that change something like refs/zuul/Zsomesha1, you then have to serve this to your workers in a manner that makes sense for you
2015-05-04T22:14:44  *** zz_ja has joined #openstack-infra
2015-05-04T22:14:44  *** maurosr has joined #openstack-infra
2015-05-04T22:15:10  <foobio> mtreinish: how about renaming tables in the existing database? start writing new data to empty tables and then prune down the old tables which shouldn't block on other writes at that point?
2015-05-04T22:15:10  <waynr> okay that part might not be functional at the moment
2015-05-04T22:15:12  <superbee> waynr: zuul also drops info on the location of where to get the refs in the zuul's job params, and its configurable as far as what base url (including protocol) to use
2015-05-04T22:15:34  <superbee> waynr: we serve via http with apache sitting in front of our zuul mergers but ssh:// should work as well as git:// iirc
2015-05-04T22:15:50  <foobio> mtreinish: i have no idea if that's any more or less optimized than trying to prune the tables to which you're appending
2015-05-04T22:16:11  <mtreinish> foobio: heh, yeah that's a fair point I don't want to introduce another manual process if I can help it. I mean it was just an alternate idea I was floating around
2015-05-04T22:16:36  *** otter768 has quit IRC
2015-05-04T22:16:47  <mtreinish> foobio: oh, that's an interesting idea. Yeah I don't know if that would be more efficient or not
2015-05-04T22:16:57  *** zz_jgrimm has quit IRC
2015-05-04T22:17:10  <foobio> mtreinish: also splitting your data across multiple databases means you stop being able to use one sql query to access all your data and have to perform potentially heavy (depending on your use case) post-query correlation work
2015-05-04T22:17:31  <mtreinish> it would also make dumping the delete stuff into a subunit2sql command a bit more complicated since it wouldn't know about the renamed table
2015-05-04T22:17:46  *** ayoung is now known as ayoung-dadmode
2015-05-04T22:17:47  <mtreinish> unless I added a migration to create that table
2015-05-04T22:17:47  <foobio> at least in the trove server-per-database model
2015-05-04T22:19:00  <mtreinish> foobio: yeah, that's what I was thinking. I mean the only reason to do the split would be because of resource limitations on a server. (I can live with some slow queries because of the table size)
2015-05-04T22:19:29  <mtreinish> my assumption was that it would make correlation difficult, but each db would be an isolated data set for a release
2015-05-04T22:19:32  *** maurosr has quit IRC
2015-05-04T22:19:56  *** zz_jgrimm has joined #openstack-infra
2015-05-04T22:20:14  <mtreinish> so you probably wouldn't need to do direct mapping between dbs
2015-05-04T22:20:21  <jeblair> foobio: do you know if trove supports the federated engine?
2015-05-04T22:20:34  *** amitgandhinz has quit IRC
2015-05-04T22:20:43  *** ildikov has quit IRC
2015-05-04T22:20:44  *** maurosr has joined #openstack-infra
2015-05-04T22:20:46  <foobio> jeblair: absolutely no idea whatsoever
2015-05-04T22:21:03  <mtreinish> just thinking out loud about this, not actually sure about anything
2015-05-04T22:21:15  <jeblair> mtreinish, foobio: subunit2sql uses innodb, right?
2015-05-04T22:21:15  <foobio> jeblair: i didn't even realize that was a thing until you just mentioned it
2015-05-04T22:21:20  <mtreinish> jeblair: yeah
2015-05-04T22:21:52  <foobio> "storage engine that accesses data in tables of remote databases rather than in local tables"
2015-05-04T22:21:55  <foobio> neat idea
2015-05-04T22:22:00  <jeblair> if we used myisam, we could use the merge engine.  that might be okay with this dataset.  but if we want to stick with innodb, i think merge is not available, but federated would work
2015-05-04T22:22:02  *** mwagner_lap has joined #openstack-infra
2015-05-04T22:22:39  <mtreinish> jeblair: well iirc I have a migration test which makes sure all the created tables get set to innodb, which is only there because I copy and pasted most of the test from nova
2015-05-04T22:22:53  <mtreinish> I remember mordred telling me myisam might be a better fit for some of the tables
2015-05-04T22:22:54  <jeblair> and can be used to set up a sharding system where we put, say, one month worth of data in a database at a time, but can query the whole set transparently, and then drop those databases as we want
2015-05-04T22:23:17  <jeblair> mordred: ^ may have more input
2015-05-04T22:29:53  <waynr> superbee: so when i cd to the directory where zuul-merger cloned my project, I don't see any reffs named 'refs/zuul/*'
2015-05-04T22:30:24  <mordred> aroo
2015-05-04T22:30:28  <mordred> reading
2015-05-04T22:31:31  <mordred> OK. yes, it's likely a great choice for subunit2sql, don't use federated
2015-05-04T22:31:46  <mordred> myisam and merge, likely great choice
2015-05-04T22:31:58  *** spzala has joined #openstack-infra
2015-05-04T22:32:07  <superbee> waynr: nothing in .git/refs/zuul?
2015-05-04T22:32:11  <mordred> on phone, will write more in a bit
2015-05-04T22:32:28  <mtreinish> mordred: ok, I can push up a patch to add a migration to convert the tables from innodb to myisam
2015-05-04T22:32:35  * mtreinish can't wait to see how long that'll take
2015-05-04T22:32:51  *** mmedvede has quit IRC
2015-05-04T22:32:55  <mordred> rbradford: around? wanna chat with mtreinish here?
2015-05-04T22:33:05  <foobio> mtreinish: assuming there's even sufficient space on the instance?
2015-05-04T22:33:13  <mordred> mtreinish: we'll get fancy
2015-05-04T22:33:17  *** aysyd has quit IRC
2015-05-04T22:33:25  <mordred> these are all append only, right?
2015-05-04T22:33:40  <mordred> and you want to roll old rows off eventually?
2015-05-04T22:33:58  *** ildikov has joined #openstack-infra
2015-05-04T22:33:59  <mtreinish> mordred: a few tables are append only, one isn't
2015-05-04T22:34:17  <mordred> kk. let me look more deeply on laptop in 20
2015-05-04T22:34:32  <waynr> superbee: nada
2015-05-04T22:34:46  <superbee> waynr: hrm, you should check your zuul-merger logs then
2015-05-04T22:34:56  <superbee> waynr: it should log everything it did for that project when the change came in
2015-05-04T22:35:00  <mtreinish> mordred: yeah, that was the idea, I had a wip patch up now to do a cron delete on old rows on the append only tables
2015-05-04T22:35:04  <waynr> i'm watching them, running in non-daemonized mode
2015-05-04T22:35:33  <mtreinish> foobio: heh, well last time there was enough space, but trove didn't configure mysql to use all of it correctly
2015-05-04T22:35:48  <mtreinish> but yeah, we'd likely hit that again
2015-05-04T22:36:35  <superbee> waynr: so you should have a log that says "created ref blahblahblah
2015-05-04T22:36:40  <mordred> kk
2015-05-04T22:36:41  <superbee> waynr: do you see anything like that?
2015-05-04T22:36:56  <waynr> nope
2015-05-04T22:37:38  <superbee> "2015-05-04 22:35:41,006 DEBUG zuul.Repo: CreateZuulRef master/Z755990147e834176a684021c571cd261 at 80c53f437fab2a5d0974b18dce720ef3a654d652" is an example from one of our mergers
2015-05-04T22:37:44  *** baoli has quit IRC
2015-05-04T22:38:29  <SlickNik> mtreinish: That sounds like a trove bug.  Any more information on it?
2015-05-04T22:38:34  <waynr> yeah i see where that log message gets emitted in the code, there must be something about my setup that prevents it from trying?
2015-05-04T22:39:04  <SlickNik> (sorry jumping in, and don't have all of the context — reading scrollback now)
2015-05-04T22:39:31  <superbee> waynr: ya it may be bailing before that for some reason? do you get lines for resetting repo, updating repo, checking out $REF?
2015-05-04T22:39:49  <superbee> waynr: those are the steps it does before it does a merge, OH! it may be trying to talk to gerrit there?
2015-05-04T22:39:56  <superbee> maybe?
2015-05-04T22:40:23  <waynr> superbee: oh it looks like it is only trying to run the "merge:update" job, not "merge:merge"
2015-05-04T22:40:30  <waynr> so it never reaches the merge codepath
2015-05-04T22:40:46  <superbee> waynr: ah ya, updates are there if you don't need a zuul ref and just need the latest code in place
2015-05-04T22:41:02  <waynr> what determines that?
2015-05-04T22:41:40  <superbee> waynr: merge is called when you have a thing that needs merging. Basic difference between the two, is you do an update for things like "test code that has already merged" eg ref updates or tags being made and you do merger:merge when you have unmerged code that is being proposed and needing to be tested. Eg new patchset or worflow +1
2015-05-04T22:42:22  <waynr> interesting
2015-05-04T22:42:27  <foobio> waynr: no errors logged by the zuul-merger about being unable to clone from review.openstack.org? (or whatever gerrit it's pointed at? or is this with some github mojo already?)
2015-05-04T22:43:11  <waynr> foobio: the zuul-merger is definitely cloneing correctly from github, it seems like that url got passed from the EventTrigger object I created during webhook handling
2015-05-04T22:43:38  <foobio> waynr: okay, so you can see where it has managed to clone the repos on disk at least
2015-05-04T22:43:45  <waynr> yeah
2015-05-04T22:43:58  <waynr> and it sorta makes sense that only merge:update is being run
2015-05-04T22:44:07  *** bknudson has quit IRC
2015-05-04T22:44:22  <mtreinish> SlickNik: oh, yeah IIRC it was the temp storage for mysql wasn't on the volume used for the general storage, so when I did an alter table to add a column it ran out of space
2015-05-04T22:44:26  *** cody-somerville has quit IRC
2015-05-04T22:45:04  <mtreinish> SlickNik: so we had to do this: https://review.openstack.org/#/c/164838/
2015-05-04T22:45:14  <mtreinish> SlickNik: I can dig up the irc logs from when we tried doing this
2015-05-04T22:46:26  <mtreinish> SlickNik: the details are in http://eavesdrop.openstack.org/irclogs/%23openstack-infra/%23openstack-infra.2015-03-16.log somewhere
2015-05-04T22:46:34  *** shashankhegde has joined #openstack-infra
2015-05-04T22:46:42  <mtreinish> I think we pinged you at one point, so maybe grep for SlickNik :)
2015-05-04T22:48:23  <SlickNik> mtreinish: Thanks much — that helps!
2015-05-04T22:48:39  <jhesketh> Morning
2015-05-04T22:50:43  * superbee remembers the pbr thing
2015-05-04T22:50:51  <lifeless> superbee: pbr thing?
2015-05-04T22:50:59  <superbee> dims: dhellmann mordred is there a good reason for having all of oslo-core be able to tag pbr releases?
2015-05-04T22:51:06  <lifeless> oh yeah
2015-05-04T22:51:16  <superbee> lifeless: ya, remembering the release trouble we had and that the acl was funny because ^
2015-05-04T22:51:17  <lifeless> I spotted that and WTF'd
2015-05-04T22:51:26  *** mattfarina has joined #openstack-infra
2015-05-04T22:51:36  <mordred> only because of Oslo association
2015-05-04T22:51:40  <lifeless> superbee: I'm in pbr-release now, thanks to dims but we should sort the other thing out
2015-05-04T22:51:44  <lifeless> all of oslo can't release all of oslo
2015-05-04T22:51:46  *** mattfarina has quit IRC
2015-05-04T22:51:50  <lifeless> but all of oslo can release pbr
2015-05-04T22:52:18  <openstackgerrit> Matthew Treinish proposed openstack-infra/subunit2sql: Add migration to convert append only tables to MyISAM  https://review.openstack.org/179964
2015-05-04T22:52:28  <mtreinish> mordred: ^^^ I doubt that will work as is...
2015-05-04T22:53:00  <mtreinish> oh and it'll definitely fail the mysql migration tests (because they check for innodb :) )
2015-05-04T22:53:32  <superbee> right having oslo-release be able to release pbr is fine, my question is why oslo-core too
2015-05-04T22:54:18  <lifeless> -> the list, better for tz's since dhellmann is already off for the night
2015-05-04T22:55:39  *** ZZelle_ has quit IRC
2015-05-04T22:55:40  <superbee> jeblair: btw, I don't see anything in gear that would make RESET_ABILITIES nuke a running job
2015-05-04T22:55:52  <lifeless> I'll send a mail
2015-05-04T22:55:54  <foobio> vague recollection is that originally oslo-core was a very small group handling a handful of libraries. fast forward a couple release cycles and some of the acls didn't get updated to match that early state
2015-05-04T22:56:10  <superbee> jeblair: so I think that is placing the blame back on the geraman plugin implementation. I am likely going to take a stab at rewriting the work() loop so that we can have state transitions all in one place
2015-05-04T22:56:20  <foobio> er, s/early/later/
2015-05-04T22:56:27  <superbee> jeblair: at least then this should be easier to reason about
2015-05-04T22:56:52  *** Krinkle is now known as Krinkle|detached
2015-05-04T22:57:12  *** armax has quit IRC
2015-05-04T22:57:23  <superbee> unless
2015-05-04T22:57:35  <superbee> zaro: is there any chance that the gearman java lib is maintaining some state too that we don't have control over?
2015-05-04T22:57:49  <superbee> zaro: or is it purely just for input and output and dispatching the handleevent method?
2015-05-04T22:58:24  <waynr> \
2015-05-04T22:58:28  *** _nadya_ has joined #openstack-infra
2015-05-04T22:59:38  <superbee> mordred: have you been able to look at my comments on https://review.openstack.org/#/c/175891/24 ? my only real concern there with fixing it later is you intended to make a release
2015-05-04T23:00:22  *** prad has quit IRC
2015-05-04T23:00:50  *** Sukhdev has quit IRC
2015-05-04T23:02:36  *** _nadya_ has quit IRC
2015-05-04T23:03:33  *** zz_jgrimm has quit IRC
2015-05-04T23:03:33  *** zz_ja has quit IRC
2015-05-04T23:04:39  *** sdake has joined #openstack-infra
2015-05-04T23:06:18  *** zz_ja has joined #openstack-infra
2015-05-04T23:06:18  *** zz_jgrimm has joined #openstack-infra
2015-05-04T23:07:31  *** camunoz has quit IRC
2015-05-04T23:07:55  *** rlandy has quit IRC
2015-05-04T23:08:36  *** sdake_ has quit IRC
2015-05-04T23:08:44  <mordred> I have, I agree with them and will fix when I take off
2015-05-04T23:09:08  <openstackgerrit> Merged openstack-infra/shade: Switch tasks vs put on a boolean config flag  https://review.openstack.org/178886
2015-05-04T23:10:53  <openstackgerrit> Ramy Asselin proposed openstack-infra/puppet-openstackci: Create a log server like http://logs.openstack.org  https://review.openstack.org/167425
2015-05-04T23:11:39  <asselin__> nibalizer, you around? I'm still confused
2015-05-04T23:11:58  <asselin__> ::jenkins class doesn't have an ssh_key...?
2015-05-04T23:12:15  <asselin__> did you mean ::jenkinsuser?
2015-05-04T23:12:19  *** shashankhegde has quit IRC
2015-05-04T23:13:21  *** maishsk has quit IRC
2015-05-04T23:13:34  *** ajo has quit IRC
2015-05-04T23:14:32  *** cody-somerville has joined #openstack-infra
2015-05-04T23:14:48  <asselin__> anyone see this error on icehouse? 2015-05-04 23:12:39.096 | 'keystonemiddleware' is not a global requirement but it should be,something went wrong
2015-05-04T23:15:12  <foobio> asselin__: i do know that there was no keystonemiddleware in icehouse
2015-05-04T23:15:28  <foobio> asselin__: it was split from keystoneclient during the juno development cycle
2015-05-04T23:15:37  *** maishsk has joined #openstack-infra
2015-05-04T23:16:19  <asselin__> foobio, ok....nevermind...my error.....thanks
2015-05-04T23:16:40  *** whoops has quit IRC
2015-05-04T23:17:08  <openstackgerrit> Matthew Treinish proposed openstack-infra/subunit2sql: Add migration to convert append only tables to MyISAM  https://review.openstack.org/179964
2015-05-04T23:19:23  <lifeless> Daviey: oh hai :)
2015-05-04T23:21:27  <nibalizer> asselin__: did it fail?
2015-05-04T23:21:33  <nibalizer> let me look
2015-05-04T23:21:42  <nibalizer> sorry I'm donig like 100 things today
2015-05-04T23:22:07  <asselin__> nibalizer, ok....np...me2. it's running now, just trying to make sence of it
2015-05-04T23:22:51  *** shashankhegde has joined #openstack-infra
2015-05-04T23:23:31  <nibalizer> so using what I meant was to use if ! defined(Class['::jenkins::jenkinsuser']) { instead of if ! defined(Class['jenkins::jenkinsuser']) {
2015-05-04T23:23:34  <nibalizer> thats all
2015-05-04T23:24:03  <openstackgerrit> Joshua Harlow proposed openstack/requirements: Bump futures up to 3.0 or greater  https://review.openstack.org/179967
2015-05-04T23:24:22  <asselin__> nibalizer, ok! that makes more sense
2015-05-04T23:24:34  <nibalizer> ya should be a super easy/nonbreaking change
2015-05-04T23:26:03  <openstackgerrit> Davide Guerri proposed openstack-infra/shade: Add port resource methods  https://review.openstack.org/179968
2015-05-04T23:27:01  <openstackgerrit> Joshua Harlow proposed openstack/requirements: Bump futures up to 3.0 or greater  https://review.openstack.org/179967
2015-05-04T23:27:32  *** zz_jgrimm has quit IRC
2015-05-04T23:27:38  <openstackgerrit> Joshua Harlow proposed openstack/requirements: Bump futures up to 3.0 or greater  https://review.openstack.org/179967
2015-05-04T23:27:57  *** samueldmq has joined #openstack-infra
2015-05-04T23:28:29  *** maurosr has quit IRC
2015-05-04T23:28:36  *** dangers is now known as dangers_away
2015-05-04T23:28:44  *** zz_ja has quit IRC
2015-05-04T23:29:20  *** maurosr has joined #openstack-infra
2015-05-04T23:29:23  *** zz_jgrimm has joined #openstack-infra
2015-05-04T23:29:50  *** zz_ja has joined #openstack-infra
2015-05-04T23:30:23  *** chlong has joined #openstack-infra
2015-05-04T23:30:29  <openstackgerrit> Ramy Asselin proposed openstack-infra/puppet-openstackci: Create a log server like http://logs.openstack.org  https://review.openstack.org/167425
2015-05-04T23:31:43  <asselin__> nibalizer, ^^ compare patch 9 & 12
2015-05-04T23:32:14  <nibalizer> asselin__: kk
2015-05-04T23:32:33  <nibalizer> asselin__: precisely!
2015-05-04T23:32:36  *** dannywilson has quit IRC
2015-05-04T23:33:04  <asselin__> nibalizer, I also understand you comment now. so LGTM
2015-05-04T23:34:12  <superbee> zaro: jeblair ok, I think I may have finally figured this out! gearman plugin calls registerFunctions() which clears the function map in the instance, handleEvent's addNewJob() has a check for the function being in the functions map, if it doesn't come back with a valid function it sends a work fail then never sends a new send grab job from what I can tell
2015-05-04T23:34:35  <superbee> zaro: jeblair I think this is the problem, its also completely unlogged. I will try taking a stab at fixing this
2015-05-04T23:35:29  <superbee> zaro: jeblair: I think we can sanely fix this lock free if we put the events on a thread safe queue then have work() pull them off one by one and process them
2015-05-04T23:35:52  <superbee> but that way we won't race the functionMap updates and won't need to handle them separately
2015-05-04T23:37:07  *** stevemar has quit IRC
2015-05-04T23:37:10  *** hemna is now known as hemnafk
2015-05-04T23:37:31  *** claudiub has quit IRC
2015-05-04T23:37:33  *** viglesias has quit IRC
2015-05-04T23:38:29  *** bswartz has joined #openstack-infra
2015-05-04T23:38:32  *** viglesias has joined #openstack-infra
2015-05-04T23:39:43  *** gokrokve has quit IRC
2015-05-04T23:39:45  <superbee> or I suppose we can just clear out the grab job sent flag and have it try again later
2015-05-04T23:39:53  <superbee> but I would prefer to not send the work fail at all
2015-05-04T23:41:53  *** ajmiller has quit IRC
2015-05-04T23:41:55  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Add inventory command to shade  https://review.openstack.org/175891
2015-05-04T23:42:16  <mordred> superbee: ok- I think I got your things there ^^
2015-05-04T23:42:34  *** dims_ has joined #openstack-infra
2015-05-04T23:42:52  <mordred> and redid one thing - put a parameter around the exclusion in the get_hosts call ... the logic there is carry over from ansible, but non-ansible may want different things
2015-05-04T23:44:22  *** dims has quit IRC
2015-05-04T23:49:13  <superbee> mordred: I like that better, it more clearly indicates if you have the host or not
2015-05-04T23:49:20  *** cody-somerville has quit IRC
2015-05-04T23:49:26  <superbee> mordred: rather than just giving an ambiguous {} which may mean unconnected or does not exist
2015-05-04T23:49:48  <mordred> \o/
2015-05-04T23:49:58  *** jtriley has joined #openstack-infra
2015-05-04T23:49:59  <mordred> superbee: look - code review leading to better code
2015-05-04T23:50:03  *** signed8bit is now known as signed8bit_ZZZzz
2015-05-04T23:50:26  <jeblair> superbee: ah good -- that explains the lack of stuck zuul jobs
2015-05-04T23:51:21  *** freerunner has joined #openstack-infra
2015-05-04T23:51:43  *** ashleighfarnham has quit IRC
2015-05-04T23:52:33  *** freerunner has quit IRC
2015-05-04T23:52:58  *** freerunner has joined #openstack-infra
2015-05-04T23:54:32  <superbee> jeblair: zaro: I think my plan is to collapse the work() method's loop a bit (I am pretty sure that we can do a single driveSessionIO which should make that easier to reason about, then move handleSessionEvent into the worker thread so that functionMap updates are serialized, and finally use the "add noop event to kick off get job requests" everywhere since we already do that in one place and this
2015-05-04T23:54:33  <superbee> will make that state change consistent
2015-05-04T23:56:20  <lifeless> new testtools release just cut
2015-05-04T23:56:23  <lifeless> its the first using pbr
2015-05-04T23:56:28  <lifeless> so - it might be a disaster.
2015-05-04T23:56:32  *** SumitNaiksatam has quit IRC
2015-05-04T23:59:40  *** sdake_ has joined #openstack-infra
