2014-02-26T00:00:42  <foobio> mspreitz: that sounds like evil gubments
2014-02-26T00:00:52  *** thuc has quit IRC
2014-02-26T00:01:18  <foobio> (the kill ssh connections with long key exchanges issue i mean)
2014-02-26T00:01:27  *** thuc has joined #openstack-infra
2014-02-26T00:01:45  <mspreitz> Or incompetent security vendors
2014-02-26T00:02:02  <mspreitz> I am going to try it from precise, see if that makes the difference
2014-02-26T00:02:04  <foobio> that would be most network security device vendors, yes
2014-02-26T00:02:14  <ArxCruz> dansmith: hey https://review.openstack.org/#/c/76388/ ;D
2014-02-26T00:02:23  <dansmith> ArxCruz: I just saw that!
2014-02-26T00:02:29  <ArxCruz> you passed on IBM PowerKVM Testing ;D
2014-02-26T00:03:05  <ArxCruz> dansmith: I was talking with krtaylor to configure our ci for always send a "No" when the patch is from you :)
2014-02-26T00:03:14  <krtaylor> hehheh
2014-02-26T00:03:14  *** moted has quit IRC
2014-02-26T00:03:23  <dansmith> ArxCruz: +1 to that
2014-02-26T00:03:36  *** bhuvan_ has joined #openstack-infra
2014-02-26T00:03:39  <foobio> ArxCruz: krtaylor: what we really need is a gerrit filter to keep dansmith's dependency chains at <=5
2014-02-26T00:03:54  <cyeoh> ArxCruz: oooh nice to see it reporting!
2014-02-26T00:04:03  <ArxCruz> :)
2014-02-26T00:04:09  <ArxCruz> foobio: agreed :)
2014-02-26T00:04:13  <krtaylor> YES
2014-02-26T00:04:33  <foobio> though then we'd miss those 50-change rebase bombs
2014-02-26T00:05:01  <ArxCruz> lol
2014-02-26T00:05:06  *** bhuvan has quit IRC
2014-02-26T00:05:37  <krtaylor> I thought it was fitting that our first patch review was for dansmith
2014-02-26T00:05:38  <openstackgerrit> Matt Riedemann proposed a change to openstack-infra/elastic-recheck: Remove resolved_at mention in readme  https://review.openstack.org/76393
2014-02-26T00:05:50  <dansmith> oh was I really the first one?
2014-02-26T00:05:51  *** thuc has quit IRC
2014-02-26T00:06:39  <foobio> quantumfly: i'm enabling puppet on es02 now
2014-02-26T00:07:12  <quantumfly> foobio: ok
2014-02-26T00:08:33  *** bhuvan has joined #openstack-infra
2014-02-26T00:09:27  *** bhuvan_ has quit IRC
2014-02-26T00:10:01  *** michchap has quit IRC
2014-02-26T00:13:35  *** bhuvan_ has joined #openstack-infra
2014-02-26T00:13:45  <quantumfly> foobio: how is it? I don't see es02 in bigdesk yet
2014-02-26T00:13:55  *** lcostantino has joined #openstack-infra
2014-02-26T00:14:10  <foobio> quantumfly: waiting for the agent to take its natural course, but i'll double-check logs
2014-02-26T00:14:17  *** bhuvan has quit IRC
2014-02-26T00:14:17  <openstackgerrit> Clark Boylan proposed a change to openstack-infra/zuul: Add a remote url override location  https://review.openstack.org/76057
2014-02-26T00:14:29  *** yamahata has quit IRC
2014-02-26T00:14:40  <quantumfly> jbooboo: jhesketh mordred foobio ^ that addresses the existing comments and adds docs for the feature.
2014-02-26T00:14:49  <quantumfly> mordred: AaronGr ^ you should probably pull that down and test it
2014-02-26T00:15:00  <quantumfly> er I should've run tox locally too /me does that now
2014-02-26T00:15:10  <dansmith> ArxCruz: plans for extending that to be a full run of tempest?
2014-02-26T00:15:16  <foobio> quantumfly: my bad :(
2014-02-26T00:15:17  <foobio> Feb 26 00:13:33 elasticsearch02 puppet-agent[24532]: (/Stage[main]/Elasticsearch/File[/etc/elasticsearch/templates]/ensure) change from absent to directory failed: Cannot create /etc/elasticsearch/templates; parent directory /etc/elasticsearch does not exist
2014-02-26T00:15:26  <ArxCruz> krtaylor: can answer that for you :D
2014-02-26T00:15:31  <foobio> the package probably created that before
2014-02-26T00:15:32  <ArxCruz> dansmith: ^
2014-02-26T00:15:36  <quantumfly> foobio: oh right
2014-02-26T00:15:43  * foobio does a quick scrub for similar problems
2014-02-26T00:16:44  <sdague> jbooboo: cool on logstash queue!
2014-02-26T00:16:45  <quantumfly> oh good my change is tox clean
2014-02-26T00:16:56  *** pmathews has quit IRC
2014-02-26T00:17:22  <krtaylor> dansmith, it is really a matter of increasing hardware, all in good time
2014-02-26T00:17:38  <dansmith> krtaylor: ah, makes sense
2014-02-26T00:18:13  <sdague> jbooboo: any chance we could figure out how far behind we are in logstash instead of just queue depth?
2014-02-26T00:18:47  *** michchap has joined #openstack-infra
2014-02-26T00:19:02  *** lcostantino has quit IRC
2014-02-26T00:19:53  <jbooboo> sdague: translate depth -> time?
2014-02-26T00:20:01  <sdague> jbooboo: yeh, basically
2014-02-26T00:20:20  <quantumfly> sdague: you can figure that out with a simple es query
2014-02-26T00:20:32  <quantumfly> just look for the last console.html timestamp essentially
2014-02-26T00:20:43  <quantumfly> which is probably more accurate than depth -> time
2014-02-26T00:20:43  <jbooboo> sdague: oh, yeah, i guess there's two things related to time...
2014-02-26T00:20:55  <sdague> quantumfly: true
2014-02-26T00:21:10  <jbooboo> sdague: quantumfly described "what's the most recent entry", and now-then is how far behind we are...
2014-02-26T00:21:15  <sdague> that would be a nice thing to have a running graph for, as that would give us an idea on the impact
2014-02-26T00:21:27  <jbooboo> sdague: but there's also "how long do we have to catch up?"
2014-02-26T00:21:39  <jbooboo> sdague: which is a function of queue depth and a variable
2014-02-26T00:21:43  *** michchap has quit IRC
2014-02-26T00:22:08  <sdague> well, to an approximation, that's first derivative of delay
2014-02-26T00:22:11  <openstackgerrit> Marton Kiss proposed a change to openstack-infra/config: Fix openstackid vhost override  https://review.openstack.org/76397
2014-02-26T00:22:45  *** michchap has joined #openstack-infra
2014-02-26T00:23:11  <mrmartin> foobio: I made a patch that fix a symlink file removal in openstackid config, may I get an approval for that? https://review.openstack.org/#/c/76397/
2014-02-26T00:23:32  <jbooboo> sdague: yes, also the 1st derivative of depth
2014-02-26T00:24:26  <jbooboo> (btw, graphite does derivates too i think)
2014-02-26T00:24:57  <jbooboo> sdague: at any rate, queue depth should at least shed some visibility on it -- i mean, when things are working as planned, the queue shouldn't be more than a few hundred or maybe thousand.
2014-02-26T00:25:11  <sdague> ok, so 90k... bad?
2014-02-26T00:25:18  <jbooboo> sdague: yes, very bad
2014-02-26T00:25:45  *** dolphm is now known as dolphm_503
2014-02-26T00:25:45  <jbooboo> sdague: if memory serves, that translates to "many hours" for most of those time values
2014-02-26T00:25:50  <foobio> mrmartin: it looks fine, passes checks and only touches openstackid, so i'm fine approving it to speed things along
2014-02-26T00:26:35  <mrmartin> foobio: if it pass through well, may I ask you another rm -rf /srv/openstackid ? I hope it will work now, passed the local vagrant tests
2014-02-26T00:26:37  <sdague> ok, maybe I'll just get intuition on it. The units just don't mean anything to me yet
2014-02-26T00:26:50  <mrmartin> if it won't I'll go to sleep :)
2014-02-26T00:27:30  <foobio> mrmartin: sure, i'll do that once the change is in place on the puppet master in a few minutes, though it's also very late where you are, so sleep is a good idea regardless
2014-02-26T00:27:43  <openstackgerrit> A change was merged to openstack-infra/config: Fix openstackid vhost override  https://review.openstack.org/76397
2014-02-26T00:28:15  <foobio> that ^ should appear on the master in about 2 minutes, just after 00:30 utc
2014-02-26T00:28:18  <mrmartin> foobio: I want to see something that works
2014-02-26T00:28:27  <foobio> mrmartin: i know how you feel
2014-02-26T00:28:34  <mrmartin> :)
2014-02-26T00:29:50  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Puppet the /etc/elasticsearch directory  https://review.openstack.org/76399
2014-02-26T00:29:50  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Remove old elasticsearch workers  https://review.openstack.org/76051
2014-02-26T00:30:14  <foobio> quantumfly: i think https://review.openstack.org/76399 is all es02 and later need. i'll try that in a dev env
2014-02-26T00:30:19  *** matsuhashi has joined #openstack-infra
2014-02-26T00:30:37  <quantumfly> k
2014-02-26T00:31:33  <quantumfly> looks good from here
2014-02-26T00:31:55  <foobio> mrmartin: deleted it again just now. looks like the next puppet run should be in a minute or two, around 00:34 utc
2014-02-26T00:32:03  <mrmartin> oh great
2014-02-26T00:32:41  <quantumfly> jhesketh: https://review.openstack.org/#/c/68828/10/zuul/cmd/client.py has a neat use of babel I will need to remember that rtick
2014-02-26T00:34:18  *** CaptTofu has joined #openstack-infra
2014-02-26T00:36:25  <jhesketh> quantumfly: :-), that was me googling to not reinvent the wheel
2014-02-26T00:36:52  <foobio> quantumfly: elasticsearch service didn't start on es02... if you have a moment, ssh in and gawk at dmesg with me whydontcha
2014-02-26T00:37:17  <quantumfly> sure
2014-02-26T00:37:31  <foobio> some serious oom action up in here
2014-02-26T00:37:49  <foobio> java invoked oom-killer: gfp_mask=0x280da, order=0, oom_adj=0, oom_score_adj=0
2014-02-26T00:38:27  <quantumfly> huh
2014-02-26T00:38:31  <foobio> i see one java process already running... did it try to start twice?
2014-02-26T00:38:38  <quantumfly> oh maybe
2014-02-26T00:38:51  <quantumfly> if it did that it would explain ooming since it mlockalls half the ram each time
2014-02-26T00:38:57  <foobio> yep
2014-02-26T00:39:12  <foobio> oh, and we have no swap on these things
2014-02-26T00:39:25  <quantumfly> whcih is desirable
2014-02-26T00:39:31  <foobio> the launch script didn't do anything with our ephemeral disk
2014-02-26T00:39:36  <quantumfly> and one reason for taking half the memory up front
2014-02-26T00:39:50  <quantumfly> oh does launch script do the swap thing now?
2014-02-26T00:40:00  <foobio> maybe... checking
2014-02-26T00:40:25  <quantumfly> there are a lot of no routes to host in the elasticsearch log, I don't think it can talk to the cluster right now
2014-02-26T00:41:47  <foobio> what size swap do we want on these. just mkswap the entire ephemeral disk or want partitions
2014-02-26T00:41:49  <foobio> ?
2014-02-26T00:41:56  <quantumfly> I don't think we want swap
2014-02-26T00:42:07  <foobio> no? okay, no worrying about it in that case
2014-02-26T00:42:20  *** chenxu_ has joined #openstack-infra
2014-02-26T00:42:32  <quantumfly> by mlocking all of the memory upfront we keep es under control and have ltos of memory for everything else
2014-02-26T00:42:36  <quantumfly> and swap is pretty fatal to es
2014-02-26T00:42:36  *** mriedem has joined #openstack-infra
2014-02-26T00:42:37  <mspreitz> Ah, I was using the command line for cherry-picking via "Anonymous HTTP" rather than SSH or HTTPS
2014-02-26T00:42:46  *** shashank_ has quit IRC
2014-02-26T00:42:52  <foobio> quantumfly: worth noting the memory utilization on es01
2014-02-26T00:43:10  <mrmartin> foobio: thanks, it works now, I really going sleep :)
2014-02-26T00:43:13  <mrmartin> have a nice day
2014-02-26T00:43:16  <quantumfly> foobio: that looks about right, lots of cached data
2014-02-26T00:43:25  <foobio> mrmartin: thanks again for working on it!
2014-02-26T00:43:39  <quantumfly> foobio: on 02 I think we should stop the service and try starting it again cleanly
2014-02-26T00:43:43  <foobio> quantumfly: oh, right, half of that is in cache. good
2014-02-26T00:43:45  <quantumfly> I don't understand these no route to host errors
2014-02-26T00:43:50  <foobio> doing
2014-02-26T00:43:56  <mspreitz> When I try the command line for SSH, experimenting with .ssh/config shows that git fetch will succeed or fail depending on length of algorithm negotiation packet
2014-02-26T00:44:03  <quantumfly> oh I know
2014-02-26T00:44:09  <quantumfly> puppet isn't running on logstash worker16
2014-02-26T00:44:11  * quantumfly fixes that
2014-02-26T00:44:16  *** mrmartin has quit IRC
2014-02-26T00:44:25  <foobio> ahh, firewall update missing there ;)
2014-02-26T00:44:42  <mspreitz> Looks like https://github.com/net-ssh/net-ssh/issues/93
2014-02-26T00:44:44  *** bhuvan_ has quit IRC
2014-02-26T00:45:12  <quantumfly> foobio: and 02 has joined the cluster
2014-02-26T00:45:30  <quantumfly> foobio: did you restart the service too?
2014-02-26T00:45:55  <foobio> quantumfly: i did
2014-02-26T00:46:29  <foobio> mspreitz: where is ruby net-ssh involved in the situation?
2014-02-26T00:47:00  *** dolphm_503 is now known as dolphm
2014-02-26T00:48:04  <quantumfly> foobio: 02 looks happy to me
2014-02-26T00:49:02  <foobio> quantumfly: any ideas on the double-start and oom there? should we merge 76399 and see if es03 hits that on the first go?
2014-02-26T00:49:40  <quantumfly> foobio: best guess is it might have been leftovers from the previous run?
2014-02-26T00:49:49  <quantumfly> the puppet run that failed
2014-02-26T00:49:51  <foobio> that's all i've got :/
2014-02-26T00:50:33  <foobio> i mean, the initscript really ought to be smart enough not to let that happen in the first place, right?
2014-02-26T00:50:40  <foobio> so weird
2014-02-26T00:50:45  <quantumfly> I would hope so
2014-02-26T00:51:18  *** UtahDave has quit IRC
2014-02-26T00:51:55  <foobio> it makes a pidfile and does what looks like some fairly standard handling/checking for it
2014-02-26T00:52:34  <quantumfly> is it possibly pushing that into es itself so it had to fork and do the mlock before it could notice there was another process going?
2014-02-26T00:52:41  *** amcrn has joined #openstack-infra
2014-02-26T00:52:44  <foobio> unless the initscript returns control before the pidfile exists, and the maintscripts and puppet service ensure raced one another
2014-02-26T00:52:56  <foobio> yeah, similar to what i'm thinking
2014-02-26T00:53:27  <foobio> if it's package install related, at least it's only a concern for first bootstrap
2014-02-26T00:53:29  *** bhuvan has joined #openstack-infra
2014-02-26T00:53:36  *** shashank_ has joined #openstack-infra
2014-02-26T00:53:48  <foobio> oh, though i guess on puppeted es package upgrades we might also run into it
2014-02-26T00:54:45  <quantumfly> I have always done those by hand because you don't really want version mismatches
2014-02-26T00:55:01  <quantumfly> so coordinated upgrades all at once is a good thing after having stopped all the nodes
2014-02-26T00:55:09  <foobio> approved 76399 which should merge prior to 01:00, at which point i'll enable puppet on es03
2014-02-26T00:55:23  <quantumfly> though I was thinking it wouldn't be terrible to orchestrate that if we could stop all the gearman workers, then do the massive upgrade
2014-02-26T00:55:31  <quantumfly> but salt and all that need to happen first
2014-02-26T00:56:01  <foobio> i guess there's not enough redundancy to upgrade half the cluster offline and pivor
2014-02-26T00:56:04  <foobio> pivot
2014-02-26T00:56:40  <quantumfly> right, we could do that by doubling the data we keep
2014-02-26T00:56:46  <openstackgerrit> A change was merged to openstack-infra/config: Puppet the /etc/elasticsearch directory  https://review.openstack.org/76399
2014-02-26T00:56:47  <quantumfly> which doesn't seem worth it
2014-02-26T00:56:49  <quantumfly> at least not yet
2014-02-26T00:57:06  <foobio> yeah, it's already a metric crapton of resources just to run what we're running
2014-02-26T00:57:07  <jbooboo> PIVOT! http://www.youtube.com/watch?v=n67RYI_0sc0
2014-02-26T00:57:11  *** thuc has joined #openstack-infra
2014-02-26T00:57:42  *** Ryan_Lane has joined #openstack-infra
2014-02-26T00:57:45  <Ryan_Lane> howdy
2014-02-26T00:57:58  <foobio> it's a wandering Ryan_Lane!
2014-02-26T00:58:02  <jbooboo> Ryan_Lane: long time no see!
2014-02-26T00:58:03  <foobio> long time no irc ;)
2014-02-26T00:58:10  <Ryan_Lane> heh
2014-02-26T00:58:12  *** atiwari has quit IRC
2014-02-26T00:58:24  <Ryan_Lane> I've been avoiding a lot of channels since at the new job
2014-02-26T00:58:25  *** lcheng has quit IRC
2014-02-26T00:58:30  *** bhuvan_ has joined #openstack-infra
2014-02-26T00:58:38  <quantumfly> jbooboo: ha
2014-02-26T00:58:40  <foobio> clearly you forgot you should not avoid *this* channel
2014-02-26T00:58:50  <Ryan_Lane> I like to align communities though, so I'd like to pick some brains :)
2014-02-26T00:58:58  <Ryan_Lane> have you guys considered phabricator over gerrit?
2014-02-26T00:59:07  <foobio> oh boy yes
2014-02-26T00:59:15  <foobio> we did look it over at least
2014-02-26T00:59:16  <Ryan_Lane> it's come a *long* way since last time wikimedia looked at it
2014-02-26T00:59:31  <Ryan_Lane> to a point we're considering it again
2014-02-26T00:59:36  <quantumfly> Ryan_Lane: there seemed to be a philosophical difference when we looked at it
2014-02-26T00:59:51  <jbooboo> Ryan_Lane: the fact that it didn't actually do anything with git repos was kind of a big minus
2014-02-26T00:59:53  <quantumfly> there is no enforcement of when things can merge and so on, its all manual behind the scenes
2014-02-26T00:59:57  <quantumfly> that
2014-02-26T00:59:59  <Ryan_Lane> I think it does now
2014-02-26T01:00:12  <jbooboo> Ryan_Lane: neato, maybe we should look again.
2014-02-26T01:00:14  <foobio> they've replaced hadn-waving with mechanical hands?
2014-02-26T01:00:14  <Ryan_Lane> that was my major hesitation too
2014-02-26T01:00:49  <Ryan_Lane> and lyft is considering it and I'd really like to use something that has zuul integration :D
2014-02-26T01:01:20  *** wenlock has quit IRC
2014-02-26T01:01:24  <Ryan_Lane> wikimedia will obviously need zuul integration too
2014-02-26T01:01:39  *** bhuvan has quit IRC
2014-02-26T01:02:05  <reed> Ryan_Lane, good to see you back here
2014-02-26T01:02:14  <quantumfly> ooh I would defnitely be willing to look at it again
2014-02-26T01:02:15  <jbooboo> Ryan_Lane: we'll definitely accept zuul patches for it (supporting non-gerrit is considered in-scope for zuul) even if we don't switch (ever or for a while)
2014-02-26T01:02:24  <Ryan_Lane> cool
2014-02-26T01:02:41  <foobio> non-gerrit, much like non-jenkins, means non-jave potentially
2014-02-26T01:02:47  <foobio> java
2014-02-26T01:03:00  <Ryan_Lane> reed: good to be back :)
2014-02-26T01:03:28  <Ryan_Lane> I'd really like to be able to share some CI effort at lyft as well, so I'll likely be around
2014-02-26T01:03:30  *** bhuvan has joined #openstack-infra
2014-02-26T01:03:39  <jbooboo> Ryan_Lane: so are you at the "gap analysis" phase or more like the "let's poke at this" phase?
2014-02-26T01:03:55  <Ryan_Lane> it's installed in our labs environment and people are poking around at it
2014-02-26T01:04:00  <foobio> phabricator is written in php... guess i'll still have that to hold against it
2014-02-26T01:04:08  <Ryan_Lane> at lyft we're at the gap analysis phase
2014-02-26T01:04:14  <mspreitz> foobio: read all the way down, the problem is not the software it is something in the network and many kinds of software can trigger it
2014-02-26T01:04:15  <Ryan_Lane> it's easier to deal with php than java :)
2014-02-26T01:04:19  <jbooboo> foobio: yeah, we can still gripe about the language.  :)
2014-02-26T01:04:26  <Ryan_Lane> I wish it was python
2014-02-26T01:04:33  *** bhuvan_ has quit IRC
2014-02-26T01:04:39  <quantumfly> well it comes from facebook, we should be happy ti speaks git
2014-02-26T01:04:44  <foobio> jbooboo: works for me. i'd actually get work done if i didn't have language preferences to complain about
2014-02-26T01:04:48  <Ryan_Lane> hahaha. indeed
2014-02-26T01:04:58  <Ryan_Lane> it's not maintained by facebook anymore, though
2014-02-26T01:05:03  <Ryan_Lane> hasn't been for a couple years I think
2014-02-26T01:05:55  <reed> uh, my danger alert went off
2014-02-26T01:05:59  <lifeless> Ryan_Lane: what do they use now?
2014-02-26T01:06:14  <reed> facebook, php, unmaintained ... sirens off
2014-02-26T01:06:15  <quantumfly> Ryan_Lane: right the maintainer left to do phabricator full time
2014-02-26T01:06:19  <quantumfly> lifeless: they use hg
2014-02-26T01:06:40  <lifeless> quantumfly: I meant other than phabrifcator
2014-02-26T01:07:23  <jbooboo> Ryan_Lane: i'd love to hear about what you find
2014-02-26T01:07:33  <quantumfly> jhesketh: https://review.openstack.org/#/c/68828/10/zuul/cmd/client.py I am doing proper review of that now. lines 165 to 167, does that mean last worker suffix value wins?
2014-02-26T01:07:40  <quantumfly> jhesketh: is that intentional?
2014-02-26T01:07:51  <quantumfly> jhesketh: oh wait I grok now nevermind
2014-02-26T01:07:59  <quantumfly> lifeless: that I do not know
2014-02-26T01:08:04  <foobio> mspreitz: oh, interesting. this takes us back to the misbehaving (or malicious!) middleboxes theory
2014-02-26T01:08:22  <jhesketh> quantumfly: it's to access sub-dicts using a period in the column name
2014-02-26T01:08:27  *** sarob has quit IRC
2014-02-26T01:08:30  *** bhuvan_ has joined #openstack-infra
2014-02-26T01:08:35  <quantumfly> Ryan_Lane: there was a thread active today in the gerrit ml about gerrit critics
2014-02-26T01:08:43  <quantumfly> Greg kh is one of them
2014-02-26T01:08:47  <quantumfly> was interesting to read
2014-02-26T01:08:58  *** sarob has joined #openstack-infra
2014-02-26T01:09:15  <Ryan_Lane> yeah, but phabricator felll into the same issues
2014-02-26T01:09:17  <Ryan_Lane> in the article
2014-02-26T01:09:20  <reed> the website has some funny text :) http://phabricator.org/
2014-02-26T01:09:23  *** bhuvan has quit IRC
2014-02-26T01:09:27  <Ryan_Lane> since it uses the same workflow
2014-02-26T01:09:51  <Ryan_Lane> jbooboo: I'll let you know.
2014-02-26T01:10:02  <Ryan_Lane> I brought this up because I like to keep toolchains close :)
2014-02-26T01:10:12  <reed> Written in PHP so literally anyone can contribute, even if they have no idea how to program.
2014-02-26T01:10:17  <Ryan_Lane> hahaha
2014-02-26T01:10:27  <reed> their words not mine :)
2014-02-26T01:10:28  <foobio> reed: that's always been how i characterize php amyway
2014-02-26T01:10:33  <foobio> anyway
2014-02-26T01:10:43  <reed> You can make text bold. Bold text wins arguments!
2014-02-26T01:10:48  *** oubiwann_ has joined #openstack-infra
2014-02-26T01:10:54  <reed> they're funny :)
2014-02-26T01:10:59  *** gokrokve_ has quit IRC
2014-02-26T01:11:20  <anteaya> and all caps gets you escorted to the door
2014-02-26T01:11:38  <foobio> anteaya: and don't get me started on ansi blink escapes
2014-02-26T01:11:43  <anteaya> no
2014-02-26T01:11:53  <quantumfly> jhesketh: I am feeling dense. how does worker_name which is in the default list match the worker.name key?
2014-02-26T01:11:59  <anteaya> no don't get started on anything blinky
2014-02-26T01:12:14  <quantumfly> jhesketh: wouldn't that fail to match removing worker_name from fields?
2014-02-26T01:12:15  <jhesketh> quantumfly: ah, it wouldn't.. that'd be an error from a previous patchset
2014-02-26T01:12:39  <quantumfly> jhesketh: so I should leave a legit comment on that?
2014-02-26T01:12:48  <foobio> quantumfly: so with the fix in place, es03 tried to double-start and oom'd too
2014-02-26T01:12:49  <jhesketh> yep
2014-02-26T01:13:06  <jhesketh> quantumfly: so it was worker_name, and the job had 'worker_name', 'worker_ips' etc in the dict, but now it goes job['worker']['names']
2014-02-26T01:13:09  <quantumfly> foobio: weird I have no idea why that would happen
2014-02-26T01:13:15  <quantumfly> foobio: oh you know what
2014-02-26T01:13:17  *** sarob has quit IRC
2014-02-26T01:13:20  <quantumfly> foobio: is it double forking?
2014-02-26T01:13:40  <quantumfly> foobio: we might want to set HEAP_SIZE to 29g if so
2014-02-26T01:13:40  <foobio> it... might be? i dunno, java and all
2014-02-26T01:14:09  <foobio> as long as it stays inside its jvm, it can fork itself all it likes
2014-02-26T01:14:30  <quantumfly> jhesketh: I will finish reviewing this and leave comments
2014-02-26T01:14:35  <jhesketh> cheerws
2014-02-26T01:14:37  <jhesketh> *cheers
2014-02-26T01:15:09  <foobio> but yeah, i suppose leaving it a little room for briefly doubling its memory footprint, while somewhat insane from a memory utilization perspective, is certainly doable
2014-02-26T01:15:54  <foobio> quantumfly: though if that were really the case, i'd expect to hit it any time we started the service, not just the first time around
2014-02-26T01:16:06  *** zhiyan_ is now known as zhiyan
2014-02-26T01:16:14  <quantumfly> foobio: right and on the old nodes we set heap size to 16GB on 30GB nodes so should hit it every time
2014-02-26T01:16:18  <quantumfly> so I really don't know what is going on
2014-02-26T01:16:31  * foobio blames puppet some more, fir good measure
2014-02-26T01:16:33  <quantumfly> jesusaurus: ^ have you seen that with es?
2014-02-26T01:16:58  <quantumfly> I will be going to an es + logstash thing early march in seattle maybe they will know there if we don't get it sorted before then
2014-02-26T01:17:10  <sdague> Ryan_Lane: so I'm looking at the phabricator site. I wonder how it would deal with openstack review load. They look like they are at 8k reviews total in their system, and I think that's currently about 5 weeks for us.
2014-02-26T01:18:01  <foobio> interestingly, at start it immediately gobbles as much cache in ram as it uses resident
2014-02-26T01:18:18  <foobio> is that just a javaism, or elasticsearch-specific behavior?
2014-02-26T01:18:35  <quantumfly> I thin es specific
2014-02-26T01:18:46  <openstackgerrit> James E. Blair proposed a change to openstack-infra/config: Add storyboard and openstackid-dev ssl certs  https://review.openstack.org/76407
2014-02-26T01:19:08  <Ryan_Lane> sdague: it's used at facebook still
2014-02-26T01:19:13  <Ryan_Lane> and I'd imagine they have a lot more
2014-02-26T01:19:26  *** reed has quit IRC
2014-02-26T01:19:48  <sdague> sure, I wonder what their workflows look like
2014-02-26T01:20:01  <Ryan_Lane> yeah, me too
2014-02-26T01:20:12  <foobio> sdague: they post reviews on their wall
2014-02-26T01:20:19  <sdague> hah
2014-02-26T01:20:23  * jbooboo likes this
2014-02-26T01:20:25  * foobio has learnt some faceplant lingo
2014-02-26T01:20:27  <quantumfly> foobio: and just like our gerrit everonye can see them. there is no privacy :)
2014-02-26T01:20:31  <Ryan_Lane> I've heard their deployer actually has a dislike button
2014-02-26T01:20:38  <jbooboo> actually i don't like it but there's no button for that
2014-02-26T01:20:55  <sdague> jbooboo: you really think the internet needs more drive by hate?
2014-02-26T01:21:01  <Ryan_Lane> (and I'm not kidding ;) )
2014-02-26T01:21:22  <jbooboo> sdague: only being able to like things is double plus good
2014-02-26T01:21:30  *** fifieldt has joined #openstack-infra
2014-02-26T01:21:32  <foobio> some source code needs more drive-by hate
2014-02-26T01:21:34  <quantumfly> jhesketh: and the formatJSON() move was just copy pasta for the most part?
2014-02-26T01:21:36  *** ryanpetrello has joined #openstack-infra
2014-02-26T01:21:44  <quantumfly> I wish gerrit would let me align diffs manually sometimes
2014-02-26T01:21:49  * anteaya thinks sdague makes a good point
2014-02-26T01:22:00  <quantumfly> sdague: downvotes everywhere
2014-02-26T01:22:09  <sdague> I save that for gerrit :)
2014-02-26T01:22:34  <foobio> quantumfly is cmdrtaco in disguise
2014-02-26T01:22:46  <sdague> Ryan_Lane: it would be really interesting to see if you can make a sane integration here. Because as much as I have issues with gerrit, I also look at what
2014-02-26T01:22:51  <jhesketh> quantumfly: it's similar but a lot more information has been added into the jobs list to better reflect the data model
2014-02-26T01:23:19  <sdague> 's in the public phabricator, and my gerrit workflow, and can't imagine getting that interface to handle my workflow
2014-02-26T01:23:44  <Ryan_Lane> I think pre-merge workflow is similar
2014-02-26T01:23:54  <Ryan_Lane> what's different about it?
2014-02-26T01:23:59  <sdague> the review view
2014-02-26T01:24:05  <Ryan_Lane> ah
2014-02-26T01:24:48  <Ryan_Lane> anything specific missing?
2014-02-26T01:25:00  <mspreitz> New question: how do I make git tell me where my FETCH_HEAD is pointing?
2014-02-26T01:25:27  <foobio> mspreitz: git show
2014-02-26T01:25:28  <jbooboo> git show FETCH_HEAD
2014-02-26T01:25:35  <foobio> that ^
2014-02-26T01:26:11  <mspreitz> $ git show FETCH_HEAD fatal: ambiguous argument 'FETCH_HEAD': unknown revision or path not in the working tree.
2014-02-26T01:26:11  <foobio> or you can git checkout FETCH_HEAD and then just git show
2014-02-26T01:26:26  <foobio> mspreitz: is that before or after a fetch?
2014-02-26T01:26:34  <mspreitz> after a fetch
2014-02-26T01:27:06  <foobio> strange. works for me when i try it
2014-02-26T01:27:31  <sdague> Ryan_Lane: so views like this I use a lot - http://i.imgur.com/aRERaXd.png
2014-02-26T01:27:34  *** zhiwei has joined #openstack-infra
2014-02-26T01:27:54  <jbooboo> cat .git/FETCH_HEAD
2014-02-26T01:28:16  <sdague> it being screen dense, having some idea on current votes, and who voted for stuff
2014-02-26T01:28:28  <quantumfly> jhesketh: the worker_name thing was the only thing I found. looks good otherwise
2014-02-26T01:28:34  *** oubiwann_ has quit IRC
2014-02-26T01:28:38  <Ryan_Lane> sdague: ahhh, ok
2014-02-26T01:28:40  <jhesketh> thanks quantumfly, I'll reroll
2014-02-26T01:28:41  <quantumfly> I need to eat dinner shortly but can rereview if you push up a fix
2014-02-26T01:28:49  <mspreitz> I have git version 1.8.3.2 on MacOSX
2014-02-26T01:28:56  <Ryan_Lane> interesting
2014-02-26T01:29:06  <Ryan_Lane> wikimedia doesn't really have that use case as much
2014-02-26T01:29:34  <foobio> quantumfly: should we proceed puppeting and restarting services on the other half of the new cluster members, or try more options i can't seem to think of?
2014-02-26T01:30:10  <mspreitz> sorry, I was reading wrong terminal
2014-02-26T01:30:16  <quantumfly> foobio: can you try doing a puppet agent --test in order to get verbose output and see if puppet is kicking it more than once?
2014-02-26T01:30:17  <mspreitz> I have git version 1.8.3.2 on Ubuntu saucy
2014-02-26T01:30:30  <quantumfly> foobio: I just relized there may be a subscribe somewhere that does something that triggers it twice
2014-02-26T01:30:38  *** tomhe has quit IRC
2014-02-26T01:30:38  *** mrodden has quit IRC
2014-02-26T01:30:39  <sdague> Ryan_Lane: how many reviews does a person tend to do over some unit time at wikimedia?
2014-02-26T01:30:51  <foobio> quantumfly: sure, i'll do that and record the output into a (redacted if necessary) paste
2014-02-26T01:30:54  <quantumfly> foobio: and puppet being at fault would explain why it didn't happen before considering puppet order isn't garunteed and determined by the catalog which we just cahnged
2014-02-26T01:30:55  <Ryan_Lane> no clue. they track that poorly
2014-02-26T01:30:55  *** tjones has quit IRC
2014-02-26T01:30:55  <mspreitz> git checkout FETCH_HEAD also craps out for me
2014-02-26T01:31:05  <mspreitz> like this: error: pathspec 'FETCH_HEAD' did not match any file(s) known to git
2014-02-26T01:31:11  *** zul has quit IRC
2014-02-26T01:31:12  <sdague> so http://stackalytics.com/?release=icehouse&metric=marks&project_type=openstack&module=&company=&user_id=
2014-02-26T01:31:45  <sdague> we'll have a dozen people in the openstack community with > 1000 reviews during icehouse on current course and speed
2014-02-26T01:31:57  * Ryan_Lane nods
2014-02-26T01:32:01  <foobio> yarg
2014-02-26T01:32:08  *** apevec has quit IRC
2014-02-26T01:32:21  *** bhuvan has joined #openstack-infra
2014-02-26T01:32:36  <openstackgerrit> Joshua Hesketh proposed a change to openstack-infra/zuul: Add support to list running jobs to zuul client  https://review.openstack.org/68828
2014-02-26T01:32:40  <foobio> how am i in the top 10 contributions by engineers?
2014-02-26T01:32:49  <foobio> though kudos to ajaeger!
2014-02-26T01:32:53  <anteaya> is jenkins in there?
2014-02-26T01:32:53  <jhesketh> quantumfly: ^ (whenever :-))
2014-02-26T01:33:33  *** lnxnut has quit IRC
2014-02-26T01:33:38  <sdague> yeh, looks like 13 in havana, so realistically I bet we end up with 15 in icehouse (I bet anyone with > 750 now will hit 1000 by end of cycle)
2014-02-26T01:33:46  <sdague> anteaya: no, this is reviews :)
2014-02-26T01:33:51  <anteaya> sdague: ah
2014-02-26T01:33:52  <Ryan_Lane> I wonder if it's a matter of having reasonable queries
2014-02-26T01:34:03  <foobio> i need to find another 75 patches to review asap ;)
2014-02-26T01:34:05  <quantumfly> jbooboo: if jhesketh's change still lg to you we can rpobably double tab it and get it merged
2014-02-26T01:34:23  <anteaya> foobio: like you have to look
2014-02-26T01:34:38  <sdague> Ryan_Lane: reasonable queries is definitely key, honestly gerrit only partially works that way. Having the queries as get strings so you can bookmark them is goodness as well.
2014-02-26T01:34:42  <foobio> anteaya: good point. my present watched backlog is at least triple that i think
2014-02-26T01:35:01  <Ryan_Lane> looks like phabricator can save queries
2014-02-26T01:35:01  <quantumfly> foobio: you jbooboo and I are
2014-02-26T01:35:05  <anteaya> no doubt
2014-02-26T01:35:06  <mspreitz> Oh, I see.  I was discounting the "git fetch" that failed.  If I try again right after a "git fetch" that succeeds then "git show FETCH_HEAD" works
2014-02-26T01:35:15  <sdague> more fun stat
2014-02-26T01:35:18  <foobio> mspreitz: that does make sense
2014-02-26T01:35:22  *** jergerber has quit IRC
2014-02-26T01:35:27  <sdague> hit the last page on stackalytics
2014-02-26T01:35:36  *** Guest63393 has quit IRC
2014-02-26T01:35:36  *** Guest63393 has joined #openstack-infra
2014-02-26T01:35:39  <foobio> quantumfly: you're beating me by at least several reviews though
2014-02-26T01:35:40  *** Guest63393 is now known as persia
2014-02-26T01:35:42  <sdague> 1011 - the number of individuals that have reviewed code in icehouse
2014-02-26T01:35:44  *** thuc has quit IRC
2014-02-26T01:35:45  *** krotscheck has quit IRC
2014-02-26T01:35:58  *** bhuvan_ has quit IRC
2014-02-26T01:36:09  <jesusaurus> quantumfly: foobio: im confused, es03 tried to start two separate nodes on the same host?
2014-02-26T01:36:20  *** thuc has joined #openstack-infra
2014-02-26T01:36:21  <Ryan_Lane> sdague: yep. lots of reviewers
2014-02-26T01:36:26  <foobio> jesusaurus: it did indeed. still digging into it
2014-02-26T01:36:34  <foobio> jesusaurus: it's also repeatable
2014-02-26T01:36:56  *** bhuvan has quit IRC
2014-02-26T01:36:57  <jesusaurus> foobio: what are the steps to reproduce?
2014-02-26T01:37:03  <quantumfly> jesusaurus: ya not sure if init script/es fault or puppet double tapping weird
2014-02-26T01:37:20  <foobio> jesusaurus: use out puppet, and build a new cluster member?
2014-02-26T01:37:24  <foobio> s/out/our/
2014-02-26T01:37:40  <Ryan_Lane> oh, wow. phabricator's task manager works across projects: https://secure.phabricator.com/T3089
2014-02-26T01:37:58  <Ryan_Lane> isn't that the reason launchpad is still being used for issues?
2014-02-26T01:38:02  <anteaya> we are looking for the twelfth reviewer
2014-02-26T01:38:03  * Ryan_Lane hates launchpad
2014-02-26T01:38:16  <foobio> Ryan_Lane: that was one of our major requirements for storyboard, so good to know we're not insane for wanting it
2014-02-26T01:38:43  <Ryan_Lane> it's a feature of jira too
2014-02-26T01:38:52  <Ryan_Lane> so it's not insane at all
2014-02-26T01:39:08  <jbooboo> Ryan_Lane: mordred and ttx can probably provide more details, but there was still some fundamental misalignments between phabricator and what we need
2014-02-26T01:39:12  <jbooboo> for bugs
2014-02-26T01:39:15  <jbooboo> and blueprints
2014-02-26T01:39:20  <Ryan_Lane> yep, not surprising
2014-02-26T01:39:22  *** sabari has quit IRC
2014-02-26T01:39:36  <Ryan_Lane> I'm just going through the features now and seeing some nice things :)
2014-02-26T01:39:47  <jbooboo> Ryan_Lane: yeah, we looked hard at it for bugs
2014-02-26T01:39:53  *** gokrokve has joined #openstack-infra
2014-02-26T01:40:24  *** thuc has quit IRC
2014-02-26T01:40:52  <jesusaurus> quantumfly: to answer your question, there was one lone incident where i found a second node running on 9201/9301, but i simply killed the second process and never saw any other strange behaviour
2014-02-26T01:41:14  <foobio> quantumfly: jesusaurus: http://paste.openstack.org/show/69633
2014-02-26T01:41:22  *** yamahata has joined #openstack-infra
2014-02-26T01:41:45  *** yamahata has quit IRC
2014-02-26T01:41:56  *** nosnos has joined #openstack-infra
2014-02-26T01:42:00  *** yamahata has joined #openstack-infra
2014-02-26T01:42:13  <foobio> quantumfly: jesusaurus: and that puppet agent --test did indeed wind up trying to start a second jvm, which then got oom-killed
2014-02-26T01:42:54  <foobio> and following a service stop/start, it joined the cluster normally and successfully
2014-02-26T01:44:08  <quantumfly> so new theory. package install starts it then service double taps
2014-02-26T01:44:17  <jesusaurus> foobio: before that --test run es04 already had elasticsearch installed and running?
2014-02-26T01:44:26  <foobio> quantumfly: jesusaurus: staring at that log, i'm back to my original supposition, which is that the initscript returns control to the calling process before the pidfile is created
2014-02-26T01:44:27  <jesusaurus> quantumfly: oh, thats a possibility
2014-02-26T01:44:51  <quantumfly> foobio: can you try a test change that doesnt manage the service?
2014-02-26T01:44:56  <foobio> jesusaurus: before that the elasticsearch puppet module was not applied at all
2014-02-26T01:45:07  <foobio> quantumfly: doing now
2014-02-26T01:45:10  <quantumfly> foobio: that seems to be a general direction we are headed in anyways
2014-02-26T01:45:22  *** esker has joined #openstack-infra
2014-02-26T01:46:11  *** apevec has joined #openstack-infra
2014-02-26T01:46:20  <sdague> I do like the fact that phabricator does all the diffs in one page
2014-02-26T01:46:23  *** apevec has quit IRC
2014-02-26T01:46:23  *** apevec has joined #openstack-infra
2014-02-26T01:47:40  <Ryan_Lane> sdague: same. I've wanted that in gerrit since forever
2014-02-26T01:48:18  <Ryan_Lane> well, phabricator has stolen a couple hours of my day now. back to the grind for me ;)
2014-02-26T01:49:01  *** amcrn has quit IRC
2014-02-26T01:49:13  <quantumfly> woot /me has hibiki 12 and code reviews to do now
2014-02-26T01:49:19  <jbooboo> sdague: you know someone wrote a patch to gerrit for that, but didn't sign the cla, so it was never merged.
2014-02-26T01:49:30  <jbooboo> (CLAs are evil)
2014-02-26T01:49:54  <quantumfly> jbooboo: did you catch jhesketh's updated patch? the delta between ps 10 and 11 is mall
2014-02-26T01:50:12  <jbooboo> quantumfly: is it urgent?
2014-02-26T01:50:18  <jhesketh> nope
2014-02-26T01:50:32  <jhesketh> (the real delta is one character, just rebased while I had the chance)
2014-02-26T01:50:46  <quantumfly> jhesketh: no
2014-02-26T01:50:47  <quantumfly> gah
2014-02-26T01:50:55  <quantumfly> jbooboo: no not urgent at all
2014-02-26T01:52:03  *** ryanpetrello has quit IRC
2014-02-26T01:53:07  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Don't ensure elasticsearch service is running  https://review.openstack.org/76412
2014-02-26T01:53:08  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Remove old elasticsearch workers  https://review.openstack.org/76051
2014-02-26T01:53:20  <foobio> quantumfly: as suspected, https://review.openstack.org/76412 there seems to solve it
2014-02-26T01:53:28  <foobio> so my first theory was probably correct
2014-02-26T01:53:39  <quantumfly> ya I think so
2014-02-26T01:53:57  <sdague> jbooboo: sigh
2014-02-26T01:54:31  <foobio> quantumfly: if we merge that, i'll puppet es06 from master with it, make sure that is sane, and call it a day
2014-02-26T01:54:34  <sdague> I wonder if we are ever going to get rid of our CLA, or if that will be the board fight to end all board fights
2014-02-26T01:54:48  <foobio> sdague: the tc should fire the board
2014-02-26T01:54:56  <foobio> ;)
2014-02-26T01:54:58  <quantumfly> foobio: I +2'd it. Looks relatively safe. I did not however check to see if there were subscriptions to the service or notifies to it
2014-02-26T01:55:14  <quantumfly> sdague: you could fork openstack and have the fork be CLA free
2014-02-26T01:55:46  <foobio> quantumfly: well, i did apply the same change from a puppet dev env on es05 and it didn't error. i think a subscrive/refresh would have counted as a reference to a nonexistent service and errored in that case
2014-02-26T01:56:10  <quantumfly> foobio: maybe
2014-02-26T01:56:13  * quantumfly looks closer
2014-02-26T01:56:29  *** ryanpetrello has joined #openstack-infra
2014-02-26T01:57:01  <foobio> quantumfly: if there's any mention of a service, it's not in the init.pp anyway (which is the only puppetfile in the module)
2014-02-26T01:57:21  <quantumfly> foobio: git grep "'elasticsearch'" doesn't show any incidences either
2014-02-26T01:57:26  <quantumfly> so I think your change is fine as is
2014-02-26T01:57:40  *** khyati has quit IRC
2014-02-26T01:57:59  <foobio> into the drink with it, i say
2014-02-26T01:59:48  <openstackgerrit> A change was merged to openstack-infra/config: Don't ensure elasticsearch service is running  https://review.openstack.org/76412
2014-02-26T02:00:23  *** gyee has quit IRC
2014-02-26T02:02:33  <openstackgerrit> Khai Do proposed a change to openstack-infra/gerritlib: add getVersion and listPlugin commands and update replicate command  https://review.openstack.org/69768
2014-02-26T02:02:45  *** ryanpetrello has quit IRC
2014-02-26T02:03:48  *** gyee has joined #openstack-infra
2014-02-26T02:04:09  *** gyee has quit IRC
2014-02-26T02:04:17  <foobio> tomorrow i'll try to remember to get the new elasticsearch cluster members and the puppetdb server into cacti too
2014-02-26T02:05:51  <quantumfly> zaro: ^ failed pep8
2014-02-26T02:05:52  *** gyee has joined #openstack-infra
2014-02-26T02:05:56  <openstackgerrit> Khai Do proposed a change to openstack-infra/gerritlib: add getVersion and listPlugin commands and update replicate command  https://review.openstack.org/69768
2014-02-26T02:06:27  <quantumfly> zaro: whats with ascii_names?
2014-02-26T02:08:14  *** mgagne has quit IRC
2014-02-26T02:08:27  *** krotscheck has joined #openstack-infra
2014-02-26T02:09:27  *** chenxu_ has quit IRC
2014-02-26T02:10:07  <foobio> quantumfly: with that last patch merged, enabling puppet agent on es06 cause it to install, start and join the cluster successfully
2014-02-26T02:10:25  <foobio> i'll check back in on it in the morning to see how shard replication is coming along
2014-02-26T02:11:34  <quantumfly> perfect thanks again
2014-02-26T02:11:38  <quantumfly> I am watching a movie now
2014-02-26T02:11:42  <foobio> es01 has a dozen shards at this point, and es02 has a couple as well
2014-02-26T02:12:00  <foobio> quantumfly: great--i'm going to do the same. have a good evening
2014-02-26T02:12:15  <quantumfly> you too
2014-02-26T02:12:29  *** arborism has joined #openstack-infra
2014-02-26T02:12:38  *** arborism is now known as amcrn
2014-02-26T02:15:50  *** Sukhdev has joined #openstack-infra
2014-02-26T02:19:22  *** changbl has joined #openstack-infra
2014-02-26T02:25:15  *** mspreitz has left #openstack-infra
2014-02-26T02:25:18  *** yaguang has joined #openstack-infra
2014-02-26T02:26:01  *** esker has quit IRC
2014-02-26T02:28:12  *** SumitNaiksatam has quit IRC
2014-02-26T02:29:06  *** thuc has joined #openstack-infra
2014-02-26T02:29:47  <openstackgerrit> A change was merged to openstack/requirements: Bump python-savannaclient to 0.5.0  https://review.openstack.org/76357
2014-02-26T02:29:55  *** thuc_ has joined #openstack-infra
2014-02-26T02:29:55  *** thomasem has joined #openstack-infra
2014-02-26T02:31:08  <openstackgerrit> Khai Do proposed a change to openstack-infra/gerritlib: add getVersion and listPlugin commands and update replicate command  https://review.openstack.org/69768
2014-02-26T02:32:11  *** amcrn has quit IRC
2014-02-26T02:33:37  *** thuc has quit IRC
2014-02-26T02:35:40  *** mgagne has joined #openstack-infra
2014-02-26T02:36:08  *** apevec has quit IRC
2014-02-26T02:36:11  <zaro> quantumfly: ^
2014-02-26T02:38:09  *** mgagne has quit IRC
2014-02-26T02:38:49  <zaro> quantumfly: caught another 3 episodes of game of thrones on plane.  pretty good.
2014-02-26T02:40:23  *** shashank_ has quit IRC
2014-02-26T02:48:11  *** Ryan_Lane has quit IRC
2014-02-26T02:50:34  *** thomasem has quit IRC
2014-02-26T02:52:00  *** david-lyle has joined #openstack-infra
2014-02-26T02:52:31  *** yaguang has quit IRC
2014-02-26T02:55:07  *** Ryan_Lane has joined #openstack-infra
2014-02-26T02:56:44  *** yaguang has joined #openstack-infra
2014-02-26T02:57:06  *** sabari has joined #openstack-infra
2014-02-26T03:00:11  *** mspreitz has joined #openstack-infra
2014-02-26T03:00:32  <mspreitz> Does anybody here test with Python 2.6 on ubuntu?
2014-02-26T03:01:09  <mspreitz> Is anybody here?
2014-02-26T03:01:34  <fifieldt> probably
2014-02-26T03:04:07  <pleia2> it's tough because none of the versions of Ubuntu that can a) run modern openstack can b) easily run python 2.6, the last release that met this criteria was 11.10/oneiric (now EOL)
2014-02-26T03:04:28  <pleia2> which is why we use centos to test 2.6 in the infra now
2014-02-26T03:05:51  <mspreitz> Ah, thanks
2014-02-26T03:06:04  <mspreitz> So developers normally use Ubuntu 12.04 and test with only Python 2.7, right?
2014-02-26T03:06:59  <pleia2> we also have 3.3 packages for 12.04 that we test some things on, but yeah, 2.7 is the status quo
2014-02-26T03:07:32  <mspreitz> thanks
2014-02-26T03:07:38  <pleia2> sure
2014-02-26T03:11:35  *** zhiwei has quit IRC
2014-02-26T03:12:31  *** Sukhdev has quit IRC
2014-02-26T03:13:45  *** amotoki_ has quit IRC
2014-02-26T03:19:06  *** morganfainberg is now known as morganfainberg_Z
2014-02-26T03:19:36  *** krotscheck has quit IRC
2014-02-26T03:23:29  *** Ryan_Lane has quit IRC
2014-02-26T03:23:34  *** jcooley_ has quit IRC
2014-02-26T03:24:51  <ianw> mspreitz: python2.6 is used on RHEL6
2014-02-26T03:25:21  <mspreitz> But most developers just use Ubuntu 12.04, right?
2014-02-26T03:26:57  <ianw> mspreitz: hard to say, fedora is popular too
2014-02-26T03:27:17  *** jcooley_ has joined #openstack-infra
2014-02-26T03:27:20  *** sabari has quit IRC
2014-02-26T03:27:29  <mspreitz> Does Fedora have Python 2.6?
2014-02-26T03:29:14  *** cody-somerville has joined #openstack-infra
2014-02-26T03:29:58  *** NikitaKonovalov_ is now known as NikitaKonovalov
2014-02-26T03:30:04  <ianw> no, RHEL/Centos 6 is the only python2.6 environment
2014-02-26T03:35:09  *** CaptTofu has quit IRC
2014-02-26T03:35:38  *** pcrews has quit IRC
2014-02-26T03:37:02  *** nati_ueno has quit IRC
2014-02-26T03:37:53  *** matsuhashi has quit IRC
2014-02-26T03:39:11  *** NikitaKonovalov is now known as NikitaKonovalov_
2014-02-26T03:40:07  *** rcleere has joined #openstack-infra
2014-02-26T03:41:02  *** rfolco has quit IRC
2014-02-26T03:41:35  *** thuc_ has quit IRC
2014-02-26T03:42:01  *** thuc has joined #openstack-infra
2014-02-26T03:51:31  *** khyati has joined #openstack-infra
2014-02-26T03:52:27  *** gyee has quit IRC
2014-02-26T03:55:11  *** mriedem has quit IRC
2014-02-26T03:56:38  *** markwash has quit IRC
2014-02-26T03:57:16  *** harlowja is now known as harlowja_away
2014-02-26T04:00:44  *** sarob has joined #openstack-infra
2014-02-26T04:08:46  *** sarob has quit IRC
2014-02-26T04:12:51  *** ArxCruz has quit IRC
2014-02-26T04:19:55  *** ArxCruz has joined #openstack-infra
2014-02-26T04:20:00  *** ArxCruz has quit IRC
2014-02-26T04:23:04  *** sabari has joined #openstack-infra
2014-02-26T04:24:55  *** Ryan_Lane has joined #openstack-infra
2014-02-26T04:27:23  *** wenlock has joined #openstack-infra
2014-02-26T04:27:42  *** jcooley_ has quit IRC
2014-02-26T04:31:03  *** ArxCruz has joined #openstack-infra
2014-02-26T04:31:13  *** ArxCruz has quit IRC
2014-02-26T04:32:57  *** matsuhashi has joined #openstack-infra
2014-02-26T04:33:34  <jhesketh> jbooboo, quantumfly: when you guys get a chance, could you please respond to my comments on this: https://review.openstack.org/#/c/73461/
2014-02-26T04:34:54  *** ArxCruz has joined #openstack-infra
2014-02-26T04:35:00  *** ArxCruz has quit IRC
2014-02-26T04:37:35  *** lcheng has joined #openstack-infra
2014-02-26T04:38:32  <quantumfly> done
2014-02-26T04:40:17  *** sarob has joined #openstack-infra
2014-02-26T04:43:39  *** sarob has quit IRC
2014-02-26T04:45:08  *** masayukig has joined #openstack-infra
2014-02-26T04:50:03  *** ArxCruz has joined #openstack-infra
2014-02-26T04:50:03  *** ArxCruz has quit IRC
2014-02-26T04:52:26  *** ryanpetrello has joined #openstack-infra
2014-02-26T04:55:29  *** jcooley_ has joined #openstack-infra
2014-02-26T04:57:53  *** boris-42 has quit IRC
2014-02-26T04:59:37  *** boris-42 has joined #openstack-infra
2014-02-26T05:00:11  *** jcooley_ has quit IRC
2014-02-26T05:00:17  *** NikitaKonovalov_ is now known as NikitaKonovalov
2014-02-26T05:01:23  *** masayukig has quit IRC
2014-02-26T05:01:55  *** jcooley_ has joined #openstack-infra
2014-02-26T05:04:55  *** ArxCruz has joined #openstack-infra
2014-02-26T05:05:00  *** ArxCruz has quit IRC
2014-02-26T05:06:25  *** NikitaKonovalov is now known as NikitaKonovalov_
2014-02-26T05:06:50  <jhesketh> thanks quantumfly
2014-02-26T05:07:40  *** chandan_kumar has joined #openstack-infra
2014-02-26T05:09:40  <openstackgerrit> Joshua Hesketh proposed a change to openstack-infra/config: Set up opportunistic bare-metal postgres db  https://review.openstack.org/73461
2014-02-26T05:11:07  *** coolsvap has joined #openstack-infra
2014-02-26T05:12:41  *** jcooley_ has quit IRC
2014-02-26T05:12:49  *** vogxn has joined #openstack-infra
2014-02-26T05:18:02  *** ryanpetrello has quit IRC
2014-02-26T05:18:04  *** jcooley_ has joined #openstack-infra
2014-02-26T05:18:24  *** sarob has joined #openstack-infra
2014-02-26T05:19:56  *** ArxCruz has joined #openstack-infra
2014-02-26T05:20:00  *** ArxCruz has quit IRC
2014-02-26T05:21:51  *** jcooley_ has quit IRC
2014-02-26T05:24:22  *** vogxn has quit IRC
2014-02-26T05:28:51  *** khyati has quit IRC
2014-02-26T05:31:22  *** gokrokve has quit IRC
2014-02-26T05:31:49  *** gokrokve has joined #openstack-infra
2014-02-26T05:33:42  *** talluri has joined #openstack-infra
2014-02-26T05:34:55  *** ArxCruz has joined #openstack-infra
2014-02-26T05:35:00  *** ArxCruz has quit IRC
2014-02-26T05:36:14  *** gokrokve has quit IRC
2014-02-26T05:36:27  *** CaptTofu has joined #openstack-infra
2014-02-26T05:36:50  *** nicedice has quit IRC
2014-02-26T05:38:01  *** gokrokve has joined #openstack-infra
2014-02-26T05:41:16  *** CaptTofu has quit IRC
2014-02-26T05:41:30  *** dolphm is now known as dolphm_503
2014-02-26T05:43:53  *** dkliban has quit IRC
2014-02-26T05:47:39  *** sarob has quit IRC
2014-02-26T05:47:41  *** sdake_ has quit IRC
2014-02-26T05:49:56  *** ArxCruz has joined #openstack-infra
2014-02-26T05:50:06  *** ArxCruz has quit IRC
2014-02-26T05:50:16  *** nati_ueno has joined #openstack-infra
2014-02-26T05:53:14  *** talluri has quit IRC
2014-02-26T05:54:39  *** vogxn has joined #openstack-infra
2014-02-26T05:56:55  *** zhiyan is now known as zhiyan_
2014-02-26T06:00:08  *** vogxn has quit IRC
2014-02-26T06:03:28  *** talluri has joined #openstack-infra
2014-02-26T06:07:47  *** yolanda_ has joined #openstack-infra
2014-02-26T06:09:29  *** talluri has quit IRC
2014-02-26T06:10:58  *** vkozhukalov_ has joined #openstack-infra
2014-02-26T06:11:48  *** dolphm_503 is now known as dolphm
2014-02-26T06:12:37  <openstackgerrit> A change was merged to openstack-infra/devstack-gate: Add oslo.vmware  https://review.openstack.org/75555
2014-02-26T06:16:23  *** vkozhukalov_ has quit IRC
2014-02-26T06:19:34  *** jcooley_ has joined #openstack-infra
2014-02-26T06:20:08  *** gokrokve has quit IRC
2014-02-26T06:20:18  *** gokrokve has joined #openstack-infra
2014-02-26T06:20:33  *** wenlock has quit IRC
2014-02-26T06:21:24  *** gokrokve has quit IRC
2014-02-26T06:23:17  *** dolphm is now known as dolphm_503
2014-02-26T06:23:53  *** talluri has joined #openstack-infra
2014-02-26T06:27:12  *** rwsu has quit IRC
2014-02-26T06:32:36  *** rlandy has joined #openstack-infra
2014-02-26T06:37:41  *** jcooley_ has quit IRC
2014-02-26T06:41:06  *** wchrisj has quit IRC
2014-02-26T06:42:08  <jhesketh> any grenade devs in here able to help me with a problem?
2014-02-26T06:42:59  *** lcheng has quit IRC
2014-02-26T06:46:40  <mordred> Ryan_Lane: yeah - it doesn't do bug tasks though (which is why we're still on launchpad and writing storyboard) - and its integrated code review makes it hard for us to use it integrated with gerrit
2014-02-26T06:46:58  <mordred> Ryan_Lane: but yea - I found it very tempting when looking at it and I tried to make it make sense to use it
2014-02-26T06:47:04  *** pblaho has joined #openstack-infra
2014-02-26T06:47:10  *** denis_makogon has joined #openstack-infra
2014-02-26T06:47:21  <Ryan_Lane> mordred: well, the idea would be to move away from gerrit completely
2014-02-26T06:47:41  <Ryan_Lane> the code review in phabricator looks quite a bit better
2014-02-26T06:47:50  *** talluri_ has joined #openstack-infra
2014-02-26T06:48:05  *** rcarrillocruz has joined #openstack-infra
2014-02-26T06:48:43  *** flaper87|afk is now known as flaper87
2014-02-26T06:48:54  *** sarob has joined #openstack-infra
2014-02-26T06:50:02  *** rcarrillocruz1 has quit IRC
2014-02-26T06:50:10  *** saju_m has joined #openstack-infra
2014-02-26T06:50:13  <quantumfly> phabricator doesn't host repositories, what does that mean?
2014-02-26T06:50:38  <quantumfly> er I guess it is beta. Does that mean the merge in phabricator is beta?
2014-02-26T06:50:59  *** talluri has quit IRC
2014-02-26T06:51:03  *** ildikov_ has quit IRC
2014-02-26T06:51:21  *** valentinbud has joined #openstack-infra
2014-02-26T06:53:12  *** sarob has quit IRC
2014-02-26T06:55:22  *** thuc has quit IRC
2014-02-26T06:55:56  *** thuc has joined #openstack-infra
2014-02-26T06:56:10  *** dolphm_503 is now known as dolphm
2014-02-26T06:58:08  *** mspreitz has quit IRC
2014-02-26T06:59:31  <quantumfly> finally figured out where phabricator self hosts, there is a land revision to hosted repository button
2014-02-26T06:59:40  <quantumfly> so it does seem to have grown that possibly as a beta feature
2014-02-26T07:00:13  *** thuc has quit IRC
2014-02-26T07:05:14  <Ryan_Lane> quantumfly: yep
2014-02-26T07:05:19  <Ryan_Lane> I found that out recently
2014-02-26T07:05:26  <Ryan_Lane> which is what made me reconsider it
2014-02-26T07:05:49  *** dolphm is now known as dolphm_503
2014-02-26T07:06:07  *** rcarrillocruz1 has joined #openstack-infra
2014-02-26T07:06:36  *** sdake_ has joined #openstack-infra
2014-02-26T07:07:26  *** rcarrillocruz has quit IRC
2014-02-26T07:10:46  *** rcarrillocruz has joined #openstack-infra
2014-02-26T07:12:37  *** rcarrillocruz1 has quit IRC
2014-02-26T07:15:16  *** jcooley_ has joined #openstack-infra
2014-02-26T07:20:01  *** sld has joined #openstack-infra
2014-02-26T07:21:29  *** gokrokve has joined #openstack-infra
2014-02-26T07:21:55  *** jcooley_ has quit IRC
2014-02-26T07:24:13  *** nati_ueno has quit IRC
2014-02-26T07:25:37  *** jlibosva has joined #openstack-infra
2014-02-26T07:26:38  *** yolanda_ has quit IRC
2014-02-26T07:26:44  *** gokrokve has quit IRC
2014-02-26T07:27:13  *** NikitaKonovalov_ is now known as NikitaKonovalov
2014-02-26T07:32:16  *** skraynev_afk is now known as skraynev
2014-02-26T07:35:30  *** sabari has quit IRC
2014-02-26T07:36:56  *** CaptTofu has joined #openstack-infra
2014-02-26T07:38:01  *** jcoufal has joined #openstack-infra
2014-02-26T07:41:26  *** CaptTofu has quit IRC
2014-02-26T07:42:21  *** sld has left #openstack-infra
2014-02-26T07:48:14  *** vkozhukalov_ has joined #openstack-infra
2014-02-26T07:50:02  *** sarob has joined #openstack-infra
2014-02-26T07:54:00  *** sarob has quit IRC
2014-02-26T07:56:22  *** luqas has joined #openstack-infra
2014-02-26T07:56:49  *** dolphm_503 is now known as dolphm
2014-02-26T07:57:21  *** shashank_ has joined #openstack-infra
2014-02-26T07:58:38  *** e0ne has joined #openstack-infra
2014-02-26T08:05:07  *** afazekas has joined #openstack-infra
2014-02-26T08:06:25  *** luqas has quit IRC
2014-02-26T08:06:41  *** dolphm is now known as dolphm_503
2014-02-26T08:08:23  *** luqas has joined #openstack-infra
2014-02-26T08:16:49  *** ildikov_ has joined #openstack-infra
2014-02-26T08:18:53  <mordred> Ryan_Lane: sure. but that would be a bit of a large undertaking ...
2014-02-26T08:19:04  <Ryan_Lane> totally agree :)
2014-02-26T08:19:05  <mordred> Ryan_Lane: we'd need to add an event stream so that zuul could do its thing
2014-02-26T08:19:19  <Ryan_Lane> yep. wikimedia is considering phabricator again
2014-02-26T08:19:24  <Ryan_Lane> so some of this would be needed by them too
2014-02-26T08:19:34  <mordred> ah. they don't want to use storyboard from us?
2014-02-26T08:19:44  <Ryan_Lane> they use bugzilla
2014-02-26T08:19:49  <Ryan_Lane> they don't really need a bug tracker
2014-02-26T08:19:52  <mordred> oh
2014-02-26T08:19:59  <Ryan_Lane> they want to replace gerrit
2014-02-26T08:20:00  <mordred> so why would they want to move to phabricator?
2014-02-26T08:20:02  <mordred> ah
2014-02-26T08:20:05  <mordred> well, that would make me sad
2014-02-26T08:20:08  *** jgallard has joined #openstack-infra
2014-02-26T08:20:16  <Ryan_Lane> gerrit has a pretty unresponsive upstream
2014-02-26T08:20:22  <Ryan_Lane> it's UX is crap
2014-02-26T08:20:26  <Ryan_Lane> its*
2014-02-26T08:20:33  <mordred> we have some thoughts on UX for gerrit, fwiw
2014-02-26T08:20:39  <Ryan_Lane> its UX is consistently getting worse
2014-02-26T08:20:42  <mordred> which don't involve upstream patches
2014-02-26T08:20:43  <Ryan_Lane> have you seen the new change page?
2014-02-26T08:20:46  <mordred> yes
2014-02-26T08:21:03  <Ryan_Lane> the only thing gerrit does really well is handle the repos
2014-02-26T08:21:10  <mordred> right. but that's the hard part
2014-02-26T08:21:11  <Ryan_Lane> well, and its gating model
2014-02-26T08:21:13  <mordred> a UI can be added
2014-02-26T08:21:19  <Ryan_Lane> phabricator now handles repos
2014-02-26T08:21:20  <mordred> on top of its APIs
2014-02-26T08:21:54  <Ryan_Lane> gerrits public APIs kind of suck :(
2014-02-26T08:22:11  <mordred> the ssh api is actually quite amazing
2014-02-26T08:22:24  <Ryan_Lane> yeah, the ssh api isn't bad, but I wouldn't build a UI on it
2014-02-26T08:22:26  <mordred> in that it allows the effects of event/callback without the receiving end needingto be pulic
2014-02-26T08:22:28  *** gokrokve has joined #openstack-infra
2014-02-26T08:22:49  <mordred> like, from the event stream perspective - this makes the "run a 3rd party testing" thing work really well
2014-02-26T08:22:57  <Ryan_Lane> I honestly think moving away from gerrit is such a major undertaking that wikimedia may not do it
2014-02-26T08:23:03  <Ryan_Lane> but at some point something's got to change
2014-02-26T08:23:04  <mordred> yeah. it's a BIG amount of work
2014-02-26T08:23:07  <mordred> yeah
2014-02-26T08:23:10  <mordred> well, we're with you on that :)
2014-02-26T08:23:17  <Ryan_Lane> gerrit either needs to improve, or it's got to go
2014-02-26T08:23:30  <mordred> I'm basically being me right now because we agree and would love to work together on that
2014-02-26T08:23:39  <Ryan_Lane> heh
2014-02-26T08:24:08  <mordred> from my perspective, I'd like to replace teh UI first, which would mean that gerrit would be down to being the repo engine
2014-02-26T08:24:09  <Ryan_Lane> I think wikimedia is likely to investigate it for a while
2014-02-26T08:24:14  *** denis_makogon has quit IRC
2014-02-26T08:24:19  <mordred> then replacing the repo engine would be much easier
2014-02-26T08:24:26  <Ryan_Lane> yeah, but at that point, why not use phabricator?
2014-02-26T08:24:35  <mordred> because we can do it piecemeal
2014-02-26T08:24:42  <mordred> like we've been working towards replacing jenkins
2014-02-26T08:24:47  <mordred> even while adding jenkins features
2014-02-26T08:24:55  <mordred> because we've gota  large production deploy
2014-02-26T08:25:05  <Ryan_Lane> ah, so you'd switch out the ui, then you'd switch to phabricator?
2014-02-26T08:25:07  <mordred> we can't just replace a large porition all in one go
2014-02-26T08:25:09  <mordred> no
2014-02-26T08:25:10  <Ryan_Lane> then you'd switch the ui again?
2014-02-26T08:25:20  <mordred> I wouldn't switch to phabricator at that point
2014-02-26T08:25:28  <Ryan_Lane> what would manage the repos?
2014-02-26T08:25:40  <Ryan_Lane> I think phabricator is doing an amazing job with the UI work
2014-02-26T08:25:44  <mordred> that's what I'm saying - at that point, what we'd need is an api service that can manage repos
2014-02-26T08:26:03  <mordred> sure they are - but they're also a big thing adn I don't need most of what they're doing
2014-02-26T08:26:05  <mordred> it's too hard
2014-02-26T08:26:11  <mordred> if we were starting from scratch today, sure
2014-02-26T08:26:16  * Ryan_Lane nods
2014-02-26T08:26:27  <mordred> but they're pitching a whole worldview
2014-02-26T08:26:30  <mordred> which is great
2014-02-26T08:26:32  <Ryan_Lane> so basically write something new from scratch?
2014-02-26T08:26:33  <mordred> it's what we're doing too
2014-02-26T08:26:34  <mordred> yeah
2014-02-26T08:26:39  <mordred> all we'd need is an api server
2014-02-26T08:26:41  <Ryan_Lane> that scares me ;)
2014-02-26T08:26:45  <mordred> we're good at writing those around here
2014-02-26T08:27:01  <Ryan_Lane> an api server that would manage repos?
2014-02-26T08:27:05  <mordred> yeah
2014-02-26T08:27:14  *** gokrokve has quit IRC
2014-02-26T08:27:25  <Ryan_Lane> well, it would surely be nice to have a python alternative
2014-02-26T08:27:30  <mordred> or, a scale-out system that can manage repos across multiple hosts - gerrit it too monolithic
2014-02-26T08:27:32  <mordred> is
2014-02-26T08:27:41  <Ryan_Lane> I just worry that it would take ages to reach feature parity with gerrit or phabricator
2014-02-26T08:27:47  <mordred> I agree
2014-02-26T08:27:53  <mordred> the question is - which features do we actually need
2014-02-26T08:28:12  <Ryan_Lane> ah. so... I've been thinking about scaling git across systems...
2014-02-26T08:28:28  <mordred> and/or which ones can we do away with if we're not working on a generalized solution that needs a bunch of customizability
2014-02-26T08:28:30  <mordred> yeah
2014-02-26T08:28:32  <mordred> ?
2014-02-26T08:28:38  <Ryan_Lane> but I'll just wait till I have something implemented till I discuss it :)
2014-02-26T08:28:49  <mordred> ok. I'm in favor of thoughts on scaling git
2014-02-26T08:29:00  <mordred> Ryan_Lane: have you been following the recent zuul merger work?
2014-02-26T08:29:04  <Ryan_Lane> nope
2014-02-26T08:29:16  <Ryan_Lane> but I have a deployment system using salt that can easily be extended to scale out git
2014-02-26T08:29:35  <Ryan_Lane> and already have a game plan for making it work for that
2014-02-26T08:29:44  <Ryan_Lane> what does zuul merger do?
2014-02-26T08:29:58  * Ryan_Lane is very interested in zuul, but can't use it
2014-02-26T08:33:39  <openstackgerrit> Flavio Percoco proposed a change to openstack-infra/config: Don't enable oslo-incubator py33 for stable/havana  https://review.openstack.org/76464
2014-02-26T08:33:55  *** sergmelikyan has quit IRC
2014-02-26T08:36:33  <mordred> Ryan_Lane: it offloads the merging workload from zuul itself into a set of gearman workers
2014-02-26T08:36:56  <avishay> anyone knows why jenkins has tried checked this patch like 20 times in a row?  https://review.openstack.org/#/c/49755/
2014-02-26T08:37:00  <Ryan_Lane> ah. neat.
2014-02-26T08:37:03  <mordred> Ryan_Lane: we reached the point where the work of performing merges was a scaling bottleneck
2014-02-26T08:37:14  <Ryan_Lane> that's a good bottleneck to have ;)
2014-02-26T08:37:26  <mordred> not aroudn feature freeze time it's not :)
2014-02-26T08:37:33  *** protux has joined #openstack-infra
2014-02-26T08:37:35  <Ryan_Lane> :D
2014-02-26T08:39:51  *** andreaf has joined #openstack-infra
2014-02-26T08:47:19  *** talluri_ has quit IRC
2014-02-26T08:48:41  *** talluri has joined #openstack-infra
2014-02-26T08:50:49  *** ociuhandu has joined #openstack-infra
2014-02-26T08:52:34  *** ociuhandu has quit IRC
2014-02-26T08:52:59  *** talluri has quit IRC
2014-02-26T08:53:08  <openstackgerrit> Nikita Konovalov proposed a change to openstack-infra/storyboard-webclient: Fix API launch  https://review.openstack.org/76467
2014-02-26T08:56:22  *** thuc has joined #openstack-infra
2014-02-26T08:57:38  *** dolphm_503 is now known as dolphm
2014-02-26T08:58:34  *** protux has quit IRC
2014-02-26T08:59:38  <openstackgerrit> sahid proposed a change to openstack-infra/config: Adds new project Warm  https://review.openstack.org/76247
2014-02-26T09:01:00  *** vogxn has joined #openstack-infra
2014-02-26T09:03:59  *** jcooley_ has joined #openstack-infra
2014-02-26T09:04:56  *** jpich has joined #openstack-infra
2014-02-26T09:07:31  *** rossella_s has joined #openstack-infra
2014-02-26T09:09:01  *** shashank_ has quit IRC
2014-02-26T09:09:09  *** dolphm is now known as dolphm_503
2014-02-26T09:09:23  *** jcooley_ has quit IRC
2014-02-26T09:11:56  *** katyafervent_awa is now known as katyafervent
2014-02-26T09:12:28  <lifeless> hello infra! https://bugs.launchpad.net/tripleo/+bug/1284054 - the ticket was updated but not set to fixcommitted.
2014-02-26T09:12:45  <lifeless> quantumfly: ^ food for ? tomorrow morning:)
2014-02-26T09:13:12  <ttx> lifeless: Partial-Bug: does comment but not change status
2014-02-26T09:13:14  <lifeless> oh nvm, 'partial bug'
2014-02-26T09:13:20  <lifeless> ttx: hah, junix - thanks
2014-02-26T09:14:09  *** yassine has joined #openstack-infra
2014-02-26T09:14:53  *** derekh has joined #openstack-infra
2014-02-26T09:15:59  *** marun has quit IRC
2014-02-26T09:16:06  <lifeless> bah, jinx
2014-02-26T09:16:59  <SpamapS> hrm...
2014-02-26T09:17:19  <SpamapS> does tox 1.7.0 require significant changes to tox.ini?
2014-02-26T09:17:26  <SpamapS> tox.ConfigError: ConfigError: substitution key 'posargs' not found
2014-02-26T09:17:59  <SpamapS> appears so
2014-02-26T09:18:18  *** talluri has joined #openstack-infra
2014-02-26T09:18:50  *** thuc has quit IRC
2014-02-26T09:20:34  *** jcooley_ has joined #openstack-infra
2014-02-26T09:22:06  *** luqas has quit IRC
2014-02-26T09:22:09  *** locke105 has quit IRC
2014-02-26T09:22:31  *** hashar has joined #openstack-infra
2014-02-26T09:22:32  *** hashar has quit IRC
2014-02-26T09:22:36  *** gokrokve has joined #openstack-infra
2014-02-26T09:23:29  *** talluri has quit IRC
2014-02-26T09:24:35  <openstackgerrit> Nikita Konovalov proposed a change to openstack-infra/storyboard-webclient: Fix API launch  https://review.openstack.org/76467
2014-02-26T09:25:24  *** jcooley_ has quit IRC
2014-02-26T09:25:28  *** dmakogon_ is now known as denis_makogon
2014-02-26T09:25:50  *** rcarrillocruz1 has joined #openstack-infra
2014-02-26T09:25:53  *** hashar has joined #openstack-infra
2014-02-26T09:26:18  *** fbo_away is now known as fbo
2014-02-26T09:27:14  *** gokrokve has quit IRC
2014-02-26T09:27:28  *** rcarrillocruz has quit IRC
2014-02-26T09:30:27  <lifeless> SpamapS: 1.7.0 is broken
2014-02-26T09:30:30  <lifeless> SpamapS: AIUI
2014-02-26T09:31:49  *** talluri has joined #openstack-infra
2014-02-26T09:32:21  <SpamapS> of course
2014-02-26T09:32:23  <SpamapS> pycon is coming
2014-02-26T09:32:26  <SpamapS> have to release new features
2014-02-26T09:32:42  <rcarrillocruz1> heh
2014-02-26T09:32:58  *** valentinbud has quit IRC
2014-02-26T09:33:12  *** talluri has quit IRC
2014-02-26T09:33:35  *** talluri has joined #openstack-infra
2014-02-26T09:34:16  <openstackgerrit> Martin Mgr proposed a change to openstack-infra/config: Watch also havana branch for packstack  https://review.openstack.org/76206
2014-02-26T09:34:27  *** alexpilotti has joined #openstack-infra
2014-02-26T09:35:56  *** luqas has joined #openstack-infra
2014-02-26T09:36:50  *** jamielennox has quit IRC
2014-02-26T09:37:50  *** CaptTofu has joined #openstack-infra
2014-02-26T09:37:59  *** talluri has quit IRC
2014-02-26T09:38:15  *** yaguang has quit IRC
2014-02-26T09:39:19  *** jamielennox has joined #openstack-infra
2014-02-26T09:42:27  *** CaptTofu has quit IRC
2014-02-26T09:43:29  *** ianw has quit IRC
2014-02-26T09:45:16  *** NikitaKonovalov is now known as NikitaKonovalov_
2014-02-26T09:47:01  *** johnthetubaguy has joined #openstack-infra
2014-02-26T09:47:58  *** ianw has joined #openstack-infra
2014-02-26T09:50:17  *** bogdando has quit IRC
2014-02-26T09:50:27  *** valentinbud has joined #openstack-infra
2014-02-26T09:51:16  *** rcarrillocruz has joined #openstack-infra
2014-02-26T09:52:20  *** bogdando has joined #openstack-infra
2014-02-26T09:52:41  *** rcarrillocruz1 has quit IRC
2014-02-26T09:52:58  *** jp_at_hp has joined #openstack-infra
2014-02-26T09:59:51  *** jcooley_ has joined #openstack-infra
2014-02-26T10:00:06  *** dolphm_503 is now known as dolphm
2014-02-26T10:00:42  *** rcarrillocruz1 has joined #openstack-infra
2014-02-26T10:03:07  *** rcarrillocruz has quit IRC
2014-02-26T10:03:16  *** shardy is now known as shardy_afk
2014-02-26T10:04:29  *** SergeyLukjanov has quit IRC
2014-02-26T10:04:50  *** SergeyLukjanov has joined #openstack-infra
2014-02-26T10:06:14  *** davidhadas has quit IRC
2014-02-26T10:06:17  *** ociuhandu has joined #openstack-infra
2014-02-26T10:06:41  *** jcooley_ has quit IRC
2014-02-26T10:08:02  *** jlibosva has quit IRC
2014-02-26T10:08:19  *** jlibosva has joined #openstack-infra
2014-02-26T10:09:54  *** dolphm is now known as dolphm_503
2014-02-26T10:12:07  *** che-arne has joined #openstack-infra
2014-02-26T10:12:33  *** johnthetubaguy has quit IRC
2014-02-26T10:12:43  *** johnthetubaguy has joined #openstack-infra
2014-02-26T10:15:58  *** luqas has quit IRC
2014-02-26T10:18:03  *** mkoderer has joined #openstack-infra
2014-02-26T10:19:32  *** david-lyle has quit IRC
2014-02-26T10:21:16  *** mrda is now known as mrda_away
2014-02-26T10:25:23  *** dizquierdo has joined #openstack-infra
2014-02-26T10:30:31  *** NikitaKonovalov_ is now known as NikitaKonovalov
2014-02-26T10:32:37  <openstackgerrit> Nikita Konovalov proposed a change to openstack-infra/storyboard-webclient: Add token header to requests  https://review.openstack.org/75961
2014-02-26T10:39:00  *** rcarrillocruz has joined #openstack-infra
2014-02-26T10:41:30  *** davidhadas has joined #openstack-infra
2014-02-26T10:42:11  *** rcarrillocruz1 has quit IRC
2014-02-26T10:47:11  <openstackgerrit> Nikita Konovalov proposed a change to openstack-infra/storyboard-webclient: Auth support  https://review.openstack.org/73219
2014-02-26T10:47:26  <openstackgerrit> Nikita Konovalov proposed a change to openstack-infra/storyboard-webclient: Add token header to requests  https://review.openstack.org/75961
2014-02-26T10:51:19  <openstackgerrit> Flavio Percoco proposed a change to openstack-infra/devstack-gate: Archive config files along with logs  https://review.openstack.org/69344
2014-02-26T10:52:23  *** luqas has joined #openstack-infra
2014-02-26T10:55:54  *** thuc has joined #openstack-infra
2014-02-26T11:00:51  *** dolphm_503 is now known as dolphm
2014-02-26T11:00:59  *** thuc has quit IRC
2014-02-26T11:03:36  *** jaypipes has quit IRC
2014-02-26T11:03:43  *** ianw has quit IRC
2014-02-26T11:04:05  *** jamielennox has quit IRC
2014-02-26T11:05:29  *** jamielennox has joined #openstack-infra
2014-02-26T11:05:39  *** ianw has joined #openstack-infra
2014-02-26T11:06:11  *** rossella_s has quit IRC
2014-02-26T11:10:30  *** dolphm is now known as dolphm_503
2014-02-26T11:12:00  *** Xurong has quit IRC
2014-02-26T11:12:04  *** mfer has joined #openstack-infra
2014-02-26T11:19:00  *** ociuhandu has quit IRC
2014-02-26T11:22:26  *** jhesketh_ has quit IRC
2014-02-26T11:22:38  *** gokrokve has joined #openstack-infra
2014-02-26T11:22:43  *** jerryz has quit IRC
2014-02-26T11:22:55  *** rcarrillocruz1 has joined #openstack-infra
2014-02-26T11:25:21  <katyafervent> Hi everybody!
2014-02-26T11:25:26  *** rcarrillocruz has quit IRC
2014-02-26T11:27:14  *** gokrokve has quit IRC
2014-02-26T11:27:31  <katyafervent> Does anyone have experience in renaming repository? Will history be saved?
2014-02-26T11:30:07  <SergeyLukjanov> katyafervent, hey
2014-02-26T11:30:21  <SergeyLukjanov> katyafervent, are you talking about your murano repos at stackforge?
2014-02-26T11:30:32  <katyafervent> SergeyLukjanov, yes)
2014-02-26T11:31:21  <katyafervent> we want to start repository reorganization but want history to be kept
2014-02-26T11:31:48  <SergeyLukjanov> katyafervent, review history will be saved, but renaming requires gerrit shutdown, so, it'll be postponed and batched with other renaming requests
2014-02-26T11:32:16  <SergeyLukjanov> I think the next renaming batch will be for renaming savanna
2014-02-26T11:32:47  <SergeyLukjanov> katyafervent, if you'd like to merge some repos and keep their review history than I think that it's impossible
2014-02-26T11:32:51  *** jhesketh has quit IRC
2014-02-26T11:33:18  <ruhe> katyafervent: another option would be to create new repo named "murano". merge all the other repos to the new repo, then remove/deprecate old repos
2014-02-26T11:33:39  <SergeyLukjanov> ruhe, yup
2014-02-26T11:34:22  *** rcarrillocruz has joined #openstack-infra
2014-02-26T11:34:53  <SergeyLukjanov> katyafervent, if you'd like to keep git history the only way is to manually merge git trees with help of git-filter-branch
2014-02-26T11:35:04  <katyafervent> and what about commit history?
2014-02-26T11:35:28  <katyafervent> Oh, ok
2014-02-26T11:36:39  *** rcarrillocruz1 has quit IRC
2014-02-26T11:38:23  *** BobBallAway is now known as BobBall
2014-02-26T11:38:54  *** CaptTofu has joined #openstack-infra
2014-02-26T11:40:13  <openstackgerrit> sahid proposed a change to openstack-infra/config: new-project: warm  https://review.openstack.org/76247
2014-02-26T11:40:35  *** sergmelikyan has joined #openstack-infra
2014-02-26T11:43:38  *** CaptTofu has quit IRC
2014-02-26T11:46:44  *** matsuhashi has quit IRC
2014-02-26T11:48:04  *** jcooley_ has joined #openstack-infra
2014-02-26T11:50:02  *** yamahata has quit IRC
2014-02-26T11:52:34  *** salv-orlando has quit IRC
2014-02-26T11:52:51  *** salv-orlando has joined #openstack-infra
2014-02-26T11:53:47  *** jgallard has quit IRC
2014-02-26T11:54:18  *** sergmelikyan has quit IRC
2014-02-26T11:54:23  *** jcooley_ has quit IRC
2014-02-26T11:57:10  *** sergmelikyan has joined #openstack-infra
2014-02-26T11:57:19  *** mfer has quit IRC
2014-02-26T11:59:53  <openstackgerrit> Ilya Sviridov proposed a change to openstack-infra/config: Added new MagnetoDB project to Stackforge  https://review.openstack.org/71308
2014-02-26T12:01:16  *** rfolco has joined #openstack-infra
2014-02-26T12:01:35  *** dolphm_503 is now known as dolphm
2014-02-26T12:02:14  *** CaptTofu has joined #openstack-infra
2014-02-26T12:02:18  <sdague> SergeyLukjanov: so the rename thing, why do we need to shut down gerrit for that again? Why don't we just import it as a new repo?
2014-02-26T12:02:46  <SergeyLukjanov> sdague, in case of renaming we're update gerrit's db to keep all reviews
2014-02-26T12:02:52  <SergeyLukjanov> sdague, morning
2014-02-26T12:02:59  *** coolsvap has quit IRC
2014-02-26T12:03:01  <sdague> SergeyLukjanov: ah, right.
2014-02-26T12:05:34  *** luqas has quit IRC
2014-02-26T12:07:40  *** luqas has joined #openstack-infra
2014-02-26T12:08:40  *** sergmelikyan has quit IRC
2014-02-26T12:11:26  *** dolphm is now known as dolphm_503
2014-02-26T12:12:47  *** rcarrillocruz1 has joined #openstack-infra
2014-02-26T12:14:26  *** rcarrillocruz has quit IRC
2014-02-26T12:14:29  <dims> sdague, Good morning. I have 2 +2's on https://review.openstack.org/#/c/75539/ but had to rebase, can you please approve when you get a chance?
2014-02-26T12:15:40  <sdague> done
2014-02-26T12:17:22  <dims> thanks a ton
2014-02-26T12:17:30  <lifeless> erm
2014-02-26T12:17:34  <lifeless> I'm clearly up way to late
2014-02-26T12:18:11  <dims> lifeless, good night :)
2014-02-26T12:22:28  *** gokrokve has joined #openstack-infra
2014-02-26T12:24:32  *** cody-somerville has quit IRC
2014-02-26T12:24:47  *** hashar has quit IRC
2014-02-26T12:27:57  *** gokrokve has quit IRC
2014-02-26T12:30:57  *** tsufiev___ has joined #openstack-infra
2014-02-26T12:32:39  *** zhiyan_ is now known as zhiyan
2014-02-26T12:32:47  *** zul has joined #openstack-infra
2014-02-26T12:36:15  *** rossella_s has joined #openstack-infra
2014-02-26T12:36:46  *** luqas has quit IRC
2014-02-26T12:42:14  *** valentinbud has quit IRC
2014-02-26T12:43:37  *** CaptTofu has quit IRC
2014-02-26T12:43:45  *** CaptTofu has joined #openstack-infra
2014-02-26T12:54:11  *** mbacchi has joined #openstack-infra
2014-02-26T12:57:25  *** dolphm_503 is now known as dolphm
2014-02-26T12:58:03  *** lcostantino has joined #openstack-infra
2014-02-26T12:58:16  *** beagles has quit IRC
2014-02-26T13:00:01  *** dstanek has joined #openstack-infra
2014-02-26T13:02:15  *** smarcet has joined #openstack-infra
2014-02-26T13:03:28  *** vogxn has quit IRC
2014-02-26T13:05:37  *** johnthetubaguy has quit IRC
2014-02-26T13:05:41  *** johnthetubaguy1 has joined #openstack-infra
2014-02-26T13:08:44  *** marun has joined #openstack-infra
2014-02-26T13:09:25  *** yamahata has joined #openstack-infra
2014-02-26T13:13:15  *** rfolco has quit IRC
2014-02-26T13:19:16  *** valentinbud has joined #openstack-infra
2014-02-26T13:20:50  *** NikitaKonovalov is now known as NikitaKonovalov_
2014-02-26T13:21:13  <anteaya> avishay: thank you for asking about https://review.openstack.org/#/c/49755/ I am also curious as to why Jenkins was caught in a perpetual testing loop there.
2014-02-26T13:21:20  *** e0ne has quit IRC
2014-02-26T13:21:34  <avishay> anteaya: i hope it's over :)
2014-02-26T13:21:35  *** e0ne has joined #openstack-infra
2014-02-26T13:22:26  *** gokrokve has joined #openstack-infra
2014-02-26T13:22:39  <anteaya> I was just checking, I don't see it in the check queue now.
2014-02-26T13:22:55  <anteaya> Abandoning it might have stopped the cycle.
2014-02-26T13:24:30  <anteaya> The -2 after 2 months of inactivity appears to have been the trigger.
2014-02-26T13:25:08  *** johnthetubaguy1 is now known as johnthetubaguy
2014-02-26T13:26:02  *** mrmartin has joined #openstack-infra
2014-02-26T13:26:09  <openstackgerrit> Julien Vey proposed a change to openstack/requirements: Add Docker requirement  https://review.openstack.org/76535
2014-02-26T13:27:29  *** gokrokve has quit IRC
2014-02-26T13:28:22  *** sdake has quit IRC
2014-02-26T13:28:55  *** sdake has joined #openstack-infra
2014-02-26T13:29:27  *** rfolco has joined #openstack-infra
2014-02-26T13:29:48  *** ociuhandu has joined #openstack-infra
2014-02-26T13:31:38  *** hashar has joined #openstack-infra
2014-02-26T13:34:26  *** rfolco has quit IRC
2014-02-26T13:35:01  *** ArxCruz has joined #openstack-infra
2014-02-26T13:36:36  *** yamahata has quit IRC
2014-02-26T13:36:55  *** jcooley_ has joined #openstack-infra
2014-02-26T13:37:08  *** yamahata has joined #openstack-infra
2014-02-26T13:37:31  *** dprince has joined #openstack-infra
2014-02-26T13:38:10  *** NikitaKonovalov_ is now known as NikitaKonovalov
2014-02-26T13:40:04  *** jgallard has joined #openstack-infra
2014-02-26T13:40:07  *** sandywalsh has quit IRC
2014-02-26T13:40:49  *** thuc has joined #openstack-infra
2014-02-26T13:41:15  *** nosnos has quit IRC
2014-02-26T13:42:20  *** zul has quit IRC
2014-02-26T13:43:56  *** lcheng has joined #openstack-infra
2014-02-26T13:44:24  *** zul has joined #openstack-infra
2014-02-26T13:44:47  *** dkranz has joined #openstack-infra
2014-02-26T13:45:11  <avishay> anteaya: strange, but ok :)
2014-02-26T13:45:14  *** thuc has quit IRC
2014-02-26T13:46:58  *** ArxCruz has quit IRC
2014-02-26T13:47:41  <anteaya> avishay: when foobio is around he may have more
2014-02-26T13:47:46  <anteaya> at least I hope so
2014-02-26T13:49:24  *** dhellman_ has joined #openstack-infra
2014-02-26T13:49:30  *** dhellman_ has quit IRC
2014-02-26T13:49:40  <avishay> anteaya: ok cool, just thought i'd let you guys know
2014-02-26T13:49:55  *** rfolco has joined #openstack-infra
2014-02-26T13:50:19  <anteaya> glad you did thank you
2014-02-26T13:51:50  <avishay> sure
2014-02-26T13:52:04  *** shardy_afk is now known as shardy
2014-02-26T13:53:06  *** sandywalsh has joined #openstack-infra
2014-02-26T13:53:42  *** mfer has joined #openstack-infra
2014-02-26T13:54:53  *** rfolco has quit IRC
2014-02-26T13:54:58  *** mestery has quit IRC
2014-02-26T13:55:09  *** thuc_ has joined #openstack-infra
2014-02-26T13:56:10  <foobio> something critical?
2014-02-26T13:59:19  *** weshay has joined #openstack-infra
2014-02-26T13:59:54  *** ArxCruz has joined #openstack-infra
2014-02-26T14:00:03  <anteaya> no
2014-02-26T14:00:06  <anteaya> nothing critical
2014-02-26T14:00:12  <anteaya> take your time, it can wait
2014-02-26T14:00:57  *** bknudson has quit IRC
2014-02-26T14:03:22  *** zehicle_at_dell has quit IRC
2014-02-26T14:03:57  <foobio> SpamapS: lifeless: https://bitbucket.org/hpk42/tox/pull-request/85/fix-command-expansion-and-parsing/activity
2014-02-26T14:08:57  *** ryanpetrello has joined #openstack-infra
2014-02-26T14:10:40  <ArxCruz> foobio: around ?
2014-02-26T14:11:00  <foobio> ArxCruz: yeah, just checking some logs and coming up to speed for the morning... what's up?
2014-02-26T14:11:07  <ArxCruz> foobio: http://paste.openstack.org/show/69859/ I have this in my layout.yaml, I though it would report only success jobs, but it's reporting failures too
2014-02-26T14:11:14  <ArxCruz> Did I something wrong ?
2014-02-26T14:12:24  <foobio> ArxCruz: do you have an example of a change it commented on?
2014-02-26T14:12:33  *** jeckersb_gone is now known as jeckersb
2014-02-26T14:12:37  <ArxCruz> foobio: https://review.openstack.org/#/c/76411
2014-02-26T14:14:50  *** lcheng has quit IRC
2014-02-26T14:14:56  <foobio> ArxCruz: i think the "
2014-02-26T14:14:56  *** mestery has joined #openstack-infra
2014-02-26T14:14:58  <foobio> er
2014-02-26T14:15:11  <foobio> the "Build succeeded." there implies that zuul reported it as a success
2014-02-26T14:15:30  <foobio> because all the jobs were non-voting\
2014-02-26T14:15:30  *** dolphm is now known as dolphm_503
2014-02-26T14:15:59  <ArxCruz> foobio: so, there's no way to don't report?
2014-02-26T14:16:36  <foobio> ArxCruz: i think if you changed one or more of those jobs to be a voting job, the way your layout.yaml is configured zuul will add a comment (but not a vote) on success and will do nothing on failure
2014-02-26T14:16:53  *** jcooley_ has quit IRC
2014-02-26T14:16:59  <ArxCruz> foobio: let me save this conversation :P
2014-02-26T14:17:04  <ArxCruz> I will do that :)
2014-02-26T14:17:28  <foobio> right now it's commenting because you've configured it to leave a comment on success, and with all jobs non-voting, any run will be interpreted by zuul as a success even if the jobs themselves failed (because they're non-voting jobs)
2014-02-26T14:17:57  <ArxCruz> got it
2014-02-26T14:18:37  <foobio> "non-voting" for a job merely indicates whether it contributes to the completion result, but the actual verified: 1 or -1 is what causes zuul itself to leave a vote
2014-02-26T14:18:41  <ArxCruz> ok, so, if I mark one job as voting, it will report, only if both jobs success, or it will report if the voting one succeed ?
2014-02-26T14:19:02  *** julim has joined #openstack-infra
2014-02-26T14:19:24  <foobio> the way you have it configured right now, any one voting job which fails will cause your zuul not to comment
2014-02-26T14:19:26  *** vponomaryov has joined #openstack-infra
2014-02-26T14:19:37  <foobio> even if one or more other voting jobs succeed
2014-02-26T14:20:05  <foobio> basically as long as at least one voting job fails, zuul considers the overall result to be a failure
2014-02-26T14:20:21  <foobio> if all voting jobs succeed, zuul considers that to be a success
2014-02-26T14:20:30  *** bknudson has joined #openstack-infra
2014-02-26T14:20:37  <foobio> if no jobs are voting, zuul interprets that as a success as well
2014-02-26T14:20:40  *** mriedem has joined #openstack-infra
2014-02-26T14:21:36  <foobio> hopefully that makes sense
2014-02-26T14:22:16  <foobio> ArxCruz: obligatory documentation link... http://ci.openstack.org/zuul/zuul.html#pipelines
2014-02-26T14:22:26  *** gokrokve has joined #openstack-infra
2014-02-26T14:22:35  *** dims has quit IRC
2014-02-26T14:22:55  <ArxCruz> foobio: okay, so I need to turn voting for both jobs :)
2014-02-26T14:23:09  <ArxCruz> foobio: thanks, I read that before, didn't pay attention for the votting/non-votting
2014-02-26T14:23:09  <foobio> that sounds like what you want, yes
2014-02-26T14:24:09  <ArxCruz> foobio: thanks!
2014-02-26T14:25:08  *** dolphm_503 is now known as dolphm
2014-02-26T14:25:16  <foobio> ArxCruz: reviewing the documentation there, the "voting" parameter for jobs could definitely stand to have a more detailed description. feel free to contribute a patch to the documentation in the openstack-infra/zuul project or open a low-hanging-fruit bug against the zuul project in launchpad
2014-02-26T14:25:35  <ArxCruz> foobio: ok, cool
2014-02-26T14:25:53  <anteaya> foobio: as an fyi I need to go to town sometime this week for a few hours and since jim will be away Thurs and Fri, I thought I would go today
2014-02-26T14:26:02  <anteaya> I'll probably head out around noon
2014-02-26T14:26:15  <foobio> anteaya: okay, sounds good
2014-02-26T14:26:18  <anteaya> thanks
2014-02-26T14:26:49  <foobio> ArxCruz: we always love documentation improvements, and the people best positioned to point out where documentation is lacking are those who are encountering these systems for the first time
2014-02-26T14:27:14  *** gokrokve has quit IRC
2014-02-26T14:27:54  <ArxCruz> foobio: ;) okay I will work on that
2014-02-26T14:27:59  <anteaya> and my brain is starting to feel like my brain again, I'm so happy
2014-02-26T14:29:16  <openstackgerrit> Ziad Sawalha proposed a change to openstack-infra/config: Add satori as a new project  https://review.openstack.org/73667
2014-02-26T14:30:17  <foobio> ArxCruz: so yeah, if you want to propose a patch for that, we can easily help correct any misstatements or improve the wording
2014-02-26T14:30:30  <foobio> once it's in review
2014-02-26T14:30:53  *** dolphm is now known as dolphm_503
2014-02-26T14:30:58  *** wchrisj has joined #openstack-infra
2014-02-26T14:31:01  *** rfolco has joined #openstack-infra
2014-02-26T14:32:19  *** e0ne_ has joined #openstack-infra
2014-02-26T14:32:28  *** thuc_ has quit IRC
2014-02-26T14:33:05  *** thuc has joined #openstack-infra
2014-02-26T14:33:49  *** dims has joined #openstack-infra
2014-02-26T14:34:26  <openstackgerrit> Sahdev Zala proposed a change to openstack-infra/config: New StackForge project heat-translator  https://review.openstack.org/75988
2014-02-26T14:34:36  *** esker has joined #openstack-infra
2014-02-26T14:36:09  <vponomaryov> jbooboo, foobio, mordred: hello, I have little bugfix - https://review.openstack.org/#/c/76115/ , could you review it please?
2014-02-26T14:36:31  *** e0ne has quit IRC
2014-02-26T14:37:14  *** thuc has quit IRC
2014-02-26T14:37:15  *** dkliban has joined #openstack-infra
2014-02-26T14:37:28  *** prad_ has joined #openstack-infra
2014-02-26T14:37:44  <anteaya> foobio: so the item I had was Jenkins seemed to be caught in a check testing loop on this patch: https://review.openstack.org/#/c/49755/
2014-02-26T14:37:58  <anteaya> was wondering what you thought would be the fix for this situation
2014-02-26T14:38:16  <foobio> anteaya: yeah, i saw--i've been looking at the zuul logs trying to figure out why it thought it should recheck that
2014-02-26T14:38:39  <anteaya> k thanks
2014-02-26T14:40:27  *** jpeeler has quit IRC
2014-02-26T14:41:17  <foobio> i think we need the logs to start including more of the parameters zuul considers when deciding whether to enqueue a change
2014-02-26T14:43:54  <anteaya> hmmmm
2014-02-26T14:44:26  *** alexpilotti_ has joined #openstack-infra
2014-02-26T14:44:57  <anteaya> so nothing useful
2014-02-26T14:45:58  <anteaya> should i file a bug?
2014-02-26T14:46:20  *** yamahata has quit IRC
2014-02-26T14:46:50  *** yamahata has joined #openstack-infra
2014-02-26T14:47:02  *** alexpilotti has quit IRC
2014-02-26T14:47:02  *** alexpilotti_ is now known as alexpilotti
2014-02-26T14:47:27  *** freyes has joined #openstack-infra
2014-02-26T14:47:49  <foobio> i'm still digging
2014-02-26T14:47:56  <anteaya> k
2014-02-26T14:51:50  *** alexpilotti has quit IRC
2014-02-26T14:52:08  *** krotscheck has joined #openstack-infra
2014-02-26T14:52:48  *** jcoufal has quit IRC
2014-02-26T14:55:43  <foobio> it definitely seems to have been responding to its own comment events... http://paste.openstack.org/show/69865/
2014-02-26T14:57:01  <foobio> when it gets gerrit information on the change, we should probably have debug log entries mentioning some of the things it looks for like age of its own most recent previous comment, existing votes on the change and so on
2014-02-26T14:59:56  *** wenlock has joined #openstack-infra
2014-02-26T14:59:59  <anteaya> hmmmm
2014-02-26T15:00:38  <anteaya> I wonder if the fact that the check tests returned VRIF:1 sent it back to check
2014-02-26T15:00:56  <anteaya> but why would it send it back to check if that is the case?
2014-02-26T15:01:16  <anteaya> yes, more logs would help
2014-02-26T15:01:56  *** e0ne has joined #openstack-infra
2014-02-26T15:02:17  *** saju_m has quit IRC
2014-02-26T15:02:20  *** gokrokve has joined #openstack-infra
2014-02-26T15:02:37  <foobio> because while this could be caused by gerrit misreporting or zuul misinterpreting the re
2014-02-26T15:02:42  <foobio> sults
2014-02-26T15:02:56  <foobio> we don't really know what they were
2014-02-26T15:03:58  <foobio> anteaya: if you want to open a bug against zuul on launchpad and paste that bit of logs in along with the observed behavior and link to the change, that would be a wonderful help
2014-02-26T15:04:16  <anteaya> I can do that
2014-02-26T15:05:02  *** e0ne_ has quit IRC
2014-02-26T15:05:20  *** jeckersb is now known as jeckersb_gone
2014-02-26T15:06:02  *** wenlock has quit IRC
2014-02-26T15:09:26  *** rossella_s has quit IRC
2014-02-26T15:10:08  *** jgrimm has joined #openstack-infra
2014-02-26T15:11:14  *** jeckersb_gone is now known as jeckersb
2014-02-26T15:12:43  <SergeyLukjanov> foobio, anteaya, could you, please, take a look on https://review.openstack.org/#/c/76312 when have some time
2014-02-26T15:13:48  *** pmathews has joined #openstack-infra
2014-02-26T15:15:11  *** luqas has joined #openstack-infra
2014-02-26T15:15:45  *** pblaho` has joined #openstack-infra
2014-02-26T15:16:37  *** pblaho has quit IRC
2014-02-26T15:16:41  <anteaya> foobio: https://bugs.launchpad.net/zuul/+bug/1285210
2014-02-26T15:16:45  <anteaya> hi SergeyLukjanov
2014-02-26T15:16:52  *** Sukhdev has joined #openstack-infra
2014-02-26T15:16:52  <foobio> anteaya: thanks!
2014-02-26T15:16:54  * anteaya clicks on 76312
2014-02-26T15:16:56  <anteaya> np
2014-02-26T15:16:59  <SergeyLukjanov> anteaya, hey, morning
2014-02-26T15:17:03  <SergeyLukjanov> anteaya, thx
2014-02-26T15:17:03  <anteaya> foobio: thanks for teeing it up
2014-02-26T15:17:18  <foobio> jbooboo: you also may be interested in zuul bug https://launchpad.net/bugs/1285210 when you're up and about
2014-02-26T15:17:37  <SergeyLukjanov> I've shared my idea one (several?) days ago in the channel, so, that's the first patch
2014-02-26T15:17:44  *** rossella_s has joined #openstack-infra
2014-02-26T15:17:59  <SergeyLukjanov> and there three more on the road
2014-02-26T15:18:00  *** rwsu has joined #openstack-infra
2014-02-26T15:18:30  *** dkliban has quit IRC
2014-02-26T15:18:56  *** dkliban has joined #openstack-infra
2014-02-26T15:19:47  <anteaya> SergeyLukjanov: silly question time
2014-02-26T15:19:47  *** jpeeler has joined #openstack-infra
2014-02-26T15:19:47  *** jpeeler has quit IRC
2014-02-26T15:19:47  *** jpeeler has joined #openstack-infra
2014-02-26T15:20:03  <anteaya> this job is in the check queue and the post queue
2014-02-26T15:20:11  <anteaya> what happens if it fails in post?
2014-02-26T15:20:29  <SergeyLukjanov> anteaya, in check and post?
2014-02-26T15:20:35  <SergeyLukjanov> anteaya, sounds strange
2014-02-26T15:20:37  <anteaya> next silly question: it is in check and post and called gate-project-requirements
2014-02-26T15:20:46  <mordred> anteaya: nice catch
2014-02-26T15:20:57  <anteaya> https://review.openstack.org/#/c/76312/2/modules/openstack_project/files/zuul/layout.yaml
2014-02-26T15:21:00  <anteaya> line 256
2014-02-26T15:21:23  <SergeyLukjanov> shame on me, it should gate
2014-02-26T15:21:25  <SergeyLukjanov> :(
2014-02-26T15:21:28  <anteaya> thank you
2014-02-26T15:21:43  <anteaya> I was wondering what the purpose was if we skipped the gate
2014-02-26T15:22:05  <anteaya> mordred: thanks, taking my new brain for a test drive
2014-02-26T15:22:12  <anteaya> so far it seems to be working
2014-02-26T15:23:00  <SergeyLukjanov> anteaya, thanks for catching this
2014-02-26T15:23:04  *** mrodden has joined #openstack-infra
2014-02-26T15:23:30  <openstackgerrit> Sergey Lukjanov proposed a change to openstack-infra/config: Extract check/gate req jobs to check-requirements  https://review.openstack.org/76312
2014-02-26T15:24:18  <anteaya> SergeyLukjanov: np
2014-02-26T15:24:24  *** chuck__ has joined #openstack-infra
2014-02-26T15:25:56  <SergeyLukjanov> btw the next step is to extract tarballs + pypi-release and then to extract common integrated jobs
2014-02-26T15:26:04  *** johnthetubaguy has quit IRC
2014-02-26T15:26:20  <openstackgerrit> David Ripton proposed a change to openstack-dev/hacking: Add H308 rule.  https://review.openstack.org/76559
2014-02-26T15:27:19  *** pblaho` is now known as pblaho
2014-02-26T15:30:07  *** dcramer__ has joined #openstack-infra
2014-02-26T15:30:44  <openstackgerrit> Nikita Konovalov proposed a change to openstack-infra/storyboard-webclient: Add token header to requests  https://review.openstack.org/75961
2014-02-26T15:30:59  *** changbl has quit IRC
2014-02-26T15:31:40  *** dolphm_503 is now known as dolphm
2014-02-26T15:32:06  *** VINOD has joined #openstack-infra
2014-02-26T15:33:59  *** pdmars has joined #openstack-infra
2014-02-26T15:34:26  *** rossella_s has quit IRC
2014-02-26T15:34:43  <openstackgerrit> David Ripton proposed a change to openstack-dev/hacking: Add H308 rule  https://review.openstack.org/76559
2014-02-26T15:34:50  <mordred> SergeyLukjanov: +2
2014-02-26T15:35:02  <SergeyLukjanov> mordred, thx
2014-02-26T15:35:06  <foobio> wow--yeah, i totally missed that said "post" and not "gate" (my brain simply corrected what my eyeballs read i guess)
2014-02-26T15:35:51  <foobio> great catch, anteaya
2014-02-26T15:36:09  *** mgagne has joined #openstack-infra
2014-02-26T15:36:44  <anteaya> foobio: thanks
2014-02-26T15:36:57  <anteaya> SergeyLukjanov: no requirements for oslo.vmware?
2014-02-26T15:37:48  <SergeyLukjanov> anteaya, they have only non-voting job atm
2014-02-26T15:38:10  <SergeyLukjanov> and we prefere to not add non-voting jobs to the gate pipeline - so
2014-02-26T15:38:15  <openstackgerrit> A change was merged to openstack-infra/config: Extract check/gate req jobs to check-requirements  https://review.openstack.org/76312
2014-02-26T15:38:15  <anteaya> okay
2014-02-26T15:41:33  <anteaya> SergeyLukjanov: what about pbr?
2014-02-26T15:41:38  *** dcramer__ has quit IRC
2014-02-26T15:41:54  <anteaya> it is a different requirements job
2014-02-26T15:42:00  <anteaya> requirements integration
2014-02-26T15:42:51  *** zhiyan is now known as zhiyan_
2014-02-26T15:43:00  *** mgagne has quit IRC
2014-02-26T15:43:11  <SergeyLukjanov> anteaya, it's not synced now with requirements
2014-02-26T15:43:32  <SergeyLukjanov> AFAIR there was an intention to sync it and setup requirements jobs
2014-02-26T15:43:42  <anteaya> ah okay
2014-02-26T15:43:49  <SergeyLukjanov> I've already fixed sync script in os/req repo to not brake pbr
2014-02-26T15:43:59  <anteaya> yeah the job is named differently
2014-02-26T15:44:12  <anteaya> you'd be the only thing that doesn't
2014-02-26T15:44:15  <SergeyLukjanov> because previously it was breaking pbr by overriding seyup.py
2014-02-26T15:44:26  <anteaya> ah
2014-02-26T15:44:44  <VINOD> Hi anteaya...
2014-02-26T15:44:55  *** lnxnut has joined #openstack-infra
2014-02-26T15:45:11  <SergeyLukjanov> anteaya, I mean https://review.openstack.org/#/c/73431/
2014-02-26T15:45:23  <VINOD> Could you able to check the logs of https://review.openstack.org/#/c/75967/
2014-02-26T15:45:40  *** chuck__ has quit IRC
2014-02-26T15:45:48  <anteaya> SergeyLukjanov: climate is the only stackforge project with a requirements job?
2014-02-26T15:45:57  *** zhiyan_ is now known as zhiyan
2014-02-26T15:46:02  <anteaya> VINOD: hi, are you also in #openstack-nova channel?
2014-02-26T15:46:09  <VINOD> yes
2014-02-26T15:46:11  <SergeyLukjanov> anteaya, savanna was too, when it was on stackforge ;)
2014-02-26T15:46:13  <anteaya> VINOD: if not can you join please
2014-02-26T15:46:27  <anteaya> VINOD: great, stand by I will be with you in a minute
2014-02-26T15:46:31  <anteaya> SergeyLukjanov: okay
2014-02-26T15:46:37  <foobio> VINOD: that's an extremely large change (over 3000 lines). it's unlikely you'll find anyone actually reviewing it unless you break it up into smaller, more manageable patches
2014-02-26T15:46:44  <VINOD> thanks
2014-02-26T15:46:55  <VINOD> foobio: ok
2014-02-26T15:47:12  *** wenlock has joined #openstack-infra
2014-02-26T15:47:46  <foobio> generally once a change gets past about 200-300 lines, people tend not to review it because it's difficult to reason about its implications
2014-02-26T15:47:56  <VINOD> ok
2014-02-26T15:47:58  <anteaya> oh and rally and solum and openstacksdk
2014-02-26T15:48:07  *** prad_ has quit IRC
2014-02-26T15:48:35  <anteaya> SergeyLukjanov: so much for my review, by the time I was done it was merged
2014-02-26T15:48:41  <anteaya> but it was fun to look at it
2014-02-26T15:48:47  *** zhiyan is now known as zhiyan_
2014-02-26T15:49:19  <foobio> anteaya: if you discover something's wrong with a change after it's merged, it can always be solved with a new change, so no review is really a waste
2014-02-26T15:49:43  <SergeyLukjanov> yup, agreed
2014-02-26T15:49:44  <SergeyLukjanov> config-compare-xml Jenkins XML output is unchanged. in 1m 35s (non-voting)
2014-02-26T15:49:54  <SergeyLukjanov> foobio, mordred, does it mean that such review is correct?
2014-02-26T15:49:57  <openstackgerrit> A change was merged to openstack-infra/config: Fix manila-tempest-job to use exported env var  https://review.openstack.org/76115
2014-02-26T15:50:00  *** e0ne has quit IRC
2014-02-26T15:50:02  <SergeyLukjanov> that nothing changed
2014-02-26T15:50:15  *** e0ne has joined #openstack-infra
2014-02-26T15:50:36  <jbooboo> SergeyLukjanov: sometimes we want the xml to change, and sometimes we don't...
2014-02-26T15:50:44  *** mrmartin has quit IRC
2014-02-26T15:50:46  <foobio> SergeyLukjanov: if the change didn't modify any jjb configuration for existing job definitions, then there should be no difference reported by that test
2014-02-26T15:51:00  <SergeyLukjanov> I mean for the change like mine
2014-02-26T15:51:08  *** yolanda_ has joined #openstack-infra
2014-02-26T15:51:10  <foobio> SergeyLukjanov: you only modified zuul configuration
2014-02-26T15:51:14  <SergeyLukjanov> when expect only jobs to templates extraction w/o adding new ones
2014-02-26T15:51:22  <SergeyLukjanov> oh, yup
2014-02-26T15:51:32  <SergeyLukjanov> it's a zuul layout change
2014-02-26T15:51:38  <SergeyLukjanov> need to have some coffee
2014-02-26T15:51:41  <anteaya> foobio: true
2014-02-26T15:51:45  <jbooboo> SergeyLukjanov: oh, for the zuul change -- here's something you might want to do....
2014-02-26T15:51:49  <foobio> SergeyLukjanov: the zuul layout test will, however, do some sanity checks on changes like yours
2014-02-26T15:52:05  <jbooboo> SergeyLukjanov: if you look at the output of the layout test, it prints zuul's final configuration
2014-02-26T15:52:15  *** chandan_kumar has quit IRC
2014-02-26T15:52:16  <jbooboo> SergeyLukjanov: you might want to compare old and new output to make sure that it's the same
2014-02-26T15:52:26  <SergeyLukjanov> jbooboo, awesome tip
2014-02-26T15:52:37  <SergeyLukjanov> I'll investigate how to make the same job for checking layout unchanged
2014-02-26T15:52:54  <SergeyLukjanov> to be sure that my job2tmpl extractions will not miss jobs
2014-02-26T15:52:58  <jbooboo> SergeyLukjanov: probably not a bad idea
2014-02-26T15:53:01  *** dizquierdo has quit IRC
2014-02-26T15:53:06  *** dprince has quit IRC
2014-02-26T15:53:07  <foobio> SergeyLukjanov: that's also an easy one to run locally with tox on master and your topic branch
2014-02-26T15:53:32  <SergeyLukjanov> foobio, yup
2014-02-26T15:53:37  *** dcramer__ has joined #openstack-infra
2014-02-26T15:53:37  *** dizquierdo has joined #openstack-infra
2014-02-26T15:53:48  *** dprince has joined #openstack-infra
2014-02-26T15:54:08  <SergeyLukjanov> sorry, gtg, time to go home ;)
2014-02-26T15:54:15  <foobio> SergeyLukjanov: have a great evening!
2014-02-26T15:54:29  <SergeyLukjanov> thx!
2014-02-26T15:56:43  <anteaya> thanks SergeyLukjanov
2014-02-26T15:56:43  *** chandan_kumar has joined #openstack-infra
2014-02-26T15:57:20  *** mgagne has joined #openstack-infra
2014-02-26T15:57:58  *** david-lyle has joined #openstack-infra
2014-02-26T15:58:26  *** rlandy has quit IRC
2014-02-26T15:58:58  *** rcleere has quit IRC
2014-02-26T15:59:25  *** thedodd has joined #openstack-infra
2014-02-26T15:59:45  <dansmith> ArxCruz: https://review.openstack.org/#/c/70533/
2014-02-26T15:59:59  <dansmith> ArxCruz: build failed (others succeeded) and the link to the test report is 404
2014-02-26T16:00:15  <ArxCruz> dansmith: we are working on that :)
2014-02-26T16:00:24  *** jlibosva has quit IRC
2014-02-26T16:00:29  <dansmith> ArxCruz: okay, just noticed, wanted to make sure
2014-02-26T16:00:47  <ArxCruz> dansmith: yeah, if possible, just ignore :)
2014-02-26T16:01:18  <dansmith> ArxCruz: I cannot ignore. I will be unable to do any more work until you fix it.
2014-02-26T16:01:19  *** amotoki_ has joined #openstack-infra
2014-02-26T16:02:38  <ArxCruz> dansmith: seriously ? O.o
2014-02-26T16:02:47  *** david_lyle_ has joined #openstack-infra
2014-02-26T16:02:49  <dansmith> ArxCruz: no, of course not :)
2014-02-26T16:03:06  * ArxCruz didn't knew dansmith have sense of humor
2014-02-26T16:03:14  <dansmith> pfft
2014-02-26T16:03:15  <ArxCruz> maurosr: did you saw this? ^
2014-02-26T16:03:31  <maurosr> hahah
2014-02-26T16:04:01  <krtaylor> hehheh
2014-02-26T16:05:35  *** julim_ has joined #openstack-infra
2014-02-26T16:05:49  *** julim has quit IRC
2014-02-26T16:05:49  *** dcramer__ has quit IRC
2014-02-26T16:05:56  <anteaya> ArxCruz: well actually asking someone to ignore your output is not the best approach
2014-02-26T16:06:18  *** david-lyle has quit IRC
2014-02-26T16:06:20  <ArxCruz> anteaya: I mean, the logs were 404 was an error in our swift script
2014-02-26T16:06:33  <anteaya> ArxCruz: can you make an internal change at least identifying you are aware of this issue while you fix it
2014-02-26T16:06:45  <ArxCruz> we already fix it, but I'm not sure if we will be able to upload the logs, since we don't have it
2014-02-26T16:06:49  <anteaya> ArxCruz: can you add that to your comment message?
2014-02-26T16:07:02  <ArxCruz> anteaya: for the next?
2014-02-26T16:07:07  <dansmith> anteaya: it was their first day of reporting, nobody expects it to be perfect yet
2014-02-26T16:07:09  <ArxCruz> anteaya: it's already fixed :)
2014-02-26T16:07:13  <dansmith> anteaya: I was just making sure they had noticed
2014-02-26T16:07:25  <anteaya> dansmith: okay
2014-02-26T16:07:33  <anteaya> ArxCruz: okay
2014-02-26T16:08:14  <anteaya> we are just asking CI accounts to address issues for devs rather than continue to send out incorrect info while they are fixing things
2014-02-26T16:08:28  *** prad_ has joined #openstack-infra
2014-02-26T16:08:54  *** david-lyle has joined #openstack-infra
2014-02-26T16:09:10  <dansmith> given that a simple error could report incorrectly on a hundred patches before it goes noticed, I don't think making them comment on each one is very reasonable
2014-02-26T16:09:17  <dansmith> especially on day 1
2014-02-26T16:09:33  *** oubiwann_ has joined #openstack-infra
2014-02-26T16:10:15  <anteaya> dansmith: glad to have your input on this
2014-02-26T16:10:17  <anteaya> thanks
2014-02-26T16:11:52  <ArxCruz> dansmith: anteaya we are monitoring everything to ensure we will fill all the gaps, don't worry :)
2014-02-26T16:11:59  <openstackgerrit> Travis Plummer proposed a change to openstack-infra/config: new-project  https://review.openstack.org/71956
2014-02-26T16:12:09  *** david_lyle_ has quit IRC
2014-02-26T16:12:28  <anteaya> ArxCruz: I know you have been great at it
2014-02-26T16:12:35  <ArxCruz> Also, I will stay here pratically 24x7 these days, please, feel free to contact-me if something goes wrong and our team didn't catch up
2014-02-26T16:12:49  *** NikitaKonovalov is now known as NikitaKonovalov_
2014-02-26T16:12:53  <anteaya> but I gave salv-orlando a hard time recently for something very similar, so I have to be consistent
2014-02-26T16:12:54  *** e0ne_ has joined #openstack-infra
2014-02-26T16:12:54  *** pcrews has joined #openstack-infra
2014-02-26T16:13:01  *** david_lyle_ has joined #openstack-infra
2014-02-26T16:13:13  <anteaya> and to salv-orlando's credit, he responded promptly
2014-02-26T16:13:38  <anteaya> it isn't your system that concerns me, it is the 40 other accounts who look to you as a role model
2014-02-26T16:13:56  <anteaya> and who will do everything you do, except be as vigilant
2014-02-26T16:14:00  *** KurtMartin has joined #openstack-infra
2014-02-26T16:14:25  <anteaya> ArxCruz: thanks
2014-02-26T16:15:12  <openstackgerrit> Andreas Rehn proposed a change to openstack-infra/jenkins-job-builder: Added support for Delivery Pipeline Plugin  https://review.openstack.org/71658
2014-02-26T16:16:19  *** dcramer__ has joined #openstack-infra
2014-02-26T16:16:40  *** david-lyle has quit IRC
2014-02-26T16:16:40  *** e0ne has quit IRC
2014-02-26T16:17:04  <krtaylor> anteaya, point taken, we are trying to make sure everything is working very well, as ArxCruz said, we are all watching it very closely right now
2014-02-26T16:17:23  <anteaya> krtaylor: thanks, yes you two are doing a wonderful job
2014-02-26T16:17:29  *** kmartin has quit IRC
2014-02-26T16:17:35  *** changbl has joined #openstack-infra
2014-02-26T16:17:51  <anteaya> and as I told salvatore, if it was just you, I wouldn't even worry about it
2014-02-26T16:18:01  <anteaya> since the work you are doing is outstanding
2014-02-26T16:18:09  *** kmartin has joined #openstack-infra
2014-02-26T16:18:50  *** stevebaker has quit IRC
2014-02-26T16:19:03  <anteaya> it is unfortunate that the people that are doing the best work that are limited by the people that do not
2014-02-26T16:19:10  <krtaylor> anteaya, this will all get smooth as more and more 3rd party comes online, more things get documented and fixed
2014-02-26T16:19:12  <krtaylor> agreed
2014-02-26T16:19:12  *** david-lyle has joined #openstack-infra
2014-02-26T16:19:24  <anteaya> but after not doing that we realized the mess we were creating
2014-02-26T16:19:58  <anteaya> yes, fortunately there is more documentaion happening and a wider knowledge base
2014-02-26T16:20:08  *** andre__ has quit IRC
2014-02-26T16:20:15  <krtaylor> which, reminds me, I want to help organize a self-help group for 3rd party CI testing, maybe a summit BOF
2014-02-26T16:20:24  *** rcleere has joined #openstack-infra
2014-02-26T16:20:26  <anteaya> everyone I have talked to wants to do a good job they just lack knowledge in how to do that
2014-02-26T16:20:40  <anteaya> krtaylor: I think that would be well attended
2014-02-26T16:21:02  <krtaylor> we can help each other, share best practices, maybe even weekly irc meetings
2014-02-26T16:21:13  <anteaya> krtaylor: did you know that jaypipes is offering a meeting/workshop for 3rd party ci on Monday?
2014-02-26T16:21:22  <krtaylor> yes, I'll be there for sure
2014-02-26T16:21:39  <krtaylor> although I was looking forward to the hangout :)
2014-02-26T16:21:46  *** VINOD has quit IRC
2014-02-26T16:21:50  *** david_lyle_ has quit IRC
2014-02-26T16:22:00  *** KurtMartin has quit IRC
2014-02-26T16:22:38  <anteaya> krtaylor: http://lists.openstack.org/pipermail/openstack-dev/2014-February/028124.html
2014-02-26T16:22:59  <anteaya> krtaylor: easier to log in irc
2014-02-26T16:23:11  *** david_lyle_ has joined #openstack-infra
2014-02-26T16:23:24  <anteaya> one of the really big problems is that a large part of this group has no experience with opensource
2014-02-26T16:23:34  *** andre__ has joined #openstack-infra
2014-02-26T16:23:36  <anteaya> and is unfamiliar with the tool set
2014-02-26T16:23:48  <krtaylor> yeah, I saw that, and it is true, scales better, translates better too
2014-02-26T16:24:16  <foobio> and helps get them into the flow of how the rest of the project contributors participate in discussion
2014-02-26T16:24:21  <anteaya> since opensource is a philosphy as much as code, consistent action helps to inform the philosphy
2014-02-26T16:24:21  *** cody-somerville has joined #openstack-infra
2014-02-26T16:24:21  *** cody-somerville has quit IRC
2014-02-26T16:24:21  *** cody-somerville has joined #openstack-infra
2014-02-26T16:24:37  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Add new elasticsearch cluster members to cacti  https://review.openstack.org/76573
2014-02-26T16:24:37  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Update logstash doc for an elasticsearch cluster  https://review.openstack.org/76574
2014-02-26T16:24:38  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Move primary elasticsearch discover node  https://review.openstack.org/76575
2014-02-26T16:24:38  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Remove old elasticsearch cluster members  https://review.openstack.org/76051
2014-02-26T16:24:44  * anteaya ducks
2014-02-26T16:25:08  <anteaya> krtaylor: and I am so glad you would like to organize something at the summit
2014-02-26T16:25:23  <anteaya> I must admit I am all organized out currently
2014-02-26T16:25:36  <anteaya> but I can certainly inform people
2014-02-26T16:25:52  <krtaylor> sure, I'll be happy to help, I was thinking about starting an etherpad to help get organized
2014-02-26T16:26:00  <anteaya> krtaylor: great idea
2014-02-26T16:26:10  <krtaylor> then maillist, etc
2014-02-26T16:26:13  <anteaya> do post the link to the etherpad once you have it
2014-02-26T16:26:23  <anteaya> krtaylor: on the -dev ml right?
2014-02-26T16:26:29  <krtaylor> ok, I'll get that moving
2014-02-26T16:26:30  <krtaylor> yes
2014-02-26T16:26:36  <anteaya> great
2014-02-26T16:26:40  <anteaya> thank you
2014-02-26T16:26:56  <krtaylor> although, my mail filtering is horrible
2014-02-26T16:27:00  <anteaya> mine too
2014-02-26T16:27:07  <krtaylor> I'd like to see us standardize a tag
2014-02-26T16:27:14  *** david-lyle has quit IRC
2014-02-26T16:27:16  <anteaya> I have such respect for those who can figure it out
2014-02-26T16:27:19  *** dcramer___ has joined #openstack-infra
2014-02-26T16:27:20  <krtaylor> like 3rd party or third-party
2014-02-26T16:27:27  *** prad__ has joined #openstack-infra
2014-02-26T16:27:29  <anteaya> krtaylor: yes, I like 3rd party
2014-02-26T16:27:36  <anteaya> fewer characters
2014-02-26T16:27:36  *** david_lyle_ is now known as david-lyle
2014-02-26T16:27:54  <krtaylor> true, anyway, good etherpad fodder
2014-02-26T16:27:55  <openstackgerrit> A change was merged to openstack-infra/elastic-recheck: Remove resolved_at mention in readme  https://review.openstack.org/76393
2014-02-26T16:27:57  <anteaya> better chance of reading teh subject line
2014-02-26T16:28:00  <anteaya> yes
2014-02-26T16:28:17  *** david_lyle_ has joined #openstack-infra
2014-02-26T16:28:37  *** prad_ has quit IRC
2014-02-26T16:28:51  *** dizquierdo has quit IRC
2014-02-26T16:29:14  *** cody-somerville has quit IRC
2014-02-26T16:29:46  *** johnthetubaguy has joined #openstack-infra
2014-02-26T16:30:05  *** alexpilotti has joined #openstack-infra
2014-02-26T16:30:09  <jbooboo> krtaylor: i expect we'll devote some of the infra track to 3rd party testing
2014-02-26T16:30:33  <dansmith> can someone kick the meeting bot in openstack-meeting-3 ?
2014-02-26T16:30:38  *** dcramer__ has quit IRC
2014-02-26T16:30:43  <jbooboo> krtaylor: and i believe there is going to be a collaboration space with "project pods"
2014-02-26T16:31:12  <krtaylor> jbooboo, project pods?
2014-02-26T16:31:15  <jbooboo> krtaylor: so that might be a natural place to organize something; if there's an infra "pod", 3rd party ci would be a welcome topic there
2014-02-26T16:31:39  *** jcooley_ has joined #openstack-infra
2014-02-26T16:31:49  <jbooboo> krtaylor: i'm not entirely sure what it will look like, but i'm imagining a big area with discrete locations (tables?  groups of chairs?) designated with different projects (nova, etc)
2014-02-26T16:31:59  *** david-lyle has quit IRC
2014-02-26T16:32:01  <krtaylor> ah, like a developers lounge area by project? cool
2014-02-26T16:32:48  <jbooboo> krtaylor: so we could potentially organize a formal session to cover some things and then use the collaboration area for the kind of self-help get different groups together activity you were suggestiong
2014-02-26T16:32:56  <jbooboo> dansmith: ack
2014-02-26T16:33:10  <dansmith> jbooboo: did you do it? seems to be working now
2014-02-26T16:33:26  <jbooboo> dansmith: nope.  that was easy.  :)
2014-02-26T16:33:44  <dansmith> jbooboo: okay, weird.. anyway, thanks :)
2014-02-26T16:33:55  *** amotoki_ has quit IRC
2014-02-26T16:34:16  *** thuc has joined #openstack-infra
2014-02-26T16:34:17  <russellb> fyi, just pushed a novaclient release, ping me if it breaks the world
2014-02-26T16:34:29  <krtaylor> jbooboo, sounds good, I was just thinking that there is a lot of experience growing here that we can share between ourselves and offload some of the load from the cores
2014-02-26T16:34:30  <jbooboo> dansmith: if it was just the previous meeting running over, we added a feature to meetbot that lets anyone end the meeting after 1 hour
2014-02-26T16:34:45  <dansmith> jbooboo: right, we were trying that and it wasn't working, hence my concern
2014-02-26T16:34:47  <jbooboo> krtaylor: yay!
2014-02-26T16:35:06  *** thuc has quit IRC
2014-02-26T16:35:20  <jbooboo> dansmith: maybe it wasn't quite one hour to the second.  :)  because of course, being programmers, i'm pretty sure that's what we did.  :)
2014-02-26T16:35:36  <dansmith> jbooboo: heh
2014-02-26T16:35:46  *** thuc has joined #openstack-infra
2014-02-26T16:35:47  *** yolanda_ has quit IRC
2014-02-26T16:36:06  *** thuc has quit IRC
2014-02-26T16:36:46  <anteaya> russellb: thanks for the heads up
2014-02-26T16:36:54  *** thuc has joined #openstack-infra
2014-02-26T16:36:58  *** david_lyle_ has quit IRC
2014-02-26T16:37:54  *** thuc has quit IRC
2014-02-26T16:38:01  *** thuc_ has joined #openstack-infra
2014-02-26T16:38:22  * mordred wants a pod of ice cream
2014-02-26T16:38:36  <jbooboo> ttx: ^ excellent suggestion for design summit pods
2014-02-26T16:39:09  <krtaylor> mordred, +1
2014-02-26T16:39:18  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Remove old elasticsearch cluster members  https://review.openstack.org/76051
2014-02-26T16:39:18  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Update logstash doc for an elasticsearch cluster  https://review.openstack.org/76574
2014-02-26T16:39:19  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Move primary elasticsearch discover node  https://review.openstack.org/76575
2014-02-26T16:40:25  *** geekinutah1 is now known as geekinutah
2014-02-26T16:40:32  *** atiwari has joined #openstack-infra
2014-02-26T16:41:18  <russellb> mordred: +1
2014-02-26T16:41:26  <russellb> brilliant
2014-02-26T16:41:28  *** rossella_s has joined #openstack-infra
2014-02-26T16:43:26  *** chuck__ has joined #openstack-infra
2014-02-26T16:43:57  *** shardy is now known as shardy_afk
2014-02-26T16:44:00  *** chuck__ has quit IRC
2014-02-26T16:45:20  *** CaptTofu has quit IRC
2014-02-26T16:46:48  *** david-lyle has joined #openstack-infra
2014-02-26T16:51:24  *** CaptTofu has joined #openstack-infra
2014-02-26T16:52:32  <jbooboo> foobio: you filed a zuul bug yesterday didn't you?  i'm having trouble finding it
2014-02-26T16:52:51  <jbooboo> foobio: (i see the one from anteaya you pointed me to this morning)
2014-02-26T16:53:22  <foobio> jbooboo: i think someone else filed it against openstack-ci, then i triaged, added log details and moved it to zuul... finding
2014-02-26T16:54:38  <foobio> jbooboo: https://launchpad.net/bugs/1284842
2014-02-26T16:54:53  <jbooboo> foobio: thanks
2014-02-26T16:55:04  <jbooboo> foobio: cool, i think they are related.
2014-02-26T16:56:06  *** hashar has quit IRC
2014-02-26T16:56:19  *** cadenzajon has joined #openstack-infra
2014-02-26T16:56:34  *** coolsvap has joined #openstack-infra
2014-02-26T16:57:48  <foobio> jbooboo: all's the better!
2014-02-26T16:57:58  *** andre__ has quit IRC
2014-02-26T16:58:20  <foobio> in completely unrelated news, any bets on how long before someone proposes a new stackforge project for an openstack haxe sdk? http://haxe.org/
2014-02-26T16:59:02  <foobio> it looks surprisingly organized for a language i've never heard of
2014-02-26T17:00:05  <jbooboo> foobio: it's a trap
2014-02-26T17:00:13  <davidlenwell> So here is a question .. how do I change the topic on an already commited review without changing something? to satisfy this? http://lists.openstack.org/pipermail/openstack-dev/2014-February/028130.html
2014-02-26T17:01:38  <davidlenwell> trying to avoid the annoyance that i submited that patch 5 days before monty wrote that.. and just get things the way you need them so we can move on.
2014-02-26T17:02:56  <foobio> davidlenwell: i think we can probably grandfather in any reviews to add new projects which are already in good shape this week, but if it ends up needing a new patchset for any reason then please try to remember to update the topic when you do that
2014-02-26T17:02:59  *** gokrokve has quit IRC
2014-02-26T17:03:16  <davidlenwell> foobio: will do
2014-02-26T17:03:26  *** gokrokve has joined #openstack-infra
2014-02-26T17:03:31  <davidlenwell> SergeyLukjanov -1'd it already
2014-02-26T17:03:42  <davidlenwell> what do I need to do from this point?
2014-02-26T17:04:25  *** NikitaKonovalov_ is now known as NikitaKonovalov
2014-02-26T17:04:27  <davidlenwell> I fully respect the backlog and the load you guys are under.. that is why I am working to hire you another hand.. but I do need to tell my team something
2014-02-26T17:04:36  *** gyee has joined #openstack-infra
2014-02-26T17:05:56  *** e0ne_ has quit IRC
2014-02-26T17:06:33  <jbooboo> davidlenwell: what's the review?
2014-02-26T17:06:37  *** saju_m has joined #openstack-infra
2014-02-26T17:06:59  <davidlenwell> https://review.openstack.org/#/c/75226/
2014-02-26T17:07:20  <davidlenwell> jbooboo: this is the one with the irc problems last week
2014-02-26T17:07:24  <anteaya> okay time for me to run away for several hours
2014-02-26T17:08:02  *** gokrokve has quit IRC
2014-02-26T17:08:04  <anteaya> two failures in the gate, both on grenade both for different reasons, not sure exactly what is taking down the cinder patch but horizon has a cliff dependency issue
2014-02-26T17:08:23  <anteaya> so for my eyes, no explosions from novaclient
2014-02-26T17:08:38  *** freyes has quit IRC
2014-02-26T17:09:01  *** sabari_ has joined #openstack-infra
2014-02-26T17:09:46  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Add puppetdb server to cacti  https://review.openstack.org/76583
2014-02-26T17:09:48  <jbooboo> davidlenwell: +2 from me
2014-02-26T17:09:57  <davidlenwell> thanks jbooboo..
2014-02-26T17:10:15  <davidlenwell> who can +a it? or do I have to wait till new project friday ?
2014-02-26T17:10:32  <foobio> davidlenwell: waits until friday
2014-02-26T17:10:49  <davidlenwell> okay .. putting my patience hat on
2014-02-26T17:10:50  *** markmcclain has joined #openstack-infra
2014-02-26T17:10:58  *** changbl has quit IRC
2014-02-26T17:11:12  <foobio> davidlenwell: i suspect SergeyLukjanov will rescind his -1 from 75226 the next time he's around, so i wouldn't worry about that
2014-02-26T17:11:23  <openstackgerrit> Davanum Srinivas (dims) proposed a change to openstack-infra/config: Add Eavesdrop bot to #openstack-oslo  https://review.openstack.org/76584
2014-02-26T17:12:24  <davidlenwell> we should really put something on the wiki .. explaining the irc stuff and now this stuff..
2014-02-26T17:12:26  *** oubiwann_ has quit IRC
2014-02-26T17:12:34  <davidlenwell> would save review cycles
2014-02-26T17:12:45  <foobio> we might also want to start batching up changes like https://review.openstack.org/76584 there so as to minimize impact of meetbot restarts during heavy meeting periods
2014-02-26T17:13:41  *** sabari_ has quit IRC
2014-02-26T17:13:49  <foobio> at least until someone manages to tackle the open bug about implementing graceful restarts for it
2014-02-26T17:14:01  <jbooboo> davidlenwell: it should go in the stackforge documentation
2014-02-26T17:14:16  <jbooboo> the stackforge HOWTO in the ci docs
2014-02-26T17:15:01  <foobio> davidlenwell: there is already a mention in openstack-infra/config:docs/source/irc.rst but i agree copying that bit of detail to stackforge.rst would be helpful
2014-02-26T17:16:46  *** Sukhdev has quit IRC
2014-02-26T17:19:52  *** moted has joined #openstack-infra
2014-02-26T17:20:09  <jbooboo> jgriffith: https://review.openstack.org/#/c/49755/ exposed a zuul bug; do you mind if i unabandon it for about 10 minutes for some testing?
2014-02-26T17:22:03  <openstackgerrit> Derek Higgins proposed a change to openstack-infra/gear: Close poll loop pipes on cleanup  https://review.openstack.org/76588
2014-02-26T17:22:03  <openstackgerrit> Derek Higgins proposed a change to openstack-infra/gear: Throttle geard connect loop  https://review.openstack.org/76589
2014-02-26T17:24:15  *** afazekas has quit IRC
2014-02-26T17:24:41  <sdague> what's up with the whole queue hanging on an unallocated pep8 node?
2014-02-26T17:25:22  *** coolsvap has quit IRC
2014-02-26T17:25:30  <jbooboo> sdague: my guess would be it's a re-enqueued job
2014-02-26T17:25:43  <sdague> jbooboo: so we have 18 changes that are ready to merge
2014-02-26T17:25:48  <jbooboo> sdague: i see that
2014-02-26T17:25:51  *** coolsvap has joined #openstack-infra
2014-02-26T17:25:52  <sdague> ok
2014-02-26T17:25:53  *** alexpilotti has quit IRC
2014-02-26T17:26:26  <jbooboo> i will look further into it.  just throwing out a guess because that's the usual answer in these situations
2014-02-26T17:26:39  <sdague> yeh, seems odd that other nodes are getting pep8 allocations
2014-02-26T17:26:44  <sdague> but not that job
2014-02-26T17:27:44  *** NikitaKonovalov is now known as NikitaKonovalov_
2014-02-26T17:29:12  *** NikitaKonovalov_ is now known as NikitaKonovalov
2014-02-26T17:30:52  <openstackgerrit> Michael Krotscheck proposed a change to openstack-infra/config: Add NPM mirror  https://review.openstack.org/68818
2014-02-26T17:31:29  <sdague> and it's a grizzly change at that :)
2014-02-26T17:31:32  *** cody-somerville has joined #openstack-infra
2014-02-26T17:31:57  *** dcramer___ has quit IRC
2014-02-26T17:32:37  *** vkozhukalov_ has quit IRC
2014-02-26T17:33:03  *** SumitNaiksatam has joined #openstack-infra
2014-02-26T17:34:22  <wendar> anyone: I found a pattern yesterday in gate issues, and wondered if it had already been found? A specific recurring case of failure to connect to nova's git repo.
2014-02-26T17:34:26  *** coolsvap has quit IRC
2014-02-26T17:35:29  *** coolsvap has joined #openstack-infra
2014-02-26T17:37:15  <jbooboo> sdague: i think gearman lost track of that job, and unfortunately i don't think the log level is low enough for us to why
2014-02-26T17:37:22  <jbooboo> wendar: do you have a link to a specific failure?
2014-02-26T17:37:44  <sdague> jbooboo: is there anyway to manually inject the job back in?
2014-02-26T17:37:56  <sdague> or do we just have to reset the queue manually to get anything moving
2014-02-26T17:38:21  *** mgagne has quit IRC
2014-02-26T17:38:24  <jbooboo> sdague: not in a way that will cause zuul to recognize it, no.  i think we have to dequeue that patch.
2014-02-26T17:38:33  <openstackgerrit> Travis Plummer proposed a change to openstack-infra/config: New project request: OpenStack Powershell CLI and SDK  https://review.openstack.org/71956
2014-02-26T17:38:36  <wendar> jbooboo: http://logs.openstack.org/62/74662/1/gate/gate-devstack-dsvm-cells/b7878e9/logs/devstack-gate-setup-workspace-new.txt.gz
2014-02-26T17:38:55  <sdague> jbooboo: ok, so before we do that, what do we need to change on gearman to catch this the next time?
2014-02-26T17:39:07  <jbooboo> sdague: working on that
2014-02-26T17:39:23  <sdague> because I feel like we've had some much more inconsistent allocations recently, so it would be good to nail that down
2014-02-26T17:39:32  <jbooboo> what do you mean?
2014-02-26T17:40:08  <sdague> like head of gate queue not getting resources until most of the rest of it did
2014-02-26T17:40:26  *** krotscheck has quit IRC
2014-02-26T17:40:35  <sdague> basically I'd assume allocation should be top down in the gate, and I don't always see that happening
2014-02-26T17:41:32  *** pmathews has quit IRC
2014-02-26T17:41:35  <jbooboo> sdague: so remember when i threw out my incorrect guess about why this job was stuck?  i said i thought it was a re-enqueued job
2014-02-26T17:41:46  *** pmathews has joined #openstack-infra
2014-02-26T17:41:58  <sdague> yeh
2014-02-26T17:42:07  <openstackgerrit> Chris Johnson proposed a change to openstack-infra/config: add sdks irc room to eavesdrop bot config  https://review.openstack.org/76594
2014-02-26T17:42:09  <sdague> I'm sniping out the top change now
2014-02-26T17:42:50  <jbooboo> sdague: as you know, jenkins fails to complete builds for reasons of its own quite a lot
2014-02-26T17:42:58  <sdague> yeh
2014-02-26T17:43:13  <jbooboo> sdague: some of those are detectable by zuul.  in those cases, zuul will re-enqueue the job to give jenkins a chance at another go.
2014-02-26T17:43:36  <jbooboo> sdague: unfortunatly, that means the jobs go to the back of the queue.  we can probably fix that, but it's non-trivial
2014-02-26T17:43:50  <jbooboo> sdague: (whereas just having it retry at the back of the queue was trivial, so we did it)
2014-02-26T17:43:57  *** luqas has quit IRC
2014-02-26T17:44:04  <jbooboo> sdague: at any rate, that has happened 224 times today (since 00:00 UTC)
2014-02-26T17:44:16  <jbooboo> sdague: so it's not at all suprising that you would actually see it in action
2014-02-26T17:44:31  <jbooboo> sdague: but look at the bright side -- that's 224 false failures that we didn't have to deal with.  :)
2014-02-26T17:45:24  <sdague> sure
2014-02-26T17:45:34  *** luqas has joined #openstack-infra
2014-02-26T17:45:39  <sdague> ok, that at least explains that :)
2014-02-26T17:45:43  <openstackgerrit> James E. Blair proposed a change to openstack-infra/config: Set Zuul gear server logs to debug  https://review.openstack.org/76596
2014-02-26T17:45:52  <jbooboo> and that ^ will hopefully explain the other if it happens again
2014-02-26T17:45:59  <sdague> any chance we could got the other direction and pop then on top of queue?
2014-02-26T17:46:10  <sdague> or does the datastructure not allow us to manip it that way
2014-02-26T17:46:57  *** amcrn has joined #openstack-infra
2014-02-26T17:47:00  <jbooboo> sdague: i think the easiest think is to submit it with a high priority, but that's still a nontrivial zuul change.  it's not too hard, it's just more than a one-liner.
2014-02-26T17:48:08  *** ildikov_ has quit IRC
2014-02-26T17:48:36  *** dcramer___ has joined #openstack-infra
2014-02-26T17:49:31  *** oubiwann_ has joined #openstack-infra
2014-02-26T17:49:43  <sdague> jbooboo: ok. Well that's beyond my plate at the moment
2014-02-26T17:50:49  <jbooboo> sdague: me too.  i'll get to it, but i think we're in a pretty good position (we're way ahead of where we would be) so it's not at the top of my lis
2014-02-26T17:50:52  <jbooboo> t
2014-02-26T17:51:12  <sdague> yeh, though it will be interesting to see how it will impact us during the i3 rush
2014-02-26T17:51:17  *** bhuvan has joined #openstack-infra
2014-02-26T17:51:33  *** NikitaKonovalov is now known as NikitaKonovalov_
2014-02-26T17:51:43  <jbooboo> foobio, anteaya: the loop was caused because jenkins had previously submitted the patchset.  the submit counts as an approval that sticks around (it isn't reset by the 0 vote)
2014-02-26T17:52:19  *** jcooley_ has quit IRC
2014-02-26T17:52:26  <foobio> oh...
2014-02-26T17:52:34  <jbooboo> so it always matches "any jenkins approval older than 72 hours"
2014-02-26T17:53:02  <sdague> wendar: so one of the problems with that issue you found, is it's in a log that we weren't indexing at the time
2014-02-26T17:53:09  *** apevec has joined #openstack-infra
2014-02-26T17:53:25  <wendar> sdague: ah-ha
2014-02-26T17:53:30  <sdague> so we can't build a pattern out of it to see it's likeliness
2014-02-26T17:53:48  <sdague> it should be in the index now, though elastic search is still in a world of hurt
2014-02-26T17:53:49  *** NikitaKonovalov_ is now known as NikitaKonovalov
2014-02-26T17:53:59  <wendar> sdague: yeah, the console.html was exceedingly un-unique on those failures
2014-02-26T17:53:59  <apevec> sdague, https://review.openstack.org/#/c/76020/2..3//COMMIT_MSG,unified - "gearman lost the job here" what does that mean?
2014-02-26T17:54:13  <sdague> apevec: read backscroll
2014-02-26T17:54:18  <sdague> wendar: yeh
2014-02-26T17:54:33  <sdague> so new jobs will both timestamp and index that log file
2014-02-26T17:54:39  <sdague> so we can use it in elastic recheck
2014-02-26T17:54:40  <wendar> cool
2014-02-26T17:54:47  * apevec scrolls to eavesdrop
2014-02-26T17:55:00  <openstackgerrit> Davanum Srinivas (dims) proposed a change to openstack-infra/config: Add notifications to #openstack-oslo channel  https://review.openstack.org/76598
2014-02-26T17:56:17  <foobio> apevec: in summary, for some reason as of yet unidentified (due to insufficient logging) zuul's gearman server lost track of the fact that it needed to request for a worker on the pep8 test for that change, so it was sitting at the top of the gate not clearing, and this preventing anything else from merging
2014-02-26T17:56:28  *** jcooley_ has joined #openstack-infra
2014-02-26T17:57:39  <apevec> foobio, thanks, so yet another gate mystery :(
2014-02-26T17:58:06  *** oubiwann_ has quit IRC
2014-02-26T17:58:18  <foobio> apevec: one which we'll have sufficient logging in place to diagnose when it reoccurs, in all probability
2014-02-26T17:59:16  <foobio> each time we add new ways to scale this system, we add complexity and expose (or sometimes introduce) new and exciting bugs
2014-02-26T17:59:31  *** jpich has quit IRC
2014-02-26T17:59:36  <foobio> as with any software
2014-02-26T18:00:30  *** oubiwann_ has joined #openstack-infra
2014-02-26T18:01:05  *** jcooley_ has quit IRC
2014-02-26T18:01:39  *** oubiwann_ has quit IRC
2014-02-26T18:01:47  <openstackgerrit> Davanum Srinivas (dims) proposed a change to openstack-infra/config: Add notifications to #openstack-oslo channel  https://review.openstack.org/76598
2014-02-26T18:02:26  *** khyati has joined #openstack-infra
2014-02-26T18:02:53  <quantumfly> morning
2014-02-26T18:03:37  <foobio> this month we've averaged 50 changes merged per day, including weekends (for projects reflected in the openstack/openstack meta-repo)
2014-02-26T18:03:50  *** rossella_s has quit IRC
2014-02-26T18:03:57  <quantumfly> foobio: wow is it that high?
2014-02-26T18:04:31  <foobio> git log --pretty=fuller --date=iso | grep ^CommitDate: | cut -d' ' -f2 | cut -d- -f-2 | uniq -c
2014-02-26T18:04:32  <sdague> I still think our i3 capacity target is 200 merges / day.
2014-02-26T18:04:35  *** mgagne has joined #openstack-infra
2014-02-26T18:05:18  <foobio> sdague: agreed, though the highest day this month was "only" 145 changes merged
2014-02-26T18:05:38  <sdague> yeh, but we backlogged during i2
2014-02-26T18:06:17  <foobio> though i2 was before some of our new scaling improvements, and in the face of additional bugs, so hopefully we can jump the hurdle this time
2014-02-26T18:06:17  *** shashank__ has joined #openstack-infra
2014-02-26T18:06:43  <foobio> quantumfly: we have no purple shards now, and every cluster member has 11 or 12 assigned
2014-02-26T18:06:55  *** tkorochka has joined #openstack-infra
2014-02-26T18:07:02  <quantumfly> foobio: great. I am pulling that stuff up now but I am going to guess we can go ahead and stop es on es6
2014-02-26T18:07:06  <foobio> quantumfly: current pending patch series is https://review.openstack.org/#/q/status:open+project:openstack-infra/config+branch:master+topic:elasticsearch,n,z
2014-02-26T18:07:42  <quantumfly> looking now
2014-02-26T18:07:48  <foobio> quantumfly: i'm pretty confident in the cacti one, less so in the discover node and doc update patches
2014-02-26T18:08:05  *** johnthetubaguy has quit IRC
2014-02-26T18:08:17  <foobio> and i think the delete change is comprehensive enough now, but i'm obviously leaving my -2 on it until we're all clear
2014-02-26T18:08:41  *** andreaf has quit IRC
2014-02-26T18:10:17  *** andreaf has joined #openstack-infra
2014-02-26T18:12:38  <foobio> also, xkcd.com/now is my new favorite tool for planning meetings ;)
2014-02-26T18:13:20  <quantumfly> foobio: commented on the doc change responding to inline comments
2014-02-26T18:13:55  <foobio> quantumfly: perfect. i'll update that asap
2014-02-26T18:14:01  *** lcheng_ has joined #openstack-infra
2014-02-26T18:14:17  *** alexpilotti has joined #openstack-infra
2014-02-26T18:14:19  <foobio> the docs had fallen a bit behind reality, but i was still a little unsure of my understanding there
2014-02-26T18:15:39  *** dcramer___ has quit IRC
2014-02-26T18:16:15  *** luqas has quit IRC
2014-02-26T18:17:29  *** e0ne has joined #openstack-infra
2014-02-26T18:18:26  *** skraynev is now known as skraynev_afk
2014-02-26T18:18:55  <quantumfly> and commented on the change primary node change. Whcih needs a small tweak
2014-02-26T18:19:15  *** gokrokve has joined #openstack-infra
2014-02-26T18:19:37  *** alexpilotti_ has joined #openstack-infra
2014-02-26T18:20:09  *** alexpilotti has quit IRC
2014-02-26T18:20:09  *** alexpilotti_ is now known as alexpilotti
2014-02-26T18:20:10  <foobio> k
2014-02-26T18:20:30  *** Ryan_Lane1 has joined #openstack-infra
2014-02-26T18:20:31  *** nati_ueno has joined #openstack-infra
2014-02-26T18:20:38  *** cody-somerville has quit IRC
2014-02-26T18:20:45  *** jcooley_ has joined #openstack-infra
2014-02-26T18:20:48  *** pdmars has quit IRC
2014-02-26T18:20:53  *** changbl has joined #openstack-infra
2014-02-26T18:21:16  *** derekh has quit IRC
2014-02-26T18:21:51  *** Ryan_Lane1 has quit IRC
2014-02-26T18:22:33  *** reed has joined #openstack-infra
2014-02-26T18:22:44  *** andreaf has quit IRC
2014-02-26T18:22:47  *** e0ne has quit IRC
2014-02-26T18:22:54  *** e0ne has joined #openstack-infra
2014-02-26T18:23:07  *** reed has quit IRC
2014-02-26T18:24:21  *** prad__ has quit IRC
2014-02-26T18:24:47  *** khyati has quit IRC
2014-02-26T18:25:54  <openstackgerrit> James E. Blair proposed a change to openstack-infra/zuul: Ignore approvals without descriptions  https://review.openstack.org/76610
2014-02-26T18:25:55  <openstackgerrit> James E. Blair proposed a change to openstack-infra/zuul: Handle builds without gearman jobs  https://review.openstack.org/76611
2014-02-26T18:26:47  <openstackgerrit> James E. Blair proposed a change to openstack-infra/zuul: Handle builds without gearman jobs  https://review.openstack.org/76611
2014-02-26T18:26:48  <openstackgerrit> James E. Blair proposed a change to openstack-infra/zuul: Ignore approvals without descriptions  https://review.openstack.org/76610
2014-02-26T18:26:54  *** jgallard has quit IRC
2014-02-26T18:27:23  <foobio> quantumfly: so while i'm tweaking those, should i go ahead and stop elasticsearch on elasticsearch6 and wait for replication to settle again?
2014-02-26T18:27:30  <jbooboo> foobio, quantumfly: ^ can you speedy-review those?  I'd like to go aheand and put into production since they (hopefully) fix two production problems we're seeing
2014-02-26T18:27:39  <quantumfly> sure
2014-02-26T18:27:42  <foobio> jbooboo: was already in the middle of doing so ;)
2014-02-26T18:27:50  <quantumfly> foobio: I think that sounds like a great idea
2014-02-26T18:27:51  *** oubiwann_ has joined #openstack-infra
2014-02-26T18:28:13  <quantumfly> just stopping the service should be fine, but if you are really lazy you can do it via elasticsearch-head
2014-02-26T18:28:22  <quantumfly> I typically am on the host anyways so don't use the web gui thing
2014-02-26T18:28:38  <jbooboo> stupid flake8
2014-02-26T18:28:52  *** oubiwann_ has quit IRC
2014-02-26T18:29:04  *** Ryan_Lane1 has joined #openstack-infra
2014-02-26T18:29:53  <openstackgerrit> James E. Blair proposed a change to openstack-infra/zuul: Handle builds without gearman jobs  https://review.openstack.org/76611
2014-02-26T18:29:53  *** pdmars has joined #openstack-infra
2014-02-26T18:31:12  <foobio> quantumfly: the "yellow" shards are ones which currently lack redundancy now that their counterparts on es6 are unavailable?
2014-02-26T18:31:45  *** prad_ has joined #openstack-infra
2014-02-26T18:31:55  <quantumfly> foobio: correct, once they have been replicated from the other copy the cluster will go back to green
2014-02-26T18:32:08  <openstackgerrit> James E. Blair proposed a change to openstack-infra/zuul: Handle builds without gearman jobs  https://review.openstack.org/76611
2014-02-26T18:32:19  <quantumfly> foobio: those yellow ones are the ones that are recovering
2014-02-26T18:32:20  <jbooboo> foobio: so sorry ^ :(
2014-02-26T18:32:22  <foobio> jbooboo: was flake8 complaining about directly accessing a private method from another module?
2014-02-26T18:32:33  <jbooboo> foobio: no it was complaining that job was never used
2014-02-26T18:32:43  <foobio> oh!
2014-02-26T18:33:09  <jbooboo> foobio: but __ is extra magic and you can't test it with hasattr
2014-02-26T18:33:16  <foobio> right
2014-02-26T18:33:38  <jbooboo> OH!
2014-02-26T18:34:01  *** harlowja_away is now known as harlowja
2014-02-26T18:34:14  <jbooboo> jhesketh added worker information to the data model though, and i think that would probably be a good place to put that information so we can stop using __
2014-02-26T18:34:20  <jbooboo> but that's for another day
2014-02-26T18:34:40  <quantumfly> 76610 has been approved onto 11 no1
2014-02-26T18:35:05  *** saju_m has quit IRC
2014-02-26T18:35:23  *** reed has joined #openstack-infra
2014-02-26T18:36:27  *** morganfainberg_Z is now known as morganfainberg
2014-02-26T18:36:36  *** Ryan_Lane1 has quit IRC
2014-02-26T18:36:37  *** Ryan_Lane1 has joined #openstack-infra
2014-02-26T18:37:39  <openstackgerrit> A change was merged to openstack-infra/zuul: Ignore approvals without descriptions  https://review.openstack.org/76610
2014-02-26T18:38:47  *** nicedice has joined #openstack-infra
2014-02-26T18:39:30  <jesusaurus> quantumfly: i just had a thought: if i push a change to gerrit, then quickly make a small change and push a second changeset to the change, will zuul abort the tests on the first changeset?
2014-02-26T18:39:42  <jesusaurus> that probably doesnt happen /too/ often...
2014-02-26T18:40:09  <quantumfly> and 76611 approved
2014-02-26T18:40:14  <quantumfly> jesusaurus: it will
2014-02-26T18:40:26  <jesusaurus> ah, cool
2014-02-26T18:40:38  <openstackgerrit> Elizabeth Krumbach Joseph proposed a change to openstack-infra/config: Add the bugdaystats to openstack-infra  https://review.openstack.org/69489
2014-02-26T18:40:41  *** jpeeler has quit IRC
2014-02-26T18:40:54  *** jpeeler has joined #openstack-infra
2014-02-26T18:41:54  * SergeyLukjanov is to slow to review Jim's patches to zuul :)
2014-02-26T18:42:00  <quantumfly> SergeyLukjanov: oh sorry
2014-02-26T18:42:09  <quantumfly> jbooboo put it on the asap list so I didn't wait to approve
2014-02-26T18:42:20  <SergeyLukjanov> quantumfly, nope, everything is ok ;)
2014-02-26T18:43:27  <openstackgerrit> A change was merged to openstack-infra/zuul: Handle builds without gearman jobs  https://review.openstack.org/76611
2014-02-26T18:43:53  <Ryan_Lane1> so it seems you're slowly replacing jenkins with zuul
2014-02-26T18:44:20  <Ryan_Lane1> any idea on when that'll be completely replaced? I have basically no love for jenkins :)
2014-02-26T18:44:23  <jbooboo> Ryan_Lane1: yep.  the end is in sight.
2014-02-26T18:44:27  <quantumfly> jbooboo: log gearman client has a cpu pegged onlogstash.o.o is that possibly related to the stats reporting?
2014-02-26T18:44:33  <Ryan_Lane1> I'd love to have a python alternative
2014-02-26T18:44:38  *** davidhadas has quit IRC
2014-02-26T18:44:47  <quantumfly> Ryan_Lane1: if turbohipster meets your needs you can do it today
2014-02-26T18:45:00  <jbooboo> Ryan_Lane1: jhesketh wrote turbo-hipster which is python-based job runner for zuul
2014-02-26T18:45:04  <quantumfly> Ryan_Lane1: mikal and jhesketh and mattoliverau are doing it with zuul in rax land for third part db tests
2014-02-26T18:45:16  <Ryan_Lane1> ah. is this what openstack will go with in the future?
2014-02-26T18:45:31  <jbooboo> Ryan_Lane1: close but not exactly as it is now...
2014-02-26T18:45:40  <jbooboo> Ryan_Lane1: we still want to use jenkins-job-builder
2014-02-26T18:45:55  <openstackgerrit> A change was merged to openstack-infra/config: Set Zuul gear server logs to debug  https://review.openstack.org/76596
2014-02-26T18:45:59  <jbooboo> Ryan_Lane1: (because of the templating, not because we love xml)
2014-02-26T18:46:06  *** chandan_kumar has quit IRC
2014-02-26T18:46:13  <Ryan_Lane1> heh. docs for turbohipster are basically non-existent
2014-02-26T18:46:24  * Ryan_Lane1 nods
2014-02-26T18:46:41  *** valentinbud has quit IRC
2014-02-26T18:46:54  <jbooboo> Ryan_Lane1: so we'll have something like turbo-hipster (maybe turbo-hipster if it wants to grow these features) that will read jjb-style yaml and do simple shell-based builds
2014-02-26T18:47:30  *** esker has quit IRC
2014-02-26T18:47:35  <jbooboo> Ryan_Lane1: but before we get there, we're working on swift-based artifact archiving
2014-02-26T18:47:45  <Ryan_Lane1> I think I'll wait a while and take a look again. I'd like to replace jenkins with something better, but I'm also not using gerrit
2014-02-26T18:47:49  <jbooboo> Ryan_Lane1: so that our logs and tarballs can be uploaded to swift, replacing the jenkins scp stuff.
2014-02-26T18:47:51  <Ryan_Lane1> so it'll be quite a bit of work for me
2014-02-26T18:47:58  <Ryan_Lane1> ah. nice
2014-02-26T18:48:05  *** esker has joined #openstack-infra
2014-02-26T18:48:37  *** krotscheck has joined #openstack-infra
2014-02-26T18:48:58  <foobio> Ryan_Lane1: the solum devs are also eyeballing zuul as a basic work engine, potentially completely detached from gerrit scenarios, so there's a good chance they're be incented to start hanging new sorts of triggers in there
2014-02-26T18:49:07  *** khyati has joined #openstack-infra
2014-02-26T18:49:46  <jbooboo> Ryan_Lane1: also some python devs are considering attaching it to rietveld
2014-02-26T18:50:07  <jbooboo> Ryan_Lane1: http://legacy.python.org/dev/peps/pep-0462/
2014-02-26T18:50:22  *** Mithrandir has quit IRC
2014-02-26T18:50:30  *** Mithrandir has joined #openstack-infra
2014-02-26T18:51:45  *** mpanetta has joined #openstack-infra
2014-02-26T18:52:02  <Ryan_Lane1> I'd need github, but hopefully in the future phabricator
2014-02-26T18:52:09  *** dcramer___ has joined #openstack-infra
2014-02-26T18:52:13  <Ryan_Lane1> there's no chance I'll introduce gerrit to another organization
2014-02-26T18:52:18  *** esker has quit IRC
2014-02-26T18:52:18  <Ryan_Lane1> that was painful enough at wikimedia
2014-02-26T18:52:26  <mpanetta> Hey guys, anyone that can help me?  I am having issues signing the contributor agreement.  It is giving me this error:
2014-02-26T18:53:03  *** julim_ has quit IRC
2014-02-26T18:53:13  <quantumfly> Ryan_Lane1: :P adding a github callback trigger to zuul shouldn't be terrible
2014-02-26T18:53:21  <mpanetta> The request could not be completed <blah blah> Make sure you have joined the foundation...
2014-02-26T18:53:32  <mpanetta> But I am logged in, so I must have joined no?
2014-02-26T18:53:42  <quantumfly> mpanetta: no, login is via launchpad openid
2014-02-26T18:53:49  <mpanetta> Ah ok
2014-02-26T18:53:52  <foobio> mpanetta: https://wiki.openstack.org/wiki/CLA-FAQ#When_trying_to_sign_the_new_ICLA_and_include_contact_information.2C_why_am_I.27m_getting_an_error_message_saying_that_my_E-mail_address_doesn.27t_correspond_to_a_Foundation_membership.3F
2014-02-26T18:54:08  <mpanetta> foobio: Thanks!
2014-02-26T18:54:09  <quantumfly> mpanetta: https://www.openstack.org/join/ is where you can join the foundation
2014-02-26T18:54:21  <mpanetta> Thank you quantumfly :)
2014-02-26T18:54:38  <SergeyLukjanov> folks, could you, please, take a look at https://review.openstack.org/#/c/74309/? it's direct-release hard-coded list removal from jeepyb
2014-02-26T18:55:18  *** pmathews has quit IRC
2014-02-26T18:55:28  <sdague> what do we need to get an elastic-recheck-core made?
2014-02-26T18:55:38  <sdague> in gerrit
2014-02-26T18:55:54  *** shashank__ has quit IRC
2014-02-26T18:55:56  <foobio> sdague: is it mentioned in a gerrit acl?
2014-02-26T18:56:02  <SergeyLukjanov> sdague, fix acls in infra/config and ask infra-root to add you to the new group
2014-02-26T18:56:09  *** pblaho has quit IRC
2014-02-26T18:56:11  <sdague> foobio: I don't think so
2014-02-26T18:56:14  <foobio> sdague: groups get automagically created in gerrit if they're part of an acl
2014-02-26T18:56:28  <foobio> sdague: if they're not used by any gerrit acl, what is the use case?
2014-02-26T18:56:33  <jbooboo> sdague: it already exists
2014-02-26T18:56:41  <jbooboo> sdague: https://review.openstack.org/#/admin/groups/218,members
2014-02-26T18:56:49  <SergeyLukjanov> sdague, and acls are correct
2014-02-26T18:57:02  <SergeyLukjanov>         label-Approved = +0..+1 group elastic-recheck-core
2014-02-26T18:57:02  <SergeyLukjanov>         label-Code-Review = -2..+2 group elastic-recheck-core
2014-02-26T18:57:06  <openstackgerrit> A change was merged to openstack-infra/jeepyb: Remove hardcoded direct-release project list  https://review.openstack.org/74309
2014-02-26T18:57:24  <SergeyLukjanov> + refs/tags for elastic-recheck-ptl
2014-02-26T18:57:27  <sdague> oh, right, so we just need to add folks
2014-02-26T18:57:33  <sdague> my bad
2014-02-26T18:57:42  *** mpanetta has left #openstack-infra
2014-02-26T18:57:49  *** CaptTofu has quit IRC
2014-02-26T18:58:12  <jbooboo> sdague: i expect that you should have a field on that page to add people; let me know if that's not the case.
2014-02-26T18:58:12  *** thomasem has joined #openstack-infra
2014-02-26T18:58:16  *** CaptTofu has joined #openstack-infra
2014-02-26T18:58:18  *** melwitt has joined #openstack-infra
2014-02-26T18:58:49  <sdague> yep, I do
2014-02-26T18:58:56  <sdague> it was just all group oriented before
2014-02-26T19:00:45  *** shashank__ has joined #openstack-infra
2014-02-26T19:01:45  *** bhuvan_ has joined #openstack-infra
2014-02-26T19:01:51  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Remove old elasticsearch cluster members  https://review.openstack.org/76051
2014-02-26T19:01:52  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Update logstash doc for an elasticsearch cluster  https://review.openstack.org/76574
2014-02-26T19:01:52  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Move primary elasticsearch discover node  https://review.openstack.org/76575
2014-02-26T19:02:12  <jbooboo> i plan on restarting zuul when the current gate job finishes
2014-02-26T19:02:13  <Ryan_Lane1> quantumfly: yeah, but I don't necessarily want to put the work in for github if we're going to move away from it
2014-02-26T19:02:29  *** CaptTofu has quit IRC
2014-02-26T19:02:33  <quantumfly> ah
2014-02-26T19:03:04  <jbooboo> Ryan_Lane1: if a github trigger existed, we would use it so that we could CI the repos of our dependencies
2014-02-26T19:03:24  <Ryan_Lane1> oh, interesting.
2014-02-26T19:03:31  <jbooboo> Ryan_Lane1: i don't know if that interests you, but ther's certainly use for a github trigger even for orgs that don't use it as their primary
2014-02-26T19:03:32  <foobio> Ryan_Lane1: the solum devs were actually discussing that as possibly one of their first patches to zuul anyway
2014-02-26T19:03:57  <Ryan_Lane1> that would be awesome
2014-02-26T19:03:57  *** fbo is now known as fbo_away
2014-02-26T19:04:01  * Ryan_Lane1 wants
2014-02-26T19:04:03  <quantumfly> foobio: they actually wrote an amqp trigger but haven't upstremaed
2014-02-26T19:04:08  <Ryan_Lane1> :(
2014-02-26T19:04:09  <openstackgerrit> A change was merged to openstack/requirements: Allow projects to use oslo.vmware  https://review.openstack.org/75539
2014-02-26T19:04:09  <Ryan_Lane1> heh
2014-02-26T19:04:46  <jbooboo> the queue is clearing, i'll be restarting zuul in a second
2014-02-26T19:05:06  * jbooboo watches in #openstack-merges
2014-02-26T19:05:08  <Ryan_Lane1> well, that does interest me, but I don't want to lick that cookie
2014-02-26T19:05:14  <Ryan_Lane1> since I may not have time to actually do it
2014-02-26T19:05:19  *** bhuvan has quit IRC
2014-02-26T19:05:40  <Ryan_Lane1> man, there's someone I really need to hire, because he'd be able to do this in a matter of hours
2014-02-26T19:06:11  <jbooboo> Ryan_Lane1: maybe an openstack company can hire him to do this.  :)
2014-02-26T19:06:24  <Ryan_Lane1> notice I didn't mention who it was ;)
2014-02-26T19:06:29  *** tkorochka has quit IRC
2014-02-26T19:06:56  <jbooboo> Ryan_Lane1: as long as they are hired by someone to work on zuul, i don't care who.  :)
2014-02-26T19:07:15  *** ociuhandu has quit IRC
2014-02-26T19:07:22  <Ryan_Lane1> :D
2014-02-26T19:07:26  *** dcramer___ has quit IRC
2014-02-26T19:07:30  <dhellmann> jbooboo, SergeyLukjanov: I posted a couple of questions on https://review.openstack.org/#/c/76381/
2014-02-26T19:07:30  <dkranz> The new log links in jenkins to tempest.conf.gz are not setting the uncompress headers. Should I file a bug?
2014-02-26T19:07:51  <jbooboo> Zuul is restarted
2014-02-26T19:08:41  <jbooboo> dkranz: in devstack-gate they should be moved to 'tempest.conf.txt' and then gzipped
2014-02-26T19:09:10  <dkranz> jbooboo: ok, I'll take a look.
2014-02-26T19:09:54  *** mfer has quit IRC
2014-02-26T19:12:10  <foobio> jbooboo: you said mergers still need restarting after the main zuul process, right?
2014-02-26T19:12:21  <jbooboo> foobio: so i did
2014-02-26T19:12:27  <foobio> if so, they don't seem to have been yet
2014-02-26T19:12:41  <jbooboo> that should really be next on my list
2014-02-26T19:12:59  <foobio> or i can restart them if you like
2014-02-26T19:13:13  <quantumfly> jbooboo: foobio: why is that the case? because the mergers don't rejoin the gaerd?
2014-02-26T19:13:15  <jbooboo> foobio: i'm on it
2014-02-26T19:13:29  <jbooboo> quantumfly: they only re-register one of their functions
2014-02-26T19:14:04  <openstackgerrit> David Kranz proposed a change to openstack-infra/devstack-gate: Rename tempest.conf so it is gz'ed properly  https://review.openstack.org/76622
2014-02-26T19:14:06  <jbooboo> also, the pidfile is wrong so the init script doesn't work.
2014-02-26T19:14:30  <quantumfly> gotcha
2014-02-26T19:14:38  <jbooboo> they are both running now
2014-02-26T19:14:58  *** freyes has joined #openstack-infra
2014-02-26T19:15:26  *** esker has joined #openstack-infra
2014-02-26T19:15:47  <foobio> we have changes with completion estimates now, so looks good
2014-02-26T19:15:50  *** esker has quit IRC
2014-02-26T19:16:00  <apevec> foobio, your blessing was asked for the evil patch https://review.openstack.org/76058 (workaround for grenade job in stable/havana)
2014-02-26T19:16:22  *** prad_ has quit IRC
2014-02-26T19:16:44  *** andreaf has joined #openstack-infra
2014-02-26T19:16:45  <foobio> apevec: i proposed https://review.openstack.org/76280 instead
2014-02-26T19:17:10  <apevec> ah thanks, I missed that
2014-02-26T19:17:25  <foobio> apevec: we've got a week left on grizzly support, so it didn't seem worthwhile for people to waste any more time fixing upgrade testing on it
2014-02-26T19:17:25  <wendar> jbooboo/quantumfly: who has access to update the "official tags" list for the Nova project? Only the general OpenStack admins?
2014-02-26T19:17:26  <apevec> I'll add link and abandon evil patch then
2014-02-26T19:17:38  <foobio> apevec: well, mine hasn't exactly been +2'd either
2014-02-26T19:17:57  <foobio> it's an alternate approach, admittedly distasteful, but pragmatic
2014-02-26T19:18:26  *** sarob has joined #openstack-infra
2014-02-26T19:18:27  <foobio> apevec: i'm fine with 76058 if it works
2014-02-26T19:18:30  <quantumfly> wendar: git tags? usually project ptls and possibly a small group of folks delegated with that responsibility
2014-02-26T19:18:31  <sdague> wendar: I think nova-drivers
2014-02-26T19:18:31  *** sdake_ has quit IRC
2014-02-26T19:18:32  <jbooboo> dhellmann: responded.  i think we have two choices: we can proceed with the devstack-gate plan but that only works with py27 for now (until we make some infra improvements on test nodes)
2014-02-26T19:18:40  <wendar> clarckb: Launchpad bug tags.
2014-02-26T19:18:48  *** sdake_ has joined #openstack-infra
2014-02-26T19:18:53  *** prad has joined #openstack-infra
2014-02-26T19:18:55  <dhellmann> jbooboo: that's acceptable
2014-02-26T19:19:01  <wendar> I mean quantumfly ^ :)
2014-02-26T19:19:16  <quantumfly> wendar: I think sdague is correct
2014-02-26T19:19:26  <jbooboo> dhellmann: or if py26-33 testing is more important, then we can go with an asymmetric gate (or even just non-voting tests) on the regular unit test nodes and forego the devstack-gate git repo setup
2014-02-26T19:19:59  <wendar> sdague: In Launchpad, the only "Adminstrator" in the Nova Bugs team is "OpenStack Administrators".
2014-02-26T19:20:00  <apevec> foobio, that's a good question, not sure that after 76058 is fixed, it won't break in some other place
2014-02-26T19:20:21  <dhellmann> jbooboo: the idea is to prevent breaking the other projects, which really means API changes. We do have unit tests for the lib by itself to verify we don't break py26 and py33, I was just being overly cautious
2014-02-26T19:20:28  <wendar> But then, maybe any team member has access to update that list.
2014-02-26T19:20:40  <apevec> e.g. this popped after skipping swift devstack exercises
2014-02-26T19:21:08  *** davidhadas has joined #openstack-infra
2014-02-26T19:21:22  <dhellmann> jbooboo: and if we'll have the git repo checkout stuff working on unit test nodes at some point, we can add more test jobs then
2014-02-26T19:21:25  <foobio> apevec: yep, i put that previous attempt through, which was what then prompted me to propose just dropping that job a week ahead of schedule
2014-02-26T19:21:26  *** dcramer___ has joined #openstack-infra
2014-02-26T19:22:03  <jbooboo> dhellmann: okay.  i'll redo that change appropriately.  i'll just hard-code py27 for now.
2014-02-26T19:22:04  <foobio> apevec: i say we merge 76058 first, since it's already written, and then if it still doesn't help we go forward with 76280 and not waste more developer time on it
2014-02-26T19:22:19  <dhellmann> jbooboo: passing it to run_cross_tests.sh?
2014-02-26T19:22:40  <jbooboo> dhellmann: yeah, so the arg will already be there, and we can plumb it into jjb when we're actually ready to use it.
2014-02-26T19:22:48  <dhellmann> jbooboo: makes sense
2014-02-26T19:22:56  <krotscheck> quantumfly: Would you mind pinging me once that permissions patch lands?
2014-02-26T19:23:09  *** bhuvan has joined #openstack-infra
2014-02-26T19:23:11  <dhellmann> jbooboo: I'll rework run_ross_tests.sh to take those args
2014-02-26T19:23:14  <krotscheck> quantumfly: I'm about to go eyeballs deep into OpenID, so...
2014-02-26T19:23:16  <apevec> foobio, ok
2014-02-26T19:23:22  <jbooboo> dhellmann: oh, do you need the name of the project or just the path?
2014-02-26T19:23:24  <dhellmann> jbooboo: oh, can  you pass the root for the repos, too? that way we can use run_cross_tests.sh locally
2014-02-26T19:23:28  <dhellmann> heh
2014-02-26T19:23:33  <apevec> sdague, ^^^ that was foobio re. 76058
2014-02-26T19:23:33  <dhellmann> paths are probably better
2014-02-26T19:23:37  <jbooboo> cool
2014-02-26T19:23:47  <quantumfly> krotscheck: sure, it hasn't even been proposed yet, but I suppose I should do that really quick since everyone wants it
2014-02-26T19:24:26  *** thuc_ has quit IRC
2014-02-26T19:24:27  <foobio> apevec: sdague: i +1'd and updated the change accordingly
2014-02-26T19:24:30  <dhellmann> jbooboo: does my hacky two-calls-to-tox approach still make sense?
2014-02-26T19:24:59  <openstackgerrit> A change was merged to openstack-infra/config: Add new elasticsearch cluster members to cacti  https://review.openstack.org/76573
2014-02-26T19:25:17  <foobio> quantumfly: did you do something earlier to put logstash-worker05 and 09 back into service? (i noticed last night they were missing in the status monitors)
2014-02-26T19:25:19  <jbooboo> dhellmann: yes.  one downside to that is we're missing some of the sanity checks that the run-unittests script gives us, but since these are essentially duplicate tests as far as that goes, we're probably okay.
2014-02-26T19:25:41  <jbooboo> dhellmann: (sanity checks like did it oom, or sudo, or run zero tests)
2014-02-26T19:25:53  <jbooboo> dhellmann: actually, that last one might be a good one to have in run_cross_tests
2014-02-26T19:26:00  *** thuc has joined #openstack-infra
2014-02-26T19:26:24  <quantumfly> foobio: I did `sudo restart logstash-indexer`. https://review.openstack.org/#/c/75966/ should automate that for us
2014-02-26T19:26:25  *** CaptTofu has joined #openstack-infra
2014-02-26T19:26:36  *** vkozhukalov_ has joined #openstack-infra
2014-02-26T19:27:04  *** bhuvan_ has quit IRC
2014-02-26T19:27:18  <quantumfly> foobio: that does a simple curl query against the cluster and runs jq over it to determine if the local node is a member of the cluster. If it isn't the service is restarted
2014-02-26T19:27:33  <foobio> quantumfly: is there an upstream bug which 75966 is working around?
2014-02-26T19:28:10  <quantumfly> foobio: I haven't gone digging in logstash and elasticsearch's jiras but either logstash or the es client lib is at fault. It should try reconnecting imo
2014-02-26T19:28:18  <foobio> just curious whether we've been good citizens and reported it upstream, at least
2014-02-26T19:28:31  <quantumfly> I haven't had time yet, but should do that
2014-02-26T19:28:34  <quantumfly> but jira :P
2014-02-26T19:28:40  <foobio> yuck, agreed
2014-02-26T19:28:50  <foobio> quantumfly: you should ask olaph to help
2014-02-26T19:28:58  <dhellmann> jbooboo: I would hate to complicate that script by making it know how to do this dance
2014-02-26T19:28:58  <quantumfly> ha
2014-02-26T19:29:10  <quantumfly> I might be able to con someon in their irc channels to do it for me too
2014-02-26T19:29:12  <dhellmann> jbooboo: I could put a tox target in the remote project that knows what to do, but that also feels gross
2014-02-26T19:29:51  <jbooboo> dhellmann: yeah.  maybe we can refactor run-unittests in the future to have phases we can call externally
2014-02-26T19:29:58  <dhellmann> jbooboo: what if we refactor run-unittestes.sh into run-unittests.sh and check-unittest-issues.sh or something
2014-02-26T19:30:00  <dhellmann> haha
2014-02-26T19:30:25  <dhellmann> jbooboo: great minds...
2014-02-26T19:30:27  <jbooboo> we're on a roll today
2014-02-26T19:30:39  <dhellmann> indeed
2014-02-26T19:30:50  *** oubiwann_ has joined #openstack-infra
2014-02-26T19:31:01  <jbooboo> i think we may need more git servers
2014-02-26T19:31:03  <dhellmann> so should I go ahead and refactor now, or copy the relevant bits into my new script for the time being?
2014-02-26T19:31:09  <foobio> jbooboo: we can make more
2014-02-26T19:31:25  <foobio> jbooboo: or do we just need bigger git servers?
2014-02-26T19:31:43  <jbooboo> dhellmann: i'd recommend copying for now.  that one is is a fairly easy code block that you can just run after the real tox run.
2014-02-26T19:31:50  <dhellmann> jbooboo: ack
2014-02-26T19:32:08  <quantumfly> jbooboo: more git servers for the mirror?
2014-02-26T19:32:12  <jbooboo> foobio: i think we found the ram/cpu sweet-spot last time with benchmarking.  of course, they are probably standard, not performance nodes.
2014-02-26T19:32:13  <jbooboo> quantumfly: yes.
2014-02-26T19:32:21  <quantumfly> they are standard
2014-02-26T19:32:57  <foobio> yeah we're spiking up to 50mbps on them, looks like
2014-02-26T19:33:03  <jbooboo> we should probably add one then take each of the other 4 out and replace them.
2014-02-26T19:33:32  <foobio> oh, and we are tapping out cpu on them occasionally as well
2014-02-26T19:33:57  <foobio> with load averages spiking up to ~40 on zuul restart
2014-02-26T19:34:29  *** dcramer___ has quit IRC
2014-02-26T19:34:39  <quantumfly> are there pvhvm cenots images?
2014-02-26T19:34:44  <openstackgerrit> James E. Blair proposed a change to openstack-infra/config: Add oslo.test integration test  https://review.openstack.org/76381
2014-02-26T19:34:46  <quantumfly> if so we can go that route too
2014-02-26T19:34:55  <openstackgerrit> Michael Krotscheck proposed a change to openstack-infra/storyboard-webclient: MVP Storyboard Client  https://review.openstack.org/70897
2014-02-26T19:34:57  <foobio> quantumfly: ckecking now
2014-02-26T19:35:59  <dhellmann> jbooboo: looks good
2014-02-26T19:36:04  <foobio> quantumfly: yep... CentOS 6.5 (PVHVM)
2014-02-26T19:36:38  <foobio> quantumfly: i'll whip up a change to add a new pvhvm performance node, and then a second change to put it into the haproxy pool
2014-02-26T19:36:44  <foobio> jbooboo: ^
2014-02-26T19:36:52  <jbooboo> foobio: awesome, thx
2014-02-26T19:36:56  <quantumfly> sounds good
2014-02-26T19:37:00  *** jp_at_hp has quit IRC
2014-02-26T19:37:22  *** bhuvan has quit IRC
2014-02-26T19:37:41  <jbooboo> so the new graph tells us that zuul would be running 1000 simultaneous jobs now if it could, but is currently only able to run a bit more than 500 of them.
2014-02-26T19:38:14  <foobio> quantumfly: on the es front, we're down to 2 remaining shards being replicated i think
2014-02-26T19:38:28  <foobio> quantumfly: once those finish, we stop elasticsearch on es5?
2014-02-26T19:38:33  *** coolsvap1 has joined #openstack-infra
2014-02-26T19:38:50  *** dstanek_afk has joined #openstack-infra
2014-02-26T19:38:57  *** unicell1 has joined #openstack-infra
2014-02-26T19:39:50  <quantumfly> foobio: once those finish and the cluste rshows green
2014-02-26T19:39:56  <quantumfly> bigdesk will update its color
2014-02-26T19:40:00  <foobio> yeah
2014-02-26T19:40:04  <foobio> i assumed as much
2014-02-26T19:40:10  <foobio> fancy, fancy colors
2014-02-26T19:40:36  *** wchrisj_ has joined #openstack-infra
2014-02-26T19:40:37  *** stevebaker has joined #openstack-infra
2014-02-26T19:41:29  *** dprince_ has joined #openstack-infra
2014-02-26T19:41:31  *** vkozhukalov_ has quit IRC
2014-02-26T19:41:48  *** moted_ has joined #openstack-infra
2014-02-26T19:41:59  *** julim has joined #openstack-infra
2014-02-26T19:42:14  *** mbacchi_ has joined #openstack-infra
2014-02-26T19:42:19  *** julienvey1 has joined #openstack-infra
2014-02-26T19:42:22  *** miqui_ has joined #openstack-infra
2014-02-26T19:42:27  *** smarcet1 has joined #openstack-infra
2014-02-26T19:43:26  <apevec> foobio, mordred - why do have trove in stable/havana requirements-integration? http://logs.openstack.org/09/62209/1/check/check-requirements-integration-dsvm/aceddc0/console.html.gz#_2014-02-18_17_30_41_294
2014-02-26T19:43:44  *** dprince_ has quit IRC
2014-02-26T19:44:07  <apevec> trove stable/havana is not maintained https://github.com/openstack/trove/commits/stable/havana
2014-02-26T19:44:17  *** dstanek has quit IRC
2014-02-26T19:44:17  *** dstanek_afk is now known as dstanek
2014-02-26T19:44:20  <foobio> apevec: presumably they requested it as they were working toward incubation
2014-02-26T19:44:24  <apevec> it's not part of stable-maint in Havana
2014-02-26T19:45:11  <apevec> foobio, right, but they got integrate at Havana GA i.e. will be part of stable release in stable/icehouse cycle
2014-02-26T19:45:18  <foobio> apevec: if the goal is to only include projects which are under stable-maint in requirements integration, then that probably merits wider discussion
2014-02-26T19:45:18  *** dhellmann is now known as dhellmann_
2014-02-26T19:45:26  <apevec> like Ceilo and Heat Grizzly were not
2014-02-26T19:45:34  <quantumfly> foobio: you can also `curl -XGET http://localhost:9200/_cluster/status?pretty=true` if you want to query it directly
2014-02-26T19:45:47  <foobio> quantumfly: oh, cool!
2014-02-26T19:45:48  <openstackgerrit> Paul Michali proposed a change to openstack/requirements: Update requests to 2.1.0 and add httmock to tests  https://review.openstack.org/75296
2014-02-26T19:46:19  <apevec> foobio, somebody should actively work on stable/* branch and that's not happening for trove stable/havana
2014-02-26T19:46:39  <apevec> e.g. ceilo and heat team did work on stable/grizzly
2014-02-26T19:46:56  <foobio> apevec: i believe currently the list of projects which are in requirements integration uses teh same list as the projects which wish to receive requirements sync updates, so there are a number of projects which are not official or even curently incubated in the list
2014-02-26T19:47:01  *** markmcclain has quit IRC
2014-02-26T19:47:36  *** krotscheck has quit IRC
2014-02-26T19:47:36  *** reed has quit IRC
2014-02-26T19:47:36  *** changbl has quit IRC
2014-02-26T19:47:36  *** coolsvap has quit IRC
2014-02-26T19:47:36  *** moted has quit IRC
2014-02-26T19:47:36  *** gyee has quit IRC
2014-02-26T19:47:36  *** dprince has quit IRC
2014-02-26T19:47:36  *** rfolco has quit IRC
2014-02-26T19:47:36  *** wchrisj has quit IRC
2014-02-26T19:47:36  *** ryanpetrello has quit IRC
2014-02-26T19:47:36  *** sdake has quit IRC
2014-02-26T19:47:36  *** smarcet has quit IRC
2014-02-26T19:47:36  *** mbacchi has quit IRC
2014-02-26T19:47:36  *** che-arne has quit IRC
2014-02-26T19:47:36  *** bogdando has quit IRC
2014-02-26T19:47:36  *** yassine has quit IRC
2014-02-26T19:47:36  *** miqui has quit IRC
2014-02-26T19:47:36  *** vishy has quit IRC
2014-02-26T19:47:36  *** unicell has quit IRC
2014-02-26T19:47:36  *** vponomaryov has quit IRC
2014-02-26T19:47:36  *** Hunner has quit IRC
2014-02-26T19:47:37  *** bradm has quit IRC
2014-02-26T19:47:37  *** akscram has quit IRC
2014-02-26T19:47:37  *** moted_ is now known as moted
2014-02-26T19:47:47  <foobio> apevec: but i recommend following up with hub_cap or SlickNik or one of the other trove heavies on this topic
2014-02-26T19:48:28  <foobio> apevec: if they don't want to support their stable/havana branch, then it's a one-line patch to remove them from the stable/havana branch of openstack/requirements:projects.txt
2014-02-26T19:48:57  *** vkozhukalov has joined #openstack-infra
2014-02-26T19:49:06  <apevec> ok, I'll check w/ trove team
2014-02-26T19:49:09  <openstackgerrit> Clark Boylan proposed a change to openstack-infra/config: Optionally give mysql user all global privs.  https://review.openstack.org/76634
2014-02-26T19:49:17  <sdague> jbooboo: is it possible for you to update the er graph with background colors at warning and oh crap thresholds
2014-02-26T19:49:27  <apevec> this is blocking requirements stable/havana so should be fixed one way or the other
2014-02-26T19:49:27  *** Ajaeger has joined #openstack-infra
2014-02-26T19:49:55  <foobio> apevec: if they're unresponsive, we can certainly make an in absentia call to just remove them anyway
2014-02-26T19:50:05  <Ajaeger> Infra team, do we have some jenkins that has not been updated?
2014-02-26T19:51:09  <foobio> Ajaeger: jobs which run on workers with names including "hpcloud-az2" tend to often be days behing on image updates because of a current problem in that provider
2014-02-26T19:51:56  <foobio> Ajaeger: you can look at the top of the console log to see the name of the worker where a job ran
2014-02-26T19:51:57  <apevec> foobio, there was an attempt to fix their havana branch https://review.openstack.org/#/c/75386
2014-02-26T19:52:00  <Ajaeger> foobio, so  bare-precise-hpcloud-az2-1677190  is old?
2014-02-26T19:52:00  <apevec> but ihrachys just gave up when issues started piling up
2014-02-26T19:52:24  <foobio> Ajaeger: well, the vm is very new, but it was built from a nightly image which hasn't updated in a while. i'll find out how long
2014-02-26T19:52:51  *** cadenzajon_ has joined #openstack-infra
2014-02-26T19:53:31  *** gyee has joined #openstack-infra
2014-02-26T19:53:33  <Ajaeger> The change I'm missing is infra change Ia8f60c8a4b9d1b18583366d83ddb82dc61bff9f5 which was merged on Monday
2014-02-26T19:53:33  *** andreaf has quit IRC
2014-02-26T19:53:33  <foobio> Ajaeger: just over 6 days oldf
2014-02-26T19:53:33  <foobio> old
2014-02-26T19:53:33  *** krotscheck has joined #openstack-infra
2014-02-26T19:54:15  *** sdake has joined #openstack-infra
2014-02-26T19:54:15  *** rfolco has joined #openstack-infra
2014-02-26T19:54:15  <Ajaeger> It changed the checkbuild link from logs to docs-draft
2014-02-26T19:54:15  *** reed has joined #openstack-infra
2014-02-26T19:54:15  <openstackgerrit> Matthew Treinish proposed a change to openstack-infra/elastic-recheck: Add query for bug 1285323  https://review.openstack.org/76635
2014-02-26T19:54:16  *** yassine has joined #openstack-infra
2014-02-26T19:54:16  <quantumfly> Ajaeger: I don't think that depends on the slave
2014-02-26T19:54:51  <quantumfly> ya thats a zuul config. Do we have puppet running on zuul.o.o?
2014-02-26T19:55:00  <Ajaeger> quantumfly: Ah. So, why does https://review.openstack.org/#/c/76096/ show as link for the checkbuild logs...
2014-02-26T19:55:22  <foobio> quantumfly: yes, but also Last reconfigured: Wed Feb 26 2014 19:06:46 GMT+0000 (UTC)
2014-02-26T19:55:25  <Ajaeger> Ooops, I see that for most recent builds
2014-02-26T19:56:03  *** cadenzajon has quit IRC
2014-02-26T19:56:31  <Ajaeger> It's fine here: https://review.openstack.org/#/c/75978/
2014-02-26T19:56:43  <foobio> quantumfly: and the success-pattern from that change appears in /etc/zuul/layout.yaml on zuul.o.o
2014-02-26T19:57:02  *** changbl has joined #openstack-infra
2014-02-26T19:57:12  *** jraim has quit IRC
2014-02-26T19:57:15  *** thuc has quit IRC
2014-02-26T19:57:20  *** mestery_ has joined #openstack-infra
2014-02-26T19:57:22  *** enikanorov__ has joined #openstack-infra
2014-02-26T19:57:23  <Ajaeger> So, working on operatoins-guide but failing in openstack-manuals
2014-02-26T19:57:33  * Ajaeger searches for a success for openstack-manuals...
2014-02-26T19:57:43  <quantumfly> foobio: ya I think Ajaeger has indicated it is working on newer builds
2014-02-26T19:57:50  *** thuc has joined #openstack-infra
2014-02-26T19:57:56  <quantumfly> anything run before zuul reloaded its config would have old links
2014-02-26T19:58:26  *** rossella_s has joined #openstack-infra
2014-02-26T19:58:27  *** unicell has joined #openstack-infra
2014-02-26T19:58:32  *** hogepodge is now known as 20WABDE58
2014-02-26T19:58:39  *** hogepodge has joined #openstack-infra
2014-02-26T19:58:39  *** pmathews has joined #openstack-infra
2014-02-26T19:58:39  *** che-arne has joined #openstack-infra
2014-02-26T19:58:39  *** vponomaryov has joined #openstack-infra
2014-02-26T19:58:39  *** bogdando has joined #openstack-infra
2014-02-26T19:58:39  *** vishy has joined #openstack-infra
2014-02-26T19:58:39  *** Hunner has joined #openstack-infra
2014-02-26T19:58:39  *** bradm has joined #openstack-infra
2014-02-26T19:58:39  *** akscram has joined #openstack-infra
2014-02-26T19:58:41  *** dkehn__ has joined #openstack-infra
2014-02-26T19:58:41  *** ArxCruz_ has joined #openstack-infra
2014-02-26T19:58:41  *** jraim has joined #openstack-infra
2014-02-26T19:58:41  <Ajaeger> quantumfly: It seems to fail on gate-openstack-manuals-tox-doc-publish-checkbuild  but works on gate-operations-guide-tox-doc-publish-checkbuild
2014-02-26T19:59:07  *** jraim has quit IRC
2014-02-26T19:59:07  *** hogepodge has quit IRC
2014-02-26T19:59:07  *** pmathews has quit IRC
2014-02-26T19:59:07  *** che-arne has quit IRC
2014-02-26T19:59:07  *** bogdando has quit IRC
2014-02-26T19:59:07  *** vishy has quit IRC
2014-02-26T19:59:07  *** vponomaryov has quit IRC
2014-02-26T19:59:07  *** Hunner has quit IRC
2014-02-26T19:59:07  *** bradm has quit IRC
2014-02-26T19:59:07  *** akscram has quit IRC
2014-02-26T19:59:12  *** dripton_ has joined #openstack-infra
2014-02-26T19:59:20  <openstackgerrit> Matthew Treinish proposed a change to openstack-infra/elastic-recheck: Add query for bug 1285323  https://review.openstack.org/76635
2014-02-26T19:59:26  <quantumfly> Ajaeger: are you sure it isn't just a timing thin?
2014-02-26T19:59:36  <foobio> perhaps we didn't reload the zuul config successfully between when that change merged and a few minutes ago when zuul was restarted?
2014-02-26T19:59:36  *** alexpilotti_ has joined #openstack-infra
2014-02-26T19:59:48  <Ajaeger> quantumfly: I'm right now confused ;(
2014-02-26T20:00:12  *** thuc has quit IRC
2014-02-26T20:00:31  <quantumfly> oh hrm, the test that doesn't have the correct link reported after the one that does
2014-02-26T20:00:54  *** ruhe- has joined #openstack-infra
2014-02-26T20:01:08  *** thuc has joined #openstack-infra
2014-02-26T20:01:12  <quantumfly> Ajaeger: I bet it has something to do with order of matching
2014-02-26T20:01:19  <Ajaeger> Is my regex somehow wrong?
2014-02-26T20:01:26  *** unicell1 has quit IRC
2014-02-26T20:01:27  *** mestery has quit IRC
2014-02-26T20:01:28  *** yassine has quit IRC
2014-02-26T20:01:28  *** alexpilotti has quit IRC
2014-02-26T20:01:28  *** ArxCruz has quit IRC
2014-02-26T20:01:29  *** 20WABDE58 has quit IRC
2014-02-26T20:01:29  *** ruhe has quit IRC
2014-02-26T20:01:29  *** branen has quit IRC
2014-02-26T20:01:29  *** ilyashakhat has quit IRC
2014-02-26T20:01:29  *** enikanorov_ has quit IRC
2014-02-26T20:01:29  *** dripton has quit IRC
2014-02-26T20:01:30  *** yassine has joined #openstack-infra
2014-02-26T20:01:30  *** miqui_ has quit IRC
2014-02-26T20:01:31  *** dims has quit IRC
2014-02-26T20:01:31  *** dkehn_ has quit IRC
2014-02-26T20:01:32  *** alexpilotti_ is now known as alexpilotti
2014-02-26T20:01:32  *** ruhe- is now known as ruhe
2014-02-26T20:01:35  *** mestery_ has quit IRC
2014-02-26T20:01:35  *** mestery_ has joined #openstack-infra
2014-02-26T20:01:37  *** thuc has quit IRC
2014-02-26T20:01:38  <quantumfly> https://review.openstack.org/#/c/73185/2/modules/openstack_project/files/zuul/layout.yaml just above where you added the new lines is an entry for the manuals
2014-02-26T20:01:38  <quantumfly> which may be winning
2014-02-26T20:01:42  *** ilyashakhat has joined #openstack-infra
2014-02-26T20:01:42  * quantumfly reads zuul code
2014-02-26T20:01:56  *** dims has joined #openstack-infra
2014-02-26T20:02:02  *** thuc has joined #openstack-infra
2014-02-26T20:02:07  <Ajaeger> quantumfly: That would explain it!
2014-02-26T20:02:18  *** SumitNaiksatam has quit IRC
2014-02-26T20:02:30  <Ajaeger> I might have not noticed that it worked everywhere except in openstack-manuals...
2014-02-26T20:02:36  *** miqui has joined #openstack-infra
2014-02-26T20:03:04  <Ajaeger> quantumfly: So, fix would be to copy the success-pattern to the entry above?
2014-02-26T20:03:06  *** sabari_ has joined #openstack-infra
2014-02-26T20:03:18  <quantumfly> Ajaeger: maybe, I am trying to udnerstand how that is coalesced in zuul now
2014-02-26T20:03:36  *** amcrn has quit IRC
2014-02-26T20:03:45  *** sabari_ is now known as sabari
2014-02-26T20:03:58  <foobio> yeah, because we definitely have a variety of parameters combined from multiple matches onto a given job
2014-02-26T20:04:04  *** kiall has quit IRC
2014-02-26T20:04:19  <foobio> unless it's because one is a regex and the other is a literal job name?
2014-02-26T20:04:45  <foobio> does the literal cause it to short-circuit subsequent matches?
2014-02-26T20:05:18  *** sabari is now known as 92AAAAI7R
2014-02-26T20:05:26  *** branen has joined #openstack-infra
2014-02-26T20:05:26  *** jraim has joined #openstack-infra
2014-02-26T20:05:26  *** hogepodge has joined #openstack-infra
2014-02-26T20:05:26  *** pmathews has joined #openstack-infra
2014-02-26T20:05:26  *** che-arne has joined #openstack-infra
2014-02-26T20:05:26  *** vponomaryov has joined #openstack-infra
2014-02-26T20:05:26  *** bogdando has joined #openstack-infra
2014-02-26T20:05:26  *** vishy has joined #openstack-infra
2014-02-26T20:05:26  *** Hunner has joined #openstack-infra
2014-02-26T20:05:26  *** bradm has joined #openstack-infra
2014-02-26T20:05:26  *** akscram has joined #openstack-infra
2014-02-26T20:05:47  <Ajaeger> foobio, quantumfly: Thanks a lot for looking into this.
2014-02-26T20:06:08  *** kiall has joined #openstack-infra
2014-02-26T20:06:25  <foobio> Ajaeger: thanks for bringing it to our attention... it does look like it's probably an unintentional corner-case
2014-02-26T20:07:06  *** hashar has joined #openstack-infra
2014-02-26T20:07:07  <openstackgerrit> Andreas Jaeger proposed a change to openstack-infra/config: Use success-pattern for openstack-manuals  https://review.openstack.org/76639
2014-02-26T20:07:10  <Ajaeger> foobio: ;)
2014-02-26T20:07:26  *** freyes has quit IRC
2014-02-26T20:07:35  *** cadenzajon has joined #openstack-infra
2014-02-26T20:07:35  <quantumfly> so the way it works is that regexes are 'metajobs' these are applied to non regex names when they are declared
2014-02-26T20:07:49  <quantumfly> so you can just put the regex lines above the non regex lines and that should work
2014-02-26T20:08:02  <Ajaeger> quantumfly: ok, will update the change.
2014-02-26T20:08:32  <openstackgerrit> afazekas proposed a change to openstack-infra/devstack-gate: Allow tempest to dump the ovs db  https://review.openstack.org/76640
2014-02-26T20:09:02  *** dstufft_ has joined #openstack-infra
2014-02-26T20:09:27  *** dkehn__ is now known as dkehn_
2014-02-26T20:09:52  *** SumitNaiksatam has joined #openstack-infra
2014-02-26T20:10:09  *** nati_uen_ has joined #openstack-infra
2014-02-26T20:10:34  <openstackgerrit> Andreas Jaeger proposed a change to openstack-infra/config: Fix success-pattern usage for openstack-manuals  https://review.openstack.org/76639
2014-02-26T20:10:43  <quantumfly> foobio: so it doesn't short circuit but when normal job is evaluated ti can't apply the meta job stuff
2014-02-26T20:10:49  <Ajaeger> quantumfly: here's the updated patch - hope it does the right think.
2014-02-26T20:10:51  *** dripton_ is now known as dripton
2014-02-26T20:11:01  <Ajaeger> s/think/thing/
2014-02-26T20:11:44  *** doddstack has joined #openstack-infra
2014-02-26T20:11:48  *** oubiwann_ has quit IRC
2014-02-26T20:11:52  *** salv-orlando_ has joined #openstack-infra
2014-02-26T20:12:02  *** Ryan_Lane2 has joined #openstack-infra
2014-02-26T20:12:34  *** rlandy has joined #openstack-infra
2014-02-26T20:12:47  *** wenlock has quit IRC
2014-02-26T20:12:58  *** CaptTofu_ has joined #openstack-infra
2014-02-26T20:13:01  *** Sukhdev has joined #openstack-infra
2014-02-26T20:13:13  *** SumitNaiksatam has quit IRC
2014-02-26T20:13:24  *** smarcet has joined #openstack-infra
2014-02-26T20:13:26  *** dkehn__ has joined #openstack-infra
2014-02-26T20:13:37  <quantumfly> Ajaeger: yup lgtm
2014-02-26T20:14:42  <quantumfly> foobio: cluster looks happy now
2014-02-26T20:15:02  <Ajaeger> quantumfly and foobio: thanks a lot!
2014-02-26T20:15:04  *** ildikov_ has joined #openstack-infra
2014-02-26T20:15:20  *** dstufft has quit IRC
2014-02-26T20:15:27  *** dstufft_ is now known as dstufft
2014-02-26T20:15:56  *** amrith_ has joined #openstack-infra
2014-02-26T20:17:54  *** oubiwann_ has joined #openstack-infra
2014-02-26T20:18:42  <foobio> quantumfly: yep, all clear to stop services on es5 then?
2014-02-26T20:18:46  *** dims has quit IRC
2014-02-26T20:18:46  *** yassine has quit IRC
2014-02-26T20:18:46  *** cadenzajon_ has quit IRC
2014-02-26T20:18:46  *** smarcet1 has quit IRC
2014-02-26T20:18:46  *** CaptTofu has quit IRC
2014-02-26T20:18:46  *** nati_ueno has quit IRC
2014-02-26T20:18:46  *** thedodd has quit IRC
2014-02-26T20:18:46  *** dkliban has quit IRC
2014-02-26T20:18:46  *** sandywalsh has quit IRC
2014-02-26T20:18:46  *** salv-orlando has quit IRC
2014-02-26T20:18:46  *** Ryan_Lane has quit IRC
2014-02-26T20:18:46  *** dkehn has quit IRC
2014-02-26T20:18:46  *** amrith has quit IRC
2014-02-26T20:18:47  *** salv-orlando_ is now known as salv-orlando
2014-02-26T20:18:47  *** amrith_ is now known as amrith
2014-02-26T20:19:07  <quantumfly> foobio: yup
2014-02-26T20:19:23  <foobio> done
2014-02-26T20:19:55  *** dims has joined #openstack-infra
2014-02-26T20:19:59  *** sandywalsh has joined #openstack-infra
2014-02-26T20:20:18  *** flaper87 has quit IRC
2014-02-26T20:20:18  *** flaper87 has joined #openstack-infra
2014-02-26T20:20:28  *** afazekas has joined #openstack-infra
2014-02-26T20:20:41  <foobio> quantumfly: later when es4 get to the chopping block, is there anything we need to do to force a graceful master election first, or just let it sort that out on its own?
2014-02-26T20:20:43  *** yassine has joined #openstack-infra
2014-02-26T20:21:00  *** cadenzajon has quit IRC
2014-02-26T20:21:00  *** cadenzajon has joined #openstack-infra
2014-02-26T20:21:03  *** ildikov_ has quit IRC
2014-02-26T20:21:03  *** ildikov_ has joined #openstack-infra
2014-02-26T20:21:26  *** dkliban has joined #openstack-infra
2014-02-26T20:21:27  *** dkliban has quit IRC
2014-02-26T20:21:27  *** dkliban has joined #openstack-infra
2014-02-26T20:21:27  <quantumfly> it will sort that out on its own, but let me read es docs to see if we can force a different master to be elected (I have never worried about it in the past and it has been fine as long as the network doesn't partition)
2014-02-26T20:21:50  *** shashank__ has quit IRC
2014-02-26T20:21:55  <quantumfly> ya doesn't look like we can force a different master, its fine
2014-02-26T20:21:59  *** yolanda_ has joined #openstack-infra
2014-02-26T20:22:39  *** lcheng_ has quit IRC
2014-02-26T20:22:51  *** SumitNaiksatam has joined #openstack-infra
2014-02-26T20:23:26  *** wenlock has joined #openstack-infra
2014-02-26T20:23:44  *** oubiwann_ has quit IRC
2014-02-26T20:24:02  * quantumfly is going to grab lunch now that cluster seems to be happily recovering
2014-02-26T20:24:24  *** oubiwann_ has joined #openstack-infra
2014-02-26T20:26:29  <mtreinish> quantumfly, foobio, jbooboo: shouldn't that be pointed at the infra pypi mirror?: http://logs.openstack.org/35/76635/2/check/gate-elastic-recheck-pep8/b5a7e8c/console.html#_2014-02-26_20_17_58_346
2014-02-26T20:27:14  <jbooboo> mtreinish: it doesn't track openstack/requirements so it doesn't use the mirror
2014-02-26T20:27:41  <mtreinish> ahh ok that makes sense
2014-02-26T20:27:51  *** mspreitz has joined #openstack-infra
2014-02-26T20:28:38  <mspreitz> Help, I made a procedural mistake.  I submitting a patch for review without making a branch for it.  How do I recover?
2014-02-26T20:29:59  <foobio> mspreitz: how do you want to recover? (what end state do you seek?)
2014-02-26T20:30:36  <mspreitz> First and foremost, no harm to anything else.  Second, eventually a patch submitted correctly.  The edits are few and easily reproduced.
2014-02-26T20:30:40  <openstackgerrit> A change was merged to openstack-infra/config: Fix success-pattern usage for openstack-manuals  https://review.openstack.org/76639
2014-02-26T20:31:09  <foobio> mspreitz: so, as long as the state of your work is captured in the review, you can always pull it back to your local system from gerrit
2014-02-26T20:31:21  <jbooboo> foobio, quantumfly, sdague: i don't think we have the space to hold zuul gearman server debug logs.  :(  i think 3 days will take like 97G.
2014-02-26T20:31:53  <jbooboo> so i think we're going to have to revert the logging config patch for now, then rework gear's logging so we can get useful information like that with less verbosity, then try again.
2014-02-26T20:31:59  <jbooboo> either that or attach a cinder volume for logs
2014-02-26T20:32:00  <mspreitz> Let me start with the first part.  Having submitted something on master, does that harm anything besides my submission?
2014-02-26T20:32:30  <foobio> mspreitz: nope, other than it probably has a blank topic in review.openstack.org, but that's not at all uncommon
2014-02-26T20:32:52  <foobio> mspreitz: in which case you can reset your local master branch to the same commit as the remote master with 'git reset --hard origin/master' and then you can retrieve your change into a local topic branch with 'git review -d NNNNN' (where NNNNN is the change number in gerrit)
2014-02-26T20:33:10  <openstackgerrit> A change was merged to openstack-infra/os-loganalyze: Remove tox locale overrides  https://review.openstack.org/72218
2014-02-26T20:34:04  *** jamielennox is now known as jamielennox|away
2014-02-26T20:34:42  <mspreitz> foobio: thanks.  I'll try that when I get a chance.
2014-02-26T20:35:40  <foobio> mspreitz: git review -l will also list open reviews for the current project, in case you're looking for an easy way to spot the review number for yours
2014-02-26T20:36:21  <mspreitz> BTW, I noticed one other harm to my submission, which is a bug fix: it is not listed in the bug.
2014-02-26T20:37:31  <foobio> mspreitz: right, you'll want to make sure at the end of your commit message you include a separate line like Closes-Bug: #XXXXXX
2014-02-26T20:38:08  *** Ryan_Lane1 has quit IRC
2014-02-26T20:38:22  <foobio> mspreitz: however, if that wasn't present on the initial patchset for your change, the bug doesn't get automatically updated until your change gets merged, so you may want to set the bug to in-progress, assign it to yourself, and leave a comment with the url to your proposed fix
2014-02-26T20:38:29  *** mestery_ is now known as mestery
2014-02-26T20:38:51  <mspreitz> I had the Closes-Bug line in my original commit message.
2014-02-26T20:39:08  *** lcostantino has quit IRC
2014-02-26T20:39:41  *** dhellmann_ is now known as dhellmann
2014-02-26T20:39:46  <foobio> mspreitz: what is the url to your review and your bug?
2014-02-26T20:39:49  <quantumfly> jbooboo wow
2014-02-26T20:42:39  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Add git05 to cacti and gerrit replication  https://review.openstack.org/76649
2014-02-26T20:42:40  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Add git05 to the git.openstack.org haproxy farm  https://review.openstack.org/76650
2014-02-26T20:42:41  <foobio> quantumfly: jbooboo: git05 is up (centos 6.5 8g performance pvhvm) and those ^ do what we need next
2014-02-26T20:43:11  *** yolanda_ has quit IRC
2014-02-26T20:43:47  *** alexpilotti has quit IRC
2014-02-26T20:43:53  *** mattymo has quit IRC
2014-02-26T20:44:10  *** mattymo has joined #openstack-infra
2014-02-26T20:44:17  <jbooboo> foobio: neato.  aprvd
2014-02-26T20:44:20  <jbooboo> (the first)
2014-02-26T20:44:42  <jbooboo> foobio: has create_cgit_repos run on 05?
2014-02-26T20:45:13  *** mspreitz has quit IRC
2014-02-26T20:45:29  *** jhesketh has joined #openstack-infra
2014-02-26T20:45:58  <foobio> jbooboo: yep, looks like it
2014-02-26T20:46:03  <foobio> jbooboo: thanks. i'll keep tabs on it and then we can add it with the second patch and start cycling the other 4 out and replacing them
2014-02-26T20:46:47  <jhesketh> Morning
2014-02-26T20:46:49  <quantumfly> you can disable nodes with the admin socket to nicely remove nodes
2014-02-26T20:47:03  <foobio> right now /var/lib/git has empty repos and the interface is up at http://git05.openstack.org:8080/cgit
2014-02-26T20:47:37  <foobio> quantumfly: in haproxy?
2014-02-26T20:47:40  *** rhsu has joined #openstack-infra
2014-02-26T20:47:54  <foobio> quantumfly: yeah, will do when the time comes
2014-02-26T20:47:58  <quantumfly> yup
2014-02-26T20:48:18  *** 92AAAAI7R is now known as sabari
2014-02-26T20:50:25  *** lcheng_ has joined #openstack-infra
2014-02-26T20:53:14  <openstackgerrit> Davanum Srinivas (dims) proposed a change to openstack-infra/config: Support filtering by review id(s)  https://review.openstack.org/72446
2014-02-26T20:54:28  *** mfer has joined #openstack-infra
2014-02-26T20:55:05  <openstackgerrit> Bhuvan Arumugam proposed a change to openstack-infra/config: log analyzer for openstack IRC logs  https://review.openstack.org/72445
2014-02-26T20:55:42  *** bhuvan has joined #openstack-infra
2014-02-26T20:56:18  *** markmcclain has joined #openstack-infra
2014-02-26T20:59:21  *** markmcclain1 has joined #openstack-infra
2014-02-26T20:59:39  *** ryanpetrello has joined #openstack-infra
2014-02-26T20:59:53  *** mrodden1 has joined #openstack-infra
2014-02-26T21:00:10  <dhellmann> jbooboo: updated https://review.openstack.org/#/c/74408
2014-02-26T21:00:57  *** markmcclain has quit IRC
2014-02-26T21:01:19  *** mrodden has quit IRC
2014-02-26T21:02:25  *** oubiwann_ has quit IRC
2014-02-26T21:03:34  *** denis_makogon_ has joined #openstack-infra
2014-02-26T21:04:05  <openstackgerrit> A change was merged to openstack-infra/config: Add git05 to cacti and gerrit replication  https://review.openstack.org/76649
2014-02-26T21:06:26  <openstackgerrit> Doug Hellmann proposed a change to openstack-infra/config: Add oslotest jobs for oslo.config  https://review.openstack.org/76654
2014-02-26T21:06:57  <openstackgerrit> Chad Lung proposed a change to openstack-infra/config: Add DevStack job for Barbican  https://review.openstack.org/74530
2014-02-26T21:07:53  <Ajaeger> foobio, quantumfly: The docs-draft change works as expected - just tested with https://review.openstack.org/76647 ! Thanks again!
2014-02-26T21:09:37  *** yassine has quit IRC
2014-02-26T21:12:41  *** Ajaeger has quit IRC
2014-02-26T21:14:13  *** CaptTofu_ has quit IRC
2014-02-26T21:14:20  *** shashank_ has joined #openstack-infra
2014-02-26T21:14:24  <foobio> quantumfly: jbooboo: do you recall whether we need a gerrit restart to reread the replication config? i want to say so...
2014-02-26T21:14:43  *** CaptTofu has joined #openstack-infra
2014-02-26T21:14:49  *** CaptTofu has quit IRC
2014-02-26T21:14:56  *** CaptTofu has joined #openstack-infra
2014-02-26T21:15:05  <jbooboo> foobio: hrm, i don't recall.  you could try replicating one project and see...
2014-02-26T21:15:34  <foobio> yeah, that's where i was headed next. thanks
2014-02-26T21:16:44  <foobio> assuming it doesn't just magically start working once puppet updates the config here in a bit
2014-02-26T21:16:47  *** bhuvan has quit IRC
2014-02-26T21:16:47  *** sandywalsh has quit IRC
2014-02-26T21:16:57  <jbooboo> i'm self-approving https://review.openstack.org/#/c/76657/ and will restart zuul so we don't run out of disk
2014-02-26T21:17:20  *** dhellmann_ has joined #openstack-infra
2014-02-26T21:17:26  *** NikitaKonovalov is now known as NikitaKonovalov_
2014-02-26T21:17:39  *** jd__` has joined #openstack-infra
2014-02-26T21:17:51  *** dims_ has joined #openstack-infra
2014-02-26T21:18:05  <foobio> did we lose openstackgerrit? or is it just slow to the party on that change?
2014-02-26T21:18:35  *** bookwar1 has joined #openstack-infra
2014-02-26T21:20:17  <jbooboo> foobio: i'm thinking it's lost.  i'll kick it.
2014-02-26T21:20:34  *** openstackgerrit has quit IRC
2014-02-26T21:20:34  *** dhellmann has quit IRC
2014-02-26T21:20:34  *** dims has quit IRC
2014-02-26T21:20:34  *** jd__ has quit IRC
2014-02-26T21:20:34  *** bookwar has quit IRC
2014-02-26T21:20:35  *** sbadia has quit IRC
2014-02-26T21:20:35  *** samalba has quit IRC
2014-02-26T21:20:35  *** shortstop has quit IRC
2014-02-26T21:20:35  *** sirushti has joined #openstack-infra
2014-02-26T21:20:35  *** jd__` is now known as jd__
2014-02-26T21:20:36  *** Ryan_Lane has joined #openstack-infra
2014-02-26T21:20:47  <jbooboo>     sender = self.ssl.write if self.ssl else self.socket.send
2014-02-26T21:20:47  <jbooboo> AttributeError: 'NoneType' object has no attribute 'send'
2014-02-26T21:20:54  *** bhuvan_ has joined #openstack-infra
2014-02-26T21:20:54  <jbooboo> yeah ^ that again
2014-02-26T21:20:56  <foobio> yep, ping timeout finally registered
2014-02-26T21:21:00  *** sbadia has joined #openstack-infra
2014-02-26T21:21:04  <jog0> sdague: so I think I introduced instability into the voting grenade job yesterday
2014-02-26T21:21:19  *** dhellmann_ is now known as dhellmann
2014-02-26T21:21:20  <sdague> jog0: ok, how?
2014-02-26T21:21:29  <jog0> sdague jbooboo: also https://review.openstack.org/#/c/76658/
2014-02-26T21:21:47  *** openstackgerrit has joined #openstack-infra
2014-02-26T21:21:52  <jog0> sdague: so my grenade patch resulted in n-cpu not being killed when we expect it to
2014-02-26T21:22:04  *** samalba has joined #openstack-infra
2014-02-26T21:22:21  <jog0> sdague:I think we will see this failurein regular grenade: http://logs.openstack.org/82/76582/2/check/check-grenade-dsvm-partial-ncpu/53ed49c
2014-02-26T21:22:55  <foobio> yeah, it looks like there's definitely the potential for other settings to get wiped without the append operator
2014-02-26T21:23:00  <sdague> jog0: so https://review.openstack.org/#/c/76658/ doesn't change anything
2014-02-26T21:23:02  *** david_lyle_ has joined #openstack-infra
2014-02-26T21:23:11  *** coolsvap_ has joined #openstack-infra
2014-02-26T21:23:23  *** mestery_ has joined #openstack-infra
2014-02-26T21:23:24  <sdague> because there is no other place that localrc for grenade should be written
2014-02-26T21:23:34  <jog0> look up
2014-02-26T21:24:08  *** gokrokve_ has joined #openstack-infra
2014-02-26T21:24:09  <jog0> line 53
2014-02-26T21:24:09  *** davidhadas_ has joined #openstack-infra
2014-02-26T21:24:28  *** e0ne has quit IRC
2014-02-26T21:24:43  <jog0> I am getting 500 errors from logstash
2014-02-26T21:25:10  <foobio> jog0: on every query?
2014-02-26T21:25:23  <jog0> foobio:  just most
2014-02-26T21:25:26  *** Ryan_Lane has quit IRC
2014-02-26T21:25:29  *** bhuvan has joined #openstack-infra
2014-02-26T21:25:38  <jbooboo> jog0: line 53 is writing the devstack localrc
2014-02-26T21:25:44  <sdague> yeh, what jbooboo said
2014-02-26T21:25:48  <jbooboo> jog0: line 251 is writing the grenade localrc
2014-02-26T21:25:50  <jog0> jbooboo: ohh
2014-02-26T21:25:53  <foobio> $BASE/new/grenade/localrc specifically
2014-02-26T21:25:58  *** jeckersb is now known as jeckersb_gone
2014-02-26T21:25:58  <jog0> thanks
2014-02-26T21:26:21  <jbooboo> i think gerritbot is happy gain
2014-02-26T21:26:23  *** rcleere_ has joined #openstack-infra
2014-02-26T21:26:26  <sdague> but, if there is a different grenade race, we should revert the patch yuo think is an issue
2014-02-26T21:26:26  <foobio> seems like a safe enough change in case we decide to start writing to $BASE/new/grenade/localrc prior to that line eventually
2014-02-26T21:26:31  <sdague> then come back to it
2014-02-26T21:26:52  <jbooboo> foobio: hrm.  i don't think we should do that unless we really mean to.
2014-02-26T21:27:00  * anteaya is back, after nearly getting hit by a car and getting off the phone with the police
2014-02-26T21:27:02  <foobio> jbooboo: fair enough
2014-02-26T21:27:05  <jbooboo> foobio: because it means a change in grenade could surprise us
2014-02-26T21:27:17  <jbooboo> anteaya: oh no!  are you okay?
2014-02-26T21:27:29  <quantumfly> ok food has been consumed
2014-02-26T21:27:32  <quantumfly> anteaya: :/
2014-02-26T21:27:36  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/devstack-gate: Write DO_NOT_UPGRADE_SERVICES to grenade's localrc not devstacks  https://review.openstack.org/76658
2014-02-26T21:27:48  <jog0> sdague: that should be the fixI was looking for
2014-02-26T21:27:58  <sdague> oh... so you were *ALWAYS* doing it :)
2014-02-26T21:28:19  <sdague> jog0: so that's still wrong
2014-02-26T21:28:24  <jog0> sdague: doh
2014-02-26T21:28:28  *** rcleere has quit IRC
2014-02-26T21:28:29  *** rcleere_ is now known as rcleere
2014-02-26T21:28:34  *** Mithrandir has quit IRC
2014-02-26T21:28:41  <jog0> sdague: ohh I see
2014-02-26T21:28:42  <jog0> derp
2014-02-26T21:28:50  <jog0> $BASE/new/grenade/localrc
2014-02-26T21:28:50  <sdague> do the translation to the line in question you care about in -wrap
2014-02-26T21:28:53  <anteaya> jbooboo: yes I am fine, missed be a whole 12 inches
2014-02-26T21:29:00  *** sandywalsh has joined #openstack-infra
2014-02-26T21:29:00  <sdague> then put that variable in the existing block
2014-02-26T21:29:08  <sdague> that's how we do everything else here
2014-02-26T21:29:12  <anteaya> otherwise I would be dead or no longer able to use the lower half of my body
2014-02-26T21:29:41  *** dhellman_ has joined #openstack-infra
2014-02-26T21:29:46  <jbooboo> anteaya: i'm glad you're okay!
2014-02-26T21:29:50  <anteaya> I figure it was some high school good ole boy impressing his friends, passing a car with a pedestrian on teh other side
2014-02-26T21:29:58  <anteaya> jbooboo: thanks, just in shock a bit
2014-02-26T21:30:03  <anteaya> quantumfly: thanks
2014-02-26T21:30:11  <sdague> so actually what you are saying is you didn't actually change the partial upgrade case
2014-02-26T21:30:48  * anteaya will get something to eat and read scrollback
2014-02-26T21:31:03  *** ildikov_ has quit IRC
2014-02-26T21:31:11  *** ildikov_ has joined #openstack-infra
2014-02-26T21:31:52  *** arborism has joined #openstack-infra
2014-02-26T21:32:18  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/devstack-gate: Write DO_NOT_UPGRADE_SERVICES to grenade's localrc not devstacks  https://review.openstack.org/76658
2014-02-26T21:32:26  <jog0> sdague: third times a charm?
2014-02-26T21:32:48  *** SumitNaiksatam has quit IRC
2014-02-26T21:32:49  *** coolsvap has joined #openstack-infra
2014-02-26T21:33:23  <sdague> jog0: no, really, do the translation elsewhere, and lets only write to the grenade log once
2014-02-26T21:33:29  <jog0> foobio: so logstash.o.o is unusable
2014-02-26T21:33:30  <jbooboo> sdague: i think i need you to explain to me what was wrong with ps2
2014-02-26T21:33:33  <openstackgerrit> Elizabeth Krumbach Joseph proposed a change to openstack-infra/config: Add support for Fedora 20 to nodepool  https://review.openstack.org/69510
2014-02-26T21:33:36  <jog0> sdague: not sure what you mean by do the translation elsewhere
2014-02-26T21:33:43  <jbooboo> sdague, jog0: because i think it was correct and ps3 looks very wrong to me.
2014-02-26T21:33:51  <sdague> jbooboo: it was not writing to grenade localrc
2014-02-26T21:34:09  <jbooboo> sdague: it was writing to $BASE/new/grenade/localrc
2014-02-26T21:34:15  <jbooboo> sdague: where should it have been writing?
2014-02-26T21:34:17  <foobio> quantumfly: "If it helps, I received a 500 Internal Server Error from: api/search"
2014-02-26T21:34:19  *** Mithrand1r has joined #openstack-infra
2014-02-26T21:34:30  <sdague> jbooboo: no, it was writing to >>localrc
2014-02-26T21:34:31  *** gokrokve has quit IRC
2014-02-26T21:34:31  <quantumfly> foobio: ?
2014-02-26T21:34:36  <jbooboo> sdague: ah you are right
2014-02-26T21:34:37  *** dhellmann has quit IRC
2014-02-26T21:34:38  *** Mithrandir has joined #openstack-infra
2014-02-26T21:34:45  *** dhellmann has joined #openstack-infra
2014-02-26T21:34:49  *** mestery has quit IRC
2014-02-26T21:34:50  <foobio> quantumfly: that's the message kibana gives for any search at the moment
2014-02-26T21:34:50  <quantumfly> oh scrollback
2014-02-26T21:34:53  <jog0> https://review.openstack.org/#/c/76658/2/devstack-vm-gate.sh
2014-02-26T21:34:54  *** _sirushti has joined #openstack-infra
2014-02-26T21:34:58  *** jhesketh has quit IRC
2014-02-26T21:34:58  *** dhellman_ has quit IRC
2014-02-26T21:35:03  <jog0> so the only issue is wrong file
2014-02-26T21:35:04  *** coolsvap1 has quit IRC
2014-02-26T21:35:04  *** davidhadas has quit IRC
2014-02-26T21:35:04  *** jcooley_ has quit IRC
2014-02-26T21:35:05  *** david-lyle has quit IRC
2014-02-26T21:35:05  *** rossella_s has quit IRC
2014-02-26T21:35:05  *** apevec has quit IRC
2014-02-26T21:35:05  *** Mithrandir has quit IRC
2014-02-26T21:35:06  <jog0> but right block?
2014-02-26T21:35:12  <jbooboo> sdague: but the correction to that should have just been to change "localrc" to "$BASE/new/grenade/localrc" on line 259
2014-02-26T21:35:15  <jog0> I thought sdague said move it somewhere else
2014-02-26T21:35:32  <jbooboo> or...
2014-02-26T21:35:33  *** rossella_s has joined #openstack-infra
2014-02-26T21:35:36  *** SumitNaiksatam has joined #openstack-infra
2014-02-26T21:35:42  <sdague> jbooboo: so I think we should be doing the translation in -wrap
2014-02-26T21:35:43  <jbooboo> hehe, move the cd above the first heredoc and drop the long path from that one too.
2014-02-26T21:35:44  <sdague> and there should be
2014-02-26T21:35:46  *** sirushti has quit IRC
2014-02-26T21:35:46  *** _sirushti is now known as sirushti
2014-02-26T21:35:46  *** zhiyan_ has quit IRC
2014-02-26T21:35:46  *** coolsvap_ has quit IRC
2014-02-26T21:35:56  <sdague> DO_NOT_UPGRADE_SERVICES=$DO_NOT_UPGRADE_SERVICES
2014-02-26T21:35:58  <quantumfly> foobio: logstash.o.o:/opt/kibana/kibana/KibanaConfig.rb
2014-02-26T21:36:00  <sdague> in the grenade block
2014-02-26T21:36:10  <foobio> jbooboo: jog0: it sounded like the suggestion was to always put that bariable in the grenade localrc, but define the value of that variable in an earlier conditional prior to the heredoc
2014-02-26T21:36:15  *** jcooley_ has joined #openstack-infra
2014-02-26T21:36:16  *** sandywalsh has quit IRC
2014-02-26T21:36:18  <quantumfly> foobio: notice it still has all of the nodes in that list. We may want to manually restrict it to the new ones for now
2014-02-26T21:36:19  <jog0> sdague: ahh
2014-02-26T21:36:27  <jog0> so even if its set to nothing we should include it?
2014-02-26T21:36:36  *** dkliban has quit IRC
2014-02-26T21:36:39  *** zhiyan_ has joined #openstack-infra
2014-02-26T21:36:42  *** sandywalsh has joined #openstack-infra
2014-02-26T21:36:43  <openstackgerrit> A change was merged to openstack-infra/config: Revert "Set Zuul gear server logs to debug"  https://review.openstack.org/76657
2014-02-26T21:36:44  <sdague> so all the grenade stuff happens at once, just to keep it easy to not run around realizing we modify it somewhere else
2014-02-26T21:36:48  <openstackgerrit> Elizabeth Krumbach Joseph proposed a change to openstack-infra/config: Add support for Fedora 20 to nodepool  https://review.openstack.org/69510
2014-02-26T21:36:49  <jbooboo> sdague: wfm
2014-02-26T21:36:53  <sdague> jog0: yes, it should work
2014-02-26T21:36:59  <sdague> and if it doesn't, we have an issue
2014-02-26T21:37:06  <jog0> thats the part I was missing
2014-02-26T21:37:18  *** ildikov_ has quit IRC
2014-02-26T21:37:28  <quantumfly> foobio: did you want to stab at that? you will need to restart the kibana service afterwards too
2014-02-26T21:37:32  <foobio> quantumfly: oh, it won't dynamically select just the cluster members which are up and responding?
2014-02-26T21:37:34  *** ildikov_ has joined #openstack-infra
2014-02-26T21:37:37  <quantumfly> foobio: apparently not
2014-02-26T21:37:50  <sdague> the conditional write is logically fine, but I'm really concerned with the number of localrc files being written out that we'll miss something in review if grenade localrc get's written to more than once
2014-02-26T21:37:59  *** oubiwann_ has joined #openstack-infra
2014-02-26T21:38:13  *** mestery_ is now known as mestery
2014-02-26T21:38:14  <foobio> quantumfly: should i slip in a change to remove all the old servers from the kibana config earlier than we remove them from everywhere else in that case?
2014-02-26T21:38:16  <sdague> honestly, bonus points for making the grenade_localrc write into a function, just to keep that all isolated
2014-02-26T21:38:26  <jog0> sdague: thats why I put it right under the other block  in https://review.openstack.org/#/c/76658/2/devstack-vm-gate.sh
2014-02-26T21:38:28  <quantumfly> foobio: ya probably
2014-02-26T21:38:57  <quantumfly> foobio: or, remove it by hand for now
2014-02-26T21:38:57  <foobio> quantumfly: or is there a chance that it will try to reach a shard for which all replicas are on the old servers?
2014-02-26T21:38:57  *** derekh has joined #openstack-infra
2014-02-26T21:39:03  <quantumfly> foobio: yes, but elasticsearch should do internal routing for us
2014-02-26T21:39:06  <sdague> jog0: well, the fact that jbooboo missed the issue, means I want to be extra careful here, because it's easy to miss
2014-02-26T21:39:08  <openstackgerrit> afazekas proposed a change to openstack/requirements: Remove incompatible boto versions  https://review.openstack.org/76663
2014-02-26T21:39:09  <foobio> oh, got it
2014-02-26T21:39:16  <quantumfly> so you can hit any node regardless of the shards it contains and it will figure it out for you
2014-02-26T21:39:30  <foobio> quantumfly: in that case i'll stop puppet on logstash.o.o and make that config change manually on the server for the moment
2014-02-26T21:39:33  <quantumfly> ok
2014-02-26T21:40:13  *** rossella_s has quit IRC
2014-02-26T21:40:16  <foobio> sudo vi /opt/kibana/kibana/KibanaConfig.rb
2014-02-26T21:40:17  <foobio> ha
2014-02-26T21:40:47  <foobio> waiting for the inevitable "foobio is not allowed to sudo on this host" joke
2014-02-26T21:40:50  *** rossella_s has joined #openstack-infra
2014-02-26T21:41:45  <jog0> sdague: where should the translation be done?
2014-02-26T21:42:22  <foobio> quantumfly: jog0: logstash queries seem to be working again
2014-02-26T21:42:37  <jog0> foobio: yup
2014-02-26T21:42:38  <jog0> thanks
2014-02-26T21:44:19  <sdague> jog0: I assume over in the -wrap script somewhere, that's where we do all the conditional transitions
2014-02-26T21:44:50  *** rossella_ has joined #openstack-infra
2014-02-26T21:46:53  <openstackgerrit> Bhuvan Arumugam proposed a change to openstack-infra/config: log analyzer for openstack IRC logs  https://review.openstack.org/72445
2014-02-26T21:47:43  *** rossella_ has quit IRC
2014-02-26T21:47:43  *** rossella_s has quit IRC
2014-02-26T21:48:13  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/devstack-gate: Write DO_NOT_UPGRADE_SERVICES to grenade's localrc not devstacks  https://review.openstack.org/76658
2014-02-26T21:48:22  <jog0> sdague: ^
2014-02-26T21:48:24  *** rossella_s has joined #openstack-infra
2014-02-26T21:48:44  <sdague> jog0: tabs
2014-02-26T21:48:45  *** prad has quit IRC
2014-02-26T21:49:08  <jog0> ohh pastemode
2014-02-26T21:49:50  * sdague wonders how interested jbooboo would be in bash8 running on d-g
2014-02-26T21:50:29  *** rossella_s has quit IRC
2014-02-26T21:50:39  *** sarob has quit IRC
2014-02-26T21:50:53  *** rossella_s has joined #openstack-infra
2014-02-26T21:51:02  *** prad has joined #openstack-infra
2014-02-26T21:51:08  *** sarob has joined #openstack-infra
2014-02-26T21:51:16  <openstackgerrit> Joe Gordon proposed a change to openstack-infra/devstack-gate: Write DO_NOT_UPGRADE_SERVICES to grenade's localrc not devstacks  https://review.openstack.org/76658
2014-02-26T21:51:45  <jbooboo> sdague: probably ok
2014-02-26T21:51:57  <jog0> sdague: working back down the stack - filename:"console.html" AND message:"+ echo \'The following services are still running:nova-compute\'" AND NOT build_name:"check-grenade-dsvm-partial-ncpu"
2014-02-26T21:52:01  <jog0> that is the issue
2014-02-26T21:52:09  *** oubiwann_ has quit IRC
2014-02-26T21:52:09  <harlowja> hi guys, for the following, i think a reverify would be correct right
2014-02-26T21:52:12  <harlowja> http://logs.openstack.org/20/54220/77/check/gate-taskflow-tox-py27-sa8-mysql/374be3e/console.html
2014-02-26T21:52:13  <jog0> that I introduced
2014-02-26T21:52:15  <harlowja> "git.openstack.org: Temporary failure in name resolution" ?
2014-02-26T21:52:20  <sdague> jog0: sure, but that's not voting, right?
2014-02-26T21:52:45  <jog0> sdague: not the AND NOT
2014-02-26T21:52:53  <jbooboo> harlowja: yeah, i think there's already a bug for that
2014-02-26T21:52:58  <harlowja> kk
2014-02-26T21:53:00  <harlowja> thx jamespage
2014-02-26T21:53:02  <jog0> I only see two hits so far
2014-02-26T21:53:08  <harlowja> oops jbooboo
2014-02-26T21:53:10  <jog0> so not sure
2014-02-26T21:53:24  <sdague> oh
2014-02-26T21:53:44  <sdague> wait, why is that not shutting down NCPU
2014-02-26T21:53:53  <jbooboo> harlowja: 1270382
2014-02-26T21:54:01  <jog0> sdague: exactly
2014-02-26T21:54:01  <harlowja> yup thx jbooboo found it
2014-02-26T21:54:37  <jog0> sdague: for some reason that bug happens a lot more on the current partial-ncpu job
2014-02-26T21:54:43  <jog0> which wasn't running partial-ncpu
2014-02-26T21:55:04  <sdague> heh
2014-02-26T21:55:16  <sdague> oh, well, remember es is still in world of hurt
2014-02-26T21:55:16  *** e0ne has joined #openstack-infra
2014-02-26T21:55:22  <jog0> sdague: true
2014-02-26T21:55:24  <sdague> so yuo just might be missing data
2014-02-26T21:55:36  *** sarob has quit IRC
2014-02-26T21:55:39  <jog0> but look at filename:"console.html" AND message:"+ echo \'The following services are still running:nova-compute\'" AND  build_name:"check-grenade-dsvm-partial-ncpu"
2014-02-26T21:55:49  <jog0> (without the NOT)
2014-02-26T21:56:01  <sdague> which makes me feel like we might want to revert the patch you think caused this
2014-02-26T21:56:07  *** mfer has quit IRC
2014-02-26T21:56:12  *** jhesketh has joined #openstack-infra
2014-02-26T21:56:15  *** jhesketh has quit IRC
2014-02-26T21:56:22  <jog0> anyway I will continue to babysit this, and if it is bad we revert until understand what went wrong
2014-02-26T21:56:26  *** jhesketh has joined #openstack-infra
2014-02-26T21:56:38  *** sarob has joined #openstack-infra
2014-02-26T21:56:40  *** e0ne has quit IRC
2014-02-26T21:56:44  *** jhesketh__ has joined #openstack-infra
2014-02-26T21:56:45  <sdague> sure
2014-02-26T21:56:59  <sdague> I'm going to wait for results on your patch before voting on it
2014-02-26T21:57:02  *** e0ne has joined #openstack-infra
2014-02-26T21:57:08  <sdague> to make sure that's working in the base grenade case
2014-02-26T21:57:31  <jbooboo> foobio, quantumfly: i'm trying a new thing with this zuul restart
2014-02-26T21:57:42  *** markwash has joined #openstack-infra
2014-02-26T21:57:47  <jbooboo> foobio, quantumfly: i've shut down the mergers already so that no new builds will start
2014-02-26T21:57:59  <foobio> oh! neat idea
2014-02-26T21:58:16  <jbooboo> foobio, quantumfly: i'm thinking that will help stabilize things a little bit during the actual restart so that, say, the gate queue doesn't launch a bunch of jobs right before i kill it
2014-02-26T21:58:19  *** e0ne has quit IRC
2014-02-26T21:58:46  *** e0ne has joined #openstack-infra
2014-02-26T21:59:13  *** CaptTofu has quit IRC
2014-02-26T21:59:36  <quantumfly> jbooboo: will that cause those builds to fail instead because the merger can't merge anything?
2014-02-26T21:59:38  <jbooboo> i'm also going to "update node set state=4 where state=3;" to speed things along a bit.
2014-02-26T21:59:39  <quantumfly> if it works \o/
2014-02-26T22:00:00  <jbooboo> quantumfly: no because gerrit's the thing that merges things.
2014-02-26T22:00:19  <Sukhdev> Folks we are running devstack (stack.sh) and are hitting following issue - wonder if somebody could shed some light
2014-02-26T22:00:24  <Sukhdev> 2014-02-26 13:46:05.451 | + git clone git://git.openstack.org/openstack/nova.git /opt/stack/nova
2014-02-26T22:00:24  <Sukhdev> 2014-02-26 13:46:26.358 | Cloning into '/opt/stack/nova'...
2014-02-26T22:00:24  <Sukhdev> 2014-02-26 13:47:26.365 | fatal: The remote end hung up unexpectedly
2014-02-26T22:00:24  <Sukhdev> 2014-02-26 13:47:26.369 | fatal: early EOF
2014-02-26T22:01:10  <sdague> so does anyone know if git.openstack.org is getting overloaded, because that's been happening a bit in logs
2014-02-26T22:01:26  *** sdake_ has quit IRC
2014-02-26T22:01:44  <foobio> sdague: it's pretty loaded. i'm adding a fifth git server to the farm and rebuilding the other 4 on performance+pvhvm servers
2014-02-26T22:01:44  *** sarob has quit IRC
2014-02-26T22:01:54  <sdague> ok
2014-02-26T22:01:57  <quantumfly> sdague: are you behind a proxy?
2014-02-26T22:02:07  <sdague> not I
2014-02-26T22:02:19  <quantumfly> gah Sukhdev ^
2014-02-26T22:02:20  <sdague> I mean I've seen a bunch of people reporting the issue
2014-02-26T22:02:25  <jbooboo> restarting zuul
2014-02-26T22:02:40  <quantumfly> sdague: right there are two incarnations and one is be behind a proxy and hit the problem 100% of the time
2014-02-26T22:02:48  *** julim has quit IRC
2014-02-26T22:02:49  <quantumfly> or not be behind a proxy and hit it occasionally
2014-02-26T22:02:51  *** mgagne has quit IRC
2014-02-26T22:02:53  <sdague> this was proposed - https://review.openstack.org/#/c/74910/
2014-02-26T22:02:56  <sdague> to address it
2014-02-26T22:03:39  *** mgagne has joined #openstack-infra
2014-02-26T22:03:46  *** melwitt1 has joined #openstack-infra
2014-02-26T22:03:50  *** e0ne has quit IRC
2014-02-26T22:03:56  <sdague> I guess it just makes me wonder if we are doing ourselves a service by pointing most people to git.o.o vs. github here, if we are hitting load issues.
2014-02-26T22:04:14  <Sukhdev> quantumfly: ?
2014-02-26T22:04:26  <jbooboo> sdague: we are doing people a service because we are able to expand the capacity, which we're doing now.
2014-02-26T22:04:31  <quantumfly> Sukhdev: are you behind a proxy?
2014-02-26T22:04:39  *** mrmartin has joined #openstack-infra
2014-02-26T22:04:56  <Sukhdev> quantumfly: what do you mean by that? - firewal?
2014-02-26T22:05:20  <quantumfly> Sukhdev: yes firewall or proxy
2014-02-26T22:05:23  *** mrmartin has quit IRC
2014-02-26T22:05:47  *** melwitt has quit IRC
2014-02-26T22:06:04  <Sukhdev> quantumfly: yes, we are - but, we checked with the firewall folks, they claim that they do not see any drops of connection resets
2014-02-26T22:06:13  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Remove deprecated elasticsearch nodes from kibana  https://review.openstack.org/76669
2014-02-26T22:06:13  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Remove old elasticsearch cluster members  https://review.openstack.org/76051
2014-02-26T22:06:14  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Update logstash doc for an elasticsearch cluster  https://review.openstack.org/76574
2014-02-26T22:06:14  <openstackgerrit> Jeremy Stanley proposed a change to openstack-infra/config: Move primary elasticsearch discover node  https://review.openstack.org/76575
2014-02-26T22:06:29  <foobio> quantumfly: is https://review.openstack.org/76051 there safe?
2014-02-26T22:06:43  <quantumfly> Sukhdev: is port 9418 allowed through?
2014-02-26T22:06:53  <sdague> jbooboo: ok
2014-02-26T22:07:53  <jbooboo> zuul is restarted
2014-02-26T22:08:02  <foobio> quantumfly: er, sorry, meant https://review.openstack.org/76669
2014-02-26T22:08:09  <Sukhdev> quantumfly: I believe so. I ran a script doing git clone the same repository for over 100 times - no failures. But, when I am running devstack (stack.sh) I see the ocassional failures
2014-02-26T22:08:32  <jbooboo> Sukhdev: that's really interesting
2014-02-26T22:08:45  *** CaptTofu has joined #openstack-infra
2014-02-26T22:09:14  <Sukhdev> jbooboo: yes it is I am so confused
2014-02-26T22:09:57  *** Mithrand1r is now known as Mithrandir
2014-02-26T22:10:56  *** smarcet has quit IRC
2014-02-26T22:10:56  *** mgagne has quit IRC
2014-02-26T22:11:03  <foobio> quantumfly: jbooboo: after a bit of playing around with gerrit replication, it does indeed seem that adding a new replication target is going to require a gerrit restart
2014-02-26T22:11:38  *** rossella_s has quit IRC
2014-02-26T22:11:54  <jbooboo> foobio: i think we should go ahead and restart it whenever you are ready
2014-02-26T22:12:11  <jbooboo> it's fast so i think we can just announce it in irc
2014-02-26T22:12:12  <quantumfly> wfm
2014-02-26T22:12:53  *** openstackstatus has joined #openstack-infra
2014-02-26T22:12:56  *** Sukhdev has quit IRC
2014-02-26T22:13:08  <foobio> #status alert gerrit service on review.openstack.org will be down momentarily for a restart to add an additional git server
2014-02-26T22:13:08  <openstackstatus> NOTICE: gerrit service on review.openstack.org will be down momentarily for a restart to add an additional git server
2014-02-26T22:13:13  *** ChanServ changes topic to "gerrit service on review.openstack.org will be down momentarily for a restart to add an additional git server"
2014-02-26T22:13:15  *** mgagne has joined #openstack-infra
2014-02-26T22:14:24  *** wchrisj has joined #openstack-infra
2014-02-26T22:14:25  *** DuncanT has joined #openstack-infra
2014-02-26T22:14:32  <foobio> #status ok
2014-02-26T22:14:32  *** ChanServ changes topic to "Discussion of OpenStack Project Infrastructure | Docs http://ci.openstack.org/ | Bugs https://launchpad.net/openstack-ci | Code https://git.openstack.org/cgit/openstack-infra/"
2014-02-26T22:14:48  *** wchrisj is now known as Guest35609
2014-02-26T22:17:51  *** wchrisj_ has quit IRC
2014-02-26T22:19:46  <quantumfly> foobio: es cluster looks green again. I think you can stop es on 04 whenever you are ready
2014-02-26T22:20:35  <foobio> we're closer--now it's at least trying to replicate, though we never puppeted the known_hosts for the gerrit2 user on review.o.o
2014-02-26T22:21:25  <jbooboo> foobio: interesting problem since each of the git servers has a different key
2014-02-26T22:21:48  <foobio> jbooboo: agreed. we'd presumably need to puppet each in advance of adding to replication configuration
2014-02-26T22:21:52  *** sarob has joined #openstack-infra
2014-02-26T22:22:07  *** Ryan_Lane has joined #openstack-infra
2014-02-26T22:22:11  <quantumfly> we could cave and use exported resources now that we have puppetdb
2014-02-26T22:22:21  <jbooboo> foobio: yeah.  it's not ideal.  you'll just 'ssh' by hand now?
2014-02-26T22:22:27  <foobio> however, i wonder whether gerrit caches the known_hosts file...
2014-02-26T22:22:31  <foobio> already did that part
2014-02-26T22:22:45  <quantumfly> exported resources can copy the key from gitXX to puppetdb when puppet runs on gitXX then when puppet runs on gerrit grab that value from puppetdb and put it in place
2014-02-26T22:22:52  <foobio> but it still seems to be logging Feb 26 22:21:23 git05 sshd[18001]: Received disconnect from 198.101.231.251: 3: com.jcraft.jsch.JSchException: reject HostKey: git05.openstack.org
2014-02-26T22:22:56  <jbooboo> quantumfly: that actually sounds like the correct solution.
2014-02-26T22:22:58  <quantumfly> exported resources tend to be a bit ugly because you ahve to double tap puppet
2014-02-26T22:23:06  <quantumfly> and require puppetdb but we have one of those now
2014-02-26T22:23:10  <jbooboo> quantumfly: but are eventually consistent
2014-02-26T22:23:15  <quantumfly> jbooboo: correct
2014-02-26T22:24:09  <foobio> grr! https://review.openstack.org/Documentation/config-replication.html "Host keys for any destination SSH servers must appear in the users ~/.ssh/known_hosts file, and must be added in advance, before Gerrit starts. If a host key is not listed, Gerrit will be unable to connect to that destination, and replication to that URL will fail."
2014-02-26T22:24:19  * foobio should memorize all of gerrit's documentation, clearly
2014-02-26T22:24:58  <foobio> _must be added in advance, before Gerrit starts_
2014-02-26T22:25:13  <jbooboo> oh well.  let's kick it again.
2014-02-26T22:25:13  <quantumfly> that caching
2014-02-26T22:25:25  <foobio> yep
2014-02-26T22:25:52  *** Guest35609 has quit IRC
2014-02-26T22:25:53  <foobio> #status alert gerrit service on review.openstack.org will be down momentarily for a another brief restart--apologies for the disruption
2014-02-26T22:25:53  <openstackstatus> NOTICE: gerrit service on review.openstack.org will be down momentarily for a another brief restart--apologies for the disruption
2014-02-26T22:25:57  *** ChanServ changes topic to "gerrit service on review.openstack.org will be down momentarily for a another brief restart--apologies for the disruption"
2014-02-26T22:26:01  *** pdmars has quit IRC
2014-02-26T22:26:31  *** mrodden has joined #openstack-infra
2014-02-26T22:26:38  *** Ryan_Lane has quit IRC
2014-02-26T22:26:52  *** sarob has quit IRC
2014-02-26T22:26:58  *** wchrisj_ has joined #openstack-infra
2014-02-26T22:27:34  <foobio> #status ok
2014-02-26T22:27:35  *** ChanServ changes topic to "Discussion of OpenStack Project Infrastructure | Docs http://ci.openstack.org/ | Bugs https://launchpad.net/openstack-ci | Code https://git.openstack.org/cgit/openstack-infra/"
2014-02-26T22:27:50  *** mrodden1 has quit IRC
2014-02-26T22:27:52  <dhellmann> is the status notice supposed to go out to all of the channels where the logging bot runs, or are those separate bots?
2014-02-26T22:27:55  <foobio> Feb 26 22:27:43 git05 sshd[20928]: Accepted publickey for cgit from 198.101.231.251 port 37644 ssh2
2014-02-26T22:28:09  <foobio> dhellmann: only where the status bot (openstackstatus) runs
2014-02-26T22:28:17  <dhellmann> foobio: ok, thanks
2014-02-26T22:28:31  <foobio> dhellmann: we originally had it notifying in here and in #-dev since, you know, everyone was in there ;)
2014-02-26T22:28:38  *** sarob has joined #openstack-infra
2014-02-26T22:28:43  <dhellmann> foobio: now it's a ghost town over there
2014-02-26T22:28:43  *** hashar has quit IRC
2014-02-26T22:29:03  <foobio> too bad people flee channels where we notify important things ;)
2014-02-26T22:29:04  <jbooboo> we'll put it everywhere when https://bugs.launchpad.net/openstack-ci/+bug/1190296 is complete
2014-02-26T22:29:05  *** sarob_ has joined #openstack-infra
2014-02-26T22:29:19  *** weshay has quit IRC
2014-02-26T22:29:51  <foobio> hey, lookit! http://git05.openstack.org:8080/cgit/openstack-infra/zuul/
2014-02-26T22:29:52  <dhellmann> ok, I was just trying to figure out if something was broken or if I was just in a channel that didn't see the notices, so not a problem
2014-02-26T22:29:59  *** markwash has quit IRC
2014-02-26T22:30:21  <jbooboo> foobio: yay!  so we can trigger a full run and then approve that other change now
2014-02-26T22:30:30  <foobio> yep
2014-02-26T22:30:38  <quantumfly> that other change?
2014-02-26T22:30:44  <quantumfly> the one that adds 05?
2014-02-26T22:30:47  <jbooboo> t
2014-02-26T22:30:50  <foobio> though rebuilding the other git servers will be touchy. i may want to backup and replace their ssh host keys
2014-02-26T22:30:59  <quantumfly> foobio: good idea
2014-02-26T22:31:03  <jbooboo> good point
2014-02-26T22:31:09  <foobio> so as to prevent needing multiple gerrit restarts
2014-02-26T22:31:23  *** CaptTofu has quit IRC
2014-02-26T22:31:25  <foobio> this one was unavoidable, but the others we can solve i think
2014-02-26T22:32:07  <foobio> gerrit seems to have done a full replicate on its own, maybe triggered by the restart
2014-02-26T22:32:19  <foobio> but i'll spot check anyway
2014-02-26T22:33:23  *** sarob__ has joined #openstack-infra
2014-02-26T22:33:36  *** sarob_ has quit IRC
2014-02-26T22:33:43  <openstackgerrit> Matt Riedemann proposed a change to openstack-infra/elastic-recheck: Add query for bug 1248757  https://review.openstack.org/76677
2014-02-26T22:34:11  *** thomasem has quit IRC
2014-02-26T22:34:24  *** denis_makogon_ has quit IRC
2014-02-26T22:35:09  <sarob> Guys have moment to look at https://review.openstack.org/#/c/76419/
2014-02-26T22:35:16  <foobio> looks like all the replicate processes in gerrit's queue have finished
2014-02-26T22:35:18  *** changbl has quit IRC
2014-02-26T22:35:31  <foobio> kicking off one manually now just to be sure
2014-02-26T22:35:38  <sarob> New stackforge project with no ops for tests
2014-02-26T22:35:59  <sarob> But running python tests anyway and failing
2014-02-26T22:36:46  <foobio> sarob: is it intended to eventually have tests?
2014-02-26T22:36:50  *** pdmars has joined #openstack-infra
2014-02-26T22:37:10  <sarob> In a few months
2014-02-26T22:37:33  <foobio> if so, adding a simple tox.ini that just runs /bin/true or something would be an easy way to make your test addition changes self-testing
2014-02-26T22:37:36  <sarob> No ops for right now
2014-02-26T22:37:51  <sarob> Or at least I thought
2014-02-26T22:37:51  * foobio doesn't know what "ops" means in this context
2014-02-26T22:37:59  *** sarob__ has quit IRC
2014-02-26T22:38:06  *** pdmars_ has joined #openstack-infra
2014-02-26T22:38:15  <quantumfly> gate-noop
2014-02-26T22:39:09  <foobio> switching zuul to run gate-noop for that project in the place of actual jobs is an alternative, but does require a change to openstack-infra/config to enact that
2014-02-26T22:39:15  <sarob> Noop
2014-02-26T22:39:23  <sarob> Yup
2014-02-26T22:39:31  <sarob> Spellchk
2014-02-26T22:39:32  *** thuc has quit IRC
2014-02-26T22:39:57  <sarob> Fungi It's set that way now
2014-02-26T22:40:08  *** thuc has joined #openstack-infra
2014-02-26T22:40:47  <foobio> sarob: okay, please let us know the name of the project, or provide a url to a change where you're seeing the broken behavior
2014-02-26T22:41:00  <foobio> oh, you did
2014-02-26T22:41:10  *** mbacchi_ has quit IRC
2014-02-26T22:41:25  <foobio> looking at the layout.yaml to confirm
2014-02-26T22:41:38  *** pdmars has quit IRC
2014-02-26T22:41:39  *** sarob_ has joined #openstack-infra
2014-02-26T22:41:48  *** mrda_away is now known as mrda
2014-02-26T22:41:53  *** Sukhdev has joined #openstack-infra
2014-02-26T22:42:03  <sarob> layout has it as milk
2014-02-26T22:42:10  <foobio> sarob: as i suspected, stackforge/mil is set in layout.yaml for a variety of jobs, like the ones you see failing on your change... http://git.openstack.org/cgit/openstack-infra/config/tree/modules/openstack_project/files/zuul/layout.yaml#n3553
2014-02-26T22:42:12  <sarob> With noon
2014-02-26T22:42:18  <foobio> er, stackforge/milk
2014-02-26T22:42:20  <sarob> Arrg
2014-02-26T22:42:40  <sarob> Right stackforge/milk
2014-02-26T22:43:38  <Sukhdev> jbooboo quantumfly: any idea?
2014-02-26T22:44:13  <foobio> sarob: so you'll want to submit a change to openstack-infra/config:modules/openstack_project/files/zuul/layout.yaml around line 3553 to change that so that it runs gate-noop in the check and gate pipelines, and probably get rid of the post pipeline entirely for now
2014-02-26T22:44:16  <sarob> I just did a pull and I show stackforge/milk
2014-02-26T22:44:29  *** thuc has quit IRC
2014-02-26T22:44:33  <sarob> Set for check and gate noop
2014-02-26T22:44:43  *** mriedem has quit IRC
2014-02-26T22:45:02  <sarob> Projects and python-jobs has no entry
2014-02-26T22:46:05  *** dangers is now known as dangers_away
2014-02-26T22:46:34  <foobio> sarob: please show me what you're talking about on http://git.openstack.org/cgit/openstack-infra/config/tree/ (i think maybe you're not looking at the layout.yaml, or you have a locally-modified branch you've been pulling into for some reason)
2014-02-26T22:47:17  <sarob> I checked github and you are correct
2014-02-26T22:47:44  <sarob> I thought I was losing my mind
2014-02-26T22:48:15  <foobio> sarob: you probably have a dirty master branch you modified at some point in the past and then pulled new remote changes into
2014-02-26T22:48:24  <sarob> Yup
2014-02-26T22:48:32  <foobio> sarob: you may want to reset it to origin/master
2014-02-26T22:48:33  <sarob> Dirty is bad
2014-02-26T22:48:43  <sarob> Will check
2014-02-26T22:50:01  <jbooboo> Sukhdev: i don't.  if you are willing to do some serious debugging, you could to a tcpdump on your host and if that fails, compare it with a packet capture or session log from the firewall.  if you get that far and suspect that the problem is on the git.o.o side, we can schedule a time to do packet captures there as well.
2014-02-26T22:51:12  *** mayu_ has joined #openstack-infra
2014-02-26T22:51:21  <jbooboo> Sukhdev: but honestly, we know that git.o.o is slightly overloaded at this point (we're almost done adding a new server), so it could just be bad luck.
2014-02-26T22:51:24  *** dkranz has quit IRC
2014-02-26T22:51:27  <mayu_> jaypipes: hi, there
2014-02-26T22:52:17  <jbooboo> quantumfly, foobio: logstash queue seems on a decidedly downward trend.
2014-02-26T22:52:54  <foobio> jbooboo: agreed, it seems to have made up its mind about that
2014-02-26T22:53:02  <jbooboo> foobio: is replication complete?
2014-02-26T22:53:11  *** hogepodge has quit IRC
2014-02-26T22:53:21  <quantumfly> foobio: jbooboo yup
2014-02-26T22:53:33  <foobio> quantumfly: jbooboo: okay, the re-run of a full replicate has completed all pending tasks, but i'm testing git/http/https direct cloning now just to make sure nothing's screwy
2014-02-26T22:53:43  <mayu_> quantumfly: help, http://paste.openstack.org/show/69992/
2014-02-26T22:53:51  <foobio> then we can merge 76650 as soon as that's done
2014-02-26T22:54:04  <quantumfly> foobio: roger
2014-02-26T22:54:05  <jbooboo> foobio: cool.  i +2d, ready for your go on merging.
2014-02-26T22:55:00  <mayu_> clarb: Following jaypipes's blog to construct third-party ci, there is an error on the link http://paste.openstack.org/show/69992/
2014-02-26T22:55:26  *** lnxnut has quit IRC
2014-02-26T22:55:30  <foobio> testing by cloning nova is a bit slow, but if anything's going to break that's where we'd see it first i suspect, so good canary
2014-02-26T22:55:41  <quantumfly> mayu_: it looks like you cut off the traceback, was there more to the traceback?
2014-02-26T22:56:17  <mayu_> quantumfly: no, remote hung up
2014-02-26T22:56:28  <jbooboo> mayu_: we think the git servers are overloaded, we're adding a new one now.  however, if you are behind a firewall or proxy, that could be the problem as well.
2014-02-26T22:58:01  <jbooboo> there has been a significant increase it git.o.o traffic at around 19:15 today.
2014-02-26T22:58:13  <mayu_> the other project code git clone sucessful, It is not firewall problem
2014-02-26T22:58:32  <jbooboo> mayu_: just try again
2014-02-26T22:58:49  *** e0ne has joined #openstack-infra
2014-02-26T22:59:32  <foobio> jbooboo: quantumfly: interestingly, i got this from git05, even though i'm probably the only client hitting it... http://paste.openstack.org/show/69998/
2014-02-26T23:00:02  <quantumfly> huh
2014-02-26T23:00:11  <foobio> maybe we have apache tuning we need to do, or does haproxy time out active sockets under some circumstances?
2014-02-26T23:00:13  <quantumfly> foobio: does the apache error log say anything interesting?
2014-02-26T23:00:19  <mayu_> I did, exec install_slave.sh, but it is not trusted.
2014-02-26T23:00:19  <foobio> i'm digging now
2014-02-26T23:00:24  <quantumfly> also the haproxy log should tell you stuff
2014-02-26T23:00:50  <jbooboo> that's not going through haproxy
2014-02-26T23:00:52  <foobio> oh, wait, i'm also not going through haproxy in this case
2014-02-26T23:00:54  *** Ryan_Lane has joined #openstack-infra
2014-02-26T23:00:55  <foobio> right
2014-02-26T23:01:21  <jbooboo> [Wed Feb 26 22:58:27 2014] [warn] [client 2001:470:8:d2f:96de:80ff:feec:f9e7] Timeout waiting for output from CGI script /usr/libexec/git-core/git-http-backend
2014-02-26T23:01:21  <jbooboo> [Wed Feb 26 22:58:27 2014] [error] [client 2001:470:8:d2f:96de:80ff:feec:f9e7] (70007)The timeout specified has expired: ap_content_length_filter: apr_bucket_read() failed
2014-02-26T23:01:39  <foobio> yep
2014-02-26T23:02:06  <mayu_> quantumfly: exec install_slave.sh again, this is the output http://paste.openstack.org/show/69999/. it seems not trusted.
2014-02-26T23:02:56  <foobio> http://httpd.apache.org/docs/2.0/mod/core.html#timeout
2014-02-26T23:03:29  *** e0ne has quit IRC
2014-02-26T23:03:31  *** ociuhandu has joined #openstack-infra
2014-02-26T23:03:37  <jbooboo> foobio: we should pack refs
2014-02-26T23:03:45  <jbooboo> foobio: we should run the git repo maintenance crons manually on git05
2014-02-26T23:03:51  <foobio> jbooboo: running them now
2014-02-26T23:04:38  *** dims_ has quit IRC
2014-02-26T23:05:08  *** harlowja is now known as harlowja_away
2014-02-26T23:05:16  <mayu_> jbooboo: exec install_slave.sh again, this is the output http://paste.openstack.org/show/69999/. it seems not trusted.
2014-02-26T23:05:38  <quantumfly> mayu_: it looks like it worked
2014-02-26T23:05:50  *** bknudson has quit IRC
2014-02-26T23:06:54  *** yamahata has quit IRC
2014-02-26T23:07:08  *** ianw has quit IRC
2014-02-26T23:07:38  *** ianw has joined #openstack-infra
2014-02-26T23:08:02  <foobio> quantumfly: that paste looks like it failed out on a git clone retry which didn't work
2014-02-26T23:08:26  <foobio> remember recently we tweaked that script to retry to clone once if the first attempt fails
2014-02-26T23:08:54  <quantumfly> right the first half of the paste is the old failure
2014-02-26T23:08:59  <quantumfly> the second half was successful
2014-02-26T23:09:02  <foobio> oic
2014-02-26T23:09:02  <openstackgerrit> Sean Roberts proposed a change to openstack-infra/config: modified stackforge/milk project in zuul/layout.yaml  https://review.openstack.org/76684
2014-02-26T23:09:08  <mayu_> quantumfly: It seems that the downloading work not continue as the last exception.
2014-02-26T23:09:14  <foobio> yes, re-running does seem to have worked
2014-02-26T23:10:04  *** jamielennox|away is now known as jamielennox
2014-02-26T23:10:18  <foobio> oh, actually no the install_slave.sh worked, the prep_node.sh did not
2014-02-26T23:10:34  <foobio> if i'm interpreting that correctly
2014-02-26T23:11:33  *** jgrimm has quit IRC
2014-02-26T23:12:41  <jbooboo> i just spot checked a devstack-precise node from each region, and they are not cloning repos.  so i don't think the additional traffic is because we broke caching there.
2014-02-26T23:12:44  *** doddstack has quit IRC
2014-02-26T23:13:53  <foobio> jbooboo: i suspect if we do some log analysis on the haproxy server we'll find a recent uptick in utilization from some third-party ci
2014-02-26T23:14:04  <mayu_> foobio: I will launch dsvm-tempest-full, expecting it runs well
2014-02-26T23:14:57  <quantumfly> foobio: jbooboo 192.237.223.224 is persisntent
2014-02-26T23:15:09  <quantumfly> which is haproxy
2014-02-26T23:15:20  <quantumfly> so I don't think we are getting out of band requests
2014-02-26T23:15:39  <Sukhdev> jbooboo: I did the tcpdump yesterday as well - Had the firewall guys look at the traffic as well - Did not see any issues
2014-02-26T23:15:46  <quantumfly> grep -v makes it seem like most of the traffic is from the load balancer
2014-02-26T23:17:12  <jbooboo> Sukhdev: i'd recommend seeing if the problem persists until after we add the new git server to the pool, and if so, let's dig into it more then.
2014-02-26T23:17:19  <jbooboo> s/until//
2014-02-26T23:17:44  <Sukhdev> jbooboo: when do you plan on adding additional server?
2014-02-26T23:18:06  <jbooboo> Sukhdev: moments from now
2014-02-26T23:18:06  *** pmathews has quit IRC
2014-02-26T23:18:11  *** pmathews1 has joined #openstack-infra
2014-02-26T23:18:32  <openstackgerrit> A change was merged to openstack/requirements: Upgrade six to 1.5.2  https://review.openstack.org/68424
2014-02-26T23:18:35  <Sukhdev> jbooboo: Ah then it makes sense to wait it out
2014-02-26T23:18:54  <foobio> the repack is almost done with nova, looks like. that one takes quite a while
2014-02-26T23:19:18  <jbooboo> grep 18:..:.. haproxy.log|wc -l  ==  92118
2014-02-26T23:19:26  <jbooboo> grep 20:..:.. haproxy.log|wc -l ==  151808
2014-02-26T23:19:45  <jbooboo> there definitely seems to be a jump in number of requests
2014-02-26T23:20:12  <foobio> http://paste.openstack.org/show/70006/
2014-02-26T23:20:18  <foobio> bluebird.ibm.com
2014-02-26T23:20:20  *** dims_ has joined #openstack-infra
2014-02-26T23:20:25  <lifeless> word
2014-02-26T23:20:57  <jbooboo> foobio wins
2014-02-26T23:21:34  *** VijayT has joined #openstack-infra
2014-02-26T23:21:37  * foobio has had far too many years analyzing service logs to spot denial of service attacks
2014-02-26T23:22:38  <foobio> i suppose we could correlate with gerrit logs to see whether there are any service accounts authenticating from ip addresses with similar reverse dns entries
2014-02-26T23:23:04  <jbooboo> foobio: i think they only account for an increase of 600 hits from the 18 hour to 20
2014-02-26T23:23:14  <foobio> ahh
2014-02-26T23:23:20  <foobio> we can narrow that then
2014-02-26T23:23:42  <quantumfly> vmware
2014-02-26T23:23:52  *** markwash has joined #openstack-infra
2014-02-26T23:24:08  <jbooboo> foobio: btw, i think if this approach produces a negative result, then it's likely our own ddos that we call "the gate".
2014-02-26T23:24:20  <jbooboo> since we cycle through ips pretty quickly
2014-02-26T23:24:25  <SpamapS> Updating cache of https://git.openstack.org/openstack/keystone.git in /root/.cache/image-create/repository-sources/6bd7a
2014-02-26T23:24:28  <SpamapS> 6223fe50b4a267bc924641d331df94c833e with ref master
2014-02-26T23:24:31  <SpamapS> error: RPC failed; result=7, HTTP code = 0
2014-02-26T23:24:37  <SpamapS> Isolated incident or onging problem?
2014-02-26T23:24:40  <quantumfly> jbooboo: yes the log file is 35XMB of that 40MB appears to be not gate
2014-02-26T23:24:57  <jbooboo> SpamapS: seems decreasingly isolated
2014-02-26T23:25:29  *** dstanek is now known as dstanek_afk
2014-02-26T23:25:29  <openstackgerrit> Jenkins proposed a change to openstack-dev/hacking: Updated from global requirements  https://review.openstack.org/76687
2014-02-26T23:25:45  *** shashank_ has quit IRC
2014-02-26T23:26:02  *** eharney has quit IRC
2014-02-26T23:26:14  *** VijayT has left #openstack-infra
2014-02-26T23:26:33  <sdague> krtaylor: is there any way to deal with mimetypes on softlayer's swift to make it so you can view those files directly in browser, instead of them pushing as attachment?
2014-02-26T23:26:52  <SpamapS> jbooboo: would it be helpful if I report a bug on launchpad? Or just watch for another one?
2014-02-26T23:26:58  *** VijayT has joined #openstack-infra
2014-02-26T23:27:24  <jbooboo> SpamapS: we're almost done adding another git server to the pool, that should help.
2014-02-26T23:27:32  <SpamapS> ahh backscroll.. moar servers ... ok :)
2014-02-26T23:28:03  <jbooboo> quantumfly, foobio: i think 1915 is about when i started doing zuul restarts.  that makes me think this is mostly us.
2014-02-26T23:28:06  <foobio> and then hopefully identifying the recent uptick in utilization so we can thwappp it solidly
2014-02-26T23:28:18  <foobio> thwappp ourselves then
2014-02-26T23:28:19  <quantumfly> jbooboo: just queued load that is hammering the gate?
2014-02-26T23:28:36  <foobio> repacks just finished. retesting real quick
2014-02-26T23:28:36  *** vkozhukalov has quit IRC
2014-02-26T23:29:46  <anteaya>  what will it take for git05 to show up in the git farm cacti grouping? http://cacti.openstack.org/cacti/graph_view.php?action=tree&tree_id=2
2014-02-26T23:29:57  <jbooboo> quantumfly: i think so.  i'm glad we found this now though since we're getting better at sustaining this kind of load in the zuul-nodepool-jenkins.  it's looking more like git.o.o is not overpowered anymore.
2014-02-26T23:30:06  <jbooboo> anteaya: some gui clicking.  i'll do it
2014-02-26T23:30:11  <anteaya> jbooboo: k
2014-02-26T23:30:18  <Sukhdev> jbooboo: can you ping me as soon additional server come on line - I would like to try it then and report back the findings
2014-02-26T23:30:29  <anteaya> Sukhdev: I will let you know
2014-02-26T23:30:35  *** shashank_ has joined #openstack-infra
2014-02-26T23:30:44  <Sukhdev> anteaya: cool - thanks
2014-02-26T23:30:45  <mayu_> anteaya: hi
2014-02-26T23:30:51  <anteaya> mayu_: hello
2014-02-26T23:31:09  *** bhuvan has quit IRC
2014-02-26T23:31:19  <Sukhdev> anteaya: BTW, in the morning discussion, you were correct.
2014-02-26T23:31:29  <anteaya> okay
2014-02-26T23:31:40  <mayu_> anteaya: things goes not as expected
2014-02-26T23:31:52  <anteaya> I haven't gotten back to that yet
2014-02-26T23:32:07  <jbooboo> anteaya: done
2014-02-26T23:32:07  *** bhuvan_ has quit IRC
2014-02-26T23:32:12  <anteaya> mayu_: waht are you expecting
2014-02-26T23:32:23  * anteaya refreshes cacti git farm page
2014-02-26T23:32:27  *** thuc has joined #openstack-infra
2014-02-26T23:32:39  <anteaya> jbooboo: thanks
2014-02-26T23:32:50  <jbooboo> np
2014-02-26T23:32:57  *** thuc has quit IRC
2014-02-26T23:33:12  <reed> in case you like to know how things end, I went and bought the Nexus 5 from a tmobile store (google store had a 2-3 weeks wait)
2014-02-26T23:33:14  *** bhuvan__ has joined #openstack-infra
2014-02-26T23:33:14  *** bhuvan_ has joined #openstack-infra
2014-02-26T23:33:29  <quantumfly> reed: it was the correct choice
2014-02-26T23:33:29  *** thuc has joined #openstack-infra
2014-02-26T23:33:37  <quantumfly> moto Gs lack of LTE is annoying
2014-02-26T23:33:43  <anteaya> reed: are you happy?
2014-02-26T23:33:44  <reed> quantumfly, I follow your orders :)
2014-02-26T23:33:44  <quantumfly> perfect cheap smartphone though
2014-02-26T23:34:22  <reed> anteaya, happy is a big word... no, I'm not: I am $396 poorer and some jerk has my perfectly find Nexus 4
2014-02-26T23:34:29  *** lcheng__ has joined #openstack-infra
2014-02-26T23:34:33  <reed> s/find/fine
2014-02-26T23:34:39  <anteaya> reed: well at least you are honest
2014-02-26T23:34:45  <anteaya> taht scores big points with me
2014-02-26T23:35:28  *** lcheng__ has quit IRC
2014-02-26T23:35:58  <foobio> jbooboo: quantumfly: successfully cloned nova via git and http directly, so approving 76650 now
2014-02-26T23:36:00  *** lcheng_ has quit IRC
2014-02-26T23:36:02  <anteaya> git03 is still being worked very hard
2014-02-26T23:36:39  <anteaya> reed: and I understand how you feel
2014-02-26T23:36:51  *** ryanpetrello has quit IRC
2014-02-26T23:37:25  <mayu_> Sukhdev: how to judge third-party work well with openstack ci ?
2014-02-26T23:37:45  <quantumfly> jbooboo: when you have a second can you hop on logstash.o.o and see if the log-gearman-client behavior is geard related?
2014-02-26T23:38:10  *** bhuvan has joined #openstack-infra
2014-02-26T23:38:11  *** bhuvan___ has joined #openstack-infra
2014-02-26T23:38:14  <quantumfly> it still has a cpu pegged
2014-02-26T23:39:02  <mayu_> anteaya: how to judge third-party work well with openstack ci ?
2014-02-26T23:39:03  <jbooboo> quantumfly: ack
2014-02-26T23:39:07  *** eharney has joined #openstack-infra
2014-02-26T23:39:20  *** rlandy has quit IRC
2014-02-26T23:39:47  <mayu_> anteaya: how to judge third-party ci work well with openstack ci ?
2014-02-26T23:40:08  <jbooboo> quantumfly: it could be.  it's sending a lot of data.
2014-02-26T23:40:20  *** bhuvan__ has quit IRC
2014-02-26T23:40:20  *** bhuvan_ has quit IRC
2014-02-26T23:40:45  <mayu_> jaypipes: how to judge third-party ci work well with openstack ci ?
2014-02-26T23:40:53  <anteaya> mayu_: okay okay slow down
2014-02-26T23:41:11  <anteaya> we all can see the questions, sometimes it takes a minute to get to them
2014-02-26T23:41:30  <mayu_> sorry
2014-02-26T23:41:38  <openstackgerrit> A change was merged to openstack-infra/config: Add git05 to the git.openstack.org haproxy farm  https://review.openstack.org/76650
2014-02-26T23:41:40  *** lcheng__ has joined #openstack-infra
2014-02-26T23:41:42  <anteaya> it is okay, you are learning
2014-02-26T23:42:06  <anteaya> mayu_: okay so right now your system can listen to changes to openstack/sandbox correct?
2014-02-26T23:42:20  <mayu_> yes
2014-02-26T23:42:33  <anteaya> okay so post a change to openstack/sandbox repo
2014-02-26T23:42:41  <anteaya> and post the url for that change
2014-02-26T23:42:52  <anteaya> and then we will watch what happens
2014-02-26T23:43:07  <mayu_> https://review.openstack.org/#/c/75953/
2014-02-26T23:43:11  *** bhuvan_ has joined #openstack-infra
2014-02-26T23:43:11  *** bhuvan__ has joined #openstack-infra
2014-02-26T23:43:45  <anteaya> can you post a new patchset to that change, please?
2014-02-26T23:43:55  <anteaya> let's see what your system is doing right now
2014-02-26T23:44:11  <mayu_> ok
2014-02-26T23:44:12  *** bhuvan___ has quit IRC
2014-02-26T23:44:46  <jbooboo> quantumfly: the stats run does a full iteration over all the jobs, so performance should improve as the queue goes down.  i'm kind of inclined to not apply any emergency fixes at the moment since i'm about to go afk for 2 days....
2014-02-26T23:45:07  <quantumfly> jbooboo: wfm
2014-02-26T23:45:07  <jbooboo> quantumfly: but i think we could switch geard to just using some internal counters so it doesn't have to do that
2014-02-26T23:45:10  *** bhuvan has quit IRC
2014-02-26T23:45:18  <quantumfly> it appeared a bit odd so I asked
2014-02-26T23:45:37  <anteaya> Sukhdev: you can try running .stack.sh again
2014-02-26T23:45:39  <quantumfly> but it iterating over the list each time makes sense about why it is slow
2014-02-26T23:45:43  <jbooboo> quantumfly: and if you decide you'd rather shut it off, removing the env vars from the defaults file and restarting should do the trick
2014-02-26T23:45:49  <quantumfly> jbooboo: ok
2014-02-26T23:45:55  <quantumfly> thank you for looking
2014-02-26T23:46:06  <jbooboo> "tcpdump port 8125 -A" on logstash is pretty cool, btw.  :)
2014-02-26T23:46:18  * quantumfly tries that
2014-02-26T23:47:08  <quantumfly> oh neat you can watch the waiting metric go crazy
2014-02-26T23:47:15  <dtroyer> quantumfly: I just left a response to your question in https://review.openstack.org/#/c/74910/, if you're happy it can go in.
2014-02-26T23:48:10  *** bhuvan has joined #openstack-infra
2014-02-26T23:48:11  *** bhuvan___ has joined #openstack-infra
2014-02-26T23:48:37  <quantumfly> dtroyer: and responded I think I can live with it as is aftr you point that out
2014-02-26T23:49:02  *** bhuvan__ has quit IRC
2014-02-26T23:49:02  *** bhuvan_ has quit IRC
2014-02-26T23:50:27  <dtroyer> cool, thanks
2014-02-26T23:51:12  <jbooboo> quantumfly: ?
2014-02-26T23:51:24  <jbooboo> quantumfly: devstack does fetches in the gate?
2014-02-26T23:51:30  <jbooboo> quantumfly: it shouldn't do _any_ git operations
2014-02-26T23:51:38  *** cadenzajon has quit IRC
2014-02-26T23:51:49  <quantumfly> jbooboo: I think at least one of those fetches was outside of the erroronclone condition
2014-02-26T23:51:56  <quantumfly> I didn't look at it too long /em looks again
2014-02-26T23:52:10  <dtroyer> one is outside, but inside RECLONE=True
2014-02-26T23:52:33  <quantumfly> ah
2014-02-26T23:52:40  <quantumfly> ok then no fetches in the gate
2014-02-26T23:52:42  *** dolphm is now known as dolphm_503
2014-02-26T23:53:05  <foobio> jbooboo: quantumfly: i think i agree that we're the ones ddosing ourselves... over 50% of the entries in the haproxy.log are from rackspace's ipv6 assignment
2014-02-26T23:53:14  <foobio> for the past hour
2014-02-26T23:53:18  *** bhuvan_ has joined #openstack-infra
2014-02-26T23:53:18  *** bhuvan__ has joined #openstack-infra
2014-02-26T23:53:38  *** nati_ueno has joined #openstack-infra
2014-02-26T23:53:40  *** mayu__ has joined #openstack-infra
2014-02-26T23:53:52  *** bhuvan has quit IRC
2014-02-26T23:53:55  <jbooboo> cool, so this is the new normal.  :)
2014-02-26T23:54:15  <mayu__> anteaya: https://review.openstack.org/#/c/76711/
2014-02-26T23:54:21  *** bhuvan___ has quit IRC
2014-02-26T23:55:18  *** mrodden has quit IRC
2014-02-26T23:55:28  <krtaylor> sdague, I am looking into it, I agree it would be much nicer, it may be possible if I dig deeper
2014-02-26T23:55:30  <mayu__> anteaya:it is the new patch that submitted right now.
2014-02-26T23:55:39  <anteaya> mayu__: okay so lets look at the comments your system leaves on that patch
2014-02-26T23:55:56  <anteaya> first of all it comments, that is a big thing to notice, well done
2014-02-26T23:56:00  *** lcheng__ has quit IRC
2014-02-26T23:56:04  <foobio> quantumfly: jbooboo: another 25% is from hp's class-a ipv4 assignment (and i'm willing to bet most of the remaining 25% are from other smaller hp allocations)
2014-02-26T23:56:06  <anteaya> that is the hard part
2014-02-26T23:56:24  <anteaya> mayu__: now you have to fine tune it so that it comments only when you want it to
2014-02-26T23:56:38  <anteaya> and the comments contain useful information
2014-02-26T23:56:50  <mayu__> ok
2014-02-26T23:57:05  <anteaya> mayu__: so it leaves this comment Starting check jobs. http://10.250.201.20/zuul/status
2014-02-26T23:57:11  <quantumfly> foobio: ya
2014-02-26T23:57:17  <anteaya> you need to ensure it does not leave that comment, mayu__
2014-02-26T23:57:32  <anteaya> mayu__: yours is one of about 40 ci systems
2014-02-26T23:57:33  *** e0ne has joined #openstack-infra
2014-02-26T23:57:35  <foobio> jbooboo: quantumfly: though it's worth pointing out that i'm only analyzing the number of requests, so it's entirely possible that these are tiny fetches and someone else is doing whopping large reclones over and over which account for far fewer actual calls but much more system load
2014-02-26T23:57:44  *** nati_uen_ has quit IRC
2014-02-26T23:57:47  *** nati_ueno has quit IRC
2014-02-26T23:57:59  <quantumfly> foobio: good point
2014-02-26T23:58:06  <anteaya> mayu__: and if all 40 ci systems left that message when they are starting jobs, that is just a log of noise
2014-02-26T23:58:17  *** bhuvan has joined #openstack-infra
2014-02-26T23:58:18  *** bhuvan___ has joined #openstack-infra
2014-02-26T23:58:19  <quantumfly> foobio: there is an haproxy top thing we might want to look into using
2014-02-26T23:58:22  *** nati_ueno has joined #openstack-infra
2014-02-26T23:58:26  <quantumfly> foobio: but I am pretty sure it isn't packaged anywhere
2014-02-26T23:58:26  <anteaya> mayu__: the only system that can leave the starting jobs message is our system, jenkins
2014-02-26T23:58:31  <quantumfly> which is why I ginored it in the past
2014-02-26T23:58:49  <anteaya> mayu__: does that make sense?
2014-02-26T23:59:02  <mayu__> not clear
2014-02-26T23:59:09  <foobio> quantumfly: hatop?
2014-02-26T23:59:11  *** bhuvan__ has quit IRC
2014-02-26T23:59:11  *** bhuvan_ has quit IRC
2014-02-26T23:59:23  <foobio> quantumfly: http://feurix.org/projects/hatop/
2014-02-26T23:59:24  *** sarob has quit IRC
2014-02-26T23:59:35  <quantumfly> foobio: yeah
2014-02-26T23:59:37  <anteaya> mayu__: your system leaves a comment on the patch to say it is starting jobs
2014-02-26T23:59:47  <anteaya> mayu__: you need to ensure it does not leave that message
