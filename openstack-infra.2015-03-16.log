2015-03-16T00:02:21  *** tsg has joined #openstack-infra
2015-03-16T00:07:14  *** achanda has joined #openstack-infra
2015-03-16T00:10:26  *** woodster_ has quit IRC
2015-03-16T00:12:22  *** achanda has quit IRC
2015-03-16T00:18:57  *** subscope has quit IRC
2015-03-16T00:23:49  *** tsg has quit IRC
2015-03-16T00:33:00  <openstackgerrit> Ghanshyam Mann proposed openstack-infra/project-config: Remove Nova v21 neutron job & make one for v2.0  https://review.openstack.org/163731
2015-03-16T00:37:12  *** otter768 has quit IRC
2015-03-16T00:37:38  *** matrohon has quit IRC
2015-03-16T00:37:47  *** mjturek1 has quit IRC
2015-03-16T00:42:45  *** tkelsey has joined #openstack-infra
2015-03-16T00:47:14  *** zz_dimtruck is now known as dimtruck
2015-03-16T00:47:39  *** tkelsey has quit IRC
2015-03-16T00:48:30  *** mwagner_lap has quit IRC
2015-03-16T00:50:24  *** funzo has joined #openstack-infra
2015-03-16T00:52:28  *** tiswanso has joined #openstack-infra
2015-03-16T00:53:20  *** garyh has joined #openstack-infra
2015-03-16T00:55:06  *** funzo has quit IRC
2015-03-16T00:56:18  *** tiswanso_ has joined #openstack-infra
2015-03-16T00:58:56  *** tiswanso has quit IRC
2015-03-16T00:59:09  *** ghostpl_ has joined #openstack-infra
2015-03-16T01:00:56  *** mwagner_lap has joined #openstack-infra
2015-03-16T01:01:22  *** ujuc has joined #openstack-infra
2015-03-16T01:03:39  *** garyh has quit IRC
2015-03-16T01:04:22  *** jamesmcarthur has joined #openstack-infra
2015-03-16T01:04:54  *** garyh has joined #openstack-infra
2015-03-16T01:06:51  *** ghostpl_ has quit IRC
2015-03-16T01:08:28  *** Longgeek has joined #openstack-infra
2015-03-16T01:09:13  *** hdd has quit IRC
2015-03-16T01:10:42  *** yfried|afk has quit IRC
2015-03-16T01:11:00  *** kiseok7_ has joined #openstack-infra
2015-03-16T01:13:33  *** liusheng has quit IRC
2015-03-16T01:15:06  *** garyh has quit IRC
2015-03-16T01:15:29  *** Longgeek has quit IRC
2015-03-16T01:19:05  *** alexpilotti has quit IRC
2015-03-16T01:21:05  *** amitgandhinz has joined #openstack-infra
2015-03-16T01:21:51  *** harlowja_at_home has joined #openstack-infra
2015-03-16T01:22:16  *** yamamoto has joined #openstack-infra
2015-03-16T01:22:20  *** salv-orlando has quit IRC
2015-03-16T01:25:26  *** mtanino has joined #openstack-infra
2015-03-16T01:28:52  *** ddieterl_ has joined #openstack-infra
2015-03-16T01:29:43  <openstackgerrit> Davanum Srinivas (dims) proposed openstack-infra/project-config: WIP: Trying to add a DSVM for magnum  https://review.openstack.org/164553
2015-03-16T01:30:31  *** jamesmcarthur has quit IRC
2015-03-16T01:32:29  *** dimtruck is now known as zz_dimtruck
2015-03-16T01:32:59  *** jamesmcarthur has joined #openstack-infra
2015-03-16T01:33:00  *** ddieterly has quit IRC
2015-03-16T01:33:13  *** Qiming has joined #openstack-infra
2015-03-16T01:34:40  *** Qiming_ has joined #openstack-infra
2015-03-16T01:37:47  *** Qiming has quit IRC
2015-03-16T01:37:58  <Qiming_> anteaya, online?
2015-03-16T01:38:50  *** amotoki has joined #openstack-infra
2015-03-16T01:42:48  <openstackgerrit> Joshua Hesketh proposed openstack-infra/nodepool: Remove the need for zmq in proper demand calcs.  https://review.openstack.org/98306
2015-03-16T01:43:04  *** Qiming_ is now known as Qiming
2015-03-16T01:43:34  *** ddieterly has joined #openstack-infra
2015-03-16T01:44:01  *** ddieterl_ has quit IRC
2015-03-16T01:48:11  *** baoli has quit IRC
2015-03-16T01:49:44  *** otter768 has joined #openstack-infra
2015-03-16T01:50:17  *** jamesmcarthur has quit IRC
2015-03-16T01:50:17  *** harlowja_at_home has quit IRC
2015-03-16T01:53:49  *** bknudson has quit IRC
2015-03-16T01:56:37  *** jamesmcarthur has joined #openstack-infra
2015-03-16T02:07:17  *** baoli has joined #openstack-infra
2015-03-16T02:13:48  *** hdd has joined #openstack-infra
2015-03-16T02:13:56  *** dims_ has quit IRC
2015-03-16T02:17:01  *** ivar-lazzaro has joined #openstack-infra
2015-03-16T02:17:05  *** ghostpl_ has joined #openstack-infra
2015-03-16T02:19:29  *** amitgandhinz has quit IRC
2015-03-16T02:22:24  *** ghostpl_ has quit IRC
2015-03-16T02:22:57  *** salv-orlando has joined #openstack-infra
2015-03-16T02:23:03  *** asselin_ has quit IRC
2015-03-16T02:23:16  *** ivar-lazzaro has quit IRC
2015-03-16T02:24:55  *** julim has quit IRC
2015-03-16T02:25:47  *** salv-orlando has quit IRC
2015-03-16T02:29:05  *** salv-orlando has joined #openstack-infra
2015-03-16T02:38:43  *** salv-orlando has quit IRC
2015-03-16T02:42:52  *** jyuso1 has quit IRC
2015-03-16T02:43:02  *** hogepodge has joined #openstack-infra
2015-03-16T02:43:06  *** jyuso1 has joined #openstack-infra
2015-03-16T02:47:35  *** Qiming has quit IRC
2015-03-16T02:47:48  *** Qiming has joined #openstack-infra
2015-03-16T02:50:11  *** ivar-lazzaro has joined #openstack-infra
2015-03-16T02:53:48  *** garyh has joined #openstack-infra
2015-03-16T02:57:35  *** ivar-lazzaro has quit IRC
2015-03-16T02:58:23  *** coolsvap|afk is now known as coolsvap
2015-03-16T02:58:33  *** hdd has quit IRC
2015-03-16T02:59:27  *** nelsnelson has joined #openstack-infra
2015-03-16T02:59:57  *** garyh has quit IRC
2015-03-16T03:02:29  *** jamesmcarthur has quit IRC
2015-03-16T03:04:32  *** sputnik13 has joined #openstack-infra
2015-03-16T03:05:04  *** kiseok7_ has quit IRC
2015-03-16T03:06:14  *** kiseok7_ has joined #openstack-infra
2015-03-16T03:07:41  *** tiswanso_ has quit IRC
2015-03-16T03:11:38  *** Longgeek has joined #openstack-infra
2015-03-16T03:12:21  *** salv-orlando has joined #openstack-infra
2015-03-16T03:13:50  *** Longgeek has quit IRC
2015-03-16T03:13:56  *** jamesmcarthur has joined #openstack-infra
2015-03-16T03:14:08  *** Longgeek has joined #openstack-infra
2015-03-16T03:14:37  *** dimsum__ has joined #openstack-infra
2015-03-16T03:15:12  <openstackgerrit> Joshua Hesketh proposed openstack-infra/nodepool: Remove the need for zmq in proper demand calcs.  https://review.openstack.org/98306
2015-03-16T03:16:32  *** salv-orlando has quit IRC
2015-03-16T03:17:51  *** ghostpl_ has joined #openstack-infra
2015-03-16T03:19:04  *** stevemar has joined #openstack-infra
2015-03-16T03:19:56  *** Longgeek_ has joined #openstack-infra
2015-03-16T03:19:59  *** dimsum__ has quit IRC
2015-03-16T03:20:40  *** Longgeek has quit IRC
2015-03-16T03:22:52  *** ghostpl_ has quit IRC
2015-03-16T03:26:49  *** salv-orlando has joined #openstack-infra
2015-03-16T03:28:03  *** amotoki has quit IRC
2015-03-16T03:28:12  *** ChuckC has joined #openstack-infra
2015-03-16T03:29:34  *** salv-orlando has quit IRC
2015-03-16T03:32:02  *** jamesmcarthur has quit IRC
2015-03-16T03:32:22  *** jamesmcarthur has joined #openstack-infra
2015-03-16T03:32:27  *** salv-orlando has joined #openstack-infra
2015-03-16T03:32:56  *** salv-orlando has quit IRC
2015-03-16T03:36:04  *** salv-orlando has joined #openstack-infra
2015-03-16T03:38:13  *** isviridov has quit IRC
2015-03-16T03:38:19  *** salv-orlando has quit IRC
2015-03-16T03:41:13  *** salv-orlando has joined #openstack-infra
2015-03-16T03:41:31  *** Longgeek has joined #openstack-infra
2015-03-16T03:43:30  *** ddieterly has quit IRC
2015-03-16T03:44:22  *** Longgeek_ has quit IRC
2015-03-16T03:45:35  *** salv-orlando has quit IRC
2015-03-16T03:50:03  *** salv-orlando has joined #openstack-infra
2015-03-16T03:50:05  *** zz_dimtruck is now known as dimtruck
2015-03-16T03:52:28  *** jamesmcarthur has quit IRC
2015-03-16T03:55:54  *** ajmiller_ has joined #openstack-infra
2015-03-16T03:57:05  *** salv-orlando has quit IRC
2015-03-16T03:59:31  *** ajmiller has quit IRC
2015-03-16T04:00:37  *** garyh has joined #openstack-infra
2015-03-16T04:02:52  *** koolhead17 has joined #openstack-infra
2015-03-16T04:04:28  *** SumitNaiksatam has quit IRC
2015-03-16T04:10:36  *** garyh has quit IRC
2015-03-16T04:10:43  *** achanda has joined #openstack-infra
2015-03-16T04:11:18  *** Longgeek has quit IRC
2015-03-16T04:11:38  *** Longgeek has joined #openstack-infra
2015-03-16T04:15:05  <openstackgerrit> Spencer Krum proposed openstack-infra/system-config: Add nanliu/archive module  https://review.openstack.org/164569
2015-03-16T04:19:06  *** salv-orlando has joined #openstack-infra
2015-03-16T04:20:20  *** ujuc has quit IRC
2015-03-16T04:20:30  *** sarob has quit IRC
2015-03-16T04:24:00  *** salv-orlando has quit IRC
2015-03-16T04:25:39  <openstackgerrit> Merged openstack-infra/project-config: Add missing projects to GBP job  https://review.openstack.org/164484
2015-03-16T04:27:23  *** otter768 has quit IRC
2015-03-16T04:27:53  *** salv-orlando has joined #openstack-infra
2015-03-16T04:28:45  *** salv-orlando has quit IRC
2015-03-16T04:31:32  *** yfried|afk has joined #openstack-infra
2015-03-16T04:40:11  *** gokrokve has joined #openstack-infra
2015-03-16T04:40:47  <openstackgerrit> Jamie Lennox proposed openstack/requirements: Bump keystonemiddleware requirement  https://review.openstack.org/164573
2015-03-16T04:40:59  *** mtanino is now known as mtanino_away
2015-03-16T04:43:52  *** tkelsey has joined #openstack-infra
2015-03-16T04:44:14  *** ddieterly has joined #openstack-infra
2015-03-16T04:45:29  *** ivar-lazzaro has joined #openstack-infra
2015-03-16T04:45:50  *** gokrokve has quit IRC
2015-03-16T04:46:17  *** ivar-lazzaro has quit IRC
2015-03-16T04:46:24  *** gokrokve has joined #openstack-infra
2015-03-16T04:46:52  *** ivar-lazzaro has joined #openstack-infra
2015-03-16T04:47:53  *** tkelsey has quit IRC
2015-03-16T04:48:24  *** changbl has quit IRC
2015-03-16T04:48:32  *** ddieterly has quit IRC
2015-03-16T04:50:26  *** baoli has quit IRC
2015-03-16T04:50:43  *** gokrokve has quit IRC
2015-03-16T04:52:46  *** hdd has joined #openstack-infra
2015-03-16T04:57:34  *** ivar-lazzaro has quit IRC
2015-03-16T05:00:18  *** BharatK has joined #openstack-infra
2015-03-16T05:03:52  *** ghostpl_ has joined #openstack-infra
2015-03-16T05:05:58  *** armax has joined #openstack-infra
2015-03-16T05:11:20  *** garyh has joined #openstack-infra
2015-03-16T05:11:22  *** ghostpl_ has quit IRC
2015-03-16T05:12:06  *** dimtruck is now known as zz_dimtruck
2015-03-16T05:16:38  *** gokrokve has joined #openstack-infra
2015-03-16T05:18:00  *** gokrokve has quit IRC
2015-03-16T05:18:32  *** gokrokve has joined #openstack-infra
2015-03-16T05:21:13  *** garyh has quit IRC
2015-03-16T05:23:32  *** gokrokve has quit IRC
2015-03-16T05:29:27  *** hdd has quit IRC
2015-03-16T05:32:11  *** ashishb has joined #openstack-infra
2015-03-16T05:36:15  *** funzo has joined #openstack-infra
2015-03-16T05:40:44  *** funzo has quit IRC
2015-03-16T05:42:45  *** sarob has joined #openstack-infra
2015-03-16T05:45:16  *** ddieterly has joined #openstack-infra
2015-03-16T05:46:39  *** HeOS has joined #openstack-infra
2015-03-16T05:47:36  *** sarob has quit IRC
2015-03-16T05:49:22  *** ddieterly has quit IRC
2015-03-16T05:51:18  *** armax has quit IRC
2015-03-16T05:55:12  *** stevemar has quit IRC
2015-03-16T05:58:06  *** changbl has joined #openstack-infra
2015-03-16T05:59:12  *** Ryan_Lane has joined #openstack-infra
2015-03-16T06:05:29  *** dboik_ has quit IRC
2015-03-16T06:07:08  *** yfried|afk has quit IRC
2015-03-16T06:09:34  *** nelsnelson has quit IRC
2015-03-16T06:15:53  *** achanda has quit IRC
2015-03-16T06:17:11  *** salv-orlando has joined #openstack-infra
2015-03-16T06:18:36  *** gokrokve has joined #openstack-infra
2015-03-16T06:21:25  <openstackgerrit> Andreas Jaeger proposed openstack-infra/infra-manual: Adds project-gating description  https://review.openstack.org/138595
2015-03-16T06:21:26  *** amotoki has joined #openstack-infra
2015-03-16T06:21:51  *** garyh has joined #openstack-infra
2015-03-16T06:23:07  *** gokrokve has quit IRC
2015-03-16T06:23:10  *** salv-orlando has quit IRC
2015-03-16T06:23:59  *** afazekas has joined #openstack-infra
2015-03-16T06:31:38  *** garyh has quit IRC
2015-03-16T06:34:30  *** salv-orlando has joined #openstack-infra
2015-03-16T06:37:00  *** ashishb has quit IRC
2015-03-16T06:42:02  *** achanda has joined #openstack-infra
2015-03-16T06:43:46  *** amotoki has quit IRC
2015-03-16T06:44:28  *** amotoki has joined #openstack-infra
2015-03-16T06:45:37  *** Ryan_Lane has quit IRC
2015-03-16T06:46:03  *** ddieterly has joined #openstack-infra
2015-03-16T06:48:37  *** amotoki has quit IRC
2015-03-16T06:50:46  *** salv-orlando has quit IRC
2015-03-16T06:50:55  *** ddieterly has quit IRC
2015-03-16T06:52:38  *** Longgeek_ has joined #openstack-infra
2015-03-16T06:52:58  *** Longgeek has quit IRC
2015-03-16T06:53:21  *** tnovacik has joined #openstack-infra
2015-03-16T06:55:26  *** ghostpl_ has joined #openstack-infra
2015-03-16T06:57:03  *** salv-orlando has joined #openstack-infra
2015-03-16T07:02:19  <openstackgerrit> Eran Gampel proposed openstack-infra/project-config: change project description test  https://review.openstack.org/164501
2015-03-16T07:02:44  *** ghostpl_ has quit IRC
2015-03-16T07:05:23  *** HeOS has quit IRC
2015-03-16T07:08:45  *** mrunge has joined #openstack-infra
2015-03-16T07:11:47  *** _nadya_ has joined #openstack-infra
2015-03-16T07:12:48  *** achanda has quit IRC
2015-03-16T07:14:43  *** pcaruana has quit IRC
2015-03-16T07:18:35  *** gokrokve has joined #openstack-infra
2015-03-16T07:20:20  *** gokrokve has quit IRC
2015-03-16T07:20:32  *** gokrokve has joined #openstack-infra
2015-03-16T07:22:04  *** yfried|afk has joined #openstack-infra
2015-03-16T07:22:25  *** koolhead17 has quit IRC
2015-03-16T07:24:43  *** gokrokve has quit IRC
2015-03-16T07:26:29  *** yfried has joined #openstack-infra
2015-03-16T07:26:30  *** yfried|afk has quit IRC
2015-03-16T07:28:37  *** mtanino_away has quit IRC
2015-03-16T07:32:13  *** garyh has joined #openstack-infra
2015-03-16T07:34:39  *** hichihara has quit IRC
2015-03-16T07:34:54  *** e0ne has joined #openstack-infra
2015-03-16T07:37:46  *** andreykurilin_ has joined #openstack-infra
2015-03-16T07:37:48  *** salv-orlando has quit IRC
2015-03-16T07:38:20  *** mpavone has joined #openstack-infra
2015-03-16T07:39:06  *** e0ne has quit IRC
2015-03-16T07:42:40  *** garyh has quit IRC
2015-03-16T07:42:49  *** _nadya_ has quit IRC
2015-03-16T07:43:46  *** rwsu has joined #openstack-infra
2015-03-16T07:44:46  *** amotoki has joined #openstack-infra
2015-03-16T07:44:56  *** liusheng has joined #openstack-infra
2015-03-16T07:46:49  *** ddieterly has joined #openstack-infra
2015-03-16T07:51:17  *** ddieterly has quit IRC
2015-03-16T07:56:10  *** andreykurilin_ has quit IRC
2015-03-16T07:57:36  *** scheuran has joined #openstack-infra
2015-03-16T07:58:31  *** ihrachyshka has joined #openstack-infra
2015-03-16T08:05:43  *** yamamoto has quit IRC
2015-03-16T08:06:19  <openstackgerrit> yolanda.robla proposed openstack-infra/puppet-zuul: Add fetch_url and poll parameters to zuul.conf  https://review.openstack.org/162591
2015-03-16T08:08:52  *** markus_z has joined #openstack-infra
2015-03-16T08:14:22  *** ihrachyshka has quit IRC
2015-03-16T08:18:21  *** mrunge has quit IRC
2015-03-16T08:18:33  *** gokrokve has joined #openstack-infra
2015-03-16T08:18:46  *** asselin_ has joined #openstack-infra
2015-03-16T08:19:21  *** pblaho has joined #openstack-infra
2015-03-16T08:20:02  *** mrunge has joined #openstack-infra
2015-03-16T08:21:42  *** hashar has joined #openstack-infra
2015-03-16T08:21:42  *** ashishb has joined #openstack-infra
2015-03-16T08:23:10  *** asselin_ has quit IRC
2015-03-16T08:23:13  *** gokrokve has quit IRC
2015-03-16T08:24:00  *** Hal has joined #openstack-infra
2015-03-16T08:24:23  *** Hal is now known as Guest80159
2015-03-16T08:24:48  *** Somay has joined #openstack-infra
2015-03-16T08:26:33  *** tkelsey has joined #openstack-infra
2015-03-16T08:26:34  *** skolekonov has joined #openstack-infra
2015-03-16T08:31:12  *** shardy has joined #openstack-infra
2015-03-16T08:33:24  *** jcoufal has joined #openstack-infra
2015-03-16T08:34:49  *** yfried is now known as yfried|afk
2015-03-16T08:35:33  *** ihrachyshka has joined #openstack-infra
2015-03-16T08:35:44  *** fdegir has joined #openstack-infra
2015-03-16T08:35:48  *** yfried|afk is now known as yfried
2015-03-16T08:37:04  *** yamamoto has joined #openstack-infra
2015-03-16T08:38:38  *** salv-orlando has joined #openstack-infra
2015-03-16T08:38:56  *** yamamoto has quit IRC
2015-03-16T08:39:18  *** camunoz has quit IRC
2015-03-16T08:40:29  *** dtantsur has joined #openstack-infra
2015-03-16T08:41:38  *** jlanoux has joined #openstack-infra
2015-03-16T08:44:01  *** ujuc has joined #openstack-infra
2015-03-16T08:45:11  *** HeOS has joined #openstack-infra
2015-03-16T08:46:25  *** Ala has joined #openstack-infra
2015-03-16T08:46:55  *** ghostpl_ has joined #openstack-infra
2015-03-16T08:47:13  *** ildikov has quit IRC
2015-03-16T08:47:36  *** ddieterly has joined #openstack-infra
2015-03-16T08:49:32  *** Somay has quit IRC
2015-03-16T08:49:45  *** Ala has quit IRC
2015-03-16T08:50:02  *** Ala has joined #openstack-infra
2015-03-16T08:50:25  *** devvesa has joined #openstack-infra
2015-03-16T08:50:45  *** salv-orl_ has joined #openstack-infra
2015-03-16T08:50:49  *** jd__ has quit IRC
2015-03-16T08:50:52  *** jd__` has joined #openstack-infra
2015-03-16T08:51:21  *** jd__` is now known as jd__
2015-03-16T08:51:24  *** ghostpl_ has quit IRC
2015-03-16T08:51:47  *** ddieterly has quit IRC
2015-03-16T08:51:52  *** salv-orlando has quit IRC
2015-03-16T08:52:29  *** Ala has quit IRC
2015-03-16T08:52:43  *** Ala has joined #openstack-infra
2015-03-16T08:57:17  *** jcoufal has quit IRC
2015-03-16T08:57:29  *** salv-orl_ has quit IRC
2015-03-16T08:58:33  *** Somay has joined #openstack-infra
2015-03-16T08:59:33  *** ihrachyshka has quit IRC
2015-03-16T09:02:32  *** salv-orlando has joined #openstack-infra
2015-03-16T09:05:05  *** salv-orlando has quit IRC
2015-03-16T09:07:10  <openstackgerrit> Aleksey Ripinen proposed openstack-infra/storyboard: Branches, milestones and projects ids validation in tasks  https://review.openstack.org/162126
2015-03-16T09:08:34  *** yfried is now known as yfried|afk
2015-03-16T09:08:48  *** garyh has joined #openstack-infra
2015-03-16T09:11:28  *** jistr has joined #openstack-infra
2015-03-16T09:12:15  <openstackgerrit> Jaume Devesa proposed openstack-infra/project-config: Allow create references in `networking-midonet`  https://review.openstack.org/164606
2015-03-16T09:12:56  *** yfried|afk is now known as yfried
2015-03-16T09:14:53  *** derekh has joined #openstack-infra
2015-03-16T09:16:21  *** koolhead17 has joined #openstack-infra
2015-03-16T09:18:37  *** gokrokve has joined #openstack-infra
2015-03-16T09:18:41  *** garyh has quit IRC
2015-03-16T09:21:11  *** ujuc has quit IRC
2015-03-16T09:22:39  *** deepakcs has joined #openstack-infra
2015-03-16T09:22:54  *** salv-orlando has joined #openstack-infra
2015-03-16T09:22:56  *** gokrokve has quit IRC
2015-03-16T09:23:25  <GheRivero> morning all
2015-03-16T09:25:06  *** yolanda has quit IRC
2015-03-16T09:25:35  *** salv-orlando has quit IRC
2015-03-16T09:30:12  *** SumitNaiksatam has joined #openstack-infra
2015-03-16T09:31:54  <openstackgerrit> Jaume Devesa proposed openstack-infra/project-config: Allow create references in `networking-midonet`  https://review.openstack.org/164606
2015-03-16T09:34:39  *** salv-orlando has joined #openstack-infra
2015-03-16T09:35:36  *** Ala has quit IRC
2015-03-16T09:37:25  *** salv-orlando has quit IRC
2015-03-16T09:37:25  *** yamamoto has joined #openstack-infra
2015-03-16T09:37:27  *** Ala has joined #openstack-infra
2015-03-16T09:38:05  *** salv-orlando has joined #openstack-infra
2015-03-16T09:42:04  *** marcusvrn1 has joined #openstack-infra
2015-03-16T09:43:20  *** salv-orlando has quit IRC
2015-03-16T09:43:39  *** zz_johnthetubagu is now known as johnthetubaguy
2015-03-16T09:44:13  *** salv-orlando has joined #openstack-infra
2015-03-16T09:46:07  *** ujuc has joined #openstack-infra
2015-03-16T09:46:10  *** dimsum__ has joined #openstack-infra
2015-03-16T09:52:00  *** cdent has joined #openstack-infra
2015-03-16T09:53:18  *** ghostpl_ has joined #openstack-infra
2015-03-16T09:55:02  *** yamamoto has quit IRC
2015-03-16T09:56:22  *** salv-orlando has quit IRC
2015-03-16T09:57:05  *** lucasagomes has joined #openstack-infra
2015-03-16T09:57:19  *** ssam2 has joined #openstack-infra
2015-03-16T09:57:20  *** lucasagomes has left #openstack-infra
2015-03-16T09:57:55  <openstackgerrit> Merged openstack-infra/storyboard: Split auth in api and change user_tokens  https://review.openstack.org/153591
2015-03-16T09:58:06  *** salv-orl_ has joined #openstack-infra
2015-03-16T09:59:40  *** Darkwan has quit IRC
2015-03-16T09:59:49  *** ghostpl_ has quit IRC
2015-03-16T10:00:04  *** yamamoto has joined #openstack-infra
2015-03-16T10:00:06  *** sabari has quit IRC
2015-03-16T10:02:16  *** sabari has joined #openstack-infra
2015-03-16T10:04:10  *** asettle has joined #openstack-infra
2015-03-16T10:07:02  *** Qiming has quit IRC
2015-03-16T10:07:57  <zigo_> sqlalchemy-migrate versio 0.9.5 has testtools < 0.9.36, that is *impossible* for me to satisfy in Debian.
2015-03-16T10:08:31  *** salv-orl_ has quit IRC
2015-03-16T10:08:41  *** asettle has quit IRC
2015-03-16T10:08:48  *** yolanda has joined #openstack-infra
2015-03-16T10:08:52  <zigo_> We need this to be fixed.
2015-03-16T10:12:56  *** arxcruz has joined #openstack-infra
2015-03-16T10:13:37  *** salv-orlando has joined #openstack-infra
2015-03-16T10:14:19  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Added class and view variable for state transitions.  https://review.openstack.org/160526
2015-03-16T10:14:26  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Preload Story and Creator in state  https://review.openstack.org/161063
2015-03-16T10:15:58  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Preload tasks in state resolution.  https://review.openstack.org/161064
2015-03-16T10:17:52  *** salv-orlando has quit IRC
2015-03-16T10:18:28  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Moved preference resolution into its own resolver.  https://review.openstack.org/163574
2015-03-16T10:18:34  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Preference service uses private scope.  https://review.openstack.org/163575
2015-03-16T10:18:37  *** gokrokve has joined #openstack-infra
2015-03-16T10:18:40  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Safety check for preference save.  https://review.openstack.org/163576
2015-03-16T10:18:46  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Removed static pageSize injector.  https://review.openstack.org/163577
2015-03-16T10:19:13  *** coolsvap is now known as coolsvap|afk
2015-03-16T10:19:17  *** garyh has joined #openstack-infra
2015-03-16T10:22:02  *** salv-orlando has joined #openstack-infra
2015-03-16T10:23:22  *** gokrokve has quit IRC
2015-03-16T10:26:44  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Sorted Package Dependencies.  https://review.openstack.org/161497
2015-03-16T10:27:56  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Removed "Do No Evil" jshint and replaced with eslint.  https://review.openstack.org/161498
2015-03-16T10:29:30  *** salv-orlando has quit IRC
2015-03-16T10:29:56  *** Somay has quit IRC
2015-03-16T10:30:03  *** garyh has quit IRC
2015-03-16T10:31:26  *** ildikov has joined #openstack-infra
2015-03-16T10:32:00  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Enabled eslint:no-undefined  https://review.openstack.org/161499
2015-03-16T10:32:03  *** pc_m has joined #openstack-infra
2015-03-16T10:32:06  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Enabled eslint:indent  https://review.openstack.org/161500
2015-03-16T10:33:37  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Enabled eslint:key-spacing  https://review.openstack.org/161501
2015-03-16T10:33:43  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Enabled eslint:no-space-before-semi  https://review.openstack.org/161502
2015-03-16T10:33:47  *** salv-orlando has joined #openstack-infra
2015-03-16T10:36:31  *** salv-orlando has quit IRC
2015-03-16T10:37:00  *** funzo has joined #openstack-infra
2015-03-16T10:41:41  *** funzo has quit IRC
2015-03-16T10:43:53  *** yamamoto has quit IRC
2015-03-16T10:44:37  *** jp_at_hp has joined #openstack-infra
2015-03-16T10:45:07  *** yfried is now known as yfried|afk
2015-03-16T10:45:11  *** rlandy has joined #openstack-infra
2015-03-16T10:45:35  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Added sane result set indicators.  https://review.openstack.org/162265
2015-03-16T10:46:15  <openstackgerrit> Merged openstack-infra/storyboard-webclient: Moved template into correct directory.  https://review.openstack.org/163138
2015-03-16T10:47:45  *** tnovacik_ has joined #openstack-infra
2015-03-16T10:48:00  *** ghostpl_ has joined #openstack-infra
2015-03-16T10:48:05  *** ghostpl_ has quit IRC
2015-03-16T10:48:13  *** tnovacik has quit IRC
2015-03-16T10:48:17  *** ghostpl_ has joined #openstack-infra
2015-03-16T10:48:54  *** ddieterly has joined #openstack-infra
2015-03-16T10:49:38  *** dtantsur is now known as dtantsur|bbl
2015-03-16T10:51:25  *** salv-orlando has joined #openstack-infra
2015-03-16T10:53:31  *** ddieterly has quit IRC
2015-03-16T10:53:38  *** _nadya_ has joined #openstack-infra
2015-03-16T10:53:43  *** Somay has joined #openstack-infra
2015-03-16T10:55:49  *** ZZelle has joined #openstack-infra
2015-03-16T10:56:19  *** salv-orlando has quit IRC
2015-03-16T10:58:24  *** _nadya__ has joined #openstack-infra
2015-03-16T10:58:24  *** _nadya_ has quit IRC
2015-03-16T11:02:54  *** dims_ has joined #openstack-infra
2015-03-16T11:04:40  *** dimsum__ has quit IRC
2015-03-16T11:05:00  *** yamamoto has joined #openstack-infra
2015-03-16T11:05:17  *** yfried|afk is now known as yfried
2015-03-16T11:05:42  *** Qiming_ has joined #openstack-infra
2015-03-16T11:07:52  *** dims_ has quit IRC
2015-03-16T11:11:02  *** Somay has quit IRC
2015-03-16T11:13:27  *** dimsum__ has joined #openstack-infra
2015-03-16T11:16:21  *** Somay has joined #openstack-infra
2015-03-16T11:18:35  *** gokrokve has joined #openstack-infra
2015-03-16T11:20:25  *** yamamoto has quit IRC
2015-03-16T11:20:54  *** Somay has quit IRC
2015-03-16T11:22:57  <Qiming_> anteaya, online?
2015-03-16T11:23:02  *** tnovacik_ has quit IRC
2015-03-16T11:23:13  *** gokrokve has quit IRC
2015-03-16T11:23:37  *** Somay has joined #openstack-infra
2015-03-16T11:24:45  *** Somay has quit IRC
2015-03-16T11:25:10  *** ldnunes has joined #openstack-infra
2015-03-16T11:30:46  *** garyh has joined #openstack-infra
2015-03-16T11:36:37  *** dizquierdo has joined #openstack-infra
2015-03-16T11:38:11  *** ghostpl_ has quit IRC
2015-03-16T11:38:21  *** yfried_ has joined #openstack-infra
2015-03-16T11:38:49  *** yfried has quit IRC
2015-03-16T11:41:11  *** garyh has quit IRC
2015-03-16T11:42:00  *** tsufiev_ is now known as tsufiev
2015-03-16T11:43:49  *** dizquierdo has quit IRC
2015-03-16T11:45:03  *** Guest80159 has quit IRC
2015-03-16T11:45:05  *** Hal has joined #openstack-infra
2015-03-16T11:45:29  *** Hal is now known as Guest64707
2015-03-16T11:46:36  *** mwagner_lap has quit IRC
2015-03-16T11:47:20  <dstufft> mordred: (or anyone) if you get a chance to test https://github.com/pypa/pip/pull/2535 that'd be great. I'd like to merge it and get it into the next pip release
2015-03-16T11:49:53  *** ddieterly has joined #openstack-infra
2015-03-16T11:51:00  *** jaypipes has joined #openstack-infra
2015-03-16T11:51:17  *** devvesa has quit IRC
2015-03-16T11:51:54  *** devvesa has joined #openstack-infra
2015-03-16T11:54:13  *** ddieterly has quit IRC
2015-03-16T11:54:24  *** weshay has joined #openstack-infra
2015-03-16T11:55:54  *** dizquierdo has joined #openstack-infra
2015-03-16T11:56:06  *** mwagner_lap has joined #openstack-infra
2015-03-16T11:57:54  *** dtantsur|bbl is now known as dtantsur
2015-03-16T12:00:10  *** ghostpl_ has joined #openstack-infra
2015-03-16T12:02:26  *** kgiusti has joined #openstack-infra
2015-03-16T12:05:21  *** Qiming__ has joined #openstack-infra
2015-03-16T12:07:15  *** deepakcs has quit IRC
2015-03-16T12:07:17  <openstackgerrit> Merged openstack-infra/os-loganalyze: Update SUPPORTS_SEV regex to support new devstack logs  https://review.openstack.org/159286
2015-03-16T12:07:26  *** dprince has joined #openstack-infra
2015-03-16T12:07:37  *** salv-orlando has joined #openstack-infra
2015-03-16T12:08:13  *** Qiming_ has quit IRC
2015-03-16T12:09:49  *** yamamoto has joined #openstack-infra
2015-03-16T12:10:26  *** aysyd has joined #openstack-infra
2015-03-16T12:12:05  *** tnovacik_ has joined #openstack-infra
2015-03-16T12:13:28  <openstackgerrit> Merged openstack-infra/puppet-storyboard: Corrected metadata.json  https://review.openstack.org/158408
2015-03-16T12:13:45  *** ildikov has quit IRC
2015-03-16T12:14:15  *** rm_work is now known as rm_work|away
2015-03-16T12:14:17  *** salv-orlando has quit IRC
2015-03-16T12:16:46  *** ildikov has joined #openstack-infra
2015-03-16T12:17:13  <openstackgerrit> Sergey Lukjanov proposed openstack-infra/project-config: Add py27-scenario-unit tox non-voting job for Sahara  https://review.openstack.org/163776
2015-03-16T12:17:41  *** Qiming__ is now known as Qiming
2015-03-16T12:18:36  *** gokrokve has joined #openstack-infra
2015-03-16T12:18:40  *** baoli has joined #openstack-infra
2015-03-16T12:20:04  <openstackgerrit> Merged openstack-infra/system-config: Also serve zuul status.json via HTTPS  https://review.openstack.org/155474
2015-03-16T12:21:08  *** funzo has joined #openstack-infra
2015-03-16T12:21:20  <openstackgerrit> Merged openstack-infra/system-config: Upgrade openstackid to 1.0.6  https://review.openstack.org/164230
2015-03-16T12:21:35  *** salv-orlando has joined #openstack-infra
2015-03-16T12:21:44  *** ghostpl_ has quit IRC
2015-03-16T12:21:55  <openstackgerrit> Christian Berendt proposed openstack-infra/project-config: Add new project ofaa to Stackforge  https://review.openstack.org/164668
2015-03-16T12:22:22  *** salv-orlando has quit IRC
2015-03-16T12:22:57  *** salv-orlando has joined #openstack-infra
2015-03-16T12:23:26  *** gokrokve has quit IRC
2015-03-16T12:24:03  <openstackgerrit> Jaroslav Henner proposed openstack-infra/jenkins-job-builder: Add checking of multijob phase condition.  https://review.openstack.org/164669
2015-03-16T12:24:42  *** dkliban_afk is now known as dkliban
2015-03-16T12:26:06  *** bswartz has quit IRC
2015-03-16T12:26:32  *** rfolco has joined #openstack-infra
2015-03-16T12:26:42  *** SumitNaiksatam has quit IRC
2015-03-16T12:27:01  *** claudiub has joined #openstack-infra
2015-03-16T12:27:26  *** alexpilotti has joined #openstack-infra
2015-03-16T12:27:34  *** ajmiller_ has quit IRC
2015-03-16T12:27:39  *** woodster_ has joined #openstack-infra
2015-03-16T12:28:02  <openstackgerrit> Merged openstack-infra/project-config: Add non-voting Sheepdog test job to cinder check pipeline  https://review.openstack.org/153868
2015-03-16T12:28:17  *** ghostpl_ has joined #openstack-infra
2015-03-16T12:28:34  <openstackgerrit> yolanda.robla proposed openstack-infra/system-config: Configure puppetmaster server from manifest  https://review.openstack.org/164670
2015-03-16T12:28:39  <openstackgerrit> Christian Berendt proposed openstack-infra/project-config: Add new project ofaa to Stackforge  https://review.openstack.org/164668
2015-03-16T12:29:40  <openstackgerrit> Merged openstack-infra/project-config: Add specs repository for os-ansible-deployment  https://review.openstack.org/163960
2015-03-16T12:31:42  *** macjack has joined #openstack-infra
2015-03-16T12:32:02  *** dimsum__ has quit IRC
2015-03-16T12:32:36  *** dimsum__ has joined #openstack-infra
2015-03-16T12:33:57  <openstackgerrit> Merged openstack-infra/project-config: Allow create references in `networking-midonet`  https://review.openstack.org/164606
2015-03-16T12:35:10  *** macjack has quit IRC
2015-03-16T12:38:14  *** radez_g0n3 is now known as radez
2015-03-16T12:39:49  <mordred> dstufft: I have an error, but it doesn't look like it even got to the pbr part
2015-03-16T12:39:57  <openstackgerrit> Eran Gampel proposed openstack-infra/project-config: Change project description text  https://review.openstack.org/164501
2015-03-16T12:40:07  <dstufft> mordred: output?
2015-03-16T12:40:40  <mordred> dstufft: http://paste.openstack.org/show/192626/
2015-03-16T12:41:23  <mordred> dstufft: I installed the patch into a venv, then did: git clone git://git.openstack.org/openstack-infra/zuul ; venv/bin/pip install ./zuul
2015-03-16T12:41:27  <dstufft> mordred: I think that's an broken cache dir
2015-03-16T12:41:32  <mordred> dstufft: in case you want an easy-ish test case
2015-03-16T12:41:37  <mordred> dstufft: oh - ok. should I blow it away?
2015-03-16T12:41:39  <dstufft> try with --no-cache-dir
2015-03-16T12:41:50  *** garyh has joined #openstack-infra
2015-03-16T12:42:02  <mordred> k. re-trying
2015-03-16T12:42:38  <dstufft> probably an error that cachecontrol should handle if that's the case
2015-03-16T12:42:41  <mordred> dstufft: yup. got much further
2015-03-16T12:43:46  <Shrews> mordred: reviewing your obj iface changes for shade now
2015-03-16T12:44:31  <mordred> Shrews: cool
2015-03-16T12:44:47  <dstufft> Ah yea, https://github.com/pypa/pip/issues/2481 I thought we had an open issue for that
2015-03-16T12:44:57  <dstufft> I should probably go and make a PR to cachecontrol
2015-03-16T12:45:01  <mordred> dstufft: ok - the install succeeded...
2015-03-16T12:45:28  <mordred> dstufft: as far as testing goes - should I expect evil to be apparent? or do  Ineed to dig and make sure all the files installed as I expected?
2015-03-16T12:45:59  <mordred> foobio: ^^ do you remember what hapened last time this broke?
2015-03-16T12:46:07  <dstufft> mordred: last time pbr broke because we didn't generate an sdist but we didn't copy the .git dir to the temporary directory, so I'd say if pbr has a version number it's probably OK
2015-03-16T12:46:51  <mordred> dstufft: yes - the thing I installed into the virtualenv has a proper version number
2015-03-16T12:46:56  <dstufft> cool
2015-03-16T12:47:00  <dstufft> it probably works then
2015-03-16T12:47:03  <dstufft> if not, that's what git revert is for
2015-03-16T12:47:04  <dstufft> :D
2015-03-16T12:47:23  *** sdake has joined #openstack-infra
2015-03-16T12:48:08  <dstufft> that should make ``pip install /to/a/path`` much less of a special case
2015-03-16T12:48:23  <dstufft> it should be functionally equivilant to generating a sdist and isntalling from that now
2015-03-16T12:50:17  *** openstackgerrit has quit IRC
2015-03-16T12:50:35  *** openstackgerrit has joined #openstack-infra
2015-03-16T12:50:39  *** ddieterly has joined #openstack-infra
2015-03-16T12:51:01  *** adalbas has joined #openstack-infra
2015-03-16T12:51:12  *** che-arne has joined #openstack-infra
2015-03-16T12:51:28  *** fifieldt has joined #openstack-infra
2015-03-16T12:52:49  *** garyh has quit IRC
2015-03-16T12:55:12  *** ddieterly has quit IRC
2015-03-16T12:57:02  *** jyuso1 has quit IRC
2015-03-16T12:57:45  *** wuhg has joined #openstack-infra
2015-03-16T12:57:50  *** dboik has joined #openstack-infra
2015-03-16T12:57:54  <openstackgerrit> Christian Berendt proposed openstack-infra/project-config: Add new project faafo to Stackforge  https://review.openstack.org/164668
2015-03-16T12:58:54  <mordred> dstufft: woohoo.
2015-03-16T12:59:05  <mordred> ttx: ^^ actually, you should be pleased with this ^^
2015-03-16T13:00:16  <ttx> I guess I should
2015-03-16T13:01:21  *** bswartz has joined #openstack-infra
2015-03-16T13:01:35  *** yfried_ has quit IRC
2015-03-16T13:02:00  *** yfried_ has joined #openstack-infra
2015-03-16T13:02:52  *** ayoung has joined #openstack-infra
2015-03-16T13:04:25  *** bcourt has quit IRC
2015-03-16T13:04:41  *** spredzy is now known as spredzy|afk
2015-03-16T13:05:33  *** ddieterly has joined #openstack-infra
2015-03-16T13:07:10  *** Ala has quit IRC
2015-03-16T13:08:22  *** Ala has joined #openstack-infra
2015-03-16T13:09:20  *** julim has joined #openstack-infra
2015-03-16T13:09:25  *** dboik has quit IRC
2015-03-16T13:10:03  *** ddieterly has quit IRC
2015-03-16T13:11:28  *** jamesmcarthur has joined #openstack-infra
2015-03-16T13:12:10  *** SumitNaiksatam has joined #openstack-infra
2015-03-16T13:13:01  <mordred> Shrews: thanks
2015-03-16T13:13:18  *** dustins has joined #openstack-infra
2015-03-16T13:17:53  <foobio> mordred: dstufft: yeah, i honestly don't remember the details for what we ran into last time
2015-03-16T13:18:13  <foobio> but definitely in favor of pip install dir being like make sdist then pip install
2015-03-16T13:18:35  <mkj_wk> foobio: I had another thought about my tracking mode patch that might further simplify things... Got a minute to ponder this with me?
2015-03-16T13:18:37  *** gokrokve has joined #openstack-infra
2015-03-16T13:18:49  <foobio> mkj_wk: i can ponder in parallel at least
2015-03-16T13:19:01  <mkj_wk> :)
2015-03-16T13:19:23  <mkj_wk> so I was thinking that maybe if options.track is set, I should set the tracking branch when downloading a patch for review
2015-03-16T13:20:05  <mkj_wk> in which case perhaps could either remove or separate the "query the remote gerrit for which branch to submit an untracked branch against"
2015-03-16T13:20:57  <mkj_wk> the "query the remote / interactively ask about remote branch" might make sense as a separare feature
2015-03-16T13:22:06  <mordred> mkj_wk: I think that soudns like a non-terrible thing to try
2015-03-16T13:22:52  *** gokrokve has quit IRC
2015-03-16T13:22:57  <mordred> mkj_wk: I've been running locally with an unmerged patch that removes the gerrit remote and instead does a split-remote where the push-url is different than the fetch-url ... so I'm personally more in favor of encoding things we know into the git remote config
2015-03-16T13:25:43  <openstackgerrit> Christian Berendt proposed openstack-infra/project-config: Add new project faafo to Stackforge  https://review.openstack.org/164668
2015-03-16T13:26:07  *** amotoki has quit IRC
2015-03-16T13:26:07  *** tiswanso has joined #openstack-infra
2015-03-16T13:26:34  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Sometimes clouds have strings for image  https://review.openstack.org/164691
2015-03-16T13:27:19  *** signed8bit has joined #openstack-infra
2015-03-16T13:27:39  *** jamesmcarthur has quit IRC
2015-03-16T13:27:42  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Small fixes found working on ansible modules  https://review.openstack.org/162140
2015-03-16T13:29:11  *** claudiub_ has joined #openstack-infra
2015-03-16T13:29:44  *** amitgandhinz has joined #openstack-infra
2015-03-16T13:29:56  <mordred> foobio: can you give me a +3 on https://review.openstack.org/#/c/161963/ ? I need to get a shade release out to fix an upstream ansible bug
2015-03-16T13:30:27  *** bknudson has joined #openstack-infra
2015-03-16T13:31:45  *** sandywalsh has joined #openstack-infra
2015-03-16T13:32:01  *** claudiub has quit IRC
2015-03-16T13:33:32  *** ChuckC has quit IRC
2015-03-16T13:33:52  *** dimsum__ is now known as dims
2015-03-16T13:35:01  *** ddieterly has joined #openstack-infra
2015-03-16T13:35:20  *** spzala has joined #openstack-infra
2015-03-16T13:35:20  <openstackgerrit> Aleksey Ripinen proposed openstack-infra/storyboard: Added request statistic  https://review.openstack.org/164696
2015-03-16T13:37:11  <foobio> mkj_wk: yeah, that sounds like an entirely reasonable approach
2015-03-16T13:37:27  *** mriedem has joined #openstack-infra
2015-03-16T13:39:34  *** dboik has joined #openstack-infra
2015-03-16T13:39:39  *** dboik has quit IRC
2015-03-16T13:40:14  *** dboik has joined #openstack-infra
2015-03-16T13:42:47  *** sabeen1 has joined #openstack-infra
2015-03-16T13:44:30  *** devvesa has quit IRC
2015-03-16T13:45:30  *** sambetts_ is now known as sambetts
2015-03-16T13:45:48  <mkj_wk> been investigating... One thing shows up: fetch_review() was where I first got the idea of just grabbing the first result that came back
2015-03-16T13:46:16  <mkj_wk> for this to work right, I think I'd need to interactively ask for the branch name in fetch_review if more than one is returned
2015-03-16T13:46:49  *** gmann_ has joined #openstack-infra
2015-03-16T13:47:13  *** bcourt has joined #openstack-infra
2015-03-16T13:48:27  *** spredzy|afk is now known as spredzy
2015-03-16T13:49:58  <mordred> foobio: the nodepool graphs look scary at this time on monday morning
2015-03-16T13:51:10  <foobio> mkj_wk: well, if the review is fetched by number rather than change-id it's unambiguous
2015-03-16T13:51:37  <mkj_wk> foobio: Oh, good, that makes it easier ☺
2015-03-16T13:51:57  *** mjturek1 has joined #openstack-infra
2015-03-16T13:52:07  <mkj_wk> I'll look into that later today, probably won't be terrible to do (famous last words...) ☺
2015-03-16T13:52:19  <foobio> the change number is a unique key in the database, the change-id is only unique for a given project+branch conbination
2015-03-16T13:52:44  <foobio> er, combination
2015-03-16T13:52:59  *** BobBall_AWOL is now known as BobBall
2015-03-16T13:53:01  *** gmann_ has quit IRC
2015-03-16T13:53:20  <mordred> foobio: actualy - can you load the zuul status page?
2015-03-16T13:53:29  *** garyh has joined #openstack-infra
2015-03-16T13:53:31  <foobio> checking
2015-03-16T13:53:35  <mordred> foobio: mine is hanging on loading the things that aren't the nodepool graphs
2015-03-16T13:53:38  <openstackgerrit> Matt Riedemann proposed openstack-infra/elastic-recheck: Expand scope for neutron dbdeadlock bug 1432065  https://review.openstack.org/164703
2015-03-16T13:53:39  <uvirtbot> Launchpad bug 1432065 in neutron "DBDeadlock: (OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction') 'DELETE FROM ipallocationpools WHERE ipallocationpools.id" [Critical,Confirmed] https://launchpad.net/bugs/1432065
2015-03-16T13:53:39  <openstack> bug 1432065 in neutron "DBDeadlock: (OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction') 'DELETE FROM ipallocationpools WHERE ipallocationpools.id" [Critical,Confirmed] https://launchpad.net/bugs/1432065
2015-03-16T13:53:41  <Kiall> mordred: looks dead to me
2015-03-16T13:53:42  <uvirtbot> Launchpad bug 1432065 in neutron "DBDeadlock: (OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction') 'DELETE FROM ipallocationpools WHERE ipallocationpools.id" [Critical,Confirmed]
2015-03-16T13:53:50  <mordred> Kiall: k. at least it's not just me
2015-03-16T13:53:50  *** tnovacik_ has quit IRC
2015-03-16T13:54:09  <foobio> hrm, i think it's not returning status.json
2015-03-16T13:54:13  <mordred> server doesn't seem overloaded
2015-03-16T13:54:19  <mordred> fwiw
2015-03-16T13:55:52  <openstackgerrit> yolanda.robla proposed openstack-infra/project-config: Add stackforge/puppet-setproxy  https://review.openstack.org/164197
2015-03-16T13:56:07  *** gokrokve has joined #openstack-infra
2015-03-16T13:56:18  *** fdegir has quit IRC
2015-03-16T13:56:41  <dansmith> mordred: foobio: I can't
2015-03-16T13:56:50  <dansmith> I'm getting a "no route to host" even
2015-03-16T13:56:51  *** fdegir has joined #openstack-infra
2015-03-16T13:57:09  <dansmith> like a default firewall rule is in place to reject (if the host is actually up)
2015-03-16T13:57:18  <mordred> host is up
2015-03-16T13:57:23  <mordred> checking firewall
2015-03-16T13:58:01  <Kiall> NET_CONNECTION_REFUSED showing for the status.json call for me...
2015-03-16T13:58:05  <mordred> REJECT     all  --  anywhere             anywhere             reject-with icmp-host-prohibited
2015-03-16T13:58:08  <mordred> foobio: ^^
2015-03-16T13:58:09  *** radez is now known as radez_g0n3
2015-03-16T13:58:15  <dansmith> mordred: run with -v
2015-03-16T13:58:22  <dansmith> mordred: that could be tied to a specific interface
2015-03-16T13:58:32  <mordred>  990K   50M REJECT     all  --  any    any     anywhere             anywhere             reject-with icmp-host-prohibited
2015-03-16T13:58:37  <dansmith> or not
2015-03-16T13:58:38  <dansmith> :)
2015-03-16T13:59:10  <foobio> except i can still get to the http service itself
2015-03-16T13:59:32  <foobio> also zuul's log indicates it's still running jobs
2015-03-16T13:59:40  <foobio> and processing results/events
2015-03-16T13:59:50  <mordred> yah - it seems to still be cnnected to gerri
2015-03-16T14:00:04  <mordred> foobio: you can get to zuul.openstack.org/status.json?
2015-03-16T14:00:43  <foobio> oho, i wonder if my http+https patch just merged and is at fault for some reason
2015-03-16T14:00:47  *** gokrokve_ has joined #openstack-infra
2015-03-16T14:00:49  <mordred> it did just  merge
2015-03-16T14:00:52  <mordred> I was just looking at that
2015-03-16T14:02:01  <mordred> foobio:   SSLCertificateFile /etc/ssl/certs/*.pem
2015-03-16T14:02:08  <mordred> foobio: that doesn't look quite right :)
2015-03-16T14:02:09  <foobio> SSLCertificateFile: file '/etc/ssl/certs/*.pem' does not exist or is empty
2015-03-16T14:02:20  <foobio> yeah
2015-03-16T14:02:44  <foobio> aha, the vhost name is apparently * there
2015-03-16T14:02:52  <mordred> hahaha
2015-03-16T14:02:52  <foobio> patch on the way
2015-03-16T14:03:17  *** ildikov has quit IRC
2015-03-16T14:03:38  *** garyh has quit IRC
2015-03-16T14:03:47  *** peristeri has joined #openstack-infra
2015-03-16T14:04:14  <mordred> foobio: in fact - apache is just flat not runnign there
2015-03-16T14:04:22  *** gokrokve has quit IRC
2015-03-16T14:04:25  <foobio> yep
2015-03-16T14:04:35  <mordred> love it
2015-03-16T14:05:03  <mordred> I really do wish we had our non-ssl/ssl wrapper pattern more re-usable in our puppet
2015-03-16T14:05:03  <dansmith> foobio: is that important?
2015-03-16T14:05:03  <foobio> when i thought i was able to hit the site, it was actually cached in my browser
2015-03-16T14:05:16  <mordred> I mean, none of the options to do that are happy
2015-03-16T14:05:18  <foobio> dansmith: is what important?
2015-03-16T14:05:26  <dansmith> foobio: running apache.. joking.. :P
2015-03-16T14:05:45  <mordred> foobio: I tink the real solution is taht apache is clearly broken and we should replace it with mongodb
2015-03-16T14:05:49  <foobio> dansmith: technically no, as long as you don't care to see the status info ;)
2015-03-16T14:05:56  *** tnovacik_ has joined #openstack-infra
2015-03-16T14:06:03  <dansmith> foobio: well, for the record, I do care :)
2015-03-16T14:06:10  <openstackgerrit> David Kranz proposed openstack-infra/project-config: Start using neutron for periodic stress job  https://review.openstack.org/164705
2015-03-16T14:06:11  <foobio> mordred: unlike apache, mongodb runs at web scale
2015-03-16T14:06:33  * mordred mug of web scale is running out of web scale ...
2015-03-16T14:07:15  *** ddieterly has quit IRC
2015-03-16T14:07:35  *** _nadya__ has quit IRC
2015-03-16T14:07:45  <foobio> mordred: it's not just the cert paths affected by this, but also the log filenames
2015-03-16T14:07:54  *** doug-fish has joined #openstack-infra
2015-03-16T14:07:58  <foobio> CustomLog ${APACHE_LOG_DIR}/*-access.log combined
2015-03-16T14:08:00  <foobio> et cetera
2015-03-16T14:08:27  *** mattfarina has joined #openstack-infra
2015-03-16T14:09:54  *** nelsnelson has joined #openstack-infra
2015-03-16T14:09:57  <mordred> foobio: oh -@vhost_name is *
2015-03-16T14:10:02  <foobio> yep
2015-03-16T14:10:19  <foobio> probably need @fqdn here?
2015-03-16T14:10:37  <mordred>   $vhost_name = $::fqdn,
2015-03-16T14:11:16  *** devvesa has joined #openstack-infra
2015-03-16T14:11:27  *** nelsnelson has quit IRC
2015-03-16T14:11:58  <mordred> foobio: I don't see where it's being turned in to *
2015-03-16T14:12:07  <openstackgerrit> Jaroslav Henner proposed openstack-infra/jenkins-job-builder: Add checking of multijob phase condition.  https://review.openstack.org/164669
2015-03-16T14:14:24  <mordred> foobio: it's vhost_name in params
2015-03-16T14:14:55  <mordred> foobio: in apache::params in openstack-infra/puppet-httpd
2015-03-16T14:15:04  *** Ala has quit IRC
2015-03-16T14:15:06  *** ChuckC has joined #openstack-infra
2015-03-16T14:15:19  *** markmcclain has left #openstack-infra
2015-03-16T14:15:25  *** asselin_ has joined #openstack-infra
2015-03-16T14:15:34  <mordred> oh for the love of all that is holy
2015-03-16T14:15:37  <foobio> i bet that's inherited from the puppet apache module we forked
2015-03-16T14:15:45  <mordred>     Rename apache2 to httpd globally
2015-03-16T14:16:10  <mordred> how is anything working?
2015-03-16T14:16:27  <foobio> maybe this was the first server to get a patch which reloaded apache?
2015-03-16T14:17:29  <mordred> foobio: let me try real quick in an environment ...
2015-03-16T14:18:14  <foobio> mordred: yeah, that variable has been * in the puppet apache module going back to 2011
2015-03-16T14:18:35  <foobio> according to git blame
2015-03-16T14:20:32  *** Ala has joined #openstack-infra
2015-03-16T14:20:43  *** yfried_ is now known as yfried|afk
2015-03-16T14:21:13  *** zz_dimtruck is now known as dimtruck
2015-03-16T14:22:00  <mordred> foobio: switching to Httpd does not fix it
2015-03-16T14:22:23  *** nelsnelson has joined #openstack-infra
2015-03-16T14:22:34  <foobio> mordred: so it looks like i followed bad advice in https://review.openstack.org/#/c/155471/2/templates/zuul.vhost.erb
2015-03-16T14:22:55  <foobio> mordred: i'm going to go back to the thing nibalizer says is "a very old way" because it actually worked
2015-03-16T14:23:01  <mordred> foobio: awesome
2015-03-16T14:23:04  *** timcline has joined #openstack-infra
2015-03-16T14:23:16  <foobio> mordred: since nodepool.o.o is using the same "very old way" and is getting the right variable interpolation
2015-03-16T14:23:18  <mordred> foobio: I'm trying to sort out why we're getting the * passed through
2015-03-16T14:24:01  *** yfried|afk is now known as yfried_
2015-03-16T14:24:11  <foobio> mordred: it looks like @vhost_name in the erb is not treated the same as scope.lookupvar("::zuul::vhost_name")
2015-03-16T14:24:24  <mordred> oh! I get what you're saying
2015-03-16T14:24:25  *** garyh has joined #openstack-infra
2015-03-16T14:25:00  <foobio> or is there a shorter form of that which will get the value we're setting?
2015-03-16T14:25:20  *** sigmavirus24_awa is now known as sigmavirus24
2015-03-16T14:26:04  *** BharatK has quit IRC
2015-03-16T14:26:22  <mordred> foobio: actually - we may not be passing in vhost_name right ...
2015-03-16T14:26:30  <mordred> got it
2015-03-16T14:26:50  *** amotoki has joined #openstack-infra
2015-03-16T14:27:03  <foobio> if so, wow we've been doing it wrong all over the place
2015-03-16T14:27:27  <openstackgerrit> Monty Taylor proposed openstack-infra/puppet-zuul: Pass vhost_name in to apache::vhost  https://review.openstack.org/164711
2015-03-16T14:27:31  <mordred> foobio: ^^ that works
2015-03-16T14:27:59  <mordred> and yes - I think if we start passing in vhost_name, we can move to the @vhost_name syntax in the template files
2015-03-16T14:28:21  <mordred> but as it was, we weren't passing it in, so the scope lookup was all wrong, and we were having to override where the template looked for data
2015-03-16T14:28:25  <foobio> yep, that looks reasonable
2015-03-16T14:28:44  *** banix has joined #openstack-infra
2015-03-16T14:28:57  <foobio> so instead of chaining up to the zuul module to decide on vhost_name it was chaining up to the httpd module
2015-03-16T14:29:04  <mordred> foobio: yup
2015-03-16T14:29:20  <foobio> makes total sense
2015-03-16T14:29:40  <foobio> as soon as it merges, i'll make sure apache is starting again
2015-03-16T14:31:03  *** ddieterly has joined #openstack-infra
2015-03-16T14:31:11  *** yamamoto has quit IRC
2015-03-16T14:31:16  *** tiswanso has quit IRC
2015-03-16T14:31:28  <dstufft> http://www.isg.rhul.ac.uk/tls/RC4mustdie.html (for anyone who get sinterested in things like proof of concept attacks against TLS ciphers ;) )
2015-03-16T14:32:04  *** otter768 has joined #openstack-infra
2015-03-16T14:32:38  *** amotoki has quit IRC
2015-03-16T14:32:49  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Fix up and document input parameters  https://review.openstack.org/160184
2015-03-16T14:32:49  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Add support for keystone projects  https://review.openstack.org/159941
2015-03-16T14:32:50  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Small fixes found working on ansible modules  https://review.openstack.org/162140
2015-03-16T14:34:13  *** tiswanso_ has joined #openstack-infra
2015-03-16T14:35:36  *** zz_jgrimm- is now known as jgrimm
2015-03-16T14:35:48  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Disable dogpile.cache if cache_interval is None  https://review.openstack.org/161963
2015-03-16T14:36:29  *** otter768 has quit IRC
2015-03-16T14:36:58  <BobBall> jbooboo, asselin: How should cross-project dependencies work?  Change 150267 (nova) depends on 160068 (devstack) so the 160068 change is added to my Nova queue.  It's this 160068 change which ends up not having a project so triggers the NoneType issue.
2015-03-16T14:37:37  *** wenlock has joined #openstack-infra
2015-03-16T14:38:03  <BobBall> jbooboo, asselin: It seems that gerrit.updateChange calls self.sched.getProject with the project name returned for the change, but that looks up the project from the layout - which in my case doesn't exist
2015-03-16T14:38:45  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Allow for passing cache class in as a parameter  https://review.openstack.org/162148
2015-03-16T14:39:53  *** ghostpl_ has quit IRC
2015-03-16T14:40:20  *** ghostpl_ has joined #openstack-infra
2015-03-16T14:40:36  *** stevemar has joined #openstack-infra
2015-03-16T14:43:24  *** ChuckC has quit IRC
2015-03-16T14:43:38  *** tiswanso_ has quit IRC
2015-03-16T14:44:00  *** tiswanso has joined #openstack-infra
2015-03-16T14:44:31  <openstackgerrit> Andrey Pavlov proposed openstack-infra/project-config: Change node param for ec2api rally job.  https://review.openstack.org/164717
2015-03-16T14:45:44  *** tiswanso_ has joined #openstack-infra
2015-03-16T14:49:10  <openstackgerrit> Merged openstack-infra/project-config: Add the create permission for stackforge/vmtp  https://review.openstack.org/164044
2015-03-16T14:52:20  <jbooboo> mordred, foobio, nibalizer: i think we should consider declaring rocketship alignment an anti-pattern.  it makes it look like far more lines are changed than actually are when reading a diff.
2015-03-16T14:52:28  <mordred> jbooboo: ++
2015-03-16T14:52:37  <mordred> jbooboo: is there an easy way to turn that off in puppet-lint?
2015-03-16T14:52:57  <foobio> agreed. i have yet to figure out why they went to so much trouble to add that to their linter
2015-03-16T14:53:06  <foobio> someone really has a whitespace fetish
2015-03-16T14:53:41  <jbooboo> To disable this check you can add --no-arrow_alignment-check to your puppet-lint command line.
2015-03-16T14:53:50  <foobio> being picky about indentation is one thing. being picky about inter-line columnar alignment is something else entirely
2015-03-16T14:53:50  <jbooboo> Alternatively, if you’re calling puppet-lint via the Rake task, you should insert the following line to your Rakefile.
2015-03-16T14:54:03  <jbooboo> PuppetLint.configuration.send('disable_arrow_alignment')
2015-03-16T14:54:45  <jbooboo> i think we do that second thing.
2015-03-16T14:54:55  <jbooboo> i'll propose a patch and we can collect opinions there
2015-03-16T14:56:11  <anteaya> having those aligned is really important in rails
2015-03-16T14:56:20  <jbooboo> anteaya: why's that?
2015-03-16T14:56:23  <anteaya> I'm guessing that is where the decision is based
2015-03-16T14:56:27  <anteaya> I have no idea
2015-03-16T14:56:32  <anteaya> it just is
2015-03-16T14:56:39  *** adalbas has quit IRC
2015-03-16T14:57:04  <anteaya> it is an are you one of us test
2015-03-16T14:57:13  <mordred> ah. one of those
2015-03-16T14:57:17  <anteaya> right
2015-03-16T14:57:21  <anteaya> every language has them
2015-03-16T14:57:25  <foobio> anteaya: does rails make actual execution decisions based on it, or is there just a large culture of people expecting it to be formatted that way?
2015-03-16T14:57:27  <mordred> well, I think we can safely say that we are not one of the rails community :)
2015-03-16T14:57:30  <anteaya> that is one of rails
2015-03-16T14:57:41  <anteaya> foobio: is there a difference?
2015-03-16T14:58:01  <anteaya> mordred: I think that is one of your 'are you one of us' tests
2015-03-16T14:58:10  <mordred> anteaya: rails does some crazy interesting magic based on inferring what you mean from naming choices
2015-03-16T14:58:17  <anteaya> yes
2015-03-16T14:58:25  <anteaya> convention over configuration
2015-03-16T14:58:26  <mordred> anteaya: I could imagine them having rails do somethign with rocketships - although I wouldn't know what
2015-03-16T14:58:27  <foobio> um. yes there is a difference between the interpreter making decisions based on column alignment and developers merely expecting to see the source formatted that way
2015-03-16T14:58:28  <mordred> :)
2015-03-16T14:58:31  <anteaya> and that is one of the conventions
2015-03-16T14:58:43  <mordred> nod. in this case, it seems more like an openstack hacking check
2015-03-16T14:59:06  *** tiswanso_ has quit IRC
2015-03-16T14:59:10  <anteaya> foobio: oh okay yes, so rails the code not rails the people
2015-03-16T14:59:25  <anteaya> well they don't tend to review code that isn't in the format they expect
2015-03-16T14:59:30  *** gordc has joined #openstack-infra
2015-03-16T14:59:46  <foobio> good thing our puppet modules aren't likely to get turned into rails webapps
2015-03-16T14:59:47  <anteaya> whether or not one can code something that rails will run, I expect it will
2015-03-16T14:59:51  <anteaya> but I don't know
2015-03-16T14:59:57  <anteaya> I'm best at learning culture
2015-03-16T15:00:11  *** tiswanso_ has joined #openstack-infra
2015-03-16T15:00:23  <anteaya> so I just aligned the things
2015-03-16T15:01:04  <dstufft> "i think we should consider declaring rocketship alignment an anti-pattern." <- That sentence made me giggle more than it had a right to.
2015-03-16T15:01:04  <mordred> totally. well, and we were doing our best to learn puppet culture
2015-03-16T15:01:09  <mgagne> Anyone knows how I could use JJB variables to dynamically generate a block of publishers (or anything other section) in a job? My first impression is that I would need to have an external templating engine to generate the job yaml instead
2015-03-16T15:01:36  *** patrickeast has joined #openstack-infra
2015-03-16T15:01:37  <anteaya> foobio: my understanding is that puppet is rails based
2015-03-16T15:01:41  <sdague> jbooboo: I will love you so much if you disable that, alignment anywhere after the left gutter drives me nuts
2015-03-16T15:02:01  <openstackgerrit> James E. Blair proposed openstack-infra/puppet-zuul: Disable arrow alignment puppet lint check  https://review.openstack.org/164725
2015-03-16T15:02:18  <foobio> anteaya: as far as i know puppet is just implemented in ruby. rails is a web application framework for ruby, right?
2015-03-16T15:02:24  <anteaya> it is
2015-03-16T15:03:04  <mordred> foobio: I believe puppetmaster is (for now) A rails app
2015-03-16T15:03:08  <sdague> foobio: at some point the puppet master was rails
2015-03-16T15:03:11  <jbooboo> okay ^ no rush on that change -- it's a moderately big policy change, so i want to make sure everyone has time to weigh in on it
2015-03-16T15:03:37  *** nelsnelson has quit IRC
2015-03-16T15:03:43  <foobio> ahh, yep the puppetmaster process
2015-03-16T15:04:00  *** _nadya_ has joined #openstack-infra
2015-03-16T15:04:10  <jbooboo> also, i apparently have awoken unable to construct english sentences correctly.  but i think it gets the point across.  :)
2015-03-16T15:04:29  <mordred> jbooboo: policy change +2 - patches to unalign - -1
2015-03-16T15:04:50  <jbooboo> mordred: oh interesting, why not?
2015-03-16T15:04:56  *** koolhead17 has quit IRC
2015-03-16T15:05:00  <mordred> jbooboo: because they are noise just as much as patches to align are noise
2015-03-16T15:05:33  <jbooboo> mordred: a good point.  however, at least for this, i thought it was important to see what we were getting ourselves into.  :)
2015-03-16T15:05:34  <EmilienM> if someone admin on openstack-dev mailing list could add [puppet] tag, we agreed on that today in our weekly meeting : http://eavesdrop.openstack.org/meetings/puppet_openstack/2015/puppet_openstack.2015-03-16-13.59.html
2015-03-16T15:05:40  <mordred> jbooboo: totally - I'm +2 on that patch
2015-03-16T15:05:57  <mordred> I just want us to be clear that we do not think it would be "helpful" for a bunch of people to get ATC credit by "fixing" our modules :)
2015-03-16T15:06:04  <jbooboo> mordred: if we come to consensus on that point, i'm also happy to reroll this with just the policy change.
2015-03-16T15:06:45  *** armax has joined #openstack-infra
2015-03-16T15:07:14  *** prad has joined #openstack-infra
2015-03-16T15:08:00  *** tonytan4ever has joined #openstack-infra
2015-03-16T15:08:08  <openstackgerrit> Merged openstack-infra/puppet-zuul: Pass vhost_name in to apache::vhost  https://review.openstack.org/164711
2015-03-16T15:12:09  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Sometimes clouds have strings for image  https://review.openstack.org/164691
2015-03-16T15:12:31  <mtreinish> jbooboo, pleia2 : so continuing the subunit2sql db migration from Fri. if the ansible timeout on puppet-apply is only 30min I'm pretty sure we'll never be able to run the migrations in puppet
2015-03-16T15:12:41  <mtreinish> should I remove that bit from the policy?
2015-03-16T15:12:56  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Handle image name for boot from volume  https://review.openstack.org/164691
2015-03-16T15:13:05  <openstackgerrit> Matthew Treinish proposed openstack-infra/project-config: Revert "Cap the subunit2sql version in the nodepool scripts"  https://review.openstack.org/164730
2015-03-16T15:13:22  <jbooboo> mordred: ^ you should pay attention to the subunit2sql convo too
2015-03-16T15:13:25  <mordred> mtreinish: the ansible timeout is settable
2015-03-16T15:13:45  <jbooboo> mordred: but we have "timeout 30 puppet agent ..."
2015-03-16T15:13:52  <mordred> jbooboo: yes - but the 30 is a parameter
2015-03-16T15:13:55  <jbooboo> right
2015-03-16T15:14:01  <jbooboo> mordred: global or per host?
2015-03-16T15:14:10  <openstackgerrit> Wayne Warren proposed openstack-infra/jenkins-job-builder: Add Parameterized Remote Trigger Plugin support.  https://review.openstack.org/150327
2015-03-16T15:14:11  <jbooboo> mtreinish: any idea how long it might take?
2015-03-16T15:14:20  <mordred> jbooboo: well ... it's per-host, but in an awkward way
2015-03-16T15:14:38  <mordred> jbooboo: I can make it less-awkward to do per-host - but I think that's a few patchsets down the line
2015-03-16T15:14:47  <mtreinish> jbooboo: long, I was assuming at least an hour, but I haven't run the migration on a db the size of the infra one
2015-03-16T15:14:51  <mordred> jbooboo: however, I _do_ think most of those patchsets are up for review
2015-03-16T15:14:51  <openstackgerrit> Brant Knudson proposed openstack/requirements: Update cryptography to >= 0.7  https://review.openstack.org/164731
2015-03-16T15:15:07  <mtreinish> it's doing an alter table on >65M rows I assume it will be really slow
2015-03-16T15:15:10  <mordred> jbooboo: I could put up one additional one that shows a POC for setting per-host timeouts
2015-03-16T15:15:14  <openstackgerrit> Brant Knudson proposed openstack/requirements: Update cryptography to >= 0.7  https://review.openstack.org/164731
2015-03-16T15:15:38  *** koolhead17 has joined #openstack-infra
2015-03-16T15:15:57  *** david-lyle_afk is now known as david-lyle
2015-03-16T15:16:00  <jbooboo> mordred: thing is, most of the time 30 is fine, it's just we have one event where we think 1 hour or more might be necessary
2015-03-16T15:16:07  <mordred> yeah
2015-03-16T15:16:11  <jbooboo> mtreinish: would it be safe to run the migration in the background?
2015-03-16T15:16:38  <mordred> jbooboo: perhaps a migration like this should be expressed as a one-off playbook rather than as part of teh state expression
2015-03-16T15:16:49  <mordred> jbooboo: I mean, we don't really have a model for that currently
2015-03-16T15:16:50  <mtreinish> jbooboo: it should be
2015-03-16T15:17:04  <mtreinish> jbooboo: but in the worst case we'd probably just lose the data from when the migration was running, not a big deal
2015-03-16T15:17:14  <mordred> jbooboo: ah - yeah - background is probably sane for this
2015-03-16T15:17:33  *** achanda has joined #openstack-infra
2015-03-16T15:17:57  <jbooboo> so maybe we background it for now, and we consider this requirements gathering for future changes?
2015-03-16T15:18:02  <mordred> ++
2015-03-16T15:18:21  *** dannywilson has joined #openstack-infra
2015-03-16T15:18:32  <mtreinish> jbooboo: yeah, that's fine
2015-03-16T15:18:38  <mordred> I would love to think of a better way to handle one-time maint tasks - I've never really be crazy about the idea of putting them in puppet, but also not crazy about them being "hey, admin, go run this script" tasks
2015-03-16T15:19:26  <mtreinish> mordred: heh, yeah that was the same tradeoff I had originally when I wrote the puppet for the subunit2sql stuff
2015-03-16T15:19:52  <mtreinish> it ended up being easy enough to trigger the migrations from inside puppet though
2015-03-16T15:19:58  <EmilienM> foobio: you mentionned t
2015-03-16T15:20:03  <EmilienM> it was manual, right?
2015-03-16T15:20:13  <EmilienM> foobio: the openstack-dev ML config
2015-03-16T15:20:43  *** bhunter71 has joined #openstack-infra
2015-03-16T15:20:47  *** xgerman has joined #openstack-infra
2015-03-16T15:21:33  <mtreinish> jbooboo: to manually run the migration it should just be 'subunit2sql-db-manage --config-file /etc/subunit2sql.conf upgrade head' on logstash.o.o, pleia2 checked on fri and everything was in place to do it
2015-03-16T15:21:50  *** thedodd has joined #openstack-infra
2015-03-16T15:22:09  <foobio> EmilienM: defining official mailing list subject tags? yes, it's a manual configuration applied via the mailman admin webui by whoever the admins are for a given mailing list
2015-03-16T15:22:14  <jbooboo> mtreinish: what user?
2015-03-16T15:22:52  <EmilienM> foobio: ok, I'll contact openstack-dev admins.
2015-03-16T15:22:55  <mtreinish> jbooboo: oh, I'm not sure it really matters, just any user that has read perms on the config file
2015-03-16T15:22:59  <jbooboo> mtreinish: i can run that now if you want to set up puppet to run the migration in the background next time
2015-03-16T15:23:16  <mtreinish> jbooboo: sure will do
2015-03-16T15:23:40  <openstackgerrit> Christian Berendt proposed openstack-infra/project-config: Add new project faafo to Stackforge  https://review.openstack.org/164668
2015-03-16T15:23:46  *** nelsnelson has joined #openstack-infra
2015-03-16T15:24:18  <foobio> EmilienM: according to http://lists.openstack.org/cgi-bin/mailman/listinfo/openstack-dev it's ttx and reed so you could try hitting one of them up in irc
2015-03-16T15:24:19  *** ashleighfarnham has joined #openstack-infra
2015-03-16T15:24:29  <mordred> dhellmann: what's the "right" way to check if something is a string/unicode that works in both 2 and 3?
2015-03-16T15:24:34  <EmilienM> foobio: I was sending an email to them :)
2015-03-16T15:25:30  <foobio> that works too i'm sure
2015-03-16T15:25:55  *** achanda has quit IRC
2015-03-16T15:26:13  <openstackgerrit> Cedric Brandily proposed openstack/requirements: Bump cliff up to 1.10.0  https://review.openstack.org/164733
2015-03-16T15:26:27  *** reed has joined #openstack-infra
2015-03-16T15:26:46  <openstackgerrit> Clark Boylan proposed openstack-infra/project-config: Upload cover/ to swift not coverage/  https://review.openstack.org/164734
2015-03-16T15:27:44  *** mpopow has joined #openstack-infra
2015-03-16T15:28:27  <dougwig> good morning infra, simple one, needs one more core, hopefully before it's third merge conflict.   combining two jobs into one node.  :-)  https://review.openstack.org/#/c/160915/
2015-03-16T15:28:46  *** mjturek1 has quit IRC
2015-03-16T15:29:26  *** mjturek1 has joined #openstack-infra
2015-03-16T15:29:28  <mordred> dougwig: I will always remove pylint references
2015-03-16T15:29:32  <openstackgerrit> Matthew Treinish proposed openstack-infra/puppet-subunit2sql: Run subunit2sql migrations in the background  https://review.openstack.org/164736
2015-03-16T15:29:41  <mtreinish> jbooboo: ^^^
2015-03-16T15:29:46  <openstackgerrit> Peter Hamilton proposed openstack/requirements: Update PyKMIP version in requirements  https://review.openstack.org/164449
2015-03-16T15:29:58  <mtreinish> assuming there isn't a magic puppet way to background something
2015-03-16T15:30:01  *** rm_work|away is now known as rm_work
2015-03-16T15:30:06  <dougwig> mordred: it's false annoyance rate does seem to be pretty high.
2015-03-16T15:33:02  *** markmcclain has joined #openstack-infra
2015-03-16T15:33:36  *** ajmiller has joined #openstack-infra
2015-03-16T15:33:46  <GheRivero> exit
2015-03-16T15:33:53  <jbooboo> yeah, most projects don't use it because of that
2015-03-16T15:36:20  *** HeOS has quit IRC
2015-03-16T15:36:20  <openstackgerrit> Clark Boylan proposed openstack-infra/elastic-recheck: Check for logs uploaded by swift  https://review.openstack.org/164742
2015-03-16T15:36:39  *** Longgeek_ has quit IRC
2015-03-16T15:36:40  <quantumfly> mtreinish: mriedem ^ should cleanup some of the results not ready messages in #openstack-qa that happened over the weekend
2015-03-16T15:37:08  *** HeOS has joined #openstack-infra
2015-03-16T15:38:07  <mriedem> quantumfly: thanks, +W
2015-03-16T15:39:01  *** dhritishikhar has joined #openstack-infra
2015-03-16T15:39:13  <mtreinish> oh, I'm too slow...
2015-03-16T15:42:07  <ashishb> Hi everyone, I have a quick query about getting a commit rerun through jenkins
2015-03-16T15:42:36  <openstackgerrit> Merged openstack-infra/project-config: new-project: stackforge/senlin  https://review.openstack.org/163292
2015-03-16T15:42:45  <openstackgerrit> Merged openstack-infra/project-config: neutron-*aas pylint jobs moving into pep8 job  https://review.openstack.org/160915
2015-03-16T15:43:00  <ashishb> ok, so here is the scenario I have: I submitted a patch and then there was some error in CI due to which it could not close the pep8 stuff on it
2015-03-16T15:43:30  <ashishb> now, in my patch there is no change, however, I want the jenkins to rerun it through it's tools on it
2015-03-16T15:43:38  <ashishb> is there a way to do that ..?
2015-03-16T15:43:55  *** ashleighfarnham has quit IRC
2015-03-16T15:44:15  *** ildikov has joined #openstack-infra
2015-03-16T15:46:40  <reed> was there a resolution that projects applying to 'big tent' should also get a topic on the -dev mailing list? (in other words, is there an agreement that new topics should be added to the mlist?)
2015-03-16T15:46:49  *** ZZelle_ has joined #openstack-infra
2015-03-16T15:47:05  <foobio> ashishb: leave a review comment starting with the word "recheck" (you can add whatever else you want after it)
2015-03-16T15:47:08  *** dhritishikhar has quit IRC
2015-03-16T15:47:53  *** _nadya_ has quit IRC
2015-03-16T15:47:55  <foobio> reed: i'm not aware of any resolution regarding that. i'd say it's up to the -dev mailing list admins as to whether they want to support such things
2015-03-16T15:48:28  <jbooboo> reed: i think topics for the tc require notification to -dev a week in advance, so i think that's probably included
2015-03-16T15:48:30  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Handle image name for boot from volume  https://review.openstack.org/164691
2015-03-16T15:48:38  <reed> foobio, I wouldn't want that responsibility, frankly: traffic is already huge, I think we should have a discussion
2015-03-16T15:48:42  *** achanda has joined #openstack-infra
2015-03-16T15:49:14  <jbooboo> reed: i misunderstood
2015-03-16T15:49:16  <reed> jbooboo, does that mean that first the project needs to apply to the TC and then the topic gets created?
2015-03-16T15:49:30  *** wuhg has quit IRC
2015-03-16T15:49:30  <mordred> jbooboo, foobio, quantumfly: could you please review the patch above?  ^^ there is a bug in the wild that ansible upstream uncovered and I'd like to get that fix out the door
2015-03-16T15:49:43  <mordred> jbooboo, foobio, quantumfly: (the patch has been tested as fixing the issue for the reporter)
2015-03-16T15:49:47  <jbooboo> reed: you meant mailman topic, not, like, discussing the application on the list :)
2015-03-16T15:49:59  <reed> jbooboo, yes, mailman :)
2015-03-16T15:50:12  <jbooboo> reed: i don't recall that being discussed
2015-03-16T15:50:17  *** nilasae has joined #openstack-infra
2015-03-16T15:50:27  *** mpopow has quit IRC
2015-03-16T15:50:59  <reed> I'm scared to start another potentially long discussion on -dev about this though :)
2015-03-16T15:51:10  <foobio> mordred: btw your fix to puppet-zuul to explicitly pass vhost_name definitely worked and the zuul status is available again
2015-03-16T15:51:21  <mordred> foobio: woot
2015-03-16T15:51:30  <quantumfly> mordred I think openstack can return utf-8 on any query
2015-03-16T15:51:34  <dhellmann> sdague, ttx: can we prioritize capping the oslo libs early this week, so we can sync the results into projects before their freeze? https://review.openstack.org/#/c/162656/
2015-03-16T15:51:52  *** kaisers has joined #openstack-infra
2015-03-16T15:51:52  <mordred> quantumfly: the issue here is that usually server.image is a dict-like object
2015-03-16T15:51:54  <jbooboo> reed: i agree that traffic is huge, however, it's huge at least partly because stackforge projects already use the list.  i'm not sure that big-tent will increase the list traffic that much (though it may increase the desire for more official topics)
2015-03-16T15:51:55  *** tqtran has joined #openstack-infra
2015-03-16T15:51:57  <mordred> quantumfly: but sometimes it's string-like
2015-03-16T15:52:00  <mordred> quantumfly: apparently
2015-03-16T15:52:34  <quantumfly> oh huh
2015-03-16T15:52:38  <sdague> dhellmann: that forces a bunch of bumps as well?
2015-03-16T15:52:42  <foobio> mordred: any reason not to just always recast it? simplifies the logic there (unless i'm misreading)
2015-03-16T15:52:48  <ctlaugh> kaisers: sorry - I didn't see you in my nic list earlier
2015-03-16T15:52:49  *** dhritishikhar has joined #openstack-infra
2015-03-16T15:52:49  <ashishb> foobio: thanks for the "recheck" tip
2015-03-16T15:52:52  <ashishb> :)
2015-03-16T15:52:53  <reed> jbooboo, makes sense, I'll talk to ttx about that too (the other list admin)
2015-03-16T15:52:55  <mordred> foobio: yes - I'm looking for "not a dict"
2015-03-16T15:52:57  <kaisers> ctlaugh: np
2015-03-16T15:52:59  <sdague> I thought we were going to do actual caps and not trust the semver thing
2015-03-16T15:53:00  <ttx> jbooboo: actually it may reduce traffic, since at some point stackforge projects would move to their own list
2015-03-16T15:53:00  <mordred> foobio: it has nothing to do with unicode
2015-03-16T15:53:03  <dhellmann> sdague: yes, so that the minimum is the stable version being supported and matches what we're actually testing in the gate right now
2015-03-16T15:53:22  *** Qiming has quit IRC
2015-03-16T15:53:24  <ttx> (once all the "openstack" ones actually moved)
2015-03-16T15:53:25  <mordred> foobio: but if x = dict(), then unicode(x) != x
2015-03-16T15:53:26  <foobio> mordred: aha, got it
2015-03-16T15:53:33  *** gokrokve_ has quit IRC
2015-03-16T15:53:34  *** ashishb has quit IRC
2015-03-16T15:53:49  <mordred> foobio: it's, admittedly, a sad hack - however, there does not seem to be a solid way to test for that that it's valid in python2 and python3
2015-03-16T15:53:50  <foobio> mordred: yeah at first i thought you were saying sometimes it was unicode and sometimes it was an encoded string
2015-03-16T15:54:00  <foobio> so, wow that's some bad api behavior
2015-03-16T15:54:01  <mordred> foobio: nope. should I update the comment to be better?
2015-03-16T15:54:07  <mordred> foobio: and YES it is
2015-03-16T15:54:14  <ctlaugh> kaisers: so, do you have any information you could share on sos-ci, how it's structured, how well it's working, etc?  I am currently trying to setup the os-ext stuff, but was curious about what else others are using and how well it's working.
2015-03-16T15:54:32  <ttx> dhellmann: any reason debtcollector is using >= and not ~= ?
2015-03-16T15:55:05  <foobio> mordred: better comment wouldn't hurt, but my brain jumping to encoding-related conclusions isn't entirely your fault. more like a python knee-jerk reaction
2015-03-16T15:55:17  <dhellmann> ttx: oops, I'll fix that
2015-03-16T15:55:26  <ttx> dhellmann: triggered my inconsistency radar
2015-03-16T15:55:49  <kaisers> ctlaugh: I'm not the author but the short overview is: A bunch of python scripts that use ansible scripts. Python stuff analyses gerrit stream and triggers the ansible scripts that set up devstacks, run the tests, fetch the logs and upload them to a log server. Python scripts then feedback to gerrit.
2015-03-16T15:56:08  *** harlowja_at_home has joined #openstack-infra
2015-03-16T15:56:11  <openstackgerrit> Doug Hellmann proposed openstack/requirements: Cap Oslo libraries for kilo  https://review.openstack.org/162656
2015-03-16T15:56:26  <openstackgerrit> Swaminathan Vasudevan proposed openstack-infra/project-config: Add Neutron DVR aiopcpu job for multi-node testing  https://review.openstack.org/158415
2015-03-16T15:56:29  <dhellmann> ttx: yeah, that was just me being sloppy when I updated that line after the first patch
2015-03-16T15:57:34  <sdague> honestly, it seems odd to make this more restrictive than it needs to be, but I don't have the bandwidth this week to think through the implications, as I'm trying to address a couple of nova issues pre freeze
2015-03-16T15:57:45  <sdague> so if you think that's what we want, so be it
2015-03-16T15:57:49  *** ashleighfarnham has joined #openstack-infra
2015-03-16T15:57:59  *** gokrokve has joined #openstack-infra
2015-03-16T15:58:20  <ctlaugh> kaisers: any issues scaling?
2015-03-16T15:58:54  <foobio> dhellmann: sdague: it's worth noting that ~= only works in very recent pip releases. not sure if that matters in this case, but putting it out there
2015-03-16T15:59:02  <kaisers> ctlaugh: it's not completely running so far, and i don't plan to scale too far. Therefore i did not test too much in that direction
2015-03-16T15:59:11  *** gyee has joined #openstack-infra
2015-03-16T15:59:25  <dhellmann> foobio: I'm OK with assuming current tools as long as that's what we're using in our gate.
2015-03-16T15:59:27  *** tnovacik_ has quit IRC
2015-03-16T15:59:34  <foobio> dhellmann: fine by me then
2015-03-16T15:59:51  *** BharatK has joined #openstack-infra
2015-03-16T15:59:52  <dhellmann> sdague: not sure what you mean there by "more restrictive"?
2015-03-16T15:59:52  <sdague> dhellmann: I'm +2, I think it makes sense for jogo to weigh in before an approv
2015-03-16T16:00:05  <sdague> dhellmann: by uplifting the mins as well
2015-03-16T16:00:08  <dhellmann> sdague: sure, he was +1 on an earlier version but I added some updates
2015-03-16T16:01:30  <dhellmann> sdague: ok, we have some apps relying on more recent versions of libs than the mins said otherwise, so I thought raising them all would make sense. we don't do that for every lib release, but maybe we should when we add features.
2015-03-16T16:01:37  *** marun has quit IRC
2015-03-16T16:01:59  <sdague> yeh, there are trade offs all around
2015-03-16T16:02:02  *** sarob has joined #openstack-infra
2015-03-16T16:02:04  *** fdegir has quit IRC
2015-03-16T16:02:10  *** mpopow has joined #openstack-infra
2015-03-16T16:02:18  <ctlaugh> kaisers: Is this it?  https://github.com/j-griffith/sos-ci  Any tricks to configuring it?  The documentation there in github is a bit sparse.
2015-03-16T16:02:22  *** yfried_ has quit IRC
2015-03-16T16:02:54  <openstackgerrit> Merged openstack-infra/puppet-zuul: Disable arrow alignment puppet lint check  https://review.openstack.org/164725
2015-03-16T16:02:58  <kaisers> ctlaugh: yeah, that's it. I did some small mods (github/casusbelli/sos-ci), primarily for loggin
2015-03-16T16:03:05  <kaisers> s/loggin/logging/
2015-03-16T16:03:45  *** carl_baldwin has joined #openstack-infra
2015-03-16T16:03:54  <quantumfly> sdague: do you know what I need to do to get nova to use https://review.openstack.org/#/c/163514/ ?
2015-03-16T16:04:11  <quantumfly> sdague: I am not sure where libvirt/qemu/nova want that cpu definition to go
2015-03-16T16:04:34  *** achanda has quit IRC
2015-03-16T16:04:40  <dstufft> There's a new bandersnatch out, you'll want to update to it at somepoint. It's not urgent though. If you don't update to it before I get around to making some archiectural changes to PyPI (not on my immediate TODO list, but short term) you'll stop syncing
2015-03-16T16:05:23  *** skolekonov has quit IRC
2015-03-16T16:05:38  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Handle image name for boot from volume  https://review.openstack.org/164691
2015-03-16T16:05:39  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Clean up race condition in functional tests  https://review.openstack.org/164761
2015-03-16T16:05:55  <asselin> BobBall, interesting find
2015-03-16T16:06:15  <mordred> quantumfly: I believe that race condition patch backs up what you were saying about that test being racey :)
2015-03-16T16:06:34  <openstackgerrit> Merged openstack-infra/project-config: Add stackforge/puppet-setproxy  https://review.openstack.org/164197
2015-03-16T16:06:43  <ctlaugh> kaisers: thank you - I'll take a look at your fork
2015-03-16T16:06:46  *** marun has joined #openstack-infra
2015-03-16T16:06:50  <zaro> morning
2015-03-16T16:06:56  <quantumfly> dstufft: thank you for the heads up
2015-03-16T16:07:10  <sdague> quantumfly: you have to modify /usr/share/libvirt/cpu_map.xml
2015-03-16T16:07:29  <sdague> so that's going to be an inline edit of that file, the way it's nested, you can't just append
2015-03-16T16:07:43  <kaisers> ctlaugh: welcome
2015-03-16T16:07:43  <sdague> check out your local copy of it
2015-03-16T16:08:02  <quantumfly> sdague: thanks that is what I needed
2015-03-16T16:08:06  *** rfolco has quit IRC
2015-03-16T16:08:15  *** ZZelle_ has quit IRC
2015-03-16T16:08:23  *** rfolco has joined #openstack-infra
2015-03-16T16:08:24  <quantumfly> jbooboo: just hit https://urllib3.readthedocs.org/en/latest/security.html#insecureplatformwarning after upgrading gertty for right aligned line numbers
2015-03-16T16:09:12  <quantumfly> that error message bugs me too. They say things will fail when they should succeed because of missing features. Isn't that failing gracefully when it comes to security? how is that a warning
2015-03-16T16:09:15  *** xgerman has quit IRC
2015-03-16T16:09:16  <openstackgerrit> Merged openstack-infra/system-config: Added Valid OAuth client configuration to storyboard manifest.  https://review.openstack.org/158434
2015-03-16T16:09:20  <sdague> quantumfly: you might need to restart libvirt after changing that file as well, I don't know
2015-03-16T16:09:25  <quantumfly> "I failed safely for you turn on all the alarms!"
2015-03-16T16:09:41  <quantumfly> sdague: ok, we may need to bake some of this into devstack since it installs libvirt
2015-03-16T16:09:56  <openstackgerrit> Merged openstack-infra/system-config: Hostname and CORS domains are now configurable.  https://review.openstack.org/158474
2015-03-16T16:10:31  <openstackgerrit> Swaminathan Vasudevan proposed openstack-infra/devstack-gate: Configure sub-nodes for Neutron DVR aiopcpu  https://review.openstack.org/158525
2015-03-16T16:10:49  <foobio> quantumfly: it's a passive-aggressive way of prodding application developers to update their use of your library by annoying their users
2015-03-16T16:10:55  <sdague> quantumfly: sure
2015-03-16T16:11:18  <sdague> I'd say hack it into d-g for now to see if you can get anything working, then we can pull it back into devstack once we know what it needs to be
2015-03-16T16:11:29  <mordred> foobio: now, if only rax would update their ssl certs so that requests warning about deprecated features in certs wouldn't annoy me
2015-03-16T16:11:45  *** openstackgerrit has quit IRC
2015-03-16T16:11:56  <quantumfly> sdague: ok
2015-03-16T16:12:01  *** openstackgerrit has joined #openstack-infra
2015-03-16T16:12:11  *** dhritishikhar has quit IRC
2015-03-16T16:12:36  <quantumfly> foobio: did you end up figuring out what was wrong with dfw over the weekend?
2015-03-16T16:12:46  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Fix up and document input parameters  https://review.openstack.org/160184
2015-03-16T16:13:09  <quantumfly> anyways gertty is really almost unuseable with this warning popping up constantly. I am going to try using their pyopenssl fix
2015-03-16T16:13:16  <quantumfly> will push that up if I get it working
2015-03-16T16:13:41  <foobio> quantumfly: it cleared up on its own
2015-03-16T16:14:27  <foobio> i didn't look deeper into it
2015-03-16T16:14:56  *** marun_ has joined #openstack-infra
2015-03-16T16:15:36  <foobio> quantumfly: but really there wasn't much to look into. we were calling nova boot and it was taking an indefinite amount of time for it to return an instance in that region. no sign of stray alien nodes or anything, nothing mentioned on the rax status page for dfw either
2015-03-16T16:15:36  <BobBall> asselin, jbooboo: For now I've just assumed the same as the official layout.yaml... every project must be defined.  I don't think that's a long-term workable solution though as there is constant change in the projects defined in the official layout.yaml
2015-03-16T16:15:51  *** marun has quit IRC
2015-03-16T16:16:13  *** amotoki has joined #openstack-infra
2015-03-16T16:16:15  <foobio> quantumfly: and it was across all node types, so not a bad image or anything
2015-03-16T16:16:40  <mestery> Infra folks: https://review.openstack.org/#/c/164678/ this is the fix to unblock the grenade job failure which is currently blocking all neutron patches, if there is an oppurtunity to get it promoted, that would be great!
2015-03-16T16:16:43  <mestery> EmilienM: ^^^^
2015-03-16T16:16:52  *** claudiub_ has quit IRC
2015-03-16T16:16:55  <foobio> quantumfly: if it persisted i was going to open a trouble ticket with them
2015-03-16T16:16:56  *** radez_g0n3 is now known as radez
2015-03-16T16:17:03  *** mpavone has quit IRC
2015-03-16T16:17:08  *** patrickeast has quit IRC
2015-03-16T16:17:22  <openstackgerrit> Merged openstack-infra/elastic-recheck: Check for logs uploaded by swift  https://review.openstack.org/164742
2015-03-16T16:17:32  *** btran has joined #openstack-infra
2015-03-16T16:17:47  <quantumfly> foobio: thanks
2015-03-16T16:18:11  *** mpopow has quit IRC
2015-03-16T16:20:03  <openstackgerrit> Swaminathan Vasudevan proposed openstack-infra/devstack-gate: Configure sub-nodes for Neutron DVR aiopcpu  https://review.openstack.org/158525
2015-03-16T16:20:10  <mordred> BobBall, asselin: I may be missing context on the problem ... although it's possible that jbooboo's zuulv3 work might be helpful (as in, it's possible that we're in violent agreement on long-term not being workable)
2015-03-16T16:20:25  *** marun_ has quit IRC
2015-03-16T16:20:39  <asselin> BobBall, looking at the code, there's quite a few test cases....shouldn't be too hard to add a new one that reproduces the issue.
2015-03-16T16:21:01  *** amotoki has quit IRC
2015-03-16T16:23:40  *** mpopow has joined #openstack-infra
2015-03-16T16:23:51  *** _nadya_ has joined #openstack-infra
2015-03-16T16:23:58  <anteaya> quantumfly dstufft thank you I have added it to tomorrow's meeting agenda: https://wiki.openstack.org/wiki/Meetings/InfraTeamMeeting#Agenda_for_next_meeting
2015-03-16T16:24:29  *** scheuran has quit IRC
2015-03-16T16:26:50  <dstufft> quantumfly: fwiw that warning isn't "I failed when it was dangerous to do so" that warning is "I failed when I otherwise could have successfully and safely not failed, but the SSL library isn't good enough"
2015-03-16T16:26:51  <pleia2> good morning
2015-03-16T16:27:16  <dstufft> like when requests tried to remove the 1024 bit roots (which are not exactly safe to keep around), but couldn't because OpenSSL is bad
2015-03-16T16:27:32  <quantumfly> dstufft: sure but it still failed
2015-03-16T16:27:33  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Handle image name for boot from volume  https://review.openstack.org/164691
2015-03-16T16:27:34  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Clean up race condition in functional tests  https://review.openstack.org/164761
2015-03-16T16:27:34  <dstufft> that broke a ton of people, that can be fixed on platforms that don't get that error
2015-03-16T16:27:49  <mordred> quantumfly: good point - that was actually two different approaches to cleaning it up combined into one :)
2015-03-16T16:27:55  <quantumfly> dstufft: seems like if you fail gracefully then who cares
2015-03-16T16:28:10  <anteaya> pleia2: morning
2015-03-16T16:28:31  <quantumfly> dstufft: instead not only do I have to update my application but I have to update it in a way that accomodates the embedded version of urllib3 in requests :/
2015-03-16T16:29:14  <quantumfly> its a terrible interface for both the user and the dev
2015-03-16T16:29:18  *** marun_ has joined #openstack-infra
2015-03-16T16:29:34  <dstufft> quantumfly: so you'd rather it just flat out broke without any warning?
2015-03-16T16:29:50  *** yamamoto has joined #openstack-infra
2015-03-16T16:30:05  <quantumfly> dstufft: if it can do so gracefully then yes. aiui this behavior has not changed during the lifetime of python2
2015-03-16T16:30:05  *** dboik_ has joined #openstack-infra
2015-03-16T16:30:11  <quantumfly> dstufft: eg its always broken this way
2015-03-16T16:30:31  <EmilienM> is it possible to promote 164678 ?
2015-03-16T16:30:33  <dstufft> What behavior hasn't changed?
2015-03-16T16:30:39  <quantumfly> dstufft: the failing
2015-03-16T16:30:55  <quantumfly> because ssl stdlib isn't good enough
2015-03-16T16:31:05  <dstufft> the stdlib ssl is good enough in newer versions of Python
2015-03-16T16:31:10  <dstufft> 2.7.9, 3.2+
2015-03-16T16:31:10  <quantumfly> as an alternative urllib3 could hard depend on pyOpenSSL and just make this work
2015-03-16T16:31:12  *** baoli has quit IRC
2015-03-16T16:31:22  <dstufft> installing pyopenssl is a worka round for older versions of Python
2015-03-16T16:31:27  *** arxcruz has quit IRC
2015-03-16T16:31:48  *** salv-orlando has quit IRC
2015-03-16T16:32:31  <dstufft> in particular, it looks to see if the Python version has a SSLContext object
2015-03-16T16:32:39  *** tiswanso_ has quit IRC
2015-03-16T16:32:53  *** baoli_ has joined #openstack-infra
2015-03-16T16:32:54  *** otter768 has joined #openstack-infra
2015-03-16T16:33:02  *** tiswanso has joined #openstack-infra
2015-03-16T16:33:37  *** dboik has quit IRC
2015-03-16T16:33:38  *** hashar has quit IRC
2015-03-16T16:34:09  *** gokrokve has quit IRC
2015-03-16T16:34:14  <quantumfly> dstufft: ok so the most recent version of python2 is fixed which is included in neither ubuntu trusty or rhel7
2015-03-16T16:34:26  <quantumfly> though knowing rhel theymay have backported this stdlib fix to their python2.7.5
2015-03-16T16:34:52  <sdague> quantumfly: which would have been unfortunately, because I believe it was literally the only functional change in 2.7.9
2015-03-16T16:35:05  *** marun_ has quit IRC
2015-03-16T16:35:11  <sdague> it was released to actually put a non broken ssl implementation out there
2015-03-16T16:35:23  <dstufft> quantumfly: I think Trusty *might* be backporting 2.7.9 fixes, Debian Jessie has 2.7.9 I know that
2015-03-16T16:35:42  <quantumfly> isn't wheezy the current release?
2015-03-16T16:35:43  <sdague> https://www.python.org/downloads/release/python-279/
2015-03-16T16:36:04  *** gokrokve has joined #openstack-infra
2015-03-16T16:36:04  <quantumfly> speaking of ubuntu backports, foobio any idea where we are with python3.4 stuff?
2015-03-16T16:36:29  <dstufft> quantumfly: Wheezy is current yes, Jessie is testing
2015-03-16T16:36:45  *** sandywalsh has quit IRC
2015-03-16T16:37:14  *** dhritishikhar has joined #openstack-infra
2015-03-16T16:37:19  *** otter768 has quit IRC
2015-03-16T16:37:55  <foobio> quantumfly: not a peep. i think ubuntu is abandonware
2015-03-16T16:37:59  *** tsg has joined #openstack-infra
2015-03-16T16:39:09  <foobio> which is why i'm focusing on being able to spin u debian jessie servers with nodepool so we can do our py3k testing there
2015-03-16T16:39:16  <foobio> er, spin up
2015-03-16T16:39:52  *** funzo has quit IRC
2015-03-16T16:40:42  *** hdd has joined #openstack-infra
2015-03-16T16:40:44  <foobio> speaking of which, this is odd...
2015-03-16T16:40:52  <foobio> https://review.openstack.org/164444
2015-03-16T16:41:11  <openstackgerrit> Clark Boylan proposed stackforge/gertty: Fix urllib3 InsecurePlatformWarning  https://review.openstack.org/164770
2015-03-16T16:41:15  <quantumfly> jbooboo: ^
2015-03-16T16:41:18  <foobio> you can clearly see the only comment i've left on that review is setting Workflow-1
2015-03-16T16:41:28  <foobio> except gerrit isn't showing it as wip at all
2015-03-16T16:41:50  <foobio> oh, d'oh!
2015-03-16T16:41:52  <foobio> nevermind
2015-03-16T16:42:01  <foobio> my check experimental comment unset wip
2015-03-16T16:42:05  * foobio sighs
2015-03-16T16:42:09  *** funzo has joined #openstack-infra
2015-03-16T16:42:18  <foobio> operator error
2015-03-16T16:42:41  <quantumfly> ok :)
2015-03-16T16:42:42  <jbooboo> quantumfly: Id6f46e85168bba599f8380b6613d8835d65661c3 is also relevant
2015-03-16T16:43:12  *** carl_baldwin has quit IRC
2015-03-16T16:44:54  <anteaya> quantumfly: for https://review.openstack.org/#/q/topic:enable_swift+status:open,n,z should your change go in before jhesketh's?
2015-03-16T16:45:33  <openstackgerrit> Clark Boylan proposed openstack-infra/puppet-etherpad_lite: Don't host robots.txt from etherpad repo install  https://review.openstack.org/164312
2015-03-16T16:46:27  <quantumfly> anteaya: either order should be fine. my change addresses a small problem with the change that merged late last week
2015-03-16T16:47:17  *** mwagner_lap has quit IRC
2015-03-16T16:47:38  *** tnovacik_ has joined #openstack-infra
2015-03-16T16:48:20  *** marun_ has joined #openstack-infra
2015-03-16T16:49:03  <anteaya> yes I see
2015-03-16T16:49:09  <quantumfly> jbooboo: thanks, I guess its a decision about what pain is worse. Broken ssl or needing to havea bunch of dev header packages installed for gertty on ubuntu trusty, debian wheezy, and rhel7
2015-03-16T16:49:17  <jbooboo> quantumfly: wow.  your change is making me very sad :(
2015-03-16T16:49:22  <anteaya> just wondered if I should wait on that before approving jhesketh's
2015-03-16T16:50:06  <anteaya> I approved 156522, yours needs another reviewer
2015-03-16T16:50:13  <openstackgerrit> Jeremy Stanley proposed openstack-infra/project-config: Rename experimental nova py27 to run on dsvm nodes  https://review.openstack.org/164777
2015-03-16T16:50:17  <quantumfly> jbooboo: ya :/ good news is the line number alignment change is working well
2015-03-16T16:52:03  *** cdent has quit IRC
2015-03-16T16:52:43  *** markus_z has quit IRC
2015-03-16T16:52:43  <anteaya> zaro: I see nothing in https://review.openstack.org/#/q/status:open+topic:Gerrit-2.9-upgrade,n,z do you have nothing for review?
2015-03-16T16:53:05  <jbooboo> anteaya: i think we changed that to gerrit-upgrade
2015-03-16T16:53:22  <anteaya> ah was going by the last week's agenda
2015-03-16T16:53:24  <anteaya> thanks
2015-03-16T16:53:56  <anteaya> yes https://review.openstack.org/#/q/status:open+topic:gerrit-upgrade,n,z has results
2015-03-16T16:53:58  <anteaya> thanks jbooboo
2015-03-16T16:54:05  *** tonytan4ever has quit IRC
2015-03-16T16:54:20  *** openstackgerrit has quit IRC
2015-03-16T16:54:46  *** openstackgerrit has joined #openstack-infra
2015-03-16T16:54:52  *** dhritishikhar has quit IRC
2015-03-16T16:56:56  *** nilasae has quit IRC
2015-03-16T16:57:39  <zaro> quantumfly: i think recursive file uploads to swift don't work, are you aware?
2015-03-16T16:58:10  <openstackgerrit> Merged openstack-infra/project-config: Upload python test results to swift  https://review.openstack.org/156522
2015-03-16T16:58:22  <quantumfly> zaro: they should work, do you have an example?
2015-03-16T16:58:44  <quantumfly> zaro: we had tested them with devstack-gate's specific tempest tests and it appears to do the correct thing for that job
2015-03-16T16:59:18  <zaro> http://logs.openstack.org/68/163068/4/check/python-jenkins-coverage/a1cded6/
2015-03-16T16:59:28  <openstackgerrit> Merged openstack-infra/project-config: Upload cover/ to swift not coverage/  https://review.openstack.org/164734
2015-03-16T16:59:43  <jbooboo> zaro: ^ i think that change will fix it :)
2015-03-16T16:59:43  <zaro> quantumfly: the coverage results didn't get uploaded.
2015-03-16T16:59:44  <quantumfly> zaro: see ^
2015-03-16T16:59:44  *** mtanino has joined #openstack-infra
2015-03-16T17:00:01  *** harlowja_at_home has quit IRC
2015-03-16T17:00:04  <zaro> ohh thanks.
2015-03-16T17:00:13  <jbooboo> zuul has good timing today
2015-03-16T17:00:17  *** yamahata has quit IRC
2015-03-16T17:00:40  <anteaya> zaro: I can't verify the tarball in 155463: http://tarballs.openstack.org/ci/gerrit/ where will it come from?
2015-03-16T17:00:50  <openstackgerrit> Merged openstack-infra/release-tools: Add script for creating stable releases of libraries  https://review.openstack.org/163880
2015-03-16T17:01:13  *** Ryan_Lane has joined #openstack-infra
2015-03-16T17:01:22  <openstackgerrit> Merged openstack-infra/jenkins-job-builder: Add FindBugs plugin support  https://review.openstack.org/153911
2015-03-16T17:02:17  *** dtantsur is now known as dtantsur|afk
2015-03-16T17:02:48  *** yfried_ has joined #openstack-infra
2015-03-16T17:04:14  *** ivar-lazzaro has joined #openstack-infra
2015-03-16T17:04:37  *** tiswanso has quit IRC
2015-03-16T17:05:00  *** jlanoux has quit IRC
2015-03-16T17:05:03  <quantumfly> mordred: https://jenkins07.openstack.org/job/gate-shade-pep8/56/console failed due to import issues
2015-03-16T17:05:12  <quantumfly> jbooboo: ^ is interesting because it hits the same warning as gertty
2015-03-16T17:05:40  *** marun_ has quit IRC
2015-03-16T17:05:42  <mordred> quantumfly: yup. I actually already pushed a change to the problem patch - it's a depends-on patch though, so it doesn't re-trigger the dependent job
2015-03-16T17:06:08  <mordred> quantumfly: I'm just going to wait until the depends-on patch lands and then re-kick that stack
2015-03-16T17:06:11  <pleia2> so this merged on Thursday https://review.openstack.org/#/c/161078/ but our live http://docs.openstack.org/infra/manual/developers.html hasn't updated, I'm not sure how to figure out what went on here
2015-03-16T17:06:13  <mordred> just in case there is somethign else
2015-03-16T17:06:25  <quantumfly> mordred: why are you using depends on there? they are in the same repo
2015-03-16T17:06:32  *** dboik_ has quit IRC
2015-03-16T17:06:37  <jbooboo> pleia2: it's possible that the post job was lost when i restarted zuul
2015-03-16T17:06:41  <mordred> quantumfly: yeah - it was originally for expediency - since I could just add one in the web ui while I was looking at it
2015-03-16T17:06:48  <mordred> quantumfly: instead of rebasing everythign together
2015-03-16T17:06:49  <zaro> anteaya: you should -1 that.  i was expecting a gerrit build to land into tarballs, but i don't see it.
2015-03-16T17:06:51  <mordred> quantumfly: I will not do that again
2015-03-16T17:06:56  <pleia2> jbooboo: aha, could be
2015-03-16T17:07:04  <jbooboo> pleia2: but we can find out... gimme a sec
2015-03-16T17:07:11  *** tiswanso_ has joined #openstack-infra
2015-03-16T17:07:36  *** salv-orlando has joined #openstack-infra
2015-03-16T17:07:50  <anteaya> zaro: I will do so
2015-03-16T17:08:05  *** dmorita has joined #openstack-infra
2015-03-16T17:08:38  <anteaya> zaro: thanks
2015-03-16T17:08:53  *** baoli_ has quit IRC
2015-03-16T17:09:15  <jbooboo> pleia2: post jobs run on the ref that gerrit pushes, which is _either_ the commit itself, or the merge commit if there is one
2015-03-16T17:09:16  *** marun_ has joined #openstack-infra
2015-03-16T17:09:20  *** dboik has joined #openstack-infra
2015-03-16T17:09:35  <pleia2> ok
2015-03-16T17:09:43  <jbooboo> pleia2: so if we look in git log for that repo, the previous commit it would have run on is this:
2015-03-16T17:09:43  <quantumfly> and with tags in the release pipeline its the ref of the tag itself not the ref of the commit the tag is applied to
2015-03-16T17:09:51  <jbooboo> pleia2: commit c707aefd4ffd0bf4fbc4c3518b5cab3334dbb082
2015-03-16T17:09:56  <jbooboo> pleia2:     Merge "Add reference to IRC services document"
2015-03-16T17:09:57  <quantumfly> `git show-ref` is handy for tags
2015-03-16T17:10:16  <jbooboo> pleia2: you can construct the log url from that like this: http://logs.openstack.org/c7/c707aefd4ffd0bf4fbc4c3518b5cab3334dbb082/
2015-03-16T17:10:34  <jbooboo> pleia2: (note the c7/ directory, which is the first 2 chars of the commit hash)
2015-03-16T17:11:03  *** baoli has joined #openstack-infra
2015-03-16T17:11:10  <pleia2> gotcha
2015-03-16T17:11:15  *** gokrokve has quit IRC
2015-03-16T17:11:15  <jbooboo> pleia2: so if you follow that down, that's the log from the last successful post job
2015-03-16T17:11:24  <jbooboo> pleia2: http://logs.openstack.org/6b/6b83fcfe04beacc1ed17c48e939309a8a531779e would be the one for the change in question
2015-03-16T17:11:31  <jbooboo> pleia2: but does not exist, so that confirms it didn't run
2015-03-16T17:11:34  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Fix up and document input parameters  https://review.openstack.org/160184
2015-03-16T17:11:35  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Add support for keystone projects  https://review.openstack.org/159941
2015-03-16T17:11:35  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Small fixes found working on ansible modules  https://review.openstack.org/162140
2015-03-16T17:11:46  <pleia2> jbooboo: ah yes, was just plugging that in
2015-03-16T17:11:48  <jbooboo> pleia2: we could check timestamps, but it seems quite reasonable it was lost in my zuul restart
2015-03-16T17:11:54  *** mpopow has quit IRC
2015-03-16T17:12:05  <jbooboo> pleia2: we could just wait for the next change to merge, or we could trigger the job manually
2015-03-16T17:12:16  <jbooboo> pleia2: i reckon we ought to do the latter as a training exercise :)
2015-03-16T17:12:17  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Allow for passing cache class in as a parameter  https://review.openstack.org/162148
2015-03-16T17:12:18  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Disable dogpile.cache if cache_interval is None  https://review.openstack.org/161963
2015-03-16T17:12:32  <mordred> quantumfly: fixed it in the git graph
2015-03-16T17:12:35  <jbooboo> i will have to remember how to do that first
2015-03-16T17:12:43  <pleia2> hehe
2015-03-16T17:13:03  <pleia2> it is a good training exercise, docs usually don't break all of infra
2015-03-16T17:13:33  <jbooboo> pleia2: on zuul.openstack.org: /opt/zuul/tools/trigger-job.py --help
2015-03-16T17:13:34  <pleia2> I only noticed because fifieldt assigned a bug to -infra related to it, and I was going to close the bug
2015-03-16T17:14:01  *** tiswanso_ has quit IRC
2015-03-16T17:14:34  *** tiswanso has joined #openstack-infra
2015-03-16T17:14:50  <pleia2> jbooboo: ok, so which of these are required fields?
2015-03-16T17:15:47  *** patrickeast has joined #openstack-infra
2015-03-16T17:15:47  *** marun_ has quit IRC
2015-03-16T17:15:59  <jbooboo> pleia2: i think they all are in this case.  i believe the only reason they are listed as optional is that the intent was for the script to support jobs other than post as well.  but that part hasn't been written yet (doesn't seem particularly necessary -- 'recheck' is easier)
2015-03-16T17:16:26  * pleia2 nods
2015-03-16T17:16:31  *** ildikov has quit IRC
2015-03-16T17:16:38  <jbooboo> pleia2: this is actually a little easier if the job has actually run (ie, if pypi upload transient failed or something -- you can get all the parameters from jenkins)
2015-03-16T17:17:06  <pleia2> no doubt
2015-03-16T17:17:19  <jbooboo> pleia2: you can still look at an old one and get the gist though: https://jenkins07.openstack.org/job/infra-manual-infra-docs/8/parameters/
2015-03-16T17:17:40  <pleia2> ah, great
2015-03-16T17:17:44  *** dhritishikhar has joined #openstack-infra
2015-03-16T17:18:34  <jbooboo> pleia2: let me know what command line you come up with.  i'll try to do the same and we can compare
2015-03-16T17:19:21  <jbooboo> pleia2: i just realized this isn't going to work :)
2015-03-16T17:19:38  *** erlon has joined #openstack-infra
2015-03-16T17:19:56  *** bdpayne has joined #openstack-infra
2015-03-16T17:20:02  <pleia2> jbooboo: doh
2015-03-16T17:20:10  <foobio> pleia2: jbooboo: usually the only challenge i run into in that case is figuring out which zuul merger will have the commit needed
2015-03-16T17:20:14  <jbooboo> pleia2: i think at this point, this script will _only_ work to retrigger a job that has actually run.  it won't work for one that hasn't run because the information won't necessarily be in the zuul merger...
2015-03-16T17:20:21  <jbooboo> foobio: indeed :)
2015-03-16T17:20:35  <jbooboo> i mean, they might have it, and we could check...
2015-03-16T17:20:50  <jbooboo> but since this never ran, perhaps we should take a different tack and see if we can enqueue it
2015-03-16T17:20:56  <foobio> which _can_ be done by prodding all the zuul mergers to see which one is serving it
2015-03-16T17:21:12  <pleia2> I see
2015-03-16T17:21:23  <jbooboo> foobio: right, but since it didn't run, it's not actually guaranteed to be on any of them.  it _probably_ is, but still.
2015-03-16T17:21:41  *** dizquierdo has quit IRC
2015-03-16T17:21:42  <foobio> yep, agreed. sometimes you get lucky, sometimes you get eaten by a grue
2015-03-16T17:21:49  <jbooboo> we can't enqueue into post, can we?
2015-03-16T17:22:19  <jbooboo> 'zuul enqueue' seems to require a change id, and not a ref.
2015-03-16T17:22:25  *** jp_at_hp has quit IRC
2015-03-16T17:22:43  <foobio> i hadn't tried, but yeah might need some extra support for non-change pipelines
2015-03-16T17:23:20  *** mpopow has joined #openstack-infra
2015-03-16T17:24:03  <jbooboo> pleia2: okay, so back to the other way :)
2015-03-16T17:24:08  <jbooboo> pleia2: git fetch http://zm01.openstack.org/p/openstack-infra/infra-manual 6b83fcfe04beacc1ed17c48e939309a8a531779e
2015-03-16T17:24:20  <jbooboo> pleia2: that seems to work, so i guess we can use zm01 as the zuul url
2015-03-16T17:24:53  <pleia2> ok
2015-03-16T17:25:13  <ctlaugh> asselin, (or anyone else) -- I am seeing this from zuul when an event enters the pipeline: http://paste.ubuntu.com/10610548/  I'm not sure what the problem is.
2015-03-16T17:25:46  <jbooboo> mtreinish: sqlalchemy.exc.OperationalError: (OperationalError) (1878, 'Temporary file write failure.') 'ALTER TABLE test_runs ADD COLUMN start_time_microsecond INTEGER' ()
2015-03-16T17:25:46  <jbooboo> real    20m58.268s
2015-03-16T17:26:03  <foobio> wow, faster than i expected
2015-03-16T17:26:22  *** _nadya_ has quit IRC
2015-03-16T17:26:24  *** tonytan4ever has joined #openstack-infra
2015-03-16T17:26:25  *** BharatK has quit IRC
2015-03-16T17:26:46  <jbooboo> foobio: i think we were hitting the 30m timeout because there was an 18m mysqldump included in that
2015-03-16T17:26:57  *** BharatK has joined #openstack-infra
2015-03-16T17:27:02  <foobio> makes sense
2015-03-16T17:27:02  <mtreinish> jbooboo: um, that's not good
2015-03-16T17:27:07  <jbooboo> (in the timeout, not the 20m runtime for the (failed) migration i just posted)
2015-03-16T17:27:35  <jbooboo> mtreinish, foobio: do we have 2x empty space on that trove instance?
2015-03-16T17:27:47  <foobio> i think we have 0x empty space
2015-03-16T17:27:48  * nibalizer reads scrollback
2015-03-16T17:27:54  * foobio looks
2015-03-16T17:27:58  <nibalizer> foobio: mordred awesome that you found/fixed a scoping issue
2015-03-16T17:28:01  *** harlowja has joined #openstack-infra
2015-03-16T17:28:05  <jbooboo> if you can't figure out what that sentence means, i think i meant to say "are we at less than 50% capacity on the trove instance"
2015-03-16T17:28:08  <mordred> nibalizer: heck yes
2015-03-16T17:28:35  <jbooboo> mtreinish, foobio, pleia2: because i think mysql will need to write a temp table and so will briefly occupy double the normal space...
2015-03-16T17:28:36  <foobio> nibalizer: one which i expect is endemic throughout our modules
2015-03-16T17:28:39  <jbooboo> mordred: ^ correct?
2015-03-16T17:28:44  <nibalizer> foobio: yep
2015-03-16T17:28:49  <mtreinish> jbooboo: yeah that's what google just told me too :)
2015-03-16T17:28:50  <nibalizer> and this is why we dont use scope.lookupvar
2015-03-16T17:29:07  <mtreinish> jbooboo: well last time we looked at storage we were using 90GB and you bumped it to 300GB
2015-03-16T17:29:13  <mtreinish> but that was a few weeks ago
2015-03-16T17:29:15  <nibalizer> also we've rejected rocketship alignment ... i am greatly amused
2015-03-16T17:29:23  <foobio> jbooboo: mtreinish: mordred: actually we're very close to 2x empty space after all
2015-03-16T17:29:32  <foobio> jbooboo: mtreinish: mordred: "105 GB of 300 GB" says rackspace
2015-03-16T17:29:33  <jbooboo> nibalizer: well, we're discussing it; definitely want your opinion :)
2015-03-16T17:29:35  *** jp_at_hp has joined #openstack-infra
2015-03-16T17:29:56  <nibalizer> well this merged so .. https://review.openstack.org/#/c/164725/
2015-03-16T17:29:56  <anteaya> ctlaugh: is not registered with Gearman
2015-03-16T17:30:11  <jbooboo> nibalizer: i just woke up, read a diff while groggy, and was like "which of these lines _actually_ changed?"
2015-03-16T17:30:38  <anteaya> ctlaugh: is your gearman running?
2015-03-16T17:30:50  <nibalizer> my knee jerk reaction is 'nope puppet best practice and we're on the best practice train' but maybe thats not right
2015-03-16T17:31:05  <nibalizer> jbooboo: so in my gerrit view it darkgreens stuff that changed and lightgreens stuff that shifted
2015-03-16T17:31:10  <foobio> nibalizer: fight the power
2015-03-16T17:31:15  <mtreinish> foobio: hmm, I would have thought that would be enough space then, maybe it's not using the same location for the temp file?
2015-03-16T17:31:48  <nibalizer> foobio: yea infra don't need anyones arbitrary rules! we're our own project! W wann we be free!
2015-03-16T17:31:55  <foobio> mtreinish: no idea since trove doesn't expose that to us
2015-03-16T17:32:06  <asselin> ctlaugh, assuming the job is correctly spelled, try adding or removing a jenkins slave to retrigger a gearman update
2015-03-16T17:32:14  <foobio> nibalizer: anarchy in the ci
2015-03-16T17:32:19  <ctlaugh> anteaya: perhaps not -- I don't see anything that resembles it running
2015-03-16T17:32:49  * foobio is going to have a sex pistols song stuck in his head the rest of the day
2015-03-16T17:32:53  <asselin> ctlaugh, telnet localhost 4730
2015-03-16T17:33:09  <mtreinish> foobio: sigh, this trove thing just keeps getting better and better...
2015-03-16T17:33:29  <foobio> mtreinish: yeah, it's one of those
2015-03-16T17:33:34  <foobio> "openstack" services
2015-03-16T17:33:47  <jbooboo> mordred: any other ideas about the "Temporary file write failure."?
2015-03-16T17:33:57  <jbooboo> SpamapS: calling all mysql experts...
2015-03-16T17:33:59  * foobio looks around for openstack people
2015-03-16T17:34:05  <mordred> jbooboo: this is in resizing our trove instance, right
2015-03-16T17:34:09  <pleia2> jbooboo: here's what I came up with http://paste.openstack.org/show/192681/
2015-03-16T17:34:24  *** HeOS has quit IRC
2015-03-16T17:34:26  <foobio> mordred: doing an alter table
2015-03-16T17:34:31  <mtreinish> mordred: no, doing an alter table on the subunit2sql trove instance
2015-03-16T17:34:32  <jbooboo> mordred: we're doing an alter table on a trove instance.  it has 105G used out of 300G total.
2015-03-16T17:34:36  <asselin> ctlaugh, if that works, then type 'status' to see all the jobs zuul will see
2015-03-16T17:34:48  <foobio> mordred: not resizing the instance (we can't resize the instance as 300gb is the max rax supports)
2015-03-16T17:34:48  *** mpopow has quit IRC
2015-03-16T17:35:09  *** BharatK has quit IRC
2015-03-16T17:35:35  *** dangers_away is now known as dangers
2015-03-16T17:35:51  <mordred> it may be temp dir settings
2015-03-16T17:35:54  *** ssam2 has quit IRC
2015-03-16T17:35:55  <mordred> on the server
2015-03-16T17:36:11  *** dprince has quit IRC
2015-03-16T17:36:18  *** amitgandhinz has quit IRC
2015-03-16T17:36:22  <mordred> the 2x request is that mysql alters, depending on what the specific alter is, involve a second copy of the table
2015-03-16T17:36:26  <ctlaugh> asselin, anteaya - I deleted the instance in nova, and deleted the slave in Jenkins.  Nodepool is not creating another instance -- debug still shows one node ready.
2015-03-16T17:36:29  <anteaya> zaro: how would you feel about rebasing: https://review.openstack.org/#/c/155448/
2015-03-16T17:36:30  <jbooboo> mordred: can we 'show' the relevant values?
2015-03-16T17:36:54  <mordred> yah - but we may not have much option to change them since it's a trove and not on a server we control
2015-03-16T17:37:02  <asselin> ctlaugh, you should deleve via nodepool instead
2015-03-16T17:37:10  <ctlaugh> asselin: ah
2015-03-16T17:37:17  <mordred> jbooboo: what version of mysql server is running there?
2015-03-16T17:37:18  *** mpopow has joined #openstack-infra
2015-03-16T17:37:28  <asselin> ctlaugh, nodepool list, nodepool delete <id>
2015-03-16T17:37:42  *** mpopow has quit IRC
2015-03-16T17:37:54  *** marun has joined #openstack-infra
2015-03-16T17:38:06  <foobio> mordred: 5.6
2015-03-16T17:38:08  <jbooboo> foobio: ^ can you answer?  i'm working on pleia2's question
2015-03-16T17:38:09  <jbooboo> thx
2015-03-16T17:38:10  <jbooboo> :)
2015-03-16T17:38:15  *** mpopow has joined #openstack-infra
2015-03-16T17:38:27  <mtreinish> mordred: Server version: 5.6.17 MySQL Community Server (GPL)
2015-03-16T17:38:33  <mtreinish> oh, foobio beat me to it
2015-03-16T17:38:50  *** Sukhdev has joined #openstack-infra
2015-03-16T17:39:02  <foobio> mordred: jbooboo: looking through the custom trove config parameter list i don't see anything obviously related to temporary file creation, but maybe the name is opaque/cryptic?
2015-03-16T17:39:06  *** yamahata has joined #openstack-infra
2015-03-16T17:39:17  *** gokrokve has joined #openstack-infra
2015-03-16T17:39:25  <quantumfly> mordred: see comment on 160184
2015-03-16T17:39:31  <pleia2> jbooboo: aha, url should just be http://zm01.openstack.org/p
2015-03-16T17:39:37  <jbooboo> pleia2: yep
2015-03-16T17:39:48  <mordred> well, actually it should be using the data dir for the second copy
2015-03-16T17:39:52  <mordred> so it shouldn't matter on that ...
2015-03-16T17:39:53  *** mpopow has quit IRC
2015-03-16T17:40:02  <foobio> pleia2: you can grep my .bash_history on zuul for lots of relevant example invocations too
2015-03-16T17:40:03  <mordred> you said we were down to 105G - were we larger than that at one point?
2015-03-16T17:40:13  <pleia2> foobio: ah, lovely
2015-03-16T17:40:15  <ctlaugh> asselin: ok, I deleted -- now nodepool debug log is showing start:0, min:0, ready:0, capacity:2
2015-03-16T17:40:19  <jbooboo> pleia2: and job should be "infra-manual-infra-docs" -- zuul doesn't do any project name interpolation there, so it's the full job name
2015-03-16T17:40:28  *** marun_ has joined #openstack-infra
2015-03-16T17:40:30  <mtreinish> mordred: shouldn't have ever been bigger than that, we've never deleted anything from it
2015-03-16T17:40:33  <pleia2> jbooboo: ah, good to know
2015-03-16T17:40:34  <mordred> k
2015-03-16T17:40:36  <SpamapS> is innodb_file_per_table set ?
2015-03-16T17:40:56  <jbooboo> pleia2: oldrev i think you can get with this: git show 6b83fcfe04beacc1ed17c48e939309a8a531779e^1
2015-03-16T17:41:35  <jbooboo> pleia2: (6b83 is the new rev -- the ^1 will get the first parent, which i believe is what would be provided normally.  i don't believe we actually use this though, so i suppose it doesn't matter that much)
2015-03-16T17:41:43  <jbooboo> pleia2: so at any rate, it would be: --oldrev c707aefd4ffd0bf4fbc4c3518b5cab3334dbb082
2015-03-16T17:41:55  <SpamapS> mordred: http://dev.mysql.com/doc/refman/5.6/en/alter-table-online-operations.html <-- things are somewhat more complex with 5.6
2015-03-16T17:42:07  <foobio> jbooboo: mtreinish: mordred: i want to say we started with 100gb disk, filled it up, resized to the max (300gb) and have seen mild increase since
2015-03-16T17:42:13  <asselin> ctlaugh, not sure...try restarting nodepool....?
2015-03-16T17:42:26  <jbooboo> pleia2: and then the logpath needs the extra stuff stuck onto the end
2015-03-16T17:42:27  <jbooboo> pleia2: --logpath 6b/6b83fcfe04beacc1ed17c48e939309a8a531779e/post/infra-manual-infra-docs/manually-triggered/
2015-03-16T17:42:29  *** nelsnelson has quit IRC
2015-03-16T17:42:30  <SpamapS> oh wait thats cluster
2015-03-16T17:42:34  *** marun has quit IRC
2015-03-16T17:42:40  *** angela-s has joined #openstack-infra
2015-03-16T17:42:41  <SpamapS> http://dev.mysql.com/doc/refman/5.6/en/innodb-online-ddl.html
2015-03-16T17:42:42  <SpamapS> that one
2015-03-16T17:42:55  <mtreinish> foobio: yeah that's what we did, jbooboo resized it when we went >90gb
2015-03-16T17:43:04  <jbooboo> pleia2: that last component is just a directory name i made up.  normally, zuul will create a uuid for that part, but since zuul isn't running it, we need to make one up ourselves
2015-03-16T17:43:14  * pleia2 nods
2015-03-16T17:43:17  *** trey has quit IRC
2015-03-16T17:43:34  *** mpopow has joined #openstack-infra
2015-03-16T17:43:38  <foobio> SpamapS: oh! so we can control that per alter call>?
2015-03-16T17:43:55  *** jp_at_hp has quit IRC
2015-03-16T17:43:57  <jbooboo> pleia2: so i think it should be http://paste.openstack.org/show/192683/
2015-03-16T17:43:59  <nibalizer> 
2015-03-16T17:44:02  <mordred> mtreinish: this is 1679b5bc102c_add_subsecond_columns_to_test_runs_table.py that you're doing, yeah?
2015-03-16T17:44:10  <mtreinish> mordred: yes
2015-03-16T17:44:21  <jbooboo> pleia2: and just so you know, i got two things wrong on my attempt and corrected them based on what you wrote.  :)
2015-03-16T17:44:29  <nibalizer> jf
2015-03-16T17:44:30  <nibalizer> 
2015-03-16T17:44:32  <nibalizer> `\871
2015-03-16T17:44:35  <SpamapS> foobio: yeah, but what was the alter?
2015-03-16T17:44:41  <SpamapS> foobio: http://dev.mysql.com/doc/refman/5.6/en/innodb-create-index-overview.html#innodb-online-ddl-summary-grid
2015-03-16T17:44:49  *** afazekas has quit IRC
2015-03-16T17:44:49  <mordred> SpamapS: it's in an alembic migration
2015-03-16T17:44:53  *** mpopow has quit IRC
2015-03-16T17:44:59  <pleia2> jbooboo: great, that's the same as what I've cobbled together
2015-03-16T17:45:14  <mtreinish> SpamapS: http://git.openstack.org/cgit/openstack-infra/subunit2sql/tree/subunit2sql/migrations/versions/1679b5bc102c_add_subsecond_columns_to_test_runs_table.py
2015-03-16T17:45:19  *** trey has joined #openstack-infra
2015-03-16T17:45:30  <pleia2> jbooboo: thanks, that makes me feel better :)
2015-03-16T17:45:48  <SpamapS> adding columns can be done online
2015-03-16T17:46:00  *** Ala has quit IRC
2015-03-16T17:46:09  <pleia2> jbooboo: ok, I'm going to give this a try
2015-03-16T17:46:36  <jbooboo> pleia2: cool.  also, i think the only way we're going to see output from it is by checking jenkins
2015-03-16T17:46:50  <pleia2> ok, I'll keep an eye on it
2015-03-16T17:47:03  <jbooboo> pleia2: so open up 7 tabs with "https://jenkins0n.openstack.org/job/infra-manual-infra-docs/" and see which one it appears in :)
2015-03-16T17:47:16  <anteaya> ha ha ha
2015-03-16T17:47:17  <pleia2> right :)
2015-03-16T17:47:27  <pleia2> many jenkinses is fun
2015-03-16T17:47:29  <foobio> pleia2: alternatively, just open the url where you expect the logs to land and keep refreshing periodically
2015-03-16T17:47:33  *** mpopow has joined #openstack-infra
2015-03-16T17:47:43  <jbooboo> that works too
2015-03-16T17:47:49  <jbooboo> until we _only_ do swift logs
2015-03-16T17:47:52  <pleia2> foobio: sounds like you've done this before
2015-03-16T17:48:07  <foobio> and if the trigger-job.py call returns control to the terminal then the log should normally appear within seconds
2015-03-16T17:48:31  <jbooboo> the job won't be running with a valid upload token, so shouldn't be able to upload to swift
2015-03-16T17:48:41  <pleia2> huzzah http://logs.openstack.org/6b/6b83fcfe04beacc1ed17c48e939309a8a531779e/
2015-03-16T17:48:46  <foobio> yeah, that will require some additional thinking
2015-03-16T17:48:52  <jbooboo> i think the next step in making this less terrible is to do zuul enqueue for post jobs
2015-03-16T17:48:59  <pleia2> http://docs.openstack.org/infra/manual/developers.html#accessing-gerrit-over-https \o/
2015-03-16T17:49:03  <pleia2> thanks jbooboo
2015-03-16T17:49:09  <jbooboo> pleia2: yay!
2015-03-16T17:49:45  <foobio> agreed. trigger-job.py predates zuul having a cli at all. getting the remaining use cases for it implemented in zuul enqueue means we can stop keeping it around i guess
2015-03-16T17:49:46  <SpamapS> so it looks like adding a column will use INPLACE by default.
2015-03-16T17:50:07  <anteaya> pleia2: nice work
2015-03-16T17:50:11  <foobio> or just keep it around as an example tool for testing injection into gearman anyway
2015-03-16T17:50:15  *** ghostpl_ has quit IRC
2015-03-16T17:50:30  *** achanda has joined #openstack-infra
2015-03-16T17:50:35  <mtreinish> SpamapS: as a mysql n00b is that a good or bad thing?
2015-03-16T17:50:41  *** dprince has joined #openstack-infra
2015-03-16T17:50:50  <jbooboo> pleia2: oh, yeah, so you know why this is so weird -- the trigger job script just sends a job over gearman directly -- zuul itself is not actually involved.
2015-03-16T17:51:04  <jbooboo> pleia2: 'zuul enqueue' tells zuul to enqueue something and launch jobs
2015-03-16T17:51:04  *** jistr has quit IRC
2015-03-16T17:51:07  *** sigmavirus24 is now known as sigmavirus24_awa
2015-03-16T17:51:19  <foobio> mtreinish: SpamapS: i think it means that the tempfile creation error is probably not space exhaustion because of a table copy?
2015-03-16T17:51:20  <SpamapS> mtreinish: it's slower but uses less space
2015-03-16T17:51:30  <pleia2> jbooboo: I see
2015-03-16T17:51:34  <SpamapS> welllll
2015-03-16T17:51:49  <SpamapS> If the table is still in the old column format, it still has to use the copy method.
2015-03-16T17:52:15  <SpamapS> show table status like `tablename`; will answer that
2015-03-16T17:52:29  <SpamapS> actually it might be 'tablename'
2015-03-16T17:53:02  *** BharatK has joined #openstack-infra
2015-03-16T17:53:21  <mtreinish> SpamapS: http://paste.openstack.org/show/192687/
2015-03-16T17:54:03  <anteaya> jbooboo: thanks, I keep notes on tutorials in channel, I called this one retrigger a failed post job
2015-03-16T17:54:06  <reed> foobio, re ask.openstack.org, changing hosts file, should I get a CA warning for the different IP address?
2015-03-16T17:54:19  <foobio> reed: you shouldn't, no
2015-03-16T17:54:36  <foobio> reed: do you?
2015-03-16T17:54:38  <SpamapS> mtreinish: ok, version 10.. let me see..
2015-03-16T17:54:41  <reed> foobio, then the new server works :)
2015-03-16T17:54:50  <foobio> heh
2015-03-16T17:55:02  <jogo> greghaynes: o/
2015-03-16T17:55:41  *** achanda_ has joined #openstack-infra
2015-03-16T17:55:41  <greghaynes> jogo: ohai
2015-03-16T17:56:26  <greghaynes> jogo: I have to do morning routine but I plan on poking at your things today
2015-03-16T17:56:38  <zaro> foobio, jbooboo, quantumfly : i was thinking about removing jobs that build gerrit 2.4.x would you have any concerns with that?
2015-03-16T17:57:24  <ctlaugh> asselin: to clean things up, I deleted all the images and instances in nodepool and restarted it, and it's building a new image.  anteaya mentioned gearman running -- I don't see anything that looks like gearman running -- what would have started it?
2015-03-16T17:57:28  <jbooboo> zaro: oh please do! :)
2015-03-16T17:57:32  <jogo> greghaynes: neato!
2015-03-16T17:57:36  <foobio> zaro: no objection from me. we're very unlikely to switch back to 2.4 now
2015-03-16T17:57:40  <asselin> ctlaugh, jenkins
2015-03-16T17:57:41  *** salv-orl_ has joined #openstack-infra
2015-03-16T17:57:54  <SpamapS> mtreinish: oh hm, the column formats might be separate from that.
2015-03-16T17:57:58  <asselin> ctlaugh, it's a jenkins plugin
2015-03-16T17:58:08  *** adalbas has joined #openstack-infra
2015-03-16T17:58:10  *** devvesa has quit IRC
2015-03-16T17:58:13  <SpamapS> mtreinish: relevant info btw: http://mechanics.flite.com/blog/2014/05/01/upgrading-temporal-columns-from-mysql-5-dot-5-to-mysql-5-dot-6-format/
2015-03-16T17:58:23  <asselin> ctlaugh, you can check to see if it's running using the command "telnet localhost 4730" then "status"
2015-03-16T17:58:47  *** achanda has quit IRC
2015-03-16T17:58:58  <SpamapS> mtreinish: It actually looks like 5.6 added the exact thing that the migration is trying to workaround not having. ;)
2015-03-16T17:59:37  *** marun_ has quit IRC
2015-03-16T17:59:44  <quantumfly> mordred: re 163517 I am reading http://docs.ansible.com/intro_configuration.html#hash-behaviour can you explain why we would need to use the discouraged behavior?
2015-03-16T17:59:59  *** jp_at_hp has joined #openstack-infra
2015-03-16T18:00:00  <SpamapS> mtreinish: there's a query there for finding out if your columns are old format. If they are, then the alter will create a copy and you need 2x the space available.
2015-03-16T18:00:01  <mtreinish> SpamapS: yeah that was the thing when I noticed microseconds were missing, the first thing I did was check the version
2015-03-16T18:00:09  <ctlaugh> asselin: I just looked in the jenkins config and it wasn't enabled.  Sorry -- seems like that's the problem.
2015-03-16T18:00:12  *** yamahata has quit IRC
2015-03-16T18:00:14  <mkj_wk> foobio: would like your preference for making downloaded branches track upstream... Could do it either only if options.track is set, or do it always. Would be simpler to do it always, and I don't see a downside. Do you?
2015-03-16T18:00:34  <SpamapS> mtreinish: if they're new format, then it will alter the table in place.
2015-03-16T18:00:34  <asselin> ctlaugh, np...glad you got it resolved
2015-03-16T18:00:41  *** yamahata has joined #openstack-infra
2015-03-16T18:00:44  *** baoli has quit IRC
2015-03-16T18:01:12  <mtreinish> SpamapS: when it showed 5.6 then I asked mordred who said do this. Although to be fair I was trying to be sort of backend agnostic in the code
2015-03-16T18:01:14  <mordred> quantumfly: it's not discouraged, it's discouraged in general - in our case, I believe it will be much more complex to keep input variables at both the host and the group-of-hosts level without it
2015-03-16T18:01:15  *** mwagner_lap has joined #openstack-infra
2015-03-16T18:01:34  <foobio> mkj_wk: if we successfully solve for all corner cases so that the new behavior introduced doesn't break common workflows, i'd be fine with having it on by default
2015-03-16T18:01:36  *** baoli_ has joined #openstack-infra
2015-03-16T18:01:36  <mordred> quantumfly: specifically, in order to keep a mapping of which hiera values are needed on which hosts, when some of them are needed by groups
2015-03-16T18:01:37  *** salv-orlando has quit IRC
2015-03-16T18:01:44  <mordred> quantumfly: without getting very squirelly
2015-03-16T18:01:57  <quantumfly> mordred: reading http://docs.ansible.com/playbooks_variables.html#variable-precedence-where-should-i-put-a-variable precedence should work just fine right?
2015-03-16T18:02:03  <mordred> no
2015-03-16T18:02:08  <mordred> because we are going to have complex data
2015-03-16T18:02:11  <mkj_wk> foobio: OK, I'll start with it on by default, and if later we come up with a reason it's bad I'll change
2015-03-16T18:02:14  <mkj_wk> thanks!
2015-03-16T18:02:16  <quantumfly> mordred: ok, I don't understand where it will break then
2015-03-16T18:02:35  <mordred> quantumfly: yeah - I need to put up another patch to show that more clearly
2015-03-16T18:02:39  <openstackgerrit> Lars Kellogg-Stedman proposed openstack-infra/project-config: Add "heat-coe-templates" project  https://review.openstack.org/164806
2015-03-16T18:03:05  <foobio> SpamapS: and when you say 2x space available you mean that the unused space needs to be 2x table size, or just 1x (room to make two copies or just make one copy)?
2015-03-16T18:03:06  <quantumfly> mordred: also your merge method doesn't work on scalar values which is going to be even more confusing
2015-03-16T18:03:34  <cinerama> pleia2: i added some graffiti to your etherpad re zanata
2015-03-16T18:03:38  <mordred> don't need it to - it's specifically to allow us to define  a hiera dict for groups and for hosts
2015-03-16T18:03:51  <quantumfly> mordred: so if I have hostvars: {'string': value, {'somekey': 'value'}} only he inner dict will be merged}
2015-03-16T18:03:52  <pleia2> cinerama: excellent, thanks :)
2015-03-16T18:04:10  *** peristeri has quit IRC
2015-03-16T18:04:55  *** amitgandhinz has joined #openstack-infra
2015-03-16T18:05:02  <mordred> quantumfly: can we come back to this one - I am juggling too many other things at the moment to properly respond to your question
2015-03-16T18:05:16  <cinerama> pleia2: i'm currently a bit stuck on the openid bits
2015-03-16T18:05:24  <quantumfly> mordred: sure
2015-03-16T18:05:38  <mordred> quantumfly: thanks. it's a good question - and clearly somethign we need to make sure we understand and if so, document why
2015-03-16T18:05:41  <asselin> curious to know if the governance change needs to merge before this? https://review.openstack.org/#/c/163255/ and how to poke that process along....
2015-03-16T18:05:47  *** peristeri has joined #openstack-infra
2015-03-16T18:05:59  <quantumfly> foobio: 164312 needed a puppetlint fix
2015-03-16T18:06:05  <quantumfly> mordred: ^ you had previously reviewed that change too
2015-03-16T18:06:12  <anteaya> asselin: I was just looking at that
2015-03-16T18:06:14  <quantumfly> its +1 by jenkins now so rereview would be asesome
2015-03-16T18:06:20  <anteaya> asselin: the governance change needs to merge first
2015-03-16T18:06:38  <anteaya> asselin: it is on tomorrow's tc agenda so my expectation it should go in during that meeting
2015-03-16T18:06:50  *** marun_ has joined #openstack-infra
2015-03-16T18:07:01  <asselin> anteaya, great, thanks for the info
2015-03-16T18:07:08  <anteaya> I checked to make sure it was on the agenda for tomorrow
2015-03-16T18:07:10  <anteaya> sure
2015-03-16T18:07:15  <foobio> quantumfly: thanks!
2015-03-16T18:07:16  <mordred> quantumfly: +2
2015-03-16T18:07:39  *** nelsnelson has joined #openstack-infra
2015-03-16T18:08:24  <asselin> anteaya, I don't see it on the agenda
2015-03-16T18:08:40  <foobio> quantumfly: also there's a new etherpad release as of yesterday covering yet another security vulnerability which we don't need to be concerned about
2015-03-16T18:08:48  <asselin> anteaya, nevermind...it's at the very very end
2015-03-16T18:08:59  <foobio> quantumfly: but it HAS A CVE!
2015-03-16T18:09:04  *** marun has joined #openstack-infra
2015-03-16T18:09:10  <anteaya> asselin: thanks for looking
2015-03-16T18:09:17  <foobio> quantumfly: small victories
2015-03-16T18:09:24  <quantumfly> foobio: yay
2015-03-16T18:09:25  <openstackgerrit> Lars Kellogg-Stedman proposed openstack-infra/project-config: Add "heat-coe-templates" project  https://review.openstack.org/164806
2015-03-16T18:09:31  *** BharatK has quit IRC
2015-03-16T18:09:35  <anteaya> asselin: you probably don't need to be there, but it doesn't hurt if you can make it
2015-03-16T18:09:57  <asselin> anteaya, ok ....will try to pay attention
2015-03-16T18:10:14  <anteaya> asselin: cool
2015-03-16T18:10:37  <openstackgerrit> Monty Taylor proposed openstack-infra/shade: Small fixes found working on ansible modules  https://review.openstack.org/162140
2015-03-16T18:10:43  <foobio> quantumfly: i've got a list put together, mostly complete now, to request cve assignments for historical issues in etherpad-lite back to the 1.0 release in 2011. probably get that knocked out next week since the primary dev is on vacation this week
2015-03-16T18:10:55  <quantumfly> foobio: fun :)
2015-03-16T18:11:01  <mordred> quantumfly: I fixed your 160184 comment in 162140 ^^ just so that we don't have to retest the entire stack there
2015-03-16T18:11:02  *** mpavone has joined #openstack-infra
2015-03-16T18:11:31  *** marun_ has quit IRC
2015-03-16T18:11:58  <quantumfly> mordred: ok I can update vote on 160184
2015-03-16T18:12:04  <mordred> quantumfly: thanks!
2015-03-16T18:12:21  *** derekh has quit IRC
2015-03-16T18:13:18  *** marun_ has joined #openstack-infra
2015-03-16T18:13:30  *** marun has quit IRC
2015-03-16T18:14:05  <openstackgerrit> Merged openstack-infra/elastic-recheck: Expand scope for neutron dbdeadlock bug 1432065  https://review.openstack.org/164703
2015-03-16T18:14:06  <uvirtbot> Launchpad bug 1432065 in neutron "DBDeadlock: (OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction') 'DELETE FROM ipallocationpools WHERE ipallocationpools.id" [Critical,Confirmed] https://launchpad.net/bugs/1432065
2015-03-16T18:14:06  <openstack> bug 1432065 in neutron "DBDeadlock: (OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction') 'DELETE FROM ipallocationpools WHERE ipallocationpools.id" [Critical,Confirmed] https://launchpad.net/bugs/1432065
2015-03-16T18:14:08  <uvirtbot> Launchpad bug 1432065 in neutron "DBDeadlock: (OperationalError) (1213, 'Deadlock found when trying to get lock; try restarting transaction') 'DELETE FROM ipallocationpools WHERE ipallocationpools.id" [Critical,Confirmed]
2015-03-16T18:14:44  <foobio> btw ^ ...anybody have any idea what channels soren might still be found in?
2015-03-16T18:14:57  <quantumfly> we could just ban uvirtbot >_>
2015-03-16T18:15:15  <quantumfly> bodepd: ^ any idea how we can bug soren?
2015-03-16T18:15:22  <zaro> quantumfly: can you please take a look? https://jenkins07.openstack.org/job/gerrit-package-buck/6/console
2015-03-16T18:15:23  <foobio> quantumfly: pain in the butt since we ideally would have him take all channels inhabited by the openstack meetbot out of his config
2015-03-16T18:15:50  <zaro> quantumfly: cp: cannot stat ‘gerrit/buck-out/gen/release.war’: No such file or directory
2015-03-16T18:16:04  <zaro> quantumfly: just tried it locally and the file is there for me.
2015-03-16T18:16:06  <openstackgerrit> Merged openstack-infra/puppet-etherpad_lite: Don't host robots.txt from etherpad repo install  https://review.openstack.org/164312
2015-03-16T18:16:23  <bodepd> quantumfly: wait till he's awake :)
2015-03-16T18:16:56  *** fdegir has joined #openstack-infra
2015-03-16T18:17:07  <nibalizer> quantumfly: foobio can also +q the bot to quiet without kicking
2015-03-16T18:17:08  <quantumfly> zaro: looks like that job cd's into gerrit/ so the relative path is probably wrong
2015-03-16T18:18:00  <bodepd> I checked a few channel he's usually in, and I didn't see him, I can tell your him your looking for him.
2015-03-16T18:18:05  *** fdegir has left #openstack-infra
2015-03-16T18:18:06  <quantumfly> bodepd: thank you
2015-03-16T18:18:31  <mtreinish> foobio, SpamapS, mordred, jbooboo: so I'm wondering what our next step should be for the migration. Maybe we should just switch to a new db that we admin ourselves and switch the worker to use that instead?
2015-03-16T18:18:32  *** banix has quit IRC
2015-03-16T18:19:22  <zaro> quantumfly: ohh wow, thanks.
2015-03-16T18:19:59  <jogo> having trouble reading the output of the gate-project-config-layout job
2015-03-16T18:20:06  <jogo> what is the error with http://logs.openstack.org/14/164314/1/check/gate-project-config-layout/7d4c1d7/console.html
2015-03-16T18:20:15  *** paul-- has quit IRC
2015-03-16T18:20:27  *** marun_ has quit IRC
2015-03-16T18:20:33  <jogo> aha 2015-03-13 21:21:19.381 | Job check-dsvm-keystone not defined
2015-03-16T18:20:44  <quantumfly> jogo: http://logs.openstack.org/14/164314/1/check/gate-project-config-layout/7d4c1d7/console.html#_2015-03-13_21_21_19_381 yes that
2015-03-16T18:21:04  *** marun_ has joined #openstack-infra
2015-03-16T18:21:09  <EmilienM> yolanda: re- https://review.openstack.org/#/c/164812/
2015-03-16T18:21:17  *** tmcpeak has joined #openstack-infra
2015-03-16T18:21:18  <EmilienM> yolanda: are you sure it's a puppet openstack project ?
2015-03-16T18:21:39  <mordred> mtreinish, jbooboo: I'm beginning more and more to start to think about that seriously across the board
2015-03-16T18:21:43  *** packet has joined #openstack-infra
2015-03-16T18:21:55  <openstackgerrit> Joe Gordon proposed openstack-infra/project-config: Add new keystone tempest job to only run keystone and scenario tests  https://review.openstack.org/164314
2015-03-16T18:21:56  <quantumfly> mtreinish: this was always the big problem with this tool right?
2015-03-16T18:22:01  <quantumfly> mtreinish: we need a way to expire old data
2015-03-16T18:22:04  *** melwitt has joined #openstack-infra
2015-03-16T18:22:07  <quantumfly> I don't think make bigger node fixes that
2015-03-16T18:22:17  <quantumfly> it just puts the problem off until we run into it again
2015-03-16T18:22:36  <bdpayne> We'd like to add a new op on the openstack-security channel.  I'm currently the only op.  What is the process for doing this so that it sticks across logins?
2015-03-16T18:22:58  <mtreinish> quantumfly: well the goal was to always try and keep a cycles worth in the db, we're not even there yet
2015-03-16T18:23:08  *** BharatK has joined #openstack-infra
2015-03-16T18:23:46  <mordred> sdague: I hate to bother you - I know you're busy ...
2015-03-16T18:24:07  <mtreinish> quantumfly: fwiw, adding the python api call to delete a date range is my next todo
2015-03-16T18:24:15  <jbooboo> mtreinish: did you find a root cause for the current error?
2015-03-16T18:24:24  <mordred> sdague: but I have a patch in shade: https://review.openstack.org/#/c/164691/ which has to deal with server.image sometimes being a string (when boot from volume) and most of the time being a dict-like object
2015-03-16T18:24:41  <mordred> sdague: is that a bug in python-novaclient? or in nova? or is it a bug at all?
2015-03-16T18:24:47  <jkt> hi there, I've created https://storyboard.openstack.org/#!/story/2000205 to describe a bug in gertty, but I don't see that bugreport when I search for gertty's stories
2015-03-16T18:24:56  <jkt> is that a PEBKAC on my side?
2015-03-16T18:25:04  <foobio> bdpayne: /msg chanserv access #openstack-security whoever_you_want +Aotv
2015-03-16T18:25:05  <jbooboo> bdpayne: you should be able to add the necessary acl to chanserv
2015-03-16T18:25:13  <jbooboo> heh, like that
2015-03-16T18:25:14  <mtreinish> quantumfly: but my suggestion to move to a infra admin'ed db was more to let us have more control. Especially over all the tunables that mordred and SpamapS were bringing up
2015-03-16T18:25:39  *** peristeri has quit IRC
2015-03-16T18:25:40  <mordred> quantumfly: also - re 164691 - you said something about not voting because of tests - I rebased on top of the functional test fix, fwiw
2015-03-16T18:25:46  <foobio> bdpayne: that matches your access levels listed based on /msg chanserv access #openstack-security list
2015-03-16T18:26:07  <bdpayne> ok thanks guys, I'll give it a try
2015-03-16T18:26:37  <foobio> bdpayne: chanserv has a fair amount of context help too, if you get curious
2015-03-16T18:26:44  <mtreinish> jbooboo: I don't think so, but I don't really have enough sql-fu to debug further
2015-03-16T18:26:52  <bdpayne> good to know, thanks
2015-03-16T18:26:58  <mordred> quantumfly: I don't think it's about a _bigger_ node for subunit2sql - it's that we've got an opaque db that we're having trouble administering - this should not be as complex as it is
2015-03-16T18:27:15  <mordred> jbooboo: the error message was added in 5.6.15 with no additional information about what problems it's actually related to
2015-03-16T18:27:22  <openstackgerrit> Khai Do proposed openstack-infra/project-config: Fix upload built artifact in gerrit job  https://review.openstack.org/164815
2015-03-16T18:27:23  <mordred> jbooboo: I'm considering diving in to the source code
2015-03-16T18:27:43  *** peristeri has joined #openstack-infra
2015-03-16T18:28:18  <foobio> jkt: the url to the story you added seems to actually be https://storyboard.openstack.org/#!/story/2000205
2015-03-16T18:28:20  <bdpayne> foobio I'm getting "You are not authorized to execute this command."
2015-03-16T18:28:22  <quantumfly> you can tune everything with trove aiui
2015-03-16T18:28:34  <quantumfly> but sure if control is what you want thats fine
2015-03-16T18:28:42  <jbooboo> mtreinish, mordred: ok.  i'm open to the idea of switching back.  i don't want to do it _too_ lightly though.  we have found that we can tweak some server parameters using the trove api (which may become easier when we can manage it with ansible+shade)
2015-03-16T18:28:54  <sdague> mordred: does it vary by cloud?
2015-03-16T18:29:15  <jkt> foobio: yes; what I linked to was a copy-paste from firefox 35's location bar
2015-03-16T18:29:20  *** johnthetubaguy is now known as zz_johnthetubagu
2015-03-16T18:29:35  *** paul-- has joined #openstack-infra
2015-03-16T18:29:38  <sdague> there is a lot of magically translation layer here in oslo incubator apiclient, so I'm not sure
2015-03-16T18:29:39  <mordred> jbooboo: https://github.com/mysql/mysql-server/blob/7e58ce8e69de5a4e941d913999cbbf905fe8f444/storage/innobase/row/row0ftsort.cc#L840-L853
2015-03-16T18:29:41  <jbooboo> mtreinish, mordred: we've hit enough small problems that maybe they're adding up enough to make it worthwhile.  otoh, we might switch subunit2sql and then be staring at the same problem.  possibly with more debugging tools.  :)
2015-03-16T18:29:46  <mordred> this appears to be related to sort buffer
2015-03-16T18:29:48  <mordred> SpamapS: ^^
2015-03-16T18:29:58  <mordred> I'm not really sure whats causing sort buffer to be used in this
2015-03-16T18:30:37  <foobio> jkt: you probably need to check the page size at https://storyboard.openstack.org/#!/profile/preferences
2015-03-16T18:30:45  <mordred> mtreinish: can you easily paste me "show create table test_runs \G" ?
2015-03-16T18:30:46  <foobio> jkt: pagination in storyboard is still a work in progress
2015-03-16T18:31:07  <openstackgerrit> Jan Kundrát proposed stackforge/gertty: Add mouse wheel scrolling  https://review.openstack.org/133550
2015-03-16T18:31:09  <mordred> sdague: awesome
2015-03-16T18:31:16  <jkt> foobio: OK, noted
2015-03-16T18:31:18  <mtreinish> mordred: monkey see monkey do: http://paste.openstack.org/show/192699/
2015-03-16T18:31:19  <foobio> bdpayne: double-checking. it might be that you ended up with fewer permissions than usual. i'll fix in a sec if so
2015-03-16T18:31:28  <sdague> based on that, if I had to guess, it might be a nova inconsistency
2015-03-16T18:31:29  <mordred> sdague: I'm not sure - I've never hit it myself ... it was reported by someone who was using Cisco's OpenStack product
2015-03-16T18:31:36  *** melwitt_ has joined #openstack-infra
2015-03-16T18:31:41  <bdpayne> foobio kk, thanks
2015-03-16T18:31:44  <nibalizer> SergeyLukjanov: jbooboo others what do you think about reverting and re proposing https://review.openstack.org/#/c/164725/ ?
2015-03-16T18:31:45  <mordred> sdague: but they didn't see it on every thing
2015-03-16T18:31:53  <mordred> sdague: just on servers booted from volume
2015-03-16T18:32:01  <nibalizer> that was supposed to be a forum for conversation and now its just merged
2015-03-16T18:32:23  <jbooboo> nibalizer: will do, thanks.
2015-03-16T18:32:28  <sdague> is it reproducable in upstream?
2015-03-16T18:32:28  <crinkle> awesome
2015-03-16T18:33:52  *** otter768 has joined #openstack-infra
2015-03-16T18:33:52  *** Guest64707 has quit IRC
2015-03-16T18:34:01  <openstackgerrit> James E. Blair proposed openstack-infra/puppet-zuul: Revert "Disable arrow alignment puppet lint check"  https://review.openstack.org/164818
2015-03-16T18:34:01  <openstackgerrit> James E. Blair proposed openstack-infra/puppet-zuul: Disable arrow alignment puppet lint check  https://review.openstack.org/164819
2015-03-16T18:34:01  <nibalizer> jbooboo: great thanks
2015-03-16T18:35:13  *** tsg has quit IRC
2015-03-16T18:35:19  <mordred> sdague: unsure - I can try
2015-03-16T18:35:24  *** ashishb has joined #openstack-infra
2015-03-16T18:35:32  <openstackgerrit> yolanda.robla proposed openstack-infra/project-config: Update puppet-setproxy to not be part of puppet-openstack  https://review.openstack.org/164820
2015-03-16T18:35:37  *** melwitt has quit IRC
2015-03-16T18:35:38  <mordred> sdague: if it is - you would consider that a bug _somewhere_ right?
2015-03-16T18:35:43  *** melwitt_ is now known as melwitt
2015-03-16T18:35:51  *** dprince has quit IRC
2015-03-16T18:36:22  <sdague> mordred: yeh
2015-03-16T18:36:26  <mordred> sdague: k
2015-03-16T18:36:27  <jbooboo> nibalizer, mordred, sdague, SergeyLukjanov: https://review.openstack.org/#/c/164819/  re-proposed and made WIP so that we don't accidentally merge it.
2015-03-16T18:36:38  <mordred> jbooboo: I have asked stewart some questions about internals
2015-03-16T18:37:01  <jbooboo> mordred: i think that should be a trove api call
2015-03-16T18:37:06  <sdague> jbooboo: oh, it merged too quick?
2015-03-16T18:37:19  <jbooboo> sdague: yes, before many of our puppet experts were awake :)
2015-03-16T18:37:26  <sdague> heh
2015-03-16T18:37:50  <sdague> well, it's their own damn fault for living in portland ;)
2015-03-16T18:38:09  *** otter768 has quit IRC
2015-03-16T18:38:45  <yolanda> here, i'm trying to push a puppet-setproxy module, to stackforge. But i have a question at where to point the acls
2015-03-16T18:39:11  <mordred> jbooboo: hang on - not sure that's the actual problem
2015-03-16T18:39:31  <yolanda> initially i pointed to puppet-modules.config but it's not the place, and it's intented to be modules to deploy openstack services
2015-03-16T18:39:34  <greghaynes> quantumfly: So issue with using nodepool instead of the waitForImages hackery I did - starting nodepool causes all images to be built, so if im trying to test the a image-update causes one image to be built its not really possible
2015-03-16T18:39:52  <yolanda> my module is to setup a generic proxy service, more related to infra, but not used by you right now
2015-03-16T18:39:54  <greghaynes> and you also cant determine if it was the command or nodepool that caused the image to be built
2015-03-16T18:39:58  <anteaya> yolanda: why is puppet-modules.config not the place?
2015-03-16T18:40:14  <anteaya> whom do you want to have permissions?
2015-03-16T18:40:18  <yolanda> anteaya, no, puppet-setproxy is not deploying an openstack service, but adding a generic proxy feature
2015-03-16T18:40:26  <yolanda> i was asking with emilienm
2015-03-16T18:40:27  <quantumfly> greghaynes: you can determine, you let the images build first, note them then build your image and look for the new one
2015-03-16T18:40:31  <yolanda> i was talking
2015-03-16T18:40:43  <greghaynes> quantumfly: hrmmm
2015-03-16T18:41:16  <foobio> bdpayne: yep, needed to have f added to your channel access flags to be able to alter the access list. i also added the r flag (kickban control) for parity with other chanops
2015-03-16T18:41:25  *** emagana has joined #openstack-infra
2015-03-16T18:41:33  <foobio> bdpayne: also i left out a parameter in the command i gave you
2015-03-16T18:41:36  *** ghostpl_ has joined #openstack-infra
2015-03-16T18:41:52  <greghaynes> quantumfly: That works, my concern is that actually makes the test code more complicated and adds the caveat *only tested with nodepool currently running
2015-03-16T18:41:57  <foobio> bdpayne: /msg chanserv access #openstack-security add whoever_you_want +Aefortv
2015-03-16T18:41:59  <mordred> jbooboo, SpamapS, mtreinish: ok - so this: https://github.com/mysql/mysql-server/blob/7e58ce8e69de5a4e941d913999cbbf905fe8f444/storage/innobase/row/row0merge.cc#L2352
2015-03-16T18:42:05  <anteaya> yolanda: so for me to help, I need you to be able to tell me what groups you want to have permssions on the acl file, I can't decide that
2015-03-16T18:42:05  <mordred> is the actual place where it's going bad
2015-03-16T18:42:12  <bdpayne> foobio excellent, thanks, I'll give it a go again
2015-03-16T18:42:17  <mordred> which has to do with secondary index calculation
2015-03-16T18:42:17  <quantumfly> greghaynes: ya, I am not sure its better
2015-03-16T18:42:21  *** ghostpl_ has quit IRC
2015-03-16T18:42:31  <quantumfly> greghaynes: I just don't like hae mostly duplicated code, maybe we can reduce the duplication instead?
2015-03-16T18:42:31  <greghaynes> quantumfly: I was thinking of maybe passing in an arg to nodepool.start that makes it no do its main loop
2015-03-16T18:42:33  <greghaynes> just db init
2015-03-16T18:42:36  <mordred> which makes me think that we are doing a table copy, and that it is in the calculation of the secondary index that things are going batty
2015-03-16T18:42:41  <yolanda> so anteaya, infra should be fine for me, as the other puppet infra modules, although you are not end users of that at the moment
2015-03-16T18:42:53  <yolanda> we are using that for puppet downstream consumption of infra
2015-03-16T18:43:03  <mordred> solutions may include increasing sort-buffer-size - HOWEVER - it's tough to say to what we need to increase it
2015-03-16T18:43:06  <bdpayne> foobio it works, thanks again!
2015-03-16T18:43:15  <mordred> the other possibility is trying to work out where it's writing temp files
2015-03-16T18:43:17  <anteaya> yolanda: not sure how infra feels about having permissions on a puppet module in stackforge
2015-03-16T18:43:19  <foobio> bdpayne: yw, sorry for the brief misstep there
2015-03-16T18:43:22  <anteaya> yolanda: better ask jbooboo
2015-03-16T18:43:57  <mordred> mtreinish: which is "show global variables like 'tmpdir'"
2015-03-16T18:44:16  <mordred> because it's possible tempdir is pointing to a location that cannot handle the temp files needed to do on-disk sorting
2015-03-16T18:44:18  <yolanda> anteaya, jbooboo, i didn't want to propose directly to be part of infra, because you are really not going to be using that upstream
2015-03-16T18:44:27  <yolanda> but it's related to it
2015-03-16T18:44:30  <mtreinish> mordred: http://paste.openstack.org/show/192700/
2015-03-16T18:44:46  <mtreinish> mordred: heh, that was my original guess as to what was going wrong :)
2015-03-16T18:44:49  *** dprince has joined #openstack-infra
2015-03-16T18:45:07  <openstackgerrit> Khai Do proposed openstack-infra/project-config: Remove jobs for Gerrit 2.4.x  https://review.openstack.org/164821
2015-03-16T18:45:24  <mtreinish> mordred: although I don't know if /var/tmp is correct, since I don't know what the trove fs is setup like
2015-03-16T18:45:49  <mordred> right - this is the problem with the opaque service thing ... I have no idea how big /var/tmp is
2015-03-16T18:46:04  <mordred> nor where else we should put things
2015-03-16T18:46:14  <anteaya> yolanda: okay then again we come to, who do you want to have permissions on the repo?
2015-03-16T18:46:25  *** jp_at_hp has quit IRC
2015-03-16T18:46:57  <yolanda> anteaya, can we have it? i mean, myself, rcarrillocruz, jedimike and our group
2015-03-16T18:46:58  <openstackgerrit> Merged openstack-infra/shade: Clean up race condition in functional tests  https://review.openstack.org/164761
2015-03-16T18:47:08  <yolanda> not sure if that's possible
2015-03-16T18:48:04  <anteaya> yolanda: your repo, you take responsibility
2015-03-16T18:48:15  <anteaya> it is stackforge, you can do anything you want
2015-03-16T18:48:16  <mtreinish> foobio: ^^^ any ideas on where to poke on the trove instance to figure that out?
2015-03-16T18:48:21  *** mikeit has joined #openstack-infra
2015-03-16T18:48:21  *** tmcpeak has left #openstack-infra
2015-03-16T18:48:22  <yolanda> so if i can create an acl and we are members, i'm really fine for it
2015-03-16T18:48:24  <anteaya> and yes that seems way more reasonable to me
2015-03-16T18:48:29  <anteaya> yolanda: yes
2015-03-16T18:48:36  <yolanda> anteaya, thx, i'll create a new acl then
2015-03-16T18:48:40  <nibalizer> +1 on a gozer acl file
2015-03-16T18:48:52  <nibalizer> kindof +1, its also hilarious and bad
2015-03-16T18:48:59  <nibalizer> but I like it
2015-03-16T18:49:14  <yolanda> nibalizer, shall i call it gozer really?
2015-03-16T18:49:25  <nibalizer> whynot
2015-03-16T18:49:36  <nibalizer> :shrug:
2015-03-16T18:49:54  <nibalizer> any other name would mean the same thing but be a roundabout way of saying it
2015-03-16T18:50:05  <yolanda> well, that will mean closing to our group? but i cannot think of a good name, i'm so bad on that
2015-03-16T18:50:09  <yolanda> ok, gozer
2015-03-16T18:50:11  <yolanda> :)
2015-03-16T18:50:29  <quantumfly> mordred: see comment on 164691, don't want to approve if your discussion with sdague changes anthing
2015-03-16T18:51:35  <mordred> quantumfly: cool
2015-03-16T18:51:36  <quantumfly> SpamapS: see comment on 159674
2015-03-16T18:52:01  <mordred> quantumfly: honest.y I believe it's going to take a bit of time to track down where, if anywhere, the bug is
2015-03-16T18:53:22  <mordred> quantumfly: so, I've added filing it to my TDL - but it may take a while - the patch, otoh, needs to be there even if it is a bug, since that behavior has been observed in the wild :(
2015-03-16T18:53:39  *** mwagner_lap has quit IRC
2015-03-16T18:53:56  <quantumfly> ya
2015-03-16T18:54:39  <mordred> today is basically  just a day pointing out that software generally does not work
2015-03-16T18:54:50  <openstackgerrit> greghaynes proposed openstack-infra/nodepool: Test snapshot image deletion command  https://review.openstack.org/164473
2015-03-16T18:55:01  <quantumfly> mordred: I am reading 163540, any thoughts on how you would disable puppet apply from running on a node?
2015-03-16T18:55:16  <openstackgerrit> yolanda.robla proposed openstack-infra/project-config: Update puppet-setproxy to belong to Gozer group  https://review.openstack.org/164820
2015-03-16T18:55:20  <quantumfly> mordred: I dont think it needs to be solved in that change since it won't affect us just yet, but something to think about
2015-03-16T18:55:28  <openstackgerrit> greghaynes proposed openstack-infra/nodepool: Test snapshot image deletion command  https://review.openstack.org/164473
2015-03-16T18:55:42  <greghaynes> quantumfly: ^ hacky but seems to work
2015-03-16T18:56:08  <mordred> quantumfly: yes - I do have a thought on that ...
2015-03-16T18:56:21  <foobio> mtreinish: i don't think it exposes any of that implementation detail to us
2015-03-16T18:56:47  <mordred> quantumfly: and it's to have a disabled group defined on the puppetmaster that we can add and remove hosts from ... then make all of our puppet run host lines have a ;!disabled in them
2015-03-16T18:57:02  <mordred> quantumfly: most of teh time the group will be empty/notexist
2015-03-16T18:57:05  <yolanda> anteaya, thx, change filled
2015-03-16T18:57:15  <foobio> mtreinish: we could prod trove devs to find out if this is even within the scope of the service to tell us at all, or prod rackspace admins if not
2015-03-16T18:57:20  <quantumfly> mordred: an inventory group?
2015-03-16T18:57:22  <mordred> yup
2015-03-16T18:57:28  <quantumfly> gotcha
2015-03-16T18:57:34  *** afazekas has joined #openstack-infra
2015-03-16T18:58:02  *** Rockyg has joined #openstack-infra
2015-03-16T18:58:02  <mordred> quantumfly: that should make us doing puppet apply on hosts that are out of rotation pretty easy too
2015-03-16T18:58:09  <mordred> since we won't have to override lock files there
2015-03-16T18:58:19  *** baoli_ has quit IRC
2015-03-16T18:58:49  <quantumfly> greghaynes: I don't think thats hacky at all
2015-03-16T18:58:58  <quantumfly> mordred: ya
2015-03-16T18:59:07  <mordred> quantumfly: so - my brain is less mush now
2015-03-16T18:59:11  <greghaynes> quantumfly: well, updateConfig seems like a method that maybe should be private
2015-03-16T18:59:32  <greghaynes> but its not so I wasnt going to ask questios
2015-03-16T18:59:47  <mordred> quantumfly: what I was thinking (which incidentally seems to be what nibalizer and greghaynes came up with independently) is to start off with ansible group_vars defining a mapping of hosts to hiera keys
2015-03-16T18:59:56  <quantumfly> greghaynes: not necessarily, its basically a public interface to all of the nasty that updating the config does
2015-03-16T19:00:19  <greghaynes> quantumfly: welp, works for me then ;)
2015-03-16T19:00:24  <mordred> quantumfly: that way, the ansible on the puppetmaster can read the hiera file, and then pass in the appropriate keys for each host to the hieradata parameter so that they get written to each individual hosts's hieradata file
2015-03-16T19:00:29  *** baoli has joined #openstack-infra
2015-03-16T19:00:47  <greghaynes> mordred: our config mgmt arguing over drinks is not to be trusted ;)
2015-03-16T19:00:59  <mordred> quantumfly: to do that, and to avoid a bunch of namespace pollution otherwise, I was mainly planning on having a single dict called "hiera" that's defined in the ansible variables
2015-03-16T19:01:04  <quantumfly> mordred: so I was thinking about that too, I think it would be better to use the hierarchical properties of hiera and have ansible understand them (possibly by calling hiera directly)
2015-03-16T19:01:17  <openstackgerrit> Merged openstack-infra/puppet-zuul: Revert "Disable arrow alignment puppet lint check"  https://review.openstack.org/164818
2015-03-16T19:01:31  <mordred> quantumfly: we could do that - but we still need know which keys a given host wants to get
2015-03-16T19:01:33  <quantumfly> mordred: so then you say hiera give me the hierarchy for foo.o.o then pass that verbatim into the ansible play
2015-03-16T19:01:38  *** mikeit has quit IRC
2015-03-16T19:01:40  <quantumfly> mordred: then you don't have to override any hash behavior
2015-03-16T19:01:43  <mordred> heira doesn't know that
2015-03-16T19:01:47  <quantumfly> mordred: yes it does
2015-03-16T19:01:50  <quantumfly> thats how hiera works
2015-03-16T19:01:57  <mordred> not once we get rid of the puppetmaster it doesn't
2015-03-16T19:02:02  *** ildikov has joined #openstack-infra
2015-03-16T19:02:03  <quantumfly> yes it still does
2015-03-16T19:02:13  *** marun_ has quit IRC
2015-03-16T19:02:13  <mordred> no. we make hiera calls in our site.pp
2015-03-16T19:02:13  <quantumfly> hiera is an independent utility that interprets hierarchical data for you
2015-03-16T19:02:16  <quantumfly> then you just ask for it
2015-03-16T19:02:18  <greghaynes> There was also some trickery nibalizer did to get hiera into a yaml format
2015-03-16T19:02:24  <greghaynes> which would let ansible read it
2015-03-16T19:02:27  <mordred> quantumfly: we dont use it that way
2015-03-16T19:02:31  *** mpavone has quit IRC
2015-03-16T19:02:32  <quantumfly> mordred: but we can
2015-03-16T19:02:37  <quantumfly> mordred: and everything will still work fine
2015-03-16T19:02:38  <mordred> that's adding crazy complexity
2015-03-16T19:02:44  <quantumfly> mordred: its not really
2015-03-16T19:02:59  <quantumfly> mordred: you would just need a global set of settings, then any overrides as necessary per node
2015-03-16T19:03:04  <quantumfly> mordred: thats it
2015-03-16T19:03:17  <quantumfly> right now we are all global and use the lookups to scope
2015-03-16T19:03:18  *** tsg_ has joined #openstack-infra
2015-03-16T19:03:24  <mordred> quantumfly: I understand what you are saying, I think it is needless complexity
2015-03-16T19:03:31  <quantumfly> mordred: what is complex about it?
2015-03-16T19:03:42  <quantumfly> mordred: I think it basically removes complexity from ansible and allows hiera to do its job
2015-03-16T19:03:58  <quantumfly> mordred: you would still write out a hiera file on the remote host, just have hiera interpret what those contents should be for you
2015-03-16T19:04:08  <quantumfly> mordred: so no puppet master is required
2015-03-16T19:04:08  <mordred> but why bother with hiera?
2015-03-16T19:04:10  *** sigmavirus24_awa is now known as sigmavirus24
2015-03-16T19:04:12  <mordred> on the master
2015-03-16T19:04:15  <mordred> you don't need it at all
2015-03-16T19:04:23  <mordred> it's an extra moving part that provides no value
2015-03-16T19:04:24  <quantumfly> mordred: because it represents the data precisely how you want it
2015-03-16T19:04:26  <mordred> no
2015-03-16T19:04:35  <mordred> ansible can also just directly do that
2015-03-16T19:04:37  <quantumfly> you want hierarchical data with overrides
2015-03-16T19:04:39  <mordred> there is no need to have hiera as well
2015-03-16T19:04:52  *** baoli has quit IRC
2015-03-16T19:04:55  <mordred> I'm just not proposing that as step one because it's too many steps
2015-03-16T19:05:01  <mordred> you need hiera where puppet runs
2015-03-16T19:05:01  <quantumfly> ok
2015-03-16T19:05:05  <mordred> you do not need hiera where puppet does not run
2015-03-16T19:05:07  <quantumfly> yes
2015-03-16T19:05:11  <quantumfly> however
2015-03-16T19:05:16  <quantumfly> hiera is a generic tool that solves this problem
2015-03-16T19:05:23  <quantumfly> maybe ansible should learn to speak hiera as a general thing
2015-03-16T19:05:27  <mordred> yes. but so is the built in ansible group var system
2015-03-16T19:05:29  <mordred> it DOES
2015-03-16T19:05:34  <mordred> if you set merge=True
2015-03-16T19:05:38  <mordred> it does  literally the same thing
2015-03-16T19:05:43  <quantumfly> but they specifically say do not do this
2015-03-16T19:05:45  <mordred> no
2015-03-16T19:05:53  <mordred> they say not to do it unless you want that behavior
2015-03-16T19:06:10  <mordred> they say it's not _generally_ what you should do- because hierarchical overriding data is more complex
2015-03-16T19:06:18  <mordred> to the point - we've also avoided it so far
2015-03-16T19:06:33  <mordred> however, I have faith taht we're smart enough to comprehend the complexities
2015-03-16T19:06:35  <quantumfly> sure, but they also say that std module won't be used that way
2015-03-16T19:06:44  <quantumfly> so we can't be sure we get proper behavior out of them with this change
2015-03-16T19:06:52  <quantumfly> and they strongly advice against it (for these reasons I assume)
2015-03-16T19:06:56  <mordred> std modules don't ship with variables
2015-03-16T19:07:06  *** BharatK has quit IRC
2015-03-16T19:07:14  <quantumfly> mordred: uh I just used the git module and it accepted variables iirc
2015-03-16T19:07:16  *** ashishb has quit IRC
2015-03-16T19:07:18  <mordred> accepted
2015-03-16T19:07:21  <mordred> this has nothing to do with that
2015-03-16T19:07:26  <quantumfly> yes it does
2015-03-16T19:07:31  <mordred> this has to do with how group_vars are read from disck
2015-03-16T19:07:33  <mordred> disk
2015-03-16T19:07:38  <quantumfly> you could declare the git remote via -e
2015-03-16T19:07:42  <quantumfly> or via inventory
2015-03-16T19:07:50  <mordred> ure - but those are input parameters to the module
2015-03-16T19:07:55  <quantumfly> and that has different behaviors based on merge vs replace
2015-03-16T19:07:59  *** AJaeger has joined #openstack-infra
2015-03-16T19:08:01  <mordred> the module they ship has no bearing on how the input parameters are constructed
2015-03-16T19:08:04  <mordred> no - it really doesn't
2015-03-16T19:08:13  <mordred> like, not even a little bit
2015-03-16T19:08:20  <quantumfly> mordred: then why do they call it out in their docs
2015-03-16T19:08:26  <quantumfly> I should just give up on ever reading any ansible docs
2015-03-16T19:08:28  <mordred> quantumfly: their docs are terrible :)
2015-03-16T19:08:30  <mordred> yes
2015-03-16T19:08:59  <mordred> quantumfly: also, to be fair, we do tons of things that our upstream software authors say not to do
2015-03-16T19:09:05  <mordred> quantumfly: like isntalling software globally with pip
2015-03-16T19:09:11  <mordred> quantumfly: and just about everythign we do with puppet
2015-03-16T19:09:30  <mordred> quantumfly: in fact, I believe the gerrit guys told us running gerrit in a VM was insane
2015-03-16T19:09:39  <quantumfly> mordred: sure but the difference there is we tend to understand those tools
2015-03-16T19:09:48  <quantumfly> mordred: you are the only person right now that groks ansible
2015-03-16T19:09:54  <mordred> indeed - I aim to fix that
2015-03-16T19:09:58  <quantumfly> mordred: this means the rest of us will rely on things like documentation
2015-03-16T19:10:12  <quantumfly> mordred: if the documentation straight up says "don't do X" I am going to comment that we shouldn't do X
2015-03-16T19:10:17  <mordred> quantumfly: fair
2015-03-16T19:11:00  <quantumfly> its less that I actually have an opinion here and more the only opinion I have managed to create comes from the upstream docs
2015-03-16T19:11:02  <mordred> quantumfly: also, I probably shouldn't braindump 4/5 of a set of patches - the next patch might make the conversation on this clearer - also might make it clearer that I'm wrong :)
2015-03-16T19:11:57  <mordred> jbooboo, mtreinish: another workaround is that we could probably do this: http://paste.openstack.org/show/192684/
2015-03-16T19:12:03  <mtreinish> foobio: hmm, I guess we don't have login access to the node directly. I guess we can just ask SlickNik about it then
2015-03-16T19:12:20  <mordred> mtreinish: unfortunately, SlickNik works for HP and our trove is at Rackspace
2015-03-16T19:12:27  <mordred> so it may not be apples to apples
2015-03-16T19:12:39  *** dboik has quit IRC
2015-03-16T19:12:47  <AJaeger> Hi, this infra-manuals change now has 3 +2s - could somebody approve it, please? https://review.openstack.org/#/c/161454/
2015-03-16T19:12:55  *** unicell has joined #openstack-infra
2015-03-16T19:13:00  <foobio> mtreinish: right, it's first ask SlickNik if there's any feature in trove to expose what we're looking for, and then ask rackspace admins to look for us if he has no suggestions
2015-03-16T19:13:08  *** dboik has joined #openstack-infra
2015-03-16T19:13:24  *** afazekas has quit IRC
2015-03-16T19:14:09  *** sputnik13 has quit IRC
2015-03-16T19:14:20  <mtreinish> mordred: ah, so just do the migration manually to avoid using the alter table. Yeah that should work
2015-03-16T19:14:34  <quantumfly> greghaynes: reading 164356 you don't actualyl check the output of the command aiui
2015-03-16T19:14:42  <quantumfly> greghaynes: merely that the mocked object was called
2015-03-16T19:14:46  <quantumfly> greghaynes: and this is the problem with mocks
2015-03-16T19:14:51  <mtreinish> mordred: the only other thing we probably should do is update the alembic version string too
2015-03-16T19:15:08  <greghaynes> quantumfly: what do you mean? I am just asserting the number of rows
2015-03-16T19:15:14  <mordred> quantumfly: actually, the docs say  "playbooks in the official examples repos do not use this setting" - no mention of modules
2015-03-16T19:15:30  <quantumfly> greghaynes: but none of the content
2015-03-16T19:15:30  <mtreinish> mordred: but I can't do that because I don't have access to the privileged account on the db
2015-03-16T19:15:44  <greghaynes> quantumfly: I was specifically -1'd from doing that in the previous patch
2015-03-16T19:15:50  <openstackgerrit> Merged openstack-infra/infra-manual: Mention Depends-On where the commit is made  https://review.openstack.org/161454
2015-03-16T19:15:51  <AJaeger> thanks, foobio !
2015-03-16T19:15:55  <quantumfly> greghaynes: oh? /me goes to read
2015-03-16T19:15:57  <openstackgerrit> Merged openstack-infra/infra-manual: Use change instead of patch  https://review.openstack.org/161632
2015-03-16T19:16:09  <quantumfly> greghaynes: I do not see any -1 for that
2015-03-16T19:16:25  <greghaynes> quantumfly: re: asserting 'ready' -> were asserting column order
2015-03-16T19:16:40  <greghaynes> per, patch 1
2015-03-16T19:16:44  <quantumfly> greghaynes: you can ignore order, load everything into a set and compare
2015-03-16T19:16:58  <mtreinish> mordred: oh, you know what I can probably add a .sql file to that within alembic and push that as a bug fix release
2015-03-16T19:16:58  <tsg_> sdague: thoughts on https://review.openstack.org/#/c/164112/?
2015-03-16T19:16:59  <mordred> quantumfly: so - https://review.openstack.org/#/c/163538/1/playbooks/group_vars/all.yaml <-- if you have that, and then also have playbooks/group_vars/zuul.yml that has hierakeys: {'zuul_ssh_private_key_contents', True} - then with merge we'd wind up with a hierakeys dict that had sysadmins and zuul_ssh_private_key_contents in it for zuul
2015-03-16T19:17:16  <mordred> mtreinish: really? that's a thing you can do in alembic?
2015-03-16T19:17:16  <quantumfly> greghaynes: but now I understand why you didn't like my idea from before because you are not actually checking the output just that there is output
2015-03-16T19:17:31  <mordred> mtreinish: (also, that script is untested - we should test it for functional completeness somehwere with a small version of the data)
2015-03-16T19:17:42  <greghaynes> quantumfly: which comment?
2015-03-16T19:17:58  <greghaynes> oh, about checking for updates
2015-03-16T19:18:09  *** banix has joined #openstack-infra
2015-03-16T19:18:12  <mtreinish> mordred: yeah I'm pretty sure you can. You definitely used to be able to do it with sqlalchemy migrate, and I'm pretty sure it's still in alembic
2015-03-16T19:18:12  <quantumfly> greghaynes: yes, you can't check for updates because you can only assert the number of rows
2015-03-16T19:18:22  <quantumfly> greghaynes: I still don't see the -1
2015-03-16T19:18:30  <mtreinish> mordred: heh, I figured that (integer is spelt wrong :) )
2015-03-16T19:18:43  <greghaynes> quantumfly: Yea, my issue is just complexity. Its totally doable, I just dont want to make a case where changing features = lots of test churn because then you end up just rewriting your tests to make changes at which point your tests are useless
2015-03-16T19:19:06  <quantumfly> greghaynes: I would assert that this modification to the tests is just barely more useful than useless
2015-03-16T19:19:11  <greghaynes> quantumfly: https://review.openstack.org/#/c/164473/1/nodepool/tests/test_commands.py
2015-03-16T19:19:18  <quantumfly> greghaynes: its just checking that you got a row back
2015-03-16T19:19:31  <quantumfly> what if that is an error message instead of node data?
2015-03-16T19:19:43  <quantumfly> it will still be counted as successful because we have mocked it out
2015-03-16T19:19:59  <greghaynes> quantumfly: sure, so that seems valid to check (that there is a 'ready column'
2015-03-16T19:20:49  <quantumfly> greghaynes: https://review.openstack.org/#/c/164356/2 is the change I am looking at fwiw
2015-03-16T19:21:05  *** ghostpl_ has joined #openstack-infra
2015-03-16T19:21:12  <greghaynes> psh, well that would explain the lack of seeing a -1 ;)
2015-03-16T19:21:25  *** SumitNaiksatam has quit IRC
2015-03-16T19:21:43  *** afazekas has joined #openstack-infra
2015-03-16T19:22:06  <openstackgerrit> Khai Do proposed openstack-infra/puppet-gerrit: Make mysql clients assume utf8 character encoding  https://review.openstack.org/164264
2015-03-16T19:22:07  *** ParsectiX_ has joined #openstack-infra
2015-03-16T19:22:14  <greghaynes> so yes, its basically a little more than a smoke test
2015-03-16T19:22:36  *** ParsectiX_ has quit IRC
2015-03-16T19:22:38  <greghaynes> but thats >> than no test
2015-03-16T19:23:10  <greghaynes> I was planning on doing the fail cases next, so maybe ill add in asserting image state in that?
2015-03-16T19:23:22  <quantumfly> greghaynes: except we already have a test that checks the same number of explosion points as that one
2015-03-16T19:23:23  <nibalizer> mordred: quantumfly reading above I get a little lost
2015-03-16T19:23:35  <quantumfly> greghaynes: basically does image build yes or no
2015-03-16T19:23:44  <greghaynes> quantumfly: I dont think so because I wrote a bug in a parent patch which was only found by my test
2015-03-16T19:23:47  <quantumfly> greghaynes: if we want to confirm beyond that we should actually assert some of the state values returned
2015-03-16T19:23:55  <greghaynes> which was that I broke the deleteImage method
2015-03-16T19:24:14  <quantumfly> greghaynes: deleteImage isn't tested yet
2015-03-16T19:24:27  *** dhritishikhar has quit IRC
2015-03-16T19:24:32  *** tsg_ has quit IRC
2015-03-16T19:24:44  *** HeOS has joined #openstack-infra
2015-03-16T19:24:48  <mordred> nibalizer: that's fine - we were mostly just having one of our fun chats - I believe I need to write an additional patch so we can point at something and make faces
2015-03-16T19:24:55  <nibalizer> i like the idea of having ansible gather facts, then feed them to the hiera command line utility to peform lookups
2015-03-16T19:25:19  <nibalizer> but as mordred said that poses a problem because a node, before the puppet run, does not know which values it needs
2015-03-16T19:25:48  <greghaynes> quantumfly: right, so I can just add in that they are all in 'ready' state?
2015-03-16T19:26:04  *** AJaeger has quit IRC
2015-03-16T19:26:16  <nibalizer> clark and i discussed using a two file structure, putting all common data in common.yaml and all node-specific data in <fqdn>.yaml then having ansible merge common.yaml with fqdn.yaml and shove that over
2015-03-16T19:26:22  *** ghostpl_ has quit IRC
2015-03-16T19:26:29  <nibalizer> that doesn't work super great because what do you do with shell globbing
2015-03-16T19:26:35  <quantumfly> greghaynes: you may want to assert not ready so maybe make ready a default parameter to that utility method
2015-03-16T19:26:42  <mordred> nibalizer: yah - there's a WAY easier way to deal with that I believe
2015-03-16T19:26:47  <nibalizer> you could also just hand the data to ansible in ansibles way and call it good, but thats a handwavy approach
2015-03-16T19:26:49  <greghaynes> jbooboo: You ok with ^ if I change https://review.openstack.org/#/c/164473/1/nodepool/tests/test_commands.py to not depend on column ordering?
2015-03-16T19:26:51  <quantumfly> greghaynes: for now ready is sufficient so that can be deffered too
2015-03-16T19:27:22  <mordred> nibalizer: no, that's what I eventually think I want to do - but as a first step I want to have an explicit mapping in yaml file mapping node to which keys it can have
2015-03-16T19:27:24  <nibalizer> I'd really like to bring up the ansible-puppet-apply stuff on my test infra but it doesn't seem ready yet, and I havent' put a huge chunk of time into it
2015-03-16T19:27:41  <quantumfly> mordred: ya thats kinda the bit I don't like
2015-03-16T19:27:49  <mordred> quantumfly: yeah - it's really just a stepping stone
2015-03-16T19:27:50  <nibalizer> mordred: i have a proposal
2015-03-16T19:27:52  <quantumfly> mordred: its very similar to the dib parameters spec thing
2015-03-16T19:27:56  <quantumfly> mordred: and its :(
2015-03-16T19:27:59  <nibalizer> wait no i dont
2015-03-16T19:28:07  <mordred> quantumfly: so that we don't have to change too many things at once
2015-03-16T19:28:20  <nibalizer> what if we encrypt all the element inn hieradata, then put it in a git repo, then clone it to every host just like project-config
2015-03-16T19:28:27  <mordred> quantumfly: I could also just propose a more aggresive design if you want
2015-03-16T19:28:28  <quantumfly> mordred: so I think the work around for that is using hiera as a described
2015-03-16T19:28:33  <nibalizer> and only paste.o.o can decryt the secrets for paste.o.o ?
2015-03-16T19:28:43  <quantumfly> mordred: because then very little changes, its just hiera continuing to feed data in
2015-03-16T19:29:03  <quantumfly> nibalizer: please no
2015-03-16T19:29:04  <mordred> quantumfly: your thing is as disruptive as my thing
2015-03-16T19:29:10  <nibalizer> then ansible lays down 3 git repos, hieradata, project-config, and system-config then puppet runs
2015-03-16T19:29:19  <openstackgerrit> Khai Do proposed openstack-infra/puppet-gerrit: Make mysql clients assume utf8 character encoding  https://review.openstack.org/164264
2015-03-16T19:29:31  <mordred> quantumfly: basically I'm just trying to avoid a step where we need to all of a sudden make the current hieradata file a complex directory structure
2015-03-16T19:29:39  <mordred> while changing something else too
2015-03-16T19:29:39  *** ayoung has quit IRC
2015-03-16T19:29:40  <quantumfly> mordred: I see
2015-03-16T19:29:42  <mordred> if we're willing to do that
2015-03-16T19:29:45  <mordred> then we might as well just do that
2015-03-16T19:29:57  <nibalizer> im not afraid of a directory structure in hiera
2015-03-16T19:30:03  <quantumfly> mordred: one thing I will say is I don't think it needs to be complex, we can change a host at a time
2015-03-16T19:30:14  *** bswartz has quit IRC
2015-03-16T19:30:15  <quantumfly> mordred: while using puppet agent
2015-03-16T19:30:15  <nibalizer> that is the right direction to take hiera anyways
2015-03-16T19:30:17  *** afazekas has quit IRC
2015-03-16T19:30:24  <nibalizer> quantumfly: is right
2015-03-16T19:30:46  <nibalizer> its also a safe change because if hiera lookup fails you'll get a catalog compilation
2015-03-16T19:30:50  <mordred> except once we dont' have puppetmaster, there is no need to keep hiera on the master
2015-03-16T19:30:58  <nibalizer> well actually you wont because we spammed defaults into our hiera lookups
2015-03-16T19:31:22  <nibalizer> removing hiera from the master has value because keeping a ruby environment around is pain
2015-03-16T19:31:39  <quantumfly> mordred: ya that is the one issue with it. If the end goal is no hiera then probably not worth it
2015-03-16T19:31:41  <mordred> it also is one less thign to describe in terms of how the system hangs together
2015-03-16T19:31:42  <nibalizer> so drop that off the side asap :D
2015-03-16T19:31:56  <openstackgerrit> Merged openstack-infra/project-config: Fix upload built artifact in gerrit job  https://review.openstack.org/164815
2015-03-16T19:32:00  <quantumfly> mordred: but I don't think you had ever expressed that before because puppet master != hiera
2015-03-16T19:32:14  <mordred> quantumfly: I may not have fully realized it until this conversation
2015-03-16T19:32:50  <quantumfly> mordred: did you know chef uses hiera? :)
2015-03-16T19:32:55  <mordred> quantumfly: I've actually been trying hard to keep to easily grokkable stepwise chunks - that's probably a mistake I'm sensing
2015-03-16T19:32:58  <nibalizer> there is another option, which is that hiera could remain centralized and we could build a simple remote lookup system
2015-03-16T19:33:00  <mordred> quantumfly: nice
2015-03-16T19:33:05  <mordred> nibalizer: nonononono
2015-03-16T19:33:08  <mordred> nononononononononononononono
2015-03-16T19:33:32  <mordred> I'm trying very very hard to get rid of central systems that thigns call in to needing auth from remote system inbound to central system
2015-03-16T19:33:34  <nibalizer> we could move the hieradata into something central like etcd or mysql or whatever and all the nodes could reach in and get the data
2015-03-16T19:33:45  <quantumfly> mordred: yes. I agree that having steps is nice but without larger context few have made sense individually
2015-03-16T19:34:05  <mordred> quantumfly: ++ I will fix that and write up and end to end spec - I think it's past time
2015-03-16T19:34:22  <mordred> nibalizer: yeah - that's the exact opposite direction
2015-03-16T19:34:27  <nibalizer> mordred: yea a spec would be great
2015-03-16T19:34:53  <mordred> nibalizer: the great thing about puppet apply is that it's decentralized and there is no daemon thing that anything out there has to know how to auth to
2015-03-16T19:35:33  <mordred> nibalizer: using ansible to drive it is great because it's a push not a pull system - so that you don't _need_ anything complex on the master side - the master is a trusted party and can pass secrets outboudn all it wants
2015-03-16T19:36:08  <nibalizer> well so the super base case, ignoring security
2015-03-16T19:36:15  <mordred> nibalizer: once we add central services, then we've reinvented puppetmaster, but without the years of production experience and field testing taht puppetmaster has
2015-03-16T19:36:19  <nibalizer> would be to have ansible copy all of the hieradata dir to /etc/puppet/hiera on every host
2015-03-16T19:36:26  <quantumfly> greghaynes: left comment on 164472 but approved because its sort of orthogonal to the change being made there. Curious what you think about it though
2015-03-16T19:36:27  <mordred> nibalizer: yes. that is the super simple version
2015-03-16T19:36:41  <nibalizer> and so the complexity you're adding is the filtering out of that per node
2015-03-16T19:36:45  <mordred> yup
2015-03-16T19:37:36  *** packet has quit IRC
2015-03-16T19:37:36  <nibalizer> what if instead of interacting with the data, ansible just copies common.yaml,group.yaml, and fqdn.yaml over to the other host
2015-03-16T19:37:40  <nibalizer> isn't that simpler?
2015-03-16T19:37:41  <greghaynes> quantumfly: yes, we should. I didnt because its unclear how to  do that in the cmd case but not the nodpool loop case
2015-03-16T19:37:57  <quantumfly> greghaynes ya
2015-03-16T19:38:12  <greghaynes> Seems like we need to exception map :/
2015-03-16T19:38:24  <mordred> nibalizer: maybe - let me think through that a little bit more
2015-03-16T19:38:31  <mordred> nibalizer: biggest issue there is group.yaml
2015-03-16T19:38:44  <mordred> nibalizer: because we're starting to mix worlds again as son as we have one of those
2015-03-16T19:38:44  *** Sukhdev has quit IRC
2015-03-16T19:38:59  <mordred> since ansible is where groups will be defined and hiera won't really know anything about that
2015-03-16T19:39:07  <nibalizer> hehe
2015-03-16T19:39:08  *** mriedem has quit IRC
2015-03-16T19:39:17  <nibalizer> group.yaml is just an optimization
2015-03-16T19:39:18  <mordred> so if we define a group.yaml - it won't really be grokkable by puppet agent in a graduated manner
2015-03-16T19:39:20  <greghaynes> quantumfly: or even better were going to need to pass down logic about if in_cmd: raise else: return
2015-03-16T19:39:32  <mordred> nibalizer: it's kinda necessary given how many things we have that have 20 copies of themselves
2015-03-16T19:39:35  <nibalizer> so that you can have an afs.yaml instead of 4 afsXX.yaml files
2015-03-16T19:39:42  <mordred> right. that's exactly right
2015-03-16T19:39:47  <quantumfly> greghaynes ya it will be nasty
2015-03-16T19:39:48  <mordred> and you've just described the ansible group_vars system
2015-03-16T19:39:58  <mordred> which is why I don't want to re-invent it
2015-03-16T19:40:18  <nibalizer> the more i think about it, the more i like the idea of a git repo with hieradata, and ansible jsut selectively scps it over to the hsots
2015-03-16T19:40:22  <nibalizer> and doesnt' read it
2015-03-16T19:40:27  <openstackgerrit> Matthew Treinish proposed openstack-infra/subunit2sql: Hard code the sql for mysql on migration 1679b5bc102  https://review.openstack.org/164838
2015-03-16T19:40:41  <mtreinish> mordred: ^^^ so actually from googling it doesn't look like alembic does that natively, but I can hack it in
2015-03-16T19:40:43  <nibalizer> because all the ansible read data, then write out yaml/json is janky and a big reason im nervous about this plan
2015-03-16T19:40:43  <mordred> we could totally do that - but it's still not hiera on the master
2015-03-16T19:40:52  <nibalizer> no hiera on the master
2015-03-16T19:40:57  <mordred> nibalizer: it's totally not janky
2015-03-16T19:41:00  <nibalizer> we use a convention in our hieradata git repo
2015-03-16T19:41:22  <mordred> nibalizer: it's 100% of the way ansible works- if you don't like ansible reading yaml data, then kinda the game is over :)
2015-03-16T19:41:47  <mordred> nibalizer: however ... that doesn't mean I don't like your copy files method ...
2015-03-16T19:42:06  <mordred> it's jst that puppet apply won't know anything about group.yaml files
2015-03-16T19:42:07  *** dmorita has quit IRC
2015-03-16T19:42:10  <mtreinish> mordred: the unit tests run the migration with data against a real backend so that should hopefully catch any issues
2015-03-16T19:42:18  <mordred> mtreinish: cool!
2015-03-16T19:43:00  *** ashishb has joined #openstack-infra
2015-03-16T19:43:07  *** packet has joined #openstack-infra
2015-03-16T19:43:14  <mordred> nibalizer: so once we copy those files into /etc/puppet/hieradata.yaml on the remote hosts - we need to make sure that puppet apply knows to not ignore afs.yaml
2015-03-16T19:43:39  <nibalizer> mordred: so if hiera search lookup is 1) fqdn 2) group 3) common then the values set in group.yaml will overrride common values but be overriden by fqdn values
2015-03-16T19:44:29  <nibalizer> right so i think we copy them to /etc/puppet/heireadata/{common,afs,afs01.o.o}.yaml and we set a value group=afs in puppet
2015-03-16T19:44:42  <mordred> nibalizer: how do we set that value?
2015-03-16T19:44:47  <nibalizer> so group=afs could be passed in by ansible facter thing, or just set in the node definition in site.pp
2015-03-16T19:45:02  <mordred> node def in site.pp would be better
2015-03-16T19:45:10  <mordred> so that puppet apply can be run without ansible driving it
2015-03-16T19:45:18  <nibalizer> yep
2015-03-16T19:45:33  <nibalizer> ya with a comment that shellglobbing in node definitons but not hiera lookups is dumb grupm grump throw salmon at puppetlabs
2015-03-16T19:46:40  *** aysyd has quit IRC
2015-03-16T19:46:51  <mordred> nibalizer: ok - ansible hostvars['group_names'] is a thing, so it's easy to see for each host which groups it's a member of
2015-03-16T19:47:00  *** mriedem has joined #openstack-infra
2015-03-16T19:47:05  *** hdd has quit IRC
2015-03-16T19:48:09  <mordred> nibalizer, quantumfly: k. I think I can be on board with this as a thign to explore ^^ since I think it meets my desire of being able to do small steps but also eventually not needing to actually run hiera on the master to run ansible
2015-03-16T19:48:50  *** soren has joined #openstack-infra
2015-03-16T19:49:03  <quantumfly> mordred nibalizer we would only copy data related to the host still right?
2015-03-16T19:49:06  <openstackgerrit> Spencer Krum proposed openstack-infra/system-config: Set $group at node scope for hiera lookups  https://review.openstack.org/164842
2015-03-16T19:49:09  <mordred> quantumfly: yes
2015-03-16T19:49:13  <soren> foobio, quantumfly: Rumour has it that you were looking for me earlier?
2015-03-16T19:49:33  <nibalizer> i dont think hiera.yaml is managed by puppet ?
2015-03-16T19:49:36  <mordred> quantumfly: we'd split hieradata in the current structure into a common/group/fqdn structure, which hiera can still serve to puppet agent
2015-03-16T19:49:38  <quantumfly> soren yup, uvirtbot and openstack meetbot fight over bugs
2015-03-16T19:49:42  <nibalizer> we'll need to make sure that file is managed, and identical, on all machines
2015-03-16T19:49:44  <quantumfly> bug 12345
2015-03-16T19:49:46  <openstack> bug 12345 in isdnutils (Ubuntu) "isdn does not work, fritz avm (pnp?)" [Medium,Fix released] https://launchpad.net/bugs/12345 - Assigned to Matthias Klose (doko)
2015-03-16T19:49:46  <uvirtbot> Launchpad bug 12345 in isdnutils "isdn does not work, fritz avm (pnp?)" [Medium,Fix released] https://launchpad.net/bugs/12345
2015-03-16T19:49:48  <uvirtbot> Launchpad bug 12345 in isdnutils "isdn does not work, fritz avm (pnp?)" [Medium,Fix released]
2015-03-16T19:49:50  <soren> Hah.
2015-03-16T19:49:56  <quantumfly> soren ^ like so
2015-03-16T19:50:01  <foobio> botfight!!!
2015-03-16T19:50:03  <nibalizer> im just sad they dont loop
2015-03-16T19:50:09  *** aysyd has joined #openstack-infra
2015-03-16T19:50:11  *** alexpilotti has quit IRC
2015-03-16T19:50:12  *** sdake has quit IRC
2015-03-16T19:50:13  <mordred> nibalizer: ./modules/openstack_project/files/puppetmaster/hiera.yaml
2015-03-16T19:50:22  <soren> uvirtbot: leave
2015-03-16T19:50:23  <uvirtbot> soren: Error: "leave" is not a valid command.
2015-03-16T19:50:26  <soren> Really?
2015-03-16T19:50:27  <soren> Hm.
2015-03-16T19:50:31  <soren> uvirtbot: quit
2015-03-16T19:50:31  *** uvirtbot has quit IRC
2015-03-16T19:51:10  <soren> That should do it.
2015-03-16T19:51:19  <mordred> nibalizer: can you do a patch to site.pp adding group=blah in such a way that it woudl do something for hiera?
2015-03-16T19:51:20  <quantumfly> soren if we make a list of channels to remove uvirtbot from where should we send it
2015-03-16T19:51:27  <quantumfly> (this affects other channels too)
2015-03-16T19:51:33  <foobio> soren: anyway, the list at https://git.openstack.org/cgit/openstack-infra/system-config/tree/modules/openstack_project/manifests/eavesdrop.pp#n39 is all the channels where we currently have the openstack meetbot residing, and it does what uvirtbot did for us now
2015-03-16T19:51:41  <soren> quantumfly: /quit probably applies pretty globally.
2015-03-16T19:51:44  *** dmorita has joined #openstack-infra
2015-03-16T19:51:46  *** sdake has joined #openstack-infra
2015-03-16T19:52:04  <soren> So it should not be an issue anywhere anymore.
2015-03-16T19:52:08  <nibalizer> mordred:  https://review.openstack.org/164842
2015-03-16T19:52:14  <nibalizer> but that just sets the var
2015-03-16T19:52:28  <mordred> nibalizer: neat!
2015-03-16T19:52:30  <quantumfly> soren gotcha
2015-03-16T19:52:31  <nibalizer> the interesting part is telling hiera.yaml about your search space
2015-03-16T19:52:37  <nibalizer> then setting up the files properly
2015-03-16T19:52:45  <mordred> nibalizer: yeah - that's the part I don't fully grok
2015-03-16T19:52:49  <SpamapS> mordred: I lost track of the migration talk in the backscroll, but it looks like the answer is "find out how to get more space for temp tables, or run our own." ?
2015-03-16T19:52:52  <nibalizer> i need lunch but will do that after
2015-03-16T19:53:05  *** xyang1 has joined #openstack-infra
2015-03-16T19:53:07  <mordred> SpamapS: nope
2015-03-16T19:53:20  <mordred> SpamapS: new answer "run monty's manual sql migration script"
2015-03-16T19:53:22  <mordred> SpamapS: :)
2015-03-16T19:53:25  <openstackgerrit> Matthew Treinish proposed openstack-infra/subunit2sql: Hard code the sql for mysql on migration 1679b5bc102  https://review.openstack.org/164838
2015-03-16T19:53:29  <mordred> SpamapS: I dug into the innodb source code with stewart
2015-03-16T19:53:32  *** amotoki has joined #openstack-infra
2015-03-16T19:53:49  <mordred> SpamapS: it has to do with sort buffer, because the table copy was rebuilding secondary indexes
2015-03-16T19:54:22  <SpamapS> mordred: ah, and with your method you build the indexes one insert at a time.
2015-03-16T19:54:24  <mordred> SpamapS: doing the insert into select from step should not need sort buffer for bulk index creation, although it will be _slower_ because it'll be doing key at a time inserts into the secondary indexes
2015-03-16T19:54:26  <mordred> yup
2015-03-16T19:54:34  <mordred> so it will not need a blown-out buffer
2015-03-16T19:54:37  <SpamapS> that's unfortunate thouigh
2015-03-16T19:54:43  <SpamapS> the thing should have ridiculous amounts of temp space available
2015-03-16T19:54:53  <mordred> SpamapS: it's the cloud
2015-03-16T19:55:01  <mordred> SpamapS: who needs swap?
2015-03-16T19:55:02  <SpamapS> perhaps we should file a bug with the trove people about this.
2015-03-16T19:55:17  *** soren has quit IRC
2015-03-16T19:55:21  <mordred> SpamapS: you know we reformat our ephemeral drives as swap on our long-lived servers, yeah?
2015-03-16T19:55:29  <SpamapS> we can see free space on the datadir, right?
2015-03-16T19:55:40  <SpamapS> mordred: swap for tmpfs?
2015-03-16T19:55:42  <mordred> SpamapS: well, I didn't want to set tmpdir=datadir
2015-03-16T19:55:54  <mordred> SpamapS: no - I'm just saying - clouds tell us we don't want swap
2015-03-16T19:55:56  <mordred> because Cloud
2015-03-16T19:55:57  *** salv-orl_ has quit IRC
2015-03-16T19:55:59  <mordred> but we do want swap
2015-03-16T19:56:04  *** hdd has joined #openstack-infra
2015-03-16T19:56:06  <mordred> just like we want temp space on our database server
2015-03-16T19:56:22  *** sputnik13 has joined #openstack-infra
2015-03-16T19:56:31  <SpamapS> mordred: because swap is kind of a waste of time for servers IMO. It just makes OOM worse by making it harder to kill misbehaving processes.
2015-03-16T19:56:44  <openstackgerrit> Spencer Krum proposed openstack-infra/system-config: Setup hiera lookups to do common,group,fqdn  https://review.openstack.org/164845
2015-03-16T19:56:52  <mordred> SpamapS: except when they just mildly misbehave
2015-03-16T19:56:55  <nibalizer> mordred: okay really going to get lunch now but that should get you started %%
2015-03-16T19:56:58  <nibalizer> er ^^
2015-03-16T19:57:03  <mordred> nibalizer: yah. cool!
2015-03-16T19:57:21  <SpamapS> mordred: I guess I don't recall having mildly misbehaving processes ever, but mmmmk. ;)
2015-03-16T19:57:35  *** afazekas has joined #openstack-infra
2015-03-16T19:57:40  <mordred> SpamapS: imagine you run a long lived java process
2015-03-16T19:57:51  * SpamapS is scared
2015-03-16T19:57:56  * SpamapS is cold
2015-03-16T19:58:01  *** amotoki has quit IRC
2015-03-16T19:58:06  <SpamapS> oh sorry got a little wrapped up in that
2015-03-16T19:58:06  <mordred> SpamapS: that occasionally might want to chew up 60G of RAM for no reason
2015-03-16T19:58:16  <SpamapS> Yeah I've had those, SOLR was like that.
2015-03-16T19:58:22  <mordred> but would be just fine causing swap for a minute or two
2015-03-16T19:58:37  *** r-daneel has joined #openstack-infra
2015-03-16T19:58:53  <SpamapS> Like oh crap why are page faults 100x usual.. oh.. no virt mem for caching things.
2015-03-16T19:58:57  <mordred> yah
2015-03-16T20:00:07  <SpamapS> But my solution to that was to let OOM killer obliterate that java process, and then it would be resurrected by whatever process monitor was in place.
2015-03-16T20:00:53  <SpamapS> And we'd get a ticket to investigate why we had a known bad thing happen in our logs.
2015-03-16T20:01:06  <openstackgerrit> Merged openstack-infra/elastic-recheck: Make test_queries runnable as gating test  https://review.openstack.org/150186
2015-03-16T20:01:11  <SpamapS> ANd we'd say buy us more RAM for the SOLR servers, and then 8 months later... same problem but with 2x the RAM. ;)
2015-03-16T20:01:36  *** tsg_ has joined #openstack-infra
2015-03-16T20:01:37  *** _nadya_ has joined #openstack-infra
2015-03-16T20:01:37  <mtreinish> SpamapS: heh, so then you bought even more ram :)
2015-03-16T20:01:43  <openstackgerrit> Merged openstack-infra/elastic-recheck: Add launchpad test to test_queries  https://review.openstack.org/155138
2015-03-16T20:01:52  <SpamapS> anyway, I acknowledge swap _can_ be useful. I find it makes relatively easy problems easy, and relatively complicated problems incredibly hard.
2015-03-16T20:01:59  <SpamapS> mtreinish: no then I quit. ;)
2015-03-16T20:02:13  <SpamapS> and somebody invented elastic search :)
2015-03-16T20:02:52  *** shashankhegde has joined #openstack-infra
2015-03-16T20:03:06  <SpamapS> So, back to the lecture at hand: We should probably be able to rebuild indexes on a production box.
2015-03-16T20:04:11  *** timcline has quit IRC
2015-03-16T20:05:20  <SpamapS> http://dev.mysql.com/doc/refman/5.6/en/innodb-create-index-implementation.html <-- explains that tmpdir space will cause alter fail
2015-03-16T20:06:01  *** ghostpl_ has joined #openstack-infra
2015-03-16T20:06:21  <rcarrillocruz> quantumfly: hiya, re: sync/async of nova delete for tests, i'm not aware of flags for nova to do a poll/sync delete, per your comments it seems there's a way to do that?
2015-03-16T20:06:50  *** hashar has joined #openstack-infra
2015-03-16T20:06:56  *** ivar-laz_ has joined #openstack-infra
2015-03-16T20:09:43  *** ivar-lazzaro has quit IRC
2015-03-16T20:09:50  <openstackgerrit> Lars Kellogg-Stedman proposed openstack-infra/project-config: Add "heat-coe-templates" project  https://review.openstack.org/164806
2015-03-16T20:09:56  <greghaynes> Theres another thing with stuff like solr where you usually *really* dont want it to swap because then rather than just crash (which you can typically failover for) itll just go really really slow
2015-03-16T20:10:09  <greghaynes> oh, SpamapS said that
2015-03-16T20:10:14  *** mrunge has quit IRC
2015-03-16T20:10:19  <greghaynes> \o/ for running full text indexer
2015-03-16T20:10:52  *** tsufiev is now known as tsufiev_
2015-03-16T20:13:18  <quantumfly> rcarrillocruz shade implements it
2015-03-16T20:15:15  *** afazekas has quit IRC
2015-03-16T20:15:48  <mordred> quantumfly, nibalizer: stepped away for a sec - the more I think about it - the more I really like the new copy-files plan
2015-03-16T20:15:54  <openstackgerrit> Matthew Treinish proposed openstack-infra/subunit2sql: Hard code the sql for mysql on migration 1679b5bc102  https://review.openstack.org/164838
2015-03-16T20:16:15  *** marun_ has joined #openstack-infra
2015-03-16T20:16:22  <quantumfly> mordred I am still not sure exactly what that plan is (I ate luncj)
2015-03-16T20:16:22  <mordred> rcarrillocruz: might actually jus twant to use cloud.delete_server in the cleanup function
2015-03-16T20:16:28  <jbooboo> so much scrollback
2015-03-16T20:16:32  <mordred> quantumfly: don't worry - I'm going to make you a nice new patch
2015-03-16T20:16:40  <mordred> quantumfly: which I tink will be way LESS code than what's up now
2015-03-16T20:16:44  *** afazekas has joined #openstack-infra
2015-03-16T20:16:47  <quantumfly> mordred cool
2015-03-16T20:17:11  <mordred> quantumfly: and have a gradual cutover possible - AND not need to run hiera process on master
2015-03-16T20:17:19  <mordred> quantumfly: in short- I think it's pretty kickass
2015-03-16T20:18:00  <jbooboo> okay good, i'll skip all that then :)
2015-03-16T20:18:14  *** timcline has joined #openstack-infra
2015-03-16T20:18:15  <mordred> jbooboo: yeah - just wait for the updated patch - WAY less reading
2015-03-16T20:18:35  *** dimtruck is now known as zz_dimtruck
2015-03-16T20:19:01  <rcarrillocruz> mordred , quantumfly: ok, i found odd to use shade code to test shade code, thus wanted to stick to plain openstack client calls
2015-03-16T20:19:02  <rcarrillocruz> thx
2015-03-16T20:19:31  <greghaynes> jbooboo: Heyo, quantumfly mentioned that hed like to assert the content of image-list. I think its not a bad idea, but this is kind of at odds with your comment that we shouldnt assert column order (in 164473). I could use a set or somesuch to make it column order independent but IMO thats pretty wierd given that I imagine the content changes a ton more than colmn ordering...
2015-03-16T20:19:33  *** alexpilotti has joined #openstack-infra
2015-03-16T20:19:40  <greghaynes> Anyhow, I think we should pick one of the two, not both
2015-03-16T20:19:44  <mordred> rcarrillocruz: sure- I totally agree with you in the tests ... but in the cleanup it's probably fine ... otherwise you're going to have a ton of copied code
2015-03-16T20:20:09  <greghaynes> jbooboo: er, for added context, this is from the nodepool command testing
2015-03-16T20:20:37  *** zz_dimtruck is now known as dimtruck
2015-03-16T20:20:44  <jbooboo> greghaynes: yeah, was just trying to catch up on that, thanks
2015-03-16T20:22:44  *** dprince has quit IRC
2015-03-16T20:23:12  *** marun_ is now known as marun
2015-03-16T20:23:34  *** afazekas has quit IRC
2015-03-16T20:23:56  *** kgiusti has left #openstack-infra
2015-03-16T20:24:47  <greghaynes> I kind of think as long as we make the code a bit more clear then a change in column ordering would just result in status_colmn = new_index which isnt too much test churn
2015-03-16T20:25:00  <jbooboo> greghaynes, quantumfly: so my _primary_ thought is that mostly we want to make sure we don't break the commands -- ie, they should be able to cause images to be built, and the display ones should be able to read data, etc.
2015-03-16T20:25:17  <jbooboo> greghaynes, quantumfly: i think i'm okay with additional checks of the output in that first test case...
2015-03-16T20:25:51  <quantumfly> I dont think we need to confirm age or anything like that. just a small sanity check that the row is valid data
2015-03-16T20:25:52  <jbooboo> greghaynes, quantumfly: i think the use of the output in the second case, where deleting a snapshot was being tested, was more troubling.
2015-03-16T20:25:57  <quantumfly> and not "fail"
2015-03-16T20:26:03  <jbooboo> quantumfly: that sounds reasonable
2015-03-16T20:26:07  *** tsg_ has quit IRC
2015-03-16T20:26:34  <jbooboo> greghaynes: but it looks like you've already removed that, so i think we're all on the same page.  ++
2015-03-16T20:27:06  *** gokrokve has quit IRC
2015-03-16T20:27:23  *** gokrokve has joined #openstack-infra
2015-03-16T20:27:43  <greghaynes> quantumfly: yep, agreed on that goal
2015-03-16T20:27:46  <greghaynes> ok, cool
2015-03-16T20:30:30  *** ashishb has quit IRC
2015-03-16T20:31:11  <openstackgerrit> Boris Pavlovic proposed openstack-infra/project-config: Use template for Rally py34 job  https://review.openstack.org/164858
2015-03-16T20:31:57  *** julim has quit IRC
2015-03-16T20:34:39  *** otter768 has joined #openstack-infra
2015-03-16T20:34:45  *** _nadya_ has quit IRC
2015-03-16T20:35:35  <openstackgerrit> James E. Blair proposed openstack-infra/nodepool: Rename config-validate to validate-config  https://review.openstack.org/164859
2015-03-16T20:35:42  *** salv-orlando has joined #openstack-infra
2015-03-16T20:37:49  <openstackgerrit> Lars Kellogg-Stedman proposed openstack-infra/project-config: Add "heat-coe-templates" project  https://review.openstack.org/164806
2015-03-16T20:38:09  *** afazekas has joined #openstack-infra
2015-03-16T20:39:04  *** dkliban is now known as dkliban_brb
2015-03-16T20:39:25  *** otter768 has quit IRC
2015-03-16T20:39:28  *** e0ne has joined #openstack-infra
2015-03-16T20:40:27  *** dboik has quit IRC
2015-03-16T20:40:58  <foobio> is distutils.spawn.find_executable() really the least revolting python 2.x alternative to shutil.which() from >=3.3?
2015-03-16T20:41:02  *** dboik has joined #openstack-infra
2015-03-16T20:41:26  <openstackgerrit> Merged openstack/requirements: Bump PyECLib version to 1.0.3  https://review.openstack.org/164112
2015-03-16T20:42:46  <quantumfly> zaro: http://logs.openstack.org/59/164859/1/check/nodepool-coverage/bf38a9f/cover/index.html cover is working now. Though with a minor issue where zuul swift upload generates an index.html even if there is alread an index.html
2015-03-16T20:42:49  <quantumfly> I will work on a fix for that now
2015-03-16T20:42:55  <quantumfly> jhesketh: ^ for when you wake
2015-03-16T20:43:20  <foobio> there are times when i wish python 2.x would just hurry up and die already
2015-03-16T20:43:22  *** Rockyg has quit IRC
2015-03-16T20:43:46  <mtreinish> mordred, SpamapS: I was just thinking if we can get get and put mysql config opts with trove, would it be bad to set tmpdir to be the data dir?
2015-03-16T20:44:21  *** thedodd has quit IRC
2015-03-16T20:44:41  <dkranz> sdague, foobio : I am trying to add some neutron stress tests but need this simple change to run the stress job with neutron https://review.openstack.org/#/c/164705/
2015-03-16T20:45:22  <mordred> mtreinish: I mean - I'm a bit concerned about doing that - just because eek. however - maybe if we did a subdir of datadir
2015-03-16T20:45:26  <mordred> SpamapS: ^^ thoughts?
2015-03-16T20:45:27  <mordred> devananda: ^^
2015-03-16T20:45:34  <openstackgerrit> Peter Hamilton proposed openstack/requirements: Update PyKMIP version in requirements  https://review.openstack.org/164449
2015-03-16T20:45:36  <quantumfly> zaro: also those files don't appear to have a mime type of html
2015-03-16T20:45:43  <mordred> devananda: beacuse, you know, you don't have anything else better to do than mysql consulting this week
2015-03-16T20:45:50  <mtreinish> mordred: well can we create a subdir? :)
2015-03-16T20:46:00  <foobio> dkranz: i guess no longer running them with nova-net is acceptable loss?
2015-03-16T20:46:08  <mordred> mtreinish: we can - I'm not saying it won't be hacky
2015-03-16T20:46:11  <openstackgerrit> Peter Hamilton proposed openstack/requirements: Update PyKMIP version in requirements  https://review.openstack.org/164449
2015-03-16T20:46:22  <dkranz> foobio: actually, I have no objection to adding another one
2015-03-16T20:46:36  <mordred> mtreinish: but we could create a schema called "tmp" which would cause a subdir to be created in the datadir - and then we could set tmpdir=datadir/tmp which would use that dir
2015-03-16T20:46:41  <mordred> and if it trashes somethign in that dir *meh*
2015-03-16T20:46:50  <quantumfly> dkranz: foobio that is probably preferable since nova net is still alive
2015-03-16T20:46:53  <dkranz> foobio: I know we have been trying to avoid more jobs but this is just periodic
2015-03-16T20:47:09  <zaro> quantumfly: is that something that's doneon server side?
2015-03-16T20:47:23  <dkranz> quantumfly: will do. BTW, it would really help if there were a way to run periodic jobs like this without having to run everything in check experimental
2015-03-16T20:47:31  *** afazekas has quit IRC
2015-03-16T20:47:52  <dkranz> quantumfly: I know this was discussed in Paris but I
2015-03-16T20:47:54  <quantumfly> zaro: I think both issues are related to how we upload the files, we should set the type so that swift knows its html and can be served to browsers that way
2015-03-16T20:48:02  <dkranz> quantumfly: am not sure if there was any action planned
2015-03-16T20:48:12  <quantumfly> zaro: and we shouldn't upload an index.html if one is laready there
2015-03-16T20:48:22  <foobio> dkranz: you mean like a way to manually trigger all periodic jobs?
2015-03-16T20:48:40  <dkranz> foobio: Ideally a way to manually trigger just one
2015-03-16T20:49:14  <dkranz> foobio: the periodic jobs are mostly unrelated
2015-03-16T20:49:35  *** e0ne has quit IRC
2015-03-16T20:49:37  *** afazekas has joined #openstack-infra
2015-03-16T20:50:01  *** packet has quit IRC
2015-03-16T20:50:08  <dkranz> foobio: right now if I want to test a stress test I have to do check experimental in tempest which runs a zillion other jobs too and is quite wasteful
2015-03-16T20:50:36  *** hichihara has joined #openstack-infra
2015-03-16T20:50:36  <mtreinish> mordred: heh, ok. :)  I'll go back to debugging the mordred migration failure then: http://logs.openstack.org/38/164838/3/check/gate-subunit2sql-python27/7d4c73c/console.html#_2015-03-16_20_26_18_305
2015-03-16T20:50:59  *** andreykurilin_ has joined #openstack-infra
2015-03-16T20:52:52  <mtreinish> foobio: I think dkranz is looking for something like a regex filter on check experimental, so you do check experimental $REGEX and it only runs experimental jobs that match regex
2015-03-16T20:53:10  <dkranz> mtreinish: +1
2015-03-16T20:53:48  *** dangers is now known as dangers_away
2015-03-16T20:53:56  <foobio> mtreinish: dkranz: yeah, trying to think through the implications from zuul's perspective. right now it knows how to run all jobs in a particular pipeline for a given change's project, filtered based on branch and changed files
2015-03-16T20:54:07  <openstackgerrit> Merged openstack-infra/project-config: Rename experimental nova py27 to run on dsvm nodes  https://review.openstack.org/164777
2015-03-16T20:54:22  <foobio> so mostly pondering how one of those could be hooked to minimize complexity
2015-03-16T20:54:45  <foobio> in this case we'd need to have a special kind of comment trigger i think
2015-03-16T20:54:55  <mordred> mtreinish: it looks like it's still doing something with sqla
2015-03-16T20:55:24  <foobio> can't just use the normal comment trigger since the list of jobs to run would be dependent on the contents of the comment from the stream rather than determined explicitly in the config
2015-03-16T20:55:25  <dkranz> foobio: I understand it is nontrivial. My vision is that we should have all kinds of interesting periodic jobs for "non-golden" configurations and tests that take too long for the gate.
2015-03-16T20:55:32  *** thedodd has joined #openstack-infra
2015-03-16T20:55:46  <mordred> mtreinish: what's the microsecond_data_migration supposed to be doing?
2015-03-16T20:56:00  <dkranz> foobio: assuming of course they can be watched and not bitrot...
2015-03-16T20:56:04  *** dustins has quit IRC
2015-03-16T20:56:23  <anteaya> SpamapS: so on https://review.openstack.org/#/c/158148/3 both jbooboo and ajaeger asked for it to be non-voting to start
2015-03-16T20:56:36  *** jaypipes has quit IRC
2015-03-16T20:56:41  <anteaya> SpamapS: is there a reason why you would like to test the job with a non-voting job to begin?
2015-03-16T20:56:47  <anteaya> would not
2015-03-16T20:57:05  *** jaypipes has joined #openstack-infra
2015-03-16T20:57:43  <mtreinish> mordred: it loops over all the rows extracts microseconds from the time columns and puts it in the new microseconds column
2015-03-16T20:57:52  <dkranz> foobio: thanks for the +2. After that merges I will add another non-neutron stress job. I need to make a new config for it in tempest first.
2015-03-16T20:58:29  <mordred> mtreinish: how is it doing that?
2015-03-16T20:58:38  <mordred> mtreinish: I didn't think the old column had microseconds?
2015-03-16T20:58:53  *** harlowja is now known as harlowja_away
2015-03-16T20:58:55  <mtreinish> mordred: it's skipped on the infra db with that config flag
2015-03-16T20:59:05  <quantumfly> dkranz: foobio I think the idea was to run most of those things as post jobs so you wouldn't need to manuall trigger anything. The issue is we need some way of presenting the results to uses
2015-03-16T20:59:14  <mtreinish> I put that there in the case someone was running the db against a backend which didn't strip the microseconds
2015-03-16T20:59:17  <foobio> dkranz: i think the main pushback is going to be that the "recheck" and "check experimental" comments are a terrible interface to start with, and we should be doing this via a zuul api/ui rather than accumulating more technical debt on that front
2015-03-16T20:59:20  <mordred> mtreinish: ah - so the data migration ... gotcha
2015-03-16T20:59:40  <mordred> mtreinish: so the problem here is that clearly the migration did not succeed
2015-03-16T20:59:47  *** carl_baldwin has joined #openstack-infra
2015-03-16T20:59:53  <dkranz> foobio: It doesn't really matter much to me what the UX is for this
2015-03-16T20:59:55  <mordred> mtreinish: does that sqlalchemy execution context have a schema associated with it?
2015-03-16T20:59:58  *** bhunter71 has quit IRC
2015-03-16T21:00:02  *** soren has joined #openstack-infra
2015-03-16T21:00:13  <mtreinish> mordred: yeah, I'm manually stepping through the script now
2015-03-16T21:00:30  <dkranz> quantumfly: I don't quite understand what you mean by post jobs
2015-03-16T21:00:31  <mtreinish> mordred: oh, dunno
2015-03-16T21:00:34  *** packet has joined #openstack-infra
2015-03-16T21:00:35  <quantumfly> zaro: looking at response headers from swift the mime is text/html
2015-03-16T21:00:42  <quantumfly> dkranz: jobs that run after every merge
2015-03-16T21:00:42  <mtreinish> mordred: fwiw, when I ran the script manually it failed: http://paste.openstack.org/show/192735/
2015-03-16T21:00:55  <nibalizer> mordred: sweet let me know how i can help
2015-03-16T21:00:57  *** sigmavirus24 is now known as sigmavirus24_awa
2015-03-16T21:01:20  *** Sukhdev has joined #openstack-infra
2015-03-16T21:01:22  <dkranz> quantumfly: but I want to see them pass first before they are merged
2015-03-16T21:01:42  <dkranz> quantumfly: and so do reviewers
2015-03-16T21:01:50  <mordred> mtreinish: k. gimme a sec
2015-03-16T21:01:53  <quantumfly> dkranz: sure so thats a separate problem. What we discussed at the summit is the above thing
2015-03-16T21:01:57  <jogo> sdague: quick question related to running https://review.openstack.org/#/c/155138/ as a new job
2015-03-16T21:02:19  <dkranz> quantumfly: ok, I missed that distinction,
2015-03-16T21:02:50  <jogo> oh neve rmind
2015-03-16T21:02:58  <quantumfly> does anyone know why http://logs.openstack.org/59/164859/1/check/nodepool-coverage/bf38a9f/cover/nodepool_allocation.html wouldn't render given the response headers?
2015-03-16T21:03:01  <mordred> mtreinish: try this: LOCK TABLES test_runs write, test_runs_migration write; instead of the lock table command
2015-03-16T21:03:13  <openstackgerrit> Clark Boylan proposed openstack-infra/project-config: Do not generate index.html if one exists  https://review.openstack.org/164866
2015-03-16T21:03:19  <quantumfly> zaro: ^ thats part of the fix
2015-03-16T21:03:23  <mordred> mtreinish: and UNLOCK TABLES: instead of the unlock table line
2015-03-16T21:04:12  <mtreinish> mordred: now it complains that the column counts don't match: ERROR 1136 (21S01): Column count doesn't match value count at row 1
2015-03-16T21:05:05  <mordred> mtreinish: neat. one sec
2015-03-16T21:05:08  <mordred> mtreinish: isn't this fun?
2015-03-16T21:05:29  <foobio> dkranz: so now i'm starting to miss what the connection is between requesting individual runs of experimental jobs and whatever you opened with about periodic jobs
2015-03-16T21:05:38  *** ivar-laz_ has quit IRC
2015-03-16T21:05:47  <quantumfly> OH! we wrap that entire thing in a span
2015-03-16T21:05:53  <quantumfly> os_loganalyze must be breaking that
2015-03-16T21:05:54  <quantumfly> zaro: ^
2015-03-16T21:06:02  <quantumfly> er in <pre><span>
2015-03-16T21:06:09  <dkranz> foobio: the connection is that the tempest periodic jobs are also on the experimental queue which is the only way to run them on demand
2015-03-16T21:06:12  *** ivar-lazzaro has joined #openstack-infra
2015-03-16T21:06:34  <mordred> mtreinish: INSERT INTO test_runs_migration SELECT id, test_id, run_id, status, start_time, stop_time, 0, 0 from test_runs;
2015-03-16T21:06:42  <mordred> mtreinish: try that for the insert
2015-03-16T21:06:49  <dkranz> foobio: and I can do that, but it is a waste, and will get worse when we have more non-gate jobs that want to be triggered on demand
2015-03-16T21:06:59  <mtreinish> mordred: heh actually yes, I've learned more about mysql in the past few hours then I have since I started this project :)
2015-03-16T21:07:10  <foobio> dkranz: okay, but that's separate from the periodic jobs concern then i guess
2015-03-16T21:07:29  <dkranz> foobio: with respect to the issue of who is watching periodic jobs, yes.
2015-03-16T21:07:38  * foobio needs to head out to dinner, bbl
2015-03-16T21:07:44  <dkranz> foobio: sorry I mixed them together
2015-03-16T21:07:53  <mordred> mtreinish: you could do this: INSERT INTO test_runs_migration SELECT id, test_id, run_id, status, start_time, stop_time, microsecond(start_time), microsecond(stop_time) from test_runs;
2015-03-16T21:07:53  *** ivar-lazzaro has quit IRC
2015-03-16T21:07:53  *** Slower has joined #openstack-infra
2015-03-16T21:07:58  *** jgrimm is now known as zz_jgrimm
2015-03-16T21:08:01  <mordred> and avoid the need for the follow on sqlalchemy migration
2015-03-16T21:08:18  <Slower> so I made a channel #kolla, would like to get it registered
2015-03-16T21:09:01  *** ivar-lazzaro has joined #openstack-infra
2015-03-16T21:09:13  *** amotoki has joined #openstack-infra
2015-03-16T21:09:18  *** andreykurilin_ has quit IRC
2015-03-16T21:09:32  <Slower> and I'm not the only one on it :)
2015-03-16T21:09:37  *** ayoung has joined #openstack-infra
2015-03-16T21:09:47  <mtreinish> mordred: hmm last line fails now: ERROR 1217 (23000): Cannot delete or update a parent row: a foreign key constraint fails
2015-03-16T21:10:28  *** tsg has joined #openstack-infra
2015-03-16T21:10:38  <anteaya> Slower: register it with freenode
2015-03-16T21:10:47  <anteaya> Slower: and then read http://ci.openstack.org/irc.html#access
2015-03-16T21:11:02  <openstackgerrit> Joe Gordon proposed openstack-infra/project-config: Add job for network based elastic-recheck queries test  https://review.openstack.org/164869
2015-03-16T21:11:15  <jogo> sdague: ^ I am fairly sure I did that all wrong
2015-03-16T21:11:19  <devananda> mordred: mysql obfuscates the file names when making temp tables so eg. i couldn't do CREATE TEMP TABLE `../mysql/user` .. or something similar
2015-03-16T21:11:25  <quantumfly> zaro yup I see the issue second patch soon
2015-03-16T21:11:46  <devananda> mordred: I mean, it seems crazy because I've never even wanted to do that
2015-03-16T21:11:48  <mtreinish> mordred: hmm, I guess I could, would that make the infra case slower though?
2015-03-16T21:12:01  <openstackgerrit> Michael Krotscheck proposed openstack-infra/storyboard-webclient: Enabled eslint:no-use-before-define  https://review.openstack.org/161510
2015-03-16T21:12:02  <openstackgerrit> Michael Krotscheck proposed openstack-infra/storyboard-webclient: Enabled eslint:no-shadow  https://review.openstack.org/161508
2015-03-16T21:12:03  <openstackgerrit> Michael Krotscheck proposed openstack-infra/storyboard-webclient: Enabled eslint:space-infix-ops  https://review.openstack.org/161509
2015-03-16T21:12:04  <openstackgerrit> Michael Krotscheck proposed openstack-infra/storyboard-webclient: Enabled eslint:space-unary-ops  https://review.openstack.org/161506
2015-03-16T21:12:05  <openstackgerrit> Michael Krotscheck proposed openstack-infra/storyboard-webclient: Enabled eslint:consistent-return  https://review.openstack.org/161507
2015-03-16T21:12:06  <openstackgerrit> Michael Krotscheck proposed openstack-infra/storyboard-webclient: Enabled eslint:strict  https://review.openstack.org/161504
2015-03-16T21:12:07  <openstackgerrit> Michael Krotscheck proposed openstack-infra/storyboard-webclient: Enabled eslint:no-console  https://review.openstack.org/161505
2015-03-16T21:12:08  <openstackgerrit> Michael Krotscheck proposed openstack-infra/storyboard-webclient: Enabled eslint:no-underscore-dangle  https://review.openstack.org/161503
2015-03-16T21:12:16  <openstackgerrit> Spencer Krum proposed openstack-infra/system-config: Manage hiera.yaml on all hosts  https://review.openstack.org/164870
2015-03-16T21:12:53  <mordred> mtreinish: shouldn't do - it's doing a select from / insert into anyway
2015-03-16T21:13:13  <mordred> mtreinish: so it's traversing every row in teh table regardless - doing math on one of the values will not be noticable
2015-03-16T21:14:35  <Slower> anteaya: thanks!
2015-03-16T21:14:47  <anteaya> Slower: welcome
2015-03-16T21:15:13  <nibalizer> mordred: are we okay with some duplication (is there a need even?) between e.g. afsdb and afs groups/roles/machinecollections? i like keeping it explicit and non-inheriting because "yay simple" but we could get fancy if needed
2015-03-16T21:15:18  *** ldnunes has quit IRC
2015-03-16T21:15:47  <openstackgerrit> Clint 'SpamapS' Byrum proposed openstack-infra/shade: Add unit test for create_server  https://review.openstack.org/160155
2015-03-16T21:15:48  <openstackgerrit> Clint 'SpamapS' Byrum proposed openstack-infra/shade: Add basic unit test for shade.openstack_cloud  https://review.openstack.org/159674
2015-03-16T21:16:24  <mordred> nibalizer: I think it's fine to duplicate - ansible can handle a thing being in more than one group, but the code would also handle copying all of teh related groups over
2015-03-16T21:16:32  *** afazekas has quit IRC
2015-03-16T21:16:58  *** radez is now known as radez_g0n3
2015-03-16T21:18:07  <openstackgerrit> Matthew Treinish proposed openstack-infra/subunit2sql: Hard code the sql for mysql on migration 1679b5bc102  https://review.openstack.org/164838
2015-03-16T21:18:56  <mtreinish> mordred: ^^^ that's the latest, it works except it doesn't move the foreign keys to the new table, so it can't drop the old one
2015-03-16T21:19:17  <openstackgerrit> Michael Krotscheck proposed openstack-infra/storyboard-webclient: Removed grunt:server  https://review.openstack.org/163165
2015-03-16T21:19:34  <mordred> mtreinish: oh - I can add that ... can I add it in the morning though?
2015-03-16T21:19:42  <mordred> mtreinish: are there inbound foreign keys from other tables?
2015-03-16T21:20:16  <openstackgerrit> Matthew Treinish proposed openstack-infra/subunit2sql: Hard code the sql for mysql on migration 1679b5bc102  https://review.openstack.org/164838
2015-03-16T21:21:48  <mtreinish> mordred: yes, the test_run metadata table has a foreign key which is the primary key in test_runs. (or did I get that backwards)
2015-03-16T21:22:10  *** hashar has quit IRC
2015-03-16T21:22:14  *** sambetts has quit IRC
2015-03-16T21:22:21  *** tiswanso has quit IRC
2015-03-16T21:22:23  <mordred> mtreinish: will you pastebin "show create table test_run \G" ?
2015-03-16T21:23:33  <mtreinish> mordred: http://paste.openstack.org/show/192699/
2015-03-16T21:23:48  *** afazekas has joined #openstack-infra
2015-03-16T21:24:55  <mordred> mtreinish: no - that way should be fine .. one sec
2015-03-16T21:24:59  *** asettle has joined #openstack-infra
2015-03-16T21:25:06  *** sambetts has joined #openstack-infra
2015-03-16T21:26:17  * anteaya goes to gather sap, now that the neutron meeting is over
2015-03-16T21:26:55  *** banix has quit IRC
2015-03-16T21:27:31  *** packet has quit IRC
2015-03-16T21:27:45  <openstackgerrit> Doug Wiegley proposed openstack-infra/devstack-gate: Mechanism to allow easier fine-tuning of devstack-gate services  https://review.openstack.org/164874
2015-03-16T21:28:19  <mordred> mtreinish: http://paste.openstack.org/show/192737
2015-03-16T21:28:28  *** dkliban_brb is now known as dkliban
2015-03-16T21:29:01  <mordred> mtreinish: somethign liek that
2015-03-16T21:29:18  *** afazekas has quit IRC
2015-03-16T21:29:32  <mordred> mtreinish: you need to drop the test_run_metadata foreign key so that you can drop test_runs_old;
2015-03-16T21:29:45  <mordred> but then add it back again pointing to the new table
2015-03-16T21:30:32  <mtreinish> mordred: ah, ok thanks
2015-03-16T21:33:14  *** mriedem is now known as mriedem_away
2015-03-16T21:33:57  *** mattfarina has quit IRC
2015-03-16T21:34:42  *** garyh has quit IRC
2015-03-16T21:37:27  <krotscheck> Can someone confirm an edge case for me? https://storyboard.openstack.org/#!/story/10 fails to resolve, throws the user back to the dashboard. Other stories are fine, but this one (and a few others) seem borked.
2015-03-16T21:37:47  <jbooboo> krotscheck: confirmed (not logged in)
2015-03-16T21:37:49  <krotscheck> I think it's because that story predates story authors.
2015-03-16T21:38:06  <krotscheck> jbooboo: Thanks
2015-03-16T21:38:11  <jbooboo> krotscheck: also confirmed while logged in
2015-03-16T21:38:28  *** cdent has joined #openstack-infra
2015-03-16T21:38:39  *** aysyd has quit IRC
2015-03-16T21:38:53  <openstackgerrit> Matthew Treinish proposed openstack-infra/subunit2sql: Hard code the sql for mysql on migration 1679b5bc102  https://review.openstack.org/164838
2015-03-16T21:39:10  <pleia2> krotscheck: throws a bunch of errors (not logged in)
2015-03-16T21:39:19  <pleia2> (I can screenshot if it's helpful)
2015-03-16T21:39:19  <krotscheck> Thanks everyone.
2015-03-16T21:39:25  <krotscheck> Naah, it's throwing those for me too.
2015-03-16T21:39:31  <krotscheck> and I have advanced debugging things.
2015-03-16T21:39:32  * pleia2 nods
2015-03-16T21:39:36  <pleia2> figured :)
2015-03-16T21:40:24  *** aysyd has joined #openstack-infra
2015-03-16T21:40:47  <openstackgerrit> greghaynes proposed openstack-infra/nodepool: Check image-list output in cmd tests  https://review.openstack.org/164356
2015-03-16T21:40:48  <openstackgerrit> Swaminathan Vasudevan proposed openstack-infra/project-config: Add Neutron DVR aiopcpu job for multi-node testing  https://review.openstack.org/158415
2015-03-16T21:40:51  <greghaynes> quantumfly: ^
2015-03-16T21:41:31  <greghaynes> Note we now have to wait_for_threads for obvious reasons
2015-03-16T21:42:14  <mtreinish> pleia2: do you remember what the syntax error was on the mysqldump from friday?
2015-03-16T21:42:24  *** bswartz has joined #openstack-infra
2015-03-16T21:42:51  <openstackgerrit> Michael Krotscheck proposed openstack-infra/storyboard-webclient: Added null check for story creator_id.  https://review.openstack.org/164877
2015-03-16T21:42:52  <openstackgerrit> Matthew Treinish proposed openstack-infra/subunit2sql: Hard code the sql for mysql on migration 1679b5bc102  https://review.openstack.org/164838
2015-03-16T21:42:58  <pleia2> mtreinish: I don't remember, but I can probably browse logs to see if I put it here/jog my memory
2015-03-16T21:43:09  *** dizquierdo has joined #openstack-infra
2015-03-16T21:43:34  <openstackgerrit> Joe Gordon proposed openstack-infra/project-config: Add job for network based elastic-recheck queries test  https://review.openstack.org/164869
2015-03-16T21:43:37  *** ddieterly has quit IRC
2015-03-16T21:44:01  <mtreinish> pleia2: cool thanks
2015-03-16T21:44:17  <openstackgerrit> greghaynes proposed openstack-infra/nodepool: Indicate error when deleting an invalid snapshot  https://review.openstack.org/164472
2015-03-16T21:45:12  <openstackgerrit> greghaynes proposed openstack-infra/nodepool: Test snapshot image deletion command  https://review.openstack.org/164473
2015-03-16T21:46:44  <pleia2> mtreinish: so we had the ansible logs http://paste.openstack.org/show/192214/ and the /opt/subunit2sql.sql.gz just contained the response you'd get if you just type "mysqldump" or have the wrong parameters
2015-03-16T21:46:55  <pleia2> so a couple lines of usage
2015-03-16T21:47:18  *** sigmavirus24_awa is now known as sigmavirus24
2015-03-16T21:47:43  <pleia2> I didn't find why that happened (what it was trying to run and failing)
2015-03-16T21:47:43  <mtreinish> pleia2: :( so it didn't say what the wrong params were?
2015-03-16T21:47:47  <pleia2> alas, no
2015-03-16T21:48:03  *** weshay has quit IRC
2015-03-16T21:48:26  <pleia2> meeting on St. Patrick's Day means we got a themed meeting announcement
2015-03-16T21:48:31  *** pc_m has quit IRC
2015-03-16T21:50:42  <jhesketh> Morning
2015-03-16T21:50:49  <pleia2> morning jhesketh
2015-03-16T21:50:59  <jbooboo> pleia2: ++!
2015-03-16T21:53:43  *** prad has quit IRC
2015-03-16T21:54:16  *** ivar-laz_ has joined #openstack-infra
2015-03-16T21:55:04  <quantumfly> jhesketh: good morning, will have a couple enable_swift changes for review shortly
2015-03-16T21:55:12  *** Somay has joined #openstack-infra
2015-03-16T21:55:17  <quantumfly> jbooboo: the first one is up, working on a second to os_loganalyze (writing tests is taking more time than I hoped)
2015-03-16T21:55:21  <quantumfly> er jhesketh ^
2015-03-16T21:56:12  *** Somay has quit IRC
2015-03-16T21:56:16  <SpamapS> hm
2015-03-16T21:56:22  <jhesketh> quantumfly: okay cool, will take a look
2015-03-16T21:56:29  <SpamapS> has anybody ever played with the CLI tool that comes with gearmand (just called gearman) and geard?
2015-03-16T21:56:38  <SpamapS> worker mode doesn't seem to work
2015-03-16T21:57:14  *** ivar-lazzaro has quit IRC
2015-03-16T21:57:37  <marun> jogo: help to find pass/fail rate for a job?
2015-03-16T21:57:52  *** Somay has joined #openstack-infra
2015-03-16T21:58:19  *** yamamoto has quit IRC
2015-03-16T21:58:25  <marun> jogo: ah, got it
2015-03-16T21:58:25  *** cdent has quit IRC
2015-03-16T21:58:47  *** rlandy has quit IRC
2015-03-16T21:59:49  *** adalbas has quit IRC
2015-03-16T21:59:53  *** aysyd has quit IRC
2015-03-16T22:00:01  <anteaya> SpamapS: I had a question for you in backscroll
2015-03-16T22:00:04  *** soren has quit IRC
2015-03-16T22:00:06  *** timcline has quit IRC
2015-03-16T22:00:07  <anteaya> SpamapS: did you see it?
2015-03-16T22:00:36  <anteaya> SpamapS: it was about your patch 158148
2015-03-16T22:01:06  <mtreinish> SpamapS: I've only ever used the server, seemed to work ok for my local testing
2015-03-16T22:01:15  <jbooboo> SpamapS: i have not
2015-03-16T22:01:22  <mtreinish> or was that a different package, it's been several months
2015-03-16T22:02:21  *** yfried_ has quit IRC
2015-03-16T22:03:13  *** dimtruck is now known as zz_dimtruck
2015-03-16T22:03:53  *** tkelsey has quit IRC
2015-03-16T22:03:57  *** aysyd has joined #openstack-infra
2015-03-16T22:07:52  <quantumfly> I think os_loganalyze tests have melted my brain
2015-03-16T22:10:14  <openstackgerrit> Merged openstack-infra/puppet-nodepool: Parameterise logging config template  https://review.openstack.org/164031
2015-03-16T22:10:16  *** ddieterly has joined #openstack-infra
2015-03-16T22:10:35  <anteaya> quantumfly: no no I need your brain
2015-03-16T22:10:49  <anteaya> quantumfly: I'm reviewing https://review.openstack.org/#/c/164866/1/jenkins/scripts/zuul_swift_upload.py
2015-03-16T22:11:05  <openstackgerrit> Maru Newby proposed openstack-infra/project-config: Configure neutron to gate on neutron-dsvm-api job  https://review.openstack.org/164886
2015-03-16T22:11:08  *** aysyd has quit IRC
2015-03-16T22:11:09  <anteaya> quantumfly: under what conditions would your new if file_path be false?
2015-03-16T22:11:41  *** harlowja_away is now known as harlowja
2015-03-16T22:11:43  <quantumfly> anteaya: when make_index_file short circuits because an index file already exists
2015-03-16T22:11:53  * anteaya looks again
2015-03-16T22:12:07  <SpamapS> jbooboo: it doesn't seem to submit a client id, and that perturbs geard
2015-03-16T22:12:37  <anteaya> I looked at it and looked at it and wasn't seeing it, thanks quantumfly
2015-03-16T22:12:52  *** gordc has quit IRC
2015-03-16T22:13:18  *** stevemar has quit IRC
2015-03-16T22:13:36  <SpamapS> anteaya: re https://review.openstack.org/#/c/158148/3 , I believe python3 in a gate is pretty straight forward .. it works, or it doesn't. So I don't really think it needs time to stabilize.
2015-03-16T22:14:45  <anteaya> SpamapS: you are aware that adding a new untested job to a repo's gate blocks the repo until the job is fixed?
2015-03-16T22:14:55  <anteaya> if it is a broken job?
2015-03-16T22:15:44  <jbooboo> SpamapS: that sounds like a potential geard bug
2015-03-16T22:16:26  *** amitgandhinz has quit IRC
2015-03-16T22:17:14  *** tsg has quit IRC
2015-03-16T22:17:17  *** soren has joined #openstack-infra
2015-03-16T22:18:01  *** mattfarina has joined #openstack-infra
2015-03-16T22:18:08  *** mpopow has quit IRC
2015-03-16T22:18:24  *** mattfarina has quit IRC
2015-03-16T22:21:07  *** sputnik13 has quit IRC
2015-03-16T22:22:09  *** carl_baldwin has quit IRC
2015-03-16T22:22:43  *** bknudson has quit IRC
2015-03-16T22:23:58  *** Somay has quit IRC
2015-03-16T22:25:48  *** ivar-laz_ has quit IRC
2015-03-16T22:25:49  <openstackgerrit> Ramy Asselin proposed openstack-infra/system-config: Log server can run on Apache 2.4 / Ubuntu Trusty  https://review.openstack.org/164889
2015-03-16T22:26:11  <greghaynes> quantumfly: so interesting thing about pypi-mirror and using it for making a wheel only mirror - a recent feature moves the non arch specific wheels into the main mirror dir, so theres not an easy way to separate them out from the rest of the packages
2015-03-16T22:26:23  *** ivar-lazzaro has joined #openstack-infra
2015-03-16T22:27:32  <openstackgerrit> Clark Boylan proposed openstack-infra/os-loganalyze: Update regex for better HTML detection.  https://review.openstack.org/164891
2015-03-16T22:27:47  <quantumfly> jhesketh: sdague ^ that will make coverage logs render properly when served via swift
2015-03-16T22:28:07  <quantumfly> greghaynes: I don't think thats a problem
2015-03-16T22:28:20  <quantumfly> greghaynes: we will just have a few duplicate files sitting around but this way everything gets a wheel in a simple way
2015-03-16T22:28:35  <greghaynes> yep, as long as were fine with the duplication then that works
2015-03-16T22:30:13  *** dboik_ has joined #openstack-infra
2015-03-16T22:30:59  *** ddieterly has quit IRC
2015-03-16T22:31:25  *** MarkAtwood_ has quit IRC
2015-03-16T22:32:02  <jhesketh> quantumfly: lgtm
2015-03-16T22:32:15  <quantumfly> jhesketh: http://logs.openstack.org/59/164859/1/check/nodepool-coverage/bf38a9f/cover/nodepool_allocation.html is an occurence of the issue
2015-03-16T22:32:23  <quantumfly> jhesketh: the doctype first line seems to be what broke it
2015-03-16T22:33:21  *** dboik has quit IRC
2015-03-16T22:33:50  <quantumfly> jhesketh: https://review.openstack.org/#/c/164866/ is the other related change. coverage generates an index.html for us but we override it
2015-03-16T22:34:02  *** nelsnelson has quit IRC
2015-03-16T22:34:09  <quantumfly> jhesketh: ^ probably needs more scrutiny simply because swift and apache are both involved
2015-03-16T22:34:23  *** dboik_ has quit IRC
2015-03-16T22:34:50  <openstackgerrit> Doug Wiegley proposed openstack-infra/devstack-gate: Mechanism to allow easier fine-tuning of devstack-gate services  https://review.openstack.org/164874
2015-03-16T22:35:25  <SpamapS> jbooboo: indeed, I'm investigating now
2015-03-16T22:35:26  *** garyh has joined #openstack-infra
2015-03-16T22:35:35  *** otter768 has joined #openstack-infra
2015-03-16T22:35:42  <openstackgerrit> Merged openstack-infra/project-config: Use job templates for gerritlib builds  https://review.openstack.org/156068
2015-03-16T22:36:17  *** peristeri has quit IRC
2015-03-16T22:36:34  <SpamapS> gearman -c 1 -h localhost -w -f something   should be equivalent of   w = gear.Worker(client_id='foo'); w.addServer('localhost');w.registerFunction('something'); print(w.getJob())
2015-03-16T22:36:38  <jhesketh> quantumfly: I just approved 164866, but if you're concerned about it needing more eyeballs we have until the images rebuild to have others look at it and push up other chnages
2015-03-16T22:37:00  <quantumfly> jhesketh: ya mostly just wondering if the relative paths in an index file that doesn't know about swift will work
2015-03-16T22:37:08  <quantumfly> jhesketh: I think they will because your browser should do the correct thing
2015-03-16T22:37:09  <SpamapS> but the former does gets a NO_JOB while the latter gets the job
2015-03-16T22:37:15  <quantumfly> jhesketh: so it should all just work
2015-03-16T22:37:29  *** salv-orl_ has joined #openstack-infra
2015-03-16T22:38:21  <jhesketh> quantumfly: hmm, interesting question... I think it should too
2015-03-16T22:38:41  *** nelsnelson has joined #openstack-infra
2015-03-16T22:39:02  *** salv-orlando has quit IRC
2015-03-16T22:39:20  <openstackgerrit> Merged openstack-infra/project-config: Stop running useless tests on horizon  https://review.openstack.org/164344
2015-03-16T22:39:29  <openstackgerrit> Merged openstack-infra/project-config: Remove jobs for Gerrit 2.4.x  https://review.openstack.org/164821
2015-03-16T22:40:01  *** otter768 has quit IRC
2015-03-16T22:43:34  *** dims has quit IRC
2015-03-16T22:43:51  <foobio> pleia2: leprechauns are also welcome to attend
2015-03-16T22:43:58  *** sigmavirus24 is now known as sigmavirus24_awa
2015-03-16T22:44:41  *** nelsnels_ has joined #openstack-infra
2015-03-16T22:44:46  <pleia2> leprechauns++
2015-03-16T22:45:06  <pleia2> quantumfly: can you take a quick look at https://review.openstack.org/#/c/164311/ ?
2015-03-16T22:45:09  * foobio also has several jokes about nasty green beer
2015-03-16T22:45:16  *** nelsnelson has quit IRC
2015-03-16T22:45:20  <openstackgerrit> Merged openstack-infra/project-config: Do not generate index.html if one exists  https://review.openstack.org/164866
2015-03-16T22:46:02  <pleia2> beer that can by dyed green typically aren't worth my time :)
2015-03-16T22:46:14  <quantumfly> pleia2: ya let me test in a container
2015-03-16T22:46:32  <pleia2> quantumfly: I think we fixed this with crinkle and co that day we were building images, and I tested it in a 14.04 vm just now
2015-03-16T22:46:42  *** Somay has joined #openstack-infra
2015-03-16T22:46:43  *** dims has joined #openstack-infra
2015-03-16T22:47:19  <openstackgerrit> Ian Wienand proposed openstack-infra/system-config: Add Fedora 21 dib image  https://review.openstack.org/163982
2015-03-16T22:47:26  *** hrubi has quit IRC
2015-03-16T22:47:34  *** dims has quit IRC
2015-03-16T22:47:49  *** dims has joined #openstack-infra
2015-03-16T22:47:56  <quantumfly> pleia2: you did `gem install rspec` or ran the command with a version?
2015-03-16T22:48:17  <pleia2> quantumfly: no version
2015-03-16T22:48:43  <foobio> infra o' team
2015-03-16T22:48:53  <anteaya> mtreinish: I'm looking at https://review.openstack.org/#/c/164730/1
2015-03-16T22:49:09  *** garyh has quit IRC
2015-03-16T22:49:21  <anteaya> mtreinish: we had a chat in the third party meeting this morning, the original patch upset their systems, and the cap fixed them
2015-03-16T22:49:37  <anteaya> mtreinish: any thoughts on how to proceed keeping in mind this might affect them?
2015-03-16T22:50:25  <ianw> jbooboo: do you want me to just merge this down to the original change?  -> https://review.openstack.org/#/c/164859/
2015-03-16T22:50:51  <anteaya> mtreinish: for reference: 15:20:29 <rhe00> are there any infra changes planned for this week? http://eavesdrop.openstack.org/meetings/third_party/2015/third_party.2015-03-16-15.03.log.html
2015-03-16T22:51:24  <pleia2> anteaya: so to move forward with the latest version of subunit2sql they will need to do the schema update at some point, until then they can edit their instances to cap the version themselves (as rhe00 did on Friday)
2015-03-16T22:51:31  *** shashankhegde has quit IRC
2015-03-16T22:52:07  <jbooboo> ianw: if you want; i didn't want to lose the reviews we already had.  you can squash it if you want, or we could just merge it right afterwords.
2015-03-16T22:53:04  *** Slower has quit IRC
2015-03-16T22:53:12  <anteaya> pleia2: okay, care to help me draft an email (if nothing else to give us something to point to)
2015-03-16T22:53:20  <anteaya> or should we just tell them when the roll in
2015-03-16T22:53:22  <jbooboo> anteaya: well, i mean, i expect we will make hundreds of infra changes this week
2015-03-16T22:53:33  <anteaya> jbooboo: I know, that is what I told them
2015-03-16T22:53:47  <anteaya> this was just the start of the conversation
2015-03-16T22:53:48  <jbooboo> anteaya: i also would expect the version problem to have broken us too
2015-03-16T22:54:01  <anteaya> okay
2015-03-16T22:54:11  <anteaya> am I an idiot for asking?
2015-03-16T22:54:15  <pleia2> yeah, it would have if I didn't push through the cap
2015-03-16T22:54:25  <jbooboo> anteaya: i don't think so
2015-03-16T22:54:31  <openstackgerrit> Flavio Fernandes proposed openstack-infra/devstack-gate: Translate semi-colon into newline when parsing $DEVSTACK_LOCAL_CONFIG  https://review.openstack.org/164895
2015-03-16T22:54:37  <anteaya> jbooboo: okay thanks
2015-03-16T22:54:40  *** Slower has joined #openstack-infra
2015-03-16T22:54:47  <anteaya> pleia2: thanks for the cap
2015-03-16T22:54:53  <pleia2> anteaya: instead of a specific email, perhaps we can get mtreinish to email release notes for the new version of subunit2sql noting the schema change? then point 3rd party there
2015-03-16T22:55:04  <anteaya> oh I like that
2015-03-16T22:55:14  <anteaya> mtreinish: can we sell you on some release notes?
2015-03-16T22:55:24  *** sdake has quit IRC
2015-03-16T22:55:37  <ianw> jbooboo: well you have the keys to the castle :)  i will go with whatever you think is faster
2015-03-16T22:56:15  *** shashankhegde has joined #openstack-infra
2015-03-16T22:56:25  <quantumfly> pleia2: anteaya confirmed `gem install puppetlabs_spec_helper` works now
2015-03-16T22:56:32  <quantumfly> pleia2: so the removal of the workaround should be fine
2015-03-16T22:56:40  <pleia2> quantumfly: care to +A?
2015-03-16T22:56:51  <quantumfly> pleia2: ya I can get it
2015-03-16T22:57:29  <pleia2> quantumfly: and thanks, yay!
2015-03-16T22:57:30  <anteaya> quantumfly: yay
2015-03-16T22:57:46  <anteaya> that only took what, a couple of months?
2015-03-16T22:57:57  <anteaya> pleia2: let me know what you think of my comment: https://review.openstack.org/#/c/164730/
2015-03-16T22:58:37  <pleia2> anteaya: thumbs up
2015-03-16T22:58:44  <anteaya> thanks
2015-03-16T22:58:52  *** yamamoto has joined #openstack-infra
2015-03-16T22:58:54  <anteaya> I appreciate the help getting the larger picture
2015-03-16T22:59:09  <pleia2> sure thing
2015-03-16T23:00:57  <Somay> Can anyone review my patch related to jenkins job builder here? I am a new contributor and would be really happy to get my first patch merged :) https://review.openstack.org/#/c/163137/
2015-03-16T23:01:00  <jbooboo> anteaya: are third-party folks running their own subunit2sql databases or pulling data from ours?
2015-03-16T23:01:07  *** amotoki has quit IRC
2015-03-16T23:01:11  <Somay> (sorry to interrupt)
2015-03-16T23:01:14  *** Sukhdev has quit IRC
2015-03-16T23:01:34  <quantumfly> jbooboo: I think pulling from ours
2015-03-16T23:01:38  <anteaya> jbooboo: I don't really know as I didn't ask that question
2015-03-16T23:01:58  <jbooboo> quantumfly: so i think that means that they were broken because _our_ db did not have the schema run, not because they were using their own
2015-03-16T23:02:06  <jbooboo> anteaya: ^
2015-03-16T23:02:07  <quantumfly> jbooboo: correct
2015-03-16T23:02:08  <anteaya> rhe00 was using asselin's scripts and the change broke his scripts
2015-03-16T23:02:11  <jbooboo> schema change
2015-03-16T23:02:23  <anteaya> jbooboo: ah yes, I would go with that assumption
2015-03-16T23:02:36  <jbooboo> so no action is needed on the part of third-party folks doing that
2015-03-16T23:02:43  <anteaya> oh good
2015-03-16T23:02:55  <anteaya> I felt it my duty to at least ask
2015-03-16T23:02:56  <jbooboo> if anyone is running their own subunit2sql database, then they would need to run a schema change manually
2015-03-16T23:03:01  <anteaya> since they were a bit upset today
2015-03-16T23:03:09  <anteaya> okay
2015-03-16T23:03:13  <jbooboo> but if they are doing that, they are probably not using a copy of our prep scripts
2015-03-16T23:03:18  <quantumfly> anteaya: they are welcome to build images without using our database
2015-03-16T23:03:22  <anteaya> awesome
2015-03-16T23:03:26  <quantumfly> anteaya: not sure that this is something to get upset over
2015-03-16T23:03:36  <anteaya> quantumfly: what they know how to do and what they cargo cult
2015-03-16T23:03:48  <anteaya> the problem is I don't know myself
2015-03-16T23:03:53  <pleia2> unfortunately I think many use the scripts without a firm understanding of what's going on
2015-03-16T23:03:58  *** patrickeast_ has joined #openstack-infra
2015-03-16T23:04:08  <anteaya> since I've been holding hands and offering tissues for the last 18 months
2015-03-16T23:04:14  <anteaya> I would dearly like ot know myself
2015-03-16T23:04:21  *** patrickeast has quit IRC
2015-03-16T23:04:21  *** patrickeast_ is now known as patrickeast
2015-03-16T23:04:33  <anteaya> but thanks for telling me, I appreciate it
2015-03-16T23:04:44  <anteaya> and will try to work it into upcoming questions about it
2015-03-16T23:04:59  <openstackgerrit> Merged openstack-infra/project-config: Remove unneeded workaround  https://review.openstack.org/164311
2015-03-16T23:05:02  <anteaya> pleia2: oh any understanding at all
2015-03-16T23:05:12  <anteaya> firm is a pipedream
2015-03-16T23:05:27  <pleia2> anteaya: I was trying to be diplomatic :)
2015-03-16T23:05:31  <anteaya> ha ha ha
2015-03-16T23:05:40  <anteaya> go you
2015-03-16T23:05:52  <anteaya> what was that line you used?
2015-03-16T23:05:58  <anteaya> my delicate is all used up
2015-03-16T23:06:07  <anteaya> that is the best line ever
2015-03-16T23:06:08  <pleia2> sounds like me
2015-03-16T23:06:11  <pleia2> hehe
2015-03-16T23:06:12  <anteaya> that was you
2015-03-16T23:06:16  <anteaya> I loved it
2015-03-16T23:06:18  <anteaya> still do
2015-03-16T23:06:28  *** claudiub has joined #openstack-infra
2015-03-16T23:07:03  <anteaya> I need to go for a walk
2015-03-16T23:07:11  <pleia2> enjoy
2015-03-16T23:07:16  <anteaya> thanks
2015-03-16T23:07:23  <mtreinish> pleia2, anteaya: I have no idea why people running 3rd party ci systems would be using the subunit2sql stuff against infra's db to be honest (or at all really)
2015-03-16T23:08:09  <mtreinish> it'd be great if they were running there own db, I'd just be surprised
2015-03-16T23:08:16  *** mwagner_lap has joined #openstack-infra
2015-03-16T23:08:57  <quantumfly>  because they use our image build scripts
2015-03-16T23:09:51  *** ChuckC has joined #openstack-infra
2015-03-16T23:10:07  *** lnr has joined #openstack-infra
2015-03-16T23:10:36  <mtreinish> quantumfly: yeah I got that, it's just surprising to me that they wouldn't look at what they're running and realize it had no real benefit for them
2015-03-16T23:10:53  * mtreinish should probably read the backscroll before talking
2015-03-16T23:11:09  <quantumfly> Somay: done
2015-03-16T23:14:26  *** thedodd has quit IRC
2015-03-16T23:15:05  *** BlackMustard has joined #openstack-infra
2015-03-16T23:15:31  *** lnr has left #openstack-infra
2015-03-16T23:16:54  *** gyee has quit IRC
2015-03-16T23:18:12  *** dims has quit IRC
2015-03-16T23:18:28  *** dims has joined #openstack-infra
2015-03-16T23:19:38  *** r-daneel has quit IRC
2015-03-16T23:20:31  *** andreykurilin_ has joined #openstack-infra
2015-03-16T23:23:12  *** salv-orl_ has quit IRC
2015-03-16T23:24:36  <Somay> quantumfly: Thanks! Those are the default values that the plugin specifies
2015-03-16T23:24:44  *** sdake has joined #openstack-infra
2015-03-16T23:24:50  *** wenlock has quit IRC
2015-03-16T23:24:54  <quantumfly> Somay: ok, then we just need to raise an error when they occur
2015-03-16T23:24:55  *** baoli has joined #openstack-infra
2015-03-16T23:25:08  <Somay> sure, i’ll make that change
2015-03-16T23:25:14  <foobio> ianw is suggesting bindep should have some better error reporting if run on systems lacking an lsb_release executable (see inline comments at https://review.openstack.org/157979 for details). trying to decide if i should detect and raise a special exception for that condition or take another route, and also what the error should recomment to the end user given that the package providing it will have
2015-03-16T23:25:15  <foobio> different names on different platforms
2015-03-16T23:25:29  *** ZZelle has quit IRC
2015-03-16T23:25:54  <quantumfly> foobio: doesn't bindep already map package names?
2015-03-16T23:26:08  <quantumfly> foobio: should be easy enough to use bindep recursively to write the error message?
2015-03-16T23:26:15  <foobio> it does, but... it uses lsb_release to decide what platform it's being run on. so chicken and egg
2015-03-16T23:26:24  <quantumfly> oh right
2015-03-16T23:26:36  <quantumfly> foobio: I think you just say missing lsb_release executable and let others figure it out?
2015-03-16T23:26:49  <foobio> i could just punt and say "figure it out" yeah
2015-03-16T23:27:00  *** amitgandhinz has joined #openstack-infra
2015-03-16T23:27:46  <foobio> as for the bigger question, there's only one method calling lsb_release but it's entered from a couple places in main. and in a module which doesn't currently handle any ui feedback. i'm guessing raising a custom exception is the best way to signal that problem?
2015-03-16T23:28:11  *** mpopow has joined #openstack-infra
2015-03-16T23:28:31  <ianw> foobio: yeah, i proposed devstack do a similar thing, except that does have a go at installing for you because devstack takes over everything -> https://review.openstack.org/#/c/117104/
2015-03-16T23:28:58  <SpamapS> jbooboo: I can confirm that something in geard doesn't work with the C based cli gearman command. I wonder if we can add an optional bit to the functional tests if we have 'gearman' in our PATH
2015-03-16T23:29:04  *** soren has quit IRC
2015-03-16T23:29:07  *** BlackMustard has quit IRC
2015-03-16T23:29:38  <ianw> foobio: that probably matches the behaviour of setuptools etc which is usually "here's a backtrace..."
2015-03-16T23:29:57  <foobio> ianw: well, it does that already
2015-03-16T23:30:20  <foobio> it will try to exec lsb_release, fail to find it, and raise an exception telling you that
2015-03-16T23:30:40  <foobio> because python
2015-03-16T23:31:21  *** amitgandhinz has quit IRC
2015-03-16T23:31:37  *** salv-orlando has joined #openstack-infra
2015-03-16T23:31:39  <ianw> foobio: yeah, i just mean if the exception has in it something more obvious than a failed exec that's about right, even if it doesn't give a nice formatted output
2015-03-16T23:32:17  *** ddieterly has joined #openstack-infra
2015-03-16T23:33:12  <foobio> okay, i'll see what i can do to catch the oserror and reraise it along with a custom exception. i just hate masking exceptions with other exceptions
2015-03-16T23:33:12  <ianw> the exec failure is obvious to python developers who see it and then correlate it with the code, but a bit generically unfriendly ... and having tryed to use lsb_release generically i do know that it is a common issue that it isn't there yet, so people will hit it
2015-03-16T23:34:08  <foobio> may make it easier on less clue-endowed end users but it angers developers who try to actually troubleshoot the exception
2015-03-16T23:34:26  <foobio> i'll find a happy medium
2015-03-16T23:35:11  <foobio> maybe i'll do what i was hesitant to do initially and add a lbyl conditional
2015-03-16T23:35:14  *** salv-orlando has quit IRC
2015-03-16T23:36:17  <ianw> the line between user and developer in openstack is pretty thin, so there's that :)
2015-03-16T23:36:19  *** BlackMustard has joined #openstack-infra
2015-03-16T23:37:25  <foobio> ianw: worth noting that the primary use case for bindep is "i want to run `tox -e py27` on nova but don't know what distro packages i need to support the python dependencies for it"
2015-03-16T23:37:42  *** Qiming has joined #openstack-infra
2015-03-16T23:39:22  <foobio> (for example, libxml/xslt headers to be able to compile c extensions for teh lxml module)
2015-03-16T23:40:08  *** shashankhegde has quit IRC
2015-03-16T23:40:12  *** ajmiller_ has joined #openstack-infra
2015-03-16T23:40:12  <foobio> so, yeah, currently fairly developer-centric, though i wouldn't ignore the possibility it could find use for less dev-oriented tasks too
2015-03-16T23:40:40  <foobio> which is why i'm entertaining slightly more user-friendly error handling
2015-03-16T23:41:24  <openstackgerrit> Michael Krotscheck proposed openstack-infra/storyboard-webclient: Added null check for story creator_id.  https://review.openstack.org/164877
2015-03-16T23:41:26  <ianw> right, it's only logical for devstack to use it rather than it's hand-curated list of the same
2015-03-16T23:41:28  *** jaypipes has quit IRC
2015-03-16T23:42:00  *** r-daneel has joined #openstack-infra
2015-03-16T23:44:13  *** ajmiller has quit IRC
2015-03-16T23:44:31  *** signed8bit is now known as signed8bit_ZZZzz
2015-03-16T23:45:08  <openstackgerrit> Somay Jain proposed openstack-infra/jenkins-job-builder: Adding more configurable options in Notifications plugin  https://review.openstack.org/163137
2015-03-16T23:45:33  <ianw> it still seems a shame that distro packagers have figured this stuff out, but their info is really locked in their packages.  providing a collaboration point is a positive
2015-03-16T23:45:41  *** sdake__ has joined #openstack-infra
2015-03-16T23:45:57  <openstackgerrit> Maru Newby proposed openstack-infra/project-config: Configure neutron to gate on neutron-dsvm-api job  https://review.openstack.org/164886
2015-03-16T23:46:04  *** Somay has quit IRC
2015-03-16T23:46:07  *** tsg has joined #openstack-infra
2015-03-16T23:47:24  *** r-daneel has quit IRC
2015-03-16T23:47:38  <SpamapS> ERROR:gear.Server:Received unknown packet: <gear.Packet 0x7fb6decf9f50 type: UNKNOWN>
2015-03-16T23:47:39  <quantumfly> jbooboo: mtreinish so did we manage to correct the database for subunit2sql?
2015-03-16T23:47:41  *** Somay has joined #openstack-infra
2015-03-16T23:48:04  *** andreykurilin_ has quit IRC
2015-03-16T23:48:08  <StevenK> SpamapS: Helpful.
2015-03-16T23:48:10  <foobio> well, to some extent i get the feeling some significant percentage of distro contributors resent/avoid lsb
2015-03-16T23:48:12  *** dboik has joined #openstack-infra
2015-03-16T23:48:22  <foobio> ianw: ^
2015-03-16T23:48:46  <quantumfly> foobio: unfortunately as a distro user its the only sane tool that does that job
2015-03-16T23:49:03  *** gokrokve has quit IRC
2015-03-16T23:49:04  <foobio> hence their lack of priority around having lsb tools installed by default
2015-03-16T23:49:19  *** sdake has quit IRC
2015-03-16T23:49:30  <foobio> quantumfly: as a _cross-distro_ user yes. as a single-distro user much less so
2015-03-16T23:49:34  <StevenK> /etc/debian_version or /etc/redhat-release, but they aren't an answer
2015-03-16T23:49:46  *** dboik_ has joined #openstack-infra
2015-03-16T23:49:52  <StevenK> I did like lsb_release working on Ubuntu
2015-03-16T23:50:23  <SpamapS> IIRC, LSB in its original incarnation included some really bad redhatisms and was resented by all.. but has since been picked apart into useful cross-distro tools.
2015-03-16T23:50:39  <openstackgerrit> Michael Johnson proposed openstack-infra/git-review: Choose correct branch for rebase when submitting  https://review.openstack.org/158877
2015-03-16T23:50:44  <foobio> agreed. but the resentment still lingers i think
2015-03-16T23:51:01  <greghaynes> quantumfly: so for this pypi-mirror periodic job, do I put it under the openstack/pypi-mirror job?
2015-03-16T23:51:01  <ianw> there is redhat-lsb-core package now which installs a reasonable amount, but the original redhat-lsb package brings in the kitchen sink
2015-03-16T23:51:03  *** ashleighfarnham has quit IRC
2015-03-16T23:51:12  *** sputnik13 has joined #openstack-infra
2015-03-16T23:51:16  <greghaynes> Its wierd since it doesnt need to actually be tied to a repo of any kind
2015-03-16T23:51:22  <SpamapS> ianw: yeah, because the original LSB definition included X
2015-03-16T23:51:35  <quantumfly> greghaynes: I wouldn't, I would create a meta project instead
2015-03-16T23:51:43  <foobio> redhat-lsb-core is btw the package which provides the lsb_release executable on rh derivatives (as opposed to the lsb-release package on debian derivatives)
2015-03-16T23:51:49  <greghaynes> quantumfly: Is there an example of that I can grep for?
2015-03-16T23:51:54  *** dannywilson has quit IRC
2015-03-16T23:51:54  <quantumfly> greghaynes: let me check
2015-03-16T23:52:24  *** ajmiller_ has quit IRC
2015-03-16T23:52:28  *** tsg has quit IRC
2015-03-16T23:53:01  <quantumfly> greghaynes: there was at one time but I don't see it anymore. Actuall I would put it under requirements
2015-03-16T23:53:07  <quantumfly> greghaynes: since we want to job to fire on requirements changes
2015-03-16T23:53:13  *** dboik has quit IRC
2015-03-16T23:53:22  <greghaynes> ah. Yep
2015-03-16T23:53:42  <greghaynes> although I think we also want it to fire under pypi-mirror changes too
2015-03-16T23:54:03  <greghaynes> since theres *tons* of those (not really)
2015-03-16T23:54:04  * foobio senses jobs he deleted getting re-added
2015-03-16T23:54:15  <greghaynes> foobio: :)
2015-03-16T23:54:20  <quantumfly> foobio: yes, it turns out that we need wheels
2015-03-16T23:54:29  *** Somay has quit IRC
2015-03-16T23:54:40  <mkj_wk> foobio: that is definitely an improvement
2015-03-16T23:54:52  *** Qiming has quit IRC
2015-03-16T23:54:56  <mkj_wk> foobio: querying Gerry for a branch at submit time had become useless :)
2015-03-16T23:55:07  <quantumfly> greghaynes: only if you have a similar job that just builds a mirror but doesn't copy any fiels
2015-03-16T23:55:14  <foobio> quantumfly: heh. so now it will be used to generate a list of packages which need wheels built and cached?
2015-03-16T23:55:15  <mkj_wk> foobio: this change also removed the need (at least for now) for my sleep hack
2015-03-16T23:55:20  *** bknudson has joined #openstack-infra
2015-03-16T23:55:21  <mkj_wk> so it's a much cleaner patch now
2015-03-16T23:55:26  <quantumfly> foobio: it will build the wheels too
2015-03-16T23:55:37  <quantumfly> foobio: it always did that, we just lost the feature when we went to bandersnatch
2015-03-16T23:55:44  <foobio> mkj_wk: great news
2015-03-16T23:56:02  <foobio> quantumfly: build wheels for us to host from our mirror, or pre-caching them on nodepool images?
2015-03-16T23:56:21  <quantumfly> foobio: both, we will host them on our mirror then nodepool images will use that to cache the wheels
2015-03-16T23:56:28  <greghaynes> quantumfly: Why? I mean as a post job incase we find a bug in pypi-mirror where it, for example, fails on building certain wheels
2015-03-16T23:56:36  * mkj_wk crosses his fingers that this is not a "free puppy" now :)
2015-03-16T23:56:42  <quantumfly> greghaynes: I think we would just trigger the job to run in that case
2015-03-16T23:56:47  <quantumfly> greghaynes: rather than have it run every time
2015-03-16T23:57:05  <quantumfly> foobio: the problem with doing wheel builds on images during build time is you hve to install all those packages that ou are trying to install at run time
2015-03-16T23:57:07  <greghaynes> ah, fair enough
2015-03-16T23:57:08  *** camunoz has joined #openstack-infra
2015-03-16T23:57:18  <quantumfly> foobio: defeats the purpose
2015-03-16T23:57:58  *** alexpilotti has quit IRC
2015-03-16T23:58:20  <foobio> quantumfly: great pooint
2015-03-16T23:58:21  <greghaynes> Yes, although as I keep liking to point out this doesnt exclude that, we can just pull them into the image at build time and not have the build deps issue
2015-03-16T23:58:23  <foobio> point too
2015-03-16T23:58:33  <greghaynes> them being the wheels
2015-03-16T23:58:34  <quantumfly> greghaynes: yup
